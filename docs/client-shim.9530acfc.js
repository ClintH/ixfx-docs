async function Wv(){const{hydrateShadowRoots:e}=await import("./chunks/template-shadowroot.b8b05588.js");e(document.body)}const Zu=new DOMParser().parseFromString('<p><template shadowroot="open"></template></p>',"text/html",{includeShadowRoots:!0}).querySelector("p");(!Zu||!Zu.shadowRoot)&&Wv();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var qs;const Vr=globalThis.trustedTypes,Qu=Vr?Vr.createPolicy("lit-html",{createHTML:e=>e}):void 0,yt=`lit$${(Math.random()+"").slice(9)}$`,ta="?"+yt,Gv=`<${ta}>`,Wr=document,Nn=(e="")=>Wr.createComment(e),Tn=e=>e===null||typeof e!="object"&&typeof e!="function",pc=Array.isArray,yc=e=>{var r;return pc(e)||typeof((r=e)===null||r===void 0?void 0:r[Symbol.iterator])=="function"},vn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,el=/-->/g,tl=/>/g,Qt=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,rl=/'/g,nl=/"/g,mc=/^(?:script|style|textarea|title)$/i,Jv=e=>(r,...n)=>({_$litType$:e,strings:r,values:n}),ZA=Jv(1),zt=Symbol.for("lit-noChange"),De=Symbol.for("lit-nothing"),il=new WeakMap,gc=(e,r,n)=>{var i,s;const o=(i=n?.renderBefore)!==null&&i!==void 0?i:r;let a=o._$litPart$;if(a===void 0){const u=(s=n?.renderBefore)!==null&&s!==void 0?s:null;o._$litPart$=a=new rn(r.insertBefore(Nn(),u),u,void 0,n??{})}return a._$AI(e),a},zr=Wr.createTreeWalker(Wr,129,null,!1),wc=(e,r)=>{const n=e.length-1,i=[];let s,o=r===2?"<svg>":"",a=vn;for(let l=0;l<n;l++){const c=e[l];let h,f,d=-1,v=0;for(;v<c.length&&(a.lastIndex=v,f=a.exec(c),f!==null);)v=a.lastIndex,a===vn?f[1]==="!--"?a=el:f[1]!==void 0?a=tl:f[2]!==void 0?(mc.test(f[2])&&(s=RegExp("</"+f[2],"g")),a=Qt):f[3]!==void 0&&(a=Qt):a===Qt?f[0]===">"?(a=s??vn,d=-1):f[1]===void 0?d=-2:(d=a.lastIndex-f[2].length,h=f[1],a=f[3]===void 0?Qt:f[3]==='"'?nl:rl):a===nl||a===rl?a=Qt:a===el||a===tl?a=vn:(a=Qt,s=void 0);const m=a===Qt&&e[l+1].startsWith("/>")?" ":"";o+=a===vn?c+Gv:d>=0?(i.push(h),c.slice(0,d)+"$lit$"+c.slice(d)+yt+m):c+yt+(d===-2?(i.push(void 0),l):m)}const u=o+(e[n]||"<?>")+(r===2?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[Qu!==void 0?Qu.createHTML(u):u,i]};class zn{constructor({strings:r,_$litType$:n},i){let s;this.parts=[];let o=0,a=0;const u=r.length-1,l=this.parts,[c,h]=wc(r,n);if(this.el=zn.createElement(c,i),zr.currentNode=this.el.content,n===2){const f=this.el.content,d=f.firstChild;d.remove(),f.append(...d.childNodes)}for(;(s=zr.nextNode())!==null&&l.length<u;){if(s.nodeType===1){if(s.hasAttributes()){const f=[];for(const d of s.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(yt)){const v=h[a++];if(f.push(d),v!==void 0){const m=s.getAttribute(v.toLowerCase()+"$lit$").split(yt),x=/([.?@])?(.*)/.exec(v);l.push({type:1,index:o,name:x[2],strings:m,ctor:x[1]==="."?Dc:x[1]==="?"?bc:x[1]==="@"?Ec:Yn})}else l.push({type:6,index:o})}for(const d of f)s.removeAttribute(d)}if(mc.test(s.tagName)){const f=s.textContent.split(yt),d=f.length-1;if(d>0){s.textContent=Vr?Vr.emptyScript:"";for(let v=0;v<d;v++)s.append(f[v],Nn()),zr.nextNode(),l.push({type:2,index:++o});s.append(f[d],Nn())}}}else if(s.nodeType===8)if(s.data===ta)l.push({type:2,index:o});else{let f=-1;for(;(f=s.data.indexOf(yt,f+1))!==-1;)l.push({type:7,index:o}),f+=yt.length-1}o++}}static createElement(r,n){const i=Wr.createElement("template");return i.innerHTML=r,i}}function hr(e,r,n=e,i){var s,o,a,u;if(r===zt)return r;let l=i!==void 0?(s=n._$Cl)===null||s===void 0?void 0:s[i]:n._$Cu;const c=Tn(r)?void 0:r._$litDirective$;return l?.constructor!==c&&((o=l?._$AO)===null||o===void 0||o.call(l,!1),c===void 0?l=void 0:(l=new c(e),l._$AT(e,n,i)),i!==void 0?((a=(u=n)._$Cl)!==null&&a!==void 0?a:u._$Cl=[])[i]=l:n._$Cu=l),l!==void 0&&(r=hr(e,l._$AS(e,r.values),l,i)),r}class xc{constructor(r,n){this.v=[],this._$AN=void 0,this._$AD=r,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(r){var n;const{el:{content:i},parts:s}=this._$AD,o=((n=r?.creationScope)!==null&&n!==void 0?n:Wr).importNode(i,!0);zr.currentNode=o;let a=zr.nextNode(),u=0,l=0,c=s[0];for(;c!==void 0;){if(u===c.index){let h;c.type===2?h=new rn(a,a.nextSibling,this,r):c.type===1?h=new c.ctor(a,c.name,c.strings,this,r):c.type===6&&(h=new Ac(a,this,r)),this.v.push(h),c=s[++l]}u!==c?.index&&(a=zr.nextNode(),u++)}return o}m(r){let n=0;for(const i of this.v)i!==void 0&&(i.strings!==void 0?(i._$AI(r,i,n),n+=i.strings.length-2):i._$AI(r[n])),n++}}class rn{constructor(r,n,i,s){var o;this.type=2,this._$AH=De,this._$AN=void 0,this._$AA=r,this._$AB=n,this._$AM=i,this.options=s,this._$Cg=(o=s?.isConnected)===null||o===void 0||o}get _$AU(){var r,n;return(n=(r=this._$AM)===null||r===void 0?void 0:r._$AU)!==null&&n!==void 0?n:this._$Cg}get parentNode(){let r=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&r.nodeType===11&&(r=n.parentNode),r}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(r,n=this){r=hr(this,r,n),Tn(r)?r===De||r==null||r===""?(this._$AH!==De&&this._$AR(),this._$AH=De):r!==this._$AH&&r!==zt&&this.$(r):r._$litType$!==void 0?this.T(r):r.nodeType!==void 0?this.k(r):yc(r)?this.S(r):this.$(r)}A(r,n=this._$AB){return this._$AA.parentNode.insertBefore(r,n)}k(r){this._$AH!==r&&(this._$AR(),this._$AH=this.A(r))}$(r){this._$AH!==De&&Tn(this._$AH)?this._$AA.nextSibling.data=r:this.k(Wr.createTextNode(r)),this._$AH=r}T(r){var n;const{values:i,_$litType$:s}=r,o=typeof s=="number"?this._$AC(r):(s.el===void 0&&(s.el=zn.createElement(s.h,this.options)),s);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===o)this._$AH.m(i);else{const a=new xc(o,this),u=a.p(this.options);a.m(i),this.k(u),this._$AH=a}}_$AC(r){let n=il.get(r.strings);return n===void 0&&il.set(r.strings,n=new zn(r)),n}S(r){pc(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,s=0;for(const o of r)s===n.length?n.push(i=new rn(this.A(Nn()),this.A(Nn()),this,this.options)):i=n[s],i._$AI(o),s++;s<n.length&&(this._$AR(i&&i._$AB.nextSibling,s),n.length=s)}_$AR(r=this._$AA.nextSibling,n){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,n);r&&r!==this._$AB;){const s=r.nextSibling;r.remove(),r=s}}setConnected(r){var n;this._$AM===void 0&&(this._$Cg=r,(n=this._$AP)===null||n===void 0||n.call(this,r))}}class Yn{constructor(r,n,i,s,o){this.type=1,this._$AH=De,this._$AN=void 0,this.element=r,this.name=n,this._$AM=s,this.options=o,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=De}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(r,n=this,i,s){const o=this.strings;let a=!1;if(o===void 0)r=hr(this,r,n,0),a=!Tn(r)||r!==this._$AH&&r!==zt,a&&(this._$AH=r);else{const u=r;let l,c;for(r=o[0],l=0;l<o.length-1;l++)c=hr(this,u[i+l],n,l),c===zt&&(c=this._$AH[l]),a||(a=!Tn(c)||c!==this._$AH[l]),c===De?r=De:r!==De&&(r+=(c??"")+o[l+1]),this._$AH[l]=c}a&&!s&&this.C(r)}C(r){r===De?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,r??"")}}class Dc extends Yn{constructor(){super(...arguments),this.type=3}C(r){this.element[this.name]=r===De?void 0:r}}const Yv=Vr?Vr.emptyScript:"";class bc extends Yn{constructor(){super(...arguments),this.type=4}C(r){r&&r!==De?this.element.setAttribute(this.name,Yv):this.element.removeAttribute(this.name)}}class Ec extends Yn{constructor(r,n,i,s,o){super(r,n,i,s,o),this.type=5}_$AI(r,n=this){var i;if((r=(i=hr(this,r,n,0))!==null&&i!==void 0?i:De)===zt)return;const s=this._$AH,o=r===De&&s!==De||r.capture!==s.capture||r.once!==s.once||r.passive!==s.passive,a=r!==De&&(s===De||o);o&&this.element.removeEventListener(this.name,this,s),a&&this.element.addEventListener(this.name,this,r),this._$AH=r}handleEvent(r){var n,i;typeof this._$AH=="function"?this._$AH.call((i=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&i!==void 0?i:this.element,r):this._$AH.handleEvent(r)}}class Ac{constructor(r,n,i){this.element=r,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(r){hr(this,r)}}const Kv={P:"$lit$",L:yt,V:ta,I:1,N:wc,R:xc,D:yc,j:hr,H:rn,O:Yn,F:bc,B:Ec,W:Dc,Z:Ac},sl=window.litHtmlPolyfillSupport;sl?.(zn,rn),((qs=globalThis.litHtmlVersions)!==null&&qs!==void 0?qs:globalThis.litHtmlVersions=[]).push("2.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const _r={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Xv=e=>(...r)=>({_$litDirective$:e,values:r});class Zv{constructor(r){}get _$AU(){return this._$AM._$AU}_$AT(r,n,i){this._$Ct=r,this._$AM=n,this._$Ci=i}_$AS(r,n){return this.update(r,n)}update(r,n){return this.render(...n)}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qv=e=>e===null||typeof e!="object"&&typeof e!="function",ep=(e,r)=>{var n,i;return r===void 0?((n=e)===null||n===void 0?void 0:n._$litType$)!==void 0:((i=e)===null||i===void 0?void 0:i._$litType$)===r},tp=e=>e.strings===void 0;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{R:rp,D:np,j:_c,H:pn,Z:ip}=Kv,sp=(e,r,n={})=>{if(r._$litPart$!==void 0)throw Error("container already contains a live render");let i,s;const o=[],a=document.createTreeWalker(r,NodeFilter.SHOW_COMMENT,null,!1);let u;for(;(u=a.nextNode())!==null;){const l=u.data;if(l.startsWith("lit-part")){if(o.length===0&&i!==void 0)throw Error("there must be only one root part per container");s=op(e,u,o,n),i!=null||(i=s)}else if(l.startsWith("lit-node")){up(u,o,n);const c=u.parentElement;c.hasAttribute("defer-hydration")&&c.removeAttribute("defer-hydration")}else if(l.startsWith("/lit-part")){if(o.length===1&&s!==i)throw Error("internal error");s=ap(u,s,o)}}console.assert(i!==void 0,"there should be exactly one root part in a render container"),r._$litPart$=i},op=(e,r,n,i)=>{let s,o;if(n.length===0)o=new pn(r,null,void 0,i),s=e;else{const a=n[n.length-1];if(a.type==="template-instance")o=new pn(r,null,a.instance,i),a.instance.v.push(o),s=a.result.values[a.instancePartIndex++],a.templatePartIndex++;else if(a.type==="iterable"){o=new pn(r,null,a.part,i);const u=a.iterator.next();if(u.done)throw s=void 0,a.done=!0,Error("Unhandled shorter than expected iterable");s=u.value,a.part._$AH.push(o)}else o=new pn(r,null,a.part,i)}if(s=_c(o,s),s===zt)n.push({part:o,type:"leaf"});else if(Qv(s))n.push({part:o,type:"leaf"}),o._$AH=s;else if(ep(s)){const a="lit-part "+lp(s);if(r.data!==a)throw Error("Hydration value mismatch: Unexpected TemplateResult rendered to part");{const u=pn.prototype._$AC(s),l=new rp(u,o);n.push({type:"template-instance",instance:l,part:o,templatePartIndex:0,instancePartIndex:0,result:s}),o._$AH=l}}else np(s)?(n.push({part:o,type:"iterable",value:s,iterator:s[Symbol.iterator](),done:!1}),o._$AH=[]):(n.push({part:o,type:"leaf"}),o._$AH=s??"");return o},ap=(e,r,n)=>{if(r===void 0)throw Error("unbalanced part marker");r._$AB=e;const i=n.pop();if(i.type==="iterable"&&!i.iterator.next().done)throw Error("unexpected longer than expected iterable");if(n.length>0)return n[n.length-1].part},up=(e,r,n)=>{var i;const s=/lit-node (\d+)/.exec(e.data),o=parseInt(s[1]),a=(i=e.previousSibling)!==null&&i!==void 0?i:e.parentElement,u=r[r.length-1];if(u.type!=="template-instance")throw Error("internal error");{const l=u.instance;for(;;){const c=l._$AD.parts[u.templatePartIndex];if(c===void 0||c.type!==_r.ATTRIBUTE&&c.type!==_r.ELEMENT||c.index!==o)break;if(c.type===_r.ATTRIBUTE){const h=new c.ctor(a,c.name,c.strings,u.instance,n),f=tp(h)?u.result.values[u.instancePartIndex]:u.result.values,d=!(h.type===_r.EVENT||h.type===_r.PROPERTY);h._$AI(f,h,u.instancePartIndex,d),u.instancePartIndex+=c.strings.length-1,l.v.push(h)}else{const h=new ip(a,u.instance,n);_c(h,u.result.values[u.instancePartIndex++]),l.v.push(h)}u.templatePartIndex++}}},lp=e=>{const r=new Uint32Array(2).fill(5381);for(const n of e.strings)for(let i=0;i<n.length;i++)r[i%2]=33*r[i%2]^n.charCodeAt(i);return btoa(String.fromCharCode(...new Uint8Array(r.buffer)))};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */globalThis.litElementHydrateSupport=({LitElement:e})=>{const r=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"observedAttributes").get;Object.defineProperty(e,"observedAttributes",{get(){return[...r.call(this),"defer-hydration"]}});const n=e.prototype.attributeChangedCallback;e.prototype.attributeChangedCallback=function(a,u,l){a==="defer-hydration"&&l===null&&i.call(this),n.call(this,a,u,l)};const i=e.prototype.connectedCallback;e.prototype.connectedCallback=function(){this.hasAttribute("defer-hydration")||i.call(this)};const s=e.prototype.createRenderRoot;e.prototype.createRenderRoot=function(){return this.shadowRoot?(this._$AG=!0,this.shadowRoot):s.call(this)};const o=Object.getPrototypeOf(e.prototype).update;e.prototype.update=function(a){const u=this.render();o.call(this,a),this._$AG?(this._$AG=!1,sp(u,this.renderRoot,this.renderOptions)):gc(u,this.renderRoot,this.renderOptions)}};var ls,U,Cc,Fn,$c,ol,Ti={},Sc=[],cp=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Nt(e,r){for(var n in r)e[n]=r[n];return e}function Fc(e){var r=e.parentNode;r&&r.removeChild(e)}function zi(e,r,n){var i,s,o,a={};for(o in r)o=="key"?i=r[o]:o=="ref"?s=r[o]:a[o]=r[o];if(arguments.length>2&&(a.children=arguments.length>3?ls.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return wi(e,a,i,s,null)}function wi(e,r,n,i,s){var o={type:e,props:r,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++Cc};return s==null&&U.vnode!=null&&U.vnode(o),o}function cs(e){return e.children}function xi(e,r){this.props=e,this.context=r}function Gr(e,r){if(r==null)return e.__?Gr(e.__,e.__.__k.indexOf(e)+1):null;for(var n;r<e.__k.length;r++)if((n=e.__k[r])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Gr(e):null}function Pc(e){var r,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,r=0;r<e.__k.length;r++)if((n=e.__k[r])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Pc(e)}}function al(e){(!e.__d&&(e.__d=!0)&&Fn.push(e)&&!Ii.__r++||ol!==U.debounceRendering)&&((ol=U.debounceRendering)||$c)(Ii)}function Ii(){for(var e;Ii.__r=Fn.length;)e=Fn.sort(function(r,n){return r.__v.__b-n.__v.__b}),Fn=[],e.some(function(r){var n,i,s,o,a,u;r.__d&&(a=(o=(n=r).__v).__e,(u=n.__P)&&(i=[],(s=Nt({},o)).__v=o.__v+1,ra(u,o,s,n.__n,u.ownerSVGElement!==void 0,o.__h!=null?[a]:null,i,a??Gr(o),o.__h),Nc(i,o),o.__e!=a&&Pc(o)))})}function Bc(e,r,n,i,s,o,a,u,l,c){var h,f,d,v,m,x,_,S=i&&i.__k||Sc,M=S.length;for(n.__k=[],h=0;h<r.length;h++)if((v=n.__k[h]=(v=r[h])==null||typeof v=="boolean"?null:typeof v=="string"||typeof v=="number"||typeof v=="bigint"?wi(null,v,null,null,v):Array.isArray(v)?wi(cs,{children:v},null,null,null):v.__b>0?wi(v.type,v.props,v.key,null,v.__v):v)!=null){if(v.__=n,v.__b=n.__b+1,(d=S[h])===null||d&&v.key==d.key&&v.type===d.type)S[h]=void 0;else for(f=0;f<M;f++){if((d=S[f])&&v.key==d.key&&v.type===d.type){S[f]=void 0;break}d=null}ra(e,v,d=d||Ti,s,o,a,u,l,c),m=v.__e,(f=v.ref)&&d.ref!=f&&(_||(_=[]),d.ref&&_.push(d.ref,null,v),_.push(f,v.__c||m,v)),m!=null?(x==null&&(x=m),typeof v.type=="function"&&v.__k===d.__k?v.__d=l=Mc(v,l,e):l=kc(e,v,d,S,m,l),typeof n.type=="function"&&(n.__d=l)):l&&d.__e==l&&l.parentNode!=e&&(l=Gr(d))}for(n.__e=x,h=M;h--;)S[h]!=null&&(typeof n.type=="function"&&S[h].__e!=null&&S[h].__e==n.__d&&(n.__d=Gr(i,h+1)),zc(S[h],S[h]));if(_)for(h=0;h<_.length;h++)Tc(_[h],_[++h],_[++h])}function Mc(e,r,n){for(var i,s=e.__k,o=0;s&&o<s.length;o++)(i=s[o])&&(i.__=e,r=typeof i.type=="function"?Mc(i,r,n):kc(n,i,i,s,i.__e,r));return r}function kc(e,r,n,i,s,o){var a,u,l;if(r.__d!==void 0)a=r.__d,r.__d=void 0;else if(n==null||s!=o||s.parentNode==null)e:if(o==null||o.parentNode!==e)e.appendChild(s),a=null;else{for(u=o,l=0;(u=u.nextSibling)&&l<i.length;l+=2)if(u==s)break e;e.insertBefore(s,o),a=o}return a!==void 0?a:s.nextSibling}function hp(e,r,n,i,s){var o;for(o in n)o==="children"||o==="key"||o in r||Ri(e,o,null,n[o],i);for(o in r)s&&typeof r[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||n[o]===r[o]||Ri(e,o,r[o],n[o],i)}function ul(e,r,n){r[0]==="-"?e.setProperty(r,n):e[r]=n==null?"":typeof n!="number"||cp.test(r)?n:n+"px"}function Ri(e,r,n,i,s){var o;e:if(r==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(r in i)n&&r in n||ul(e.style,r,"");if(n)for(r in n)i&&n[r]===i[r]||ul(e.style,r,n[r])}else if(r[0]==="o"&&r[1]==="n")o=r!==(r=r.replace(/Capture$/,"")),r=r.toLowerCase()in e?r.toLowerCase().slice(2):r.slice(2),e.l||(e.l={}),e.l[r+o]=n,n?i||e.addEventListener(r,o?cl:ll,o):e.removeEventListener(r,o?cl:ll,o);else if(r!=="dangerouslySetInnerHTML"){if(s)r=r.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(r!=="href"&&r!=="list"&&r!=="form"&&r!=="tabIndex"&&r!=="download"&&r in e)try{e[r]=n??"";break e}catch{}typeof n=="function"||(n!=null&&(n!==!1||r[0]==="a"&&r[1]==="r")?e.setAttribute(r,n):e.removeAttribute(r))}}function ll(e){this.l[e.type+!1](U.event?U.event(e):e)}function cl(e){this.l[e.type+!0](U.event?U.event(e):e)}function ra(e,r,n,i,s,o,a,u,l){var c,h,f,d,v,m,x,_,S,M,X,B=r.type;if(r.constructor!==void 0)return null;n.__h!=null&&(l=n.__h,u=r.__e=n.__e,r.__h=null,o=[u]),(c=U.__b)&&c(r);try{e:if(typeof B=="function"){if(_=r.props,S=(c=B.contextType)&&i[c.__c],M=c?S?S.props.value:c.__:i,n.__c?x=(h=r.__c=n.__c).__=h.__E:("prototype"in B&&B.prototype.render?r.__c=h=new B(_,M):(r.__c=h=new xi(_,M),h.constructor=B,h.render=dp),S&&S.sub(h),h.props=_,h.state||(h.state={}),h.context=M,h.__n=i,f=h.__d=!0,h.__h=[]),h.__s==null&&(h.__s=h.state),B.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Nt({},h.__s)),Nt(h.__s,B.getDerivedStateFromProps(_,h.__s))),d=h.props,v=h.state,f)B.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(B.getDerivedStateFromProps==null&&_!==d&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(_,M),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(_,h.__s,M)===!1||r.__v===n.__v){h.props=_,h.state=h.__s,r.__v!==n.__v&&(h.__d=!1),h.__v=r,r.__e=n.__e,r.__k=n.__k,r.__k.forEach(function(k){k&&(k.__=r)}),h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(_,h.__s,M),h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(d,v,m)})}h.context=M,h.props=_,h.state=h.__s,(c=U.__r)&&c(r),h.__d=!1,h.__v=r,h.__P=e,c=h.render(h.props,h.state,h.context),h.state=h.__s,h.getChildContext!=null&&(i=Nt(Nt({},i),h.getChildContext())),f||h.getSnapshotBeforeUpdate==null||(m=h.getSnapshotBeforeUpdate(d,v)),X=c!=null&&c.type===cs&&c.key==null?c.props.children:c,Bc(e,Array.isArray(X)?X:[X],r,n,i,s,o,a,u,l),h.base=r.__e,r.__h=null,h.__h.length&&a.push(h),x&&(h.__E=h.__=null),h.__e=!1}else o==null&&r.__v===n.__v?(r.__k=n.__k,r.__e=n.__e):r.__e=fp(n.__e,r,n,i,s,o,a,l);(c=U.diffed)&&c(r)}catch(k){r.__v=null,(l||o!=null)&&(r.__e=u,r.__h=!!l,o[o.indexOf(u)]=null),U.__e(k,r,n)}}function Nc(e,r){U.__c&&U.__c(r,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(i){i.call(n)})}catch(i){U.__e(i,n.__v)}})}function fp(e,r,n,i,s,o,a,u){var l,c,h,f=n.props,d=r.props,v=r.type,m=0;if(v==="svg"&&(s=!0),o!=null){for(;m<o.length;m++)if((l=o[m])&&"setAttribute"in l==!!v&&(v?l.localName===v:l.nodeType===3)){e=l,o[m]=null;break}}if(e==null){if(v===null)return document.createTextNode(d);e=s?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,d.is&&d),o=null,u=!1}if(v===null)f===d||u&&e.data===d||(e.data=d);else{if(o=o&&ls.call(e.childNodes),c=(f=n.props||Ti).dangerouslySetInnerHTML,h=d.dangerouslySetInnerHTML,!u){if(o!=null)for(f={},m=0;m<e.attributes.length;m++)f[e.attributes[m].name]=e.attributes[m].value;(h||c)&&(h&&(c&&h.__html==c.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}if(hp(e,d,f,s,u),h)r.__k=[];else if(m=r.props.children,Bc(e,Array.isArray(m)?m:[m],r,n,i,s&&v!=="foreignObject",o,a,o?o[0]:n.__k&&Gr(n,0),u),o!=null)for(m=o.length;m--;)o[m]!=null&&Fc(o[m]);u||("value"in d&&(m=d.value)!==void 0&&(m!==e.value||v==="progress"&&!m||v==="option"&&m!==f.value)&&Ri(e,"value",m,f.value,!1),"checked"in d&&(m=d.checked)!==void 0&&m!==e.checked&&Ri(e,"checked",m,f.checked,!1))}return e}function Tc(e,r,n){try{typeof e=="function"?e(r):e.current=r}catch(i){U.__e(i,n)}}function zc(e,r,n){var i,s;if(U.unmount&&U.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||Tc(i,null,r)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){U.__e(o,r)}i.base=i.__P=null}if(i=e.__k)for(s=0;s<i.length;s++)i[s]&&zc(i[s],r,typeof e.type!="function");n||e.__e==null||Fc(e.__e),e.__e=e.__d=void 0}function dp(e,r,n){return this.constructor(e,n)}function vp(e,r,n){var i,s,o;U.__&&U.__(e,r),s=(i=typeof n=="function")?null:n&&n.__k||r.__k,o=[],ra(r,e=(!i&&n||r).__k=zi(cs,null,[e]),s||Ti,Ti,r.ownerSVGElement!==void 0,!i&&n?[n]:s?null:r.firstChild?ls.call(r.childNodes):null,o,!i&&n?n:s?s.__e:r.firstChild,i),Nc(o,e)}ls=Sc.slice,U={__e:function(e,r){for(var n,i,s;r=r.__;)if((n=r.__c)&&!n.__)try{if((i=n.constructor)&&i.getDerivedStateFromError!=null&&(n.setState(i.getDerivedStateFromError(e)),s=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(e),s=n.__d),s)return n.__E=n}catch(o){e=o}throw e}},Cc=0,xi.prototype.setState=function(e,r){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Nt({},this.state),typeof e=="function"&&(e=e(Nt({},n),this.props)),e&&Nt(n,e),e!=null&&this.__v&&(r&&this.__h.push(r),al(this))},xi.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),al(this))},xi.prototype.render=cs,Fn=[],$c=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ii.__r=0;var hs,qe,hl,Li=0,Ic=[],fl=U.__b,dl=U.__r,vl=U.diffed,pl=U.__c,yl=U.unmount;function na(e,r){U.__h&&U.__h(qe,e,Li||r),Li=0;var n=qe.__H||(qe.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function QA(e){return Li=1,pp(Lc,e)}function pp(e,r,n){var i=na(hs++,2);return i.t=e,i.__c||(i.__=[n?n(r):Lc(void 0,r),function(s){var o=i.t(i.__[0],s);i.__[0]!==o&&(i.__=[o,i.__[1]],i.__c.setState({}))}],i.__c=qe),i.__}function e_(e,r){var n=na(hs++,3);!U.__s&&Rc(n.__H,r)&&(n.__=e,n.__H=r,qe.__H.__h.push(n))}function t_(e){return Li=5,yp(function(){return{current:e}},[])}function yp(e,r){var n=na(hs++,7);return Rc(n.__H,r)&&(n.__=e(),n.__H=r,n.__h=e),n.__}function mp(){for(var e;e=Ic.shift();)if(e.__P)try{e.__H.__h.forEach(Di),e.__H.__h.forEach(go),e.__H.__h=[]}catch(r){e.__H.__h=[],U.__e(r,e.__v)}}U.__b=function(e){qe=null,fl&&fl(e)},U.__r=function(e){dl&&dl(e),hs=0;var r=(qe=e.__c).__H;r&&(r.__h.forEach(Di),r.__h.forEach(go),r.__h=[])},U.diffed=function(e){vl&&vl(e);var r=e.__c;r&&r.__H&&r.__H.__h.length&&(Ic.push(r)!==1&&hl===U.requestAnimationFrame||((hl=U.requestAnimationFrame)||function(n){var i,s=function(){clearTimeout(o),ml&&cancelAnimationFrame(i),setTimeout(n)},o=setTimeout(s,100);ml&&(i=requestAnimationFrame(s))})(mp)),qe=null},U.__c=function(e,r){r.some(function(n){try{n.__h.forEach(Di),n.__h=n.__h.filter(function(i){return!i.__||go(i)})}catch(i){r.some(function(s){s.__h&&(s.__h=[])}),r=[],U.__e(i,n.__v)}}),pl&&pl(e,r)},U.unmount=function(e){yl&&yl(e);var r,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Di(i)}catch(s){r=s}}),r&&U.__e(r,n.__v))};var ml=typeof requestAnimationFrame=="function";function Di(e){var r=qe,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),qe=r}function go(e){var r=qe;e.__c=e.__(),qe=r}function Rc(e,r){return!e||e.length!==r.length||r.some(function(n,i){return n!==e[i]})}function Lc(e,r){return typeof r=="function"?r(e):r}var gp=0;function r_(e,r,n,i,s){var o,a,u={};for(a in r)a=="ref"?o=r[a]:u[a]=r[a];var l={type:e,props:u,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--gp,__source:i,__self:s};if(typeof e=="function"&&(o=e.defaultProps))for(a in o)u[a]===void 0&&(u[a]=o[a]);return U.vnode&&U.vnode(l),l}async function n_(e,r,n){const i=async()=>{const s=document.querySelectorAll(`astro-root[uid="${e}"]`);if(s.length===0)throw new Error(`Unable to find the root for the component ${r.name}`);let o=null,a=s[0].querySelector("astro-fragment");if(a==null&&s[0].hasAttribute("tmpl")){let l=s[0].querySelector("template[data-astro-template]");l&&(o=l.innerHTML,l.remove())}else a&&(o=a.innerHTML);const u=await n();for(const l of s)u(l,o)};"requestIdleCallback"in window?window.requestIdleCallback(i):setTimeout(i,200)}async function i_(e,r,n){const i=document.querySelectorAll(`astro-root[uid="${e}"]`);if(i.length===0)throw new Error(`Unable to find the root for the component ${r.name}`);let s=null,o=i[0].querySelector("astro-fragment");if(o==null&&i[0].hasAttribute("tmpl")){let u=i[0].querySelector("template[data-astro-template]");u&&(s=u.innerHTML,u.remove())}else o&&(s=o.innerHTML);const a=async()=>{const u=await n();for(const l of i)u(l,s)};if(r.value){const u=matchMedia(r.value);u.matches?a():u.addEventListener("change",a,{once:!0})}}async function s_(e,r,n){const i=document.querySelectorAll(`astro-root[uid="${e}"]`);if(i.length===0)throw new Error(`Unable to find the root for the component ${r.name}`);let s=null,o=i[0].querySelector("astro-fragment");if(o==null&&i[0].hasAttribute("tmpl")){let l=i[0].querySelector("template[data-astro-template]");l&&(s=l.innerHTML,l.remove())}else o&&(s=o.innerHTML);const a=async()=>{const l=await n();for(const c of i)l(c,s)},u=new IntersectionObserver(l=>{for(const c of l)if(!!c.isIntersecting){u.disconnect(),a();break}});for(const l of i)for(let c=0;c<l.children.length;c++){const h=l.children[c];u.observe(h)}}const Oc=({value:e})=>e?zi("astro-fragment",{dangerouslySetInnerHTML:{__html:e}}):null;Oc.shouldComponentUpdate=()=>!1;var o_=e=>(r,n,i)=>vp(zi(r,n,i!=null?zi(Oc,{value:i}):i),e);/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ia=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,sa=Symbol(),gl=new Map;class jc{constructor(r,n){if(this._$cssResult$=!0,n!==sa)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=r}get styleSheet(){let r=gl.get(this.cssText);return ia&&r===void 0&&(gl.set(this.cssText,r=new CSSStyleSheet),r.replaceSync(this.cssText)),r}toString(){return this.cssText}}const wp=e=>new jc(typeof e=="string"?e:e+"",sa),a_=(e,...r)=>{const n=e.length===1?e[0]:r.reduce((i,s,o)=>i+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+e[o+1],e[0]);return new jc(n,sa)},xp=(e,r)=>{ia?e.adoptedStyleSheets=r.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):r.forEach(n=>{const i=document.createElement("style"),s=window.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=n.cssText,e.appendChild(i)})},wl=ia?e=>e:e=>e instanceof CSSStyleSheet?(r=>{let n="";for(const i of r.cssRules)n+=i.cssText;return wp(n)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Hs;const xl=window.trustedTypes,Dp=xl?xl.emptyScript:"",Dl=window.reactiveElementPolyfillSupport,wo={toAttribute(e,r){switch(r){case Boolean:e=e?Dp:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,r){let n=e;switch(r){case Boolean:n=e!==null;break;case Number:n=e===null?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch{n=null}}return n}},qc=(e,r)=>r!==e&&(r==r||e==e),Us={attribute:!0,type:String,converter:wo,reflect:!1,hasChanged:qc};class Cr extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(r){var n;(n=this.l)!==null&&n!==void 0||(this.l=[]),this.l.push(r)}static get observedAttributes(){this.finalize();const r=[];return this.elementProperties.forEach((n,i)=>{const s=this._$Eh(i,n);s!==void 0&&(this._$Eu.set(s,i),r.push(s))}),r}static createProperty(r,n=Us){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(r,n),!n.noAccessor&&!this.prototype.hasOwnProperty(r)){const i=typeof r=="symbol"?Symbol():"__"+r,s=this.getPropertyDescriptor(r,i,n);s!==void 0&&Object.defineProperty(this.prototype,r,s)}}static getPropertyDescriptor(r,n,i){return{get(){return this[n]},set(s){const o=this[r];this[n]=s,this.requestUpdate(r,o,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(r){return this.elementProperties.get(r)||Us}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const r=Object.getPrototypeOf(this);if(r.finalize(),this.elementProperties=new Map(r.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const n=this.properties,i=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const s of i)this.createProperty(s,n[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(r){const n=[];if(Array.isArray(r)){const i=new Set(r.flat(1/0).reverse());for(const s of i)n.unshift(wl(s))}else r!==void 0&&n.push(wl(r));return n}static _$Eh(r,n){const i=n.attribute;return i===!1?void 0:typeof i=="string"?i:typeof r=="string"?r.toLowerCase():void 0}o(){var r;this._$Ep=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Em(),this.requestUpdate(),(r=this.constructor.l)===null||r===void 0||r.forEach(n=>n(this))}addController(r){var n,i;((n=this._$Eg)!==null&&n!==void 0?n:this._$Eg=[]).push(r),this.renderRoot!==void 0&&this.isConnected&&((i=r.hostConnected)===null||i===void 0||i.call(r))}removeController(r){var n;(n=this._$Eg)===null||n===void 0||n.splice(this._$Eg.indexOf(r)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach((r,n)=>{this.hasOwnProperty(n)&&(this._$Et.set(n,this[n]),delete this[n])})}createRenderRoot(){var r;const n=(r=this.shadowRoot)!==null&&r!==void 0?r:this.attachShadow(this.constructor.shadowRootOptions);return xp(n,this.constructor.elementStyles),n}connectedCallback(){var r;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(r=this._$Eg)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostConnected)===null||i===void 0?void 0:i.call(n)})}enableUpdating(r){}disconnectedCallback(){var r;(r=this._$Eg)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostDisconnected)===null||i===void 0?void 0:i.call(n)})}attributeChangedCallback(r,n,i){this._$AK(r,i)}_$ES(r,n,i=Us){var s,o;const a=this.constructor._$Eh(r,i);if(a!==void 0&&i.reflect===!0){const u=((o=(s=i.converter)===null||s===void 0?void 0:s.toAttribute)!==null&&o!==void 0?o:wo.toAttribute)(n,i.type);this._$Ei=r,u==null?this.removeAttribute(a):this.setAttribute(a,u),this._$Ei=null}}_$AK(r,n){var i,s,o;const a=this.constructor,u=a._$Eu.get(r);if(u!==void 0&&this._$Ei!==u){const l=a.getPropertyOptions(u),c=l.converter,h=(o=(s=(i=c)===null||i===void 0?void 0:i.fromAttribute)!==null&&s!==void 0?s:typeof c=="function"?c:null)!==null&&o!==void 0?o:wo.fromAttribute;this._$Ei=u,this[u]=h(n,l.type),this._$Ei=null}}requestUpdate(r,n,i){let s=!0;r!==void 0&&(((i=i||this.constructor.getPropertyOptions(r)).hasChanged||qc)(this[r],n)?(this._$AL.has(r)||this._$AL.set(r,n),i.reflect===!0&&this._$Ei!==r&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(r,i))):s=!1),!this.isUpdatePending&&s&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(n){Promise.reject(n)}const r=this.scheduleUpdate();return r!=null&&await r,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach((s,o)=>this[o]=s),this._$Et=void 0);let n=!1;const i=this._$AL;try{n=this.shouldUpdate(i),n?(this.willUpdate(i),(r=this._$Eg)===null||r===void 0||r.forEach(s=>{var o;return(o=s.hostUpdate)===null||o===void 0?void 0:o.call(s)}),this.update(i)):this._$EU()}catch(s){throw n=!1,this._$EU(),s}n&&this._$AE(i)}willUpdate(r){}_$AE(r){var n;(n=this._$Eg)===null||n===void 0||n.forEach(i=>{var s;return(s=i.hostUpdated)===null||s===void 0?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(r)),this.updated(r)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(r){return!0}update(r){this._$EC!==void 0&&(this._$EC.forEach((n,i)=>this._$ES(i,this[i],n)),this._$EC=void 0),this._$EU()}updated(r){}firstUpdated(r){}}Cr.finalized=!0,Cr.elementProperties=new Map,Cr.elementStyles=[],Cr.shadowRootOptions={mode:"open"},Dl?.({ReactiveElement:Cr}),((Hs=globalThis.reactiveElementVersions)!==null&&Hs!==void 0?Hs:globalThis.reactiveElementVersions=[]).push("1.3.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Vs,Ws;class bi extends Cr{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var r,n;const i=super.createRenderRoot();return(r=(n=this.renderOptions).renderBefore)!==null&&r!==void 0||(n.renderBefore=i.firstChild),i}update(r){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(r),this._$Dt=gc(n,this.renderRoot,this.renderOptions)}connectedCallback(){var r;super.connectedCallback(),(r=this._$Dt)===null||r===void 0||r.setConnected(!0)}disconnectedCallback(){var r;super.disconnectedCallback(),(r=this._$Dt)===null||r===void 0||r.setConnected(!1)}render(){return zt}}bi.finalized=!0,bi._$litElement$=!0,(Vs=globalThis.litElementHydrateSupport)===null||Vs===void 0||Vs.call(globalThis,{LitElement:bi});const bl=globalThis.litElementPolyfillSupport;bl?.({LitElement:bi});((Ws=globalThis.litElementVersions)!==null&&Ws!==void 0?Ws:globalThis.litElementVersions=[]).push("3.2.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const u_=e=>r=>typeof r=="function"?((n,i)=>(window.customElements.define(n,i),i))(e,r):((n,i)=>{const{kind:s,elements:o}=i;return{kind:s,elements:o,finisher(a){window.customElements.define(n,a)}}})(e,r);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bp=(e,r)=>r.kind==="method"&&r.descriptor&&!("value"in r.descriptor)?{...r,finisher(n){n.createProperty(r.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:r.key,initializer(){typeof r.initializer=="function"&&(this[r.key]=r.initializer.call(this))},finisher(n){n.createProperty(r.key,e)}};function l_(e){return(r,n)=>n!==void 0?((i,s,o)=>{s.constructor.createProperty(o,i)})(e,r,n):bp(e,r)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ep=({finisher:e,descriptor:r})=>(n,i)=>{var s;if(i===void 0){const o=(s=n.originalKey)!==null&&s!==void 0?s:n.key,a=r!=null?{kind:"method",placement:"prototype",key:o,descriptor:r(n.key)}:{...n,key:o};return e!=null&&(a.finisher=function(u){e(u,o)}),a}{const o=n.constructor;r!==void 0&&Object.defineProperty(n,i,r(i)),e?.(o,i)}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function c_(e,r){return Ep({descriptor:n=>{const i={get(){var s,o;return(o=(s=this.renderRoot)===null||s===void 0?void 0:s.querySelector(e))!==null&&o!==void 0?o:null},enumerable:!0,configurable:!0};if(r){const s=typeof n=="symbol"?Symbol():"__"+n;i.get=function(){var o,a;return this[s]===void 0&&(this[s]=(a=(o=this.renderRoot)===null||o===void 0?void 0:o.querySelector(e))!==null&&a!==void 0?a:null),this[s]}}return i}})}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Gs;((Gs=window.HTMLSlotElement)===null||Gs===void 0?void 0:Gs.prototype.assignedElements)!=null;var Ap=Object.create,Kn=Object.defineProperty,Hc=Object.getOwnPropertyDescriptor,Uc=Object.getOwnPropertyNames,_p=Object.getPrototypeOf,Cp=Object.prototype.hasOwnProperty,$p=(e,r,n)=>r in e?Kn(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,Vc=(e,r)=>function(){return r||(0,e[Uc(e)[0]])((r={exports:{}}).exports,r),r.exports},N=(e,r)=>{for(var n in r)Kn(e,n,{get:r[n],enumerable:!0})},Sp=(e,r,n,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Uc(r))!Cp.call(e,s)&&s!==n&&Kn(e,s,{get:()=>r[s],enumerable:!(i=Hc(r,s))||i.enumerable});return e},Wc=(e,r,n)=>(n=e!=null?Ap(_p(e)):{},Sp(r||!e||!e.__esModule?Kn(n,"default",{value:e,enumerable:!0}):n,e)),nn=(e,r,n,i)=>{for(var s=i>1?void 0:i?Hc(r,n):r,o=e.length-1,a;o>=0;o--)(a=e[o])&&(s=(i?a(r,n,s):a(s))||s);return i&&s&&Kn(r,n,s),s},y=(e,r,n)=>($p(e,typeof r!="symbol"?r+"":r,n),n),Gc=(e,r,n)=>{if(!r.has(e))throw TypeError("Cannot "+n)},A=(e,r,n)=>(Gc(e,r,"read from private field"),n?n.call(e):r.get(e)),le=(e,r,n)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,n)},Q=(e,r,n,i)=>(Gc(e,r,"write to private field"),i?i.call(e,n):r.set(e,n),n),Fp=(e,r,n,i)=>({set _(s){Q(e,r,s,n)},get _(){return A(e,r,i)}}),Pp={};N(Pp,{SimpleEventEmitter:()=>jt});var Ie,Bp=class{constructor(){le(this,Ie,new Map)}add(e,...r){const n=A(this,Ie).get(e);n===void 0?A(this,Ie).set(e,r):A(this,Ie).set(e,[...n,...r])}keys(){return A(this,Ie).keys()}debugString(){let e="";return Array.from(A(this,Ie).keys()).every(n=>{const i=A(this,Ie).get(n);i!==void 0&&(e+=n+` (${i.length}) = ${JSON.stringify(i)}\r
`)}),e}get(e){return A(this,Ie).get(e)}delete(e,r){const n=A(this,Ie).get(e);if(n===void 0)return!1;const i=n.filter(s=>s!==r);return A(this,Ie).set(e,i),i.length<n.length}clear(){A(this,Ie).clear()}};Ie=new WeakMap;var Jc=()=>new Bp,$r,jt=class{constructor(){le(this,$r,Jc())}fireEvent(e,r){const n=A(this,$r).get(e);n!==void 0&&n.forEach(i=>{try{i(r,this)}catch(s){console.debug("Event listener error: ",s)}})}addEventListener(e,r){A(this,$r).add(e,r)}removeEventListener(e,r){A(this,$r).delete(e,r)}clearEventListeners(){A(this,$r).clear()}};$r=new WeakMap;var Yc={};N(Yc,{setMutable:()=>oa});var oa=(e=void 0)=>new Mp(e),Mp=class extends jt{constructor(e=void 0){super();y(this,"store",new Map),y(this,"keyString"),e===void 0&&(e=r=>typeof r=="string"?r:JSON.stringify(r)),this.keyString=e}add(...e){e.forEach(r=>{const n=this.has(r);this.store.set(this.keyString(r),r),super.fireEvent("add",{value:r,updated:n})})}values(){return this.store.values()}clear(){this.store.clear(),super.fireEvent("clear",!0)}delete(e){const r=this.store.delete(this.keyString(e));return r&&super.fireEvent("delete",e),r}has(e){return this.store.has(this.keyString(e))}toArray(){return Array.from(this.store.values())}},kp={};N(kp,{between:()=>Np,countCharsFromStart:()=>Rp,htmlEntities:()=>Op,indexOfCharCode:()=>In,lineSpan:()=>zp,omitChars:()=>Rn,splitByLength:()=>Kc,splitRanges:()=>Ip,startsEnds:()=>Lp,untilMatch:()=>Xc,unwrap:()=>Tp});var Np=(e,r,n,i=!0)=>{const s=e.indexOf(r);if(s<0)return;n===void 0&&(n=r);const o=i?e.lastIndexOf(n):e.indexOf(n,s+1);if(!(o<0))return e.substring(s+1,o)},In=(e,r,n=0,i=e.length-1)=>{for(let s=n;s<=i;s++)if(e.charCodeAt(s)===r)return s;return-1},Rn=(e,r,n)=>e.substring(0,r)+e.substring(r+n),Kc=(e,r)=>{const n=Math.ceil(e.length/r),i=[];let s=0;for(let o=0;o<n;o++)i.push(e.substring(s,s+r)),s+=r;return i},Xc=(e,r,n=0)=>{if(n>e.length)throw new Error("startPos should be less than length");const i=e.indexOf(r,n);return i<0?e:e.substring(n,i)},Tp=(e,...r)=>{let n=!1;do{n=!1;for(const i of r)e.startsWith(i)&&e.endsWith(i)&&(e=e.substring(i.length,e.length-i.length*2+1),n=!0)}while(n);return e},zp=(e,r,n)=>{let i=-1,s=-1;for(let o=0;o<e.length;o++){const a=e[o];if(i=o,a.text.length!==0&&r<a.end)break}for(let o=i;o<e.length;o++){const a=e[o];if(s=o,n===a.end){s=o+1;break}if(n<a.end)break}return{length:s-i,start:i,end:s}},Ip=(e,r)=>{let n=0,i="";const s=[];let o=0;for(let a=0;a<e.length;a++)if(e.indexOf(r,a)===a){const u=a;s.push({text:i,start:n,end:u,index:o}),n=u+1,i="",o++}else i+=e.charAt(a);return n<e.length&&s.push({text:i,start:n,index:o,end:e.length}),s},Rp=(e,...r)=>{let n=0;for(let i=0;i<e.length&&r.includes(e.charAt(i));i++)n++;return n},Lp=(e,r,n=r)=>e.startsWith(r)&&e.endsWith(n),Op=e=>e.replace(/[\u00A0-\u9999<>\&]/g,r=>`&#${r.charCodeAt(0)};`),aa={};N(aa,{chunks:()=>jp,concat:()=>qp,dropWhile:()=>Hp,equals:()=>Up,every:()=>Vp,fill:()=>Wp,filter:()=>Gp,find:()=>Jp,flatten:()=>Yp,forEach:()=>Kp,map:()=>Xp,max:()=>Zp,min:()=>Qp,range:()=>ey,reduce:()=>ty,slice:()=>ry,some:()=>ny,takeWhile:()=>iy,toArray:()=>sy,unique:()=>oy,zip:()=>ay});async function*jp(e,r){let n=[];for await(const i of e)n.push(i),n.length===r&&(yield n,n=[]);n.length>0&&(yield n)}async function*qp(...e){for await(const r of e)yield*r}async function*Hp(e,r){for await(const n of e)if(!r(n)){yield n;break}yield*e}async function Up(e,r,n){const i=e[Symbol.iterator](),s=r[Symbol.iterator]();for(;;){const o=await i.next(),a=await s.next();if(n!==void 0){if(!n(o.value,a.value))return!1}else if(o.value!==a.value)return!1;if(o.done||a.done)return o.done&&a.done}}async function Vp(e,r){let n=!0;for await(const i of e)n=n&&r(i);return n}async function*Wp(e,r){for await(const n of e)yield r}async function*Gp(e,r){for await(const n of e)!r(n)||(yield n)}async function Jp(e,r){for await(const n of e)if(r(n))return n}async function*Yp(e){for await(const r of e)Symbol.asyncIterator in r?yield*r:yield r}async function Kp(e,r){for await(const n of e)r(n)}async function*Xp(e,r){for await(const n of e)yield r(n)}async function Zp(e,r=(n,i)=>n>i){let n;for await(const i of e){if(!n){n=i;continue}n=r(n,i)?n:i}return n}async function Qp(e,r=(n,i)=>n>i){let n;for await(const i of e){if(!n){n=i;continue}n=r(n,i)?i:n}return n}async function*ey(e,r){for(let n=0;n<r;n++)yield e++}async function ty(e,r,n){for await(const i of e)n=r(n,i);return n}async function*ry(e,r=0,n=Number.POSITIVE_INFINITY){const i=e[Symbol.asyncIterator]();for(;r>0;r--,n--)await i.next();for await(const s of e)if(n-- >0)yield s;else break}async function ny(e,r){for await(const n of e)if(r(n))return!0;return!1}async function*iy(e,r){for await(const n of e){if(!r(n))return;yield n}}async function sy(e,r=1/0){const n=[],i=e[Symbol.asyncIterator]();for(;n.length<r;){const{value:s,done:o}=await i.next();if(o)break;n.push(s)}return n}async function*oy(e,r=n=>n){const n=[];for await(const i of e){const s=r(i);n.indexOf(s)===-1&&(n.push(s),yield i)}}async function*ay(...e){const r=e.map(n=>n[Symbol.asyncIterator]());for(;;){const n=await Promise.all(r.map(i=>i.next()));if(n.some(i=>i.done))return;yield n.map(i=>i.value)}}var R=(e,r="",n="?")=>{if(Number.isNaN(e))throw new Error(`Parameter '${n}' is NaN`);if(typeof e!="number")throw new Error(`Parameter '${n}' is not a number (${e})`);switch(r){case"positive":if(e<0)throw new Error(`Parameter '${n}' must be at least zero (${e})`);break;case"negative":if(e>0)throw new Error(`Parameter '${n}' must be zero or lower (${e})`);break;case"aboveZero":if(e<=0)throw new Error(`Parameter '${n}' must be above zero (${e})`);break;case"belowZero":if(e>=0)throw new Error(`Parameter '${n}' must be below zero (${e})`);break;case"percentage":if(e>1||e<0)throw new Error(`Parameter '${n}' must be in percentage range (0 to 1). (${e})`);break;case"nonZero":if(e===0)throw new Error(`Parameter '${n}' must non-zero. (${e})`);break;case"bipolar":if(e>1||e<-1)throw new Error(`Parameter '${n}' must be in bipolar percentage range (-1 to 1). (${e})`);break}return!0},uy=(e,r="?")=>R(e,"percentage",r),me=(e,r="",n="?")=>{if(R(e,r,n),!Number.isInteger(e))throw new Error(`Paramter ${n} is not an integer`)},ly=e=>Array.isArray(e)?e.find(r=>typeof r!="string")===void 0:!1,cy=(e,r="?")=>{if(!Array.isArray(e))throw new Error(`Parameter '${r}' is expected to be an array'`)},hy={};N(hy,{IterableAsync:()=>aa,getFieldByPath:()=>fs,getFieldPaths:()=>ua,ifNaN:()=>xo,isEqualDefault:()=>Xn,isEqualValueDefault:()=>eh,isPowerOfTwo:()=>Zc,relativeDifference:()=>fy,roundUpToMultiple:()=>Qc,runningiOS:()=>dy,toStringDefault:()=>Ln});var xo=(e,r)=>Number.isNaN(e)?r:e,Zc=e=>Math.log2(e)%1===0,fy=e=>r=>r/e,fs=(e,r="")=>{if(r.length===0)return e;if(r in e)return e[r];{const n=Xc(r,".");return n in e?fs(e[n],r.substring(n.length+1)):void 0}},ua=e=>{const r=[],n=(i,s="")=>{if(typeof i=="object"){const o=Object.keys(i);s.length>0&&(s+="."),o.forEach(a=>n(i[a],s+a))}else r.push(s)};return n(e),r},Qc=(e,r)=>(R(e,"nonZero","v"),R(r,"nonZero","muliple"),Math.ceil(e/r)*r),Xn=(e,r)=>e===r,eh=(e,r)=>e===r?!0:Ln(e)===Ln(r),Ln=e=>typeof e=="string"?e:JSON.stringify(e),dy=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;try{typeof window<"u"&&(window.ixfx={...window.ixfx,getFieldByPath:fs,getFieldPaths:ua})}catch{}var vy=Vc({"node_modules/rxjs/node_modules/tslib/tslib.js"(e,r){var n,i,s,o,a,u,l,c,h,f,d,v,m,x,_,S,M,X,B,k,te,L,K,re;(function(j){var ge=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(g){j(de(ge,de(g)))}):typeof r=="object"&&typeof r.exports=="object"?j(de(ge,de(r.exports))):j(de(ge));function de(g,w){return g!==ge&&(typeof Object.create=="function"?Object.defineProperty(g,"__esModule",{value:!0}):g.__esModule=!0),function(C,F){return g[C]=w?w(C,F):F}}})(function(j){var ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,w){g.__proto__=w}||function(g,w){for(var C in w)Object.prototype.hasOwnProperty.call(w,C)&&(g[C]=w[C])};n=function(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");ge(g,w);function C(){this.constructor=g}g.prototype=w===null?Object.create(w):(C.prototype=w.prototype,new C)},i=Object.assign||function(g){for(var w,C=1,F=arguments.length;C<F;C++){w=arguments[C];for(var T in w)Object.prototype.hasOwnProperty.call(w,T)&&(g[T]=w[T])}return g},s=function(g,w){var C={};for(var F in g)Object.prototype.hasOwnProperty.call(g,F)&&w.indexOf(F)<0&&(C[F]=g[F]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,F=Object.getOwnPropertySymbols(g);T<F.length;T++)w.indexOf(F[T])<0&&Object.prototype.propertyIsEnumerable.call(g,F[T])&&(C[F[T]]=g[F[T]]);return C},o=function(g,w,C,F){var T=arguments.length,P=T<3?w:F===null?F=Object.getOwnPropertyDescriptor(w,C):F,W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(g,w,C,F);else for(var ue=g.length-1;ue>=0;ue--)(W=g[ue])&&(P=(T<3?W(P):T>3?W(w,C,P):W(w,C))||P);return T>3&&P&&Object.defineProperty(w,C,P),P},a=function(g,w){return function(C,F){w(C,F,g)}},u=function(g,w){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(g,w)},l=function(g,w,C,F){function T(P){return P instanceof C?P:new C(function(W){W(P)})}return new(C||(C=Promise))(function(P,W){function ue(Pe){try{G(F.next(Pe))}catch(_t){W(_t)}}function Ve(Pe){try{G(F.throw(Pe))}catch(_t){W(_t)}}function G(Pe){Pe.done?P(Pe.value):T(Pe.value).then(ue,Ve)}G((F=F.apply(g,w||[])).next())})},c=function(g,w){var C={label:0,sent:function(){if(P[0]&1)throw P[1];return P[1]},trys:[],ops:[]},F,T,P,W;return W={next:ue(0),throw:ue(1),return:ue(2)},typeof Symbol=="function"&&(W[Symbol.iterator]=function(){return this}),W;function ue(G){return function(Pe){return Ve([G,Pe])}}function Ve(G){if(F)throw new TypeError("Generator is already executing.");for(;C;)try{if(F=1,T&&(P=G[0]&2?T.return:G[0]?T.throw||((P=T.return)&&P.call(T),0):T.next)&&!(P=P.call(T,G[1])).done)return P;switch(T=0,P&&(G=[G[0]&2,P.value]),G[0]){case 0:case 1:P=G;break;case 4:return C.label++,{value:G[1],done:!1};case 5:C.label++,T=G[1],G=[0];continue;case 7:G=C.ops.pop(),C.trys.pop();continue;default:if(P=C.trys,!(P=P.length>0&&P[P.length-1])&&(G[0]===6||G[0]===2)){C=0;continue}if(G[0]===3&&(!P||G[1]>P[0]&&G[1]<P[3])){C.label=G[1];break}if(G[0]===6&&C.label<P[1]){C.label=P[1],P=G;break}if(P&&C.label<P[2]){C.label=P[2],C.ops.push(G);break}P[2]&&C.ops.pop(),C.trys.pop();continue}G=w.call(g,C)}catch(Pe){G=[6,Pe],T=0}finally{F=P=0}if(G[0]&5)throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}},h=function(g,w){for(var C in g)C!=="default"&&!Object.prototype.hasOwnProperty.call(w,C)&&re(w,g,C)},re=Object.create?function(g,w,C,F){F===void 0&&(F=C),Object.defineProperty(g,F,{enumerable:!0,get:function(){return w[C]}})}:function(g,w,C,F){F===void 0&&(F=C),g[F]=w[C]},f=function(g){var w=typeof Symbol=="function"&&Symbol.iterator,C=w&&g[w],F=0;if(C)return C.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&F>=g.length&&(g=void 0),{value:g&&g[F++],done:!g}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},d=function(g,w){var C=typeof Symbol=="function"&&g[Symbol.iterator];if(!C)return g;var F=C.call(g),T,P=[],W;try{for(;(w===void 0||w-- >0)&&!(T=F.next()).done;)P.push(T.value)}catch(ue){W={error:ue}}finally{try{T&&!T.done&&(C=F.return)&&C.call(F)}finally{if(W)throw W.error}}return P},v=function(){for(var g=[],w=0;w<arguments.length;w++)g=g.concat(d(arguments[w]));return g},m=function(){for(var g=0,w=0,C=arguments.length;w<C;w++)g+=arguments[w].length;for(var F=Array(g),T=0,w=0;w<C;w++)for(var P=arguments[w],W=0,ue=P.length;W<ue;W++,T++)F[T]=P[W];return F},x=function(g,w,C){if(C||arguments.length===2)for(var F=0,T=w.length,P;F<T;F++)(P||!(F in w))&&(P||(P=Array.prototype.slice.call(w,0,F)),P[F]=w[F]);return g.concat(P||Array.prototype.slice.call(w))},_=function(g){return this instanceof _?(this.v=g,this):new _(g)},S=function(g,w,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var F=C.apply(g,w||[]),T,P=[];return T={},W("next"),W("throw"),W("return"),T[Symbol.asyncIterator]=function(){return this},T;function W(we){F[we]&&(T[we]=function(ut){return new Promise(function(hn,zs){P.push([we,ut,hn,zs])>1||ue(we,ut)})})}function ue(we,ut){try{Ve(F[we](ut))}catch(hn){_t(P[0][3],hn)}}function Ve(we){we.value instanceof _?Promise.resolve(we.value.v).then(G,Pe):_t(P[0][2],we)}function G(we){ue("next",we)}function Pe(we){ue("throw",we)}function _t(we,ut){we(ut),P.shift(),P.length&&ue(P[0][0],P[0][1])}},M=function(g){var w,C;return w={},F("next"),F("throw",function(T){throw T}),F("return"),w[Symbol.iterator]=function(){return this},w;function F(T,P){w[T]=g[T]?function(W){return(C=!C)?{value:_(g[T](W)),done:T==="return"}:P?P(W):W}:P}},X=function(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var w=g[Symbol.asyncIterator],C;return w?w.call(g):(g=typeof f=="function"?f(g):g[Symbol.iterator](),C={},F("next"),F("throw"),F("return"),C[Symbol.asyncIterator]=function(){return this},C);function F(P){C[P]=g[P]&&function(W){return new Promise(function(ue,Ve){W=g[P](W),T(ue,Ve,W.done,W.value)})}}function T(P,W,ue,Ve){Promise.resolve(Ve).then(function(G){P({value:G,done:ue})},W)}},B=function(g,w){return Object.defineProperty?Object.defineProperty(g,"raw",{value:w}):g.raw=w,g};var de=Object.create?function(g,w){Object.defineProperty(g,"default",{enumerable:!0,value:w})}:function(g,w){g.default=w};k=function(g){if(g&&g.__esModule)return g;var w={};if(g!=null)for(var C in g)C!=="default"&&Object.prototype.hasOwnProperty.call(g,C)&&re(w,g,C);return de(w,g),w},te=function(g){return g&&g.__esModule?g:{default:g}},L=function(g,w,C,F){if(C==="a"&&!F)throw new TypeError("Private accessor was defined without a getter");if(typeof w=="function"?g!==w||!F:!w.has(g))throw new TypeError("Cannot read private member from an object whose class did not declare it");return C==="m"?F:C==="a"?F.call(g):F?F.value:w.get(g)},K=function(g,w,C,F,T){if(F==="m")throw new TypeError("Private method is not writable");if(F==="a"&&!T)throw new TypeError("Private accessor was defined without a setter");if(typeof w=="function"?g!==w||!T:!w.has(g))throw new TypeError("Cannot write private member to an object whose class did not declare it");return F==="a"?T.call(g,C):T?T.value=C:w.set(g,C),C},j("__extends",n),j("__assign",i),j("__rest",s),j("__decorate",o),j("__param",a),j("__metadata",u),j("__awaiter",l),j("__generator",c),j("__exportStar",h),j("__createBinding",re),j("__values",f),j("__read",d),j("__spread",v),j("__spreadArrays",m),j("__spreadArray",x),j("__await",_),j("__asyncGenerator",S),j("__asyncDelegator",M),j("__asyncValues",X),j("__makeTemplateObject",B),j("__importStar",k),j("__importDefault",te),j("__classPrivateFieldGet",L),j("__classPrivateFieldSet",K)})}}),py=Vc({"node_modules/json5/dist/index.js"(e,r){(function(n,i){typeof e=="object"&&typeof r<"u"?r.exports=i():typeof define=="function"&&define.amd?define(i):n.JSON5=i()})(e,function(){function n(p,D){return D={exports:{}},p(D,D.exports),D.exports}var i=n(function(p){var D=p.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=D)}),s=n(function(p){var D=p.exports={version:"2.6.5"};typeof __e=="number"&&(__e=D)});s.version;var o=function(p){return typeof p=="object"?p!==null:typeof p=="function"},a=function(p){if(!o(p))throw TypeError(p+" is not an object!");return p},u=function(p){try{return!!p()}catch{return!0}},l=!u(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),c=i.document,h=o(c)&&o(c.createElement),f=function(p){return h?c.createElement(p):{}},d=!l&&!u(function(){return Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a!=7}),v=function(p,D){if(!o(p))return p;var z,I;if(D&&typeof(z=p.toString)=="function"&&!o(I=z.call(p))||typeof(z=p.valueOf)=="function"&&!o(I=z.call(p))||!D&&typeof(z=p.toString)=="function"&&!o(I=z.call(p)))return I;throw TypeError("Can't convert object to primitive value")},m=Object.defineProperty,x=l?Object.defineProperty:function(D,z,I){if(a(D),z=v(z,!0),a(I),d)try{return m(D,z,I)}catch{}if("get"in I||"set"in I)throw TypeError("Accessors not supported!");return"value"in I&&(D[z]=I.value),D},_={f:x},S=function(p,D){return{enumerable:!(p&1),configurable:!(p&2),writable:!(p&4),value:D}},M=l?function(p,D,z){return _.f(p,D,S(1,z))}:function(p,D,z){return p[D]=z,p},X={}.hasOwnProperty,B=function(p,D){return X.call(p,D)},k=0,te=Math.random(),L=function(p){return"Symbol(".concat(p===void 0?"":p,")_",(++k+te).toString(36))},K=n(function(p){var D="__core-js_shared__",z=i[D]||(i[D]={});(p.exports=function(I,O){return z[I]||(z[I]=O!==void 0?O:{})})("versions",[]).push({version:s.version,mode:"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),re=K("native-function-to-string",Function.toString),j=n(function(p){var D=L("src"),z="toString",I=(""+re).split(z);s.inspectSource=function(O){return re.call(O)},(p.exports=function(O,J,Z,Ge){var $e=typeof Z=="function";$e&&(B(Z,"name")||M(Z,"name",J)),O[J]!==Z&&($e&&(B(Z,D)||M(Z,D,O[J]?""+O[J]:I.join(String(J)))),O===i?O[J]=Z:Ge?O[J]?O[J]=Z:M(O,J,Z):(delete O[J],M(O,J,Z)))})(Function.prototype,z,function(){return typeof this=="function"&&this[D]||re.call(this)})}),ge=function(p){if(typeof p!="function")throw TypeError(p+" is not a function!");return p},de=function(p,D,z){if(ge(p),D===void 0)return p;switch(z){case 1:return function(I){return p.call(D,I)};case 2:return function(I,O){return p.call(D,I,O)};case 3:return function(I,O,J){return p.call(D,I,O,J)}}return function(){return p.apply(D,arguments)}},g="prototype",w=function(p,D,z){var I=p&w.F,O=p&w.G,J=p&w.S,Z=p&w.P,Ge=p&w.B,$e=O?i:J?i[D]||(i[D]={}):(i[D]||{})[g],Kt=O?s:s[D]||(s[D]={}),Dr=Kt[g]||(Kt[g]={}),Je,tt,Me,br;O&&(z=D);for(Je in z)tt=!I&&$e&&$e[Je]!==void 0,Me=(tt?$e:z)[Je],br=Ge&&tt?de(Me,i):Z&&typeof Me=="function"?de(Function.call,Me):Me,$e&&j($e,Je,Me,p&w.U),Kt[Je]!=Me&&M(Kt,Je,br),Z&&Dr[Je]!=Me&&(Dr[Je]=Me)};i.core=s,w.F=1,w.G=2,w.S=4,w.P=8,w.B=16,w.W=32,w.U=64,w.R=128;var C=w,F=Math.ceil,T=Math.floor,P=function(p){return isNaN(p=+p)?0:(p>0?T:F)(p)},W=function(p){if(p==null)throw TypeError("Can't call method on  "+p);return p},ue=function(p){return function(D,z){var I=String(W(D)),O=P(z),J=I.length,Z,Ge;return O<0||O>=J?p?"":void 0:(Z=I.charCodeAt(O),Z<55296||Z>56319||O+1===J||(Ge=I.charCodeAt(O+1))<56320||Ge>57343?p?I.charAt(O):Z:p?I.slice(O,O+2):(Z-55296<<10)+(Ge-56320)+65536)}},Ve=ue(!1);C(C.P,"String",{codePointAt:function(D){return Ve(this,D)}}),s.String.codePointAt;var G=Math.max,Pe=Math.min,_t=function(p,D){return p=P(p),p<0?G(p+D,0):Pe(p,D)},we=String.fromCharCode,ut=String.fromCodePoint;C(C.S+C.F*(!!ut&&ut.length!=1),"String",{fromCodePoint:function(D){for(var z=arguments,I=[],O=arguments.length,J=0,Z;O>J;){if(Z=+z[J++],_t(Z,1114111)!==Z)throw RangeError(Z+" is not a valid code point");I.push(Z<65536?we(Z):we(((Z-=65536)>>10)+55296,Z%1024+56320))}return I.join("")}}),s.String.fromCodePoint;var hn=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,zs=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Bv=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Is={Space_Separator:hn,ID_Start:zs,ID_Continue:Bv},ye={isSpaceSeparator:function(D){return typeof D=="string"&&Is.Space_Separator.test(D)},isIdStartChar:function(D){return typeof D=="string"&&(D>="a"&&D<="z"||D>="A"&&D<="Z"||D==="$"||D==="_"||Is.ID_Start.test(D))},isIdContinueChar:function(D){return typeof D=="string"&&(D>="a"&&D<="z"||D>="A"&&D<="Z"||D>="0"&&D<="9"||D==="$"||D==="_"||D==="\u200C"||D==="\u200D"||Is.ID_Continue.test(D))},isDigit:function(D){return typeof D=="string"&&/[0-9]/.test(D)},isHexDigit:function(D){return typeof D=="string"&&/[0-9A-Fa-f]/.test(D)}},Rs,Be,lt,si,Ct,We,xe,Ls,fn,Mv=function(D,z){Rs=String(D),Be="start",lt=[],si=0,Ct=1,We=0,xe=void 0,Ls=void 0,fn=void 0;do xe=kv(),zv[Be]();while(xe.type!=="eof");return typeof z=="function"?Ju({"":fn},"",z):fn};function Ju(p,D,z){var I=p[D];if(I!=null&&typeof I=="object")for(var O in I){var J=Ju(I,O,z);J===void 0?delete I[O]:I[O]=J}return z.call(p,D,I)}var V,q,dn,ct,Y;function kv(){for(V="default",q="",dn=!1,ct=1;;){Y=ht();var p=Yu[V]();if(p)return p}}function ht(){if(Rs[si])return String.fromCodePoint(Rs.codePointAt(si))}function E(){var p=ht();return p===`
`?(Ct++,We=0):p?We+=p.length:We++,p&&(si+=p.length),p}var Yu={default:function(){switch(Y){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":E();return;case"/":E(),V="comment";return;case void 0:return E(),se("eof")}if(ye.isSpaceSeparator(Y)){E();return}return Yu[Be]()},comment:function(){switch(Y){case"*":E(),V="multiLineComment";return;case"/":E(),V="singleLineComment";return}throw oe(E())},multiLineComment:function(){switch(Y){case"*":E(),V="multiLineCommentAsterisk";return;case void 0:throw oe(E())}E()},multiLineCommentAsterisk:function(){switch(Y){case"*":E();return;case"/":E(),V="default";return;case void 0:throw oe(E())}E(),V="multiLineComment"},singleLineComment:function(){switch(Y){case`
`:case"\r":case"\u2028":case"\u2029":E(),V="default";return;case void 0:return E(),se("eof")}E()},value:function(){switch(Y){case"{":case"[":return se("punctuator",E());case"n":return E(),Jt("ull"),se("null",null);case"t":return E(),Jt("rue"),se("boolean",!0);case"f":return E(),Jt("alse"),se("boolean",!1);case"-":case"+":E()==="-"&&(ct=-1),V="sign";return;case".":q=E(),V="decimalPointLeading";return;case"0":q=E(),V="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":q=E(),V="decimalInteger";return;case"I":return E(),Jt("nfinity"),se("numeric",1/0);case"N":return E(),Jt("aN"),se("numeric",NaN);case'"':case"'":dn=E()==='"',q="",V="string";return}throw oe(E())},identifierNameStartEscape:function(){if(Y!=="u")throw oe(E());E();var D=Os();switch(D){case"$":case"_":break;default:if(!ye.isIdStartChar(D))throw Ku();break}q+=D,V="identifierName"},identifierName:function(){switch(Y){case"$":case"_":case"\u200C":case"\u200D":q+=E();return;case"\\":E(),V="identifierNameEscape";return}if(ye.isIdContinueChar(Y)){q+=E();return}return se("identifier",q)},identifierNameEscape:function(){if(Y!=="u")throw oe(E());E();var D=Os();switch(D){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!ye.isIdContinueChar(D))throw Ku();break}q+=D,V="identifierName"},sign:function(){switch(Y){case".":q=E(),V="decimalPointLeading";return;case"0":q=E(),V="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":q=E(),V="decimalInteger";return;case"I":return E(),Jt("nfinity"),se("numeric",ct*(1/0));case"N":return E(),Jt("aN"),se("numeric",NaN)}throw oe(E())},zero:function(){switch(Y){case".":q+=E(),V="decimalPoint";return;case"e":case"E":q+=E(),V="decimalExponent";return;case"x":case"X":q+=E(),V="hexadecimal";return}return se("numeric",ct*0)},decimalInteger:function(){switch(Y){case".":q+=E(),V="decimalPoint";return;case"e":case"E":q+=E(),V="decimalExponent";return}if(ye.isDigit(Y)){q+=E();return}return se("numeric",ct*Number(q))},decimalPointLeading:function(){if(ye.isDigit(Y)){q+=E(),V="decimalFraction";return}throw oe(E())},decimalPoint:function(){switch(Y){case"e":case"E":q+=E(),V="decimalExponent";return}if(ye.isDigit(Y)){q+=E(),V="decimalFraction";return}return se("numeric",ct*Number(q))},decimalFraction:function(){switch(Y){case"e":case"E":q+=E(),V="decimalExponent";return}if(ye.isDigit(Y)){q+=E();return}return se("numeric",ct*Number(q))},decimalExponent:function(){switch(Y){case"+":case"-":q+=E(),V="decimalExponentSign";return}if(ye.isDigit(Y)){q+=E(),V="decimalExponentInteger";return}throw oe(E())},decimalExponentSign:function(){if(ye.isDigit(Y)){q+=E(),V="decimalExponentInteger";return}throw oe(E())},decimalExponentInteger:function(){if(ye.isDigit(Y)){q+=E();return}return se("numeric",ct*Number(q))},hexadecimal:function(){if(ye.isHexDigit(Y)){q+=E(),V="hexadecimalInteger";return}throw oe(E())},hexadecimalInteger:function(){if(ye.isHexDigit(Y)){q+=E();return}return se("numeric",ct*Number(q))},string:function(){switch(Y){case"\\":E(),q+=Nv();return;case'"':if(dn)return E(),se("string",q);q+=E();return;case"'":if(!dn)return E(),se("string",q);q+=E();return;case`
`:case"\r":throw oe(E());case"\u2028":case"\u2029":Iv(Y);break;case void 0:throw oe(E())}q+=E()},start:function(){switch(Y){case"{":case"[":return se("punctuator",E())}V="value"},beforePropertyName:function(){switch(Y){case"$":case"_":q=E(),V="identifierName";return;case"\\":E(),V="identifierNameStartEscape";return;case"}":return se("punctuator",E());case'"':case"'":dn=E()==='"',V="string";return}if(ye.isIdStartChar(Y)){q+=E(),V="identifierName";return}throw oe(E())},afterPropertyName:function(){if(Y===":")return se("punctuator",E());throw oe(E())},beforePropertyValue:function(){V="value"},afterPropertyValue:function(){switch(Y){case",":case"}":return se("punctuator",E())}throw oe(E())},beforeArrayValue:function(){if(Y==="]")return se("punctuator",E());V="value"},afterArrayValue:function(){switch(Y){case",":case"]":return se("punctuator",E())}throw oe(E())},end:function(){throw oe(E())}};function se(p,D){return{type:p,value:D,line:Ct,column:We}}function Jt(p){for(var D=0,z=p;D<z.length;D+=1){var I=z[D],O=ht();if(O!==I)throw oe(E());E()}}function Nv(){var p=ht();switch(p){case"b":return E(),"\b";case"f":return E(),"\f";case"n":return E(),`
`;case"r":return E(),"\r";case"t":return E(),"	";case"v":return E(),"\v";case"0":if(E(),ye.isDigit(ht()))throw oe(E());return"\0";case"x":return E(),Tv();case"u":return E(),Os();case`
`:case"\u2028":case"\u2029":return E(),"";case"\r":return E(),ht()===`
`&&E(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw oe(E());case void 0:throw oe(E())}return E()}function Tv(){var p="",D=ht();if(!ye.isHexDigit(D)||(p+=E(),D=ht(),!ye.isHexDigit(D)))throw oe(E());return p+=E(),String.fromCodePoint(parseInt(p,16))}function Os(){for(var p="",D=4;D-- >0;){var z=ht();if(!ye.isHexDigit(z))throw oe(E());p+=E()}return String.fromCodePoint(parseInt(p,16))}var zv={start:function(){if(xe.type==="eof")throw Yt();js()},beforePropertyName:function(){switch(xe.type){case"identifier":case"string":Ls=xe.value,Be="afterPropertyName";return;case"punctuator":oi();return;case"eof":throw Yt()}},afterPropertyName:function(){if(xe.type==="eof")throw Yt();Be="beforePropertyValue"},beforePropertyValue:function(){if(xe.type==="eof")throw Yt();js()},beforeArrayValue:function(){if(xe.type==="eof")throw Yt();if(xe.type==="punctuator"&&xe.value==="]"){oi();return}js()},afterPropertyValue:function(){if(xe.type==="eof")throw Yt();switch(xe.value){case",":Be="beforePropertyName";return;case"}":oi()}},afterArrayValue:function(){if(xe.type==="eof")throw Yt();switch(xe.value){case",":Be="beforeArrayValue";return;case"]":oi()}},end:function(){}};function js(){var p;switch(xe.type){case"punctuator":switch(xe.value){case"{":p={};break;case"[":p=[];break}break;case"null":case"boolean":case"numeric":case"string":p=xe.value;break}if(fn===void 0)fn=p;else{var D=lt[lt.length-1];Array.isArray(D)?D.push(p):D[Ls]=p}if(p!==null&&typeof p=="object")lt.push(p),Array.isArray(p)?Be="beforeArrayValue":Be="beforePropertyName";else{var z=lt[lt.length-1];z==null?Be="end":Array.isArray(z)?Be="afterArrayValue":Be="afterPropertyValue"}}function oi(){lt.pop();var p=lt[lt.length-1];p==null?Be="end":Array.isArray(p)?Be="afterArrayValue":Be="afterPropertyValue"}function oe(p){return ai(p===void 0?"JSON5: invalid end of input at "+Ct+":"+We:"JSON5: invalid character '"+Xu(p)+"' at "+Ct+":"+We)}function Yt(){return ai("JSON5: invalid end of input at "+Ct+":"+We)}function Ku(){return We-=5,ai("JSON5: invalid identifier character at "+Ct+":"+We)}function Iv(p){console.warn("JSON5: '"+Xu(p)+"' in strings is not valid ECMAScript; consider escaping")}function Xu(p){var D={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(D[p])return D[p];if(p<" "){var z=p.charCodeAt(0).toString(16);return"\\x"+("00"+z).substring(z.length)}return p}function ai(p){var D=new SyntaxError(p);return D.lineNumber=Ct,D.columnNumber=We,D}var Rv=function(D,z,I){var O=[],J="",Z,Ge,$e="",Kt;if(z!=null&&typeof z=="object"&&!Array.isArray(z)&&(I=z.space,Kt=z.quote,z=z.replacer),typeof z=="function")Ge=z;else if(Array.isArray(z)){Z=[];for(var Dr=0,Je=z;Dr<Je.length;Dr+=1){var tt=Je[Dr],Me=void 0;typeof tt=="string"?Me=tt:(typeof tt=="number"||tt instanceof String||tt instanceof Number)&&(Me=String(tt)),Me!==void 0&&Z.indexOf(Me)<0&&Z.push(Me)}}return I instanceof Number?I=Number(I):I instanceof String&&(I=String(I)),typeof I=="number"?I>0&&(I=Math.min(10,Math.floor(I)),$e="          ".substr(0,I)):typeof I=="string"&&($e=I.substr(0,10)),br("",{"":D});function br(ie,Se){var H=Se[ie];switch(H!=null&&(typeof H.toJSON5=="function"?H=H.toJSON5(ie):typeof H.toJSON=="function"&&(H=H.toJSON(ie))),Ge&&(H=Ge.call(Se,ie,H)),H instanceof Number?H=Number(H):H instanceof String?H=String(H):H instanceof Boolean&&(H=H.valueOf()),H){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof H=="string")return ui(H);if(typeof H=="number")return String(H);if(typeof H=="object")return Array.isArray(H)?Uv(H):qv(H)}function ui(ie){for(var Se={"'":.1,'"':.2},H={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},_e="",Ye=0;Ye<ie.length;Ye++){var Fe=ie[Ye];switch(Fe){case"'":case'"':Se[Fe]++,_e+=Fe;continue;case"\0":if(ye.isDigit(ie[Ye+1])){_e+="\\x00";continue}}if(H[Fe]){_e+=H[Fe];continue}if(Fe<" "){var Xt=Fe.charCodeAt(0).toString(16);_e+="\\x"+("00"+Xt).substring(Xt.length);continue}_e+=Fe}var ft=Kt||Object.keys(Se).reduce(function($t,Zt){return Se[$t]<Se[Zt]?$t:Zt});return _e=_e.replace(new RegExp(ft,"g"),H[ft]),ft+_e+ft}function qv(ie){if(O.indexOf(ie)>=0)throw TypeError("Converting circular structure to JSON5");O.push(ie);var Se=J;J=J+$e;for(var H=Z||Object.keys(ie),_e=[],Ye=0,Fe=H;Ye<Fe.length;Ye+=1){var Xt=Fe[Ye],ft=br(Xt,ie);if(ft!==void 0){var $t=Hv(Xt)+":";$e!==""&&($t+=" "),$t+=ft,_e.push($t)}}var Zt;if(_e.length===0)Zt="{}";else{var li;if($e==="")li=_e.join(","),Zt="{"+li+"}";else{var Vv=`,
`+J;li=_e.join(Vv),Zt=`{
`+J+li+`,
`+Se+"}"}}return O.pop(),J=Se,Zt}function Hv(ie){if(ie.length===0)return ui(ie);var Se=String.fromCodePoint(ie.codePointAt(0));if(!ye.isIdStartChar(Se))return ui(ie);for(var H=Se.length;H<ie.length;H++)if(!ye.isIdContinueChar(String.fromCodePoint(ie.codePointAt(H))))return ui(ie);return ie}function Uv(ie){if(O.indexOf(ie)>=0)throw TypeError("Converting circular structure to JSON5");O.push(ie);var Se=J;J=J+$e;for(var H=[],_e=0;_e<ie.length;_e++){var Ye=br(String(_e),ie);H.push(Ye!==void 0?Ye:"null")}var Fe;if(H.length===0)Fe="[]";else if($e===""){var Xt=H.join(",");Fe="["+Xt+"]"}else{var ft=`,
`+J,$t=H.join(ft);Fe=`[
`+J+$t+`,
`+Se+"]"}return O.pop(),J=Se,Fe}},Lv={parse:Mv,stringify:Rv},Ov=Lv,jv=Ov;return jv})}}),th={};N(th,{button:()=>Am,checkbox:()=>bm,numeric:()=>Em,select:()=>_m,textAreaKeyboard:()=>Dm});var yy=Wc(vy(),1),{__extends:sn,__assign:h_,__rest:f_,__decorate:d_,__param:v_,__metadata:p_,__awaiter:my,__generator:rh,__exportStar:y_,__createBinding:m_,__values:Do,__read:Jr,__spread:g_,__spreadArrays:w_,__spreadArray:On,__await:Js,__asyncGenerator:gy,__asyncDelegator:x_,__asyncValues:wy,__makeTemplateObject:D_,__importStar:b_,__importDefault:E_,__classPrivateFieldGet:A_,__classPrivateFieldSet:__}=yy.default;function ce(e){return typeof e=="function"}function xy(e){var r=function(i){Error.call(i),i.stack=new Error().stack},n=e(r);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ys=xy(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(i,s){return s+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function bo(e,r){if(e){var n=e.indexOf(r);0<=n&&e.splice(n,1)}}var la=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,n,i,s,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var u=Do(a),l=u.next();!l.done;l=u.next()){var c=l.value;c.remove(this)}}catch(x){r={error:x}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}else a.remove(this);var h=this.initialTeardown;if(ce(h))try{h()}catch(x){o=x instanceof Ys?x.errors:[x]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=Do(f),v=d.next();!v.done;v=d.next()){var m=v.value;try{El(m)}catch(x){o=o??[],x instanceof Ys?o=On(On([],Jr(o)),Jr(x.errors)):o.push(x)}}}catch(x){i={error:x}}finally{try{v&&!v.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}}if(o)throw new Ys(o)}},e.prototype.add=function(r){var n;if(r&&r!==this)if(this.closed)El(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(r)}},e.prototype._hasParent=function(r){var n=this._parentage;return n===r||Array.isArray(n)&&n.includes(r)},e.prototype._addParent=function(r){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(r),n):n?[n,r]:r},e.prototype._removeParent=function(r){var n=this._parentage;n===r?this._parentage=null:Array.isArray(n)&&bo(n,r)},e.prototype.remove=function(r){var n=this._finalizers;n&&bo(n,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();function nh(e){return e instanceof la||e&&"closed"in e&&ce(e.remove)&&ce(e.add)&&ce(e.unsubscribe)}function El(e){ce(e)?e():e.unsubscribe()}var ih={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Dy={setTimeout:function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,On([e,r],Jr(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function sh(e){Dy.setTimeout(function(){throw e})}function Al(){}function by(e){e()}var ca=function(e){sn(r,e);function r(n){var i=e.call(this)||this;return i.isStopped=!1,n?(i.destination=n,nh(n)&&n.add(i)):i.destination=Cy,i}return r.create=function(n,i,s){return new Eo(n,i,s)},r.prototype.next=function(n){this.isStopped||this._next(n)},r.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(n){this.destination.next(n)},r.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(la),Ey=Function.prototype.bind;function Ks(e,r){return Ey.call(e,r)}var Ay=function(){function e(r){this.partialObserver=r}return e.prototype.next=function(r){var n=this.partialObserver;if(n.next)try{n.next(r)}catch(i){ci(i)}},e.prototype.error=function(r){var n=this.partialObserver;if(n.error)try{n.error(r)}catch(i){ci(i)}else ci(r)},e.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(n){ci(n)}},e}(),Eo=function(e){sn(r,e);function r(n,i,s){var o=e.call(this)||this,a;if(ce(n)||!n)a={next:n??void 0,error:i??void 0,complete:s??void 0};else{var u;o&&ih.useDeprecatedNextContext?(u=Object.create(n),u.unsubscribe=function(){return o.unsubscribe()},a={next:n.next&&Ks(n.next,u),error:n.error&&Ks(n.error,u),complete:n.complete&&Ks(n.complete,u)}):a=n}return o.destination=new Ay(a),o}return r}(ca);function ci(e){sh(e)}function _y(e){throw e}var Cy={closed:!0,next:Al,error:_y,complete:Al},ha=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function $y(e){return e}function Sy(e){return e.length===0?$y:e.length===1?e[0]:function(n){return e.reduce(function(i,s){return s(i)},n)}}var Et=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var n=new e;return n.source=this,n.operator=r,n},e.prototype.subscribe=function(r,n,i){var s=this,o=Py(r)?r:new Eo(r,n,i);return by(function(){var a=s,u=a.operator,l=a.source;o.add(u?u.call(o,l):l?s._subscribe(o):s._trySubscribe(o))}),o},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(n){r.error(n)}},e.prototype.forEach=function(r,n){var i=this;return n=_l(n),new n(function(s,o){var a=new Eo({next:function(u){try{r(u)}catch(l){o(l),a.unsubscribe()}},error:o,complete:s});i.subscribe(a)})},e.prototype._subscribe=function(r){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(r)},e.prototype[ha]=function(){return this},e.prototype.pipe=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return Sy(r)(this)},e.prototype.toPromise=function(r){var n=this;return r=_l(r),new r(function(i,s){var o;n.subscribe(function(a){return o=a},function(a){return s(a)},function(){return i(o)})})},e.create=function(r){return new e(r)},e}();function _l(e){var r;return(r=e??ih.Promise)!==null&&r!==void 0?r:Promise}function Fy(e){return e&&ce(e.next)&&ce(e.error)&&ce(e.complete)}function Py(e){return e&&e instanceof ca||Fy(e)&&nh(e)}function By(e){return ce(e?.lift)}function fa(e){return function(r){if(By(r))return r.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Oi(e,r,n,i,s){return new My(e,r,n,i,s)}var My=function(e){sn(r,e);function r(n,i,s,o,a,u){var l=e.call(this,n)||this;return l.onFinalize=a,l.shouldUnsubscribe=u,l._next=i?function(c){try{i(c)}catch(h){n.error(h)}}:e.prototype._next,l._error=o?function(c){try{o(c)}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=s?function(){try{s()}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return r.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},r}(ca),ky={now:function(){return Date.now()},delegate:void 0},Ny=function(e){sn(r,e);function r(n,i){return e.call(this)||this}return r.prototype.schedule=function(n,i){return this},r}(la),Cl={setInterval:function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,On([e,r],Jr(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},Ty=function(e){sn(r,e);function r(n,i){var s=e.call(this,n,i)||this;return s.scheduler=n,s.work=i,s.pending=!1,s}return r.prototype.schedule=function(n,i){if(i===void 0&&(i=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(o,this.id,i),this},r.prototype.requestAsyncId=function(n,i,s){return s===void 0&&(s=0),Cl.setInterval(n.flush.bind(n,this),s)},r.prototype.recycleAsyncId=function(n,i,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return i;Cl.clearInterval(i)},r.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(n,i);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(n,i){var s=!1,o;try{this.work(n)}catch(a){s=!0,o=a||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),o},r.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,s=n.scheduler,o=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,bo(o,this),i!=null&&(this.id=this.recycleAsyncId(s,i,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(Ny),$l=function(){function e(r,n){n===void 0&&(n=e.now),this.schedulerActionCtor=r,this.now=n}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,r).schedule(i,n)},e.now=ky.now,e}(),zy=function(e){sn(r,e);function r(n,i){i===void 0&&(i=$l.now);var s=e.call(this,n,i)||this;return s.actions=[],s._active=!1,s._scheduled=void 0,s}return r.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var s;this._active=!0;do if(s=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,s){for(;n=i.shift();)n.unsubscribe();throw s}},r}($l),Iy=new zy(Ty),oh=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Ry(e){return ce(e?.then)}function Ly(e){return ce(e[ha])}function Oy(e){return Symbol.asyncIterator&&ce(e?.[Symbol.asyncIterator])}function jy(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function qy(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hy=qy();function Uy(e){return ce(e?.[Hy])}function Vy(e){return gy(this,arguments,function(){var n,i,s,o;return rh(this,function(a){switch(a.label){case 0:n=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Js(n.read())];case 3:return i=a.sent(),s=i.value,o=i.done,o?[4,Js(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Js(s)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function Wy(e){return ce(e?.getReader)}function da(e){if(e instanceof Et)return e;if(e!=null){if(Ly(e))return Gy(e);if(oh(e))return Jy(e);if(Ry(e))return Yy(e);if(Oy(e))return ah(e);if(Uy(e))return Ky(e);if(Wy(e))return Xy(e)}throw jy(e)}function Gy(e){return new Et(function(r){var n=e[ha]();if(ce(n.subscribe))return n.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Jy(e){return new Et(function(r){for(var n=0;n<e.length&&!r.closed;n++)r.next(e[n]);r.complete()})}function Yy(e){return new Et(function(r){e.then(function(n){r.closed||(r.next(n),r.complete())},function(n){return r.error(n)}).then(null,sh)})}function Ky(e){return new Et(function(r){var n,i;try{for(var s=Do(e),o=s.next();!o.done;o=s.next()){var a=o.value;if(r.next(a),r.closed)return}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}r.complete()})}function ah(e){return new Et(function(r){Zy(e,r).catch(function(n){return r.error(n)})})}function Xy(e){return ah(Vy(e))}function Zy(e,r){var n,i,s,o;return my(this,void 0,void 0,function(){var a,u;return rh(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=wy(e),l.label=1;case 1:return[4,n.next()];case 2:if(i=l.sent(),!!i.done)return[3,4];if(a=i.value,r.next(a),r.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=l.sent(),s={error:u},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}function Qy(e,r,n,i,s){i===void 0&&(i=0),s===void 0&&(s=!1);var o=r.schedule(function(){n(),s?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!s)return o}function ji(e,r){return fa(function(n,i){var s=0;n.subscribe(Oi(i,function(o){i.next(e.call(r,o,s++))}))})}var em=Array.isArray;function tm(e,r){return em(r)?e.apply(void 0,On([],Jr(r))):e(r)}function rm(e){return ji(function(r){return tm(e,r)})}function nm(e,r,n,i,s,o,a,u){var l=[],c=0,h=0,f=!1,d=function(){f&&!l.length&&!c&&r.complete()},v=function(x){return c<i?m(x):l.push(x)},m=function(x){o&&r.next(x),c++;var _=!1;da(n(x,h++)).subscribe(Oi(r,function(S){s?.(S),o?v(S):r.next(S)},function(){_=!0},void 0,function(){if(_)try{c--;for(var S=function(){var M=l.shift();a?Qy(r,a,function(){return m(M)}):m(M)};l.length&&c<i;)S();d()}catch(M){r.error(M)}}))};return e.subscribe(Oi(r,v,function(){f=!0,d()})),function(){u?.()}}function uh(e,r,n){return n===void 0&&(n=1/0),ce(r)?uh(function(i,s){return ji(function(o,a){return r(i,o,s,a)})(da(e(i,s)))},n):(typeof r=="number"&&(n=r),fa(function(i,s){return nm(i,s,e,n)}))}var im=["addListener","removeListener"],sm=["addEventListener","removeEventListener"],om=["on","off"];function qi(e,r,n,i){if(ce(n)&&(i=n,n=void 0),i)return qi(e,r,n).pipe(rm(i));var s=Jr(lm(e)?sm.map(function(u){return function(l){return e[u](r,l,n)}}):am(e)?im.map(Sl(e,r)):um(e)?om.map(Sl(e,r)):[],2),o=s[0],a=s[1];if(!o&&oh(e))return uh(function(u){return qi(u,r,n)})(da(e));if(!o)throw new TypeError("Invalid event target");return new Et(function(u){var l=function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return u.next(1<c.length?c:c[0])};return o(l),function(){return a(l)}})}function Sl(e,r){return function(n){return function(i){return e[n](r,i)}}}function am(e){return ce(e.addListener)&&ce(e.removeListener)}function um(e){return ce(e.on)&&ce(e.off)}function lm(e){return ce(e.addEventListener)&&ce(e.removeEventListener)}function lh(e,r){return r===void 0&&(r=Iy),fa(function(n,i){var s=null,o=null,a=null,u=function(){if(s){s.unsubscribe(),s=null;var c=o;o=null,i.next(c)}};function l(){var c=a+e,h=r.now();if(h<c){s=this.schedule(void 0,c-h),i.add(s);return}u()}n.subscribe(Oi(i,function(c){o=c,a=r.now(),s||(s=r.schedule(l,e),i.add(s))},function(){u(),i.complete()},void 0,function(){o=s=null}))})}var ch=Wc(py(),1),hh=(e,r)=>{const n=Ce(e),i=pa(),s=()=>{const o=window.innerWidth,a=window.innerHeight;n.setAttribute("width",o.toString()),n.setAttribute("height",a.toString());const u={width:o,height:a,center:{x:o/2,y:a/2}};r!==void 0&&r({el:n,bounds:u})};return i.subscribe(s),s(),i},cm=(e,r,n=!1)=>{if(e==null)throw new Error("domQueryOrEl is null or undefined");const i=Ce(e);if(i.nodeName!=="CANVAS")throw new Error(`Expected HTML element with node name CANVAS, not ${i.nodeName}`);const s=i.getContext("2d");if(s===null)throw new Error("Could not create drawing context");const o=()=>{const u=window.innerWidth,l=window.innerHeight;i.width=u,i.height=l;const c={width:u,height:l,center:{x:u/2,y:l/2}};r!==void 0&&r({ctx:s,el:i,bounds:c})};n||(i.style.top="0",i.style.left="0",i.style.zIndex="-100",i.style.position="fixed");const a=pa();return a.subscribe(o),o(),a},hm=(e,r,n=100)=>{const i=Ce(e),s=i.parentElement;if(s===null)throw new Error("Element has no parent");return ya(s,n).subscribe(a=>{const u=a.find(f=>f.target===s);if(u===void 0)return;const l=u.contentRect.width,c=u.contentRect.height;i.setAttribute("width",l+"px"),i.setAttribute("height",c+"px");const h={width:l,height:c,center:{x:l/2,y:c/2}};r!==void 0&&r({el:i,bounds:h})})},fm=e=>{const r=Ce(e),i=window.getComputedStyle(r).transform;if(i==="none"||typeof i>"u")return{x:0,y:0,z:0};const s=i.includes("3d")?"3d":"2d",o=i.match(/matrix.*\((.+)\)/)[1].split(", ");return s==="2d"?{x:parseFloat(o[4]),y:parseFloat(o[5]),z:0}:s==="3d"?{x:parseFloat(o[12]),y:parseFloat(o[13]),z:parseFloat(o[14])}:{x:0,y:0,z:0}},va=(e,r,n=100)=>{const i=Ce(e);if(i.nodeName!=="CANVAS")throw new Error(`Expected HTML element with node name CANVAS, not ${i.nodeName}`);const s=i.parentElement;if(s===null)throw new Error("Element has no parent");const o=i.getContext("2d");if(o===null)throw new Error("Could not create drawing context");return i.style.width="100%",i.style.height="100%",ya(s,n).subscribe(u=>{const l=u.find(d=>d.target===s);if(l===void 0)return;const c=l.contentRect.width,h=l.contentRect.height;i.setAttribute("width",i.offsetWidth+"px"),i.setAttribute("height",i.offsetHeight+"px");const f={width:c,height:h,center:{x:c/2,y:h/2}};r!==void 0&&r({ctx:o,el:i,bounds:f})})},pa=(e=100)=>qi(window,"resize").pipe(lh(e)),Ce=e=>{if(typeof e=="string"){const n=document.querySelector(e);if(n===null)throw e.startsWith("#")?new Error(`Query '${e}' did not match anything. Try '#id', 'div', or '.class'`):new Error(`Query '${e}' did not match anything. Did you mean '#${e}?`);e=n}else{if(e===null)throw new Error(`domQueryOrEl ${e} is null`);if(e===void 0)throw new Error(`domQueryOrEl ${e} is undefined`)}return e},dm=(e,r)=>{const n=document.createElement(r);return e.parentElement?.insertBefore(n,e.nextSibling),n},vm=(e,r)=>{const n=document.createElement(r);return e.appendChild(n),n},pm=(e,r)=>{const n=Ce(e),i=s=>{const o=new Set;for(const[u,l]of s){const c=`table-${u}`;o.add(c);let h=n.querySelector(`#${c}`);h===null&&(h=document.createElement("table"),h.id=c,n.append(h)),Ao(h,l)}Array.from(n.querySelectorAll("table")).forEach(u=>{o.has(u.id)||u.remove()})};return r&&i(r),s=>{i(s)}},Ao=(e,r,n={})=>{const i=n.precision??2;if(r===void 0){e.innerHTML="";return}const s=new Set;for(const[a,u]of Object.entries(r)){const l=`row-${a}`;s.add(l);let c=e.querySelector(`#${l}`);if(c===null){c=document.createElement("tr"),e.append(c),c.id=l;const d=document.createElement("td");d.innerText=a,c.append(d)}let h=c.querySelector(`#${l}-val`);h===null&&(h=document.createElement("td"),h.id=`${l}-val`,c.append(h));let f;n.formatter&&(f=n.formatter(u,a)),f===void 0&&(typeof u=="object"?f=ch.default.stringify(u):typeof u=="number"?n.roundNumbers?f=Math.round(u).toString():f=u.toFixed(i):f=u.toString()),h.innerHTML=f}Array.from(e.querySelectorAll("tr")).forEach(a=>{s.has(a.id)||a.remove()})},ym=(e,r,n)=>{const i=Ce(e),s=document.createElement("table");return i.append(s),r&&Ao(s,r,n),o=>{Ao(s,o,n)}},mm=e=>{let r=e.lastElementChild;for(;r;)e.removeChild(r),r=e.lastElementChild},gm=()=>new Et(r=>{const n=new MutationObserver(s=>{r.next(s)}),i={attributeFilter:["class"],attributes:!0};return n.observe(document.documentElement,i),function(){n.disconnect()}}),ya=(e,r=1e3)=>{if(e===null)throw new Error("elem parameter is null. Expected element to observe");if(e===void 0)throw new Error("elem parameter is undefined. Expected element to observe");return new Et(i=>{const s=new ResizeObserver(o=>{i.next(o)});return s.observe(e),function(){s.unobserve(e)}}).pipe(lh(r))},wm=e=>new Promise((n,i)=>{const s=ch.default.stringify(e);navigator.clipboard.writeText(JSON.stringify(s)).then(()=>{n(!0)},o=>{console.warn("Could not copy to clipboard"),console.log(s),i(o)})}),xm=(e,r,n)=>{if(e===null)throw new Error("parentEl is null");if(e===void 0)throw new Error("parentEl is undefined");const i=new Set;for(const[o,a]of r){const u=`c-${o}`,l=e.querySelector(`#${u}`),c=n(a,l);l!==c&&(c.id=u,e.append(c)),i.add(u)}const s=[];for(let o=0;o<e.children.length;o++){const a=e.children[o];i.has(a.id)||s.push(a)}s.forEach(o=>o.remove())},Dm=e=>{e.addEventListener("keydown",r=>{const n=e.value,i=e.selectionStart,s=e.selectionEnd;if(r.key==="Tab"&&r.shiftKey)return e.value.substring(i-2,i)==="  "&&(e.value=n.substring(0,i-2)+n.substring(s)),e.selectionStart=e.selectionEnd=i-2,r.preventDefault(),!1;if(r.key==="Tab")return e.value=n.substring(0,i)+"  "+n.substring(s),e.selectionStart=e.selectionEnd=i+2,r.preventDefault(),!1})},bm=(e,r)=>{const n=Ce(e);return r&&n.addEventListener("change",()=>{r(n.checked)}),{get checked(){return n.checked},set checked(i){n.checked=i}}},Em=(e,r,n)=>{const i=Ce(e),s=n?"change":"input";return r&&i.addEventListener(s,()=>{r(parseInt(i.value))}),{get value(){return parseInt(i.value)},set value(o){i.value=o.toString()}}},Am=(e,r)=>{const n=Ce(e);return r&&n.addEventListener("click",i=>{r()}),{click(){r&&r()},set disabled(i){n.disabled=i}}},_m=(e,r,n={})=>{const i=Ce(e),{placeholderOpt:s,shouldAddChoosePlaceholder:o=!1,autoSelectAfterChoice:a=-1}=n,u=()=>{r!==void 0&&r(i.value),a>=0&&(i.selectedIndex=a)};return r&&i.addEventListener("change",l=>{u()}),{set disabled(l){i.disabled=l},get value(){return i.value},get index(){return i.selectedIndex},get isSelectedPlaceholder(){return(o||n.placeholderOpt!==void 0)&&i.selectedIndex===0},setOpts(l,c){i.options.length=0,o?l=["-- Choose --",...l]:s!==void 0&&(l=[s,...l]);let h=0;l.forEach((f,d)=>{const v=document.createElement("option");v.value=f,v.innerHTML=f,c!==void 0&&f===c&&(h=d),i.options.add(v)}),i.selectedIndex=h},select(l=0,c=!1){i.selectedIndex=l,c&&r&&u()}}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fr=(e,r)=>(me(e,"positive","timeoutMs"),e===0?new Promise(n=>requestAnimationFrame(i=>{n(r)})):new Promise(n=>setTimeout(()=>n(r),e))),fh=async function*(e,r){let n=!1;try{for(;!n;){if(await fr(r),n)return;if(typeof e=="function")yield await e();else if(typeof e=="object")if("next"in e&&"return"in e&&"throw"in e){const i=await e.next();if(i.done)return;yield i.value}else throw new Error("interval: produce param does not seem to be a generator?");else throw new Error("produce param does not seem to return a value/Promise and is not a generator?")}}finally{n=!0}},Cm=async(e,r)=>(await fr(r),Promise.resolve(await e()));async function*$m(){let e,r=new Promise(s=>e=s),n=0;const i=()=>{e(),r=new Promise(s=>e=s)};try{for(;;)n=window.requestAnimationFrame(i),yield await r}finally{e(),window.cancelAnimationFrame(n)}}async function*ma(e){if(e===0)return yield*$m();let r,n=new Promise(o=>r=o),i=0;const s=()=>{r(),n=new Promise(o=>r=o)};try{for(;;)i=window.setTimeout(s,e),yield await n}finally{r(),window.clearTimeout(i)}}var Sm={};N(Sm,{Async:()=>aa,Sync:()=>vh,count:()=>Km,delayLoop:()=>ma,interval:()=>fh,numericPercent:()=>Xm,numericRange:()=>ph,numericRangeRaw:()=>Ym,pingPong:()=>ga,pingPongPercent:()=>dh});var dh=function(e=.1,r,n,i,s){return r===void 0&&(r=0),n===void 0&&(n=1),i===void 0&&(i=r),R(e,"bipolar","interval"),R(n,"bipolar","end"),R(i,"bipolar","offset"),R(r,"bipolar","start"),ga(e,r,n,i,s)},ga=function*(e,r,n,i,s){if(r===void 0)throw new Error("Parameter 'lower' is undefined");if(e===void 0)throw new Error("Parameter 'interval' is undefined");if(n===void 0)throw new Error("Parameter 'upper' is undefined");if(s===void 0&&e<=1&&e>=0?s=10/e:s===void 0&&(s=1234),Number.isNaN(e))throw new Error("interval parameter is NaN");if(Number.isNaN(r))throw new Error("lower parameter is NaN");if(Number.isNaN(n))throw new Error("upper parameter is NaN");if(Number.isNaN(i))throw new Error("upper parameter is NaN");if(r>=n)throw new Error("lower must be less than upper");if(e===0)throw new Error("Interval cannot be zero");const o=n-r;if(Math.abs(e)>=o)throw new Error(`Interval should be between -${o} and ${o}`);let a=e>0;if(n=Math.floor(n*s),r=Math.floor(r*s),e=Math.floor(Math.abs(e*s)),e===0)throw new Error(`Interval is zero (rounding: ${s})`);if(i===void 0?i=r:i=Math.floor(i*s),i>n||i<r)throw new Error(`Start (${i/s}) must be within lower (${r/s}) and upper (${n/s})`);let u=i;yield u/s;let l=!0;for(;;)u=u+(a?e:-e),a&&u>=n?(a=!1,u=n,u===n&&l&&(u=r,a=!0)):!a&&u<=r&&(a=!0,u=r,u===r&&l&&(u=n,a=!1)),yield u/s,l=!1},vh={};N(vh,{chunks:()=>Fm,concat:()=>Pm,dropWhile:()=>Bm,equals:()=>Mm,every:()=>km,fill:()=>Nm,filter:()=>zm,find:()=>Im,flatten:()=>Rm,forEach:()=>Tm,map:()=>Lm,max:()=>Om,min:()=>jm,range:()=>qm,reduce:()=>Hm,slice:()=>Um,some:()=>Vm,takeWhile:()=>Wm,unique:()=>Gm,zip:()=>Jm});function*Fm(e,r){let n=[];for(const i of e)n.push(i),n.length===r&&(yield n,n=[]);n.length>0&&(yield n)}function*Pm(...e){for(const r of e)yield*r}function*Bm(e,r){for(const n of e)if(!r(n)){yield n;break}yield*e}function Mm(e,r,n){for(;;){const i=e.next(),s=r.next();if(n!==void 0){if(!n(i.value,s.value))return!1}else if(i.value!==s.value)return!1;if(i.done||s.done)return i.done&&s.done}}function km(e,r){let n=!0;for(const i of e)n=n&&r(i);return n}function*Nm(e,r){for(const n of e)yield r}function Tm(e,r){for(const n of e)r(n)}function*zm(e,r){for(const n of e)!r(n)||(yield n)}function Im(e,r){for(const n of e)if(r(n))return n}function*Rm(e){for(const r of e)Symbol.iterator in r?yield*r:yield r}function*Lm(e,r){for(const n of e)yield r(n)}function Om(e,r=(n,i)=>n>i){let n;for(const i of e){if(!n){n=i;continue}n=r(n,i)?n:i}return n}function jm(e,r=(n,i)=>n>i){let n;for(const i of e){if(!n){n=i;continue}n=r(n,i)?i:n}return n}function*qm(e,r){for(let n=0;n<r;n++)yield e++}function Hm(e,r,n){for(const i of e)n=r(n,i);return n}function*Um(e,r=0,n=Number.POSITIVE_INFINITY){const i=e[Symbol.iterator]();for(;r>0;r--,n--)i.next();for(const s of e)if(n-- >0)yield s;else break}function Vm(e,r){for(const n of e)if(r(n))return!0;return!1}function*Wm(e,r){for(const n of e){if(!r(n))return;yield n}}function*Gm(e,r=n=>n){const n=[];for(const i of e){const s=r(i);n.indexOf(s)===-1&&(n.push(s),yield i)}}function*Jm(...e){const r=e.map(n=>n[Symbol.iterator]());for(;;){const n=r.map(i=>i.next());if(n.some(i=>i.done))return;yield n.map(i=>i.value)}}var Ym=function*(e,r=0,n,i=!1){if(e<=0)throw new Error("Interval is expected to be above zero");n===void 0&&(n=Number.MAX_SAFE_INTEGER);let s=r;do for(;s<n;)yield s,s+=e;while(i)},ph=function*(e,r=0,n,i=!1,s){R(e,"nonZero");const o=e<0;if(n!==void 0){if(o&&r<n)throw new Error(`Interval of ${e} will never go from ${r} to ${n}`);if(!o&&r>n)throw new Error(`Interval of ${e} will never go from ${r} to ${n}`)}s=s??1e3,n===void 0?n=Number.MAX_SAFE_INTEGER:n*=s,e=e*s;do{let a=r*s;for(;!o&&a<=n||o&&a>=n;)yield a/s,a+=e}while(i)},Km=function*(e,r=0){if(me(e,"","amount"),me(r,"","offset"),e===0)return;let n=0;do e<0?yield-n+r:yield n+r;while(n++<Math.abs(e)-1)},Xm=function(e=.01,r=!1,n=0,i=1){return R(e,"percentage","interval"),R(n,"percentage","start"),R(i,"percentage","end"),ph(e,n,i,r)},yh={};N(yh,{addUniqueByHash:()=>gh,filter:()=>xh,find:()=>Dh,getOrGenerate:()=>mh,getOrGenerateSync:()=>Qm,hasAnyValue:()=>wh,hasKeyValue:()=>Zm,mapToArray:()=>ng,mapToObj:()=>rg,mapToObjTransform:()=>eg,toArray:()=>_o,transformMap:()=>tg,zipKeyValue:()=>wa});var Zm=(e,r,n,i)=>e.has(r)?Array.from(e.values()).some(o=>i(o,n)):!1,mh=(e,r)=>async(n,i)=>{let s=e.get(n);if(s!==void 0)return Promise.resolve(s);if(s=await r(n,i),s===void 0)throw new Error("fn returned undefined");return e.set(n,s),s},Qm=(e,r)=>(n,i)=>{let s=e.get(n);return s!==void 0||(s=r(n,i),e.set(n,s)),s},gh=(e,r,...n)=>{const i=e===void 0?new Map:new Map(e);return n.forEach(s=>{const o=r(s);i.has(o)||i.set(o,s)}),i},wh=(e,r,n)=>Array.from(e.entries()).some(s=>n(s[1],r));function*xh(e,r){for(const n of e.values())r(n)&&(yield n)}var _o=e=>Array.from(e.values()),Dh=(e,r)=>Array.from(e.values()).find(n=>r(n)),eg=(e,r)=>Array.from(e).reduce((n,[i,s])=>{const o=r(s);return n[i]=o,n},{}),wa=(e,r)=>{if(e.length!==r.length)throw new Error("Keys and values arrays should be same length");return Object.fromEntries(e.map((n,i)=>[n,r[i]]))},tg=(e,r)=>new Map(Array.from(e,n=>[n[0],r(n[1],n[0])])),rg=e=>Array.from(e).reduce((r,[n,i])=>(r[n]=i,r),{}),ng=(e,r)=>Array.from(e.entries()).map(n=>r(n[0],n[1])),xa={};N(xa,{StateMachine:()=>on,create:()=>sg,descriptionFromList:()=>bh,fromList:()=>ig});var bh=(...e)=>{const r={};for(let n=0;n<e.length;n++)n===e.length-1?r[e[n]]=null:r[e[n]]=e[n+1];return r},ig=(...e)=>new on(e[0],bh(...e)),sg=(e,r,n={debug:!1})=>new on(e,r,n),Pt,Ei,Bt,Sr,Ai,_i=class extends jt{constructor(e,r,n={debug:!1}){super();le(this,Pt,void 0),le(this,Ei,void 0),le(this,Bt,void 0),le(this,Sr,void 0),le(this,Ai,void 0);const[i,s]=_i.validate(e,r);if(!i)throw new Error(s);Q(this,Ai,e),Q(this,Bt,r),Q(this,Ei,n.debug??!1),Q(this,Pt,e),Q(this,Sr,!1)}get states(){return Object.keys(A(this,Bt))}static validate(e,r){const n=Object.keys(r),i=new Set,s=new Set;for(let u=0;u<n.length;u++){const l=n[u];if(i.has(l))return[!1,`Key ${l} is already used`];if(i.add(l),typeof n[u]!="string")return[!1,`Key[${u}] is not a string`];const c=r[l];if(c===void 0)return[!1,`Key ${l} value is undefined`];if(typeof c=="string"){if(s.add(c),c===l)return[!1,`Loop present for ${l}`]}else if(Array.isArray(c)){if(!ly(c))return[!1,`Key ${l} value is not an array of strings`];if(c.forEach(h=>s.add(h)),c.find(h=>h===l))return[!1,`Loop present for ${l}`]}else if(c!==null)return[!1,`Key ${l} has a value that is neither null, string or array`]}const a=Array.from(s).find(u=>!i.has(u));return a?[!1,`Potential state '${a}' does not exist as a top-level state`]:r[e]===void 0?[!1,`Initial state ${e} not present`]:[!0,""]}next(){const e=A(this,Bt)[A(this,Pt)];if(e===null)return null;if(Array.isArray(e))if(typeof e[0]=="string")this.state=e[0];else throw new Error("Error in machine description. Potential state array does not contain strings");else if(typeof e=="string")this.state=e;else throw new Error("Error in machine description. Potential state is neither array nor string");return this.state}get isDone(){return A(this,Sr)}reset(){Q(this,Sr,!1),Q(this,Pt,A(this,Ai))}static isValid(e,r,n){if(n[r]===void 0)return[!1,`Machine cannot change to non-existent state ${r}`];const i=n[e];if(Array.isArray(i)){if(!i.includes(r))return[!1,`Machine cannot change '${e} -> ${r}'. Allowed transitions: ${i.join(", ")}`]}else if(r!==i&&i!=="*")return[!1,`Machine cannot '${e} -> ${r}'. Allowed transition: ${i}`];return[!0,"ok"]}isValid(e){return _i.isValid(this.state,e,A(this,Bt))}set state(e){const r=A(this,Pt),[n,i]=_i.isValid(r,e,A(this,Bt));if(!n)throw new Error(i);A(this,Ei)&&console.log(`StateMachine: ${r} -> ${e}`),Q(this,Pt,e),A(this,Bt)[e]===null&&Q(this,Sr,!0),setTimeout(()=>{this.fireEvent("change",{newState:e,priorState:r}),this.isDone&&this.fireEvent("stop",{state:e})},1)}get state(){return A(this,Pt)}},on=_i;Pt=new WeakMap;Ei=new WeakMap;Bt=new WeakMap;Sr=new WeakMap;Ai=new WeakMap;var og={};N(og,{StateMachine:()=>xa,continuously:()=>Ea,debounce:()=>lg,delay:()=>Cm,delayLoop:()=>ma,forEach:()=>Ch,forEachAsync:()=>$h,frequencyTimer:()=>qt,frequencyTimerSource:()=>Ah,interval:()=>fh,msElapsedTimer:()=>gr,relativeTimer:()=>Da,repeat:()=>_a,sleep:()=>fr,throttle:()=>cg,ticksElapsedTimer:()=>ba,timeout:()=>_h,updateOutdated:()=>ag,waitFor:()=>Aa});var Eh={};N(Eh,{frequencyTimer:()=>qt,frequencyTimerSource:()=>Ah,msElapsedTimer:()=>gr,relativeTimer:()=>Da,ticksElapsedTimer:()=>ba});var Le=(e,r=0,n=1)=>{if(Number.isNaN(e))throw new Error("v parameter is NaN");if(Number.isNaN(r))throw new Error("min parameter is NaN");if(Number.isNaN(n))throw new Error("max parameter is NaN");return e<r?r:e>n?n:e},Co=(e,r)=>{if(!Number.isInteger(e))throw new Error(`v parameter must be an integer (${e})`);const n=Array.isArray(r)?r.length:r;if(!Number.isInteger(n))throw new Error(`length parameter must be an integer (${n}, ${typeof n})`);return e=Math.round(e),e<0?0:e>=n?n-1:e},Ah=e=>()=>qt(e,gr()),Da=(e,r,n=!0)=>{let i=!1,s=1;return{mod(o){s=o},get isDone(){return i},reset:()=>{i=!1,r.reset()},get elapsed(){let o=r.elapsed/(e*s);return n&&(o=Le(o)),o>=1&&(i=!0),o}}},qt=(e,r=gr())=>{const n=e/1e3;let i=1;return{mod:s=>{i=s},reset:()=>{r.reset()},get elapsed(){const s=r.elapsed*(n*i),o=s-Math.floor(s);if(o<0)throw new Error(`Unexpected cycle fraction less than 0. Elapsed: ${s} f: ${o}`);if(o>1)throw new Error(`Unexpected cycle fraction more than 1. Elapsed: ${s} f: ${o}`);return o}}},gr=()=>{let e=performance.now();return{reset:()=>{e=performance.now()},get elapsed(){return performance.now()-e}}},ba=()=>{let e=0;return{reset:()=>{e=0},get elapsed(){return e++}}},_h=(e,r)=>{if(e===void 0)throw new Error("callback parameter is undefined");me(r,"aboveZero","timeoutMs");let n=0,i=0;const s=async(a=r,u)=>new Promise((c,h)=>{i=performance.now();try{me(a,"aboveZero","altTimeoutMs")}catch(f){h(f);return}n!==0&&o(),n=window.setTimeout(async()=>{await e(performance.now()-i,...u),n=0,c(void 0)},a)}),o=()=>{n!==0&&(i=0,window.clearTimeout(n))};return{start:s,cancel:o,get isDone(){return n!==0}}},ag=(e,r,n="slow")=>{let i=0,s,o=r;return()=>new Promise(async(a,u)=>{const l=performance.now()-i;if(s===void 0||l>o)try{i=performance.now(),s=await e(l),o=r}catch(c){n==="fast"?(s=void 0,i=0):n==="backoff"&&(o=Math.floor(o*1.2)),u(c);return}a(s)})},ug=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>setTimeout(e,1),Ea=(e,r,n)=>{r!==void 0&&me(r,"positive","intervalMs");let i=!1,s=0,o=performance.now(),a=r===void 0?0:r;const u=a===0?ug:f=>setTimeout(f,a),l=()=>{!i||(i=!1,s=0)},c=async()=>{if(!i)return;const f=e(s++,performance.now()-o);let d;if(typeof f=="object"?d=await f:d=f,d!==void 0&&!d){l();return}u(c)};return{start:()=>{if(i&&n!==void 0){const f=n(s,performance.now()-o);if(o=performance.now(),f!==void 0&&!f){l();return}}else if(i)return;i=!0,u(c)},get intervalMs(){return a},set intervalMs(f){me(f,"positive","ms"),a=f},get isDone(){return!i},get ticks(){return s},get elapsedMs(){return performance.now()-o},cancel:l}},lg=(e,r)=>{const n=_h(e,r);return(...i)=>n.start(void 0,i)},cg=(e,r)=>{let n=0;return async(...i)=>{const s=performance.now()-n;if(s>=r){const o=e(s,...i);typeof o=="object"&&await o,n=performance.now()}}},Aa=(e,r,n)=>{let i=!1;const s=a=>{o!==0&&(window.clearTimeout(o),o=0),a?r(a):i=!0,n!==void 0&&n(i)};let o=window.setTimeout(()=>{o=0;try{r(`Timeout after ${e}ms`)}finally{n!==void 0&&n(i)}},e);return s},Ch=(e,r)=>{for(const n of e){const i=r(n);if(typeof i=="boolean"&&!i)break}},$h=async function(e,r,n){if(Array.isArray(e))for(const i of e){const s=await r(i);if(n&&await fr(n),typeof s=="boolean"&&!s)break}else for await(const i of e){const s=await r(i);if(n&&await fr(n),typeof s=="boolean"&&!s)break}},_a=(e,r)=>{let n,i;n=i=0;const s=[];if(typeof e=="number")for(R(e,"positive","countOrPredicate");e-- >0;){n++;const o=r();o!==void 0&&(s.push(o),i++)}else for(;e(n,i);){n++;const o=r();o!==void 0&&(s.push(o),i++)}return s};try{typeof window<"u"&&(window.ixfx={...window.ixfx,Flow:{StateMachine:xa,Timer:Eh,forEach:Ch,forEachAsync:$h,repeat:_a}})}catch{}var Sh={};N(Sh,{byValueString:()=>hv,getSorter:()=>Iu,minMaxAvg:()=>zE,sortByKey:()=>Yo,sortByValueNumber:()=>Ko,sortByValueString:()=>TE});function Ca(e,r,n,i,s,o,a,u,l){switch(arguments.length){case 1:return e;case 2:return r(e);case 3:return n(r(e));case 4:return i(n(r(e)));case 5:return s(i(n(r(e))));case 6:return o(s(i(n(r(e)))));case 7:return a(o(s(i(n(r(e))))));case 8:return u(a(o(s(i(n(r(e)))))));case 9:return l(u(a(o(s(i(n(r(e))))))));default:for(var c=arguments[0],h=1;h<arguments.length;h++)c=arguments[h](c);return c}}var hg=function(e){return function(r,n){return r===n||e(r,n)===0}},Fh=function(e){return{equals:hg(e),compare:function(r,n){return r===n?0:e(r,n)}}},$a=function(e){return Fh(function(r,n){return e.compare(n,r)})},Sa=function(e){return function(r){return Fh(function(n,i){return r.compare(e(n),e(i))})}},Ph={equals:function(e,r){return e===r}},$o={equals:Ph.equals,compare:function(e,r){return e<r?-1:e>r?1:0}};Ph.equals,$o.compare;var fg=function(e){return e.slice()},Fa=function(e){return function(r){return r.length<=1?fg(r):r.slice().sort(e.compare)}},dg={equals:function(e,r){return e===r}},Hi={equals:dg.equals,compare:function(e,r){return e<r?-1:e>r?1:0}},Qe={};N(Qe,{areValuesIdentical:()=>Nu,average:()=>kh,averageWeighted:()=>Nh,chunks:()=>ME,dotProduct:()=>yg,ensureLength:()=>CE,filterBetween:()=>lv,flatten:()=>AE,groupBy:()=>PE,guardArray:()=>Ts,guardIndex:()=>ns,interleave:()=>_E,intersection:()=>EE,max:()=>Ih,maxFast:()=>gg,maxIndex:()=>mg,min:()=>Th,minFast:()=>Lh,minIndex:()=>zh,minMaxAvg:()=>ds,randomElement:()=>zu,randomIndex:()=>Tu,randomPluck:()=>$E,remove:()=>FE,sample:()=>BE,shuffle:()=>SE,total:()=>Rh,validNumbers:()=>Yr,weight:()=>Mh,without:()=>cv,zip:()=>uv});var vg={};N(vg,{arrayElement:()=>zu,arrayIndex:()=>Tu,defaultRandom:()=>et,float:()=>DE,gaussian:()=>ku,gaussianSkewed:()=>wE,hue:()=>du,integer:()=>xE,shortGuid:()=>bE,string:()=>av,weighted:()=>ov,weightedInteger:()=>gE,weightedSkewed:()=>mE});var Pa={};N(Pa,{crossfade:()=>fE,fromCubicBezier:()=>hE,functions:()=>Mu,gaussian:()=>sv,get:()=>Ns,getEasings:()=>dE,mix:()=>iv,tick:()=>cE,time:()=>lE});var pg={};N(pg,{FrequencyMutable:()=>Q0,IntervalTracker:()=>ev,Normalise:()=>Bh,NumberTracker:()=>tu,PointTracker:()=>_u,TrackedPointMap:()=>O0,TrackedValueMap:()=>L0,TrackerBase:()=>eu,clamp:()=>Le,clampIndex:()=>Co,flip:()=>ki,frequencyMutable:()=>iE,interpolate:()=>Bu,interpolateAngle:()=>rv,intervalTracker:()=>aE,movingAverage:()=>oE,movingAverageLight:()=>sE,numberTracker:()=>Mn,piPi:()=>Jo,pointTracker:()=>Bb,pointsTracker:()=>j0,scale:()=>Dt,scaleClamped:()=>wg,scalePercent:()=>Dg,scalePercentages:()=>xg,wrap:()=>rs,wrapInteger:()=>tv,wrapRange:()=>uE});var Bh={};N(Bh,{array:()=>Eg,stream:()=>bg});var Mh=(e,r)=>{const n=r===void 0?i=>i:r;return Yr(e).map((i,s)=>i*n(s/(Yr.length-1)))},Yr=e=>e.filter(r=>typeof r=="number"&&!Number.isNaN(r)),yg=e=>{let r=0;const n=e[0].length;for(let i=0;i<n;i++){let s=0;for(let o=0;o<e.length;o++)o===0?s=e[o][i]:s*=e[o][i];r+=s}return r},kh=e=>{if(e===void 0)throw new Error("data parameter is undefined");const r=Yr(e);return r.reduce((i,s)=>i+s,0)/r.length},Nh=(e,r)=>{typeof r=="function"&&(r=Mh(e,r));const n=uv(e,r),[i,s]=n.reduce((o,a)=>[o[0]+a[0]*a[1],o[1]+a[1]],[0,0]);return i/s},Th=e=>Math.min(...Yr(e)),mg=e=>e.reduce((r,n,i,s)=>n>s[r]?i:r,0),zh=(...e)=>e.reduce((r,n,i,s)=>n<s[r]?i:r,0),Ih=e=>Math.max(...Yr(e)),Rh=e=>e.reduce((r,n)=>typeof n!="number"||Number.isNaN(n)||Number.isFinite(n)?r:r+n,0),gg=e=>{let r=Number.MIN_SAFE_INTEGER;for(let n=0;n<e.length;n++)r=Math.max(r,e[n]);return r},Lh=e=>{let r=Number.MIN_SAFE_INTEGER;for(let n=0;n<e.length;n++)r=Math.min(r,e[n]);return r},ds=(e,r,n)=>{if(e===void 0)throw new Error("'data' is undefined");if(!Array.isArray(e))throw new Error("'data' parameter is not an array");if(e.length===0)return{total:0,min:0,max:0,avg:0};r===void 0&&(r=0),n===void 0&&(n=e.length-1);const i=lv(e,o=>typeof o=="number"&&!Number.isNaN(o),r,n),s=i.reduce((o,a)=>o+a,0);return{total:s,max:Math.max(...i),min:Math.min(...i),avg:s/i.length}},Dt=(e,r,n,i,s,o)=>{if(s===void 0&&(s=1),i===void 0&&(i=0),r===n)return s;let a=(e-r)/(n-r);return o!==void 0&&(a=o(a)),a*(s-i)+i},wg=(e,r,n,i,s,o)=>{if(s===void 0&&(s=1),i===void 0&&(i=0),r===n)return s;const a=Dt(e,r,n,i,s,o);return Le(a,i,s)},xg=(e,r,n=1)=>(R(e,"percentage","v"),R(r,"percentage","outMin"),R(n,"percentage","outMax"),Dt(e,0,1,r,n)),Dg=(e,r,n)=>(R(e,"percentage","v"),Dt(e,0,1,r,n)),bg=(e,r)=>{let n=e??Number.MAX_SAFE_INTEGER,i=r??Number.MIN_SAFE_INTEGER;return s=>(n=Math.min(n,s),i=Math.max(i,s),Dt(s,n,i))},Eg=(e,r,n)=>{if(!Array.isArray(e))throw new Error("values param should be an array");const i=ds(e),s=r??i.min,o=n??i.max;return e.map(a=>Le(Dt(a,s,o)))},Ag={};N(Ag,{Arcs:()=>Ba,Beziers:()=>Zn,Circles:()=>bt,Compound:()=>ja,Ellipses:()=>Ya,Grids:()=>Ha,Lines:()=>ze,Paths:()=>Lr,Points:()=>b,Polar:()=>nt,Rects:()=>ne,Shapes:()=>Ka,Triangles:()=>ar,degreeToRadian:()=>Tt,radianToDegree:()=>Qa,radiansFromAxisX:()=>Cd});var Ba={};N(Ba,{bbox:()=>zf,distanceCenter:()=>Ew,fromDegrees:()=>Dw,guard:()=>Ta,interpolate:()=>za,isArc:()=>kf,isEqual:()=>Aw,isPositioned:()=>gt,length:()=>Tf,point:()=>Gi,toLine:()=>Nf,toPath:()=>bw,toSvg:()=>If});var b={};N(b,{Empty:()=>Wi,Placeholder:()=>_f,abs:()=>Zg,angle:()=>Ir,apply:()=>sw,bbox:()=>Qg,centroid:()=>$f,clamp:()=>xw,clampMagnitude:()=>ww,compare:()=>cw,compareByX:()=>Mf,convexHull:()=>lw,distance:()=>xt,distanceToCenter:()=>Xg,distanceToExterior:()=>Kg,divide:()=>uw,dotProduct:()=>Wg,findMinimum:()=>ir,from:()=>iw,fromNumbers:()=>Sf,getPointParam:()=>dr,guard:()=>ee,guardNonZeroPoint:()=>Cf,interpolate:()=>nw,invert:()=>mw,isEmpty:()=>Ci,isEqual:()=>Bn,isNull:()=>Gg,isPlaceholder:()=>$i,isPoint:()=>fe,isPoint3d:()=>ko,leftmost:()=>Jg,multiply:()=>Bf,normalise:()=>dw,normaliseByRect:()=>vw,pipeline:()=>Ff,pipelineApply:()=>ow,project:()=>No,random:()=>pw,reduce:()=>Pf,relation:()=>To,rightmost:()=>Yg,rotate:()=>or,rotatePointArray:()=>hw,subtract:()=>Na,sum:()=>aw,toArray:()=>ew,toIntegerValues:()=>gw,toString:()=>tw,withinRange:()=>rw,wrap:()=>yw});var ze={};N(ze,{angleRadian:()=>Ig,apply:()=>of,asPoints:()=>Hg,bbox:()=>Ef,distance:()=>gf,divide:()=>uf,extendFromA:()=>jg,fromFlatArray:()=>Ug,fromNumbers:()=>Vi,fromPoints:()=>ys,fromPointsToPath:()=>Vg,getPointsParam:()=>ps,guard:()=>Ma,interpolate:()=>It,isEqual:()=>sf,isLine:()=>Ht,isPolyLine:()=>nf,joinPointsToLines:()=>bf,length:()=>Ze,midpoint:()=>ff,multiply:()=>af,nearest:()=>df,normaliseByRect:()=>Rg,parallel:()=>mf,perpendicularPoint:()=>yf,pointAtX:()=>Og,pointsOf:()=>qg,rotate:()=>Af,scaleFromMidpoint:()=>Lg,slope:()=>ka,subtract:()=>cf,sum:()=>lf,toFlatArray:()=>xf,toPath:()=>kt,toString:()=>wf,toSvgString:()=>Df,withinRange:()=>hf});var _g={};N(_g,{Arrays:()=>Qe,MapOfMutableImpl:()=>vs,Maps:()=>yh,Queues:()=>Kh,Sets:()=>Yc,Stacks:()=>Uh,circularArray:()=>jh,map:()=>Fr,mapArray:()=>qh,mapCircularMutable:()=>Hh,mapMutable:()=>zg,mapSet:()=>$g,queue:()=>tf,queueMutable:()=>Kr,setMutable:()=>oa,simpleMapArrayMutable:()=>Jc,stack:()=>Ui,stackMutable:()=>Yh});var vt,rt,Oh=class extends Array{constructor(e=0){super();le(this,vt,void 0),le(this,rt,void 0),me(e,"positive","capacity"),Q(this,vt,e),Q(this,rt,0)}add(e){const r=Oh.from(this);return r[A(this,rt)]=e,Q(r,vt,A(this,vt)),A(this,vt)>0?Q(r,rt,A(this,rt)+1===A(this,vt)?0:A(this,rt)+1):Q(r,rt,A(this,rt)+1),r}get pointer(){return A(this,rt)}get isFull(){return A(this,vt)===0?!1:this.length===A(this,vt)}},Cg=Oh;vt=new WeakMap;rt=new WeakMap;var jh=e=>new Cg(e),ve,vs=class extends jt{constructor(e,r={}){super();le(this,ve,new Map),y(this,"groupBy"),y(this,"type"),this.type=e,this.groupBy=r.groupBy??Ln}get typeName(){return this.type.name}get lengthMax(){let e=0;for(const r of A(this,ve).values())e=Math.max(e,this.type.count(r));return e}debugString(){const e=Array.from(A(this,ve).keys());let r=`Keys: ${e.join(", ")}\r
`;return e.forEach(n=>{const i=A(this,ve).get(n);if(i!==void 0){const s=this.type.toArray(i);s!==void 0&&(r+=` - ${n} (${this.type.count(i)}) = ${JSON.stringify(s)}\r
`)}else r+=` - ${n} (undefined)\r
`}),r}get isEmpty(){return A(this,ve).size===0}clear(){A(this,ve).clear(),super.fireEvent("clear",!0)}addKeyedValues(e,...r){const n=A(this,ve).get(e);n===void 0?(A(this,ve).set(e,this.type.add(void 0,r)),super.fireEvent("addedKey",{key:e}),super.fireEvent("addedValues",{values:r})):(A(this,ve).set(e,this.type.add(n,r)),super.fireEvent("addedValues",{values:r}))}addValue(...e){e.forEach(r=>this.addKeyedValues(this.groupBy(r),r))}hasKeyValue(e,r){const n=A(this,ve).get(e);return n===void 0?!1:this.type.has(n,r)}has(e){return A(this,ve).has(e)}deleteKeyValue(e,r){const n=A(this,ve).get(e);if(n===void 0)return!1;const i=this.type.count(n),s=this.type.without(n,r),o=s.length;return A(this,ve).set(e,this.type.add(void 0,s)),i>o}delete(e){return A(this,ve).get(e)===void 0?!1:(A(this,ve).delete(e),this.fireEvent("deleteKey",{key:e}),!0)}findKeyForValue(e){return Array.from(A(this,ve).keys()).find(i=>{const s=A(this,ve).get(i);if(s===void 0)throw Error("Bug: map could not be accessed");return!!this.type.has(s,e)})}count(e){const r=A(this,ve).get(e);return r===void 0?0:this.type.count(r)}get(e){const r=A(this,ve).get(e);if(r!==void 0)return this.type.toArray(r)}getSource(e){return A(this,ve).get(e)}keys(){return Array.from(A(this,ve).keys())}keysAndCounts(){return this.keys().map(n=>[n,this.count(n)])}merge(e){e.keys().forEach(n=>{const i=e.get(n);i!==void 0&&this.addKeyedValues(n,...i)})}};ve=new WeakMap;var qh=(e={})=>{const r=e.comparer===void 0?e.toString===void 0?(s,o)=>e.toString(s)===e.toString(o):Xn:e.comparer,n={get name(){return"array"},add:(s,o)=>s===void 0?[...o]:[...s,...o],count:s=>s.length,find:(s,o)=>s.find(o),filter:(s,o)=>s.filter(o),toArray:s=>s,has:(s,o)=>s.find(a=>r(a,o))!==void 0,without:(s,o)=>s.filter(a=>!r(a,o))};return new vs(n,e)},$g=e=>{const r=e?.hash??Ln,n=(o,a)=>r(o)===r(a),i={get name(){return"set"},add:(o,a)=>gh(o,r,...a),count:o=>o.size,find:(o,a)=>Dh(o,a),filter:(o,a)=>xh(o,a),toArray:o=>_o(o),has:(o,a)=>wh(o,a,n),without:(o,a)=>cv(_o(o),a,n)};return new vs(i,e)},Hh=e=>{const r=Xn,n={get name(){return"circular"},add:(i,s)=>(i===void 0&&(i=jh(e.capacity)),s.forEach(o=>i=i?.add(o)),i),count:i=>i.length,find:(i,s)=>i.find(s),filter:(i,s)=>i.filter(s),toArray:i=>i,has:(i,s)=>i.find(o=>r(o,s))!==void 0,without:(i,s)=>i.filter(o=>!r(o,s))};return new vs(n,e)},Uh={};N(Uh,{stack:()=>Ui,stackMutable:()=>Yh});var Sg=(e,r,n)=>{const i=r.length+n.length,s=e.discardPolicy??"additions",o=e.capacity??i,a=i-o;switch(e.debug&&console.log(`Stack.push: stackLen: ${r.length} potentialLen: ${i} toRemove: ${a} policy: ${s}`),s){case"additions":return e.debug&&console.log(`Stack.push:DiscardAdditions: stackLen: ${r.length} slice: ${i-o} toAddLen: ${n.length}`),r.length===e.capacity?r:[...r,...n.slice(0,n.length-a)];case"newer":return a>=r.length?n.slice(Math.max(0,n.length-o),Math.min(n.length,o)+1):(e.debug&&console.log(` from orig: ${r.slice(0,r.length-a)}`),[...r.slice(0,r.length-a),...n.slice(0,Math.min(n.length,o-a+1))]);case"older":return[...r,...n].slice(a);default:throw new Error(`Unknown discard policy ${s}`)}},Vh=(e,r,...n)=>{const i=r.length+n.length;return e.capacity&&i>e.capacity?Sg(e,r,n):[...r,...n]},Wh=(e,r)=>{if(r.length===0)throw new Error("Stack is empty");return r.slice(0,r.length-1)},So=(e,r)=>r[r.length-1],Gh=(e,r)=>r.length===0,Jh=(e,r)=>e.capacity?r.length>=e.capacity:!1,Fo=class{constructor(e,r){y(this,"opts"),y(this,"data"),this.opts=e,this.data=r}push(...e){return new Fo(this.opts,Vh(this.opts,this.data,...e))}pop(){return new Fo(this.opts,Wh(this.opts,this.data))}forEach(e){this.data.forEach(e)}forEachFromTop(e){[...this.data].reverse().forEach(e)}get isEmpty(){return Gh(this.opts,this.data)}get isFull(){return Jh(this.opts,this.data)}get peek(){return So(this.opts,this.data)}get length(){return this.data.length}},Fg=class{constructor(e,r){y(this,"opts"),y(this,"data"),this.opts=e,this.data=r}push(...e){return this.data=Vh(this.opts,this.data,...e),this.data.length}forEach(e){this.data.forEach(e)}forEachFromTop(e){[...this.data].reverse().forEach(e)}pop(){const e=So(this.opts,this.data);return Wh(this.opts,this.data),e}get isEmpty(){return Gh(this.opts,this.data)}get isFull(){return Jh(this.opts,this.data)}get peek(){return So(this.opts,this.data)}get length(){return this.data.length}},Ui=(e={},...r)=>new Fo({...e},[...r]),Yh=(e={},...r)=>new Fg({...e},[...r]),Kh={};N(Kh,{queue:()=>tf,queueMutable:()=>Kr});var hi=(e,r)=>{e.debug&&console.log(`queue:${r}`)},Pg=(e,r,n)=>{const i=r.length+n.length,s=e.capacity??i,o=i-s,a=e.discardPolicy??"additions";switch(hi(e,`queueLen: ${r.length} potentialLen: ${i} toRemove: ${o} policy: ${a}`),a){case"additions":return hi(e,`trimQueue:DiscardAdditions: queueLen: ${r.length} slice: ${i-s} toAddLen: ${n.length}`),r.length===e.capacity?r:[...r,...n.slice(0,o-1)];case"newer":if(o>=r.length)return n.slice(Math.max(0,n.length-s),Math.min(n.length,s)+1);{const u=n.slice(0,Math.min(n.length,s-o+1)),l=r.slice(0,r.length-o);hi(e,`trimQueue: toRemove: ${o} keeping: ${JSON.stringify(l)} from orig: ${JSON.stringify(r)} toAddFinal: ${JSON.stringify(u)}`);const c=[...l,...u];return hi(e,`final: ${JSON.stringify(c)}`),c}case"older":return[...r,...n].slice(o);default:throw new Error(`Unknown overflow policy ${a}`)}},Xh=(e,r,...n)=>{if(e===void 0)throw new Error("opts parameter undefined");const i=r.length+n.length,s=e.capacity&&i>e.capacity,o=s?Pg(e,r,n):[...r,...n];if(e.capacity&&o.length!==e.capacity&&s)throw new Error(`Bug! Expected return to be at capacity. Return len: ${o.length} capacity: ${e.capacity} opts: ${JSON.stringify(e)}`);if(!e.capacity&&o.length!==i)throw new Error(`Bug! Return length not expected. Return len: ${o.length} expected: ${i} opts: ${JSON.stringify(e)}`);return o},Zh=(e,r)=>{if(r.length===0)throw new Error("Queue is empty");return r.slice(1)},Po=(e,r)=>r[0],Qh=(e,r)=>r.length===0,ef=(e,r)=>e.capacity?r.length>=e.capacity:!1,Bo=class{constructor(e,r){if(y(this,"opts"),y(this,"data"),e===void 0)throw new Error("opts parameter undefined");this.opts=e,this.data=r}forEach(e){for(let r=this.data.length-1;r>=0;r--)e(this.data[r])}forEachFromFront(e){this.data.forEach(r=>e(r))}enqueue(...e){return new Bo(this.opts,Xh(this.opts,this.data,...e))}dequeue(){return new Bo(this.opts,Zh(this.opts,this.data))}get isEmpty(){return Qh(this.opts,this.data)}get isFull(){return ef(this.opts,this.data)}get length(){return this.data.length}get peek(){return Po(this.opts,this.data)}},Bg=class{constructor(e,r){if(y(this,"opts"),y(this,"data"),e===void 0)throw new Error("opts parameter undefined");this.opts=e,this.data=r}enqueue(...e){return this.data=Xh(this.opts,this.data,...e),this.data.length}dequeue(){const e=Po(this.opts,this.data);return this.data=Zh(this.opts,this.data),e}get isEmpty(){return Qh(this.opts,this.data)}get isFull(){return ef(this.opts,this.data)}get length(){return this.data.length}get peek(){return Po(this.opts,this.data)}},tf=(e={},...r)=>(e={...e},new Bo(e,[...r])),Kr=(e={},...r)=>new Bg({...e},[...r]),Mg=(e,r)=>{const n=new Map(e.entries());return r.forEach(i=>{if(i[0]===void 0)throw new Error("key cannot be undefined");if(i[1]===void 0)throw new Error("value cannot be undefined");n.set(i[0],i[1])}),n},kg=(e,r)=>{const n=new Map(e.entries());return r.forEach(i=>{if(i.key===void 0)throw new Error("key cannot be undefined");if(i.value===void 0)throw new Error("value cannot be undefined");n.set(i.key,i.value)}),n},Ng=(e,r)=>e.has(r),Pn=(e,...r)=>{if(e===void 0)throw new Error("map parameter is undefined");if(r===void 0)throw new Error("data parameter i.s undefined");if(r.length===0)return e;const n=r[0];return typeof n.key<"u"&&typeof n.value<"u"?kg(e,r):Mg(e,r)},Tg=(e,r,n)=>{const i=new Map(e.entries());return i.set(r,n),i},rf=(e,r)=>{const n=new Map(e.entries());return n.delete(r),n},Fr=e=>{if(e===void 0)return Fr([]);if(Array.isArray(e))return Fr(Pn(new Map,...e));const r=e;return{add:(...n)=>{const i=Pn(r,...n);return Fr(i)},get:n=>r.get(n),delete:n=>Fr(rf(r,n)),clear:()=>Fr(),has:n=>r.has(n),entries:()=>r.entries(),isEmpty:()=>r.size===0}},zg=(...e)=>{let r=Pn(new Map,...e);return{add:(...n)=>{r=Pn(r,...n)},delete:n=>{r=rf(r,n)},clear:()=>{r=Pn(new Map)},set:(n,i)=>{r=Tg(r,n,i)},get:n=>r.get(n),entries:()=>r.entries(),isEmpty:()=>r.size===0,has:n=>Ng(r,n)}},Ht=e=>!(e===void 0||e.a===void 0||e.b===void 0||!b.isPoint(e.a)||!b.isPoint(e.b)),nf=e=>Array.isArray(e)?!e.some(n=>!Ht(n)):!1,sf=(e,r)=>b.isEqual(e.a,r.a)&&b.isEqual(e.b,r.b),of=(e,r)=>Object.freeze({...e,a:r(e.a),b:r(e.b)}),Ma=(e,r="line")=>{if(e===void 0)throw new Error(`${r} undefined`);if(e.a===void 0)throw new Error(`${r}.a undefined. Expected {a:Point, b:Point}`);if(e.b===void 0)throw new Error(`${r}.b undefined. Expected {a:Point, b:Point}`)},Ig=(e,r)=>{let n;if(Ht(e))n=e.a,r=e.b;else if(n=e,r===void 0)throw new Error("b point must be provided");return Math.atan2(r.y-n.y,r.x-n.x)},af=(e,r)=>Object.freeze({...e,a:b.multiply(e.a,r),b:b.multiply(e.b,r)}),uf=(e,r)=>Object.freeze({...e,a:b.divide(e.a,r),b:b.divide(e.b,r)}),lf=(e,r)=>Object.freeze({...e,a:b.sum(e.a,r),b:b.sum(e.b,r)}),cf=(e,r)=>Object.freeze({...e,a:b.subtract(e.a,r),b:b.subtract(e.b,r)}),Rg=(e,r,n)=>Object.freeze({...e,a:b.normaliseByRect(e.a,r,n),b:b.normaliseByRect(e.b,r,n)}),hf=(e,r,n)=>gf(e,r)<=n;function Ze(e,r){if(nf(e))return e.reduce((u,l)=>Ze(l)+u,0);const[n,i]=ps(e,r),s=i.x-n.x,o=i.y-n.y;if(n.z!==void 0&&i.z!==void 0){const a=i.z-n.z;return Math.hypot(s,o,a)}else return Math.hypot(s,o)}var ff=(e,r)=>{const[n,i]=ps(e,r);return It(.5,n,i)},ps=(e,r)=>{let n;if(Ht(e))r=e.b,n=e.a;else if(n=e,r===void 0)throw new Error(`Since first parameter is not a line, two points are expected. Got a: ${JSON.stringify(n)} b: ${JSON.stringify(r)}`);return ee(n,"a"),ee(n,"b"),[n,r]},df=(e,r)=>{const n=i=>{const{a:s,b:o}=i,a={x:o.x-s.x,y:o.y-s.y},u={x:r.x-s.x,y:r.y-s.y},l=a.x*a.x+a.y*a.y;let c=u.x*a.x+u.y*a.y;const h=Math.min(1,Math.max(0,c/l));return c=(o.x-s.x)*(r.y-s.y)-(o.y-s.y)*(r.x-s.x),{x:s.x+a.x*h,y:s.y+a.y*h}};if(Array.isArray(e)){const i=e.map(o=>n(o)),s=i.map(o=>b.distance(o,r));return Object.freeze(i[Qe.minIndex(...s)])}else return Object.freeze(n(e))},ka=(e,r)=>{let n;if(Ht(e))n=e.a,r=e.b;else if(n=e,r===void 0)throw new Error("b parameter required");if(r!==void 0)return(r.y-n.y)/(r.x-n.x);throw Error("Second point missing")},vf=e=>({x:e.b.x-e.a.x,y:e.b.y-e.a.y}),pf=e=>{const r=Ze(e),n=vf(e);return{x:n.x/r,y:n.y/r}},yf=(e,r,n=0)=>{const i=It(n,e),s=pf(e);return{x:i.x-s.y*r,y:i.y+s.x*r}},mf=(e,r)=>{const n=vf(e),i=pf(e),s={x:e.a.x-i.y*r,y:e.a.y+i.x*r};return{a:s,b:{x:s.x+n.x,y:s.y+n.y}}},Lg=(e,r)=>{const n=It(r/2,e),i=It(.5+r/2,e);return{a:n,b:i}},Og=(e,r)=>{const n=e.a.y+(r-e.a.x)*ka(e);return Object.freeze({x:r,y:n})},jg=(e,r)=>{const n=Ze(e);return Object.freeze({...e,a:e.a,b:Object.freeze({x:e.b.x+(e.b.x-e.a.x)/n*r,y:e.b.y+(e.b.y-e.a.y)/n*r})})};function*qg(e){const{a:r,b:n}=e;let i=Math.floor(r.x),s=Math.floor(r.y);const o=Math.floor(n.x),a=Math.floor(n.y),u=Math.abs(o-i),l=-Math.abs(a-s),c=i<o?1:-1,h=s<a?1:-1;let f=u+l;for(;yield{x:i,y:s},!(i===o&&s===a);){const d=2*f;d>=l&&(f+=l,i+=c),d<=u&&(f+=u,s+=h)}}var gf=(e,r)=>{if(Array.isArray(e)){const n=e.map(i=>Mo(i,r));return Lh(n)}else return Mo(e,r)},Mo=(e,r)=>{if(Ma(e,"line"),ee(r,"point"),Ze(e)===0)return Ze(e.a,r);const n=df(e,r);return Ze(n,r)};function It(e,r,n,i){typeof n=="boolean"&&(i=n,n=void 0),i?R(e,"","amount"):uy(e,"amount");const[s,o]=ps(r,n),a=Ze(s,o),u=a*(1-e);if(a===0&&u===0)return Object.freeze({...o});const l=o.x-u*(o.x-s.x)/a,c=o.y-u*(o.y-s.y)/a;return Object.freeze({...o,x:l,y:c})}function wf(e,r){if(Ht(e))Ma(e,"a"),r=e.b,e=e.a;else if(r===void 0)throw new Error("Expect second point if first is a point");return b.toString(e)+"-"+b.toString(r)}var Vi=(e,r,n,i)=>{if(Number.isNaN(e))throw new Error("x1 is NaN");if(Number.isNaN(n))throw new Error("x2 is NaN");if(Number.isNaN(r))throw new Error("y1 is NaN");if(Number.isNaN(i))throw new Error("y2 is NaN");return ys({x:e,y:r},{x:n,y:i})},xf=(e,r)=>{if(Ht(e))return[e.a.x,e.a.y,e.b.x,e.b.y];if(b.isPoint(e)&&b.isPoint(r))return[e.x,e.y,r.x,r.y];throw new Error("Expected single line parameter, or a and b points")};function*Hg(e){for(const r of e)yield r.a,yield r.b}var Df=(e,r)=>[`M${e.x} ${e.y} L ${r.x} ${r.y}`],Ug=e=>{if(!Array.isArray(e))throw new Error("arr parameter is not an array");if(e.length!==4)throw new Error("array is expected to have length four");return Vi(e[0],e[1],e[2],e[3])},ys=(e,r)=>(ee(e,"a"),ee(r,"b"),e=Object.freeze({...e}),r=Object.freeze({...r}),Object.freeze({a:e,b:r})),bf=(...e)=>{const r=[];let n=e[0];for(let i=1;i<e.length;i++)r.push(ys(n,e[i])),n=e[i];return r},Vg=(e,r)=>kt(ys(e,r)),Ef=e=>b.bbox(e.a,e.b),kt=e=>{const{a:r,b:n}=e;return Object.freeze({...e,length:()=>Ze(r,n),interpolate:i=>It(i,r,n),bbox:()=>Ef(e),toString:()=>wf(r,n),toFlatArray:()=>xf(r,n),toSvgString:()=>Df(r,n),toPoints:()=>[r,n],rotate:(i,s)=>kt(Af(e,i,s)),sum:i=>kt(lf(e,i)),divide:i=>kt(uf(e,i)),multiply:i=>kt(af(e,i)),subtract:i=>kt(cf(e,i)),midpoint:()=>ff(r,n),distance:i=>Mo(e,i),parallel:i=>mf(e,i),perpendicularPoint:(i,s)=>yf(e,i,s),slope:()=>ka(e),withinRange:(i,s)=>hf(e,i,s),isEqual:i=>sf(e,i),apply:i=>kt(of(e,i)),kind:"line"})},Af=(e,r,n)=>r===void 0||r===0?e:(n===void 0&&(n=.5),typeof n=="number"&&(n=It(n,e.a,e.b)),Object.freeze({...e,a:b.rotate(e.a,r,n),b:b.rotate(e.b,r,n)})),dr=(e,r)=>{if(e===void 0)return{x:0,y:0};if(b.isPoint(e))return e;if(typeof e!="number"||typeof r!="number")throw new Error(`Expected point or x,y as parameters. Got: a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`);return{x:e,y:r}},Wg=(...e)=>{const r=e.map(n=>b.toArray(n));return Qe.dotProduct(r)},Wi=Object.freeze({x:0,y:0}),_f=Object.freeze({x:NaN,y:NaN}),Ci=e=>e.x===0&&e.y===0,$i=e=>Number.isNaN(e.x)&&Number.isNaN(e.y),Gg=e=>e.x===null&&e.y===null,ir=(e,...r)=>{if(r.length===0)throw new Error("No points provided");let n=r[0];return r.forEach(i=>{n=e(n,i)}),n},Jg=(...e)=>ir((r,n)=>r.x<=n.x?r:n,...e),Yg=(...e)=>ir((r,n)=>r.x>=n.x?r:n,...e);function xt(e,r,n){const i=dr(r,n);return ee(i),Math.hypot(i.x-e.x,i.y-e.y)}var Kg=(e,r)=>{if(ne.isRectPositioned(r))return ne.distanceFromExterior(r,e);if(bt.isCirclePositioned(r))return bt.distanceFromExterior(r,e);if(fe(r))return xt(e,r);throw new Error("Unknown shape")},Xg=(e,r)=>{if(ne.isRectPositioned(r))return ne.distanceFromExterior(r,e);if(bt.isCirclePositioned(r))return bt.distanceFromExterior(r,e);if(fe(r))return xt(e,r);throw new Error("Unknown shape")},ee=(e,r="Point")=>{if(e===void 0)throw new Error(`'${r}' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(e===null)throw new Error(`'${r}' is null. Expected {x,y} got ${JSON.stringify(e)}`);if(e.x===void 0)throw new Error(`'${r}.x' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(e.y===void 0)throw new Error(`'${r}.y' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(typeof e.x!="number")throw new Error(`'${r}.x' must be a number. Got ${e.x}`);if(typeof e.y!="number")throw new Error(`'${r}.y' must be a number. Got ${e.y}`);if(e.x===null)throw new Error(`'${r}.x' is null`);if(e.y===null)throw new Error(`'${r}.y' is null`);if(Number.isNaN(e.x))throw new Error(`'${r}.x' is NaN`);if(Number.isNaN(e.y))throw new Error(`'${r}.y' is NaN`)},Cf=(e,r="pt")=>(ee(e,r),R(e.x,"nonZero",`${r}.x`),R(e.y,"nonZero",`${r}.y`),!0),Zg=e=>({...e,x:Math.abs(e.x),y:Math.abs(e.y)}),Ir=(e,r,n)=>r===void 0?Math.atan2(e.y,e.x):n!==void 0?Math.atan2(r.y-e.y,r.x-e.x)-Math.atan2(n.y-e.y,n.x-e.x):Math.atan2(r.y-e.y,r.x-e.x),$f=(...e)=>{if(!Array.isArray(e))throw new Error("Expected list of points");const r=e.reduce((n,i)=>{if(i===void 0)return n;if(Array.isArray(i))throw new Error("'points' list contains an array. Did you mean: centroid(...myPoints)?");if(!fe(i))throw new Error(`'points' contains something which is not a point: ${JSON.stringify(i)}`);return{x:n.x+i.x,y:n.y+i.y}},{x:0,y:0});return Object.freeze({x:r.x/e.length,y:r.y/e.length})},Qg=(...e)=>{const r=ir((c,h)=>c.x<h.x?c:h,...e),n=ir((c,h)=>c.x>h.x?c:h,...e),i=ir((c,h)=>c.y<h.y?c:h,...e),s=ir((c,h)=>c.y>h.y?c:h,...e),o={x:r.x,y:i.y},a={x:n.x,y:i.y},u={x:n.x,y:s.y},l={x:r.x,y:s.y};return ne.maxFromCorners(o,a,u,l)},fe=e=>!(e===void 0||e===null||e.x===void 0||e.y===void 0),ko=e=>!(e===void 0||e===null||e.x===void 0||e.y===void 0||e.z===void 0),ew=e=>[e.x,e.y],tw=(e,r)=>{if(e===void 0)return"(undefined)";if(e===null)return"(null)";const n=r?e.x.toFixed(r):e.x,i=r?e.y.toFixed(r):e.y;if(e.z!==void 0){const s=r?e.z.toFixed(r):e.z;return`(${n},${i},${s})`}else return`(${n},${i})`},Bn=(...e)=>{if(e===void 0)throw new Error("parameter 'p' is undefined");if(e.length<2)return!0;for(let r=1;r<e.length;r++)if(e[r].x!==e[0].x||e[r].y!==e[0].y)return!1;return!0},rw=(e,r,n)=>{typeof n=="number"&&(n={x:n,y:n});const i=Math.abs(r.x-e.x),s=Math.abs(r.y-e.y);return i<=n.x&&s<=n.y},nw=(e,r,n,i=!1)=>It(e,r,n,i),iw=(e,r)=>{if(Array.isArray(e)){if(e.length!==2)throw new Error("Expected array of length two, got "+e.length);return Object.freeze({x:e[0],y:e[1]})}else{if(e===void 0)e=0;else if(Number.isNaN(e))throw new Error("x is NaN");if(r===void 0)r=0;else if(Number.isNaN(r))throw new Error("y is NaN");return Object.freeze({x:e,y:r})}},Sf=(...e)=>{const r=[];if(Array.isArray(e[0]))e.forEach(n=>{if(n.length%2!==0)throw new Error("coords array should be even-numbered");r.push(Object.freeze({x:n[0],y:n[1]}))});else{if(e.length%2!==0)throw new Error("Expected even number of elements: [x,y,x,y...]");for(let n=0;n<e.length;n+=2)r.push(Object.freeze({x:e[n],y:e[n+1]}))}return r};function Na(e,r,n,i){if(fe(e))return ee(e,"a"),fe(r)?(ee(r,"b"),Object.freeze({x:e.x-r.x,y:e.y-r.y})):(n===void 0&&(n=r),Object.freeze({x:e.x-r,y:e.y-n}));if(R(e,"","a"),typeof r!="number")throw new Error("Second parameter is expected to by y value");if(R(r,"","b"),Number.isNaN(n))throw new Error("Third parameter is NaN");if(Number.isNaN(i))throw new Error("Fourth parameter is NaN");return n===void 0&&(n=0),i===void 0&&(i=0),Object.freeze({x:e-n,y:r-i})}var sw=(e,r)=>Object.freeze({...e,x:r(e.x,"x"),y:r(e.y,"y")}),ow=(e,...r)=>Ff(...r)(e),Ff=(...e)=>r=>e.reduce((n,i)=>i(n),r),Pf=(e,r,n={x:0,y:0})=>{let i=n;return e.forEach(s=>{i=r(s,i)}),i},aw=function(e,r,n,i){if(e===void 0)throw new Error(`a missing. a: ${e}`);let s,o;if(fe(e))if(s=e,r===void 0&&(r=Wi),fe(r))o=r;else{if(r===void 0)throw new Error("Expects x coordinate");o={x:r,y:n===void 0?r:n}}else if(!fe(r)){if(r===void 0)throw new Error("Expected number as second param");if(s={x:e,y:r},n===void 0)throw new Error("Expects x coordiante");o={x:n,y:i===void 0?0:i}}if(s===void 0)throw new Error(`ptA missing. a: ${e}`);if(o===void 0)throw new Error(`ptB missing. b: ${r}`);return ee(s,"a"),ee(o,"b"),Object.freeze({x:s.x+o.x,y:s.y+o.y})};function Bf(e,r,n){if(ee(e,"a"),typeof r=="number")return typeof n>"u"&&(n=r),R(n,"","y"),R(r,"","x"),Object.freeze({x:e.x*r,y:e.y*n});if(fe(r))return ee(r,"b"),Object.freeze({x:e.x*r.x,y:e.y*r.y});if(ne.isRect(r))return ne.guard(r,"rect"),Object.freeze({x:e.x*r.width,y:e.y*r.height});throw new Error(`Invalid arguments. a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`)}function uw(e,r,n,i){if(fe(e))return ee(e,"a"),fe(r)?(Cf(r),Object.freeze({x:e.x/r.x,y:e.y/r.y})):ne.isRect(r)?(ne.guard(r,"rect"),Object.freeze({x:e.x/r.width,y:e.y/r.height})):(n===void 0&&(n=r),ee(e),R(r,"nonZero","x"),R(n,"nonZero","y"),Object.freeze({x:e.x/r,y:e.y/n}));if(typeof r!="number")throw new Error("expected second parameter to be y1 coord");return R(e,"positive","x1"),R(r,"positive","y1"),n===void 0&&(n=1),i===void 0&&(i=n),R(n,"nonZero","x2"),R(i,"nonZero","y2"),Object.freeze({x:e/n,y:r/i})}var lw=(...e)=>{const r=[...e].sort(Mf);if(r.length===1)return r;const n=o=>{const a=[];return o.forEach(u=>{for(;a.length>=2;){const l=a[a.length-1],c=a[a.length-2];if((l.x-c.x)*(u.y-c.y)>=(l.y-c.y)*(u.x-c.x))a.pop();else break}a.push(u)}),a.pop(),a},i=n(r),s=n(r.reverse());return i.length===1&&s.length===1&&Bn(s[0],i[0])?i:i.concat(s)},cw=(e,r)=>e.x<r.x&&e.y<r.y?-2:e.x>r.x&&e.y>r.y?2:e.x<r.x||e.y<r.y?-1:e.x>r.x||e.y>r.y?1:e.x===r.x&&e.x===r.y?0:NaN,Mf=(e,r)=>e.x-r.x||e.y-r.y,No=(e,r,n)=>{const i=Math.cos(n)*r+e.x,s=Math.sin(n)*r+e.y;return{x:i,y:s}};function or(e,r,n){n===void 0&&(n={x:0,y:0}),ee(n,"origin"),R(r,"","amountRadian");const i=Array.isArray(e);if(r===0)return e;i||(e=[e]);const s=e;s.forEach((l,c)=>ee(l,`pt[${c}]`));const u=s.map(l=>nt.fromCartesian(l,n)).map(l=>nt.rotate(l,r)).map(l=>nt.toCartesian(l,n));return i?u:u[0]}var hw=(e,r)=>{const n=[[Math.cos(r),-Math.sin(r)],[Math.sin(r),Math.cos(r)]],i=[];for(let s=0;s<e.length;++s)i[s]=[n[0][0]*e[s][0]+n[0][1]*e[s][1],n[1][0]*e[s][0]+n[1][1]*e[s][1]];return i},fw=(e,r)=>{if(fe(e)&&(r=e.y,e=e.x),r===void 0)throw new Error("Expected y");return Math.sqrt(e*e+r*r)},dw=(e,r)=>{const n=dr(e,r),i=fw(n);return i===0?b.Empty:Object.freeze({x:n.x/i,y:n.y/i})};function vw(e,r,n,i){if(fe(e)){if(typeof r=="number"&&n!==void 0)R(r,"positive","width"),R(n,"positive","height");else{if(!ne.isRect(r))throw new Error("Expected second parameter to be a rect");n=r.height,r=r.width}return Object.freeze({x:e.x/r,y:e.y/n})}else{if(R(e,"positive","x"),typeof r!="number")throw new Error("Expecting second parameter to be a number (width)");if(typeof n!="number")throw new Error("Expecting third parameter to be a number (height)");if(R(r,"positive","y"),R(n,"positive","width"),i===void 0)throw new Error("Expected height parameter");return R(i,"positive","height"),Object.freeze({x:e/n,y:r/i})}}var pw=e=>(e===void 0&&(e=et),{x:e(),y:e()}),yw=(e,r={x:1,y:1},n={x:0,y:0})=>(ee(e,"pt"),ee(r,"ptMax"),ee(n,"ptMin"),Object.freeze({x:rs(e.x,n.x,r.x),y:rs(e.y,n.y,r.y)})),mw=(e,r="both")=>{switch(r){case"both":return ko(e)?Object.freeze({...e,x:e.x*-1,y:e.y*-1,z:e.z*-1}):Object.freeze({...e,x:e.x*-1,y:e.y*-1});case"x":return Object.freeze({...e,x:e.x*-1});case"y":return Object.freeze({...e,y:e.y*-1});case"z":if(ko(e))return Object.freeze({...e,z:e.z*-1});throw new Error("pt parameter is missing z");default:throw new Error("Unknown what parameter. Expecting 'both', 'x' or 'y'")}},gw=(e,r=Math.round)=>(ee(e,"pt"),Object.freeze({x:r(e.x),y:r(e.y)})),ww=(e,r)=>{const n=xt(e);if(n>r){const i=r/n;return Bf(e,i,i)}return e};function xw(e,r,n,i){if(fe(e))return r===void 0&&(r=0),n===void 0&&(n=1),R(r,"","min"),R(n,"","max"),Object.freeze({x:Le(e.x,r,n),y:Le(e.y,r,n)});if(r===void 0)throw new Error("Expected y coordinate");return n===void 0&&(n=0),i===void 0&&(i=1),R(e,"","x"),R(r,"","y"),R(n,"","min"),R(i,"","max"),Object.freeze({x:Le(e,n,i),y:Le(r,n,i)})}var To=(e,r)=>{const n=dr(e,r);let i=0,s=0,o=0,a=performance.now();return(l,c)=>{const h=dr(l,c);i+=h.x,s+=h.y,o++;const f=xt(h,n),d=performance.now(),v=f/(d-a);return a=d,Object.freeze({angle:Ir(h,n),distance:f,speed:v,centroid:$f(h,n),average:{x:i/o,y:s/o}})}},kf=e=>e.startRadian!==void 0&&e.endRadian!==void 0,gt=e=>e.x!==void 0&&e.y!==void 0,Fl=Math.PI*2;function Dw(e,r,n,i){const s={radius:e,startRadian:Tt(r),endRadian:Tt(n)};if(fe(i)){ee(i);const o={...s,x:i.x,y:i.y};return Object.freeze(o)}else return Object.freeze(s)}var Nf=e=>ze.fromPoints(Gi(e,e.startRadian),Gi(e,e.endRadian)),Gi=(e,r,n)=>{if(r>e.endRadian)throw new Error("angleRadian beyond end angle of arc");if(r<e.startRadian)throw new Error("angleRadian beyond start angle of arc");return n===void 0&&(gt(e)?n=e:n={x:0,y:0}),{x:Math.cos(r)*e.radius+n.x,y:Math.sin(r)*e.radius+n.y}},Ta=e=>{if(e===void 0)throw new Error("Arc is undefined");if(gt(e)&&ee(e,"arc"),e.radius===void 0)throw new Error(`Arc radius is undefined (${JSON.stringify(e)})`);if(typeof e.radius!="number")throw new Error("Radius must be a number");if(Number.isNaN(e.radius))throw new Error("Radius is NaN");if(e.radius<=0)throw new Error("Radius must be greater than zero");if(e.startRadian===void 0)throw new Error("Arc is missing 'startRadian' field");if(e.endRadian===void 0)throw new Error("Arc is missing 'startRadian' field");if(Number.isNaN(e.endRadian))throw new Error("Arc endRadian is NaN");if(Number.isNaN(e.startRadian))throw new Error("Arc endRadian is NaN");if(e.startRadian>=e.endRadian)throw new Error("startRadian is expected to be les than endRadian")},za=(e,r,n)=>(Ta(r),Gi(r,r.startRadian+(r.endRadian-r.startRadian)*e,n)),bw=e=>(Ta(e),Object.freeze({...e,interpolate:r=>za(r,e),bbox:()=>zf(e),length:()=>Tf(e),toSvgString:()=>If(e),kind:"arc"})),Tf=e=>Fl*e.radius*((e.startRadian-e.endRadian)/Fl),zf=e=>{if(gt(e)){const r=za(.5,e),n=Nf(e);return b.bbox(r,n.a,n.b)}else return{width:e.radius*2,height:e.radius*2}},If=(e,r,n,i,s)=>{if(kf(e))return gt(e)?fi(e,e.radius,e.startRadian,e.endRadian,r):fe(r)?fi(r,e.radius,e.startRadian,e.endRadian,n):fi({x:0,y:0},e.radius,e.startRadian,e.endRadian);if(n===void 0)throw new Error("startAngle undefined");if(i===void 0)throw new Error("endAngle undefined");if(fe(e)){if(typeof r=="number"&&typeof n=="number"&&typeof i=="number")return fi(e,r,n,i,s);throw new Error("Expected (point, number, number, number). Missing a number param.")}else throw new Error("Expected (point, number, number, number). Missing first point.")},fi=(e,r,n,i,s)=>{(s===void 0||typeof s!="object")&&(s={});const o=i-n===360,a=nt.toCartesian(r,i-.01,e),u=nt.toCartesian(r,n,e),{largeArc:l=!1,sweep:c=!1}=s,h=[`
    M ${a.x} ${a.y}
    A ${r} ${r} 0 ${l?"1":"0"} ${c?"1":"0"} ${u.x} ${u.y},
  `];return o&&h.push("z"),h},Ew=(e,r)=>b.distance(e,r),Aw=(e,r)=>e.radius!==r.radius?!1:gt(e)&&gt(r)?!(e.x!==r.x||e.y!==r.y||e.z!==r.z):!(!(!gt(e)&&!gt(r))||e.endRadian!==r.endRadian||e.startRadian!==r.startRadian),Zn={};N(Zn,{computeQuadraticSimple:()=>kw,cubic:()=>Nw,isCubicBezier:()=>Ia,isQuadraticBezier:()=>ms,quadratic:()=>Of,quadraticBend:()=>Mw,quadraticSimple:()=>Rr,quadraticToSvgString:()=>Lf,toPath:()=>Fi});var{abs:yn,cos:dt,sin:Er,acos:_w,atan2:mn,sqrt:St,pow:Re}=Math;function gn(e){return e<0?-Re(-e,1/3):Re(e,1/3)}var Rf=Math.PI,di=2*Rf,Ft=Rf/2,Cw=1e-6,Xs=Number.MAX_SAFE_INTEGER||9007199254740991,Zs=Number.MIN_SAFE_INTEGER||-9007199254740991,$w={x:0,y:0,z:0},$={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,r){const n=r(e);let i=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(i+=n.z*n.z),St(i)},compute:function(e,r,n){if(e===0)return r[0].t=0,r[0];const i=r.length-1;if(e===1)return r[i].t=1,r[i];const s=1-e;let o=r;if(i===0)return r[0].t=e,r[0];if(i===1){const u={x:s*o[0].x+e*o[1].x,y:s*o[0].y+e*o[1].y,t:e};return n&&(u.z=s*o[0].z+e*o[1].z),u}if(i<4){let u=s*s,l=e*e,c,h,f,d=0;i===2?(o=[o[0],o[1],o[2],$w],c=u,h=s*e*2,f=l):i===3&&(c=u*s,h=u*e*3,f=s*l*3,d=e*l);const v={x:c*o[0].x+h*o[1].x+f*o[2].x+d*o[3].x,y:c*o[0].y+h*o[1].y+f*o[2].y+d*o[3].y,t:e};return n&&(v.z=c*o[0].z+h*o[1].z+f*o[2].z+d*o[3].z),v}const a=JSON.parse(JSON.stringify(r));for(;a.length>1;){for(let u=0;u<a.length-1;u++)a[u]={x:a[u].x+(a[u+1].x-a[u].x)*e,y:a[u].y+(a[u+1].y-a[u].y)*e},typeof a[u].z<"u"&&(a[u]=a[u].z+(a[u+1].z-a[u].z)*e);a.splice(a.length-1,1)}return a[0].t=e,a[0]},computeWithRatios:function(e,r,n,i){const s=1-e,o=n,a=r;let u=o[0],l=o[1],c=o[2],h=o[3],f;if(u*=s,l*=e,a.length===2)return f=u+l,{x:(u*a[0].x+l*a[1].x)/f,y:(u*a[0].y+l*a[1].y)/f,z:i?(u*a[0].z+l*a[1].z)/f:!1,t:e};if(u*=s,l*=2*s,c*=e*e,a.length===3)return f=u+l+c,{x:(u*a[0].x+l*a[1].x+c*a[2].x)/f,y:(u*a[0].y+l*a[1].y+c*a[2].y)/f,z:i?(u*a[0].z+l*a[1].z+c*a[2].z)/f:!1,t:e};if(u*=s,l*=1.5*s,c*=3*s,h*=e*e*e,a.length===4)return f=u+l+c+h,{x:(u*a[0].x+l*a[1].x+c*a[2].x+h*a[3].x)/f,y:(u*a[0].y+l*a[1].y+c*a[2].y+h*a[3].y)/f,z:i?(u*a[0].z+l*a[1].z+c*a[2].z+h*a[3].z)/f:!1,t:e}},derive:function(e,r){const n=[];for(let i=e,s=i.length,o=s-1;s>1;s--,o--){const a=[];for(let u=0,l;u<o;u++)l={x:o*(i[u+1].x-i[u].x),y:o*(i[u+1].y-i[u].y)},r&&(l.z=o*(i[u+1].z-i[u].z)),a.push(l);n.push(a),i=a}return n},between:function(e,r,n){return r<=e&&e<=n||$.approximately(e,r)||$.approximately(e,n)},approximately:function(e,r,n){return yn(e-r)<=(n||Cw)},length:function(e){const n=$.Tvalues.length;let i=0;for(let s=0,o;s<n;s++)o=.5*$.Tvalues[s]+.5,i+=$.Cvalues[s]*$.arcfn(o,e);return .5*i},map:function(e,r,n,i,s){const o=n-r,a=s-i,u=e-r,l=u/o;return i+a*l},lerp:function(e,r,n){const i={x:r.x+e*(n.x-r.x),y:r.y+e*(n.y-r.y)};return r.z!==void 0&&n.z!==void 0&&(i.z=r.z+e*(n.z-r.z)),i},pointToString:function(e){let r=e.x+"/"+e.y;return typeof e.z<"u"&&(r+="/"+e.z),r},pointsToString:function(e){return"["+e.map($.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,r,n){const i=r.x-e.x,s=r.y-e.y,o=n.x-e.x,a=n.y-e.y,u=i*a-s*o,l=i*o+s*a;return mn(u,l)},round:function(e,r){const n=""+e,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+r))},dist:function(e,r){const n=e.x-r.x,i=e.y-r.y;return St(n*n+i*i)},closest:function(e,r){let n=Re(2,63),i,s;return e.forEach(function(o,a){s=$.dist(r,o),s<n&&(n=s,i=a)}),{mdist:n,mpos:i}},abcratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const n=Re(e,r)+Re(1-e,r),i=n-1;return yn(i/n)},projectionratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const n=Re(1-e,r),i=Re(e,r)+n;return n/i},lli8:function(e,r,n,i,s,o,a,u){const l=(e*i-r*n)*(s-a)-(e-n)*(s*u-o*a),c=(e*i-r*n)*(o-u)-(r-i)*(s*u-o*a),h=(e-n)*(o-u)-(r-i)*(s-a);return h==0?!1:{x:l/h,y:c/h}},lli4:function(e,r,n,i){const s=e.x,o=e.y,a=r.x,u=r.y,l=n.x,c=n.y,h=i.x,f=i.y;return $.lli8(s,o,a,u,l,c,h,f)},lli:function(e,r){return $.lli4(e,e.c,r,r.c)},makeline:function(e,r){return new ae(e.x,e.y,(e.x+r.x)/2,(e.y+r.y)/2,r.x,r.y)},findbbox:function(e){let r=Xs,n=Xs,i=Zs,s=Zs;return e.forEach(function(o){const a=o.bbox();r>a.x.min&&(r=a.x.min),n>a.y.min&&(n=a.y.min),i<a.x.max&&(i=a.x.max),s<a.y.max&&(s=a.y.max)}),{x:{min:r,mid:(r+i)/2,max:i,size:i-r},y:{min:n,mid:(n+s)/2,max:s,size:s-n}}},shapeintersections:function(e,r,n,i,s){if(!$.bboxoverlap(r,i))return[];const o=[],a=[e.startcap,e.forward,e.back,e.endcap],u=[n.startcap,n.forward,n.back,n.endcap];return a.forEach(function(l){l.virtual||u.forEach(function(c){if(c.virtual)return;const h=l.intersects(c,s);h.length>0&&(h.c1=l,h.c2=c,h.s1=e,h.s2=n,o.push(h))})}),o},makeshape:function(e,r,n){const i=r.points.length,s=e.points.length,o=$.makeline(r.points[i-1],e.points[0]),a=$.makeline(e.points[s-1],r.points[0]),u={startcap:o,forward:e,back:r,endcap:a,bbox:$.findbbox([o,e,r,a])};return u.intersections=function(l){return $.shapeintersections(u,u.bbox,l,l.bbox,n)},u},getminmax:function(e,r,n){if(!n)return{min:0,max:0};let i=Xs,s=Zs,o,a;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let u=0,l=n.length;u<l;u++)o=n[u],a=e.get(o),a[r]<i&&(i=a[r]),a[r]>s&&(s=a[r]);return{min:i,mid:(i+s)/2,max:s,size:s-i}},align:function(e,r){const n=r.p1.x,i=r.p1.y,s=-mn(r.p2.y-i,r.p2.x-n),o=function(a){return{x:(a.x-n)*dt(s)-(a.y-i)*Er(s),y:(a.x-n)*Er(s)+(a.y-i)*dt(s)}};return e.map(o)},roots:function(e,r){r=r||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=e.length-1,i=$.align(e,r),s=function(L){return 0<=L&&L<=1};if(n===2){const L=i[0].y,K=i[1].y,re=i[2].y,j=L-2*K+re;if(j!==0){const ge=-St(K*K-L*re),de=-L+K,g=-(ge+de)/j,w=-(-ge+de)/j;return[g,w].filter(s)}else if(K!==re&&j===0)return[(2*K-re)/(2*K-2*re)].filter(s);return[]}const o=i[0].y,a=i[1].y,u=i[2].y,l=i[3].y;let c=-o+3*a-3*u+l,h=3*o-6*a+3*u,f=-3*o+3*a,d=o;if($.approximately(c,0)){if($.approximately(h,0))return $.approximately(f,0)?[]:[-d/f].filter(s);const L=St(f*f-4*h*d),K=2*h;return[(L-f)/K,(-f-L)/K].filter(s)}h/=c,f/=c,d/=c;const v=(3*f-h*h)/3,m=v/3,x=(2*h*h*h-9*h*f+27*d)/27,_=x/2,S=_*_+m*m*m;let M,X,B,k,te;if(S<0){const L=-v/3,K=L*L*L,re=St(K),j=-x/(2*re),ge=j<-1?-1:j>1?1:j,de=_w(ge),g=gn(re),w=2*g;return B=w*dt(de/3)-h/3,k=w*dt((de+di)/3)-h/3,te=w*dt((de+2*di)/3)-h/3,[B,k,te].filter(s)}else{if(S===0)return M=_<0?gn(-_):-gn(_),B=2*M-h/3,k=-M-h/3,[B,k].filter(s);{const L=St(S);return M=gn(-_+L),X=gn(_+L),[M-X-h/3].filter(s)}}},droots:function(e){if(e.length===3){const r=e[0],n=e[1],i=e[2],s=r-2*n+i;if(s!==0){const o=-St(n*n-r*i),a=-r+n,u=-(o+a)/s,l=-(-o+a)/s;return[u,l]}else if(n!==i&&s===0)return[(2*n-i)/(2*(n-i))];return[]}if(e.length===2){const r=e[0],n=e[1];return r!==n?[r/(r-n)]:[]}return[]},curvature:function(e,r,n,i,s){let o,a,u,l,c=0,h=0;const f=$.compute(e,r),d=$.compute(e,n),v=f.x*f.x+f.y*f.y;if(i?(o=St(Re(f.y*d.z-d.y*f.z,2)+Re(f.z*d.x-d.z*f.x,2)+Re(f.x*d.y-d.x*f.y,2)),a=Re(v+f.z*f.z,3/2)):(o=f.x*d.y-f.y*d.x,a=Re(v,3/2)),o===0||a===0)return{k:0,r:0};if(c=o/a,h=a/o,!s){const m=$.curvature(e-.001,r,n,i,!0).k,x=$.curvature(e+.001,r,n,i,!0).k;l=(x-c+(c-m))/2,u=(yn(x-c)+yn(c-m))/2}return{k:c,r:h,dk:l,adk:u}},inflections:function(e){if(e.length<4)return[];const r=$.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=r[2].x*r[1].y,i=r[3].x*r[1].y,s=r[1].x*r[2].y,o=r[3].x*r[2].y,a=18*(-3*n+2*i+3*s-o),u=18*(3*n-i-3*s),l=18*(s-n);if($.approximately(a,0)){if(!$.approximately(u,0)){let d=-l/u;if(0<=d&&d<=1)return[d]}return[]}const c=2*a;if($.approximately(c,0))return[];const h=u*u-4*a*l;if(h<0)return[];const f=Math.sqrt(h);return[(f-u)/c,-(u+f)/c].filter(function(d){return 0<=d&&d<=1})},bboxoverlap:function(e,r){const n=["x","y"],i=n.length;for(let s=0,o,a,u,l;s<i;s++)if(o=n[s],a=e[o].mid,u=r[o].mid,l=(e[o].size+r[o].size)/2,yn(a-u)>=l)return!1;return!0},expandbox:function(e,r){r.x.min<e.x.min&&(e.x.min=r.x.min),r.y.min<e.y.min&&(e.y.min=r.y.min),r.z&&r.z.min<e.z.min&&(e.z.min=r.z.min),r.x.max>e.x.max&&(e.x.max=r.x.max),r.y.max>e.y.max&&(e.y.max=r.y.max),r.z&&r.z.max>e.z.max&&(e.z.max=r.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,r,n){const i=e.bbox(),s=r.bbox(),o=1e5,a=n||.5;if(i.x.size+i.y.size<a&&s.x.size+s.y.size<a)return[(o*(e._t1+e._t2)/2|0)/o+"/"+(o*(r._t1+r._t2)/2|0)/o];let u=e.split(.5),l=r.split(.5),c=[{left:u.left,right:l.left},{left:u.left,right:l.right},{left:u.right,right:l.right},{left:u.right,right:l.left}];c=c.filter(function(f){return $.bboxoverlap(f.left.bbox(),f.right.bbox())});let h=[];return c.length===0||(c.forEach(function(f){h=h.concat($.pairiteration(f.left,f.right,a))}),h=h.filter(function(f,d){return h.indexOf(f)===d})),h},getccenter:function(e,r,n){const i=r.x-e.x,s=r.y-e.y,o=n.x-r.x,a=n.y-r.y,u=i*dt(Ft)-s*Er(Ft),l=i*Er(Ft)+s*dt(Ft),c=o*dt(Ft)-a*Er(Ft),h=o*Er(Ft)+a*dt(Ft),f=(e.x+r.x)/2,d=(e.y+r.y)/2,v=(r.x+n.x)/2,m=(r.y+n.y)/2,x=f+u,_=d+l,S=v+c,M=m+h,X=$.lli8(f,d,x,_,v,m,S,M),B=$.dist(X,e);let k=mn(e.y-X.y,e.x-X.x),te=mn(r.y-X.y,r.x-X.x),L=mn(n.y-X.y,n.x-X.x),K;return k<L?((k>te||te>L)&&(k+=di),k>L&&(K=L,L=k,k=K)):L<te&&te<k?(K=L,L=k,k=K):L+=di,X.s=k,X.e=L,X.r=B,X},numberSort:function(e,r){return e-r}},Si=class{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return $.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,r){return e+r})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var r=e[0].bbox(),n=1;n<e.length;n++)$.expandbox(r,e[n].bbox());return r}offset(e){const r=[];return this.curves.forEach(function(n){r.push(...n.offset(e))}),new Si(r)}},{abs:wn,min:Pl,max:Bl,cos:Sw,sin:Fw,acos:Pw,sqrt:xn}=Math,Bw=Math.PI,ae=class{constructor(e){let r=e&&e.forEach?e:Array.from(arguments).slice(),n=!1;if(typeof r[0]=="object"){n=r.length;const d=[];r.forEach(function(v){["x","y","z"].forEach(function(m){typeof v[m]<"u"&&d.push(v[m])})}),r=d}let i=!1;const s=r.length;if(n){if(n>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(s!==6&&s!==8&&s!==9&&s!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!i&&(s===9||s===12)||e&&e[0]&&typeof e[0].z<"u",a=this.points=[];for(let d=0,v=o?3:2;d<s;d+=v){var u={x:r[d],y:r[d+1]};o&&(u.z=r[d+2]),a.push(u)}const l=this.order=a.length-1,c=this.dims=["x","y"];o&&c.push("z"),this.dimlen=c.length;const h=$.align(a,{p1:a[0],p2:a[l]}),f=$.dist(a[0],a[l]);this._linear=h.reduce((d,v)=>d+wn(v.y),0)<f/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,r,n,i){if(typeof i>"u"&&(i=.5),i===0)return new ae(r,r,n);if(i===1)return new ae(e,r,r);const s=ae.getABC(2,e,r,n,i);return new ae(e,s.A,n)}static cubicFromPoints(e,r,n,i,s){typeof i>"u"&&(i=.5);const o=ae.getABC(3,e,r,n,i);typeof s>"u"&&(s=$.dist(r,o.C));const a=s*(1-i)/i,u=$.dist(e,n),l=(n.x-e.x)/u,c=(n.y-e.y)/u,h=s*l,f=s*c,d=a*l,v=a*c,m={x:r.x-h,y:r.y-f},x={x:r.x+d,y:r.y+v},_=o.A,S={x:_.x+(m.x-_.x)/(1-i),y:_.y+(m.y-_.y)/(1-i)},M={x:_.x+(x.x-_.x)/i,y:_.y+(x.y-_.y)/i},X={x:e.x+(S.x-e.x)/i,y:e.y+(S.y-e.y)/i},B={x:n.x+(M.x-n.x)/(1-i),y:n.y+(M.y-n.y)/(1-i)};return new ae(e,X,B,n)}static getUtils(){return $}getUtils(){return ae.getUtils()}static get PolyBezier(){return Si}valueOf(){return this.toString()}toString(){return $.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,r=e[0].x,n=e[0].y,i=["M",r,n,this.order===2?"Q":"C"];for(let s=1,o=e.length;s<o;s++)i.push(e[s].x),i.push(e[s].y);return i.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,r){return""+r+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=$.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,r=$.angle(e[0],e[this.order],e[1]);this.clockwise=r>0}length(){return $.length(this.derivative.bind(this))}static getABC(e=2,r,n,i,s=.5){const o=$.projectionratio(s,e),a=1-o,u={x:o*r.x+a*i.x,y:o*r.y+a*i.y},l=$.abcratio(s,e);return{A:{x:n.x+(n.x-u.x)/l,y:n.y+(n.y-u.y)/l},B:n,C:u,S:r,E:i}}getABC(e,r){r=r||this.get(e);let n=this.points[0],i=this.points[this.order];return ae.getABC(this.order,n,r,i,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e)return this._lut;this._lut=[],e++,this._lut=[];for(let r=0,n,i;r<e;r++)i=r/(e-1),n=this.compute(i),n.t=i,this._lut.push(n);return this._lut}on(e,r){r=r||5;const n=this.getLUT(),i=[];for(let s=0,o,a=0;s<n.length;s++)o=n[s],$.dist(o,e)<r&&(i.push(o),a+=s/n.length);return i.length?t/=i.length:!1}project(e){const r=this.getLUT(),n=r.length-1,i=$.closest(r,e),s=i.mpos,o=(s-1)/n,a=(s+1)/n,u=.1/n;let l=i.mdist,c=o,h=c,f;l+=1;for(let d;c<a+u;c+=u)f=this.compute(c),d=$.dist(e,f),d<l&&(l=d,h=c);return h=h<0?0:h>1?1:h,f=this.compute(h),f.t=h,f.d=l,f}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?$.computeWithRatios(e,this.points,this.ratios,this._3d):$.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,r=[e[0]],n=e.length;for(let i=1,s,o;i<n;i++)s=e[i],o=e[i-1],r[i]={x:(n-i)/n*s.x+i/n*o.x,y:(n-i)/n*s.y+i/n*o.y};return r[n]=e[n-1],new ae(r)}derivative(e){return $.compute(e,this.dpoints[0],this._3d)}dderivative(e){return $.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new ae($.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return $.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return $.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const r=this.derivative(e),n=xn(r.x*r.x+r.y*r.y);return{t:e,x:-r.y/n,y:r.x/n}}__normal3(e){const r=this.derivative(e),n=this.derivative(e+.01),i=xn(r.x*r.x+r.y*r.y+r.z*r.z),s=xn(n.x*n.x+n.y*n.y+n.z*n.z);r.x/=i,r.y/=i,r.z/=i,n.x/=s,n.y/=s,n.z/=s;const o={x:n.y*r.z-n.z*r.y,y:n.z*r.x-n.x*r.z,z:n.x*r.y-n.y*r.x},a=xn(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=a,o.y/=a,o.z/=a;const u=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:e,x:u[0]*r.x+u[1]*r.y+u[2]*r.z,y:u[3]*r.x+u[4]*r.y+u[5]*r.z,z:u[6]*r.x+u[7]*r.y+u[8]*r.z}}hull(e){let r=this.points,n=[],i=[],s=0;for(i[s++]=r[0],i[s++]=r[1],i[s++]=r[2],this.order===3&&(i[s++]=r[3]);r.length>1;){n=[];for(let o=0,a,u=r.length-1;o<u;o++)a=$.lerp(e,r[o],r[o+1]),i[s++]=a,n.push(a);r=n}return i}split(e,r){if(e===0&&!!r)return this.split(r).left;if(r===1)return this.split(e).right;const n=this.hull(e),i={left:this.order===2?new ae([n[0],n[3],n[5]]):new ae([n[0],n[4],n[7],n[9]]),right:this.order===2?new ae([n[5],n[4],n[2]]):new ae([n[9],n[8],n[6],n[3]]),span:n};return i.left._t1=$.map(0,0,1,this._t1,this._t2),i.left._t2=$.map(e,0,1,this._t1,this._t2),i.right._t1=$.map(e,0,1,this._t1,this._t2),i.right._t2=$.map(1,0,1,this._t1,this._t2),r?(r=$.map(r,e,1,0,1),i.right.split(r).left):i}extrema(){const e={};let r=[];return this.dims.forEach(function(n){let i=function(o){return o[n]},s=this.dpoints[0].map(i);e[n]=$.droots(s),this.order===3&&(s=this.dpoints[1].map(i),e[n]=e[n].concat($.droots(s))),e[n]=e[n].filter(function(o){return o>=0&&o<=1}),r=r.concat(e[n].sort($.numberSort))}.bind(this)),e.values=r.sort($.numberSort).filter(function(n,i){return r.indexOf(n)===i}),e}bbox(){const e=this.extrema(),r={};return this.dims.forEach(function(n){r[n]=$.getminmax(this,n,e[n])}.bind(this)),r}overlaps(e){const r=this.bbox(),n=e.bbox();return $.bboxoverlap(r,n)}offset(e,r){if(typeof r<"u"){const n=this.get(e),i=this.normal(e),s={c:n,n:i,x:n.x+i.x*r,y:n.y+i.y*r};return this._3d&&(s.z=n.z+i.z*r),s}if(this._linear){const n=this.normal(0),i=this.points.map(function(s){const o={x:s.x+e*n.x,y:s.y+e*n.y};return s.z&&n.z&&(o.z=s.z+e*n.z),o});return[new ae(i)]}return this.reduce().map(function(n){return n._linear?n.offset(e)[0]:n.scale(e)})}simple(){if(this.order===3){const i=$.angle(this.points[0],this.points[3],this.points[1]),s=$.angle(this.points[0],this.points[3],this.points[2]);if(i>0&&s<0||i<0&&s>0)return!1}const e=this.normal(0),r=this.normal(1);let n=e.x*r.x+e.y*r.y;return this._3d&&(n+=e.z*r.z),wn(Pw(n))<Bw/3}reduce(){let e,r=0,n=0,i=.01,s,o=[],a=[],u=this.extrema().values;for(u.indexOf(0)===-1&&(u=[0].concat(u)),u.indexOf(1)===-1&&u.push(1),r=u[0],e=1;e<u.length;e++)n=u[e],s=this.split(r,n),s._t1=r,s._t2=n,o.push(s),r=n;return o.forEach(function(l){for(r=0,n=0;n<=1;)for(n=r+i;n<=1+i;n+=i)if(s=l.split(r,n),!s.simple()){if(n-=i,wn(r-n)<i)return[];s=l.split(r,n),s._t1=$.map(r,0,1,l._t1,l._t2),s._t2=$.map(n,0,1,l._t1,l._t2),a.push(s),r=n;break}r<1&&(s=l.split(r,1),s._t1=$.map(r,0,1,l._t1,l._t2),s._t2=l._t2,a.push(s))}),a}translate(e,r,n){n=typeof n=="number"?n:r;const i=this.order;let s=this.points.map((o,a)=>(1-a/i)*r+a/i*n);return new ae(this.points.map((o,a)=>({x:o.x+e.x*s[a],y:o.y+e.y*s[a]})))}scale(e){const r=this.order;let n=!1;if(typeof e=="function"&&(n=e),n&&r===2)return this.raise().scale(n);const i=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),n?n(0):e,n?n(1):e);const o=n?n(0):e,a=n?n(1):e,u=[this.offset(0,10),this.offset(1,10)],l=[],c=$.lli4(u[0],u[0].c,u[1],u[1].c);if(!c)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){const f=l[h*r]=$.copy(s[h*r]);f.x+=(h?a:o)*u[h].n.x,f.y+=(h?a:o)*u[h].n.y}),n?([0,1].forEach(function(h){if(!(r===2&&!!h)){var f=s[h+1],d={x:f.x-c.x,y:f.y-c.y},v=n?n((h+1)/r):e;n&&!i&&(v=-v);var m=xn(d.x*d.x+d.y*d.y);d.x/=m,d.y/=m,l[h+1]={x:f.x+v*d.x,y:f.y+v*d.y}}}),new ae(l)):([0,1].forEach(h=>{if(r===2&&!!h)return;const f=l[h*r],d=this.derivative(h),v={x:f.x+d.x,y:f.y+d.y};l[h+1]=$.lli4(f,v,c,s[h+1])}),new ae(l))}outline(e,r,n,i){if(r=r===void 0?e:r,this._linear){const B=this.normal(0),k=this.points[0],te=this.points[this.points.length-1];let L,K,re;n===void 0&&(n=e,i=r),L={x:k.x+B.x*e,y:k.y+B.y*e},re={x:te.x+B.x*n,y:te.y+B.y*n},K={x:(L.x+re.x)/2,y:(L.y+re.y)/2};const j=[L,K,re];L={x:k.x-B.x*r,y:k.y-B.y*r},re={x:te.x-B.x*i,y:te.y-B.y*i},K={x:(L.x+re.x)/2,y:(L.y+re.y)/2};const ge=[re,K,L],de=$.makeline(ge[2],j[0]),g=$.makeline(j[2],ge[0]),w=[de,new ae(j),g,new ae(ge)];return new Si(w)}const s=this.reduce(),o=s.length,a=[];let u=[],l,c=0,h=this.length();const f=typeof n<"u"&&typeof i<"u";function d(B,k,te,L,K){return function(re){const j=L/te,ge=(L+K)/te,de=k-B;return $.map(re,0,1,B+j*de,B+ge*de)}}s.forEach(function(B){const k=B.length();f?(a.push(B.scale(d(e,n,h,c,k))),u.push(B.scale(d(-r,-i,h,c,k)))):(a.push(B.scale(e)),u.push(B.scale(-r))),c+=k}),u=u.map(function(B){return l=B.points,l[3]?B.points=[l[3],l[2],l[1],l[0]]:B.points=[l[2],l[1],l[0]],B}).reverse();const v=a[0].points[0],m=a[o-1].points[a[o-1].points.length-1],x=u[o-1].points[u[o-1].points.length-1],_=u[0].points[0],S=$.makeline(x,v),M=$.makeline(m,_),X=[S].concat(a).concat([M]).concat(u);return new Si(X)}outlineshapes(e,r,n){r=r||e;const i=this.outline(e,r).curves,s=[];for(let o=1,a=i.length;o<a/2;o++){const u=$.makeshape(i[o],i[a-o],n);u.startcap.virtual=o>1,u.endcap.virtual=o<a/2-1,s.push(u)}return s}intersects(e,r){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof ae&&(e=e.reduce()),this.curveintersects(this.reduce(),e,r)):this.selfintersects(r)}lineIntersects(e){const r=Pl(e.p1.x,e.p2.x),n=Pl(e.p1.y,e.p2.y),i=Bl(e.p1.x,e.p2.x),s=Bl(e.p1.y,e.p2.y);return $.roots(this.points,e).filter(o=>{var a=this.get(o);return $.between(a.x,r,i)&&$.between(a.y,n,s)})}selfintersects(e){const r=this.reduce(),n=r.length-2,i=[];for(let s=0,o,a,u;s<n;s++)a=r.slice(s,s+1),u=r.slice(s+2),o=this.curveintersects(a,u,e),i.push(...o);return i}curveintersects(e,r,n){const i=[];e.forEach(function(o){r.forEach(function(a){o.overlaps(a)&&i.push({left:o,right:a})})});let s=[];return i.forEach(function(o){const a=$.pairiteration(o.left,o.right,n);a.length>0&&(s=s.concat(a))}),s}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,r,n,i){const s=(i-n)/4,o=this.get(n+s),a=this.get(i-s),u=$.dist(e,r),l=$.dist(e,o),c=$.dist(e,a);return wn(l-u)+wn(c-u)}_iterate(e,r){let n=0,i=1,s;do{s=0,i=1;let o=this.get(n),a,u,l,c,h=!1,f=!1,d,v=i,m=1;do if(f=h,c=l,v=(n+i)/2,a=this.get(v),u=this.get(i),l=$.getccenter(o,a,u),l.interval={start:n,end:i},h=this._error(l,o,n,i)<=e,d=f&&!h,d||(m=i),h){if(i>=1){if(l.interval.end=m=1,c=l,i>1){let _={x:l.x+l.r*Sw(l.e),y:l.y+l.r*Fw(l.e)};l.e+=$.angle({x:l.x,y:l.y},_,this.get(1))}break}i=i+(i-n)/2}else i=v;while(!d&&s++<100);if(s>=100)break;c=c||l,r.push(c),n=m}while(i<1);return r}},ms=e=>e.quadratic!==void 0,Ia=e=>e.cubic1!==void 0&&e.cubic2!==void 0,Mw=(e,r,n=0)=>Rr(e,r,n),Rr=(e,r,n=0)=>{if(isNaN(n))throw Error("bend is NaN");if(n<-1||n>1)throw Error("Expects bend range of -1 to 1");const i=ze.interpolate(.5,e,r);let s=i;r.y<e.y?s=n>0?{x:Math.min(e.x,r.x),y:Math.min(e.y,r.y)}:{x:Math.max(e.x,r.x),y:Math.max(e.y,r.y)}:s=n>0?{x:Math.max(e.x,r.x),y:Math.min(e.y,r.y)}:{x:Math.min(e.x,r.x),y:Math.max(e.y,r.y)};const o=ze.interpolate(Math.abs(n),i,s);return Of(e,r,o)},kw=(e,r,n,i)=>{const s=Rr(e,r,n);return new ae(s.a,s.quadratic,s.b).compute(i)},Lf=(e,r,n)=>[`M ${e.x} ${e.y} Q ${n.x} ${n.y} ${r.x} ${r.y}`],Fi=e=>{if(Ia(e))return Tw(e);if(ms(e))return zw(e);throw new Error("Unknown bezier type")},Nw=(e,r,n,i)=>({a:Object.freeze(e),b:Object.freeze(r),cubic1:Object.freeze(n),cubic2:Object.freeze(i)}),Tw=e=>{const{a:r,cubic1:n,cubic2:i,b:s}=e,o=new ae(r,n,i,s);return Object.freeze({...e,length:()=>o.length(),interpolate:a=>o.compute(a),bbox:()=>{const{x:a,y:u}=o.bbox(),l=a.size,c=u.size;if(l===void 0)throw new Error("x.size not present on calculated bbox");if(c===void 0)throw new Error("x.size not present on calculated bbox");return ne.fromTopLeft({x:a.min,y:u.min},l,c)},toString:()=>o.toString(),toSvgString:()=>["brrup"],kind:"bezier/cubic"})},Of=(e,r,n)=>({a:Object.freeze(e),b:Object.freeze(r),quadratic:Object.freeze(n)}),zw=e=>{const{a:r,b:n,quadratic:i}=e,s=new ae(r,i,n);return Object.freeze({...e,length:()=>s.length(),interpolate:o=>s.compute(o),bbox:()=>{const{x:o,y:a}=s.bbox(),u=o.size,l=a.size;if(u===void 0)throw new Error("x.size not present on calculated bbox");if(l===void 0)throw new Error("x.size not present on calculated bbox");return ne.fromTopLeft({x:o.min,y:a.min},u,l)},toString:()=>s.toString(),toSvgString:()=>Lf(r,n,i),kind:"bezier/quadratic"})},bt={};N(bt,{area:()=>Rw,bbox:()=>Gf,center:()=>Iw,circumference:()=>Wf,distanceCenter:()=>Oa,distanceFromExterior:()=>Ow,interpolate:()=>Uf,intersectionLine:()=>qw,intersections:()=>Yf,isCircle:()=>Ra,isCirclePositioned:()=>qf,isContainedBy:()=>Jf,isEqual:()=>La,isIntersecting:()=>Lw,isPositioned:()=>Oe,length:()=>Vf,point:()=>Hf,toPath:()=>jw,toSvg:()=>Kf});var jf=Math.PI*2,Oe=e=>e.x!==void 0&&e.y!==void 0,Ra=e=>e.radius!==void 0,qf=e=>Ra(e)&&Oe(e),Hf=(e,r,n)=>(n===void 0&&(Oe(e)?n=e:n={x:0,y:0}),{x:Math.cos(-r)*e.radius+n.x,y:Math.sin(-r)*e.radius+n.y}),gs=(e,r="circle")=>{if(Oe(e)&&ee(e,"circle"),Number.isNaN(e.radius))throw new Error(`${r}.radius is NaN`);if(e.radius<=0)throw new Error(`${r}.radius must be greater than zero`)},zo=(e,r="circle")=>{if(!Oe(e))throw new Error("Expected a positioned circle with x,y");return gs(e,r)},Iw=e=>Oe(e)?Object.freeze({x:e.x,y:e.y}):Object.freeze({x:e.radius,y:e.radius}),Uf=(e,r)=>Hf(e,r*jf),Vf=e=>Wf(e),Wf=e=>(gs(e),jf*e.radius),Rw=e=>(gs(e),Math.PI*e.radius*e.radius),Gf=e=>Oe(e)?ne.fromCenter(e,e.radius*2,e.radius*2):{width:e.radius*2,height:e.radius*2},Jf=(e,r)=>Oa(e,r)<Math.abs(e.radius-r.radius),Lw=(e,r)=>La(e,r)||Jf(e,r)?!0:Yf(e,r).length===2,Yf=(e,r)=>{const n=b.subtract(r,e),i=Math.sqrt(n.y*n.y+n.x*n.x);if(i>e.radius+r.radius)return[];if(i<Math.abs(e.radius-r.radius))return[];if(La(e,r))return[];const s=(e.radius*e.radius-r.radius*r.radius+i*i)/(2*i),o={x:e.x+n.x*s/i,y:e.y+n.y*s/i},a=Math.sqrt(e.radius*e.radius-s*s),u={x:-n.y*(a/i),y:n.x*(a/i)};return[b.sum(o,u),b.subtract(o,u)]},La=(e,r)=>e.radius!==r.radius?!1:Oe(e)&&Oe(r)?!(e.x!==r.x||e.y!==r.y||e.z!==r.z):(!Oe(e)&&!Oe(r),!1),Oa=(e,r)=>(zo(e,"a"),zo(e,"b"),b.distance(e,r)),Ow=(e,r)=>{if(zo(e,"a"),qf(r))return Math.max(0,Oa(e,r)-e.radius-r.radius);if(b.isPoint(r))return Math.max(0,b.distance(e,r));throw new Error("Second parameter invalid type")},Kf=(e,r,n)=>{if(Ra(e)){if(n!==void 0)return Qs(e.radius,n,r);if(Oe(e))return Qs(e.radius,e,r);throw new Error("origin parameter needed for non-positioned circle")}else{if(n!==void 0)return Qs(e,n,r);throw new Error("origin parameter needed")}},Qs=(e,r,n)=>{const{x:i,y:s}=r,o=n?"1":"0";return`
    M ${i}, ${s}
    m -${e}, 0
    a ${e},${e} 0 1,${o} ${e*2},0
    a ${e},${e} 0 1,${o} -${e*2},0
  `.split(`
`)},jw=e=>(gs(e),Object.freeze({...e,interpolate:r=>Uf(e,r),bbox:()=>Gf(e),length:()=>Vf(e),toSvgString:(r=!0)=>Kf(e,r),kind:"circular"})),qw=(e,r)=>{const n={x:r.b.x-r.a.x,y:r.b.y-r.a.y},i={x:r.a.x-e.x,y:r.a.y-e.y},s=(n.x*i.x+n.y*i.y)*-2,o=2*(n.x*n.x+n.y*n.y),a=Math.sqrt(s*s-2*o*(i.x*i.x+i.y*i.y-e.radius*e.radius));if(isNaN(a))return[];const u=(s-a)/o,l=(s+a)/o,c=[];return u<=1&&u>=0&&c.push({x:r.a.x+n.x*u,y:r.a.y+n.y*u}),l<=1&&l>=0&&c.push({x:r.a.x+n.x*l,y:r.a.y+n.y*l}),c},ja={};N(ja,{bbox:()=>Zf,computeDimensions:()=>qa,fromPaths:()=>rd,guardContinuous:()=>ed,interpolate:()=>Xf,setSegment:()=>Hw,toString:()=>Qf,toSvgString:()=>td});var Hw=(e,r,n)=>{const i=[...e.segments];return i[r]=n,rd(...i)},Xf=(e,r,n,i)=>{i===void 0&&(i=qa(e));const s=r*(n?i.totalWidth:i.totalLength);let o=0;const a=n?i.widths:i.lengths;for(let u=0;u<a.length;u++)if(o+a[u]>=s){let c=(s-o)/a[u];return c>1&&(c=1),e[u].interpolate(c)}else o+=a[u];return{x:0,y:0}},qa=e=>{const r=e.map(o=>o.bbox().width),n=e.map(o=>o.length());let i=0,s=0;for(let o=0;o<n.length;o++)i+=n[o];for(let o=0;o<r.length;o++)s+=r[o];return{totalLength:i,totalWidth:s,widths:r,lengths:n}},Zf=e=>{const n=e.map(i=>i.bbox()).map(i=>ne.corners(i)).flat();return b.bbox(...n)},Qf=e=>e.map(r=>r.toString()).join(", "),ed=e=>{let r=Lr.getEnd(e[0]);for(let n=1;n<e.length;n++){const i=Lr.getStart(e[n]);if(!b.isEqual(i,r))throw new Error("Path index "+n+" does not start at prior path end. Start: "+i.x+","+i.y+" expected: "+r.x+","+r.y);r=Lr.getEnd(e[n])}},td=e=>e.flatMap(r=>r.toSvgString()),rd=(...e)=>{ed(e);const r=qa(e);return Object.freeze({segments:e,length:()=>r.totalLength,interpolate:(n,i=!1)=>Xf(e,n,i,r),bbox:()=>Zf(e),toString:()=>Qf(e),toSvgString:()=>td(e),kind:"compound"})},Ha={};N(Ha,{allDirections:()=>Ua,cellAtPoint:()=>Jw,cellEquals:()=>id,cellKeyString:()=>nd,cellMiddle:()=>Yw,cells:()=>Ga,crossDirections:()=>od,getLine:()=>Kw,getVectorFromCardinal:()=>Va,guardCell:()=>ot,inside:()=>sd,isEqual:()=>Ww,neighbours:()=>ad,offset:()=>Wa,offsetCardinals:()=>Xw,rectangleForCell:()=>Gw,rows:()=>a1,simpleLine:()=>Zw,visitFor:()=>s1,visitor:()=>wr,visitorBreadth:()=>t1,visitorColumn:()=>o1,visitorDepth:()=>e1,visitorRandom:()=>n1,visitorRandomContiguous:()=>r1,visitorRow:()=>i1});var Uw=e=>e===void 0?!1:"x"in e&&"y"in e,Vw=e=>!(e===void 0||e[1]===void 0),Ww=(e,r)=>{if("rows"in e&&"cols"in e)if("rows"in r&&"cols"in r){if(e.rows!==r.rows||e.cols!==r.cols)return!1}else return!1;if("size"in e)if("size"in r){if(e.size!==r.size)return!1}else return!1;return!0},nd=e=>`Cell{${e.x},${e.y}}`,id=(e,r)=>r===void 0||e===void 0?!1:e.x===r.x&&e.y===r.y,ot=(e,r="Param",n)=>{if(e===void 0)throw new Error(r+" is undefined. Expecting {x,y}");if(e.x===void 0)throw new Error(r+".x is undefined");if(e.y===void 0)throw new Error(r+".y is undefined");if(!Number.isInteger(e.x))throw new Error(r+".x is non-integer");if(!Number.isInteger(e.y))throw new Error(r+".y is non-integer");if(n!==void 0&&!sd(n,e))throw new Error(`${r} is outside of grid. Cell: ${e.x},${e.y} Grid: ${n.cols}, ${n.rows}`)},ws=(e,r="Param")=>{if(e===void 0)throw new Error(`${r} is undefined. Expecting grid.`);if(!("rows"in e))throw new Error(`${r}.rows is undefined`);if(!("cols"in e))throw new Error(`${r}.cols is undefined`);if(!Number.isInteger(e.rows))throw new Error(`${r}.rows is not an integer`);if(!Number.isInteger(e.cols))throw new Error(`${r}.cols is not an integer`)},sd=(e,r)=>!(r.x<0||r.y<0||r.x>=e.cols||r.y>=e.rows),Gw=(e,r)=>{ot(e);const n=r.size,i=e.x*n,s=e.y*n;return ne.fromTopLeft({x:i,y:s},n,n)},Jw=(e,r)=>{const n=r.size;if(e.x<0||e.y<0)return;const i=Math.floor(e.x/n),s=Math.floor(e.y/n);if(!(i>=r.cols)&&!(s>=r.rows))return{x:i,y:s}},Ua=Object.freeze(["n","ne","nw","e","s","se","sw","w"]),od=Object.freeze(["n","e","s","w"]),ad=(e,r,n="undefined",i)=>{const s=i??Ua,o=s.map(a=>Wa(e,r,Va(a),n));return wa(s,o)},Yw=(e,r)=>{ot(e);const n=r.size,i=e.x*n,s=e.y*n;return Object.freeze({x:i+n/2,y:s+n/2})},Kw=(e,r)=>{ot(e),ot(r);let n=e.x,i=e.y;const s=Math.abs(r.x-n),o=Math.abs(r.y-i),a=n<r.x?1:-1,u=i<r.y?1:-1;let l=s-o;const c=[];for(;c.push(Object.freeze({x:n,y:i})),!(n===r.x&&i===r.y);){const h=2*l;h>-o&&(l-=o,n+=a),h<s&&(l+=s,i+=u)}return c},Xw=(e,r,n,i="stop")=>{ws(e,"grid"),ot(r,"start"),me(n,"aboveZero","steps");const s=Ua,o=s.map(u=>Va(u,n)),a=s.map((u,l)=>Wa(e,r,o[l],i));return wa(s,a)},Va=(e,r=1)=>{let n;switch(e){case"n":n={x:0,y:-1*r};break;case"ne":n={x:1*r,y:-1*r};break;case"e":n={x:1*r,y:0};break;case"se":n={x:1*r,y:1*r};break;case"s":n={x:0,y:1*r};break;case"sw":n={x:-1*r,y:1*r};break;case"w":n={x:-1*r,y:0};break;case"nw":n={x:-1*r,y:-1*r};break;default:n={x:0,y:0}}return Object.freeze(n)},Zw=function(e,r,n=!1){const i=[];if(e.x===r.x){const s=n?r.y+1:r.y;for(let o=e.y;o<s;o++)i.push({x:e.x,y:o})}else if(e.y===r.y){const s=n?r.x+1:r.x;for(let o=e.x;o<s;o++)i.push({x:o,y:e.y})}else throw new Error(`Only does vertical and horizontal: ${e.x},${e.y} - ${r.x},${r.y}`);return i},Wa=function(e,r,n,i="undefined"){ot(r,"start",e),ot(n),ws(e,"grid");let s=r.x,o=r.y;switch(i){case"wrap":s+=n.x%e.cols,o+=n.y%e.rows,s<0?s=e.cols+s:s>=e.cols&&(s-=e.cols),o<0?o=e.rows+o:o>=e.rows&&(o-=e.rows);break;case"stop":s+=n.x,o+=n.y,s=Co(s,e.cols),o=Co(o,e.rows);break;case"undefined":if(s+=n.x,o+=n.y,s<0||o<0||s>=e.cols||o>=e.rows)return;break;case"unbounded":s+=n.x,o+=n.y;break;default:throw new Error(`Unknown BoundsLogic case ${i}`)}return Object.freeze({x:s,y:o})},Qw=(e,r,n,i)=>{const s=ad(e,r,i,n);return Object.entries(s).filter(Vw)},wr=function*(e,r,n,i={}){ws(r,"grid"),ot(n,"start",r);const s=i.visited??oa(c=>nd(c)),o=e.options?e.options:(c,h)=>Qw(c,h,od,"undefined");if(!Uw(n))throw new Error("'start' parameter is undefined or not a cell");let a=[n],u=[],l=null;for(;a.length>0;){if(l===null){const c=a.pop();if(c===void 0)break;l=c}if(!s.has(l)){s.add(l),yield l;const c=o(r,l).filter(h=>!s.has(h[1]));c.length===0?l!==null&&(a=a.filter(h=>id(h,l))):u.push(...c)}if(u=u.filter(c=>!s.has(c[1])),u.length===0)l=null;else{const c=e.select(u);c!==void 0&&(a.push(c[1]),l=c[1])}}},e1=(e,r,n={})=>wr({select:i=>i[i.length-1]},e,r,n),t1=(e,r,n={})=>wr({select:i=>i[0]},e,r,n),ud=e=>zu(e),r1=(e,r,n={})=>wr({select:ud},e,r,n),n1=(e,r,n={})=>wr({options:(i,s)=>{const o=[];for(const a of Ga(i,s))o.push(["n",a]);return o},select:ud},e,r,n),i1=(e,r,n={})=>{const{reversed:i=!1}=n;return wr({select:u=>u.find(l=>l[0]===(i?"w":"e")),options:(u,l)=>(i?l.x>0?l={x:l.x-1,y:l.y}:l.y>0?l={x:u.cols-1,y:l.y-1}:l={x:u.cols-1,y:u.rows-1}:l.x<u.rows-1?l={x:l.x+1,y:l.y}:l.y<u.rows-1?l={x:0,y:l.y+1}:l={x:0,y:0},[[i?"w":"e",l]])},e,r,n)},s1=(e,r,n,i)=>{me(n,"","steps");const s={reversed:n<0};n=Math.abs(n);let o=r,a=i(e,r,s);a.next();let u=0;for(;u<n;){u++;const{value:l}=a.next();if(l)o=l,s.debug&&console.log(`stepsMade: ${u} cell: ${o.x}, ${o.y} reverse: ${s.reversed}`);else if(n>=e.cols*e.rows)n-=e.cols*e.rows,u=0,a=i(e,r,s),a.next(),o=r,s.debug&&console.log(`resetting visitor to ${n}`);else throw new Error("Value not received by visitor")}return o},o1=(e,r,n={})=>{const{reversed:i=!1}=n;return wr({select:o=>o.find(a=>a[0]===(i?"n":"s")),options:(o,a)=>(i?a.y>0?a={x:a.x,y:a.y-1}:a.x===0?a={x:o.cols-1,y:o.rows-1}:a={x:a.x-1,y:o.rows-1}:a.y<o.rows-1?a={x:a.x,y:a.y+1}:a.x<o.cols-1?a={x:a.x+1,y:0}:a={x:0,y:0},[[i?"n":"s",a]])},e,r,n)},a1=function*(e,r={x:0,y:0}){let n=r.y,i=[];for(const s of Ga(e,r))s.y!==n?(yield i,i=[s],n=s.y):i.push(s);i.length>0&&(yield i)},Ga=function*(e,r={x:0,y:0}){ws(e,"grid"),ot(r,"start",e);let{x:n,y:i}=r,s=!0;do yield{x:n,y:i},n++,n===e.cols&&(i++,n=0),i===e.rows&&(i=0,n=0),n===r.x&&i===r.y&&(s=!1);while(s)},Lr={};N(Lr,{getEnd:()=>l1,getStart:()=>u1});var u1=function(e){if(Zn.isQuadraticBezier(e))return e.a;if(ze.isLine(e))return e.a;throw new Error(`Unknown path type ${JSON.stringify(e)}`)},l1=function(e){if(Zn.isQuadraticBezier(e))return e.b;if(ze.isLine(e))return e.b;throw new Error(`Unknown path type ${JSON.stringify(e)}`)},ne={};N(ne,{area:()=>$1,center:()=>dd,corners:()=>Ja,distanceFromCenter:()=>x1,distanceFromExterior:()=>w1,edges:()=>vd,empty:()=>c1,emptyPositioned:()=>ld,fromCenter:()=>g1,fromElement:()=>f1,fromNumbers:()=>v1,fromTopLeft:()=>b1,getEdgeX:()=>Lo,getEdgeY:()=>Oo,guard:()=>at,intersectsPoint:()=>Ji,isEmpty:()=>h1,isEqual:()=>hd,isEqualSize:()=>d1,isPlaceholder:()=>jn,isPositioned:()=>je,isRect:()=>Qn,isRectPositioned:()=>Ro,lengths:()=>_1,maxFromCorners:()=>D1,multiply:()=>A1,normaliseByRect:()=>E1,perimeter:()=>C1,placeholder:()=>cd,placeholderPositioned:()=>Io,subtract:()=>y1,sum:()=>m1,toArray:()=>p1});var c1=Object.freeze({width:0,height:0}),ld=Object.freeze({x:0,y:0,width:0,height:0}),cd=Object.freeze({width:Number.NaN,height:Number.NaN}),Io=Object.freeze({x:Number.NaN,y:Number.NaN,width:Number.NaN,height:Number.NaN}),h1=e=>e.width===0&&e.height===0,jn=e=>Number.isNaN(e.width)&&Number.isNaN(e.height),je=e=>e.x!==void 0&&e.y!==void 0,Qn=e=>!(e===void 0||e.width===void 0||e.height===void 0),Ro=e=>Qn(e)&&je(e),f1=e=>({width:e.clientWidth,height:e.clientHeight}),d1=(e,r)=>{if(e===void 0)throw new Error("a undefined");if(r===void 0)throw new Error("b undefined");return e.width===r.width&&e.height===r.height};function v1(e,r,n,i){if(n===void 0||i===void 0){if(typeof e!="number")throw new Error("width is not an number");if(typeof r!="number")throw new Error("height is not an number");return Object.freeze({width:e,height:r})}if(typeof e!="number")throw new Error("x is not an number");if(typeof r!="number")throw new Error("y is not an number");if(typeof n!="number")throw new Error("width is not an number");if(typeof i!="number")throw new Error("height is not an number");return Object.freeze({x:e,y:r,width:n,height:i})}function p1(e){if(je(e))return[e.x,e.y,e.width,e.height];if(Qn(e))return[e.width,e.height];throw new Error(`rect param is not a rectangle. Got: ${JSON.stringify(e)}`)}var hd=(e,r)=>je(e)&&je(r)?b.isEqual(e,r)?e.width===r.width&&e.height===r.height:!1:!je(e)&&!je(r)?e.width===r.width&&e.height===r.height:!1;function y1(e,r,n){if(e===void 0)throw new Error("First parameter undefined");if(typeof r=="number"){const i=n===void 0?0:n;return Object.freeze({...e,width:e.width-r,height:e.height-i})}else return Object.freeze({...e,width:e.width-r.width,height:e.height-r.height})}function m1(e,r,n){if(e===void 0)throw new Error("First parameter undefined");if(typeof r=="number"){const i=n===void 0?0:n;return Object.freeze({...e,width:e.width+r,height:e.height+i})}else return Object.freeze({...e,width:e.width+r.width,height:e.height+r.height})}function Ji(e,r,n){at(e,"rect");let i=0,s=0;if(typeof r=="number"){if(n===void 0)throw new Error("x and y coordinate needed");i=r,s=n}else i=r.x,s=r.y;if(je(e)){if(i-e.x>e.width||i<e.x||s-e.y>e.height||s<e.y)return!1}else if(i>e.width||i<0||s>e.height||s<0)return!1;return!0}var g1=(e,r,n)=>{b.guard(e,"origin"),Xr(r,"width"),Xr(n,"height");const i=r/2,s=n/2;return{x:e.x-i,y:e.y-s,width:r,height:n}},w1=(e,r)=>{if(fd(e,"rect"),b.guard(r,"pt"),Ji(e,r))return 0;const n=Math.max(e.x-r.x,0,r.x-e.x+e.width),i=Math.max(e.y-r.y,0,r.y-e.y+e.height);return Math.sqrt(n*n+i*i)},x1=(e,r)=>b.distance(dd(e),r),D1=(e,r,n,i)=>{if(e.y>n.y)throw new Error("topLeft.y greater than bottomRight.y");if(e.y>i.y)throw new Error("topLeft.y greater than bottomLeft.y");const s=r.x-e.x,o=n.x-i.x,a=Math.abs(i.y-e.y),u=Math.abs(n.y-r.y);return{x:Math.min(e.x,i.x),y:Math.min(r.y,e.y),width:Math.max(s,o),height:Math.max(a,u)}},Xr=(e,r="Dimension")=>{if(e===void 0)throw Error(`${r} is undefined`);if(isNaN(e))throw Error(`${r} is NaN`);if(e<0)throw Error(`${r} cannot be negative`)},at=(e,r="rect")=>{if(e===void 0)throw Error("{$name} undefined");je(e)&&b.guard(e,r),Xr(e.width,r+".width"),Xr(e.height,r+".height")},fd=(e,r="rect")=>{if(!je(e))throw new Error(`Expected ${r} to have x,y`);at(e,r)},b1=(e,r,n)=>(Xr(r,"width"),Xr(n,"height"),b.guard(e,"origin"),{x:e.x,y:e.y,width:r,height:n}),Ja=(e,r)=>{if(at(e),r===void 0&&b.isPoint(e))r=e;else if(r===void 0)throw new Error("Unpositioned rect needs origin param");return[{x:r.x,y:r.y},{x:r.x+e.width,y:r.y},{x:r.x+e.width,y:r.y+e.height},{x:r.x,y:r.y+e.height}]},Lo=(e,r)=>{switch(at(e),r){case"top":return b.isPoint(e)?e.x:0;case"bottom":return b.isPoint(e)?e.x:0;case"left":return b.isPoint(e)?e.y:0;case"right":return b.isPoint(e)?e.x+e.width:e.width}},Oo=(e,r)=>{switch(at(e),r){case"top":return b.isPoint(e)?e.y:0;case"bottom":return b.isPoint(e)?e.y+e.height:e.height;case"left":return b.isPoint(e)?e.y:0;case"right":return b.isPoint(e)?e.y:0}},E1=(e,r,n)=>{let i;if(n===void 0)if(Qn(r))n=r.height,i=r.width;else throw new Error("Expects rectangle or width and height parameters for normaliseBy");else if(typeof r=="number")i=r;else throw new Error("Expects rectangle or width and height parameters for normaliseBy");return je(e)?Object.freeze({x:e.x/i,y:e.y/n,width:e.width/i,height:e.height/n}):Object.freeze({width:e.width/i,height:e.height/n})};function A1(e,r,n){if(at(e,"a"),Qn(r))return Ro(e)?{...e,x:e.x*r.width,y:e.y*r.height,width:e.width*r.width,height:e.width*r.height}:{...e,width:e.width*r.width,height:e.width*r.height};if(typeof r!="number")throw new Error(`Expected second parameter of type Rect or number. Got ${JSON.stringify(r)}`);return n===void 0&&(n=r),Ro(e)?{...e,x:e.x*r,y:e.y*n,width:e.width*r,height:e.width*n}:{...e,width:e.width*r,height:e.width*n}}var dd=(e,r)=>(at(e),r===void 0&&b.isPoint(e)?r=e:r===void 0&&(r={x:0,y:0}),Object.freeze({x:r.x+e.width/2,y:r.y+e.height/2})),_1=e=>(fd(e,"rect"),vd(e).map(r=>ze.length(r))),vd=(e,r)=>{const n=Ja(e,r);return ze.joinPointsToLines(...n,n[0])},C1=e=>(at(e),e.height+e.height+e.width+e.width),$1=e=>(at(e),e.height*e.width),Ya={};N(Ya,{fromDegrees:()=>S1});var S1=(e,r,n=0,i=0,s=360)=>({radiusX:e,radiusY:r,rotation:Tt(n),startAngle:Tt(i),endAngle:Tt(s)}),nt={};N(nt,{fromCartesian:()=>F1,isCoord:()=>pd,rotate:()=>B1,rotateDegrees:()=>M1,spiral:()=>P1,spiralRaw:()=>k1,toCartesian:()=>Pi});var pd=e=>!(e.distance===void 0||e.angleRadian===void 0),F1=(e,r)=>{e=Na(e,r);const n=Math.atan2(e.y,e.x);return Object.freeze({...e,angleRadian:n,distance:Math.sqrt(e.x*e.x+e.y*e.y)})},Pi=(e,r,n)=>{if(pd(e)){if(r===void 0&&(r=Wi),!fe(r))throw new Error("Expecting (Coord, Point). Point param wrong type.");return Ml(e.distance,e.angleRadian,r)}else if(typeof e=="number"&&typeof r=="number"){if(n===void 0&&(n=Wi),!fe(n))throw new Error("Expecting (number, number, Point). Point param wrong type");return Ml(e,r,n)}else throw new Error(`Expecting parameters of (number, number). Got: (${typeof e}, ${typeof r}, ${typeof n}). a: ${JSON.stringify(e)}`)};function*P1(e,r){let n=0;for(;;){const i=e*n++;yield{distance:r*i,angleRadian:i,step:n}}}var B1=(e,r)=>Object.freeze({...e,angleRadian:e.angleRadian+r}),M1=(e,r)=>Object.freeze({...e,angleRadian:e.angleRadian+Tt(r)}),k1=(e,r,n)=>{const i=r*e;return Object.freeze({distance:n*i,angleRadian:i})},Ml=(e,r,n)=>(ee(n),Object.freeze({x:n.x+e*Math.cos(r),y:n.y+e*Math.sin(r)})),Ka={};N(Ka,{arrow:()=>z1,center:()=>N1,starburst:()=>T1});var N1=e=>{if(e===void 0)return Object.freeze({x:.5,y:.5});if(ne.isRect(e))return ne.center(e);if(ar.isTriangle(e))return ar.centroid(e);if(bt.isCircle(e))return bt.center(e);throw new Error(`Unknown shape: ${JSON.stringify(e)}`)},T1=(e,r=5,n,i={x:0,y:0},s)=>{me(r,"positive","points");const o=Math.PI*2/r,a=o/2,u=s?.initialAngleRadian??-Math.PI/2;n===void 0&&(n=e/2);let l=u;const c=[];for(let h=0;h<r;h++){const f=Pi(e,l,i),d=Pi(n,l-a,i),v=Pi(n,l+a,i);c.push(d,f),h+1<r&&c.push(v),l+=o}return c},z1=(e,r,n={})=>{const i=n.tailLength??10,s=n.tailThickness??Math.max(i/5,5),o=n.angleRadian??0,a=n.arrowSize??Math.max(i/5,15),u=Math.PI/2;let l,c;if(r==="tip")l=ar.equilateralFromVertex(e,a,u),c=ne.corners(ne.fromTopLeft({x:l.a.x-i,y:e.y-s/2},i,s));else if(r==="middle"){const f=i+a/2,d=s/2;l=ar.equilateralFromVertex({x:e.x+a*1.2,y:e.y},a,u),c=ne.corners(ne.fromTopLeft({x:e.x-f,y:e.y-d},i+a,s))}else c=ne.corners(ne.fromTopLeft({x:e.x,y:e.y-s/2},i,s)),l=ar.equilateralFromVertex({x:e.x+i+a*.7,y:e.y},a,u);return b.rotate([c[0],c[1],l.a,l.b,l.c,c[2],c[3]],o,e)},ar={};N(ar,{Empty:()=>mx,Equilateral:()=>yd,Isosceles:()=>gd,Placeholder:()=>gx,Right:()=>md,angles:()=>ei,anglesDegrees:()=>Ax,apply:()=>Dx,area:()=>Ed,barycentricCoord:()=>_d,barycentricToCartestian:()=>Ix,bbox:()=>Ad,centroid:()=>As,corners:()=>jo,edges:()=>Es,equilateralFromVertex:()=>Nx,fromFlatArray:()=>zx,fromPoints:()=>Za,fromRadius:()=>Mx,guard:()=>Ue,innerCircle:()=>Px,intersectsPoint:()=>Rx,isAcute:()=>Sx,isEmpty:()=>wx,isEqual:()=>Ex,isEquilateral:()=>_x,isIsoceles:()=>Cx,isOblique:()=>$x,isObtuse:()=>Fx,isPlaceholder:()=>xx,isRightAngle:()=>Dd,isTriangle:()=>bx,lengths:()=>Xa,outerCircle:()=>Bx,perimeter:()=>bd,rotate:()=>Lx,rotateByVertex:()=>kx,toFlatArray:()=>Tx});var yd={};N(yd,{area:()=>H1,centerFromA:()=>R1,centerFromB:()=>L1,centerFromC:()=>O1,circumcircle:()=>U1,fromCenter:()=>I1,height:()=>j1,incircle:()=>xs,perimeter:()=>q1});var kl=Math.PI*4/3,Nl=Math.PI*2/3,Ut=e=>typeof e=="number"?e:e.length,I1=(e,r={x:0,y:0},n)=>{const i=Ut(e)/Math.sqrt(3),s=n??Math.PI*1.5,o={x:i*Math.cos(s)+r.x,y:i*Math.sin(s)+r.y},a={x:i*Math.cos(s+kl)+r.x,y:i*Math.sin(s+kl)+r.y},u={x:i*Math.cos(s+Nl)+r.x,y:i*Math.sin(s+Nl)+r.y};return Object.freeze({a,b:o,c:u})},R1=(e,r={x:0,y:0})=>{const n=Ut(e),{radius:i}=xs(e);return{x:r.x+n/2,y:r.y-i}},L1=(e,r={x:0,y:0})=>{const{radius:n}=xs(e);return{x:r.x,y:r.y+n*2}},O1=(e,r={x:0,y:0})=>{const n=Ut(e),{radius:i}=xs(e);return{x:r.x-n/2,y:r.y-i}},j1=e=>Math.sqrt(3)/2*Ut(e),q1=e=>Ut(e)*3,H1=e=>Math.pow(Ut(e),2)*Math.sqrt(3)/4,U1=e=>({radius:Math.sqrt(3)/3*Ut(e)}),xs=e=>({radius:Math.sqrt(3)/6*Ut(e)}),md={};N(md,{adjacentFromHypotenuse:()=>nx,adjacentFromOpposite:()=>ix,angleAtPointA:()=>K1,angleAtPointB:()=>X1,area:()=>Y1,circumcircle:()=>Q1,fromA:()=>V1,fromB:()=>W1,fromC:()=>G1,height:()=>Ds,hypotenuseFromAdjacent:()=>ox,hypotenuseFromOpposite:()=>sx,hypotenuseSegments:()=>bs,incircle:()=>ex,medians:()=>Z1,oppositeFromAdjacent:()=>tx,oppositeFromHypotenuse:()=>rx,perimeter:()=>J1,resolveLengths:()=>He});var V1=(e,r={x:0,y:0})=>{const n=He(e),i=bs(e),s=Ds(e),o={x:r.x,y:r.y},a={x:r.x+n.hypotenuse,y:r.y},u={x:r.x+i[1],y:r.y-s};return{a:o,b:a,c:u}},W1=(e,r={x:0,y:0})=>{const n=He(e),i=bs(e),s=Ds(e),o={x:r.x,y:r.y},a={x:r.x-n.hypotenuse,y:r.y},u={x:r.x-i[0],y:r.y-s};return{a,b:o,c:u}},G1=(e,r={x:0,y:0})=>{const n=bs(e),i=Ds(e),s={x:r.x,y:r.y},o={x:r.x-n[1],y:r.y+i},a={x:r.x+n[0],y:r.y+i};return{a:o,b:a,c:s}},He=e=>{const r=e.adjacent,n=e.opposite,i=e.hypotenuse;if(r!==void 0&&n!==void 0)return{...e,adjacent:r,opposite:n,hypotenuse:Math.sqrt(r*r+n*n)};if(r&&i)return{...e,adjacent:r,hypotenuse:i,opposite:i*i-r*r};if(n&&i)return{...e,hypotenuse:i,opposite:n,adjacent:i*i-n*n};if(e.opposite&&e.hypotenuse&&e.adjacent)return e;throw new Error("Missing at least two edges")},Ds=e=>{const r=He(e),n=r.opposite*r.opposite/r.hypotenuse,i=r.adjacent*r.adjacent/r.hypotenuse;return Math.sqrt(n*i)},bs=e=>{const r=He(e),n=r.opposite*r.opposite/r.hypotenuse,i=r.adjacent*r.adjacent/r.hypotenuse;return[n,i]},J1=e=>{const r=He(e);return r.adjacent+r.hypotenuse+r.opposite},Y1=e=>{const r=He(e);return r.opposite*r.adjacent/2},K1=e=>{const r=He(e);return Math.acos((r.adjacent*r.adjacent+r.hypotenuse*r.hypotenuse-r.opposite*r.opposite)/(2*r.adjacent*r.hypotenuse))},X1=e=>{const r=He(e);return console.log(r),Math.acos((r.opposite*r.opposite+r.hypotenuse*r.hypotenuse-r.adjacent*r.adjacent)/(2*r.opposite*r.hypotenuse))},Z1=e=>{const r=He(e),n=r.adjacent*r.adjacent,i=r.hypotenuse*r.hypotenuse,s=r.opposite*r.opposite;return[Math.sqrt(2*(n+i)-s)/2,Math.sqrt(2*(i+s)-n)/2,Math.sqrt(2*(s+n)-i)/2]},Q1=e=>({radius:He(e).hypotenuse/2}),ex=e=>{const r=He(e);return{radius:(r.adjacent+r.opposite-r.hypotenuse)/2}},tx=(e,r)=>Math.tan(e)*r,rx=(e,r)=>Math.sin(e)*r,nx=(e,r)=>Math.cos(e)*r,ix=(e,r)=>r/Math.tan(e),sx=(e,r)=>r/Math.sin(e),ox=(e,r)=>r/Math.cos(e),gd={};N(gd,{apexAngle:()=>ax,area:()=>cx,baseAngle:()=>wd,circumcircle:()=>hx,fromA:()=>vx,fromB:()=>px,fromC:()=>yx,fromCenter:()=>dx,height:()=>Vt,incircle:()=>xd,legHeights:()=>ux,medians:()=>fx,perimeter:()=>lx});var wd=e=>Math.acos(e.base/(2*e.legs)),ax=e=>{const r=e.legs*e.legs,n=e.base*e.base;return Math.acos((2*r-n)/(2*r))},Vt=e=>{const r=e.legs*e.legs,n=e.base*e.base;return Math.sqrt((4*r-n)/4)},ux=e=>{const r=wd(e);return e.base*Math.sin(r)},lx=e=>2*e.legs+e.base,cx=e=>Vt(e)*e.base/2,hx=e=>{const r=Vt(e),n=r*r,i=e.base*e.base;return{radius:(4*n+i)/(8*r)}},xd=e=>{const r=Vt(e);return{radius:e.base*r/(2*e.legs+e.base)}},fx=e=>{const r=e.legs*e.legs,n=e.base*e.base,i=Math.sqrt(r+2*n)/2,s=Math.sqrt(4*r-n)/2;return[i,i,s]},dx=(e,r={x:0,y:0})=>{const n=Vt(e),i=xd(e).radius,s=n-i,o={x:r.x-e.base/2,y:r.y+i},a={x:r.x+e.base/2,y:r.y+i},u={x:r.x,y:r.y-s};return{a:o,b:a,c:u}},vx=(e,r={x:0,y:0})=>{const n=Vt(e),i={x:r.x,y:r.y},s={x:r.x+e.base,y:r.y},o={x:r.x+e.base/2,y:r.y-n};return{a:i,b:s,c:o}},px=(e,r={x:0,y:0})=>{const n=Vt(e),i={x:r.x,y:r.y},s={x:r.x-e.base,y:r.y},o={x:r.x-e.base/2,y:r.y-n};return{a:s,b:i,c:o}},yx=(e,r={x:0,y:0})=>{const n=Vt(e),i={x:r.x,y:r.y},s={x:r.x-e.base/2,y:r.y+n},o={x:r.x+e.base/2,y:r.y+n};return{a:s,b:o,c:i}},Tl=Math.PI*2,mx=Object.freeze({a:{x:0,y:0},b:{x:0,y:0},c:{x:0,y:0}}),gx=Object.freeze({a:{x:NaN,y:NaN},b:{x:NaN,y:NaN},c:{x:NaN,y:NaN}}),wx=e=>Ci(e.a)&&Ci(e.b)&&Ci(e.c),xx=e=>$i(e.a)&&$i(e.b)&&$i(e.c),Dx=(e,r)=>Object.freeze({...e,a:r(e.a,"a"),b:r(e.b,"b"),c:r(e.c,"c")}),Ue=(e,r="t")=>{if(e===void 0)throw Error("{$name} undefined");ee(e.a,r+".a"),ee(e.b,r+".b"),ee(e.c,r+".c")},bx=e=>{if(e===void 0)return!1;const r=e;return!(!fe(r.a)||!fe(r.b)||!fe(r.c))},Ex=(e,r)=>Bn(e.a,r.a)&&Bn(e.b,r.b)&&Bn(e.c,r.c),jo=e=>(Ue(e),[e.a,e.b,e.c]),Es=e=>(Ue(e),ze.joinPointsToLines(e.a,e.b,e.c,e.a)),Xa=e=>(Ue(e),[xt(e.a,e.b),xt(e.b,e.c),xt(e.c,e.a)]),ei=e=>(Ue(e),[Ir(e.a,e.b),Ir(e.b,e.c),Ir(e.c,e.a)]),Ax=e=>(Ue(e),Qa(ei(e))),_x=e=>{Ue(e);const[r,n,i]=Xa(e);return r===n&&n===i},Cx=e=>{const[r,n,i]=Xa(e);return r===n||n===i||i===r},Dd=e=>ei(e).some(r=>r===Math.PI/2),$x=e=>!Dd(e),Sx=e=>!ei(e).some(r=>r>=Math.PI/2),Fx=e=>ei(e).some(r=>r>Math.PI/2),As=e=>{Ue(e);const r=Pf([e.a,e.b,e.c],(i,s)=>({x:i.x+s.x,y:i.y+s.y}));return{x:r.x/3,y:r.y/3}},bd=e=>(Ue(e),Es(e).reduce((r,n)=>r+ze.length(n),0)),Ed=e=>{Ue(e,"t");const r=Es(e).map(i=>ze.length(i)),n=(r[0]+r[1]+r[2])/2;return Math.sqrt(n*(n-r[0])*(n-r[1])*(n-r[2]))},Px=e=>{const r=As(e),n=bd(e)/2;return{radius:Ed(e)/n,...r}},Bx=e=>{const[r,n,i]=Es(e).map(a=>ze.length(a)),s=As(e);return{radius:r*n*i/Math.sqrt((r+n+i)*(-r+n+i)*(r-n+i)*(r+n-i)),...s}},Mx=(e,r,n={})=>{R(r,"positive","radius"),ee(e,"origin");const i=n.initialAngleRadian??0,o=[i,i+Tl*1/3,i+Tl*2/3].map(a=>nt.toCartesian(r,a,e));return Za(o)},kx=(e,r,n="b")=>{const i=n==="a"?e.a:n==="b"?e.b:e.c;return Object.freeze({a:or(e.a,r,i),b:or(e.b,r,i),c:or(e.c,r,i)})},Nx=(e={x:0,y:0},r=10,n=Math.PI/2)=>{const i=No(e,r,Math.PI- -n/2),s=No(e,r,Math.PI-n/2);return{a:i,b:e,c:s}},Tx=e=>(Ue(e),[e.a.x,e.a.y,e.b.x,e.b.y,e.c.x,e.c.y]),zx=e=>{if(!Array.isArray(e))throw new Error("coords expected as array");if(e.length!==6)throw new Error(`coords array expected with 6 elements. Got ${e.length}`);return Za(Sf(...e))},Za=e=>{if(!Array.isArray(e))throw new Error("points expected as array");if(e.length!==3)throw new Error(`points array expected with 3 elements. Got ${e.length}`);return{a:e[0],b:e[1],c:e[2]}},Ad=(e,r=0)=>{const{a:n,b:i,c:s}=e,o=Math.min(n.x,i.x,s.x)-r,a=Math.max(n.x,i.x,s.x)+r,u=Math.min(n.y,i.y,s.y)-r,l=Math.max(n.y,i.y,s.y)+r;return{x:o,y:u,width:a-o,height:l-u}},_d=(e,r,n)=>{const i=dr(r,n),s=(l,c,h,f)=>(h.y-f.y)*l+(f.x-h.x)*c+h.x*f.y-f.x*h.y,o=s(i.x,i.y,e.b,e.c)/s(e.a.x,e.a.y,e.b,e.c),a=s(i.x,i.y,e.c,e.a)/s(e.b.x,e.b.y,e.c,e.a),u=s(i.x,i.y,e.a,e.b)/s(e.c.x,e.c.y,e.a,e.b);return{a:o,b:a,c:u}},Ix=(e,r)=>{Ue(e);const{a:n,b:i,c:s}=e,o=n.x*r.a+i.x*r.b+s.x*r.c,a=n.y*r.a+i.y*r.b+s.y*r.c;if(n.z&&i.z&&s.z){const u=n.z*r.a+i.z*r.b+s.z*r.c;return Object.freeze({x:o,y:a,z:u})}else return Object.freeze({x:o,y:a})},Rx=(e,r,n)=>{const i=Ad(e),s=dr(r,n);if(!ne.intersectsPoint(i,s))return!1;const o=_d(e,s);return 0<=o.a&&o.a<=1&&0<=o.b&&o.b<=1&&0<=o.c&&o.c<=1},Lx=(e,r,n)=>r===void 0||r===0?e:(n===void 0&&(n=As(e)),Object.freeze({...e,a:or(e.a,r,n),b:or(e.b,r,n),c:or(e.c,r,n)}));function Tt(e){return Array.isArray(e)?e.map(r=>r*(Math.PI/180)):e*(Math.PI/180)}function Qa(e){return Array.isArray(e)?e.map(r=>r*180/Math.PI):e*180/Math.PI}var Cd=e=>Math.atan2(e.x,e.y);try{typeof window<"u"&&(window.ixfx={...window.ixfx,Geometry:{Circles:bt,Arcs:Ba,Lines:ze,Rects:ne,Points:b,Paths:Lr,Grids:Ha,Beziers:Zn,Compound:ja,Ellipses:Ya,Polar:nt,Shapes:Ka,radiansFromAxisX:Cd,radianToDegree:Qa,degreeToRadian:Tt}})}catch{}var Ox={};N(Ox,{average:()=>qx,averageWeighted:()=>Hx,filter:()=>Jx,isValid:()=>$d,max:()=>Vx,min:()=>Ux,total:()=>Wx,tracker:()=>Gx});var eu=class{constructor(e="TrackerBase",r={}){this.id=e,y(this,"seenCount"),y(this,"storeIntermediate"),y(this,"resetAfterSamples"),this.storeIntermediate=r.storeIntermediate??!1,this.resetAfterSamples=r.resetAfterSamples??-1,this.seenCount=0}reset(){this.seenCount=0,this.onReset()}seen(...e){this.resetAfterSamples>0&&this.seenCount>this.resetAfterSamples&&this.reset(),this.seenCount+=e.length;const r=this.seenImpl(e);this.onSeen(r)}onSeen(e){}},jx=class extends eu{constructor(e,r){super(e,r);y(this,"values"),y(this,"timestamps"),this.values=[],this.timestamps=[]}get last(){return this.values.at(-1)}get initial(){return this.values.at(0)}get size(){return this.values.length}get elapsed(){if(this.values.length<0)throw new Error("No values seen yet");return Date.now()-this.timestamps[0]}onReset(){this.values=[],this.timestamps=[]}seenImpl(e){const r=e.at(-1),n=Date.now();return this.storeIntermediate?(this.values.push(...e),this.timestamps.push(..._a(e.length,()=>n))):this.values.length===0?(this.values.push(r),this.timestamps.push(n)):this.values.length===2?(this.values[1]=r,this.timestamps[1]=n):this.values.length===1&&(this.values.push(r),this.timestamps.push(n)),e}},tu=class extends jx{constructor(){super(...arguments);y(this,"total",0),y(this,"min",Number.MAX_SAFE_INTEGER),y(this,"max",Number.MIN_SAFE_INTEGER)}get avg(){return this.total/this.seenCount}difference(){if(this.last!==void 0&&this.initial!==void 0)return this.last-this.initial}relativeDifference(){if(this.last!==void 0&&this.initial!==void 0)return this.last/this.initial}onReset(){this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER,this.total=0,super.onReset()}onSeen(e){if(e.some(r=>Number.isNaN(r)))throw Error("Cannot add NaN");this.total=e.reduce((r,n)=>r+n,this.total),this.min=Math.min(...e,this.min),this.max=Math.max(...e,this.max)}getMinMaxAvg(){return{min:this.min,max:this.max,avg:this.avg}}},Mn=(e,r)=>new tu(e??"",r??{}),qx=(...e)=>kh(e),Hx=(e,...r)=>Nh(r,e),Ux=(...e)=>Th(e),Vx=(...e)=>Ih(e),Wx=(...e)=>Rh(e),$d=e=>!(typeof e!="number"||Number.isNaN(e)),Gx=(e,r)=>Mn(e,r);function*Jx(e){for(const r of e)$d(r)&&(yield r)}var Yx={};N(Yx,{AudioAnalysers:()=>Bd,AudioVisualisers:()=>Md,Bluetooth:()=>Sd,Camera:()=>Ld,Codec:()=>ru,Espruino:()=>Nd,FrameProcessor:()=>lD,Serial:()=>Td,StringReceiveBuffer:()=>nu,StringWriteBuffer:()=>iu});var Sd={};N(Sd,{NordicBleDevice:()=>Pd,defaultOpts:()=>_s});var ru=class{constructor(){y(this,"enc",new TextEncoder),y(this,"dec",new TextDecoder("utf-8"))}toBuffer(e){return this.enc.encode(e)}fromBuffer(e){return this.dec.decode(e)}},nu=class{constructor(e,r=`
`){this.onData=e,this.separator=r,y(this,"buffer",""),y(this,"stream")}clear(){this.buffer=""}writable(){return this.stream===void 0&&(this.stream=this.createWritable()),this.stream}createWritable(){const e=this;return new WritableStream({write(r){e.add(r)},close(){e.clear()}})}addImpl(e){const r=e.indexOf(this.separator);if(r<0)return this.buffer+=e,"";const n=e.substring(0,r);try{this.onData(this.buffer+n),e=e.substring(n.length+this.separator.length)}catch(i){console.warn(i)}return this.buffer="",e}add(e){for(;e.length>0;)e=this.addImpl(e)}},iu=class{constructor(e,r=-1){this.onData=e,this.chunkSize=r,y(this,"paused",!1),y(this,"queue"),y(this,"writer"),y(this,"intervalMs"),y(this,"stream"),this.intervalMs=10,this.queue=Kr(),this.writer=Ea(()=>this.onWrite(),this.intervalMs)}clear(){this.queue=Kr()}writable(){return this.stream===void 0&&(this.stream=this.createWritable()),this.stream}createWritable(){const e=this;return new WritableStream({write(r){e.add(r)},close(){e.clear()}})}async onWrite(){if(this.queue.isEmpty)return!1;if(this.paused)return console.warn("WriteBuffer.onWrite: paused..."),!0;const e=this.queue.dequeue();return e===void 0?!1:(await this.onData(e),!0)}add(e){this.chunkSize>0?this.queue.enqueue(...Kc(e,this.chunkSize)):this.queue.enqueue(e),this.writer.start()}},Fd=async(e,r=5,n=200,i)=>{me(r,"positive","attempts"),me(n,"positive","startingTimeoutMs");let s=n,o=0;for(;r>0;){try{return await e()}catch{r--}if(o+=s,i&&i.cancel)throw new Error("Cancelled");if(await fr(s),i&&i.cancel)throw new Error("Cancelled");s*=2}throw new Error(`Retry failed after ${r} attempts over ${o} ms.`)},Kx=class extends jt{constructor(e,r){super();this.device=e,this.config=r,y(this,"states"),y(this,"codec"),y(this,"rx"),y(this,"tx"),y(this,"gatt"),y(this,"verboseLogging",!1),y(this,"rxBuffer"),y(this,"txBuffer"),this.verboseLogging=r.debug,this.txBuffer=new iu(async n=>{await this.writeInternal(n)},r.chunkSize),this.rxBuffer=new nu(n=>{this.fireEvent("data",{data:n})}),this.codec=new ru,this.states=new on("ready",{ready:"connecting",connecting:["connected","closed"],connected:["closed"],closed:"connecting"}),this.states.addEventListener("change",n=>{this.fireEvent("change",n),this.verbose(`${n.priorState} -> ${n.newState}`),n.priorState==="connected"&&(this.rxBuffer.clear(),this.txBuffer.clear())}),e.addEventListener("gattserverdisconnected",()=>{this.isClosed||(this.verbose("GATT server disconnected"),this.states.state="closed")}),this.verbose(`ctor ${e.name} ${e.id}`)}get isConnected(){return this.states.state==="connected"}get isClosed(){return this.states.state==="closed"}write(e){if(this.states.state!=="connected")throw new Error(`Cannot write while state is ${this.states.state}`);this.txBuffer.add(e)}async writeInternal(e){this.verbose(`writeInternal ${e}`);const r=this.tx;if(r===void 0)throw new Error("Unexpectedly without tx characteristic");try{await r.writeValue(this.codec.toBuffer(e))}catch(n){this.warn(n)}}disconnect(){this.states.state==="connected"&&this.gatt?.disconnect()}async connect(){const e=this.config.connectAttempts??3;this.states.state="connecting",this.verbose("connect");const r=this.device.gatt;if(r===void 0)throw new Error("Gatt not available on device");await Fd(async()=>{const n=await r.connect();this.verbose("Getting primary service");const i=await n.getPrimaryService(this.config.service);this.verbose("Getting characteristics");const s=await i.getCharacteristic(this.config.rxGattCharacteristic),o=await i.getCharacteristic(this.config.txGattCharacteristic);s.addEventListener("characteristicvaluechanged",a=>this.onRx(a)),this.rx=s,this.tx=o,this.gatt=r,this.states.state="connected",await s.startNotifications()},e,200)}onRx(e){if(this.rx===void 0)return;const n=e.target.value;if(n===void 0)return;let i=this.codec.fromBuffer(n.buffer);const s=In(i,19),o=In(i,17);o&&s<o&&(this.verbose("Tx plz start"),i=Rn(i,o,1),this.txBuffer.paused=!1),s&&s>o&&(this.verbose("Tx plz stop"),i=Rn(i,s,1),this.txBuffer.paused=!0),this.rxBuffer.add(i)}verbose(e){this.verboseLogging&&console.info(`${this.config.name} `,e)}log(e){console.log(`${this.config.name} `,e)}warn(e){console.warn(`${this.config.name} `,e)}},_s={chunkSize:20,service:"6e400001-b5a3-f393-e0a9-e50e24dcca9e",txGattCharacteristic:"6e400002-b5a3-f393-e0a9-e50e24dcca9e",rxGattCharacteristic:"6e400003-b5a3-f393-e0a9-e50e24dcca9e",name:"NordicDevice",connectAttempts:5,debug:!1},Pd=class extends Kx{constructor(e,r={}){super(e,{..._s,...r})}},Bd={};N(Bd,{AudioAnalyser:()=>Cs,basic:()=>Xx,freq:()=>Zx,peakLevel:()=>Qx});var Md={};N(Md,{default:()=>kd});var kd=class{constructor(e,r){y(this,"freqMaxRange",200),y(this,"audio"),y(this,"parent"),y(this,"lastPointer",{x:0,y:0}),y(this,"pointerDown",!1),y(this,"pointerClicking",!1),y(this,"pointerClickDelayMs",100),y(this,"pointerDelaying",!1),y(this,"waveTracker"),y(this,"freqTracker"),y(this,"el"),this.audio=r,this.parent=e,this.waveTracker=Mn(),this.freqTracker=Mn(),e.innerHTML=`
    <section>
      <button id="rendererComponentToggle">\u{1F53C}</button>
      <div>
        <h1>Visualiser</h1>
        <div style="display:flex; flex-wrap: wrap">
          <div class="visPanel">
            <h2>Frequency distribution</h2>
            <br />
            <canvas id="rendererComponentFreqData" height="200" width="400"></canvas>
          </div>
          <div class="visPanel">
            <h2>Waveform</h2>
            <button id="rendererComponentWaveReset">Reset</button>
            <div>
              Press and hold on wave to measure
            </div>
            <br />
            <canvas id="rendererComponentWaveData" height="200" width="400"></canvas>
          </div>
        </div>
      </div>
    </section>
    `,this.el=e.children[0],document.getElementById("rendererComponentToggle")?.addEventListener("click",()=>{this.setExpanded(!this.isExpanded())}),this.el.addEventListener("pointermove",n=>this.onPointer(n)),this.el.addEventListener("pointerup",()=>{this.pointerDelaying=!1,this.pointerDown=!1}),this.el.addEventListener("pointerdown",()=>{this.pointerDelaying=!0,setTimeout(()=>{this.pointerDelaying&&(this.pointerDelaying=!1,this.pointerDown=!0)},this.pointerClickDelayMs)}),this.el.addEventListener("pointerleave",()=>{this.pointerDelaying=!1,this.pointerDown=!1}),document.getElementById("rendererComponentWaveReset")?.addEventListener("click",()=>{this.clear()})}renderFreq(e){if(!this.isExpanded()||!e)return;const r=document.getElementById("rendererComponentFreqData");if(r===null)throw new Error("Cannot find canvas element");const n=r.getContext("2d");if(n===null)throw new Error("Cannot create drawing context");const i=e.length,s=r.clientWidth,o=r.clientHeight;n.clearRect(0,0,s,o);const a=this.getPointerRelativeTo(r),u=s/i,l=Qe.minMaxAvg(e);for(let c=0;c<i;c++){if(!Number.isFinite(e[c]))continue;const f=(e[c]-l.min)/this.freqMaxRange,d=Math.abs(o*f),v=o-d,m=c/i*360,x=c*u;if(n.fillStyle="hsl("+m+", 100%, 50%)",a.y>0&&a.y<=o&&a.x>=x&&a.x<=x+u){this.freqTracker.id!==c.toString()&&(this.freqTracker=Mn(c.toString())),this.freqTracker.seen(e[c]);const _=this.freqTracker.getMinMaxAvg();n.fillStyle="black",this.audio&&n.fillText(`Frequency (${c}) at pointer: ${this.audio.getFrequencyAtIndex(c).toLocaleString("en")} - ${this.audio.getFrequencyAtIndex(c+1).toLocaleString("en")}`,2,10),n.fillText(`Raw value: ${e[c].toFixed(2)}`,2,20),n.fillText(`Min: ${_.min.toFixed(2)}`,2,40),n.fillText(`Max: ${_.max.toFixed(2)}`,60,40),n.fillText(`Avg: ${_.avg.toFixed(2)}`,120,40)}n.fillRect(x,v,u,d)}}isExpanded(){const e=this.el.querySelector("div");if(e===null)throw new Error("contents div not found");return e.style.display===""}setExpanded(e){const r=this.el.querySelector("div"),n=this.el.querySelector("button");if(n===null)throw new Error("Button element not found");if(r===null)throw new Error("Contents element not found");e?(r.style.display="",n.innerText="\u{1F53C}"):(r.style.display="none",n.innerText="\u{1F53D}")}clear(){this.clearCanvas(document.getElementById("rendererComponentFreqData")),this.clearCanvas(document.getElementById("rendererComponentWaveData"))}clearCanvas(e){if(e===null)throw new Error("Canvas is null");const r=e.getContext("2d");if(r===null)throw new Error("Cannot create drawing context");r.fillStyle="white",r.fillRect(0,0,e.clientWidth,e.clientHeight)}renderWave(e,r=!0){if(!this.isExpanded()||!e)return;const n=document.getElementById("rendererComponentWaveData");if(n===null)throw new Error("Cannot find wave canvas");const i=n.getContext("2d");if(i===null)throw new Error("Cannot create drawing context for wave");const s=n.clientWidth,o=n.clientHeight,a=this.getPointerRelativeTo(n),u=20,l=60,c=e.length;i.fillStyle="white",i.fillRect(0,0,l,u);const h=s/c;i.fillStyle="rgba(255, 255, 255, 0.03)",i.fillRect(0,20,s,o),i.fillStyle="red",r?i.fillRect(0,o/2,s,1):i.fillRect(0,o-1,s,1),i.lineWidth=1,i.strokeStyle="black",i.beginPath();let f=0;for(let d=0;d<c;d++){const v=e[d]*o,m=r?o/2-v:o-v;d===0?i.moveTo(f,m):i.lineTo(f,m),f+=h,this.pointerDown&&this.waveTracker.seen(e[d])}if(i.lineTo(s,r?o/2:o),i.stroke(),this.pointerDown){const d=this.waveTracker.getMinMaxAvg();i.fillStyle="rgba(255,255,0,1)",i.fillRect(l,0,150,20),i.fillStyle="black",i.fillText("Min: "+d.min.toFixed(2),60,10),i.fillText("Max: "+d.max.toFixed(2),110,10),i.fillText("Avg: "+d.avg.toFixed(2),160,10)}else this.waveTracker.reset();a.y>0&&a.y<=o&&a.x>=0&&a.x<=s&&(i.fillStyle="black",i.fillText("Level: "+(1-a.y/o).toFixed(2),2,10))}getPointerRelativeTo(e){const r=e.getBoundingClientRect();return{x:this.lastPointer.x-r.left-window.scrollX,y:this.lastPointer.y-r.top-window.scrollY}}onPointer(e){this.lastPointer={x:e.pageX,y:e.pageY},e.preventDefault()}},Xx=(e,r={})=>new Cs((n,i)=>{const s=new Float32Array(n.frequencyBinCount),o=new Float32Array(n.fftSize);n.getFloatFrequencyData(s),n.getFloatTimeDomainData(o),e(s,o,i)},r),Zx=(e,r={})=>new Cs((n,i)=>{const s=new Float32Array(n.frequencyBinCount);n.getFloatFrequencyData(s),e(s,i)},r),Qx=(e,r={})=>new Cs((n,i)=>{const s=new Float32Array(n.fftSize);n.getFloatTimeDomainData(s),e(Qe.maxFast(s),i)},r),An,Pr,Cs=class{constructor(e,r={}){if(y(this,"showVis"),y(this,"fftSize"),y(this,"smoothingTimeConstant"),le(this,An,!1),y(this,"debug"),le(this,Pr,!1),y(this,"visualiser"),y(this,"audioCtx"),y(this,"analyserNode"),y(this,"analyse"),this.showVis=r.showVis??!1,this.fftSize=r.fftSize??1024,this.debug=r.debug??!1,this.smoothingTimeConstant=r.smoothingTimeConstant??.8,me(this.fftSize,"positive","opts.fftSize"),R(this.smoothingTimeConstant,"percentage","opts.smoothingTimeConstant"),!Zc(this.fftSize))throw new Error(`fftSize must be a power of two from 32 to 32768 (${this.fftSize})`);if(this.fftSize<32)throw new Error("fftSize must be at least 32");if(this.fftSize>32768)throw new Error("fftSize must be no greater than 32768");this.analyse=e,this.paused=!1,this.init();const n=document.getElementById("audio-visualiser");if(n){const i=new kd(n,this);i.setExpanded(this.showVis),this.visualiser=i}}init(){if(A(this,Pr)){this.debug&&console.debug("Init already in progress");return}Q(this,Pr,!0),navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{this.onMicSuccess(e)}).catch(e=>{Q(this,Pr,!1),console.error(e)})}get paused(){return A(this,An)}set paused(e){e!==A(this,An)&&(Q(this,An,e),e?this.debug&&console.log("Paused"):(this.debug&&console.log("Unpaused"),window.requestAnimationFrame(this.analyseLoop.bind(this))))}setup(e,r){const n=e.createAnalyser();return n.fftSize=this.fftSize,n.smoothingTimeConstant=this.smoothingTimeConstant,e.createMediaStreamSource(r).connect(n),n}onMicSuccess(e){try{const r=new AudioContext;r.addEventListener("statechange",()=>{this.debug&&console.log(`Audio context state: ${r.state}`)}),this.audioCtx=r,this.analyserNode=this.setup(r,e),window.requestAnimationFrame(this.analyseLoop.bind(this))}catch(r){Q(this,Pr,!1),console.error(r)}}analyseLoop(){if(this.paused){this.debug&&console.log("Paused");return}const e=this.analyserNode;if(e===void 0){console.warn("Analyser undefined");return}try{this.analyse(e,this)}catch(r){console.error(r)}window.requestAnimationFrame(this.analyseLoop.bind(this))}getFrequencyRangeMax(e,r,n){const i=this.sliceByFrequency(e,r,n);return Qe.max(i)}sliceByFrequency(e,r,n){const i=this.getIndexForFrequency(e),s=this.getIndexForFrequency(r);return n.slice(i,s)}getFrequencyAtIndex(e){const r=this.analyserNode,n=this.audioCtx;if(r===void 0)throw new Error("Analyser not available");if(n===void 0)throw new Error("Audio context not available");if(me(e,"positive","index"),e>r.frequencyBinCount)throw new Error(`Index ${e} exceeds frequency bin count ${r.frequencyBinCount}`);return e*n.sampleRate/(r.frequencyBinCount*2)}getIndexForFrequency(e){const r=this.analyserNode;if(r===void 0)throw new Error("Analyser not available");const n=r.context.sampleRate/2,i=Math.round(e/n*r.frequencyBinCount);return i<0?0:i>=r.frequencyBinCount?r.frequencyBinCount-1:i}};An=new WeakMap;Pr=new WeakMap;var Nd={};N(Nd,{EspruinoBleDevice:()=>su,EspruinoSerialDevice:()=>Id,connectBle:()=>nD,deviceEval:()=>ou,puck:()=>tD,serial:()=>rD});var su=class extends Pd{constructor(e,r={}){super(e,r);y(this,"evalTimeoutMs"),y(this,"evalReplyBluetooth",!0),this.evalTimeoutMs=r.evalTimeoutMs??5*1e3}async writeScript(e){this.write(`reset();
`),this.write(`${e}
`)}async eval(e,r={}){return ou(e,r,this,"Bluetooth.println",!1,n=>{this.warn(n)})}},Td={};N(Td,{Device:()=>zd});var eD=class extends jt{constructor(e={}){super();y(this,"states"),y(this,"codec"),y(this,"verboseLogging",!1),y(this,"name"),y(this,"connectAttempts"),y(this,"chunkSize"),y(this,"rxBuffer"),y(this,"txBuffer"),this.verboseLogging=e.debug??!1,this.chunkSize=e.chunkSize??1024,this.connectAttempts=e.connectAttempts??3,this.name=e.name??"JsonDevice",this.txBuffer=new iu(async r=>{await this.writeInternal(r)},e.chunkSize),this.rxBuffer=new nu(r=>{this.fireEvent("data",{data:r})}),this.codec=new ru,this.states=new on("ready",{ready:"connecting",connecting:["connected","closed"],connected:["closed"],closed:"connecting"}),this.states.addEventListener("change",r=>{this.fireEvent("change",r),this.verbose(`${r.priorState} -> ${r.newState}`),r.priorState==="connected"&&(this.rxBuffer.clear(),this.txBuffer.clear())})}get isConnected(){return this.states.state==="connected"}get isClosed(){return this.states.state==="closed"}write(e){if(this.states.state!=="connected")throw new Error(`Cannot write while state is ${this.states.state}`);this.txBuffer.add(e)}close(){this.states.state==="connected"&&this.onClosed()}async connect(){const e=this.connectAttempts;this.states.state="connecting",await this.onPreConnect(),await Fd(async()=>{await this.onConnectAttempt(),this.states.state="connected"},e,200)}onRx(e){const r=e.target.value;if(r===void 0)return;let n=this.codec.fromBuffer(r.buffer);const i=In(n,19),s=In(n,17);s&&i<s&&(this.verbose("Tx plz start"),n=Rn(n,s,1),this.txBuffer.paused=!1),i&&i>s&&(this.verbose("Tx plz stop"),n=Rn(n,i,1),this.txBuffer.paused=!0),this.rxBuffer.add(n)}verbose(e){this.verboseLogging&&console.info(`${this.name} `,e)}log(e){console.log(`${this.name} `,e)}warn(e){console.warn(`${this.name} `,e)}},zd=class extends eD{constructor(e={}){super(e);this.config=e,y(this,"port"),y(this,"tx"),y(this,"baudRate");const r=e.eol??`\r
`;this.baudRate=e.baudRate??9600,e.name===void 0&&(super.name="Serial.Device"),this.rxBuffer.separator=r}async writeInternal(e){if(this.tx===void 0)throw new Error("tx not ready");try{this.tx.write(e)}catch(r){this.warn(r)}}onClosed(){try{this.port?.close()}catch(e){this.warn(e)}this.states.state="closed"}onPreConnect(){return Promise.resolve()}async onConnectAttempt(){let e={};const r={baudRate:this.baudRate};this.config.filters&&(e={filters:[...this.config.filters]}),this.port=await navigator.serial.requestPort(e),this.port.addEventListener("disconnect",a=>{this.close()}),await this.port.open(r);const n=this.port.writable,i=new TextEncoderStream;n!==null&&(i.readable.pipeTo(n),this.tx=i.writable.getWriter());const s=this.port.readable,o=new TextDecoderStream;s!==null&&(s.pipeTo(o.writable),o.readable.pipeTo(this.rxBuffer.writable()))}},Id=class extends zd{constructor(e){super(e);y(this,"evalTimeoutMs"),y(this,"evalReplyBluetooth",!1),e===void 0&&(e={}),this.evalTimeoutMs=e.evalTimeoutMs??5*1e3}disconnect(){super.close()}async writeScript(e){this.write(`reset();
`),this.write(`${e}
`)}async eval(e,r={}){return ou(e,r,this,"console.log",!0,n=>{this.warn(n)})}},tD=async(e={})=>{const r=e.name??"Puck",n=e.debug??!1,i=await navigator.bluetooth.requestDevice({filters:Rd(e),optionalServices:[_s.service]});console.log(i.name);const s=new su(i,{name:r,debug:n});return await s.connect(),s},rD=async(e={})=>{const r=new Id(e);return await r.connect(),r},Rd=e=>{const r=[];return e.filters?r.push(...e.filters):e.name?(r.push({name:e.name}),console.info(`Filtering Bluetooth devices by name '${e.name}'`)):r.push({namePrefix:"Puck.js"}),r},nD=async(e={})=>{const r=await navigator.bluetooth.requestDevice({filters:Rd(e),optionalServices:[_s.service]}),n=new su(r,{name:"Espruino"});return await n.connect(),n},ou=async(e,r={},n,i,s,o)=>{const a=r.timeoutMs??n.evalTimeoutMs,u=r.assumeExclusive??!0;if(typeof e!="string")throw new Error("code parameter should be a string");return new Promise((l,c)=>{const h=av(5),f=x=>{try{const _=JSON.parse(x.data);"reply"in _&&(_.reply===h?(v(),"result"in _&&l(_.result)):o(`Expected reply ${h}, got ${_.reply}`))}catch(_){u?v(x.data):o(_)}},d=x=>{x.newState!=="connected"&&v(`State changed to '${x.newState}', aborting`)};n.addEventListener("data",f),n.addEventListener("change",d);const v=Aa(a,x=>{c(x)},()=>{n.removeEventListener("data",f),n.removeEventListener("change",d)}),m=`${i}(JSON.stringify({reply:"${h}", result:JSON.stringify(${e})}))
`;s&&o(m),n.write(m)})},Ld={};N(Ld,{dumpDevices:()=>iD,start:()=>Od});var iD=async(e="videoinput")=>{(await navigator.mediaDevices.enumerateDevices()).forEach(n=>{n.kind===e&&(console.log(n.label),console.log(` Kind: ${n.kind}`),console.log(` Device id: ${n.deviceId}`))})},sD=1e4,Od=async(e={})=>{const r=document.createElement("VIDEO");r.style.display="none",r.classList.add("ixfx-camera"),document.body.appendChild(r);let n=()=>{};const i=()=>{try{n()}catch{}r.remove()};try{return n=(await oD(r,e)).dispose,{videoEl:r,dispose:i}}catch(s){throw console.error(s),i(),s}},oD=async(e,r={})=>{if(e===void 0)throw new Error("videoEl undefined");if(e===null)throw new Error("videoEl null");const n=r.max,i=r.min,s=r.ideal,o={audio:!1,video:{width:{},height:{}}};r.facingMode==="front"&&(r={...r,facingMode:"user"}),r.facingMode==="back"&&(r={...r,facingMode:"environment"}),r.facingMode&&(o.video.facingMode=r.facingMode),r.deviceId&&(o.video.deviceId=r.deviceId),s&&(o.video.width={...o.video.width,ideal:s.width},o.video.height={...o.video.height,ideal:s.height}),n&&(o.video.width={...o.video.width,max:n.width},o.video.height={...o.video.height,max:n.height}),i&&(o.video.width={...o.video.width,min:i.width},o.video.height={...o.video.height,min:i.height});const a=Aa(r.startTimeoutMs??sD,u=>{throw new Error(`Camera getUserMedia failed: ${u}`)});try{const u=await navigator.mediaDevices.getUserMedia(o),l=()=>{e.pause(),u.getTracks().forEach(d=>d.stop())};e.srcObject=u,a();const c={videoEl:e,dispose:l};return new Promise((f,d)=>{e.addEventListener("loadedmetadata",()=>{e.play().then(()=>{f(c)}).catch(v=>{d(v)})})})}catch(u){throw a(u.toString()),u}},au={};N(au,{capture:()=>uD,frames:()=>aD,manualCapture:()=>jd});async function*aD(e,r={}){const n=r.maxIntervalMs??0,i=r.showCanvas??!1;let s=r.canvasEl,o,a;o=a=0,s===void 0&&(s=document.createElement("CANVAS"),s.classList.add("ixfx-frames"),i||(s.style.display="none"),document.body.appendChild(s));const u=()=>{s!==void 0&&(o=e.videoWidth,a=e.videoHeight,s.width=o,s.height=a)};let l=null;const c=ma(n);for await(const h of c){if((o===0||a===0)&&u(),o===0||a===0)continue;if(l===null&&(l=s.getContext("2d")),l===null)return;l.drawImage(e,0,0,o,a),yield l.getImageData(0,0,o,a)}}var uD=(e,r={})=>{const n=r.maxIntervalMs??0,i=r.showCanvas??!1,s=r.onFrame,o=e.videoWidth,a=e.videoHeight,u=document.createElement("CANVAS");u.classList.add("ixfx-capture"),i||(u.style.display="none"),u.width=o,u.height=a;let l=null,c;r.workerScript&&(c=new Worker(r.workerScript));const h=c||s;!h&&!i&&console.warn("Video will be captured to hidden element without any processing. Is this what you want?");const f=Ea(()=>{if(l===null&&(l=u.getContext("2d")),l===null)return;l.drawImage(e,0,0,o,a);let d;if(h&&(d=l.getImageData(0,0,o,a)),c&&c.postMessage({pixels:d.data.buffer,width:o,height:a,channels:4},[d.data.buffer]),s)try{s(d)}catch(v){console.error(v)}},n);return{start:()=>f.start(),cancel:()=>f.cancel(),canvasEl:u}},jd=(e,r={})=>{const n=r.showCanvas??!1,i=e.videoWidth,s=e.videoHeight,o=r.canvasEl!==void 0;let a=r.canvasEl;return a||(a=document.createElement("CANVAS"),a.classList.add("ixfx-capture"),document.body.append(a),n||(a.style.display="none")),a.width=i,a.height=s,{canvasEl:a,capture:()=>{let h;if(h||(h=a?.getContext("2d")),!h)throw new Error("Could not create graphics context");h.drawImage(e,0,0,i,s);const f=h.getImageData(0,0,i,s);return f.currentTime=e.currentTime,r.postCaptureDraw&&r.postCaptureDraw(h,i,s),f},dispose:()=>{if(!o)try{a?.remove()}catch{}}}},lD=class{constructor(e={}){y(this,"_source"),y(this,"_state"),y(this,"_teardownNeeded",!1),y(this,"_cameraConstraints"),y(this,"_cameraStartResult"),y(this,"_cameraCapture"),y(this,"_showCanvas"),y(this,"_showPreview"),y(this,"_postCaptureDraw"),y(this,"_timer"),y(this,"_captureCanvasEl"),this._state="ready",this._source="",this._timer=performance.now(),this._showCanvas=e.showCanvas??!1,this._showPreview=e.showPreview??!1,this._cameraConstraints=e.cameraConstraints??void 0,this._captureCanvasEl=e.captureCanvasEl??void 0,this._postCaptureDraw=e.postCaptureDraw}showPreview(e){if(this._state==="disposed")throw new Error("Disposed");let r;switch(this._source){case"camera":r=this._cameraStartResult?.videoEl,r!==void 0&&(r.style.display=e?"block":"none");break}this._showPreview=e}showCanvas(e){if(this._state==="disposed")throw new Error("Disposed");let r;switch(this._source){case"camera":r=this._cameraCapture?.canvasEl,r!==void 0&&(r.style.display=e?"block":"none");break}this._showCanvas=e}getCapturer(){if(this._state==="disposed")throw new Error("Disposed");switch(this._source){case"camera":return this._cameraCapture}}async useCamera(e){if(this._state==="disposed")throw new Error("Disposed");this._source="camera",this._teardownNeeded&&this.teardown(),e&&this._cameraConstraints,await this.init()}async initCamera(){const e=await Od(this._cameraConstraints);if(e===void 0)throw new Error("Could not start camera");this._showPreview&&(e.videoEl.style.display="block"),this._cameraCapture=jd(e.videoEl,{postCaptureDraw:this._postCaptureDraw,showCanvas:this._showCanvas,canvasEl:this._captureCanvasEl}),this._cameraStartResult=e,this._teardownNeeded=!0,this._cameraStartResult=e}dispose(){this._state!=="disposed"&&(this.teardown(),this._state="disposed")}async init(){switch(this._timer=performance.now(),this._source){case"camera":await this.initCamera();break}this._state="initialised"}teardown(){if(!!this._teardownNeeded){switch(this._source){case"camera":this._cameraCapture?.dispose(),this._cameraStartResult?.dispose();break}this._teardownNeeded=!1}}getFrame(){if(this._state==="disposed")throw new Error("Disposed");switch(this._source){case"camera":return this.getFrameCamera()}}getTimestamp(){return performance.now()-this._timer}getFrameCamera(){return this._cameraCapture?.capture()}},cD={};N(cD,{Colour:()=>ti,Drawing:()=>$s,Palette:()=>Au,Plot:()=>xu,Plot2:()=>bu,SceneGraph:()=>Eu,Svg:()=>mu,Video:()=>au});var $s={};N($s,{arc:()=>u0,bezier:()=>h0,circle:()=>l0,connectedPoints:()=>Ps,copyToImg:()=>rb,dot:()=>Xe,drawingStack:()=>Nr,ellipse:()=>eb,getCtx:()=>a0,line:()=>yu,lineThroughPoints:()=>QD,makeHelper:()=>KD,paths:()=>c0,pointLabels:()=>Bs,rect:()=>d0,textBlock:()=>v0,textBlockAligned:()=>sb,textWidth:()=>Tr,translatePoint:()=>tb,triangle:()=>ib});var ti={};N(ti,{getCssVariable:()=>i0,goldenAngleColour:()=>HD,interpolate:()=>VD,opacity:()=>Un,randomHue:()=>du,scale:()=>WD,toHex:()=>UD,toHsl:()=>qD,toRgb:()=>n0});function an(e,r,n){e.prototype=r.prototype=n,n.constructor=e}function ri(e,r){var n=Object.create(e.prototype);for(var i in r)n[i]=r[i];return n}function Wt(){}var vr=.7,Zr=1/vr,Or="\\s*([+-]?\\d+)\\s*",qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hD=/^#([0-9a-f]{3,8})$/,fD=new RegExp(`^rgb\\(${Or},${Or},${Or}\\)$`),dD=new RegExp(`^rgb\\(${it},${it},${it}\\)$`),vD=new RegExp(`^rgba\\(${Or},${Or},${Or},${qn}\\)$`),pD=new RegExp(`^rgba\\(${it},${it},${it},${qn}\\)$`),yD=new RegExp(`^hsl\\(${qn},${it},${it}\\)$`),mD=new RegExp(`^hsla\\(${qn},${it},${it},${qn}\\)$`),zl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};an(Wt,Qr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Il,formatHex:Il,formatHex8:gD,formatHsl:wD,formatRgb:Rl,toString:Rl});function Il(){return this.rgb().formatHex()}function gD(){return this.rgb().formatHex8()}function wD(){return qd(this).formatHsl()}function Rl(){return this.rgb().formatRgb()}function Qr(e){var r,n;return e=(e+"").trim().toLowerCase(),(r=hD.exec(e))?(n=r[1].length,r=parseInt(r[1],16),n===6?Ll(r):n===3?new Ee(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?vi(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?vi(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=fD.exec(e))?new Ee(r[1],r[2],r[3],1):(r=dD.exec(e))?new Ee(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=vD.exec(e))?vi(r[1],r[2],r[3],r[4]):(r=pD.exec(e))?vi(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=yD.exec(e))?ql(r[1],r[2]/100,r[3]/100,1):(r=mD.exec(e))?ql(r[1],r[2]/100,r[3]/100,r[4]):zl.hasOwnProperty(e)?Ll(zl[e]):e==="transparent"?new Ee(NaN,NaN,NaN,0):null}function Ll(e){return new Ee(e>>16&255,e>>8&255,e&255,1)}function vi(e,r,n,i){return i<=0&&(e=r=n=NaN),new Ee(e,r,n,i)}function uu(e){return e instanceof Wt||(e=Qr(e)),e?(e=e.rgb(),new Ee(e.r,e.g,e.b,e.opacity)):new Ee}function Yi(e,r,n,i){return arguments.length===1?uu(e):new Ee(e,r,n,i??1)}function Ee(e,r,n,i){this.r=+e,this.g=+r,this.b=+n,this.opacity=+i}an(Ee,Yi,ri(Wt,{brighter(e){return e=e==null?Zr:Math.pow(Zr,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new Ee(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ee(ur(this.r),ur(this.g),ur(this.b),Ki(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ol,formatHex:Ol,formatHex8:xD,formatRgb:jl,toString:jl}));function Ol(){return`#${sr(this.r)}${sr(this.g)}${sr(this.b)}`}function xD(){return`#${sr(this.r)}${sr(this.g)}${sr(this.b)}${sr((isNaN(this.opacity)?1:this.opacity)*255)}`}function jl(){const e=Ki(this.opacity);return`${e===1?"rgb(":"rgba("}${ur(this.r)}, ${ur(this.g)}, ${ur(this.b)}${e===1?")":`, ${e})`}`}function Ki(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ur(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sr(e){return e=ur(e),(e<16?"0":"")+e.toString(16)}function ql(e,r,n,i){return i<=0?e=r=n=NaN:n<=0||n>=1?e=r=NaN:r<=0&&(e=NaN),new Ke(e,r,n,i)}function qd(e){if(e instanceof Ke)return new Ke(e.h,e.s,e.l,e.opacity);if(e instanceof Wt||(e=Qr(e)),!e)return new Ke;if(e instanceof Ke)return e;e=e.rgb();var r=e.r/255,n=e.g/255,i=e.b/255,s=Math.min(r,n,i),o=Math.max(r,n,i),a=NaN,u=o-s,l=(o+s)/2;return u?(r===o?a=(n-i)/u+(n<i)*6:n===o?a=(i-r)/u+2:a=(r-n)/u+4,u/=l<.5?o+s:2-o-s,a*=60):u=l>0&&l<1?0:a,new Ke(a,u,l,e.opacity)}function Xi(e,r,n,i){return arguments.length===1?qd(e):new Ke(e,r,n,i??1)}function Ke(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}an(Ke,Xi,ri(Wt,{brighter(e){return e=e==null?Zr:Math.pow(Zr,e),new Ke(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new Ke(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,s=2*n-i;return new Ee(eo(e>=240?e-240:e+120,s,i),eo(e,s,i),eo(e<120?e+240:e-120,s,i),this.opacity)},clamp(){return new Ke(Hl(this.h),pi(this.s),pi(this.l),Ki(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ki(this.opacity);return`${e===1?"hsl(":"hsla("}${Hl(this.h)}, ${pi(this.s)*100}%, ${pi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Hl(e){return e=(e||0)%360,e<0?e+360:e}function pi(e){return Math.max(0,Math.min(1,e||0))}function eo(e,r,n){return(e<60?r+(n-r)*e/60:e<180?n:e<240?r+(n-r)*(240-e)/60:r)*255}var Hd=Math.PI/180,Ud=180/Math.PI,Zi=18,Vd=.96422,Wd=1,Gd=.82521,Jd=4/29,jr=6/29,Yd=3*jr*jr,DD=jr*jr*jr;function Kd(e){if(e instanceof st)return new st(e.l,e.a,e.b,e.opacity);if(e instanceof wt)return Xd(e);e instanceof Ee||(e=uu(e));var r=io(e.r),n=io(e.g),i=io(e.b),s=to((.2225045*r+.7168786*n+.0606169*i)/Wd),o,a;return r===n&&n===i?o=a=s:(o=to((.4360747*r+.3850649*n+.1430804*i)/Vd),a=to((.0139322*r+.0971045*n+.7141733*i)/Gd)),new st(116*s-16,500*(o-s),200*(s-a),e.opacity)}function qo(e,r,n,i){return arguments.length===1?Kd(e):new st(e,r,n,i??1)}function st(e,r,n,i){this.l=+e,this.a=+r,this.b=+n,this.opacity=+i}an(st,qo,ri(Wt,{brighter(e){return new st(this.l+Zi*(e??1),this.a,this.b,this.opacity)},darker(e){return new st(this.l-Zi*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,r=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return r=Vd*ro(r),e=Wd*ro(e),n=Gd*ro(n),new Ee(no(3.1338561*r-1.6168667*e-.4906146*n),no(-.9787684*r+1.9161415*e+.033454*n),no(.0719453*r-.2289914*e+1.4052427*n),this.opacity)}}));function to(e){return e>DD?Math.pow(e,1/3):e/Yd+Jd}function ro(e){return e>jr?e*e*e:Yd*(e-Jd)}function no(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function io(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bD(e){if(e instanceof wt)return new wt(e.h,e.c,e.l,e.opacity);if(e instanceof st||(e=Kd(e)),e.a===0&&e.b===0)return new wt(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var r=Math.atan2(e.b,e.a)*Ud;return new wt(r<0?r+360:r,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ho(e,r,n,i){return arguments.length===1?bD(e):new wt(e,r,n,i??1)}function wt(e,r,n,i){this.h=+e,this.c=+r,this.l=+n,this.opacity=+i}function Xd(e){if(isNaN(e.h))return new st(e.l,0,0,e.opacity);var r=e.h*Hd;return new st(e.l,Math.cos(r)*e.c,Math.sin(r)*e.c,e.opacity)}an(wt,Ho,ri(Wt,{brighter(e){return new wt(this.h,this.c,this.l+Zi*(e??1),this.opacity)},darker(e){return new wt(this.h,this.c,this.l-Zi*(e??1),this.opacity)},rgb(){return Xd(this).rgb()}}));var Zd=-.14861,lu=1.78277,cu=-.29227,Ss=-.90649,Hn=1.97294,Ul=Hn*Ss,Vl=Hn*lu,Wl=lu*cu-Ss*Zd;function ED(e){if(e instanceof lr)return new lr(e.h,e.s,e.l,e.opacity);e instanceof Ee||(e=uu(e));var r=e.r/255,n=e.g/255,i=e.b/255,s=(Wl*i+Ul*r-Vl*n)/(Wl+Ul-Vl),o=i-s,a=(Hn*(n-s)-cu*o)/Ss,u=Math.sqrt(a*a+o*o)/(Hn*s*(1-s)),l=u?Math.atan2(a,o)*Ud-120:NaN;return new lr(l<0?l+360:l,u,s,e.opacity)}function Uo(e,r,n,i){return arguments.length===1?ED(e):new lr(e,r,n,i??1)}function lr(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}an(lr,Uo,ri(Wt,{brighter(e){return e=e==null?Zr:Math.pow(Zr,e),new lr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new lr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Hd,r=+this.l,n=isNaN(this.s)?0:this.s*r*(1-r),i=Math.cos(e),s=Math.sin(e);return new Ee(255*(r+n*(Zd*i+lu*s)),255*(r+n*(cu*i+Ss*s)),255*(r+n*(Hn*i)),this.opacity)}}));var Fs=e=>()=>e;function Qd(e,r){return function(n){return e+n*r}}function AD(e,r,n){return e=Math.pow(e,n),r=Math.pow(r,n)-e,n=1/n,function(i){return Math.pow(e+i*r,n)}}function hu(e,r){var n=r-e;return n?Qd(e,n>180||n<-180?n-360*Math.round(n/360):n):Fs(isNaN(e)?r:e)}function _D(e){return(e=+e)==1?Ae:function(r,n){return n-r?AD(r,n,e):Fs(isNaN(r)?n:r)}}function Ae(e,r){var n=r-e;return n?Qd(e,n):Fs(isNaN(e)?r:e)}var Qi=function e(r){var n=_D(r);function i(s,o){var a=n((s=Yi(s)).r,(o=Yi(o)).r),u=n(s.g,o.g),l=n(s.b,o.b),c=Ae(s.opacity,o.opacity);return function(h){return s.r=a(h),s.g=u(h),s.b=l(h),s.opacity=c(h),s+""}}return i.gamma=e,i}(1);function CD(e,r){r||(r=[]);var n=e?Math.min(r.length,e.length):0,i=r.slice(),s;return function(o){for(s=0;s<n;++s)i[s]=e[s]*(1-o)+r[s]*o;return i}}function $D(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function SD(e,r){var n=r?r.length:0,i=e?Math.min(n,e.length):0,s=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)s[a]=fu(e[a],r[a]);for(;a<n;++a)o[a]=r[a];return function(u){for(a=0;a<i;++a)o[a]=s[a](u);return o}}function FD(e,r){var n=new Date;return e=+e,r=+r,function(i){return n.setTime(e*(1-i)+r*i),n}}function Vo(e,r){return e=+e,r=+r,function(n){return e*(1-n)+r*n}}function PD(e,r){var n={},i={},s;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(s in r)s in e?n[s]=fu(e[s],r[s]):i[s]=r[s];return function(o){for(s in n)i[s]=n[s](o);return i}}var Wo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,so=new RegExp(Wo.source,"g");function BD(e){return function(){return e}}function MD(e){return function(r){return e(r)+""}}function kD(e,r){var n=Wo.lastIndex=so.lastIndex=0,i,s,o,a=-1,u=[],l=[];for(e=e+"",r=r+"";(i=Wo.exec(e))&&(s=so.exec(r));)(o=s.index)>n&&(o=r.slice(n,o),u[a]?u[a]+=o:u[++a]=o),(i=i[0])===(s=s[0])?u[a]?u[a]+=s:u[++a]=s:(u[++a]=null,l.push({i:a,x:Vo(i,s)})),n=so.lastIndex;return n<r.length&&(o=r.slice(n),u[a]?u[a]+=o:u[++a]=o),u.length<2?l[0]?MD(l[0].x):BD(r):(r=l.length,function(c){for(var h=0,f;h<r;++h)u[(f=l[h]).i]=f.x(c);return u.join("")})}function fu(e,r){var n=typeof r,i;return r==null||n==="boolean"?Fs(r):(n==="number"?Vo:n==="string"?(i=Qr(r))?(r=i,Qi):kD:r instanceof Qr?Qi:r instanceof Date?FD:$D(r)?CD:Array.isArray(r)?SD:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?PD:Vo)(e,r)}function e0(e){return function(r,n){var i=e((r=Xi(r)).h,(n=Xi(n)).h),s=Ae(r.s,n.s),o=Ae(r.l,n.l),a=Ae(r.opacity,n.opacity);return function(u){return r.h=i(u),r.s=s(u),r.l=o(u),r.opacity=a(u),r+""}}}var ND=e0(hu),TD=e0(Ae);function zD(e,r){var n=Ae((e=qo(e)).l,(r=qo(r)).l),i=Ae(e.a,r.a),s=Ae(e.b,r.b),o=Ae(e.opacity,r.opacity);return function(a){return e.l=n(a),e.a=i(a),e.b=s(a),e.opacity=o(a),e+""}}function t0(e){return function(r,n){var i=e((r=Ho(r)).h,(n=Ho(n)).h),s=Ae(r.c,n.c),o=Ae(r.l,n.l),a=Ae(r.opacity,n.opacity);return function(u){return r.h=i(u),r.c=s(u),r.l=o(u),r.opacity=a(u),r+""}}}var ID=t0(hu),RD=t0(Ae);function r0(e){return function r(n){n=+n;function i(s,o){var a=e((s=Uo(s)).h,(o=Uo(o)).h),u=Ae(s.s,o.s),l=Ae(s.l,o.l),c=Ae(s.opacity,o.opacity);return function(h){return s.h=a(h),s.s=u(h),s.l=l(Math.pow(h,n)),s.opacity=c(h),s+""}}return i.gamma=r,i}(1)}var LD=r0(hu),OD=r0(Ae);function jD(e,r){r===void 0&&(r=e,e=fu);for(var n=0,i=r.length-1,s=r[0],o=new Array(i<0?0:i);n<i;)o[n]=e(s,s=r[++n]);return function(a){var u=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[u](a-u)}}var qD=e=>{const r=n0(e),n=YD(r.r,r.b,r.g);return r.opacity?{...n,opacity:r.opacity}:n},HD=(e,r=.5,n=.75,i=1)=>{R(e,"positive","index"),R(r,"percentage","saturation"),R(n,"percentage","lightness"),R(i,"percentage","alpha");const s=e*137.508;if(i===1)return`hsl(${s},${r*100}%,${n*100}%)`},du=(e=et)=>e()*360,n0=e=>{const r=vu(e),n=r.rgb();return r.opacity<1?{r:n.r,g:n.g,b:n.b,opacity:r.opacity}:{r:n.r,g:n.g,b:n.b}},vu=e=>{if(typeof e=="string"){const r=Qr(e);if(r!==null)return r}else{if(GD(e))return Xi(e.h,e.s,e.l);if(JD(e))return Yi(e.r,e.g,e.b)}throw new Error(`Could not resolve colour ${JSON.stringify(e)}`)},UD=e=>vu(e).formatHex(),Un=(e,r)=>{const n=vu(e);return n.opacity*=r,n.toString()},i0=(e,r="black",n)=>{n===void 0&&(n=document.body);const i=getComputedStyle(n).getPropertyValue(`--${e}`).trim();return i===void 0||i.length===0?r:i},VD=(e,r,n,i)=>{if(R(e,"percentage","amount"),typeof r!="string")throw new Error("Expected string for 'from' param");if(typeof n!="string")throw new Error("Expected string for 'to' param");let s;typeof i>"u"?s={}:typeof i=="string"?s={space:i}:s=i;const o=s0(s,[r,n]);if(o===void 0)throw new Error("Could not handle colour/space");return o(e)},s0=(e,r)=>{if(!Array.isArray(r))throw new Error("Expected one or more colours as parameters");let n;if(typeof e>"u"?n={}:typeof e=="string"?n={space:e}:n=e,!Array.isArray(r))throw new Error("Expected array for colours parameter");if(r.length<2)throw new Error("Interpolation expects at least two colours");const{space:i="rgb",long:s=!1}=n;let o;switch(i){case"lab":o=zD;break;case"hsl":o=s?TD:ND;break;case"hcl":o=s?RD:ID;break;case"cubehelix":o=s?OD:LD;break;case"rgb":o=Qi;default:o=Qi}return n.gamma&&(i==="rgb"||i==="cubehelix")&&(o=o.gamma(n.gamma)),r.length>2?jD(o,r):o(r[0],r[1])},WD=(e,r,...n)=>{if(R(e,"aboveZero","steps"),!Array.isArray(n))throw new Error("Expected one or more colours as parameters");const i=s0(r,n);if(i===void 0)throw new Error("Could not handle colour/space");const s=1/(e-1),o=[];let a=0;for(let u=0;u<e;u++)o.push(i(a)),a+=s,a>1&&(a=1);return o},GD=e=>!(e.h===void 0||e.s===void 0||e.l===void 0),JD=e=>!(e.r===void 0||e.g===void 0||e.b===void 0),YD=(e,r,n)=>{e/=255,r/=255,n/=255;var i=Math.min(e,r,n),s=Math.max(e,r,n),o=s-i,a,u,l;return a=0,s===i?a=0:e===s?a=(r-n)/o:r===s?a=2+(n-e)/o:n===s&&(a=4+(e-r)/o),a=Math.min(a*60,360),a<0&&(a+=360),l=(i+s)/2,s===i?u=0:l<=.5?u=o/(s+i):u=o/(2-s-i),{h:a,s:u,l}},o0=Math.PI*2,a0=e=>{if(e===null)throw Error("canvasElCtxOrQuery null. Must be a 2d drawing context or Canvas element");if(e===void 0)throw Error("canvasElCtxOrQuery undefined. Must be a 2d drawing context or Canvas element");const r=e instanceof CanvasRenderingContext2D?e:e instanceof HTMLCanvasElement?e.getContext("2d"):typeof e=="string"?Ce(e).getContext("2d"):e;if(r===null)throw new Error("Could not create 2d context for canvas");return r},KD=(e,r)=>{const n=a0(e);return{paths(i,s){c0(n,i,s)},line(i,s){yu(n,i,s)},rect(i,s){d0(n,i,s)},bezier(i,s){h0(n,i,s)},connectedPoints(i,s){Ps(n,i,s)},pointLabels(i,s){Bs(n,i,s)},dot(i,s){Xe(n,i,s)},circle(i,s){l0(n,i,s)},arc(i,s){u0(n,i,s)},textBlock(i,s){s.bounds===void 0&&r!==void 0&&(s={...s,bounds:{...r,x:0,y:0}}),v0(n,i,s)}}},pu=e=>XD(e.strokeStyle,e.fillStyle),Te=(e,r={},...n)=>{if(e===void 0)throw Error("ctx undefined");const i=Nr(e).push(pu(r),...n);return i.apply(),i},u0=(e,r,n={})=>{Te(e,n);const i=s=>{e.beginPath(),e.arc(s.x,s.y,s.radius,s.startRadian,s.endRadian),e.stroke()};Array.isArray(r)?r.forEach(i):i(r)},XD=(e,r)=>i=>{r&&(i.fillStyle=r),e&&(i.strokeStyle=e)},ZD=(e,r,n)=>s=>{e&&(s.lineWidth=e),r&&(s.lineJoin=r),n&&(s.lineCap=n)},Nr=(e,r)=>(r===void 0&&(r=Ui()),{push:(...o)=>{r===void 0&&(r=Ui());const a=r.push(...o);return o.forEach(u=>u(e)),Nr(e,a)},pop:()=>{const o=r?.pop();return Nr(e,o)},apply:()=>r===void 0?Nr(e):(r.forEach(o=>o(e)),Nr(e,r))}),QD=(e,r,n)=>{Te(e,n),e.moveTo(r[0].x,r[0].y),r.forEach((i,s)=>{if(s+2>=r.length)return;const o=r[s+1],a={x:(i.x+o.x)/2,y:(i.y+o.y)/2},u=(a.x+i.x)/2,l=(a.x+o.x)/2;e.quadraticCurveTo(u,o.y,a.x,a.y),e.quadraticCurveTo(l,o.y,o.x,o.y)})},l0=(e,r,n={})=>{Te(e,n);const i=s=>{e.beginPath(),e.arc(s.x,s.y,s.radius,0,o0),n.strokeStyle&&e.stroke(),n.fillStyle&&e.fill()};Array.isArray(r)?r.forEach(i):i(r)},eb=(e,r,n={})=>{Te(e,n);const i=s=>{e.beginPath();const o=s.rotation??0,a=s.startAngle??0,u=s.endAngle??o0;e.ellipse(s.x,s.y,s.radiusX,s.radiusY,o,a,u),n.strokeStyle&&e.stroke(),n.fillStyle&&e.fill()};Array.isArray(r)?r.forEach(i):i(r)},c0=(e,r,n={})=>{Te(e,n);const i=s=>{if(ms(s))f0(e,s,n);else if(Ht(s))yu(e,s,n);else throw new Error(`Unknown path type ${JSON.stringify(s)}`)};Array.isArray(r)?r.forEach(i):i(r)},Ps=(e,r,n={})=>{const i=n.loop??!1;cy(r),r.length!==0&&(r.forEach((s,o)=>ee(s,`Index ${o}`)),Te(e,n),e.beginPath(),e.moveTo(r[0].x,r[0].y),r.forEach(s=>e.lineTo(s.x,s.y)),i&&e.lineTo(r[0].x,r[0].y),(n.strokeStyle||n.strokeStyle===void 0&&n.fillStyle===void 0)&&e.stroke(),n.fillStyle&&e.fill())},Bs=(e,r,n={},i)=>{r.length!==0&&(r.forEach((s,o)=>ee(s,`Index ${o}`)),Te(e,n),r.forEach((s,o)=>{const a=i!==void 0&&o<i.length?i[o]:o.toString();e.fillText(a.toString(),s.x,s.y)}))},tb=(e,r)=>{const n=e.getTransform();return{x:r.x*n.a+r.y*n.c+n.e,y:r.x*n.b+r.y*n.d+n.f}},rb=e=>{const r=document.createElement("img");return r.src=e.toDataURL("image/jpeg"),r},Xe=(e,r,n)=>{n===void 0&&(n={});const i=n.radius??10;if(Te(e,n),e.beginPath(),Array.isArray(r))r.forEach(s=>{e.arc(s.x,s.y,i,0,2*Math.PI)});else{const s=r;e.arc(s.x,s.y,i,0,2*Math.PI)}(n.filled||!n.outlined)&&e.fill(),n.outlined&&e.stroke()},h0=(e,r,n)=>{ms(r)?f0(e,r,n):Ia(r)&&nb(e,r,n)},nb=(e,r,n={})=>{let i=Te(e,n);const{a:s,b:o,cubic1:a,cubic2:u}=r,l=n.debug??!1;e.beginPath(),e.moveTo(s.x,s.y),e.bezierCurveTo(a.x,a.y,u.x,u.y,o.x,o.y),e.stroke(),l&&(i=i.push(pu({...n,strokeStyle:Un(n.strokeStyle??"silver",.6),fillStyle:Un(n.fillStyle??"yellow",.4)})),i.apply(),e.moveTo(s.x,s.y),e.lineTo(a.x,a.y),e.stroke(),e.moveTo(o.x,o.y),e.lineTo(u.x,u.y),e.stroke(),e.fillText("a",s.x+5,s.y),e.fillText("b",o.x+5,o.y),e.fillText("c1",a.x+5,a.y),e.fillText("c2",u.x+5,u.y),Xe(e,a,{radius:3}),Xe(e,u,{radius:3}),Xe(e,s,{radius:3}),Xe(e,o,{radius:3}),i=i.pop(),i.apply())},f0=(e,r,n={})=>{const{a:i,b:s,quadratic:o}=r,a=n.debug??!1;let u=Te(e,n);e.beginPath(),e.moveTo(i.x,i.y),e.quadraticCurveTo(o.x,o.y,s.x,s.y),e.stroke(),a&&(u=u.push(pu({...n,strokeStyle:Un(n.strokeStyle??"silver",.6),fillStyle:Un(n.fillStyle??"yellow",.4)})),Ps(e,[i,o,s]),e.fillText("a",i.x+5,i.y),e.fillText("b",s.x+5,s.y),e.fillText("h",o.x+5,o.y),Xe(e,o,{radius:3}),Xe(e,i,{radius:3}),Xe(e,s,{radius:3}),u=u.pop(),u.apply())},yu=(e,r,n={})=>{const i=n.debug??!1,s=ZD(n.lineWidth,n.lineJoin,n.lineCap);Te(e,n,s);const o=a=>{const{a:u,b:l}=a;e.beginPath(),e.moveTo(u.x,u.y),e.lineTo(l.x,l.y),i&&(e.fillText("a",u.x,u.y),e.fillText("b",l.x,l.y),Xe(e,u,{radius:5,strokeStyle:"black"}),Xe(e,l,{radius:5,strokeStyle:"black"})),e.stroke()};Array.isArray(r)?r.forEach(o):o(r)},ib=(e,r,n={})=>{Te(e,n);const i=s=>{Ps(e,jo(s),{...n,loop:!0}),n.debug&&Bs(e,jo(s),void 0,["a","b","c"])};Array.isArray(r)?r.forEach(i):i(r)},d0=(e,r,n={})=>{Te(e,n);const i=s=>{n.filled&&e.fillRect(s.x,s.y,s.width,s.height),e.strokeRect(s.x,s.y,s.width,s.height),n.debug&&Bs(e,Ja(s),void 0,["NW","NE","SE","SW"])};Array.isArray(r)?r.forEach(i):i(r)},Tr=(e,r,n=0,i)=>{if(r==null||r.length===0)return 0;const s=e.measureText(r);return i?Qc(s.width,i)+n:s.width+n},v0=(e,r,n)=>{Te(e,n);const i=n.anchorPadding??0,s=n.anchor,o=n.bounds??{x:0,y:0,width:1e6,height:1e6},a=r.map(v=>e.measureText(v)),u=a.map(v=>v.width),l=a.map(v=>v.actualBoundingBoxAscent+v.actualBoundingBoxDescent),c=Math.max(...u),h=l.reduce((v,m)=>v+m,0);let{x:f,y:d}=s;s.x+c>o.width?f=o.width-(c+i):f-=i,f<o.x&&(f=o.x+i),s.y+h>o.height?d=o.height-(h+i):d-=i,d<o.y&&(d=o.y+i),r.forEach((v,m)=>{e.fillText(v,f,d),d+=l[m]})},sb=(e,r,n)=>{const{bounds:i}=n,{horiz:s="left",vert:o="top"}=n;let a;typeof r=="string"?a=[r]:a=r,Te(e,n),e.save(),e.translate(i.x,i.y),e.textAlign="left",e.textBaseline="top";const u=i.width/2,l=i.height/2,c=a.map(v=>e.measureText(v)),h=c.map(v=>v.actualBoundingBoxAscent+v.actualBoundingBoxDescent),f=h.reduce((v,m)=>v+m,0);let d=0;o==="center"?d=l-f/2:o==="bottom"&&(d=i.height-f),a.forEach((v,m)=>{let x=0;s==="center"?x=u-c[m].width/2:s==="right"&&(x=i.width-c[m].width),e.fillText(a[m],x,d),d+=h[m]}),e.restore()},mu={};N(mu,{Elements:()=>es,applyOpts:()=>At,applyPathOpts:()=>wu,applyStrokeOpts:()=>Gt,clear:()=>ab,createEl:()=>Ms,createOrResolve:()=>Rt,getBounds:()=>ub,makeHelper:()=>cb,remove:()=>A0,setBounds:()=>lb});var ob=(e,r,n)=>{const i=Ms("marker",e);if(r.markerWidth&&i.setAttribute("markerWidth",r.markerWidth?.toString()),r.markerHeight&&i.setAttribute("markerHeight",r.markerHeight?.toString()),r.orient?i.setAttribute("orient",r.orient.toString()):i.setAttribute("orient","auto-start-reverse"),r.viewBox&&i.setAttribute("viewBox",r.viewBox.toString()),r.refX&&i.setAttribute("refX",r.refX.toString()),r.refY&&i.setAttribute("refY",r.refY.toString()),n){const s=n();i.appendChild(s)}return i},oo=(e,r,n)=>{if(e===null)return"(elem null)";const i=e.ownerSVGElement;if(i===null)throw new Error("parent for elem is null");const s=Rt(i,"defs","defs");let o=s.querySelector(`#${r.id}`);if(o!==null)return`url(#${r.id})`;if(r.id==="triangle")r={...r,strokeStyle:"transparent"},r.markerHeight||(r={...r,markerHeight:6}),r.markerWidth||(r={...r,markerWidth:6}),r.refX||(r={...r,refX:r.markerWidth}),r.refY||(r={...r,refY:r.markerHeight}),(!r.fillStyle||r.fillStyle==="none")&&(r={...r,fillStyle:"black"}),r.viewBox||(r={...r,viewBox:"0 0 10 10"}),o=ob(r.id,r,()=>{const a=Ms("path");return a.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),r&&At(a,r),a});else throw new Error(`Do not know how to make ${r.id}`);return o.id=r.id,s.appendChild(o),`url(#${r.id})`},es={};N(es,{circle:()=>g0,circleUpdate:()=>m0,grid:()=>E0,line:()=>ts,lineUpdate:()=>w0,path:()=>p0,pathUpdate:()=>y0,text:()=>b0,textPath:()=>D0,textPathUpdate:()=>x0,textUpdate:()=>gu});var Gl=e=>e>=0&&e<=1?e*100+"%":e.toString(),p0=(e,r,n,i)=>{const s=Rt(r,"path",i),o=typeof e=="string"?e:e.join(`
`);return s.setAttributeNS(null,"d",o),r.appendChild(s),y0(s,n)},y0=(e,r)=>(r&&At(e,r),r&&Gt(e,r),e),m0=(e,r,n)=>(e.setAttributeNS(null,"cx",r.x.toString()),e.setAttributeNS(null,"cy",r.y.toString()),e.setAttributeNS(null,"r",r.radius.toString()),n&&At(e,n),n&&Gt(e,n),e),g0=(e,r,n,i)=>{const s=Rt(r,"circle",i);return m0(s,e,n)},ts=(e,r,n,i)=>{const s=Rt(r,"line",i);return w0(s,e,n)},w0=(e,r,n)=>(e.setAttributeNS(null,"x1",r.a.x.toString()),e.setAttributeNS(null,"y1",r.a.y.toString()),e.setAttributeNS(null,"x2",r.b.x.toString()),e.setAttributeNS(null,"y2",r.b.y.toString()),n&&At(e,n),n&&wu(e,n),n&&Gt(e,n),e),x0=(e,r,n)=>(n?.method&&e.setAttributeNS(null,"method",n.method),n?.side&&e.setAttributeNS(null,"side",n.side),n?.spacing&&e.setAttributeNS(null,"spacing",n.spacing),n?.startOffset&&e.setAttributeNS(null,"startOffset",Gl(n.startOffset)),n?.textLength&&e.setAttributeNS(null,"textLength",Gl(n.textLength)),r&&(e.textContent=r),n&&At(e,n),n&&Gt(e,n),e),D0=(e,r,n,i,s)=>{const o=Rt(n,"text",s+"-text");gu(o,void 0,void 0,i);const a=Rt(o,"textPath",s);return a.setAttributeNS(null,"href",e),x0(a,r,i)},gu=(e,r,n,i)=>(r&&(e.setAttributeNS(null,"x",r.x.toString()),e.setAttributeNS(null,"y",r.y.toString())),n&&(e.textContent=n),i&&(At(e,i),i&&Gt(e,i),i.anchor&&e.setAttributeNS(null,"text-anchor",i.anchor),i.align&&e.setAttributeNS(null,"alignment-baseline",i.align)),e),b0=(e,r,n,i,s)=>{const o=Rt(r,"text",s);return gu(o,n,e,i)},E0=(e,r,n,i,s,o={})=>{o.strokeStyle||(o={...o,strokeStyle:i0("bg-dim","silver")}),o.strokeWidth||(o={...o,strokeWidth:1});const a=Ms("g");At(a,o),wu(a,o),Gt(a,o);let u=0;for(;u<s;){const c=Vi(0,u,i,u);ts(c,a),u+=n}let l=0;for(;l<i;){const c=Vi(l,0,l,s);ts(c,a),l+=n}return e.appendChild(a),a},Rt=(e,r,n)=>{let i=null;if(n!==void 0&&(typeof n=="string"?i=e.querySelector(n):i=n),i===null){const s=document.createElementNS("http://www.w3.org/2000/svg",r);return e.appendChild(s),n&&typeof n=="string"&&n.startsWith("#")&&(s.id=n.substring(1)),s}return i},A0=(e,r)=>{if(typeof r=="string"){const n=e.querySelector(r);if(n===null)return;n.remove()}else r.remove()},ab=e=>{let r=e.lastElementChild;for(;r;)e.removeChild(r),r=e.lastElementChild},Ms=(e,r)=>{const n=document.createElementNS("http://www.w3.org/2000/svg",e);return r&&(n.id=r),n},wu=(e,r)=>{r.markerEnd&&e.setAttribute("marker-end",oo(e,r.markerEnd)),r.markerStart&&e.setAttribute("marker-end",oo(e,r.markerStart)),r.markerMid&&e.setAttribute("marker-end",oo(e,r.markerMid))},At=(e,r)=>{r.fillStyle&&e.setAttributeNS(null,"fill",r.fillStyle)},Gt=(e,r)=>{r.strokeStyle&&e.setAttributeNS(null,"stroke",r.strokeStyle),r.strokeWidth&&e.setAttributeNS(null,"stroke-width",r.strokeWidth.toString()),r.strokeDash&&e.setAttribute("stroke-dasharray",r.strokeDash),r.strokeLineCap&&e.setAttribute("stroke-linecap",r.strokeLineCap)},ub=e=>{const r=e.getAttributeNS(null,"width"),n=r===null?0:parseFloat(r),i=e.getAttributeNS(null,"height"),s=i===null?0:parseFloat(i);return{width:n,height:s}},lb=(e,r)=>{e.setAttributeNS(null,"width",r.width.toString()),e.setAttributeNS(null,"height",r.height.toString())},cb=(e,r)=>(r&&(At(e,r),Gt(e,r)),{remove:i=>A0(e,i),text:(i,s,o,a)=>b0(i,e,s,o,a),textPath:(i,s,o,a)=>D0(i,s,e,o,a),line:(i,s,o)=>ts(i,e,s,o),circle:(i,s,o)=>g0(i,e,s,o),path:(i,s,o)=>p0(i,e,s,o),grid:(i,s,o,a,u)=>E0(e,i,s,o,a,u),query:i=>e.querySelector(i),get width(){const i=e.getAttributeNS(null,"width");return i===null?0:parseFloat(i)},set width(i){e.setAttributeNS(null,"width",i.toString())},get parent(){return e},get height(){const i=e.getAttributeNS(null,"height");return i===null?0:parseFloat(i)},set height(i){e.setAttributeNS(null,"height",i.toString())},clear:()=>{for(;e.firstChild;)e.removeChild(e.lastChild)}}),xu={};N(xu,{add:()=>_0,calcScale:()=>Du,defaultAxis:()=>Go,draw:()=>qr,drawValue:()=>C0,plot:()=>wb});var hb=Math.PI*2,Go=e=>({endWith:"none",lineWidth:1,namePosition:"none",name:e,showLabels:e==="y",showLine:!0,textSize:e==="y"?20:10}),Du=(e,r,n)=>{const i=e.keys(),s=[];return i.forEach(o=>{const a=e.get(o);if(a===void 0)return;let{min:u,max:l}=ds(a),c=l-u,h;n!==void 0&&(h=n[o]),h==null&&(r.defaultSeriesVariable?h=ti.getCssVariable("accent",r.defaultSeriesColour):h=r.defaultSeriesColour),c===0&&(c=u,u=u-c/2,l=l+c/2),s.push({min:u,max:l,range:c,name:o,colour:h})}),s},_0=(e,r,n="")=>{e.addKeyedValues(n,r)},C0=(e,r,n)=>{const i={...n,translucentPlot:!0,leadingEdgeDot:!1};qr(r,i),n={...n,highlightIndex:e,leadingEdgeDot:!0,translucentPlot:!1,style:"none",clearCanvas:!1},qr(r,n)},fb=(e,r,n)=>Du(e,n,n.seriesColours).map(i=>({...i,range:r[1]-r[0],min:r[0],max:r[1]})),qr=(e,r)=>{const{x:n,y:i,ctx:s,canvasSize:o}=r,a=r.margin,u=r.y.scaleRange?fb(e,r.y.scaleRange,r):Du(e,r,r.seriesColours);r.clearCanvas&&s.clearRect(0,0,o.width,o.height),r.debug&&(s.strokeStyle="orange",s.strokeRect(0,0,o.width,o.height)),s.translate(a,a);const l=r.plotSize??S0(o,r),c={height:l.height+a+a,width:l.width};if((i.showLabels||i.showLine)&&(u.forEach(f=>{i.allowedSeries!==void 0&&!i.allowedSeries.includes(f.name)||db(f,c,r)}),u.length>0&&i.showLine&&vb(c,u[0],r)),(n.showLabels||n.showLine)&&u.length>0){const f=i.labelRange?i.labelRange[0]:u[0].min;yb(l.width,cr(f,u[0],l.height)+a+n.lineWidth,r)}const h={...r,plotSize:l};$s.translatePoint(s,r.pointer),u.forEach(f=>{const d=e.getSource(f.name);if(d===void 0)return;let v=e.typeName==="circular"?d.pointer-1:d.length-1;r.highlightIndex!==void 0&&(v=r.highlightIndex),s.save(),s.translate(0,a+a),mb(f,d,l,h,v),s.restore()}),r.showLegend&&(s.save(),s.translate(0,l.height+a+a+a),l.width,r.x.textSize+a+a,pb(u,r),s.restore()),s.resetTransform()},db=(e,r,n)=>{const{ctx:i,y:s,digitsPrecision:o,margin:a}=n,{height:u}=r;n.debug&&(i.strokeStyle="purple",i.strokeRect(0,0,s.textSize,u+a)),i.fillStyle=e.colour.length>0?e.colour:"white",s.colour&&(i.fillStyle=s.colour);const l=s.labelRange?s.labelRange[0]:e.min,c=s.labelRange?s.labelRange[1]:e.max,h=s.labelRange?c-l:e.range,f=l+h/2,d=n.textHeight/2;i.textBaseline="top",i.fillText(l.toFixed(o),0,cr(l,e,u)-d),i.fillText(f.toFixed(o),0,cr(f,e,u)-d),i.fillText(c.toFixed(o),0,cr(c,e,u)-a),i.translate(s.textSize+a,0)},vb=(e,r,n)=>{if(r===void 0)throw new Error("series undefined");const{ctx:i,y:s}=n,{height:o}=e,a=s.labelRange?s.labelRange[0]:r.min,u=s.labelRange?s.labelRange[1]:r.max,l=cr(a,r,o),c=cr(u,r,o);i.translate(s.lineWidth,0),i.lineWidth=s.lineWidth,i.beginPath(),i.moveTo(0,l),i.lineTo(0,c),i.strokeStyle=r.colour,s.colour&&(i.strokeStyle=s.colour),i.stroke(),i.translate(s.lineWidth,0)},pb=(e,r,n)=>{const{ctx:i}=r,s=10;let o=0;const a=r.margin*3,u=r.margin;i.lineWidth=r.lineWidth,e.forEach(l=>{i.moveTo(o,a),i.strokeStyle=l.colour,i.lineTo(o+s,a),i.stroke(),o+=s+r.margin;let c=l.name;l.lastValue&&(c+=" "+l.lastValue.toFixed(r.digitsPrecision));const h=i.measureText(c);i.fillStyle=l.colour,i.fillText(c,o,u),o+=h.width})},yb=(e,r,n)=>{const{ctx:i,x:s,y:o}=n;!s.showLine||(s.colour&&(i.strokeStyle=s.colour),i.lineWidth=s.lineWidth,i.beginPath(),i.moveTo(0,r),i.lineTo(e,r),i.stroke())},mb=(e,r,n,i,s)=>{const{ctx:o,lineWidth:a,translucentPlot:u=!1,margin:l,x:c}=i,h=i.style??"connected",f=n.height-l;let d=1;if(c.scaleRange){const S=c.scaleRange[1]-c.scaleRange[0];d=n.width/S}else i.capacity===0?d=n.width/r.length:d=n.width/i.capacity;const v=i.coalesce&&d<0?Math.floor(1/d):1;let m=0,x;i.debug&&(o.strokeStyle="green",o.strokeRect(0,0,n.width,n.height));const _=S=>u?ti.opacity(S,.2):S;h==="dots"?o.fillStyle=_(e.colour):h==="none"||(o.beginPath(),o.lineWidth=a,o.strokeStyle=_(e.colour));for(let S=0;S<r.length;S+=v){let M=cr(r[S],e,f)-1;h==="dots"?(o.beginPath(),o.arc(m,M,a,0,hb),o.fill()):h==="none"||(S==0&&o.moveTo(m,M),o.lineTo(m,M)),S===s&&(x={x:m,y:M},e.lastValue=r[S]),m+=d}h==="connected"&&o.stroke(),x!==void 0&&i.leadingEdgeDot&&(o.beginPath(),o.fillStyle=_(e.colour),o.arc(x.x,x.y,3,0,2*Math.PI),o.fill())},cr=(e,r,n)=>(1-(e-r.min)/r.range)*n,$0=(e,r,n,i)=>{let s=e;n.showLabels&&(s+=n.textSize),n.showLine&&(s+=n.lineWidth),(n.showLabels||n.showLine)&&(s+=e+e);let o=e,a=e+e,u=e+e;return r.showLabels?u+=r.textSize:u+=e,r.showLine&&(u+=r.lineWidth),(r.showLabels||r.showLine)&&(u+=e),i&&(u+=r.textSize),{left:s,right:o,top:a,bottom:u}},S0=(e,r)=>{const{width:n,height:i}=e,s=$0(r.margin,r.x,r.y,r.showLegend);return{width:n-s.left-s.right,height:i-s.top-s.bottom}},gb=(e,r)=>{const{width:n,height:i}=e,s=$0(r.margin,r.x,r.y,r.showLegend);return{width:n+s.left+s.right,height:i+s.top+s.bottom}},wb=(e,r)=>{if(e===null)throw new Error("parentElOrQuery is null. Expected string or element");const n=Ce(e);let i,s=!0,o=r.plotSize,a;n.nodeName==="CANVAS"?(i=n,s=!1,a={width:i.width,height:i.height}):(i=document.createElement("CANVAS"),n.append(i),o=r.plotSize,a={width:i.width,height:i.height});const u={x:0,y:0},l=S=>{u.x=S.offsetX,u.y=S.offsetY};i.addEventListener("pointermove",l);const c=i.getContext("2d"),h=r.capacity??10,f=h>0?Hh({capacity:h}):qh(),d=c.measureText("Xy"),v=r.coalesce??!0;if(c===null)throw new Error("Drawing context not available");let m=Go("x");r.x&&(m={...m,...r.x});let x=Go("y");r.y&&(x={...x,...r.y});let _={...r,y:x,x:m,pointer:u,capacity:h,coalesce:v,plotSize:o,canvasSize:a,ctx:c,textHeight:r.textHeight??d.actualBoundingBoxAscent+d.actualBoundingBoxDescent,style:r.style??"connected",defaultSeriesColour:r.defaultSeriesColour??"yellow",margin:3,clearCanvas:!0,leadingEdgeDot:!0,debug:r.debug??!1,digitsPrecision:r.digitsPrecision??2,lineWidth:r.lineWidth??2,showLegend:r.showLegend??!1};if(o){const S=gb(o,_);i.width=S.width,i.height=S.height,_.canvasSize=S}return r.autoSizeCanvas&&va(i,S=>{const M=S.bounds;_={..._,plotSize:S0(M,_),canvasSize:M},qr(f,_)}),{drawValue:S=>{C0(S,f,_)},dispose:()=>{i.removeEventListener("pointermove",l),s&&i.remove()},add:(S,M="",X=!1)=>{_0(f,S,M),!X&&qr(f,_)},draw:()=>{qr(f,_)},clear:()=>{f.clear()}}},bu={};N(bu,{AxisX:()=>z0,AxisY:()=>R0,Legend:()=>T0,Plot:()=>Eb,PlotArea:()=>N0,Series:()=>k0});var Eu={};N(Eu,{Box:()=>P0,CanvasBox:()=>un,CanvasMeasureState:()=>B0,MeasureState:()=>F0});var yi=(e,r)=>e.type==="px"&&r.type==="px"?e.value===r.value:!1,xb=(e,r)=>e===void 0&&r===void 0?!0:!(e===void 0||r===void 0||e.x&&r.x&&!yi(e.x,r.x)||e.y&&r.y&&!yi(e.y,r.y)||e.width&&r.width&&!yi(e.width,r.width)||e.height&&r.height&&!yi(e.height,r.height)),F0=class{constructor(e){y(this,"bounds"),y(this,"pass"),y(this,"measurements"),this.bounds=e,this.pass=0,this.measurements=new Map}getSize(e){const r=this.measurements.get(e);if(r!==void 0&&!jn(r.size))return r.size}resolveToPx(e,r){if(e===void 0)return r;if(e.type==="px")return e.value;throw new Error(`Unknown unit type ${e.type}`)}},P0=class{constructor(e,r){y(this,"visual",Io),y(this,"_desiredSize"),y(this,"_lastMeasure"),y(this,"children",[]),y(this,"_parent"),y(this,"_idMap",new Map),y(this,"debugLayout",!1),y(this,"_visible",!0),y(this,"_ready",!0),y(this,"takesSpaceWhenInvisible",!1),y(this,"needsDrawing",!0),y(this,"_needsLayout",!0),y(this,"debugHue",du()),y(this,"id"),this.id=r,this._parent=e,e?.onChildAdded(this)}hasChild(e){const r=this.children.find(i=>i===e),n=this.children.find(i=>i.id===e.id);return r!==void 0||n!==void 0}notify(e,r){this.onNotify(e,r),this.children.forEach(n=>n.notify(e,r))}onNotify(e,r){}onChildAdded(e){if(e.hasChild(this))throw new Error("Recursive");if(e===this)throw new Error("Cannot add self as child");if(this.hasChild(e))throw new Error("Child already present");this.children.push(e),this._idMap.set(e.id,e)}setReady(e,r=!1){this._ready=e,r&&this.children.forEach(n=>n.setReady(e,r))}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.onLayoutNeeded())}get desiredSize(){return this._desiredSize}set desiredSize(e){xb(e,this._desiredSize)||(this._desiredSize=e,this.onLayoutNeeded())}onLayoutNeeded(){this.notifyChildLayoutNeeded()}notifyChildLayoutNeeded(){this._needsLayout=!0,this.needsDrawing=!0,this._parent!==void 0?this._parent.notifyChildLayoutNeeded():this.update()}get root(){return this._parent===void 0?this:this._parent.root}measurePreflight(){}measureApply(e,r){let n=!0;return this._needsLayout=!1,hd(e.size,this.visual)&&(n=!1),je(e.size)?this.visual=e.size:this.visual={x:0,y:0,width:e.size.width,height:e.size.height},e.children.forEach(i=>{i!==void 0&&i.ref.measureApply(i,r)}),(n||r)&&(this.needsDrawing=!0,this.root.notify("measureApplied",this)),n}debugLog(e){console.log(this.id,e)}measureStart(e,r,n){this.measurePreflight();let i={ref:this,size:cd,children:[]};if(e.measurements.set(this.id,i),!this._visible&&!this.takesSpaceWhenInvisible)i.size=ld;else{let s=this._lastMeasure;if((this._needsLayout||this._lastMeasure===void 0)&&(s=this.measureSelf(e,n),this.root.notify("measured",this)),s===void 0)return;i.size=s,this._lastMeasure=s}if(i.children=this.children.map(s=>s.measureStart(e,r,i)),!(Qe.without(i.children,void 0).length<this.children.length))return i}measureSelf(e,r){let n=Io;if(r?r.size&&(n={x:0,y:0,width:r.size.width,height:r.size.height}):n={x:0,y:0,width:e.bounds.width,height:e.bounds.height},!jn(n))return n}updateDone(e,r){this.onUpdateDone(e,r),this.children.forEach(n=>n.updateDone(e,r))}update(e=!1){const r=this.updateBegin(e);let n=5,i=!1;for(;n--;){const s=this.measureStart(r,e);if(s!==void 0){if(this.measureApply(s,e),!this._ready)return;i=!0}}this.updateDone(r,e),i||console.warn("Ran out of measurement attempts")}},B0=class extends F0{constructor(e,r){super(e);y(this,"ctx"),this.ctx=r}},un=class extends P0{constructor(e,r,n){super(e,n);if(y(this,"canvasEl"),r===void 0)throw new Error("canvasEl undefined");if(r===null)throw new Error("canvasEl null");this.canvasEl=r,e===void 0&&this.designateRoot()}designateRoot(){this.canvasEl.addEventListener("pointermove",e=>{const r={x:e.offsetX,y:e.offsetY};this.notifyPointerMove(r)}),this.canvasEl.addEventListener("pointerleave",e=>{this.notifyPointerLeave()}),this.canvasEl.addEventListener("click",e=>{const r={x:e.offsetX,y:e.offsetY};this.notifyClick(r)})}onClick(e){}notifyClick(e){if(!jn(this.visual)&&Ji(this.visual,e)){const r=b.subtract(e,this.visual.x,this.visual.y);this.onClick(r),this.children.forEach(n=>n.notifyClick(r))}}notifyPointerLeave(){this.onPointerLeave(),this.children.forEach(e=>e.notifyPointerLeave())}notifyPointerMove(e){if(!jn(this.visual)&&Ji(this.visual,e)){const r=b.subtract(e,this.visual.x,this.visual.y);this.onPointerMove(r),this.children.forEach(n=>n.notifyPointerMove(r))}}onPointerLeave(){}onPointerMove(e){}updateBegin(){const e=this.canvasEl.getContext("2d");if(e===null)throw new Error("Context unavailable");const r=this.canvasEl.getBoundingClientRect();return new B0({width:r.width,height:r.height},e)}onUpdateDone(e,r){if(!this.needsDrawing&&!r)return;const n=this.canvasEl.getContext("2d");if(n===null)throw new Error("Context unavailable");n.save(),n.translate(this.visual.x,this.visual.y);const i=this.visual;this.debugLayout&&(n.lineWidth=1,n.strokeStyle=`hsl(${this.debugHue}, 100%, 50%)`,n.strokeRect(0,0,i.width,i.height),n.fillStyle=n.strokeStyle,n.fillText(this.id,10,10,i.width),n.beginPath(),n.moveTo(0,0),n.lineTo(i.width,i.height),n.stroke()),this.drawSelf(n),this.needsDrawing=!1,n.restore()}drawSelf(e){}},M0=class{constructor(e){y(this,"data"),y(this,"series"),y(this,"dirty",!1),y(this,"type","array"),y(this,"_range"),this.series=e,this.data=[],this.dirty=!0}clear(){this.set([]),this._range=void 0}set(e){this.data=e,this.dirty=!0}get length(){return this.data.length}get range(){return!this.dirty&&this._range!==void 0?this._range:(this.dirty=!1,this._range=Qe.minMaxAvg(this.data),{...this._range,changed:!0})}add(e){this.data=[...this.data,e],this.dirty=!0}},Db=class extends M0{constructor(e){super(e);y(this,"desiredDataPointMinWidth",5)}add(e){const r=this.series.lastPxPerPt;if(r>-1&&r<this.desiredDataPointMinWidth){const n=Math.floor(this.desiredDataPointMinWidth/r),i=[...this.data.slice(n),e];super.set(i)}else super.add(e)}},k0=class{constructor(e,r,n,i){if(this.plot=n,y(this,"name"),y(this,"colour"),y(this,"source"),y(this,"drawingStyle"),y(this,"width",3),y(this,"dataHitPoint"),y(this,"tooltip"),y(this,"precision",2),y(this,"axisRange"),y(this,"lastPxPerPt",-1),y(this,"_visualRange"),y(this,"_visualRangeStretch"),this.name=e,this.drawingStyle=i.drawingStyle??"line",this.colour=i.colour,this.width=i.width??3,this.axisRange=i.axisRange??{min:Number.NaN,max:Number.NaN},this._visualRange={...this.axisRange},this._visualRangeStretch=i.visualRangeStretch??!0,r==="array")this.source=new M0(this);else if(r==="stream")this.source=new Db(this);else throw new Error("Unknown sourceType. Expected array|stream")}formatValue(e){return e.toFixed(this.precision)}get visualRange(){let e=this._visualRange;const r=this.source.range;let n=!1;if(r.changed)if(this._visualRangeStretch){const i=Math.min(xo(e.min,r.min),r.min),s=Math.max(xo(e.max,r.max),r.max);(i!==e.min||s!==e.max)&&(e={min:i,max:s},n=!0)}else I0(r,e)||(e=r,n=!0);return this._visualRange=e,{...e,changed:n}}scaleValue(e){if(this.source===void 0)return e;const r=this.visualRange;return r.min==r.max?.5:Dt(e,r.min,r.max)}add(e){R(e,"","value"),this.source.add(e),this.plot.plotArea.needsDrawing=!0}clear(){this.source.clear(),this._visualRange={...this.axisRange},this.plot.plotArea.needsDrawing=!0}},N0=class extends un{constructor(e){super(e,e.canvasEl,"PlotArea");this.plot=e,y(this,"paddingPx",3),y(this,"piPi",Math.PI*2),y(this,"pointerDistanceThreshold",20),y(this,"lastRangeChange",0),y(this,"pointer")}clear(){this.lastRangeChange=0,this.pointer=void 0}measureSelf(e,r){const n=e.getSize("AxisY");if(n===void 0)return;const i=e.getSize("Legend");if(i===void 0)return;const s=e.getSize("AxisX");if(s!==void 0)return{x:n.width,y:0,width:e.bounds.width-n.width,height:e.bounds.height-i.height-s.height}}onNotify(e,r){e==="measureApplied"&&r===this.plot.axisY&&(this._needsLayout=!0),e==="measureApplied"&&r===this.plot.legend&&(this._needsLayout=!0)}onPointerLeave(){[...this.plot.series.values()].forEach(r=>{r.tooltip=void 0}),this.pointer=void 0,this.plot.legend.onLayoutNeeded()}onPointerMove(e){this.pointer=e,this.plot.legend.onLayoutNeeded()}measurePreflight(){this.updateTooltip()}updateTooltip(){const e=this.pointer;if(e===void 0)return;[...this.plot.series.values()].forEach(n=>{if(e===void 0){n.tooltip=void 0;return}if(n.dataHitPoint===void 0)return;const i=n.dataHitPoint(e);i[0]!==void 0&&(i[1]>this.pointerDistanceThreshold||(n.tooltip=n.formatValue(i[0].value)))}),this.plot.legend.needsDrawing=!0}drawSelf(e){if(this.plot.frozen)return;const r=this.plot.seriesArray();e.clearRect(0,0,this.visual.width,this.visual.height),r.forEach(n=>{if(n.source.type==="array"||n.source.type==="stream"){const i=n.source;if(i.data===void 0)return;const s=[...i.data];this.drawDataSet(n,s,e)}else console.warn(`Unknown data source type ${n.source.type}`)})}computeY(e,r){const n=e.scaleValue(r);return ki(n)*this.visual.height+this.paddingPx}drawDataSet(e,r,n){const i=this.paddingPx+e.width,s=ne.subtract(this.visual,i*2,i*3.5),o=s.width/r.length;e.lastPxPerPt=o;let a=i;n.strokeStyle=e.colour,n.lineWidth=e.width;const u=[];if(e.dataHitPoint=l=>{const c=u.map(d=>b.distanceToExterior(l,d)),h=zh(...c);return[u[h],c[h]]},e.drawingStyle==="line"){let l=0;n.beginPath();for(let c=0;c<r.length;c++){const h=Le(e.scaleValue(r[c]));l=i+this.paddingPx+s.height*ki(h),u.push({x:a,y:l,index:c,value:r[c]}),c==0?n.moveTo(a+o/2,l):n.lineTo(a+o/2,l),l>this.visual.height&&console.warn(l+" h: "+this.visual.height),a+=o}n.strokeStyle=e.colour,n.stroke()}else if(e.drawingStyle==="dotted"){let l=0;n.fillStyle=e.colour;for(let c=0;c<r.length;c++){const h=e.scaleValue(r[c]);l=i+s.height*ki(h),n.beginPath(),n.arc(a+o/2,l,e.width,0,this.piPi),n.fill(),u.push({radius:e.width,x:a,y:l,index:c,value:r[c]}),a+=o}}else if(e.drawingStyle==="bar"){n.fillStyle=e.colour;const l=Math.ceil(o*.1);for(let c=0;c<r.length;c++){const h=e.scaleValue(r[c]),f=s.height*h,d={x:a+l,y:s.height-f+i,width:o-l,height:f,index:c,value:r[c]};n.fillRect(d.x,d.y,d.width,d.height),u.push(d),a+=o}}}},T0=class extends un{constructor(e){super(e,e.canvasEl,"Legend");this.plot=e,y(this,"sampleSize",{width:10,height:10}),y(this,"padding",3),y(this,"widthSnapping",20)}clear(){}measureSelf(e,r){const n=e.measurements.get("AxisY"),i=this.sampleSize,s=this.widthSnapping,o=this.padding,a=e.ctx;if(n===void 0)return;const u=e.bounds.width-n.size.width,l=this.plot.seriesArray();let c=o;for(let d=0;d<l.length;d++)c+=i.width+o,c+=Tr(a,l[d].name,o,s),c+=Tr(a,l[d].tooltip,o,s);const f=Math.max(1,Math.ceil(c/u))*(this.sampleSize.height+this.padding+this.padding);return{x:n.size.width,y:e.bounds.height-f,width:u,height:f}}drawSelf(e){const r=this.plot.seriesArray(),n=this.sampleSize,i=this.padding,s=this.widthSnapping;let o=i,a=i;e.clearRect(0,0,this.visual.width,this.visual.height);for(let u=0;u<r.length;u++){const l=r[u];e.fillStyle=l.colour,e.fillRect(o,a,n.width,n.height),o+=n.width+i,e.textBaseline="middle",e.fillText(l.name,o,a+n.height/2),o+=Tr(e,l.name,i,s),l.tooltip&&(e.fillStyle=this.plot.axisColour,e.fillText(l.tooltip,o,a+n.height/2),o+=Tr(e,l.tooltip,i,s)),o+=i,o>this.visual.width-100&&(o=i,a+=n.height+i+i)}}onNotify(e,r){e==="measureApplied"&&r===this._parent.axisY&&(this._needsLayout=!0)}},z0=class extends un{constructor(e){super(e,e.canvasEl,"AxisX");this.plot=e,y(this,"paddingPx",2),y(this,"colour")}clear(){}onNotify(e,r){e==="measureApplied"&&r===this.plot.axisY&&(this._needsLayout=!0),e==="measureApplied"&&r===this.plot.legend&&this.onLayoutNeeded()}drawSelf(e){const r=this.plot,n=this.visual,i=r.axisWidth,s=this.colour??r.axisColour;e.strokeStyle=s,e.clearRect(0,0,n.width,n.height),e.beginPath(),e.lineWidth=i,e.moveTo(0,i/2),e.lineTo(n.width,i/2),e.stroke()}measureSelf(e,r){const n=this.plot,i=e.measurements.get("AxisY");if(i===void 0)return;const s=e.measurements.get("Legend");if(s===void 0)return;const o=n.axisWidth+this.paddingPx;return{x:i.size.width,y:e.bounds.height-o-s.size.height,width:e.bounds.width-i.size.width,height:o}}},I0=(e,r)=>e.max===r.max&&e.min===r.min,bb=e=>e.max===e.min,R0=class extends un{constructor(e){super(e,e.canvasEl,"AxisY");this.plot=e,y(this,"_maxDigits",1),y(this,"seriesToShow"),y(this,"paddingPx",2),y(this,"colour"),y(this,"lastRange"),y(this,"lastPlotAreaHeight",0),this.lastRange={min:0,max:0}}clear(){this.lastRange={min:0,max:0},this.lastPlotAreaHeight=0}measurePreflight(){const e=this.getSeries();e!==void 0&&!I0(e.visualRange,this.lastRange)&&(this._needsLayout=!0,this.needsDrawing=!0)}onNotify(e,r){const n=this.plot.plotArea;e==="measureApplied"&&r===n&&n.visual.height!==this.lastPlotAreaHeight&&(this.lastPlotAreaHeight=n.visual.height,this.needsDrawing=!0)}measureSelf(e){const r=e,n=this.paddingPx;let i=this.plot.axisWidth+n;const s=this.getSeries();if(s!==void 0){const a=s.visualRange;this._maxDigits=Math.ceil(a.max).toString().length+s.precision+1;const u="9".repeat(this._maxDigits);i+=Tr(r.ctx,u,n*2)}const o=e.resolveToPx(this.desiredSize?.width,i);return{x:0,y:0,width:o,height:e.bounds.height}}drawSelf(e){const r=this.getSeries();if(r!==void 0)this.seriesAxis(r,e);else{if(this.seriesToShow===void 0)return;console.warn(`Plot AxisY series '${this.seriesToShow}' is missing.`)}}getSeries(){return this.seriesToShow===void 0?this.plot.seriesArray()[0]:this.plot.series.get(this.seriesToShow)}seriesAxis(e,r){const n=this.plot,i=n.plotArea,s=this.visual,o=this.paddingPx,a=e.visualRange,u=n.axisWidth,l=this.colour??n.axisColour;if(r.strokeStyle=l,r.fillStyle=l,Number.isNaN(a.min)&&Number.isNaN(a.max))return;this.lastRange=a,r.clearRect(0,0,s.width,s.height),r.beginPath(),r.lineWidth=u;const c=s.width-u/2;r.moveTo(c,i.paddingPx+u),r.lineTo(c,i.visual.height+u),r.stroke(),r.textBaseline="top";const h=s.width-o*4;bb(a)?ao(r,e.formatValue(a.max),f=>[h-f.width,i.computeY(e,a.max)-o*4]):(ao(r,e.formatValue(a.max),f=>[h-f.width,i.computeY(e,a.max)+u/2]),ao(r,e.formatValue(a.min),f=>[h-f.width,i.computeY(e,a.min)-5]))}},ao=(e,r,n)=>{const i=e.measureText(r),s=n(i);e.fillText(r,s[0],s[1])},Eb=class extends un{constructor(e,r={}){if(e===void 0)throw new Error("canvasEl undefined");super(void 0,e,"Plot");y(this,"plotArea"),y(this,"legend"),y(this,"axisX"),y(this,"axisY"),y(this,"axisColour"),y(this,"axisWidth"),y(this,"series"),y(this,"_frozen",!1),y(this,"defaultSeriesOpts"),r.autoSize&&va(e,n=>{this.update(!0)}),this.axisColour=r.axisColour??"black",this.axisWidth=r.axisWidth??3,this.series=new Map,this.plotArea=new N0(this),this.legend=new T0(this),this.axisX=new z0(this),this.axisY=new R0(this)}clearSeries(){for(const e of this.series.values())e.clear()}clear(){this.series=new Map,this.plotArea.clear(),this.legend.clear(),this.axisX.clear(),this.axisY.clear(),this.update(!0)}get frozen(){return this._frozen}set frozen(e){this._frozen=e,e?(this.canvasEl.classList.add("frozen"),this.canvasEl.title="Plot frozen. Tap to unfreeze"):(this.canvasEl.title="",this.canvasEl.classList.remove("frozen"))}seriesArray(){return[...this.series.values()]}get seriesLength(){return this.series.size}plot(e){ua(e).forEach(n=>{let i=this.series.get(n);i===void 0&&(i=this.createSeries(n,"stream"),i.drawingStyle="line"),i.add(fs(e,n))})}createSeriesFromObject(e,r=""){const n=Object.keys(e),i=s=>{const o=e[s];return typeof o=="object"?this.createSeriesFromObject(o,r+s+"."):typeof o=="number"?[this.createSeries(s,"stream")]:[]};return n.flatMap(i)}createSeries(e,r="array",n){const i=this.seriesLength;if(e===void 0&&(e=`series-${i}`),this.series.has(e))throw new Error(`Series name '${e}' already in use`);let s={colour:`hsl(${i*25%360}, 70%,50%)`,...n};this.defaultSeriesOpts&&(s={...this.defaultSeriesOpts,...s});const o=new k0(e,r,this,s);return this.series.set(e,o),this.setReady(!0,!0),this.plotArea.needsDrawing=!0,o}},Au={};N(Au,{create:()=>Ab});var Ab=e=>new _b(e),_n,Bi,Br,Cn,_b=class{constructor(e){le(this,_n,new Map),le(this,Bi,new Map),y(this,"fallbacks"),le(this,Br,0),le(this,Cn,void 0),e!==void 0?this.fallbacks=e:this.fallbacks=["red","blue","green","orange"],Q(this,Cn,document.body)}setElementBase(e){Q(this,Cn,e)}add(e,r){A(this,_n).set(e,r)}alias(e,r){A(this,Bi).set(e,r)}get(e,r){const n=A(this,Bi).get(e);n!==void 0&&(e=n);const i=A(this,_n).get(e);if(i!==void 0)return i;const s="--"+e;let o=getComputedStyle(A(this,Cn)).getPropertyValue(s).trim();if(o===void 0||o.length===0){if(r!==void 0)return r;o=this.fallbacks[A(this,Br)],Fp(this,Br)._++,A(this,Br)===this.fallbacks.length&&Q(this,Br,0)}return o}getOrAdd(e,r){if(this.has(e))return this.get(e);const n=this.get(e,r);return this.add(e,n),n}has(e){return A(this,_n).has(e)}};_n=new WeakMap;Bi=new WeakMap;Br=new WeakMap;Cn=new WeakMap;try{typeof window<"u"&&(window.ixfx={...window.ixfx,Visuals:{SceneGraph:Eu,Plot2:bu,Drawing:$s,Svg:mu,Plot:xu,Palette:Au,Colour:ti,Video:au}})}catch{}var Cb={};N(Cb,{Forms:()=>th,clear:()=>mm,copyToClipboard:()=>wm,createAfter:()=>dm,createIn:()=>vm,dataTable:()=>ym,dataTableList:()=>pm,defaultErrorHandler:()=>kb,fullSizeCanvas:()=>cm,fullSizeElement:()=>hh,getTranslation:()=>fm,log:()=>Sb,parentSize:()=>hm,parentSizeCanvas:()=>va,pointerVisualise:()=>Mb,reconcileChildren:()=>xm,resizeObservable:()=>ya,resolveEl:()=>Ce,rx:()=>Fb,themeChangeObservable:()=>gm,windowResize:()=>pa});var $b=(e,r)=>{const n=document.createElement("style");n.textContent=r;let i;return e.shadowRoot?(i=e.shadowRoot,i.innerHTML=""):i=e.attachShadow({mode:"open"}),i.appendChild(n),i},Sb=(e,r={})=>{const{capacity:n=0,monospaced:i=!0,timestamp:s=!1,collapseDuplicates:o=!0,css:a=""}=r;let u=0,l,c=0;const h=Ce(e),d=$b(h,`
  .log {
    font-family: ${i?'Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", Monaco, "Courier New", Courier, monospace':"normal"};
    background-color: var(--code-background-color);
    padding: var(--padding1, 0.2em);
    overflow-y: auto;
    height:100%;
  }
  .timestamp {
    margin-right: 0.5em;
    opacity: 0.5;
    font-size: 70%;
    align-self: center;
  }
  .line {
    display: flex;
    padding-bottom: 0.1em;
    padding-top: 0.1em;
  }
  .line:hover {
  
  }
  .error {
    color: red;
  }
  .badge {
    border: 1px solid currentColor;
    align-self: center;
    font-size: 70%;
    padding-left: 0.2em;
    padding-right: 0.2em;
    border-radius: 1em;
    margin-left: 0.5em;
    margin-right: 0.5em;
  }
  .msg {
    flex: 1;
    word-break: break-word;
  }
  ${a}
  `),v=document.createElement("div");v.className="log",d.append(v);const m=B=>{const k=document.createElement("div");if(typeof B=="string")k.innerHTML=B;else if(B instanceof Error){const te=B.stack;te===void 0?k.innerHTML=B.toString():k.innerHTML=te.toString()}else k.innerHTML=B;k.classList.add("error"),S(k),l=void 0,c=0};let x=0;const _=(B="")=>{let k;const te=window.performance.now()-x;if(!(r.minIntervalMs&&te<r.minIntervalMs))if(x=window.performance.now(),typeof B=="object"?k=JSON.stringify(B):B===void 0?k="(undefined)":B===null?k="(null)":typeof B=="number"?(Number.isNaN(k)&&(k="(NaN)"),k=B.toString()):k=B,k.length===0){const L=document.createElement("hr");l=void 0,S(L)}else if(k===l&&o){const L=v.firstElementChild;let K=L.querySelector(".badge");return K===null&&(K=document.createElement("div"),K.className="badge",L.insertAdjacentElement("beforeend",K)),L!==null&&(K.textContent=(++c).toString()),L}else{const L=document.createElement("div");return L.innerText=k,S(L),l=k,L}},S=B=>{if(s){const k=document.createElement("div"),te=document.createElement("div");te.className="timestamp",te.innerText=new Date().toLocaleTimeString(),k.append(te,B),B.classList.add("msg"),k.classList.add("line"),B=k}else B.classList.add("line","msg");if(r.reverse?v.appendChild(B):v.insertBefore(B,v.firstChild),n>0&&++u>n*2)for(;u>n;)v.lastChild?.remove(),u--;r.reverse&&(v.scrollTop=v.scrollHeight),c=0};return{error:m,log:_,append:S,clear:()=>{v.innerHTML="",l=void 0,c=0,u=0},dispose:()=>{v.remove()},get isEmpty(){return u===0}}},Fb=(e,r,n)=>{const i=Ce(e),s=qi(i,r),o={},a=()=>{Object.keys(o).forEach(c=>{delete o[c]})},u=l=>(l.subscribe({next:c=>{Object.assign(o,c)}}),{value:o,clear:a});return n===void 0?u(s):n.pluck?u(s.pipe(ji(l=>l[n.pluck]))):n.transform?u(s.pipe(ji(l=>n.transform(l)))):u(s)},L0=class{constructor(e){y(this,"store"),y(this,"gog"),this.store=new Map,this.gog=mh(this.store,e)}get size(){return this.store.size}has(e){return this.store.has(e)}async seen(e,...r){return(await this.getTrackedValue(e,...r)).seen(...r)}async getTrackedValue(e,...r){if(e===null)throw new Error("id parameter cannot be null");if(e===void 0)throw new Error("id parameter cannot be undefined");return await this.gog(e,r[0])}delete(e){this.store.delete(e)}reset(){this.store=new Map}*ids(){yield*this.store.keys()}*tracked(){yield*this.store.values()}*trackedByAge(){const e=Array.from(this.store.values());e.sort((r,n)=>{const i=r.elapsed,s=n.elapsed;return i===s?0:i>s?-1:1});for(const r of e)yield r}*valuesByAge(){for(const e of this.trackedByAge())yield e.last}*last(){for(const e of this.store.values())yield e.last}*initialValues(){for(const e of this.store.values())yield e.initial}get(e){return this.store.get(e)}},Pb=class extends eu{constructor(e,r={}){super(e,r);y(this,"values"),this.values=[]}onReset(){this.values=[]}seenImpl(e){const r=e.map(i=>"at"in i?i:{...i,at:Date.now()}),n=r.at(-1);return this.storeIntermediate?this.values.push(...r):this.values.length===0?this.values.push(n):this.values.length===2?this.values[1]=n:this.values.length===1&&this.values.push(n),r}get last(){return this.values.length===1?this.values[0]:this.values.at(-1)}get initial(){return this.values.at(0)}get size(){return this.values.length}get elapsed(){return Date.now()-this.values[0].at}},_u=class extends Pb{constructor(e,r={}){super(e,r);this.id=e,y(this,"initialRelation"),y(this,"lastResult")}get x(){return this.last.x}get y(){return this.last.y}onReset(){super.onReset(),this.lastResult=void 0,this.initialRelation=void 0}seen(...e){const r=this.last;super.seen(...e);const n=this.last;if(this.initialRelation===void 0&&this.initial)this.initialRelation=To(this.initial);else if(this.initialRelation===void 0)throw new Error("Bug: No initialRelation, and this.inital is undefined?");const i=To(r),s={...this.initialRelation(n)},o={...i(n),speed:this.values.length<2?0:Ze(r,n)/(n.at-r.at)},a={fromInitial:s,fromLast:o,values:[...this.values]};return this.lastResult=a,a}get line(){return this.values.length===1?[]:bf(...this.values)}distanceFromStart(){const e=this.initial;return this.values.length>=2&&e!==void 0?xt(e,this.last):0}difference(){const e=this.initial;return this.values.length>=2&&e!==void 0?Na(this.last,e):_f}angleFromStart(){const e=this.initial;if(e!==void 0&&this.values.length>2)return Ir(e,this.last)}get length(){if(this.values.length===1)return 0;const e=this.line;return Ze(e)}},O0=class extends L0{constructor(e={}){super((r,n)=>{if(n===void 0)throw new Error("Requires start point");const i=new _u(r,e);return i.seen(n),i})}},j0=(e={})=>new O0(e),Bb=(e,r={})=>new _u(e??"",r),Mb=(e,r={})=>{const n=r.touchRadius??45,i=r.touchRadius??20,s=r.trace??!1,o=r.hue??100,a=`hsla(${o}, 100%, 10%, 10%)`;let u=o;const l=Ce(e),c=j0({storeIntermediate:s}),h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.id="pointerVis",h.style.zIndex="-1000",h.style.position="fixed",h.style.top="0",h.style.left="0",h.style.width="100%",h.style.height="100%",h.style.boxSizing="border-box",h.style.border="3px solid red",h.style.pointerEvents="none",h.style.touchAction="none",hh(h);let f=0;const d=async m=>{const x=m.pointerId.toString();c.delete(x),u=o,h.querySelector(`#pv-start-${x}`)?.remove();for(let _=0;_<f+10;_++)h.querySelector(`#pv-progress-${x}-${_}`)?.remove();f=0},v=async m=>{const x=m.pointerId.toString(),_={x:m.x,y:m.y},S=m.pointerType;if(m.type==="pointermove"&&!c.has(x))return;const M=await c.seen(x,_);if(M.values.length===1){const k=es.circle({...M.values[0],radius:S==="touch"?n:i},h,{fillStyle:a},`#pv-start-${x}`);k.style.pointerEvents="none",k.style.touchAction="none"}const X=`hsla(${u}, 100%, 50%, 50%)`,B=es.circle({..._,radius:S==="touch"?n:i},h,{fillStyle:X},`#pv-progress-${x}-${M.values.length}`);return B.style.pointerEvents="none",B.style.touchAction="none",u+=1,f=M.values.length,!0};document.body.appendChild(h),l.addEventListener("pointerdown",v),l.addEventListener("pointermove",v),l.addEventListener("pointerup",d),l.addEventListener("pointerleave",d),l.addEventListener("contextmenu",m=>{m.preventDefault()})},kb=()=>{let e=!0;const r=document.createElement("div");r.style.color="black",r.style.border="2px solid red",r.style.backgroundColor="hsl(0, 80%, 90%)",r.style.padding="1em",r.style.display="none",r.style.top="1em",r.style.left="1em",r.style.position="absolute",r.style.fontFamily="monospace";const n=document.createElement("div");n.style.maxWidth="50vw",n.style.maxHeight="50vh",n.style.overflowY="scroll",r.innerHTML="<h1>Error</h1>",r.append(n);const i=l=>{l.style.padding="0.3em",l.style.marginTop="1em"},s=document.createElement("button");s.innerText="Close",s.onclick=()=>{u()};const o=document.createElement("button");o.innerText="Stop displaying errors",o.onclick=()=>{e=!1,u()},i(s),i(o),r.append(s),r.append(o),document.body.append(r);const a=l=>{r.style.display="inline",l.stack?n.innerHTML+=`<pre>${l.stack}</pre>`:n.innerHTML+=`<p>${l}</p>`},u=()=>{r.style.display="none"};return window.onerror=(l,c,h,f,d)=>{e&&(d?(console.log(d),a(d)):(console.log(l),a(l)))},window.addEventListener("unhandledrejection",l=>{console.log(l.reason),e&&a(l.reason)}),{show:a,hide:u}},Nb={};N(Nb,{Easings:()=>Pa,Forces:()=>$u,Oscillators:()=>Pu,adsr:()=>Cu,adsrSample:()=>U0,defaultAdsrOpts:()=>H0,jitter:()=>Z0,pingPong:()=>ga,pingPongPercent:()=>dh});var q0={};N(q0,{adsr:()=>Cu,adsrSample:()=>U0,defaultAdsrOpts:()=>H0});var H0=()=>({attackBend:-1,decayBend:-.3,releaseBend:-.3,peakLevel:1,initialLevel:0,sustainLevel:.6,releaseLevel:0,attackDuration:600,decayDuration:200,releaseDuration:800,shouldLoop:!1}),ke,Mi,pt,rr,Mt,Tb=class extends jt{constructor(e){super();le(this,ke,void 0),le(this,Mi,void 0),le(this,pt,void 0),le(this,rr,void 0),le(this,Mt,void 0),y(this,"attackDuration"),y(this,"decayDuration"),y(this,"releaseDuration"),y(this,"decayDurationTotal"),y(this,"shouldLoop"),this.attackDuration=e.attackDuration??300,this.decayDuration=e.decayDuration??500,this.releaseDuration=e.releaseDuration??1e3,this.shouldLoop=e.shouldLoop??!1;const r={attack:["decay","release"],decay:["sustain","release"],sustain:["release"],release:["complete"],complete:null};Q(this,ke,new on("attack",r)),A(this,ke).addEventListener("change",n=>{n.newState==="release"&&A(this,Mt)&&A(this,pt)?.reset(),super.fireEvent("change",n)}),A(this,ke).addEventListener("stop",n=>{super.fireEvent("complete",n)}),Q(this,Mi,gr),Q(this,rr,Q(this,Mt,!1)),this.decayDurationTotal=this.attackDuration+this.decayDuration}switchState(){if(A(this,pt)===void 0)return!1;let e=A(this,pt).elapsed;const r=A(this,Mt)&&!A(this,rr);let n=!1;do switch(n=!1,A(this,ke).state){case"attack":(e>this.attackDuration||r)&&(A(this,ke).next(),n=!0);break;case"decay":(e>this.decayDurationTotal||r)&&(A(this,ke).next(),n=!0);break;case"sustain":(!A(this,rr)||r)&&(e=0,A(this,ke).next(),A(this,pt)?.reset(),n=!0);break;case"release":e>this.releaseDuration&&(A(this,ke).next(),n=!0);break;case"complete":this.shouldLoop&&this.trigger(A(this,Mt))}while(n);return n}computeRaw(e=!0){if(A(this,pt)===void 0)return[void 0,0,A(this,ke).state];e&&this.switchState();const r=A(this,ke).state,n=A(this,pt).elapsed;let i=0;const s=A(this,ke).state;switch(s){case"attack":i=n/this.attackDuration;break;case"decay":i=(n-this.attackDuration)/this.decayDuration;break;case"sustain":i=1;break;case"release":i=Math.min(n/this.releaseDuration,1);break;case"complete":return[void 0,1,r];default:throw new Error(`State machine in unknown state: ${s}`)}return[s,i,r]}get isDone(){return A(this,ke).isDone}onTrigger(){}trigger(e=!1){this.onTrigger(),A(this,ke).reset(),Q(this,pt,A(this,Mi).call(this)),Q(this,rr,e),Q(this,Mt,e)}compute(){}release(){this.isDone||!A(this,Mt)||(Q(this,rr,!1),this.compute())}};ke=new WeakMap;Mi=new WeakMap;pt=new WeakMap;rr=new WeakMap;Mt=new WeakMap;var zb=class extends Tb{constructor(e){super(e);y(this,"attackPath"),y(this,"decayPath"),y(this,"releasePath"),y(this,"initialLevel"),y(this,"peakLevel"),y(this,"releaseLevel"),y(this,"sustainLevel"),y(this,"attackBend"),y(this,"decayBend"),y(this,"releaseBend"),y(this,"initialLevelOverride"),y(this,"retrigger"),y(this,"releasedAt"),this.initialLevel=e.initialLevel??0,this.peakLevel=e.peakLevel??1,this.releaseLevel=e.releaseLevel??0,this.sustainLevel=e.sustainLevel??.75,this.retrigger=e.retrigger??!0,this.attackBend=e.attackBend??0,this.releaseBend=e.releaseBend??0,this.decayBend=e.decayBend??0;const r=1;this.attackPath=Fi(Rr({x:0,y:this.initialLevel},{x:r,y:this.peakLevel},-this.attackBend)),this.decayPath=Fi(Rr({x:0,y:this.peakLevel},{x:r,y:this.sustainLevel},-this.decayBend)),this.releasePath=Fi(Rr({x:0,y:this.sustainLevel},{x:r,y:this.releaseLevel},-this.releaseBend))}onTrigger(){if(this.initialLevelOverride=void 0,!this.retrigger){const[e,r,n]=this.compute();!Number.isNaN(r)&&r>0&&(this.initialLevelOverride=r)}}get value(){return this.compute(!0)[1]}compute(e=!0){const[r,n]=super.computeRaw(e);if(r===void 0)return[void 0,NaN,NaN];let i;switch(r){case"attack":i=this.attackPath.interpolate(n).y,this.initialLevelOverride!==void 0&&(i=Dt(i,0,1,this.initialLevelOverride,1)),this.releasedAt=i;break;case"decay":i=this.decayPath.interpolate(n).y,this.releasedAt=i;break;case"sustain":i=this.sustainLevel,this.releasedAt=i;break;case"release":i=this.releasePath.interpolate(n).y,this.releasedAt!==void 0&&(i=Dt(i,0,this.sustainLevel,0,this.releasedAt));break;case"complete":i=this.releaseLevel,this.releasedAt=void 0;break;default:throw new Error(`Unknown state: ${r}`)}return[r,i,n]}},Cu=e=>new zb(e);async function*U0(e,r){if(e.shouldLoop)throw new Error("Cannot sample a looping envelope");const n=Cu(e);for(n.trigger();;){await fr(r);const i=n.value;if(n.isDone)return;yield i}}var $u={};N($u,{accelerationForce:()=>qb,angleFromAccelerationForce:()=>G0,angleFromVelocityForce:()=>J0,angularForce:()=>W0,apply:()=>jb,attractionForce:()=>Lb,computeAccelerationToTarget:()=>Y0,computeAttractionForce:()=>V0,computePositionFromAngle:()=>K0,computePositionFromVelocity:()=>Fu,computeVelocity:()=>Su,constrainBounce:()=>Rb,guard:()=>Ib,magnitudeForce:()=>Hb,nullForce:()=>Ub,orientationForce:()=>Kb,pendulumForce:()=>Gb,springForce:()=>Wb,targetForce:()=>Ob,velocityForce:()=>Vb});var Ib=(e,r="t")=>{if(e===void 0)throw new Error(`Parameter ${r} is undefined. Expected ForceAffected`);if(e===null)throw new Error(`Parameter ${r} is null. Expected ForceAffected`);if(typeof e!="object")throw new Error(`Parameter ${r} is type ${typeof e}. Expected object of shape ForceAffected`)},Rb=(e={width:1,height:1},r=1)=>{const n=Lo(e,"left"),i=Lo(e,"right"),s=Oo(e,"top"),o=Oo(e,"bottom");return a=>{const u=Fu(a.position??b.Empty,a.velocity??b.Empty);let l=a.velocity??b.Empty,{x:c,y:h}=u;return c>i?(c=i,l=b.invert(b.multiply(l,r),"x")):c<n&&(c=n,l=b.invert(b.multiply(l,r),"x")),h>o?(h=o,l=b.multiply(b.invert(l,"y"),r)):u.y<s&&(h=s,l=b.invert(b.multiply(l,r),"y")),Object.freeze({...a,position:{x:c,y:h},velocity:l})}},Lb=(e,r,n={})=>i=>{let s=i.acceleration??b.Empty;return e.forEach(o=>{if(o===i)return;const a=V0(o,i,r,n);s=b.sum(s,a)}),{...i,acceleration:s}},V0=(e,r,n,i={})=>{if(e.position===void 0)throw new Error("attractor.position not set");if(r.position===void 0)throw new Error("attractee.position not set");const s=i.min??.01,o=i.max??.7,a=b.normalise(b.subtract(e.position,r.position)),u=Le(b.distance(a),s,o);return b.multiply(a,n*(e.mass??1)*(r.mass??1)/(u*u))},Ob=(e,r={})=>i=>{const s=Y0(e,i.position??{x:.5,y:.5},r);return{...i,acceleration:b.sum(i.acceleration??b.Empty,s)}},jb=(e,...r)=>{if(e===void 0)throw new Error("t parameter is undefined");r.forEach(o=>{o!=null&&(typeof o=="function"?e=o(e):e={...e,acceleration:b.sum(e.acceleration??b.Empty,o)})});const n=Su(e.acceleration??b.Empty,e.velocity??b.Empty),i=Fu(e.position??b.Empty,n);return{...e,position:i,velocity:n,acceleration:b.Empty}},qb=(e,r="ignored")=>n=>Object.freeze({...n,acceleration:ks(e,n,r)}),ks=(e,r,n="ignored")=>{let i;if(n==="dampen")i=s=>b.divide(e,s,s);else if(n==="multiply")i=s=>b.multiply(e,s,s);else if(n==="ignored")i=s=>e;else throw new Error(`Unknown 'mass' parameter '${n}. Expected 'dampen', 'multiply' or 'ignored'`);return b.sum(r.acceleration??b.Empty,i(r.mass??1))},Hb=(e,r="ignored")=>n=>{if(n.velocity===void 0)return n;const i=b.distance(b.normalise(n.velocity)),s=e*i*i,o=b.multiply(b.invert(n.velocity),s);return Object.freeze({...n,acceleration:ks(o,n,r)})},Ub=e=>e,Vb=(e,r)=>{const n=b.pipeline(b.invert,i=>b.multiply(i,e));return i=>{if(i.velocity===void 0)return i;const s=n(i.velocity);return Object.freeze({...i,acceleration:ks(s,i,r)})}},W0=()=>e=>{const r=e.angularAcceleration??0,n=e.angularVelocity??0,i=e.angle??0,s=n+r,o=i+s;return Object.freeze({...e,angle:o,angularVelocity:s,angularAcceleration:0})},G0=(e=20)=>r=>{const n=r.acceleration??b.Empty;return Object.freeze({...r,angularAcceleration:n.x*e})},J0=(e=1)=>r=>{const n=b.angle(r.velocity??b.Empty);return Object.freeze({...r,angle:e<1?rv(e,r.angle??0,n):n})},Wb=(e,r=.5,n=2e-4,i=.999)=>s=>{const o=b.subtract(s.position??b.Empty,e),a=b.distance(o),u=Math.abs(r-a),l=b.pipelineApply(o,b.normalise,d=>b.multiply(d,-n*u)),c=ks(l,s,"dampen"),h=Su(c??b.Empty,s.velocity??b.Empty),f=b.multiply(h,i,i);return{...s,velocity:f,acceleration:b.Empty}},Gb=(e={x:.5,y:0},r={})=>n=>{const i=r.length??b.distance(e,n.position??b.Empty),s=r.speed??.001,o=r.damping??.995;let a=n.angle;a===void 0&&(n.position?a=b.angle(e,n.position)-Math.PI/2:a=0);const u=-1*s/i*Math.sin(a),l=(n.angularVelocity??0)+u;return a+=l,Object.freeze({angularVelocity:l*o,angle:a,position:K0(i,a+Math.PI/2,e)})},Su=(e,r,n)=>{const i=b.sum(r,e);return n!==void 0?b.clampMagnitude(i,n):i},Y0=(e,r,n={})=>{const i=n.diminishBy??.001,s=b.subtract(e,r);return n.range&&b.compare(b.abs(s),n.range)===-2?b.Empty:b.multiply(s,i)},Fu=(e,r)=>b.sum(e,r),K0=(e,r,n)=>nt.toCartesian(e,r,n),Jb=W0(),Yb=G0(),Kb=(e=.5)=>{const r=J0(e);return n=>(n=Jb(n),n=Yb(n),n=r(n),n)},Pu={};N(Pu,{saw:()=>rE,sine:()=>Qb,sineBipolar:()=>eE,spring:()=>Zb,square:()=>nE,triangle:()=>tE});var X0=Math.PI*2,Xb=(e={},r=0,n=1)=>{const i=e.mass??1,s=e.stiffness??100,o=e.soft??!1,a=e.damping??10,u=e.velocity??.1,l=n-r;if(o===!0||1<=a/(2*Math.sqrt(s*i))){const c=-Math.sqrt(s/i),h=-c*l-u;return f=>n-(l+f*h)*Math.E**(f*c)}else{const c=Math.sqrt(4*i*s-a**2),h=(a*l-2*i*u)/c,f=.5*c/i,d=-(.5*a)/i;return v=>n-(Math.cos(v*f)*l+Math.sin(v*f)*h)*Math.E**(v*d)}};function*Zb(e={},r){r===void 0&&(r=gr());const n=Xb(e,0,1);let i=e.countdown??10;for(;i>0;){const s=n(r.elapsed/1e3);yield s,s===1?i--:i=100}}function*Qb(e){for(typeof e=="number"&&(e=qt(e));;)yield(Math.sin(e.elapsed*X0)+1)/2}function*eE(e){for(typeof e=="number"&&(e=qt(e));;)yield Math.sin(e.elapsed*X0)}function*tE(e){for(typeof e=="number"&&(e=qt(e));;){let r=e.elapsed;r<.5?r*=2:r=2-r*2,yield r}}function*rE(e){for(typeof e=="number"&&(e=qt(e));;)yield e.elapsed}function*nE(e){for(typeof e=="number"&&(e=qt(e));;)yield e.elapsed<.5?0:1}var Z0=(e,r,n={})=>{const i=n.type??"abs",s=n.clamped??!0,o=n.random??et;R(e,s?"percentage":"bipolar","value"),R(r,s?"percentage":"bipolar","jitter");let a;if(i==="rel"){r=e*r;const u=r*2*o();a=e-r+u}else if(i==="abs"){const u=r*2*o();a=e-r+u}else throw new Error(`Unknown jitter type: ${i}.`);return s?Le(a):a};try{typeof window<"u"&&(window.ixfx={...window.ixfx,Modulation:{Forces:$u,jitter:Z0,Envelopes:q0,Oscillators:Pu,Easings:Pa}})}catch{}var Ne,Mr,Q0=class extends jt{constructor(e=void 0){super();le(this,Ne,void 0),le(this,Mr,void 0),Q(this,Ne,new Map),e===void 0&&(e=r=>{if(r===void 0)throw new Error("Cannot create key for undefined");return typeof r=="string"?r:JSON.stringify(r)}),Q(this,Mr,e)}clear(){A(this,Ne).clear(),this.fireEvent("change",void 0)}keys(){return A(this,Ne).keys()}values(){return A(this,Ne).values()}toArray(){return Array.from(A(this,Ne).entries())}debugString(){let e="";for(const[r,n]of A(this,Ne).entries())e+=`${r}: ${n}, `;return e.endsWith(", ")?e.substring(0,e.length-2):e}frequencyOf(e){if(typeof e=="string")return A(this,Ne).get(e);const r=A(this,Mr).call(this,e);return A(this,Ne).get(r)}relativeFrequencyOf(e){let r;if(typeof e=="string")r=A(this,Ne).get(e);else{const i=A(this,Mr).call(this,e);r=A(this,Ne).get(i)}if(r===void 0)return;const n=this.minMaxAvg();return r/n.total}entries(){return Array.from(A(this,Ne).entries())}minMaxAvg(){return Sh.minMaxAvg(this.entries())}entriesSorted(e="value"){return Iu(e)(this.entries())}add(...e){if(e===void 0)throw new Error("value parameter is undefined");e.map(A(this,Mr)).forEach(n=>{const i=A(this,Ne).get(n)??0;A(this,Ne).set(n,i+1)}),this.fireEvent("change",void 0)}};Ne=new WeakMap;Mr=new WeakMap;var iE=e=>new Q0(e),sE=(e=3)=>{me(e,"aboveZero","scaling");let r=0,n=0;return{add(s){return n++,r=r+(s-r)/Math.min(n,e),r},clear(){r=0,n=0},compute(){return r}}},oE=(e=100,r)=>{let n=Kr({capacity:e,discardPolicy:"older"});const i=()=>{n=Kr({capacity:e,discardPolicy:"older"})},s=()=>r===void 0?Qe.average(n.data):Qe.averageWeighted(n.data,r);return{add:a=>(n.enqueue(a),s()),compute:s,clear:i}},ev=class extends tu{constructor(){super(...arguments);y(this,"lastMark",0)}mark(){this.lastMark>0&&this.seen(window.performance.now()-this.lastMark),this.lastMark=window.performance.now()}},aE=(e,r)=>new ev(e,r),ki=e=>(typeof e=="function"&&(e=e()),R(e,"percentage","v"),1-e),tv=(e,r=0,n=360)=>(me(e,void 0,"v"),me(r,void 0,"min"),me(n,void 0,"max"),e===r||e===n?r:(e>0&&e<r&&(e+=r),e-=r,n-=r,e=e%n,e<0&&(e=n-Math.abs(e)+r),e+r)),rs=(e,r=0,n=1)=>{if(R(e,"","min"),R(r,"","min"),R(n,"","max"),e===r||e===n)return r;for(;(e<=r||e>=n)&&!(e===n||e===r);)e>n?e=r+(e-n):e<r&&(e=n-(r-e));return e},uE=(e,r,n,i,s)=>{let o=0;const a=Math.abs(s-i),u=Math.abs(r-i+s),l=Math.abs(i+(360-s)),c=Math.min(a,u,l);return c===l?o=i-n(c):c===u?o=i+n(c):i>s?o=i-n(c):o=i+n(c),tv(o,e,r)},Jo=Math.PI*2,Bu=(e,r,n)=>(1-e)*r+e*n,rv=(e,r,n)=>{const i=rs(n-r,0,Jo);return Bu(e,r,r+(i>Math.PI?i-Jo:i))},$n=Math.sqrt,pe=Math.pow,Jl=Math.cos,nr=Math.PI,Dn=Math.sin,lE=function(e,r){return nv(e,r,gr)},cE=function(e,r){return nv(e,r,ba)},nv=function(e,r,n){let i;if(typeof e=="function"?i=e:i=Ns(e),i===void 0)throw new Error(`Easing function not found: ${e}`);const s=Da(r,n(),!0);return{get isDone(){return s.isDone},compute:()=>{const o=s.elapsed;return i(o)},reset:()=>{s.reset()}}},hE=(e,r)=>n=>{const i=1-n,s=i*i,o=n*n,a=o*n;return 3*e*s*n+3*r*i*o+a},iv=(e,r,n,i)=>Bu(r,n(e),i(e)),fE=(e,r,n)=>iv(e,e,r,n),Ns=function(e){if(e===null)throw new Error("easingName is null");if(e===void 0)throw new Error("easingName is undefined");const r=e.toLocaleLowerCase(),n=Object.entries(Mu).find(([i,s])=>i.toLocaleLowerCase()===r);return n===void 0?n:n[1]},dE=function(){return Array.from(Object.keys(Mu))},sv=(e=.4)=>{const r=1/$n(2*nr),n=.5;return i=>{const s=r/e;let o=-2.5,a=(i-n)/e;a*=a,o*=a;const u=s*pe(Math.E,o);return u>1?1:u<0?0:u}},mi=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},vE=e=>e*e*e*e*e,pE=e=>1-pe(1-e,5),yE=e=>e*(1-e)*4,Mu={arch:yE,bell:sv(),sineIn:e=>1-Jl(e*nr/2),sineOut:e=>Dn(e*nr/2),quadIn:e=>e*e,quadOut:e=>1-(1-e)*(1-e),sineInOut:e=>-(Jl(nr*e)-1)/2,quadInOut:e=>e<.5?2*e*e:1-pe(-2*e+2,2)/2,cubicIn:e=>e*e*e,cubicOut:e=>1-pe(1-e,3),quartIn:e=>e*e*e*e,quartOut:e=>1-pe(1-e,4),quintIn:vE,quintOut:pE,expoIn:e=>e===0?0:pe(2,10*e-10),expoOut:e=>e===1?1:1-pe(2,-10*e),quintInOut:e=>e<.5?16*e*e*e*e*e:1-pe(-2*e+2,5)/2,expoInOut:e=>e===0?0:e===1?1:e<.5?pe(2,20*e-10)/2:(2-pe(2,-20*e+10))/2,circIn:e=>1-$n(1-pe(e,2)),circOut:e=>$n(1-pe(e-1,2)),backIn:e=>2.70158*e*e*e-1.70158*e*e,backOut:e=>1+2.70158*pe(e-1,3)+1.70158*pe(e-1,2),circInOut:e=>e<.5?(1-$n(1-pe(2*e,2)))/2:($n(1-pe(-2*e+2,2))+1)/2,backInOut:e=>{const n=2.5949095;return e<.5?pe(2*e,2)*((n+1)*2*e-n)/2:(pe(2*e-2,2)*((n+1)*(e*2-2)+n)+2)/2},elasticIn:e=>{const r=2*nr/3;return e===0?0:e===1?1:-pe(2,10*e-10)*Dn((e*10-10.75)*r)},elasticOut:e=>{const r=2*nr/3;return e===0?0:e===1?1:pe(2,-10*e)*Dn((e*10-.75)*r)+1},bounceIn:e=>1-mi(1-e),bounceOut:mi,elasticInOut:e=>{const r=2*nr/4.5;return e===0?0:e===1?1:e<.5?-(pe(2,20*e-10)*Dn((20*e-11.125)*r))/2:pe(2,-20*e+10)*Dn((20*e-11.125)*r)/2+1},bounceInOut:e=>e<.5?(1-mi(1-2*e))/2:(1+mi(2*e-1))/2},et=Math.random,ov=(e="quadIn",r=et)=>{const n=r(),i=Ns(e);if(i===void 0)throw new Error(`Easing function '${e}' not found.`);return i(n)},mE=(e="quadIn",r=et)=>()=>ov(e,r),gE=(e,r,n,i=et)=>{R(e);let s,o,a;if(a="quadIn",s=0,r===void 0)o=e;else if(typeof r=="number")s=e,o=r,n!==void 0&&(a=n);else if(typeof r=="string")o=e,a=r;else throw new Error(`Unexpected value type for maxOrEasing: ${r}`);n!==void 0&&(a=n);const u=Ns(a);if(u===void 0)throw new Error(`Easing '${a}' not found`);if(R(s),o<=s)throw new Error("Max should be greater than min");const l=Le(u(i()));return Math.floor(l*(o-s))+s},ku=(e=1)=>{let i=0,s=0;for(;i===0;)i=Math.random();for(;s===0;)s=Math.random();let o=Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*s);return o=o/10+.5,o>1||o<0?o=ku(e):(o=Math.pow(o,e),o*=1-0,o+=0),o},wE=(e=1)=>()=>ku(e),xE=(e,r)=>{let n=!1;r===void 0&&(e<0&&(e=Math.abs(e),n=!0),r=0);const i=e-r,s=Math.floor(Math.random()*i)+r;return n?-s:s},DE=(e=1,r=0)=>Math.random()*(e-r)+r,av=e=>Math.random().toString(36).substring(2,e+2),bE=()=>{const e=Math.random()*46656|0,r=Math.random()*46656|0,n=`000${e.toString(36)}`.slice(-3),i=`000${r.toString(36)}`.slice(-3);return n+i},Ts=(e,r="?")=>{if(e===void 0)throw new Error(`Param '${r}' is undefined. Expected array.`);if(e===null)throw new Error(`Param '${r}' is null. Expected array.`);if(!Array.isArray(e))throw new Error(`Param '${r}' not an array as expected`)},ns=(e,r,n="index")=>{if(Ts(e),me(r,"positive",n),r>e.length-1)throw new Error(`'${n}' ${r} beyond array max of ${e.length-1}`)},Nu=(e,r)=>{if(!Array.isArray(e))throw new Error("Param 'array' is not an array.");if(e.length===0)return!0;const n=r===void 0?eh:r,i=e[0];return!e.some(o=>!n(i,o))},EE=(e,r,n=Xn)=>e.filter(i=>r.some(s=>n(i,s))),AE=e=>Array.prototype.concat.apply([],[...e]),uv=(...e)=>{if(e.some(s=>!Array.isArray(s)))throw new Error("All parameters must be an array");const r=e.map(s=>s.length);if(!Nu(r))throw new Error("Arrays must be of same length");const n=[],i=r[0];for(let s=0;s<i;s++)n.push(e.map(o=>o[s]));return n},_E=(...e)=>{if(e.some(s=>!Array.isArray(s)))throw new Error("All parameters must be an array");const r=e.map(s=>s.length);if(!Nu(r))throw new Error("Arrays must be of same length");const n=[],i=r[0];for(let s=0;s<i;s++)for(let o=0;o<e.length;o++)n.push(e[o][s]);return n},CE=(e,r,n="undefined")=>{if(e===void 0)throw new Error("Data undefined");if(!Array.isArray(e))throw new Error("data is not an array");if(e.length===r)return[...e];if(e.length>r)return e.slice(0,r);const i=[...e],s=r-i.length;for(let o=0;o<s;o++)n==="undefined"?i.push(void 0):n==="repeat"?i.push(e[o%e.length]):n==="first"?i.push(e[0]):n==="last"&&i.push(e[e.length-1]);return i},lv=(e,r,n,i)=>{Ts(e),typeof n>"u"&&(n=0),typeof i>"u"&&(i=e.length-1),ns(e,n,"startIndex"),ns(e,i,"endIndex");const s=[];for(let o=n;o<=i;o++)r(e[o],o,e)&&s.push(e[o]);return s},Tu=(e,r=et)=>Math.floor(r()*e.length),zu=(e,r=et)=>(Ts(e,"array"),e[Math.floor(r()*e.length)]),$E=(e,r=!1,n=et)=>{if(e===void 0)throw new Error("array is undefined");if(!Array.isArray(e))throw new Error("'array' param is not an array");if(e.length===0)return{value:void 0,array:[]};const i=Tu(e,n);if(r)return{value:e[i],array:e.splice(i,1)};{const s=[...e];return s.splice(i,1),{value:e[i],array:s}}},SE=(e,r=et)=>{const n=[...e];for(let i=n.length-1;i>0;i--){const s=Math.floor(r()*(i+1));[n[i],n[s]]=[n[s],n[i]]}return n},cv=(e,r,n=Xn)=>e.filter(i=>!n(i,r)),FE=(e,r)=>{if(!Array.isArray(e))throw new Error("'data' parameter should be an array");return ns(e,r,"index"),[...e.slice(0,r),...e.slice(r+1)]},PE=(e,r)=>e.reduce((n,i)=>{const s=r(i),o=n.get(s);return o===void 0?n.set(s,[i]):o.push(i),n},new Map),BE=(e,r)=>{let n=1;if(r<=1){const s=e.length*r;n=Math.round(e.length/s)}else n=r;if(me(n,"positive","amount"),n>e.length-1)throw new Error("Subsample steps exceeds array length");const i=[];for(let s=n-1;s<e.length;s+=n)i.push(e[s]);return i};function ME(e,r){const n=[];for(let i=0;i<e.length;i+=r)n.push(e.slice(i,i+r));return n}var kE=(e=!1)=>Ca(e?$a(Hi):Hi,Sa(r=>r[0])),hv=(e=!1)=>Ca(e?$a(Hi):Hi,Sa(r=>r[1])),NE=(e=!1)=>Ca(e?$a($o):$o,Sa(r=>r[1])),Yo=(e=!1)=>Fa(kE(e)),TE=(e=!1)=>Fa(hv(e)),Ko=(e=!1)=>Fa(NE(e)),Iu=e=>{switch(e){case"value":return Ko(!1);case"valueReverse":return Ko(!0);case"key":return Yo(!1);case"keyReverse":return Yo(!0);default:throw new Error(`Unknown sorting value '${e}'. Expecting: value, valueReverse, key or keyReverse`)}},zE=(e,r)=>{r===void 0&&(r=i=>i[1]);const n=e.map(r);return ds(n)};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const C_=Xv(class extends Zv{constructor(e){var r;if(super(e),e.type!==_r.ATTRIBUTE||e.name!=="class"||((r=e.strings)===null||r===void 0?void 0:r.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(r=>e[r]).join(" ")+" "}update(e,[r]){var n,i;if(this.et===void 0){this.et=new Set,e.strings!==void 0&&(this.st=new Set(e.strings.join(" ").split(/\s/).filter(o=>o!=="")));for(const o in r)r[o]&&!(!((n=this.st)===null||n===void 0)&&n.has(o))&&this.et.add(o);return this.render(r)}const s=e.element.classList;this.et.forEach(o=>{o in r||(s.remove(o),this.et.delete(o))});for(const o in r){const a=!!r[o];a===this.et.has(o)||((i=this.st)===null||i===void 0?void 0:i.has(o))||(a?(s.add(o),this.et.add(o)):(s.remove(o),this.et.delete(o)))}return zt}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xo=function(e,r){return Xo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},Xo(e,r)};function ln(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Xo(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}function IE(e,r,n,i){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function u(h){try{c(i.next(h))}catch(f){a(f)}}function l(h){try{c(i.throw(h))}catch(f){a(f)}}function c(h){h.done?o(h.value):s(h.value).then(u,l)}c((i=i.apply(e,r||[])).next())})}function fv(e,r){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,s,o,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(c){return function(h){return l([c,h])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,s&&(o=c[0]&2?s.return:c[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,c[1])).done)return o;switch(s=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=r.call(e,n)}catch(h){c=[6,h],s=0}finally{i=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Vn(e){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&e[r],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lt(e,r){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),s,o=[],a;try{for(;(r===void 0||r-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(u){a={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function pr(e,r,n){if(n||arguments.length===2)for(var i=0,s=r.length,o;i<s;i++)(o||!(i in r))&&(o||(o=Array.prototype.slice.call(r,0,i)),o[i]=r[i]);return e.concat(o||Array.prototype.slice.call(r))}function Hr(e){return this instanceof Hr?(this.v=e,this):new Hr(e)}function RE(e,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,r||[]),s,o=[];return s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s;function a(d){i[d]&&(s[d]=function(v){return new Promise(function(m,x){o.push([d,v,m,x])>1||u(d,v)})})}function u(d,v){try{l(i[d](v))}catch(m){f(o[0][3],m)}}function l(d){d.value instanceof Hr?Promise.resolve(d.value.v).then(c,h):f(o[0][2],d)}function c(d){u("next",d)}function h(d){u("throw",d)}function f(d,v){d(v),o.shift(),o.length&&u(o[0][0],o[0][1])}}function LE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],n;return r?r.call(e):(e=typeof Vn=="function"?Vn(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=e[o]&&function(a){return new Promise(function(u,l){a=e[o](a),s(u,l,a.done,a.value)})}}function s(o,a,u,l){Promise.resolve(l).then(function(c){o({value:c,done:u})},a)}}function he(e){return typeof e=="function"}function OE(e){var r=function(i){Error.call(i),i.stack=new Error().stack},n=e(r);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var uo=OE(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(i,s){return s+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Zo(e,r){if(e){var n=e.indexOf(r);0<=n&&e.splice(n,1)}}var Ru=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,n,i,s,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var u=Vn(a),l=u.next();!l.done;l=u.next()){var c=l.value;c.remove(this)}}catch(x){r={error:x}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}else a.remove(this);var h=this.initialTeardown;if(he(h))try{h()}catch(x){o=x instanceof uo?x.errors:[x]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=Vn(f),v=d.next();!v.done;v=d.next()){var m=v.value;try{Yl(m)}catch(x){o=o??[],x instanceof uo?o=pr(pr([],Lt(o)),Lt(x.errors)):o.push(x)}}}catch(x){i={error:x}}finally{try{v&&!v.done&&(s=d.return)&&s.call(d)}finally{if(i)throw i.error}}}if(o)throw new uo(o)}},e.prototype.add=function(r){var n;if(r&&r!==this)if(this.closed)Yl(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(r)}},e.prototype._hasParent=function(r){var n=this._parentage;return n===r||Array.isArray(n)&&n.includes(r)},e.prototype._addParent=function(r){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(r),n):n?[n,r]:r},e.prototype._removeParent=function(r){var n=this._parentage;n===r?this._parentage=null:Array.isArray(n)&&Zo(n,r)},e.prototype.remove=function(r){var n=this._finalizers;n&&Zo(n,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();function dv(e){return e instanceof Ru||e&&"closed"in e&&he(e.remove)&&he(e.add)&&he(e.unsubscribe)}function Yl(e){he(e)?e():e.unsubscribe()}var Lu={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},is={setTimeout:function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var s=is.delegate;return s?.setTimeout?s.setTimeout.apply(s,pr([e,r],Lt(n))):setTimeout.apply(void 0,pr([e,r],Lt(n)))},clearTimeout:function(e){var r=is.delegate;return(r?.clearTimeout||clearTimeout)(e)},delegate:void 0};function vv(e){is.setTimeout(function(){throw e})}function Kl(){}var jE=function(){return Ou("C",void 0,void 0)}();function qE(e){return Ou("E",void 0,e)}function HE(e){return Ou("N",e,void 0)}function Ou(e,r,n){return{kind:e,value:r,error:n}}function UE(e){e()}var ju=function(e){ln(r,e);function r(n){var i=e.call(this)||this;return i.isStopped=!1,n?(i.destination=n,dv(n)&&n.add(i)):i.destination=JE,i}return r.create=function(n,i,s){return new Qo(n,i,s)},r.prototype.next=function(n){this.isStopped?co(HE(n),this):this._next(n)},r.prototype.error=function(n){this.isStopped?co(qE(n),this):(this.isStopped=!0,this._error(n))},r.prototype.complete=function(){this.isStopped?co(jE,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(n){this.destination.next(n)},r.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(Ru),VE=Function.prototype.bind;function lo(e,r){return VE.call(e,r)}var WE=function(){function e(r){this.partialObserver=r}return e.prototype.next=function(r){var n=this.partialObserver;if(n.next)try{n.next(r)}catch(i){gi(i)}},e.prototype.error=function(r){var n=this.partialObserver;if(n.error)try{n.error(r)}catch(i){gi(i)}else gi(r)},e.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(n){gi(n)}},e}(),Qo=function(e){ln(r,e);function r(n,i,s){var o=e.call(this)||this,a;if(he(n)||!n)a={next:n??void 0,error:i??void 0,complete:s??void 0};else{var u;o&&Lu.useDeprecatedNextContext?(u=Object.create(n),u.unsubscribe=function(){return o.unsubscribe()},a={next:n.next&&lo(n.next,u),error:n.error&&lo(n.error,u),complete:n.complete&&lo(n.complete,u)}):a=n}return o.destination=new WE(a),o}return r}(ju);function gi(e){vv(e)}function GE(e){throw e}function co(e,r){var n=Lu.onStoppedNotification;n&&is.setTimeout(function(){return n(e,r)})}var JE={closed:!0,next:Kl,error:GE,complete:Kl},qu=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function YE(e){return e}function KE(e){return e.length===0?YE:e.length===1?e[0]:function(n){return e.reduce(function(i,s){return s(i)},n)}}var xr=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var n=new e;return n.source=this,n.operator=r,n},e.prototype.subscribe=function(r,n,i){var s=this,o=ZE(r)?r:new Qo(r,n,i);return UE(function(){var a=s,u=a.operator,l=a.source;o.add(u?u.call(o,l):l?s._subscribe(o):s._trySubscribe(o))}),o},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(n){r.error(n)}},e.prototype.forEach=function(r,n){var i=this;return n=Xl(n),new n(function(s,o){var a=new Qo({next:function(u){try{r(u)}catch(l){o(l),a.unsubscribe()}},error:o,complete:s});i.subscribe(a)})},e.prototype._subscribe=function(r){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(r)},e.prototype[qu]=function(){return this},e.prototype.pipe=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return KE(r)(this)},e.prototype.toPromise=function(r){var n=this;return r=Xl(r),new r(function(i,s){var o;n.subscribe(function(a){return o=a},function(a){return s(a)},function(){return i(o)})})},e.create=function(r){return new e(r)},e}();function Xl(e){var r;return(r=e??Lu.Promise)!==null&&r!==void 0?r:Promise}function XE(e){return e&&he(e.next)&&he(e.error)&&he(e.complete)}function ZE(e){return e&&e instanceof ju||XE(e)&&dv(e)}function QE(e){return he(e?.lift)}function Hu(e){return function(r){if(QE(r))return r.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ss(e,r,n,i,s){return new eA(e,r,n,i,s)}var eA=function(e){ln(r,e);function r(n,i,s,o,a,u){var l=e.call(this,n)||this;return l.onFinalize=a,l.shouldUnsubscribe=u,l._next=i?function(c){try{i(c)}catch(h){n.error(h)}}:e.prototype._next,l._error=o?function(c){try{o(c)}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=s?function(){try{s()}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return r.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},r}(ju),pv={now:function(){return(pv.delegate||Date).now()},delegate:void 0},tA=function(e){ln(r,e);function r(n,i){return e.call(this)||this}return r.prototype.schedule=function(n,i){return this},r}(Ru),os={setInterval:function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var s=os.delegate;return s?.setInterval?s.setInterval.apply(s,pr([e,r],Lt(n))):setInterval.apply(void 0,pr([e,r],Lt(n)))},clearInterval:function(e){var r=os.delegate;return(r?.clearInterval||clearInterval)(e)},delegate:void 0},rA=function(e){ln(r,e);function r(n,i){var s=e.call(this,n,i)||this;return s.scheduler=n,s.work=i,s.pending=!1,s}return r.prototype.schedule=function(n,i){if(i===void 0&&(i=0),this.closed)return this;this.state=n;var s=this.id,o=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(o,s,i)),this.pending=!0,this.delay=i,this.id=this.id||this.requestAsyncId(o,this.id,i),this},r.prototype.requestAsyncId=function(n,i,s){return s===void 0&&(s=0),os.setInterval(n.flush.bind(n,this),s)},r.prototype.recycleAsyncId=function(n,i,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return i;os.clearInterval(i)},r.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(n,i);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(n,i){var s=!1,o;try{this.work(n)}catch(a){s=!0,o=a||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),o},r.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,s=n.scheduler,o=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Zo(o,this),i!=null&&(this.id=this.recycleAsyncId(s,i,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(tA),Zl=function(){function e(r,n){n===void 0&&(n=e.now),this.schedulerActionCtor=r,this.now=n}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,r).schedule(i,n)},e.now=pv.now,e}(),nA=function(e){ln(r,e);function r(n,i){i===void 0&&(i=Zl.now);var s=e.call(this,n,i)||this;return s.actions=[],s._active=!1,s._scheduled=void 0,s}return r.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var s;this._active=!0;do if(s=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,s){for(;n=i.shift();)n.unsubscribe();throw s}},r}(Zl),iA=new nA(rA),yv=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function sA(e){return he(e?.then)}function oA(e){return he(e[qu])}function aA(e){return Symbol.asyncIterator&&he(e?.[Symbol.asyncIterator])}function uA(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function lA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var cA=lA();function hA(e){return he(e?.[cA])}function fA(e){return RE(this,arguments,function(){var n,i,s,o;return fv(this,function(a){switch(a.label){case 0:n=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Hr(n.read())];case 3:return i=a.sent(),s=i.value,o=i.done,o?[4,Hr(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Hr(s)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function dA(e){return he(e?.getReader)}function Uu(e){if(e instanceof xr)return e;if(e!=null){if(oA(e))return vA(e);if(yv(e))return pA(e);if(sA(e))return yA(e);if(aA(e))return mv(e);if(hA(e))return mA(e);if(dA(e))return gA(e)}throw uA(e)}function vA(e){return new xr(function(r){var n=e[qu]();if(he(n.subscribe))return n.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pA(e){return new xr(function(r){for(var n=0;n<e.length&&!r.closed;n++)r.next(e[n]);r.complete()})}function yA(e){return new xr(function(r){e.then(function(n){r.closed||(r.next(n),r.complete())},function(n){return r.error(n)}).then(null,vv)})}function mA(e){return new xr(function(r){var n,i;try{for(var s=Vn(e),o=s.next();!o.done;o=s.next()){var a=o.value;if(r.next(a),r.closed)return}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}r.complete()})}function mv(e){return new xr(function(r){wA(e,r).catch(function(n){return r.error(n)})})}function gA(e){return mv(fA(e))}function wA(e,r){var n,i,s,o;return IE(this,void 0,void 0,function(){var a,u;return fv(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=LE(e),l.label=1;case 1:return[4,n.next()];case 2:if(i=l.sent(),!!i.done)return[3,4];if(a=i.value,r.next(a),r.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=l.sent(),s={error:u},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}function xA(e,r,n,i,s){i===void 0&&(i=0),s===void 0&&(s=!1);var o=r.schedule(function(){n(),s?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!s)return o}function gv(e,r){return Hu(function(n,i){var s=0;n.subscribe(ss(i,function(o){i.next(e.call(r,o,s++))}))})}var DA=Array.isArray;function bA(e,r){return DA(r)?e.apply(void 0,pr([],Lt(r))):e(r)}function EA(e){return gv(function(r){return bA(e,r)})}function AA(e,r,n,i,s,o,a,u){var l=[],c=0,h=0,f=!1,d=function(){f&&!l.length&&!c&&r.complete()},v=function(x){return c<i?m(x):l.push(x)},m=function(x){o&&r.next(x),c++;var _=!1;Uu(n(x,h++)).subscribe(ss(r,function(S){s?.(S),o?v(S):r.next(S)},function(){_=!0},void 0,function(){if(_)try{c--;for(var S=function(){var M=l.shift();a?xA(r,a,function(){return m(M)}):m(M)};l.length&&c<i;)S();d()}catch(M){r.error(M)}}))};return e.subscribe(ss(r,v,function(){f=!0,d()})),function(){u?.()}}function wv(e,r,n){return n===void 0&&(n=1/0),he(r)?wv(function(i,s){return gv(function(o,a){return r(i,o,s,a)})(Uu(e(i,s)))},n):(typeof r=="number"&&(n=r),Hu(function(i,s){return AA(i,s,e,n)}))}var _A=["addListener","removeListener"],CA=["addEventListener","removeEventListener"],$A=["on","off"];function Ql(e,r,n,i){if(he(n)&&(i=n,n=void 0),i)return Ql(e,r,n).pipe(EA(i));var s=Lt(PA(e)?CA.map(function(u){return function(l){return e[u](r,l,n)}}):SA(e)?_A.map(ec(e,r)):FA(e)?$A.map(ec(e,r)):[],2),o=s[0],a=s[1];if(!o&&yv(e))return wv(function(u){return Ql(u,r,n)})(Uu(e));if(!o)throw new TypeError("Invalid event target");return new xr(function(u){var l=function(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return u.next(1<c.length?c:c[0])};return o(l),function(){return a(l)}})}function ec(e,r){return function(n){return function(i){return e[n](r,i)}}}function SA(e){return he(e.addListener)&&he(e.removeListener)}function FA(e){return he(e.on)&&he(e.off)}function PA(e){return he(e.addEventListener)&&he(e.removeEventListener)}function $_(e,r){return r===void 0&&(r=iA),Hu(function(n,i){var s=null,o=null,a=null,u=function(){if(s){s.unsubscribe(),s=null;var c=o;o=null,i.next(c)}};function l(){var c=a+e,h=r.now();if(h<c){s=this.schedule(void 0,c-h),i.add(s);return}u()}n.subscribe(ss(i,function(c){o=c,a=r.now(),s||(s=r.schedule(l,e),i.add(s))},function(){u(),i.complete()},void 0,function(){o=s=null}))})}var BA=(e,...r)=>{let n=0;for(let i=0;i<e.length&&r.includes(e.charAt(i));i++)n++;return n},S_=(e,r="")=>{let n=e.split(`
`),i=Number.MAX_SAFE_INTEGER;return n.forEach(s=>{s.trim().length!=0&&(i=Math.min(i,BA(s," ")))}),e=n.map(s=>s.substring(i)).join(`
`),r.endsWith("#")||(r+="#"),r+btoa(e)};async function F_(e,r,n){const i=document.querySelectorAll(`astro-root[uid="${e}"]`);if(i.length===0)throw new Error(`Unable to find the root for the component ${r.name}`);let s=null,o=i[0].querySelector("astro-fragment");if(o==null&&i[0].hasAttribute("tmpl")){let u=i[0].querySelector("template[data-astro-template]");u&&(s=u.innerHTML,u.remove())}else o&&(s=o.innerHTML);const a=await n();for(const u of i)a(u,s)}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ni=window,Vu=Ni.ShadowRoot&&(Ni.ShadyCSS===void 0||Ni.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Wu=Symbol(),tc=new WeakMap;class xv{constructor(r,n,i){if(this._$cssResult$=!0,i!==Wu)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=r,this.t=n}get styleSheet(){let r=this.o;const n=this.t;if(Vu&&r===void 0){const i=n!==void 0&&n.length===1;i&&(r=tc.get(n)),r===void 0&&((this.o=r=new CSSStyleSheet).replaceSync(this.cssText),i&&tc.set(n,r))}return r}toString(){return this.cssText}}const MA=e=>new xv(typeof e=="string"?e:e+"",void 0,Wu),kA=(e,...r)=>{const n=e.length===1?e[0]:r.reduce((i,s,o)=>i+(a=>{if(a._$cssResult$===!0)return a.cssText;if(typeof a=="number")return a;throw Error("Value passed to 'css' function must be a 'css' function result: "+a+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+e[o+1],e[0]);return new xv(n,e,Wu)},NA=(e,r)=>{Vu?e.adoptedStyleSheets=r.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):r.forEach(n=>{const i=document.createElement("style"),s=Ni.litNonce;s!==void 0&&i.setAttribute("nonce",s),i.textContent=n.cssText,e.appendChild(i)})},rc=Vu?e=>e:e=>e instanceof CSSStyleSheet?(r=>{let n="";for(const i of r.cssRules)n+=i.cssText;return MA(n)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var ho;const as=window,nc=as.trustedTypes,TA=nc?nc.emptyScript:"",ic=as.reactiveElementPolyfillSupport,ea={toAttribute(e,r){switch(r){case Boolean:e=e?TA:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,r){let n=e;switch(r){case Boolean:n=e!==null;break;case Number:n=e===null?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch{n=null}}return n}},Dv=(e,r)=>r!==e&&(r==r||e==e),fo={attribute:!0,type:String,converter:ea,reflect:!1,hasChanged:Dv};class kr extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(r){var n;(n=this.h)!==null&&n!==void 0||(this.h=[]),this.h.push(r)}static get observedAttributes(){this.finalize();const r=[];return this.elementProperties.forEach((n,i)=>{const s=this._$Ep(i,n);s!==void 0&&(this._$Ev.set(s,i),r.push(s))}),r}static createProperty(r,n=fo){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(r,n),!n.noAccessor&&!this.prototype.hasOwnProperty(r)){const i=typeof r=="symbol"?Symbol():"__"+r,s=this.getPropertyDescriptor(r,i,n);s!==void 0&&Object.defineProperty(this.prototype,r,s)}}static getPropertyDescriptor(r,n,i){return{get(){return this[n]},set(s){const o=this[r];this[n]=s,this.requestUpdate(r,o,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(r){return this.elementProperties.get(r)||fo}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const r=Object.getPrototypeOf(this);if(r.finalize(),this.elementProperties=new Map(r.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,i=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const s of i)this.createProperty(s,n[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(r){const n=[];if(Array.isArray(r)){const i=new Set(r.flat(1/0).reverse());for(const s of i)n.unshift(rc(s))}else r!==void 0&&n.push(rc(r));return n}static _$Ep(r,n){const i=n.attribute;return i===!1?void 0:typeof i=="string"?i:typeof r=="string"?r.toLowerCase():void 0}u(){var r;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(r=this.constructor.h)===null||r===void 0||r.forEach(n=>n(this))}addController(r){var n,i;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(r),this.renderRoot!==void 0&&this.isConnected&&((i=r.hostConnected)===null||i===void 0||i.call(r))}removeController(r){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(r)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((r,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var r;const n=(r=this.shadowRoot)!==null&&r!==void 0?r:this.attachShadow(this.constructor.shadowRootOptions);return NA(n,this.constructor.elementStyles),n}connectedCallback(){var r;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostConnected)===null||i===void 0?void 0:i.call(n)})}enableUpdating(r){}disconnectedCallback(){var r;(r=this._$ES)===null||r===void 0||r.forEach(n=>{var i;return(i=n.hostDisconnected)===null||i===void 0?void 0:i.call(n)})}attributeChangedCallback(r,n,i){this._$AK(r,i)}_$EO(r,n,i=fo){var s;const o=this.constructor._$Ep(r,i);if(o!==void 0&&i.reflect===!0){const a=(((s=i.converter)===null||s===void 0?void 0:s.toAttribute)!==void 0?i.converter:ea).toAttribute(n,i.type);this._$El=r,a==null?this.removeAttribute(o):this.setAttribute(o,a),this._$El=null}}_$AK(r,n){var i;const s=this.constructor,o=s._$Ev.get(r);if(o!==void 0&&this._$El!==o){const a=s.getPropertyOptions(o),u=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)===null||i===void 0?void 0:i.fromAttribute)!==void 0?a.converter:ea;this._$El=o,this[o]=u.fromAttribute(n,a.type),this._$El=null}}requestUpdate(r,n,i){let s=!0;r!==void 0&&(((i=i||this.constructor.getPropertyOptions(r)).hasChanged||Dv)(this[r],n)?(this._$AL.has(r)||this._$AL.set(r,n),i.reflect===!0&&this._$El!==r&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(r,i))):s=!1),!this.isUpdatePending&&s&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const r=this.scheduleUpdate();return r!=null&&await r,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((s,o)=>this[o]=s),this._$Ei=void 0);let n=!1;const i=this._$AL;try{n=this.shouldUpdate(i),n?(this.willUpdate(i),(r=this._$ES)===null||r===void 0||r.forEach(s=>{var o;return(o=s.hostUpdate)===null||o===void 0?void 0:o.call(s)}),this.update(i)):this._$Ek()}catch(s){throw n=!1,this._$Ek(),s}n&&this._$AE(i)}willUpdate(r){}_$AE(r){var n;(n=this._$ES)===null||n===void 0||n.forEach(i=>{var s;return(s=i.hostUpdated)===null||s===void 0?void 0:s.call(i)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(r)),this.updated(r)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(r){return!0}update(r){this._$EC!==void 0&&(this._$EC.forEach((n,i)=>this._$EO(i,this[i],n)),this._$EC=void 0),this._$Ek()}updated(r){}firstUpdated(r){}}kr.finalized=!0,kr.elementProperties=new Map,kr.elementStyles=[],kr.shadowRootOptions={mode:"open"},ic?.({ReactiveElement:kr}),((ho=as.reactiveElementVersions)!==null&&ho!==void 0?ho:as.reactiveElementVersions=[]).push("1.4.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var vo;const us=window,en=us.trustedTypes,sc=en?en.createPolicy("lit-html",{createHTML:e=>e}):void 0,mt=`lit$${(Math.random()+"").slice(9)}$`,Gu="?"+mt,zA=`<${Gu}>`,tn=document,Wn=(e="")=>tn.createComment(e),Gn=e=>e===null||typeof e!="object"&&typeof e!="function",bv=Array.isArray,Ev=e=>bv(e)||typeof e?.[Symbol.iterator]=="function",bn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,oc=/-->/g,ac=/>/g,er=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),uc=/'/g,lc=/"/g,Av=/^(?:script|style|textarea|title)$/i,IA=e=>(r,...n)=>({_$litType$:e,strings:r,values:n}),Ar=IA(1),yr=Symbol.for("lit-noChange"),be=Symbol.for("lit-nothing"),cc=new WeakMap,RA=(e,r,n)=>{var i,s;const o=(i=n?.renderBefore)!==null&&i!==void 0?i:r;let a=o._$litPart$;if(a===void 0){const u=(s=n?.renderBefore)!==null&&s!==void 0?s:null;o._$litPart$=a=new cn(r.insertBefore(Wn(),u),u,void 0,n??{})}return a._$AI(e),a},Ur=tn.createTreeWalker(tn,129,null,!1),_v=(e,r)=>{const n=e.length-1,i=[];let s,o=r===2?"<svg>":"",a=bn;for(let l=0;l<n;l++){const c=e[l];let h,f,d=-1,v=0;for(;v<c.length&&(a.lastIndex=v,f=a.exec(c),f!==null);)v=a.lastIndex,a===bn?f[1]==="!--"?a=oc:f[1]!==void 0?a=ac:f[2]!==void 0?(Av.test(f[2])&&(s=RegExp("</"+f[2],"g")),a=er):f[3]!==void 0&&(a=er):a===er?f[0]===">"?(a=s??bn,d=-1):f[1]===void 0?d=-2:(d=a.lastIndex-f[2].length,h=f[1],a=f[3]===void 0?er:f[3]==='"'?lc:uc):a===lc||a===uc?a=er:a===oc||a===ac?a=bn:(a=er,s=void 0);const m=a===er&&e[l+1].startsWith("/>")?" ":"";o+=a===bn?c+zA:d>=0?(i.push(h),c.slice(0,d)+"$lit$"+c.slice(d)+mt+m):c+mt+(d===-2?(i.push(void 0),l):m)}const u=o+(e[n]||"<?>")+(r===2?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[sc!==void 0?sc.createHTML(u):u,i]};class Jn{constructor({strings:r,_$litType$:n},i){let s;this.parts=[];let o=0,a=0;const u=r.length-1,l=this.parts,[c,h]=_v(r,n);if(this.el=Jn.createElement(c,i),Ur.currentNode=this.el.content,n===2){const f=this.el.content,d=f.firstChild;d.remove(),f.append(...d.childNodes)}for(;(s=Ur.nextNode())!==null&&l.length<u;){if(s.nodeType===1){if(s.hasAttributes()){const f=[];for(const d of s.getAttributeNames())if(d.endsWith("$lit$")||d.startsWith(mt)){const v=h[a++];if(f.push(d),v!==void 0){const m=s.getAttribute(v.toLowerCase()+"$lit$").split(mt),x=/([.?@])?(.*)/.exec(v);l.push({type:1,index:o,name:x[2],strings:m,ctor:x[1]==="."?$v:x[1]==="?"?Sv:x[1]==="@"?Fv:ni})}else l.push({type:6,index:o})}for(const d of f)s.removeAttribute(d)}if(Av.test(s.tagName)){const f=s.textContent.split(mt),d=f.length-1;if(d>0){s.textContent=en?en.emptyScript:"";for(let v=0;v<d;v++)s.append(f[v],Wn()),Ur.nextNode(),l.push({type:2,index:++o});s.append(f[d],Wn())}}}else if(s.nodeType===8)if(s.data===Gu)l.push({type:2,index:o});else{let f=-1;for(;(f=s.data.indexOf(mt,f+1))!==-1;)l.push({type:7,index:o}),f+=mt.length-1}o++}}static createElement(r,n){const i=tn.createElement("template");return i.innerHTML=r,i}}function mr(e,r,n=e,i){var s,o,a,u;if(r===yr)return r;let l=i!==void 0?(s=n._$Cl)===null||s===void 0?void 0:s[i]:n._$Cu;const c=Gn(r)?void 0:r._$litDirective$;return l?.constructor!==c&&((o=l?._$AO)===null||o===void 0||o.call(l,!1),c===void 0?l=void 0:(l=new c(e),l._$AT(e,n,i)),i!==void 0?((a=(u=n)._$Cl)!==null&&a!==void 0?a:u._$Cl=[])[i]=l:n._$Cu=l),l!==void 0&&(r=mr(e,l._$AS(e,r.values),l,i)),r}class Cv{constructor(r,n){this.v=[],this._$AN=void 0,this._$AD=r,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(r){var n;const{el:{content:i},parts:s}=this._$AD,o=((n=r?.creationScope)!==null&&n!==void 0?n:tn).importNode(i,!0);Ur.currentNode=o;let a=Ur.nextNode(),u=0,l=0,c=s[0];for(;c!==void 0;){if(u===c.index){let h;c.type===2?h=new cn(a,a.nextSibling,this,r):c.type===1?h=new c.ctor(a,c.name,c.strings,this,r):c.type===6&&(h=new Pv(a,this,r)),this.v.push(h),c=s[++l]}u!==c?.index&&(a=Ur.nextNode(),u++)}return o}m(r){let n=0;for(const i of this.v)i!==void 0&&(i.strings!==void 0?(i._$AI(r,i,n),n+=i.strings.length-2):i._$AI(r[n])),n++}}class cn{constructor(r,n,i,s){var o;this.type=2,this._$AH=be,this._$AN=void 0,this._$AA=r,this._$AB=n,this._$AM=i,this.options=s,this._$C_=(o=s?.isConnected)===null||o===void 0||o}get _$AU(){var r,n;return(n=(r=this._$AM)===null||r===void 0?void 0:r._$AU)!==null&&n!==void 0?n:this._$C_}get parentNode(){let r=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&r.nodeType===11&&(r=n.parentNode),r}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(r,n=this){r=mr(this,r,n),Gn(r)?r===be||r==null||r===""?(this._$AH!==be&&this._$AR(),this._$AH=be):r!==this._$AH&&r!==yr&&this.$(r):r._$litType$!==void 0?this.T(r):r.nodeType!==void 0?this.k(r):Ev(r)?this.O(r):this.$(r)}S(r,n=this._$AB){return this._$AA.parentNode.insertBefore(r,n)}k(r){this._$AH!==r&&(this._$AR(),this._$AH=this.S(r))}$(r){this._$AH!==be&&Gn(this._$AH)?this._$AA.nextSibling.data=r:this.k(tn.createTextNode(r)),this._$AH=r}T(r){var n;const{values:i,_$litType$:s}=r,o=typeof s=="number"?this._$AC(r):(s.el===void 0&&(s.el=Jn.createElement(s.h,this.options)),s);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===o)this._$AH.m(i);else{const a=new Cv(o,this),u=a.p(this.options);a.m(i),this.k(u),this._$AH=a}}_$AC(r){let n=cc.get(r.strings);return n===void 0&&cc.set(r.strings,n=new Jn(r)),n}O(r){bv(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,s=0;for(const o of r)s===n.length?n.push(i=new cn(this.S(Wn()),this.S(Wn()),this,this.options)):i=n[s],i._$AI(o),s++;s<n.length&&(this._$AR(i&&i._$AB.nextSibling,s),n.length=s)}_$AR(r=this._$AA.nextSibling,n){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,n);r&&r!==this._$AB;){const s=r.nextSibling;r.remove(),r=s}}setConnected(r){var n;this._$AM===void 0&&(this._$C_=r,(n=this._$AP)===null||n===void 0||n.call(this,r))}}class ni{constructor(r,n,i,s,o){this.type=1,this._$AH=be,this._$AN=void 0,this.element=r,this.name=n,this._$AM=s,this.options=o,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=be}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(r,n=this,i,s){const o=this.strings;let a=!1;if(o===void 0)r=mr(this,r,n,0),a=!Gn(r)||r!==this._$AH&&r!==yr,a&&(this._$AH=r);else{const u=r;let l,c;for(r=o[0],l=0;l<o.length-1;l++)c=mr(this,u[i+l],n,l),c===yr&&(c=this._$AH[l]),a||(a=!Gn(c)||c!==this._$AH[l]),c===be?r=be:r!==be&&(r+=(c??"")+o[l+1]),this._$AH[l]=c}a&&!s&&this.P(r)}P(r){r===be?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,r??"")}}class $v extends ni{constructor(){super(...arguments),this.type=3}P(r){this.element[this.name]=r===be?void 0:r}}const LA=en?en.emptyScript:"";class Sv extends ni{constructor(){super(...arguments),this.type=4}P(r){r&&r!==be?this.element.setAttribute(this.name,LA):this.element.removeAttribute(this.name)}}class Fv extends ni{constructor(r,n,i,s,o){super(r,n,i,s,o),this.type=5}_$AI(r,n=this){var i;if((r=(i=mr(this,r,n,0))!==null&&i!==void 0?i:be)===yr)return;const s=this._$AH,o=r===be&&s!==be||r.capture!==s.capture||r.once!==s.once||r.passive!==s.passive,a=r!==be&&(s===be||o);o&&this.element.removeEventListener(this.name,this,s),a&&this.element.addEventListener(this.name,this,r),this._$AH=r}handleEvent(r){var n,i;typeof this._$AH=="function"?this._$AH.call((i=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&i!==void 0?i:this.element,r):this._$AH.handleEvent(r)}}class Pv{constructor(r,n,i){this.element=r,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(r){mr(this,r)}}const OA={A:"$lit$",M:mt,C:Gu,L:1,R:_v,D:Cv,V:Ev,I:mr,H:cn,N:ni,U:Sv,B:Fv,F:$v,W:Pv},hc=us.litHtmlPolyfillSupport;hc?.(Jn,cn),((vo=us.litHtmlVersions)!==null&&vo!==void 0?vo:us.litHtmlVersions=[]).push("2.3.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var po,yo;class kn extends kr{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r,n;const i=super.createRenderRoot();return(r=(n=this.renderOptions).renderBefore)!==null&&r!==void 0||(n.renderBefore=i.firstChild),i}update(r){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(r),this._$Do=RA(n,this.renderRoot,this.renderOptions)}connectedCallback(){var r;super.connectedCallback(),(r=this._$Do)===null||r===void 0||r.setConnected(!0)}disconnectedCallback(){var r;super.disconnectedCallback(),(r=this._$Do)===null||r===void 0||r.setConnected(!1)}render(){return yr}}kn.finalized=!0,kn._$litElement$=!0,(po=globalThis.litElementHydrateSupport)===null||po===void 0||po.call(globalThis,{LitElement:kn});const fc=globalThis.litElementPolyfillSupport;fc?.({LitElement:kn});((yo=globalThis.litElementVersions)!==null&&yo!==void 0?yo:globalThis.litElementVersions=[]).push("3.2.2");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const jA=e=>r=>typeof r=="function"?((n,i)=>(customElements.define(n,i),i))(e,r):((n,i)=>{const{kind:s,elements:o}=i;return{kind:s,elements:o,finisher(a){customElements.define(n,a)}}})(e,r);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qA=(e,r)=>r.kind==="method"&&r.descriptor&&!("value"in r.descriptor)?{...r,finisher(n){n.createProperty(r.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:r.key,initializer(){typeof r.initializer=="function"&&(this[r.key]=r.initializer.call(this))},finisher(n){n.createProperty(r.key,e)}};function ii(e){return(r,n)=>n!==void 0?((i,s,o)=>{s.constructor.createProperty(o,i)})(e,r,n):qA(e,r)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const HA={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},UA=e=>(...r)=>({_$litDirective$:e,values:r});class VA{constructor(r){}get _$AU(){return this._$AM._$AU}_$AT(r,n,i){this._$Ct=r,this._$AM=n,this._$Ci=i}_$AS(r,n){return this.update(r,n)}update(r,n){return this.render(...n)}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{H:WA}=OA,dc=()=>document.createComment(""),En=(e,r,n)=>{var i;const s=e._$AA.parentNode,o=r===void 0?e._$AB:r._$AA;if(n===void 0){const a=s.insertBefore(dc(),o),u=s.insertBefore(dc(),o);n=new WA(a,u,e,e.options)}else{const a=n._$AB.nextSibling,u=n._$AM,l=u!==e;if(l){let c;(i=n._$AQ)===null||i===void 0||i.call(n,e),n._$AM=e,n._$AP!==void 0&&(c=e._$AU)!==u._$AU&&n._$AP(c)}if(a!==o||l){let c=n._$AA;for(;c!==a;){const h=c.nextSibling;s.insertBefore(c,o),c=h}}}return n},tr=(e,r,n=e)=>(e._$AI(r,n),e),GA={},JA=(e,r=GA)=>e._$AH=r,YA=e=>e._$AH,mo=e=>{var r;(r=e._$AP)===null||r===void 0||r.call(e,!1,!0);let n=e._$AA;const i=e._$AB.nextSibling;for(;n!==i;){const s=n.nextSibling;n.remove(),n=s}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const vc=(e,r,n)=>{const i=new Map;for(let s=r;s<=n;s++)i.set(e[s],s);return i},KA=UA(class extends VA{constructor(e){if(super(e),e.type!==HA.CHILD)throw Error("repeat() can only be used in text expressions")}ht(e,r,n){let i;n===void 0?n=r:r!==void 0&&(i=r);const s=[],o=[];let a=0;for(const u of e)s[a]=i?i(u,a):a,o[a]=n(u,a),a++;return{values:o,keys:s}}render(e,r,n){return this.ht(e,r,n).values}update(e,[r,n,i]){var s;const o=YA(e),{values:a,keys:u}=this.ht(r,n,i);if(!Array.isArray(o))return this.ut=u,a;const l=(s=this.ut)!==null&&s!==void 0?s:this.ut=[],c=[];let h,f,d=0,v=o.length-1,m=0,x=a.length-1;for(;d<=v&&m<=x;)if(o[d]===null)d++;else if(o[v]===null)v--;else if(l[d]===u[m])c[m]=tr(o[d],a[m]),d++,m++;else if(l[v]===u[x])c[x]=tr(o[v],a[x]),v--,x--;else if(l[d]===u[x])c[x]=tr(o[d],a[x]),En(e,c[x+1],o[d]),d++,x--;else if(l[v]===u[m])c[m]=tr(o[v],a[m]),En(e,o[d],o[v]),v--,m++;else if(h===void 0&&(h=vc(u,m,x),f=vc(l,d,v)),h.has(l[d]))if(h.has(l[v])){const _=f.get(u[m]),S=_!==void 0?o[_]:null;if(S===null){const M=En(e,o[d]);tr(M,a[m]),c[m]=M}else c[m]=tr(S,a[m]),En(e,o[d],S),o[_]=null;m++}else mo(o[v]),v--;else mo(o[d]),d++;for(;m<=x;){const _=En(e,c[x+1]);tr(_,a[m]),c[m++]=_}for(;d<=v;){const _=o[d++];_!==null&&mo(_)}return this.ut=u,JA(e,c),yr}});var XA=e=>{if(!(e==null||e==="undefined"))try{if(typeof e=="string"){if(e.length===0)return;const r=JSON.parse(e);if(!Array.isArray(r)){console.error("Histogram innerText should be JSON array");return}for(let n=0;n<r.length;n++){if(!Array.isArray(r[n])){console.error("Histogram array should consist of inner arrays");return}if(r[n].length!==2){console.error("Histogram inner arrays should consist of two elements");return}if(typeof r[n][0]!="string"){console.error(`First element of inner array should be a string (index ${n})`);return}if(typeof r[n][1]!="number"){console.error(`Second element of inner array should be a number (index ${n})`);return}}return r}}catch(r){console.log(e),console.error(r)}},Ot=class extends kn{constructor(){super();this.data=[],this.showDataLabels=!0,this.height="100%",this.showXAxis=!0,this.json=void 0}connectedCallback(){this.hasAttribute("json")||this.setAttribute("json",this.innerText),super.connectedCallback()}barTemplate(e,r,n){const{percentage:i}=e,[s,o]=e.data,a=1,u=2,l=r+1,c=l+1,h=Ar`<div class="data">${o}</div>`,f=Ar`${s}`;return Ar`
    <div class="bar" style="grid-area: ${a} / ${l} / ${u} / ${c}">
      <div class="barTrack" style="height: ${(i??0)*100}%"></div>
      ${this.showDataLabels?h:""}
    </div>
    <div class="xAxisLabels" style="grid-area: ${a+2} / ${l} / ${u+2} / ${c}">
      ${this.showXAxis?f:""}
    </div>`}render(){if((this.data===void 0||this.data.length===0)&&this.json===void 0)return Ar``;const e=this.data??this.json,r=e.length,n=Math.max(...e.map(u=>u[1])),i=e.map(u=>({data:u,percentage:u[1]/n})),s=Ar`<div class="xAxis" style="grid-area: 2 / 1 / 3 / ${e.length+1}"></div>`,o=this.height?`height: ${this.height};`:"";return Ar`
    <style>
    div.chart {
      grid-template-columns: repeat(${e.length}, minmax(2px, 1fr));
    }
    </style>
    <div class="container" style="${o}">
      <div class="chart">
      ${KA(i,u=>u.data[0],(u,l)=>this.barTemplate(u,l,r))}
        ${this.showXAxis?s:""}
      </div>
    </div>`}};y(Ot,"styles",kA`
    :host {
    }
    div.container {
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    div.chart {
      display: grid;
      flex: 1;
      grid-template-rows: 1fr 1px min-content;
      justify-items: center;
    }
    div.bar {
      display: flex;
      flex-direction: column-reverse;
      align-items: center;
      justify-self: normal;
      padding-left: 0.3vw;
      padding-right: 0.3vw;
    }
    div.bar>div.barTrack {
      background-color: var(--histogram-bar-color, gray);
      align-self: stretch;
    }
    div.xAxisLabels, div.data {
      font-size: min(1vw, 1em);
      color: var(--histogram-label-color, currentColor);
    }
    div.xAxisLabels {
      width: 100%;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;
      text-align: center;
    }
    div.xAxis {
      background-color: var(--histogram-axis-color, silver);
      width: 100%;
      height: 100%;
    }
  `);nn([ii()],Ot.prototype,"data",2);nn([ii()],Ot.prototype,"showDataLabels",2);nn([ii()],Ot.prototype,"height",2);nn([ii()],Ot.prototype,"showXAxis",2);nn([ii({converter:XA,type:Object})],Ot.prototype,"json",2);Ot=nn([jA("histogram-vis")],Ot);var Sn,P_=class{constructor(e){y(this,"el"),le(this,Sn,void 0),this.el=e}setAutoSort(e){Q(this,Sn,Iu(e))}clear(){this.el!==void 0&&(this.el.data=[])}dispose(){const e=this.el;e!==void 0&&e.remove()}update(e){if(this.el===void 0){console.warn("FrequencyHistogramPlot this.el undefined");return}A(this,Sn)!==void 0?this.el.data=A(this,Sn).call(this,e):this.el.data=[...e]}};Sn=new WeakMap;export{ZA as $,gE as A,Zn as B,ti as C,$s as D,Pa as E,th as F,Sm as G,ov as H,Z0 as I,ku as J,_a as K,Ya as L,Ha as M,Bh as N,Pu as O,xu as P,Qe as Q,gm as R,cb as S,es as T,b as U,ze as V,nt as W,Qa as X,Ba as Y,mu as Z,bt as _,l_ as a,oa as a0,Tt as a1,dm as a2,vm as a3,Kh as a4,Uh as a5,iE as a6,P_ as a7,vg as a8,_m as a9,Am as aa,on as ab,n_ as ac,i_ as ad,s_ as ae,o_ as af,F_ as ag,bi as b,H0 as c,cs as d,r_ as e,wm as f,Sb as g,Cu as h,c_ as i,Ql as j,Ce as k,QA as l,gv as m,u_ as n,C_ as o,$_ as p,Au as q,a_ as r,t_ as s,lg as t,qt as u,Ea as v,og as w,Xc as x,e_ as y,S_ as z};
