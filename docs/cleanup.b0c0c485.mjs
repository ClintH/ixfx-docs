import { c as createMetadata, a as createAstro, b as createComponent, r as render, d as renderComponent } from './chunks/index.7bfc2e7e.mjs';
import { $ as $$module1, a as $$MainLayout } from './chunks/MainLayout.fae6d6b7.mjs';
import 'shorthash';
import 'serialize-javascript';
import 'preact/hooks';
import 'preact/jsx-runtime';
import 'lit';

const metadata = { "headers": [{ "depth": 2, "slug": "numeric-data", "text": "Numeric data" }, { "depth": 3, "slug": "clamping", "text": "Clamping" }, { "depth": 3, "slug": "wrap", "text": "Wrap" }, { "depth": 2, "slug": "sampling", "text": "Sampling" }, { "depth": 2, "slug": "objects", "text": "Objects" }, { "depth": 3, "slug": "does-it-contain-a-field", "text": "Does it contain a field?" }, { "depth": 2, "slug": "type-checking", "text": "Type checking" }, { "depth": 2, "slug": "more-functions", "text": "More functions" }], "source": "\n<script type=\"module\" hoist>\n  import '/src/components/ReplPad';\n<\/script>\n\nData often needs to be refined at some point. This can also have the role of 'sanity checking', making sure data is within a range or 'shape' that later processes expect.\n\nThis goes hand-in-hand with [normalising](../../data/normalising/), which aims to convert data to a consistent scale.\n\n## Numeric data\n\nUseful in-built JS functions:\n\n```js\n// repl-pad\n// Math.abs makes numbers positive\nMath.abs(-100);   // 100\n\n// Get the sign\nMath.sign(-100);  // -1;\nMath.sign(100);   // 1\n\n// Round up or down\nMath.ceil(2.5);   // 3\nMath.floor(2.5);  // 2\n\n// Round to closest integer\nMath.round(2.5);  // 3\n\n// Convert a string to an integer\nparseInt(`10.2`);   // 10\n\n// Convert a string to a float\nparseFloat(`10.2`); // 10.2\n\n// Largest of parameters\nMath.max(10, 100); // 100\n\n// Smallest of parameters\nMath.min(10, 100); // 10\n```\n\n### Clamping\n\n[`clamp`](https://clinth.github.io/ixfx/functions/Data.clamp.html) guarantees the return value is within the provided range.\n\nFor example, maybe you're computing a relative value based on some sensor input, assuming that 500 is the maximum. We want a percentage scale from 0..1:\n\n```js\nconst v = sensorValue / 500;\n```\n\nBut if `sensorValue` rises above 500 unexpectedly, `v` will be greater than 1 (ie. more than 100%). Other parts of our code might purposefully be able to handle this, but there are times where exceeding 100% cannot be permitted. Likewise, we might not want `v` to be less than 0% because of assumptions made in other parts of our code.\n\nTo do this manually, we might write:\n\n```js\nlet v = sensorValue / 500;\nif (v > 1) v = 1;\nelse if (v < 0) v = 0;\n// Now v is guaranteed to be between 0..1, inclusive\n```\n\nThat is all that `clamp` does. By default it uses a minimum of 0, a maximum of 1:\n\n```js\n// repl-pad\nimport { clamp } from 'https://unpkg.com/ixfx/dist/data.js';\nclamp(0.5);   // 0.5\nclamp(2);     // 1.0\nclamp(-0.2);  // 0.0\n```\n\nRevisiting the earlier example, we can scale a sensor value which we expect to be on the range of 0..500 and clamp it to be sure we're always within 0..1:\n\n```js\n// repl-pad\nimport { clamp, scale } from 'https://unpkg.com/ixfx/dist/data.js';\nclamp(scale(250, 0, 500)); // 0.5\nclamp(scale(500, 0, 500)); // 1.0\nclamp(scale(505, 0, 500)); // 1.0 - although out of expected range\nclamp(scale(-1, 0, 500));  // 0.0 - although out of expected range\n```\n\nA custom output range can be used as well:\n\n```js\n// clamp(value:number, min:number, max:number):number\nclamp(30, 50, 100); // 50\n```\n\nIf you are working with bipolar values (-1..1), you can use the [Data.Bipolar](https://clinth.github.io/ixfx/modules/Data.Bipolar.html) module.\n\n```js\n// repl-pad\nimport { Bipolar } from 'https://unpkg.com/ixfx/dist/data.js';\nBipolar.clamp(1.1);  // 1\nBipolar.clamp(0.9);  // 0.9\nBipolar.clamp(-1.1); // -1\n```\n\n### Wrap\n\n[`wrapInteger`](https://clinth.github.io/ixfx/functions/Data.wrapInteger.html) wraps an integer (ie. whole) number around a range, by default 0-360 (ie. degrees). These kinds of ranges logically wrap around continuously. Stepping past 359 degrees takes us to back to 0. And stepping -10 from 0 shouldn't yield -10, but 350.\n\n`wrap` does this arithmetic for you.\n\n```js\n// repl-pad#1\nimport { wrapInteger } from 'https://unpkg.com/ixfx/dist/data.js';\nwrapInteger(200); // 200 - fine, within range\nwrapInteger(400); // 40 - wraps past 360 to 40\n```\n\nNumbers below the range are likewise wrapped:\n\n```js\n// repl-pad#1\nwrapInteger(-90); // 270\n```\n\nA custom range can be provided for wrapping: `wrapInteger(value:number, min:number, max:number):number`. The minimum is inclusive, the maximum is exclusive.\n\n```js\n// repl-pad#1\nwrapInteger(5, 20, 30); // 25\n\n// Max value is exlusive, so it wraps to min:\nwrapInteger(30, 20, 30); // 20\n```\n\n\n[`wrap`](https://clinth.github.io/ixfx/functions/Data.wrap.html) is the same, but doesn't enforce any integer limitations.\n\n```js\n// repl-pad\nimport { wrap } from 'https://unpkg.com/ixfx/dist/data.js';\nwrap(10.5,0,10); // 0.5;\nwrap(-0.5,0,10); // 9.5\n```\n\n## Sampling\n\nixfx's [`Arrays.sample`](https://clinth.github.io/ixfx/functions/Collections.Arrays.sample.html) makes sub-sampling of a data set. This is useful when you have a lot of data and it would be too costly in terms of execution speed to process each item. For example, perhaps a sensor is producing too much data to process in each frame of animation.\n\nThrowing away data can of course impact precision, but depending on the source of data and how you're working with it, this may not be a problem.\n\nIt's possible to get a percentage of the input data if a parameter of 0..1 is passed in. In this case, 0.5:\n\n```js\n// repl-pad#2\nimport { sample } from 'https://unpkg.com/ixfx/dist/arrays.js';\n\nconst list = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ];\n\n// Get 50% of input data\nconst sub1 = sample(list, 0.5);\n// Yields: [2, 4, 6, 8, 10]\n```\n\nOr if a whole number is provided, it will return data of every _x_ steps:\n\n```js\n// repl-pad#2\n// Get every third\nconst sub2 = sample(list, 3);\n// Yields: [3, 6, 9]\n```\n\nSee also: [Generators.Sync module](https://clinth.github.io/ixfx/modules/Generators.Sync.html) contains various functions for processing a stream of data from a generator.\n\n## Objects\n\n### Does it contain a field?\nCheck if an object has a field using [`in`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in). In the example below, we print one message if the object has the field `humidity`, another one if it doesn't.\n\n```js\n// repl-pad\nconst a = { temp: 10, humidity: 0.8 };\nconst b = { temp: 20 };\n\nconst test = (v) => {\n  if (`humidity` in v) {\n    console.log(`Temp: ${v.temp} humidity: ${v.humidity}`);\n  } else {\n    console.log(`Temp: ${v.temp}`);\n  }\n}\n\ntest(a);\ntest(b);\n```\n\n## Type checking\n\nCheck the type of a variable with [`typeof`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof):\n\n```js\n// repl-pad\ntypeof \"hello\";   // \"string\"\ntypeof 0;         // \"number\"\ntypeof {temp:20}; // \"object\"\n```\n\nIn action, compare the result of `typeof` with the name of a type:\n```js\nif (typeof v === `string`) {\n  // variable is a string\n}\n```\n\n## More functions\n\n* [`Numbers.average`](https://clinth.github.io/ixfx/functions/Numbers.average.html) - return the average of a set of numbers\n* [`Numbers.filter`](https://clinth.github.io/ixfx/functions/Numbers.filter.html) - for an input set of values, only yields those which are numbers\n* [`Numbers.isApproximately`](https://clinth.github.io/ixfx/functions/Numbers.isApproximately.html) - is this number roughly close to this other number?\n* [`Numbers.isValid`](https://clinth.github.io/ixfx/functions/Numbers.isValid.html) - is this number a proper number?\n* [`Numbers.max`](https://clinth.github.io/ixfx/functions/Numbers.max.html)/[`Numbers.min`](https://clinth.github.io/ixfx/functions/Numbers.min.html) - returns max/min from a set, ignoring things that aren't numbers\n* [`Numbers.quantiseEvery`](https://clinth.github.io/ixfx/functions/Numbers.quantiseEvery.html) - rounds a value by step size\n* [`Numbers.round`](https://clinth.github.io/ixfx/functions/Numbers.round.html) - round a number to specified decimal places\n* [`Numbers.total`](https://clinth.github.io/ixfx/functions/Numbers.total.html) - add up a set of values, ignoring those which aren't numbers\n\nSee also:\n* Module: [Data.Bipolar](https://clinth.github.io/ixfx/modules/Data.Bipolar.html)", "html": `<script type="module" hoist>
  import '/src/components/ReplPad';
<\/script>
<p>Data often needs to be refined at some point. This can also have the role of 'sanity checking', making sure data is within a range or 'shape' that later processes expect.</p>
<p>This goes hand-in-hand with <a href="../../data/normalising/">normalising</a>, which aims to convert data to a consistent scale.</p>
<h2 id="numeric-data">Numeric data</h2>
<p>Useful in-built JS functions:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token comment">// Math.abs makes numbers positive</span>
Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 100</span>

<span class="token comment">// Get the sign</span>
Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// -1;</span>
Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1</span>

<span class="token comment">// Round up or down</span>
Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 3</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>

<span class="token comment">// Round to closest integer</span>
Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>

<span class="token comment">// Convert a string to an integer</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">10.2</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 10</span>

<span class="token comment">// Convert a string to a float</span>
<span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">10.2</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10.2</span>

<span class="token comment">// Largest of parameters</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>

<span class="token comment">// Smallest of parameters</span>
Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span></code></pre>
<h3 id="clamping">Clamping</h3>
<p><a href="https://clinth.github.io/ixfx/functions/Data.clamp.html"><code is:raw>clamp</code></a> guarantees the return value is within the provided range.</p>
<p>For example, maybe you're computing a relative value based on some sensor input, assuming that 500 is the maximum. We want a percentage scale from 0..1:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token keyword">const</span> v <span class="token operator">=</span> sensorValue <span class="token operator">/</span> <span class="token number">500</span><span class="token punctuation">;</span></code></pre>
<p>But if <code is:raw>sensorValue</code> rises above 500 unexpectedly, <code is:raw>v</code> will be greater than 1 (ie. more than 100%). Other parts of our code might purposefully be able to handle this, but there are times where exceeding 100% cannot be permitted. Likewise, we might not want <code is:raw>v</code> to be less than 0% because of assumptions made in other parts of our code.</p>
<p>To do this manually, we might write:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token keyword">let</span> v <span class="token operator">=</span> sensorValue <span class="token operator">/</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> v <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// Now v is guaranteed to be between 0..1, inclusive</span></code></pre>
<p>That is all that <code is:raw>clamp</code> does. By default it uses a minimum of 0, a maximum of 1:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> clamp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 0.5</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 1.0</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.0</span></code></pre>
<p>Revisiting the earlier example, we can scale a sensor value which we expect to be on the range of 0..500 and clamp it to be sure we're always within 0..1:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> clamp<span class="token punctuation">,</span> scale <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.5</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.0</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">505</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.0 - although out of expected range</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.0 - although out of expected range</span></code></pre>
<p>A custom output range can be used as well:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// clamp(value:number, min:number, max:number):number</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 50</span></code></pre>
<p>If you are working with bipolar values (-1..1), you can use the <a href="https://clinth.github.io/ixfx/modules/Data.Bipolar.html">Data.Bipolar</a> module.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Bipolar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">0.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.9</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -1</span></code></pre>
<h3 id="wrap">Wrap</h3>
<p><a href="https://clinth.github.io/ixfx/functions/Data.wrapInteger.html"><code is:raw>wrapInteger</code></a> wraps an integer (ie. whole) number around a range, by default 0-360 (ie. degrees). These kinds of ranges logically wrap around continuously. Stepping past 359 degrees takes us to back to 0. And stepping -10 from 0 shouldn't yield -10, but 350.</p>
<p><code is:raw>wrap</code> does this arithmetic for you.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> wrapInteger <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200 - fine, within range</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 40 - wraps past 360 to 40</span></code></pre>
<p>Numbers below the range are likewise wrapped:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 270</span></code></pre>
<p>A custom range can be provided for wrapping: <code is:raw>wrapInteger(value:number, min:number, max:number):number</code>. The minimum is inclusive, the maximum is exclusive.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 25</span>

<span class="token comment">// Max value is exlusive, so it wraps to min:</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20</span></code></pre>
<p><a href="https://clinth.github.io/ixfx/functions/Data.wrap.html"><code is:raw>wrap</code></a> is the same, but doesn't enforce any integer limitations.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> wrap <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">wrap</span><span class="token punctuation">(</span><span class="token number">10.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.5;</span>
<span class="token function">wrap</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9.5</span></code></pre>
<h2 id="sampling">Sampling</h2>
<p>ixfx's <a href="https://clinth.github.io/ixfx/functions/Collections.Arrays.sample.html"><code is:raw>Arrays.sample</code></a> makes sub-sampling of a data set. This is useful when you have a lot of data and it would be too costly in terms of execution speed to process each item. For example, perhaps a sensor is producing too much data to process in each frame of animation.</p>
<p>Throwing away data can of course impact precision, but depending on the source of data and how you're working with it, this may not be a problem.</p>
<p>It's possible to get a percentage of the input data if a parameter of 0..1 is passed in. In this case, 0.5:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#2</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sample <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/arrays.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Get 50% of input data</span>
<span class="token keyword">const</span> sub1 <span class="token operator">=</span> <span class="token function">sample</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Yields: [2, 4, 6, 8, 10]</span></code></pre>
<p>Or if a whole number is provided, it will return data of every <em>x</em> steps:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#2</span>
<span class="token comment">// Get every third</span>
<span class="token keyword">const</span> sub2 <span class="token operator">=</span> <span class="token function">sample</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Yields: [3, 6, 9]</span></code></pre>
<p>See also: <a href="https://clinth.github.io/ixfx/modules/Generators.Sync.html">Generators.Sync module</a> contains various functions for processing a stream of data from a generator.</p>
<h2 id="objects">Objects</h2>
<h3 id="does-it-contain-a-field">Does it contain a field?</h3>
<p>Check if an object has a field using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in"><code is:raw>in</code></a>. In the example below, we print one message if the object has the field <code is:raw>humidity</code>, another one if it doesn't.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">temp</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">humidity</span><span class="token operator">:</span> <span class="token number">0.8</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">temp</span><span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">humidity</span><span class="token template-punctuation string">\`</span></span> <span class="token keyword">in</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Temp: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>temp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> humidity: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>humidity<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Temp: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>temp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="type-checking">Type checking</h2>
<p>Check the type of a variable with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof"><code is:raw>typeof</code></a>:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">typeof</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>   <span class="token comment">// "string"</span>
<span class="token keyword">typeof</span> <span class="token number">0</span><span class="token punctuation">;</span>         <span class="token comment">// "number"</span>
<span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token literal-property property">temp</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// "object"</span></code></pre>
<p>In action, compare the result of <code is:raw>typeof</code> with the name of a type:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> v <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">string</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// variable is a string</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="more-functions">More functions</h2>
<ul>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.average.html"><code is:raw>Numbers.average</code></a> - return the average of a set of numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.filter.html"><code is:raw>Numbers.filter</code></a> - for an input set of values, only yields those which are numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.isApproximately.html"><code is:raw>Numbers.isApproximately</code></a> - is this number roughly close to this other number?</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.isValid.html"><code is:raw>Numbers.isValid</code></a> - is this number a proper number?</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.max.html"><code is:raw>Numbers.max</code></a>/<a href="https://clinth.github.io/ixfx/functions/Numbers.min.html"><code is:raw>Numbers.min</code></a> - returns max/min from a set, ignoring things that aren't numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.quantiseEvery.html"><code is:raw>Numbers.quantiseEvery</code></a> - rounds a value by step size</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.round.html"><code is:raw>Numbers.round</code></a> - round a number to specified decimal places</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.total.html"><code is:raw>Numbers.total</code></a> - add up a set of values, ignoring those which aren't numbers</li>
</ul>
<p>See also:</p>
<ul>
<li>Module: <a href="https://clinth.github.io/ixfx/modules/Data.Bipolar.html">Data.Bipolar</a></li>
</ul>` };
const frontmatter = { "title": "Clean up", "astro": { "headers": [{ "depth": 2, "slug": "numeric-data", "text": "Numeric data" }, { "depth": 3, "slug": "clamping", "text": "Clamping" }, { "depth": 3, "slug": "wrap", "text": "Wrap" }, { "depth": 2, "slug": "sampling", "text": "Sampling" }, { "depth": 2, "slug": "objects", "text": "Objects" }, { "depth": 3, "slug": "does-it-contain-a-field", "text": "Does it contain a field?" }, { "depth": 2, "slug": "type-checking", "text": "Type checking" }, { "depth": 2, "slug": "more-functions", "text": "More functions" }], "source": "\n<script type=\"module\" hoist>\n  import '/src/components/ReplPad';\n<\/script>\n\nData often needs to be refined at some point. This can also have the role of 'sanity checking', making sure data is within a range or 'shape' that later processes expect.\n\nThis goes hand-in-hand with [normalising](../../data/normalising/), which aims to convert data to a consistent scale.\n\n## Numeric data\n\nUseful in-built JS functions:\n\n```js\n// repl-pad\n// Math.abs makes numbers positive\nMath.abs(-100);   // 100\n\n// Get the sign\nMath.sign(-100);  // -1;\nMath.sign(100);   // 1\n\n// Round up or down\nMath.ceil(2.5);   // 3\nMath.floor(2.5);  // 2\n\n// Round to closest integer\nMath.round(2.5);  // 3\n\n// Convert a string to an integer\nparseInt(`10.2`);   // 10\n\n// Convert a string to a float\nparseFloat(`10.2`); // 10.2\n\n// Largest of parameters\nMath.max(10, 100); // 100\n\n// Smallest of parameters\nMath.min(10, 100); // 10\n```\n\n### Clamping\n\n[`clamp`](https://clinth.github.io/ixfx/functions/Data.clamp.html) guarantees the return value is within the provided range.\n\nFor example, maybe you're computing a relative value based on some sensor input, assuming that 500 is the maximum. We want a percentage scale from 0..1:\n\n```js\nconst v = sensorValue / 500;\n```\n\nBut if `sensorValue` rises above 500 unexpectedly, `v` will be greater than 1 (ie. more than 100%). Other parts of our code might purposefully be able to handle this, but there are times where exceeding 100% cannot be permitted. Likewise, we might not want `v` to be less than 0% because of assumptions made in other parts of our code.\n\nTo do this manually, we might write:\n\n```js\nlet v = sensorValue / 500;\nif (v > 1) v = 1;\nelse if (v < 0) v = 0;\n// Now v is guaranteed to be between 0..1, inclusive\n```\n\nThat is all that `clamp` does. By default it uses a minimum of 0, a maximum of 1:\n\n```js\n// repl-pad\nimport { clamp } from 'https://unpkg.com/ixfx/dist/data.js';\nclamp(0.5);   // 0.5\nclamp(2);     // 1.0\nclamp(-0.2);  // 0.0\n```\n\nRevisiting the earlier example, we can scale a sensor value which we expect to be on the range of 0..500 and clamp it to be sure we're always within 0..1:\n\n```js\n// repl-pad\nimport { clamp, scale } from 'https://unpkg.com/ixfx/dist/data.js';\nclamp(scale(250, 0, 500)); // 0.5\nclamp(scale(500, 0, 500)); // 1.0\nclamp(scale(505, 0, 500)); // 1.0 - although out of expected range\nclamp(scale(-1, 0, 500));  // 0.0 - although out of expected range\n```\n\nA custom output range can be used as well:\n\n```js\n// clamp(value:number, min:number, max:number):number\nclamp(30, 50, 100); // 50\n```\n\nIf you are working with bipolar values (-1..1), you can use the [Data.Bipolar](https://clinth.github.io/ixfx/modules/Data.Bipolar.html) module.\n\n```js\n// repl-pad\nimport { Bipolar } from 'https://unpkg.com/ixfx/dist/data.js';\nBipolar.clamp(1.1);  // 1\nBipolar.clamp(0.9);  // 0.9\nBipolar.clamp(-1.1); // -1\n```\n\n### Wrap\n\n[`wrapInteger`](https://clinth.github.io/ixfx/functions/Data.wrapInteger.html) wraps an integer (ie. whole) number around a range, by default 0-360 (ie. degrees). These kinds of ranges logically wrap around continuously. Stepping past 359 degrees takes us to back to 0. And stepping -10 from 0 shouldn't yield -10, but 350.\n\n`wrap` does this arithmetic for you.\n\n```js\n// repl-pad#1\nimport { wrapInteger } from 'https://unpkg.com/ixfx/dist/data.js';\nwrapInteger(200); // 200 - fine, within range\nwrapInteger(400); // 40 - wraps past 360 to 40\n```\n\nNumbers below the range are likewise wrapped:\n\n```js\n// repl-pad#1\nwrapInteger(-90); // 270\n```\n\nA custom range can be provided for wrapping: `wrapInteger(value:number, min:number, max:number):number`. The minimum is inclusive, the maximum is exclusive.\n\n```js\n// repl-pad#1\nwrapInteger(5, 20, 30); // 25\n\n// Max value is exlusive, so it wraps to min:\nwrapInteger(30, 20, 30); // 20\n```\n\n\n[`wrap`](https://clinth.github.io/ixfx/functions/Data.wrap.html) is the same, but doesn't enforce any integer limitations.\n\n```js\n// repl-pad\nimport { wrap } from 'https://unpkg.com/ixfx/dist/data.js';\nwrap(10.5,0,10); // 0.5;\nwrap(-0.5,0,10); // 9.5\n```\n\n## Sampling\n\nixfx's [`Arrays.sample`](https://clinth.github.io/ixfx/functions/Collections.Arrays.sample.html) makes sub-sampling of a data set. This is useful when you have a lot of data and it would be too costly in terms of execution speed to process each item. For example, perhaps a sensor is producing too much data to process in each frame of animation.\n\nThrowing away data can of course impact precision, but depending on the source of data and how you're working with it, this may not be a problem.\n\nIt's possible to get a percentage of the input data if a parameter of 0..1 is passed in. In this case, 0.5:\n\n```js\n// repl-pad#2\nimport { sample } from 'https://unpkg.com/ixfx/dist/arrays.js';\n\nconst list = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ];\n\n// Get 50% of input data\nconst sub1 = sample(list, 0.5);\n// Yields: [2, 4, 6, 8, 10]\n```\n\nOr if a whole number is provided, it will return data of every _x_ steps:\n\n```js\n// repl-pad#2\n// Get every third\nconst sub2 = sample(list, 3);\n// Yields: [3, 6, 9]\n```\n\nSee also: [Generators.Sync module](https://clinth.github.io/ixfx/modules/Generators.Sync.html) contains various functions for processing a stream of data from a generator.\n\n## Objects\n\n### Does it contain a field?\nCheck if an object has a field using [`in`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in). In the example below, we print one message if the object has the field `humidity`, another one if it doesn't.\n\n```js\n// repl-pad\nconst a = { temp: 10, humidity: 0.8 };\nconst b = { temp: 20 };\n\nconst test = (v) => {\n  if (`humidity` in v) {\n    console.log(`Temp: ${v.temp} humidity: ${v.humidity}`);\n  } else {\n    console.log(`Temp: ${v.temp}`);\n  }\n}\n\ntest(a);\ntest(b);\n```\n\n## Type checking\n\nCheck the type of a variable with [`typeof`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof):\n\n```js\n// repl-pad\ntypeof \"hello\";   // \"string\"\ntypeof 0;         // \"number\"\ntypeof {temp:20}; // \"object\"\n```\n\nIn action, compare the result of `typeof` with the name of a type:\n```js\nif (typeof v === `string`) {\n  // variable is a string\n}\n```\n\n## More functions\n\n* [`Numbers.average`](https://clinth.github.io/ixfx/functions/Numbers.average.html) - return the average of a set of numbers\n* [`Numbers.filter`](https://clinth.github.io/ixfx/functions/Numbers.filter.html) - for an input set of values, only yields those which are numbers\n* [`Numbers.isApproximately`](https://clinth.github.io/ixfx/functions/Numbers.isApproximately.html) - is this number roughly close to this other number?\n* [`Numbers.isValid`](https://clinth.github.io/ixfx/functions/Numbers.isValid.html) - is this number a proper number?\n* [`Numbers.max`](https://clinth.github.io/ixfx/functions/Numbers.max.html)/[`Numbers.min`](https://clinth.github.io/ixfx/functions/Numbers.min.html) - returns max/min from a set, ignoring things that aren't numbers\n* [`Numbers.quantiseEvery`](https://clinth.github.io/ixfx/functions/Numbers.quantiseEvery.html) - rounds a value by step size\n* [`Numbers.round`](https://clinth.github.io/ixfx/functions/Numbers.round.html) - round a number to specified decimal places\n* [`Numbers.total`](https://clinth.github.io/ixfx/functions/Numbers.total.html) - add up a set of values, ignoring those which aren't numbers\n\nSee also:\n* Module: [Data.Bipolar](https://clinth.github.io/ixfx/modules/Data.Bipolar.html)", "html": `<script type="module" hoist>
  import '/src/components/ReplPad';
<\/script>
<p>Data often needs to be refined at some point. This can also have the role of 'sanity checking', making sure data is within a range or 'shape' that later processes expect.</p>
<p>This goes hand-in-hand with <a href="../../data/normalising/">normalising</a>, which aims to convert data to a consistent scale.</p>
<h2 id="numeric-data">Numeric data</h2>
<p>Useful in-built JS functions:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token comment">// Math.abs makes numbers positive</span>
Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 100</span>

<span class="token comment">// Get the sign</span>
Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// -1;</span>
Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1</span>

<span class="token comment">// Round up or down</span>
Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 3</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>

<span class="token comment">// Round to closest integer</span>
Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>

<span class="token comment">// Convert a string to an integer</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">10.2</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 10</span>

<span class="token comment">// Convert a string to a float</span>
<span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">10.2</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10.2</span>

<span class="token comment">// Largest of parameters</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>

<span class="token comment">// Smallest of parameters</span>
Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span></code></pre>
<h3 id="clamping">Clamping</h3>
<p><a href="https://clinth.github.io/ixfx/functions/Data.clamp.html"><code is:raw>clamp</code></a> guarantees the return value is within the provided range.</p>
<p>For example, maybe you're computing a relative value based on some sensor input, assuming that 500 is the maximum. We want a percentage scale from 0..1:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token keyword">const</span> v <span class="token operator">=</span> sensorValue <span class="token operator">/</span> <span class="token number">500</span><span class="token punctuation">;</span></code></pre>
<p>But if <code is:raw>sensorValue</code> rises above 500 unexpectedly, <code is:raw>v</code> will be greater than 1 (ie. more than 100%). Other parts of our code might purposefully be able to handle this, but there are times where exceeding 100% cannot be permitted. Likewise, we might not want <code is:raw>v</code> to be less than 0% because of assumptions made in other parts of our code.</p>
<p>To do this manually, we might write:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token keyword">let</span> v <span class="token operator">=</span> sensorValue <span class="token operator">/</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> v <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// Now v is guaranteed to be between 0..1, inclusive</span></code></pre>
<p>That is all that <code is:raw>clamp</code> does. By default it uses a minimum of 0, a maximum of 1:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> clamp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 0.5</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 1.0</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.0</span></code></pre>
<p>Revisiting the earlier example, we can scale a sensor value which we expect to be on the range of 0..500 and clamp it to be sure we're always within 0..1:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> clamp<span class="token punctuation">,</span> scale <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.5</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.0</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">505</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.0 - although out of expected range</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.0 - although out of expected range</span></code></pre>
<p>A custom output range can be used as well:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// clamp(value:number, min:number, max:number):number</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 50</span></code></pre>
<p>If you are working with bipolar values (-1..1), you can use the <a href="https://clinth.github.io/ixfx/modules/Data.Bipolar.html">Data.Bipolar</a> module.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Bipolar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">0.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.9</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -1</span></code></pre>
<h3 id="wrap">Wrap</h3>
<p><a href="https://clinth.github.io/ixfx/functions/Data.wrapInteger.html"><code is:raw>wrapInteger</code></a> wraps an integer (ie. whole) number around a range, by default 0-360 (ie. degrees). These kinds of ranges logically wrap around continuously. Stepping past 359 degrees takes us to back to 0. And stepping -10 from 0 shouldn't yield -10, but 350.</p>
<p><code is:raw>wrap</code> does this arithmetic for you.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> wrapInteger <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200 - fine, within range</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 40 - wraps past 360 to 40</span></code></pre>
<p>Numbers below the range are likewise wrapped:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 270</span></code></pre>
<p>A custom range can be provided for wrapping: <code is:raw>wrapInteger(value:number, min:number, max:number):number</code>. The minimum is inclusive, the maximum is exclusive.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 25</span>

<span class="token comment">// Max value is exlusive, so it wraps to min:</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20</span></code></pre>
<p><a href="https://clinth.github.io/ixfx/functions/Data.wrap.html"><code is:raw>wrap</code></a> is the same, but doesn't enforce any integer limitations.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> wrap <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">wrap</span><span class="token punctuation">(</span><span class="token number">10.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.5;</span>
<span class="token function">wrap</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9.5</span></code></pre>
<h2 id="sampling">Sampling</h2>
<p>ixfx's <a href="https://clinth.github.io/ixfx/functions/Collections.Arrays.sample.html"><code is:raw>Arrays.sample</code></a> makes sub-sampling of a data set. This is useful when you have a lot of data and it would be too costly in terms of execution speed to process each item. For example, perhaps a sensor is producing too much data to process in each frame of animation.</p>
<p>Throwing away data can of course impact precision, but depending on the source of data and how you're working with it, this may not be a problem.</p>
<p>It's possible to get a percentage of the input data if a parameter of 0..1 is passed in. In this case, 0.5:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#2</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sample <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/arrays.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Get 50% of input data</span>
<span class="token keyword">const</span> sub1 <span class="token operator">=</span> <span class="token function">sample</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Yields: [2, 4, 6, 8, 10]</span></code></pre>
<p>Or if a whole number is provided, it will return data of every <em>x</em> steps:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#2</span>
<span class="token comment">// Get every third</span>
<span class="token keyword">const</span> sub2 <span class="token operator">=</span> <span class="token function">sample</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Yields: [3, 6, 9]</span></code></pre>
<p>See also: <a href="https://clinth.github.io/ixfx/modules/Generators.Sync.html">Generators.Sync module</a> contains various functions for processing a stream of data from a generator.</p>
<h2 id="objects">Objects</h2>
<h3 id="does-it-contain-a-field">Does it contain a field?</h3>
<p>Check if an object has a field using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in"><code is:raw>in</code></a>. In the example below, we print one message if the object has the field <code is:raw>humidity</code>, another one if it doesn't.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">temp</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">humidity</span><span class="token operator">:</span> <span class="token number">0.8</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">temp</span><span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">humidity</span><span class="token template-punctuation string">\`</span></span> <span class="token keyword">in</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Temp: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>temp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> humidity: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>humidity<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Temp: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>temp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="type-checking">Type checking</h2>
<p>Check the type of a variable with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof"><code is:raw>typeof</code></a>:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">typeof</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>   <span class="token comment">// "string"</span>
<span class="token keyword">typeof</span> <span class="token number">0</span><span class="token punctuation">;</span>         <span class="token comment">// "number"</span>
<span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token literal-property property">temp</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// "object"</span></code></pre>
<p>In action, compare the result of <code is:raw>typeof</code> with the name of a type:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> v <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">string</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// variable is a string</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="more-functions">More functions</h2>
<ul>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.average.html"><code is:raw>Numbers.average</code></a> - return the average of a set of numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.filter.html"><code is:raw>Numbers.filter</code></a> - for an input set of values, only yields those which are numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.isApproximately.html"><code is:raw>Numbers.isApproximately</code></a> - is this number roughly close to this other number?</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.isValid.html"><code is:raw>Numbers.isValid</code></a> - is this number a proper number?</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.max.html"><code is:raw>Numbers.max</code></a>/<a href="https://clinth.github.io/ixfx/functions/Numbers.min.html"><code is:raw>Numbers.min</code></a> - returns max/min from a set, ignoring things that aren't numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.quantiseEvery.html"><code is:raw>Numbers.quantiseEvery</code></a> - rounds a value by step size</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.round.html"><code is:raw>Numbers.round</code></a> - round a number to specified decimal places</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.total.html"><code is:raw>Numbers.total</code></a> - add up a set of values, ignoring those which aren't numbers</li>
</ul>
<p>See also:</p>
<ul>
<li>Module: <a href="https://clinth.github.io/ixfx/modules/Data.Bipolar.html">Data.Bipolar</a></li>
</ul>` } };
const $$metadata = createMetadata("/src/pages/data/cleanup.md", { modules: [{ module: $$module1, specifier: "../../layouts/MainLayout.astro", assert: {} }], hydratedComponents: [], clientOnlyComponents: [], hydrationDirectives: /* @__PURE__ */ new Set([]), hoisted: [{ type: "inline", value: `
  import '/src/components/ReplPad';
` }] });
const $$Astro = createAstro("/src/pages/data/cleanup.md", "https://clinth.github.io/ixfx-docs/", "file:///Users/af4766/repos/ixfx-docs/");
const $$Cleanup = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$Cleanup;
  const $$content = { "title": "Clean up", "astro": { "headers": [{ "depth": 2, "slug": "numeric-data", "text": "Numeric data" }, { "depth": 3, "slug": "clamping", "text": "Clamping" }, { "depth": 3, "slug": "wrap", "text": "Wrap" }, { "depth": 2, "slug": "sampling", "text": "Sampling" }, { "depth": 2, "slug": "objects", "text": "Objects" }, { "depth": 3, "slug": "does-it-contain-a-field", "text": "Does it contain a field?" }, { "depth": 2, "slug": "type-checking", "text": "Type checking" }, { "depth": 2, "slug": "more-functions", "text": "More functions" }], "source": "\n<script type=\"module\" hoist>\n  import '/src/components/ReplPad';\n<\/script>\n\nData often needs to be refined at some point. This can also have the role of 'sanity checking', making sure data is within a range or 'shape' that later processes expect.\n\nThis goes hand-in-hand with [normalising](../../data/normalising/), which aims to convert data to a consistent scale.\n\n## Numeric data\n\nUseful in-built JS functions:\n\n```js\n// repl-pad\n// Math.abs makes numbers positive\nMath.abs(-100);   // 100\n\n// Get the sign\nMath.sign(-100);  // -1;\nMath.sign(100);   // 1\n\n// Round up or down\nMath.ceil(2.5);   // 3\nMath.floor(2.5);  // 2\n\n// Round to closest integer\nMath.round(2.5);  // 3\n\n// Convert a string to an integer\nparseInt(`10.2`);   // 10\n\n// Convert a string to a float\nparseFloat(`10.2`); // 10.2\n\n// Largest of parameters\nMath.max(10, 100); // 100\n\n// Smallest of parameters\nMath.min(10, 100); // 10\n```\n\n### Clamping\n\n[`clamp`](https://clinth.github.io/ixfx/functions/Data.clamp.html) guarantees the return value is within the provided range.\n\nFor example, maybe you're computing a relative value based on some sensor input, assuming that 500 is the maximum. We want a percentage scale from 0..1:\n\n```js\nconst v = sensorValue / 500;\n```\n\nBut if `sensorValue` rises above 500 unexpectedly, `v` will be greater than 1 (ie. more than 100%). Other parts of our code might purposefully be able to handle this, but there are times where exceeding 100% cannot be permitted. Likewise, we might not want `v` to be less than 0% because of assumptions made in other parts of our code.\n\nTo do this manually, we might write:\n\n```js\nlet v = sensorValue / 500;\nif (v > 1) v = 1;\nelse if (v < 0) v = 0;\n// Now v is guaranteed to be between 0..1, inclusive\n```\n\nThat is all that `clamp` does. By default it uses a minimum of 0, a maximum of 1:\n\n```js\n// repl-pad\nimport { clamp } from 'https://unpkg.com/ixfx/dist/data.js';\nclamp(0.5);   // 0.5\nclamp(2);     // 1.0\nclamp(-0.2);  // 0.0\n```\n\nRevisiting the earlier example, we can scale a sensor value which we expect to be on the range of 0..500 and clamp it to be sure we're always within 0..1:\n\n```js\n// repl-pad\nimport { clamp, scale } from 'https://unpkg.com/ixfx/dist/data.js';\nclamp(scale(250, 0, 500)); // 0.5\nclamp(scale(500, 0, 500)); // 1.0\nclamp(scale(505, 0, 500)); // 1.0 - although out of expected range\nclamp(scale(-1, 0, 500));  // 0.0 - although out of expected range\n```\n\nA custom output range can be used as well:\n\n```js\n// clamp(value:number, min:number, max:number):number\nclamp(30, 50, 100); // 50\n```\n\nIf you are working with bipolar values (-1..1), you can use the [Data.Bipolar](https://clinth.github.io/ixfx/modules/Data.Bipolar.html) module.\n\n```js\n// repl-pad\nimport { Bipolar } from 'https://unpkg.com/ixfx/dist/data.js';\nBipolar.clamp(1.1);  // 1\nBipolar.clamp(0.9);  // 0.9\nBipolar.clamp(-1.1); // -1\n```\n\n### Wrap\n\n[`wrapInteger`](https://clinth.github.io/ixfx/functions/Data.wrapInteger.html) wraps an integer (ie. whole) number around a range, by default 0-360 (ie. degrees). These kinds of ranges logically wrap around continuously. Stepping past 359 degrees takes us to back to 0. And stepping -10 from 0 shouldn't yield -10, but 350.\n\n`wrap` does this arithmetic for you.\n\n```js\n// repl-pad#1\nimport { wrapInteger } from 'https://unpkg.com/ixfx/dist/data.js';\nwrapInteger(200); // 200 - fine, within range\nwrapInteger(400); // 40 - wraps past 360 to 40\n```\n\nNumbers below the range are likewise wrapped:\n\n```js\n// repl-pad#1\nwrapInteger(-90); // 270\n```\n\nA custom range can be provided for wrapping: `wrapInteger(value:number, min:number, max:number):number`. The minimum is inclusive, the maximum is exclusive.\n\n```js\n// repl-pad#1\nwrapInteger(5, 20, 30); // 25\n\n// Max value is exlusive, so it wraps to min:\nwrapInteger(30, 20, 30); // 20\n```\n\n\n[`wrap`](https://clinth.github.io/ixfx/functions/Data.wrap.html) is the same, but doesn't enforce any integer limitations.\n\n```js\n// repl-pad\nimport { wrap } from 'https://unpkg.com/ixfx/dist/data.js';\nwrap(10.5,0,10); // 0.5;\nwrap(-0.5,0,10); // 9.5\n```\n\n## Sampling\n\nixfx's [`Arrays.sample`](https://clinth.github.io/ixfx/functions/Collections.Arrays.sample.html) makes sub-sampling of a data set. This is useful when you have a lot of data and it would be too costly in terms of execution speed to process each item. For example, perhaps a sensor is producing too much data to process in each frame of animation.\n\nThrowing away data can of course impact precision, but depending on the source of data and how you're working with it, this may not be a problem.\n\nIt's possible to get a percentage of the input data if a parameter of 0..1 is passed in. In this case, 0.5:\n\n```js\n// repl-pad#2\nimport { sample } from 'https://unpkg.com/ixfx/dist/arrays.js';\n\nconst list = [ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ];\n\n// Get 50% of input data\nconst sub1 = sample(list, 0.5);\n// Yields: [2, 4, 6, 8, 10]\n```\n\nOr if a whole number is provided, it will return data of every _x_ steps:\n\n```js\n// repl-pad#2\n// Get every third\nconst sub2 = sample(list, 3);\n// Yields: [3, 6, 9]\n```\n\nSee also: [Generators.Sync module](https://clinth.github.io/ixfx/modules/Generators.Sync.html) contains various functions for processing a stream of data from a generator.\n\n## Objects\n\n### Does it contain a field?\nCheck if an object has a field using [`in`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in). In the example below, we print one message if the object has the field `humidity`, another one if it doesn't.\n\n```js\n// repl-pad\nconst a = { temp: 10, humidity: 0.8 };\nconst b = { temp: 20 };\n\nconst test = (v) => {\n  if (`humidity` in v) {\n    console.log(`Temp: ${v.temp} humidity: ${v.humidity}`);\n  } else {\n    console.log(`Temp: ${v.temp}`);\n  }\n}\n\ntest(a);\ntest(b);\n```\n\n## Type checking\n\nCheck the type of a variable with [`typeof`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof):\n\n```js\n// repl-pad\ntypeof \"hello\";   // \"string\"\ntypeof 0;         // \"number\"\ntypeof {temp:20}; // \"object\"\n```\n\nIn action, compare the result of `typeof` with the name of a type:\n```js\nif (typeof v === `string`) {\n  // variable is a string\n}\n```\n\n## More functions\n\n* [`Numbers.average`](https://clinth.github.io/ixfx/functions/Numbers.average.html) - return the average of a set of numbers\n* [`Numbers.filter`](https://clinth.github.io/ixfx/functions/Numbers.filter.html) - for an input set of values, only yields those which are numbers\n* [`Numbers.isApproximately`](https://clinth.github.io/ixfx/functions/Numbers.isApproximately.html) - is this number roughly close to this other number?\n* [`Numbers.isValid`](https://clinth.github.io/ixfx/functions/Numbers.isValid.html) - is this number a proper number?\n* [`Numbers.max`](https://clinth.github.io/ixfx/functions/Numbers.max.html)/[`Numbers.min`](https://clinth.github.io/ixfx/functions/Numbers.min.html) - returns max/min from a set, ignoring things that aren't numbers\n* [`Numbers.quantiseEvery`](https://clinth.github.io/ixfx/functions/Numbers.quantiseEvery.html) - rounds a value by step size\n* [`Numbers.round`](https://clinth.github.io/ixfx/functions/Numbers.round.html) - round a number to specified decimal places\n* [`Numbers.total`](https://clinth.github.io/ixfx/functions/Numbers.total.html) - add up a set of values, ignoring those which aren't numbers\n\nSee also:\n* Module: [Data.Bipolar](https://clinth.github.io/ixfx/modules/Data.Bipolar.html)", "html": `<script type="module" hoist>
  import '/src/components/ReplPad';
<\/script>
<p>Data often needs to be refined at some point. This can also have the role of 'sanity checking', making sure data is within a range or 'shape' that later processes expect.</p>
<p>This goes hand-in-hand with <a href="../../data/normalising/">normalising</a>, which aims to convert data to a consistent scale.</p>
<h2 id="numeric-data">Numeric data</h2>
<p>Useful in-built JS functions:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token comment">// Math.abs makes numbers positive</span>
Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 100</span>

<span class="token comment">// Get the sign</span>
Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// -1;</span>
Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1</span>

<span class="token comment">// Round up or down</span>
Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 3</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>

<span class="token comment">// Round to closest integer</span>
Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>

<span class="token comment">// Convert a string to an integer</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">10.2</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 10</span>

<span class="token comment">// Convert a string to a float</span>
<span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">10.2</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10.2</span>

<span class="token comment">// Largest of parameters</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>

<span class="token comment">// Smallest of parameters</span>
Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span></code></pre>
<h3 id="clamping">Clamping</h3>
<p><a href="https://clinth.github.io/ixfx/functions/Data.clamp.html"><code is:raw>clamp</code></a> guarantees the return value is within the provided range.</p>
<p>For example, maybe you're computing a relative value based on some sensor input, assuming that 500 is the maximum. We want a percentage scale from 0..1:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token keyword">const</span> v <span class="token operator">=</span> sensorValue <span class="token operator">/</span> <span class="token number">500</span><span class="token punctuation">;</span></code></pre>
<p>But if <code is:raw>sensorValue</code> rises above 500 unexpectedly, <code is:raw>v</code> will be greater than 1 (ie. more than 100%). Other parts of our code might purposefully be able to handle this, but there are times where exceeding 100% cannot be permitted. Likewise, we might not want <code is:raw>v</code> to be less than 0% because of assumptions made in other parts of our code.</p>
<p>To do this manually, we might write:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token keyword">let</span> v <span class="token operator">=</span> sensorValue <span class="token operator">/</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> v <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// Now v is guaranteed to be between 0..1, inclusive</span></code></pre>
<p>That is all that <code is:raw>clamp</code> does. By default it uses a minimum of 0, a maximum of 1:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> clamp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 0.5</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 1.0</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.0</span></code></pre>
<p>Revisiting the earlier example, we can scale a sensor value which we expect to be on the range of 0..500 and clamp it to be sure we're always within 0..1:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> clamp<span class="token punctuation">,</span> scale <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.5</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.0</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">505</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.0 - although out of expected range</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.0 - although out of expected range</span></code></pre>
<p>A custom output range can be used as well:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// clamp(value:number, min:number, max:number):number</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 50</span></code></pre>
<p>If you are working with bipolar values (-1..1), you can use the <a href="https://clinth.github.io/ixfx/modules/Data.Bipolar.html">Data.Bipolar</a> module.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Bipolar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">0.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.9</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -1</span></code></pre>
<h3 id="wrap">Wrap</h3>
<p><a href="https://clinth.github.io/ixfx/functions/Data.wrapInteger.html"><code is:raw>wrapInteger</code></a> wraps an integer (ie. whole) number around a range, by default 0-360 (ie. degrees). These kinds of ranges logically wrap around continuously. Stepping past 359 degrees takes us to back to 0. And stepping -10 from 0 shouldn't yield -10, but 350.</p>
<p><code is:raw>wrap</code> does this arithmetic for you.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> wrapInteger <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200 - fine, within range</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 40 - wraps past 360 to 40</span></code></pre>
<p>Numbers below the range are likewise wrapped:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 270</span></code></pre>
<p>A custom range can be provided for wrapping: <code is:raw>wrapInteger(value:number, min:number, max:number):number</code>. The minimum is inclusive, the maximum is exclusive.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 25</span>

<span class="token comment">// Max value is exlusive, so it wraps to min:</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20</span></code></pre>
<p><a href="https://clinth.github.io/ixfx/functions/Data.wrap.html"><code is:raw>wrap</code></a> is the same, but doesn't enforce any integer limitations.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> wrap <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">wrap</span><span class="token punctuation">(</span><span class="token number">10.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.5;</span>
<span class="token function">wrap</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9.5</span></code></pre>
<h2 id="sampling">Sampling</h2>
<p>ixfx's <a href="https://clinth.github.io/ixfx/functions/Collections.Arrays.sample.html"><code is:raw>Arrays.sample</code></a> makes sub-sampling of a data set. This is useful when you have a lot of data and it would be too costly in terms of execution speed to process each item. For example, perhaps a sensor is producing too much data to process in each frame of animation.</p>
<p>Throwing away data can of course impact precision, but depending on the source of data and how you're working with it, this may not be a problem.</p>
<p>It's possible to get a percentage of the input data if a parameter of 0..1 is passed in. In this case, 0.5:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#2</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sample <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/arrays.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Get 50% of input data</span>
<span class="token keyword">const</span> sub1 <span class="token operator">=</span> <span class="token function">sample</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Yields: [2, 4, 6, 8, 10]</span></code></pre>
<p>Or if a whole number is provided, it will return data of every <em>x</em> steps:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad#2</span>
<span class="token comment">// Get every third</span>
<span class="token keyword">const</span> sub2 <span class="token operator">=</span> <span class="token function">sample</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Yields: [3, 6, 9]</span></code></pre>
<p>See also: <a href="https://clinth.github.io/ixfx/modules/Generators.Sync.html">Generators.Sync module</a> contains various functions for processing a stream of data from a generator.</p>
<h2 id="objects">Objects</h2>
<h3 id="does-it-contain-a-field">Does it contain a field?</h3>
<p>Check if an object has a field using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in"><code is:raw>in</code></a>. In the example below, we print one message if the object has the field <code is:raw>humidity</code>, another one if it doesn't.</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">temp</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">humidity</span><span class="token operator">:</span> <span class="token number">0.8</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">temp</span><span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">humidity</span><span class="token template-punctuation string">\`</span></span> <span class="token keyword">in</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Temp: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>temp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> humidity: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>humidity<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Temp: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>temp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="type-checking">Type checking</h2>
<p>Check the type of a variable with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof"><code is:raw>typeof</code></a>:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">typeof</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>   <span class="token comment">// "string"</span>
<span class="token keyword">typeof</span> <span class="token number">0</span><span class="token punctuation">;</span>         <span class="token comment">// "number"</span>
<span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token literal-property property">temp</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// "object"</span></code></pre>
<p>In action, compare the result of <code is:raw>typeof</code> with the name of a type:</p>
<pre class="language-js"><code is:raw class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> v <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">string</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// variable is a string</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="more-functions">More functions</h2>
<ul>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.average.html"><code is:raw>Numbers.average</code></a> - return the average of a set of numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.filter.html"><code is:raw>Numbers.filter</code></a> - for an input set of values, only yields those which are numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.isApproximately.html"><code is:raw>Numbers.isApproximately</code></a> - is this number roughly close to this other number?</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.isValid.html"><code is:raw>Numbers.isValid</code></a> - is this number a proper number?</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.max.html"><code is:raw>Numbers.max</code></a>/<a href="https://clinth.github.io/ixfx/functions/Numbers.min.html"><code is:raw>Numbers.min</code></a> - returns max/min from a set, ignoring things that aren't numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.quantiseEvery.html"><code is:raw>Numbers.quantiseEvery</code></a> - rounds a value by step size</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.round.html"><code is:raw>Numbers.round</code></a> - round a number to specified decimal places</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.total.html"><code is:raw>Numbers.total</code></a> - add up a set of values, ignoring those which aren't numbers</li>
</ul>
<p>See also:</p>
<ul>
<li>Module: <a href="https://clinth.github.io/ixfx/modules/Data.Bipolar.html">Data.Bipolar</a></li>
</ul>` } };
  const SCRIPTS = [
    { props: { "type": "module", "hoist": true }, children: `import '/src/components/ReplPad';` }
  ];
  for (const SCRIPT of SCRIPTS)
    $$result.scripts.add(SCRIPT);
  return render`${renderComponent($$result, "Layout", $$MainLayout, { "content": $$content }, { "default": () => render`<p>Data often needs to be refined at some point. This can also have the role of 'sanity checking', making sure data is within a range or 'shape' that later processes expect.</p><p>This goes hand-in-hand with <a href="../../data/normalising/">normalising</a>, which aims to convert data to a consistent scale.</p><h2 id="numeric-data">Numeric data</h2><p>Useful in-built JS functions:</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad</span>
<span class="token comment">// Math.abs makes numbers positive</span>
Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 100</span>

<span class="token comment">// Get the sign</span>
Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// -1;</span>
Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1</span>

<span class="token comment">// Round up or down</span>
Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 3</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 2</span>

<span class="token comment">// Round to closest integer</span>
Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">2.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>

<span class="token comment">// Convert a string to an integer</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">10.2</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 10</span>

<span class="token comment">// Convert a string to a float</span>
<span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">10.2</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10.2</span>

<span class="token comment">// Largest of parameters</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>

<span class="token comment">// Smallest of parameters</span>
Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span></code></pre><h3 id="clamping">Clamping</h3><p><a href="https://clinth.github.io/ixfx/functions/Data.clamp.html"><code>clamp</code></a> guarantees the return value is within the provided range.</p><p>For example, maybe you're computing a relative value based on some sensor input, assuming that 500 is the maximum. We want a percentage scale from 0..1:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> v <span class="token operator">=</span> sensorValue <span class="token operator">/</span> <span class="token number">500</span><span class="token punctuation">;</span></code></pre><p>But if <code>sensorValue</code> rises above 500 unexpectedly, <code>v</code> will be greater than 1 (ie. more than 100%). Other parts of our code might purposefully be able to handle this, but there are times where exceeding 100% cannot be permitted. Likewise, we might not want <code>v</code> to be less than 0% because of assumptions made in other parts of our code.</p><p>To do this manually, we might write:</p><pre class="language-js"><code class="language-js"><span class="token keyword">let</span> v <span class="token operator">=</span> sensorValue <span class="token operator">/</span> <span class="token number">500</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> v <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// Now v is guaranteed to be between 0..1, inclusive</span></code></pre><p>That is all that <code>clamp</code> does. By default it uses a minimum of 0, a maximum of 1:</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> clamp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 0.5</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 1.0</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.0</span></code></pre><p>Revisiting the earlier example, we can scale a sensor value which we expect to be on the range of 0..500 and clamp it to be sure we're always within 0..1:</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> clamp<span class="token punctuation">,</span> scale <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">250</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.5</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.0</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">505</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1.0 - although out of expected range</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.0 - although out of expected range</span></code></pre><p>A custom output range can be used as well:</p><pre class="language-js"><code class="language-js"><span class="token comment">// clamp(value:number, min:number, max:number):number</span>
<span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 50</span></code></pre><p>If you are working with bipolar values (-1..1), you can use the <a href="https://clinth.github.io/ixfx/modules/Data.Bipolar.html">Data.Bipolar</a> module.</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Bipolar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token number">0.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0.9</span>
Bipolar<span class="token punctuation">.</span><span class="token function">clamp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -1</span></code></pre><h3 id="wrap">Wrap</h3><p><a href="https://clinth.github.io/ixfx/functions/Data.wrapInteger.html"><code>wrapInteger</code></a> wraps an integer (ie. whole) number around a range, by default 0-360 (ie. degrees). These kinds of ranges logically wrap around continuously. Stepping past 359 degrees takes us to back to 0. And stepping -10 from 0 shouldn't yield -10, but 350.</p><p><code>wrap</code> does this arithmetic for you.</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> wrapInteger <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200 - fine, within range</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 40 - wraps past 360 to 40</span></code></pre><p>Numbers below the range are likewise wrapped:</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 270</span></code></pre><p>A custom range can be provided for wrapping: <code>wrapInteger(value:number, min:number, max:number):number</code>. The minimum is inclusive, the maximum is exclusive.</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad#1</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 25</span>

<span class="token comment">// Max value is exlusive, so it wraps to min:</span>
<span class="token function">wrapInteger</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 20</span></code></pre><p><a href="https://clinth.github.io/ixfx/functions/Data.wrap.html"><code>wrap</code></a> is the same, but doesn't enforce any integer limitations.</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> wrap <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/data.js'</span><span class="token punctuation">;</span>
<span class="token function">wrap</span><span class="token punctuation">(</span><span class="token number">10.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.5;</span>
<span class="token function">wrap</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9.5</span></code></pre><h2 id="sampling">Sampling</h2><p>ixfx's <a href="https://clinth.github.io/ixfx/functions/Collections.Arrays.sample.html"><code>Arrays.sample</code></a> makes sub-sampling of a data set. This is useful when you have a lot of data and it would be too costly in terms of execution speed to process each item. For example, perhaps a sensor is producing too much data to process in each frame of animation.</p><p>Throwing away data can of course impact precision, but depending on the source of data and how you're working with it, this may not be a problem.</p><p>It's possible to get a percentage of the input data if a parameter of 0..1 is passed in. In this case, 0.5:</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad#2</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> sample <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://unpkg.com/ixfx/dist/arrays.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Get 50% of input data</span>
<span class="token keyword">const</span> sub1 <span class="token operator">=</span> <span class="token function">sample</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Yields: [2, 4, 6, 8, 10]</span></code></pre><p>Or if a whole number is provided, it will return data of every <em>x</em> steps:</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad#2</span>
<span class="token comment">// Get every third</span>
<span class="token keyword">const</span> sub2 <span class="token operator">=</span> <span class="token function">sample</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Yields: [3, 6, 9]</span></code></pre><p>See also: <a href="https://clinth.github.io/ixfx/modules/Generators.Sync.html">Generators.Sync module</a> contains various functions for processing a stream of data from a generator.</p><h2 id="objects">Objects</h2><h3 id="does-it-contain-a-field">Does it contain a field?</h3><p>Check if an object has a field using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/in"><code>in</code></a>. In the example below, we print one message if the object has the field <code>humidity</code>, another one if it doesn't.</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">temp</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">humidity</span><span class="token operator">:</span> <span class="token number">0.8</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">temp</span><span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">humidity</span><span class="token template-punctuation string">\`</span></span> <span class="token keyword">in</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Temp: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>temp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> humidity: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>humidity<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Temp: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>v<span class="token punctuation">.</span>temp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="type-checking">Type checking</h2><p>Check the type of a variable with <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof"><code>typeof</code></a>:</p><pre class="language-js"><code class="language-js"><span class="token comment">// repl-pad</span>
<span class="token keyword">typeof</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>   <span class="token comment">// "string"</span>
<span class="token keyword">typeof</span> <span class="token number">0</span><span class="token punctuation">;</span>         <span class="token comment">// "number"</span>
<span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token literal-property property">temp</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// "object"</span></code></pre><p>In action, compare the result of <code>typeof</code> with the name of a type:</p><pre class="language-js"><code class="language-js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> v <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">string</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// variable is a string</span>
<span class="token punctuation">}</span></code></pre><h2 id="more-functions">More functions</h2><ul>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.average.html"><code>Numbers.average</code></a> - return the average of a set of numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.filter.html"><code>Numbers.filter</code></a> - for an input set of values, only yields those which are numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.isApproximately.html"><code>Numbers.isApproximately</code></a> - is this number roughly close to this other number?</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.isValid.html"><code>Numbers.isValid</code></a> - is this number a proper number?</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.max.html"><code>Numbers.max</code></a>/<a href="https://clinth.github.io/ixfx/functions/Numbers.min.html"><code>Numbers.min</code></a> - returns max/min from a set, ignoring things that aren't numbers</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.quantiseEvery.html"><code>Numbers.quantiseEvery</code></a> - rounds a value by step size</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.round.html"><code>Numbers.round</code></a> - round a number to specified decimal places</li>
<li><a href="https://clinth.github.io/ixfx/functions/Numbers.total.html"><code>Numbers.total</code></a> - add up a set of values, ignoring those which aren't numbers</li>
</ul><p>See also:</p><ul>
<li>Module: <a href="https://clinth.github.io/ixfx/modules/Data.Bipolar.html">Data.Bipolar</a></li>
</ul>` })}`;
});

export { $$metadata, $$Cleanup as default, frontmatter, metadata };
