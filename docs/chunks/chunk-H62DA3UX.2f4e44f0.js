import{t as x,_ as S,d as qt,b as Y,n as jt,j as Jf,m as Hf,i as Kf,e as Yf,p as Zf,a as ss,q as os,r as ht}from"./chunk-QRUAJLXP.d4cb917b.js";var Xf=e=>e.x===null&&e.y===null,Wf=e=>Number.isNaN(e.x)||Number.isNaN(e.y);function N(e,r="Point"){if(e===void 0)throw new Error(`'${r}' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(e===null)throw new Error(`'${r}' is null. Expected {x,y} got ${JSON.stringify(e)}`);if(e.x===void 0)throw new Error(`'${r}.x' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(e.y===void 0)throw new Error(`'${r}.y' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(typeof e.x!="number")throw new TypeError(`'${r}.x' must be a number. Got ${e.x}`);if(typeof e.y!="number")throw new TypeError(`'${r}.y' must be a number. Got ${e.y}`);if(e.x===null)throw new Error(`'${r}.x' is null`);if(e.y===null)throw new Error(`'${r}.y' is null`);if(Number.isNaN(e.x))throw new Error(`'${r}.x' is NaN`);if(Number.isNaN(e.y))throw new Error(`'${r}.y' is NaN`)}var us=(e,r="pt")=>(N(e,r),x(e.x,"nonZero",`${r}.x`),x(e.y,"nonZero",`${r}.y`),typeof e.z<"u"&&x(e.z,"nonZero",`${r}.z`),!0);function M(e){return!(e===void 0||e===null||e.x===void 0||e.y===void 0)}var Te=e=>!(e===void 0||e===null||e.x===void 0||e.y===void 0||e.z===void 0),ut=e=>e.x===0&&e.y===0,lt=e=>Number.isNaN(e.x)&&Number.isNaN(e.y),Dt=(e,r)=>(N(e,"a"),N(r,"b"),e=Object.freeze({...e}),r=Object.freeze({...r}),Object.freeze({a:e,b:r})),ls=(e,r,n,i)=>{if(Number.isNaN(e))throw new Error("x1 is NaN");if(Number.isNaN(n))throw new Error("x2 is NaN");if(Number.isNaN(r))throw new Error("y1 is NaN");if(Number.isNaN(i))throw new Error("y2 is NaN");return Dt({x:e,y:r},{x:n,y:i})},ot=(e,r=0,n=1)=>{if(Number.isNaN(e))throw new Error("'value' parameter is NaN");if(Number.isNaN(r))throw new Error("'min' parameter is NaN");if(Number.isNaN(n))throw new Error("'max' parameter is NaN");return e<r?r:e>n?n:e},Yi=(e,r)=>{if(!Number.isInteger(e))throw new TypeError(`v parameter must be an integer (${e})`);const n=Array.isArray(r)?r.length:r;if(!Number.isInteger(n))throw new TypeError(`length parameter must be an integer (${n}, ${typeof n})`);return e=Math.round(e),e<0?0:e>=n?n-1:e},Pe=(e,r="?")=>{if(e===void 0)throw new TypeError(`Param '${r}' is undefined. Expected array.`);if(e===null)throw new TypeError(`Param '${r}' is null. Expected array.`);if(!Array.isArray(e))throw new TypeError(`Param '${r}' not an array as expected`)};function*fs(e){if(Pe(e,"values"),e.length<2)throw new Error(`Array needs to have at least two entries. Length: ${e.length}`);for(let r=1;r<e.length;r++)yield[e[r-1],e[r]]}var Uf=(e,r,n)=>{if(Pe(e,"arr"),e.length<2)return n;for(let i=0;i<e.length-1;i++)n=r(n,e[i],e[i+1]);return n},Gt=(e,r,n,i,a,s)=>Qf(r,n,i,a,s)(e),Qf=(e,r,n,i,a)=>{const s=i??1,o=n??0;return u=>{if(e===r)return s;let l=(u-e)/(r-e);return a!==void 0&&(l=a(l)),l*(s-o)+o}},p2=(e,r,n,i,a,s)=>{if(a===void 0&&(a=1),i===void 0&&(i=0),r===n)return a;const o=Gt(e,r,n,i,a,s);return ot(o,i,a)},v2=(e,r,n=1)=>(x(e,"percentage","v"),x(r,"percentage","outMin"),x(n,"percentage","outMax"),Gt(e,0,1,r,n)),g2=(e,r,n)=>ec(r,n)(e),ec=(e,r)=>n=>(x(n,"percentage","v"),Gt(n,0,1,e,r)),tc={};S(tc,{cssLinearGradient:()=>mh,fromHsla:()=>oh,getCssVariable:()=>hh,goldenAngleColour:()=>ah,interpolator:()=>dh,opacity:()=>ch,randomHue:()=>sh,resolve:()=>be,resolveToString:()=>lh,scale:()=>yh,toHex:()=>fh,toHsl:()=>Ys,toHsla:()=>th,toRgb:()=>uh,toString:()=>ih});function R(e,r){let n=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(r[0])||(r=r.map(o=>[o]));let i=r[0].length,a=r[0].map((o,u)=>r.map(l=>l[u])),s=e.map(o=>a.map(u=>{let l=0;if(!Array.isArray(o)){for(let f of u)l+=o*f;return l}for(let f=0;f<o.length;f++)l+=o[f]*(u[f]||0);return l}));return n===1&&(s=s[0]),i===1?s.map(o=>o[0]):s}function Jt(e){return Re(e)==="string"}function Re(e){return(Object.prototype.toString.call(e).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function gr(e,{precision:r,unit:n}){return ke(e)?"none":cs(e,r)+(n??"")}function ke(e){return Number.isNaN(e)||e instanceof Number&&e?.none}function F(e){return ke(e)?0:e}function cs(e,r){if(e===0)return 0;let n=~~e,i=0;n&&r&&(i=~~Math.log10(Math.abs(n))+1);const a=10**(r-i);return Math.floor(e*a+.5)/a}var rc={deg:1,grad:.9,rad:180/Math.PI,turn:360};function hs(e){if(!e)return;e=e.trim();const r=/^([a-z]+)\((.+?)\)$/i,n=/^-?[\d.]+$/,i=/%|deg|g?rad|turn$/,a=/\/?\s*(none|[-\w.]+(?:%|deg|g?rad|turn)?)/g;let s=e.match(r);if(s){let o=[];return s[2].replace(a,(u,l)=>{let f=l.match(i),c=l;if(f){let h=f[0],d=c.slice(0,-h.length);h==="%"?(c=new Number(d/100),c.type="<percentage>"):(c=new Number(d*rc[h]),c.type="<angle>",c.unit=h)}else n.test(c)?(c=new Number(c),c.type="<number>"):c==="none"&&(c=new Number(NaN),c.none=!0);u.startsWith("/")&&(c=c instanceof Number?c:new Number(c),c.alpha=!0),typeof c=="object"&&c instanceof Number&&(c.raw=l),o.push(c)}),{name:s[1].toLowerCase(),rawName:s[1],rawArgs:s[2],args:o}}}function ds(e){return e[e.length-1]}function Tt(e,r,n){return isNaN(e)?r:isNaN(r)?e:e+(r-e)*n}function ys(e,r,n){return(n-e)/(r-e)}function Dn(e,r,n){return Tt(r[0],r[1],ys(e[0],e[1],n))}function ms(e){return e.map(r=>r.split("|").map(n=>{n=n.trim();let i=n.match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(i){let a=new String(i[1]);return a.range=[+i[2],+i[3]],a}return n}))}function ps(e,r,n){return Math.max(Math.min(n,r),e)}function jr(e,r){return Math.sign(e)===Math.sign(r)?e:-e}function me(e,r){return jr(Math.abs(e)**r,e)}function Gn(e,r){return r===0?0:e/r}function vs(e,r,n=0,i=e.length){for(;n<i;){const a=n+i>>1;e[a]<r?n=a+1:i=a}return n}var nc=Object.freeze({__proto__:null,bisectLeft:vs,clamp:ps,copySign:jr,interpolate:Tt,interpolateInv:ys,isNone:ke,isString:Jt,last:ds,mapRange:Dn,multiplyMatrices:R,parseCoordGrammar:ms,parseFunction:hs,serializeNumber:gr,skipNone:F,spow:me,toPrecision:cs,type:Re,zdiv:Gn}),ic=class{add(e,r,n){if(typeof arguments[0]!="string"){for(var e in arguments[0])this.add(e,arguments[0][e],arguments[1]);return}(Array.isArray(e)?e:[e]).forEach(function(i){this[i]=this[i]||[],r&&this[i][n?"unshift":"push"](r)},this)}run(e,r){this[e]=this[e]||[],this[e].forEach(function(n){n.call(r&&r.context?r.context:r,r)})}},Le=new ic,re={gamut_mapping:"css",precision:5,deltaE:"76",verbose:globalThis?.process?.env?.NODE_ENV?.toLowerCase()!=="test",warn:function(r){this.verbose&&globalThis?.console?.warn?.(r)}},K={D50:[.3457/.3585,1,(1-.3457-.3585)/.3585],D65:[.3127/.329,1,(1-.3127-.329)/.329]};function gn(e){return Array.isArray(e)?e:K[e]}function xr(e,r,n,i={}){if(e=gn(e),r=gn(r),!e||!r)throw new TypeError(`Missing white point to convert ${e?"":"from"}${!e&&!r?"/":""}${r?"":"to"}`);if(e===r)return n;let a={W1:e,W2:r,XYZ:n,options:i};if(Le.run("chromatic-adaptation-start",a),a.M||(a.W1===K.D65&&a.W2===K.D50?a.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:a.W1===K.D50&&a.W2===K.D65&&(a.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),Le.run("chromatic-adaptation-end",a),a.M)return R(a.M,a.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}var ac=new Set(["<number>","<percentage>","<angle>"]);function Zi(e,r,n,i){return Object.entries(e.coords).map(([s,o],u)=>{let l=r.coordGrammar[u],f=i[u],c=f?.type,h;if(f.none?h=l.find(m=>ac.has(m)):h=l.find(m=>m==c),!h){let m=o.name||s;throw new TypeError(`${c??f.raw} not allowed for ${m} in ${n}()`)}let d=h.range;c==="<percentage>"&&(d||=[0,1]);let y=o.range||o.refRange;return d&&y&&(i[u]=Dn(d,y,i[u])),h})}function gs(e,{meta:r}={}){let n={str:String(e)?.trim()};if(Le.run("parse-start",n),n.color)return n.color;if(n.parsed=hs(n.str),n.parsed){let i=n.parsed.name;if(i==="color"){let a=n.parsed.args.shift(),s=a.startsWith("--")?a.substring(2):`--${a}`,o=[a,s],u=n.parsed.rawArgs.indexOf("/")>0?n.parsed.args.pop():1;for(let c of g.all){let h=c.getFormat("color");if(h&&(o.includes(h.id)||h.ids?.filter(d=>o.includes(d)).length)){const d=Object.keys(c.coords).map((m,v)=>n.parsed.args[v]||0);let y;return h.coordGrammar&&(y=Zi(c,h,"color",d)),r&&Object.assign(r,{formatId:"color",types:y}),h.id.startsWith("--")&&!a.startsWith("--")&&re.warn(`${c.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${h.id}) instead of color(${a}).`),a.startsWith("--")&&!h.id.startsWith("--")&&re.warn(`${c.name} is a standard space and supported in the CSS spec. Use color(${h.id}) instead of prefixed color(${a}).`),{spaceId:c.id,coords:d,alpha:u}}}let l="",f=a in g.registry?a:s;if(f in g.registry){let c=g.registry[f].formats?.color?.id;c&&(l=`Did you mean color(${c})?`)}throw new TypeError(`Cannot parse color(${a}). `+(l||"Missing a plugin?"))}else for(let a of g.all){let s=a.getFormat(i);if(s&&s.type==="function"){let o=1;(s.lastAlpha||ds(n.parsed.args).alpha)&&(o=n.parsed.args.pop());let u=n.parsed.args,l;return s.coordGrammar&&(l=Zi(a,s,i,u)),r&&Object.assign(r,{formatId:s.name,types:l}),{spaceId:a.id,coords:u,alpha:o}}}}else for(let i of g.all)for(let a in i.formats){let s=i.formats[a];if(s.type!=="custom"||s.test&&!s.test(n.str))continue;let o=s.parse(n.str);if(o)return o.alpha??=1,r&&(r.formatId=a),o}throw new TypeError(`Could not parse ${e} as a color. Missing a plugin?`)}function $(e){if(Array.isArray(e))return e.map($);if(!e)throw new TypeError("Empty color reference");Jt(e)&&(e=gs(e));let r=e.space||e.spaceId;return r instanceof g||(e.space=g.get(r)),e.alpha===void 0&&(e.alpha=1),e}var sc=75e-6,g=class fe{constructor(r){this.id=r.id,this.name=r.name,this.base=r.base?fe.get(r.base):null,this.aliases=r.aliases,this.base&&(this.fromBase=r.fromBase,this.toBase=r.toBase);let n=r.coords??this.base.coords;for(let a in n)"name"in n[a]||(n[a].name=a);this.coords=n;let i=r.white??this.base.white??"D65";this.white=gn(i),this.formats=r.formats??{};for(let a in this.formats){let s=this.formats[a];s.type||="function",s.name||=a}this.formats.color?.id||(this.formats.color={...this.formats.color??{},id:r.cssId||this.id}),r.gamutSpace?this.gamutSpace=r.gamutSpace==="self"?this:fe.get(r.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(a,s)=>!0),this.referred=r.referred,Object.defineProperty(this,"path",{value:oc(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),Le.run("colorspace-init-end",this)}inGamut(r,{epsilon:n=sc}={}){if(!this.equals(this.gamutSpace))return r=this.to(this.gamutSpace,r),this.gamutSpace.inGamut(r,{epsilon:n});let i=Object.values(this.coords);return r.every((a,s)=>{let o=i[s];if(o.type!=="angle"&&o.range){if(Number.isNaN(a))return!0;let[u,l]=o.range;return(u===void 0||a>=u-n)&&(l===void 0||a<=l+n)}return!0})}get isUnbounded(){return Object.values(this.coords).every(r=>!("range"in r))}get cssId(){return this.formats?.color?.id||this.id}get isPolar(){for(let r in this.coords)if(this.coords[r].type==="angle")return!0;return!1}getFormat(r){if(typeof r=="object")return r=Xi(r,this),r;let n;return r==="default"?n=Object.values(this.formats)[0]:n=this.formats[r],n?(n=Xi(n,this),n):null}equals(r){return r?this===r||this.id===r||this.id===r.id:!1}to(r,n){if(arguments.length===1){const u=$(r);[r,n]=[u.space,u.coords]}if(r=fe.get(r),this.equals(r))return n;n=n.map(u=>Number.isNaN(u)?0:u);let i=this.path,a=r.path,s,o;for(let u=0;u<i.length&&i[u].equals(a[u]);u++)s=i[u],o=u;if(!s)throw new Error(`Cannot convert between color spaces ${this} and ${r}: no connection space was found`);for(let u=i.length-1;u>o;u--)n=i[u].toBase(n);for(let u=o+1;u<a.length;u++)n=a[u].fromBase(n);return n}from(r,n){if(arguments.length===1){const i=$(r);[r,n]=[i.space,i.coords]}return r=fe.get(r),r.to(this,n)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let r=[];for(let n in this.coords){let i=this.coords[n],a=i.range||i.refRange;r.push(a?.min??0)}return r}static registry={};static get all(){return[...new Set(Object.values(fe.registry))]}static register(r,n){if(arguments.length===1&&(n=arguments[0],r=n.id),n=this.get(n),this.registry[r]&&this.registry[r]!==n)throw new Error(`Duplicate color space registration: '${r}'`);if(this.registry[r]=n,arguments.length===1&&n.aliases)for(let i of n.aliases)this.register(i,n);return n}static get(r,...n){if(!r||r instanceof fe)return r;if(Re(r)==="string"){let a=fe.registry[r.toLowerCase()];if(!a)throw new TypeError(`No color space found with id = "${r}"`);return a}if(n.length)return fe.get(...n);throw new TypeError(`${r} is not a valid color space`)}static resolveCoord(r,n){let i=Re(r),a,s;if(i==="string"?r.includes(".")?[a,s]=r.split("."):[a,s]=[,r]:Array.isArray(r)?[a,s]=r:(a=r.space,s=r.coordId),a=fe.get(a),a||(a=n),!a)throw new TypeError(`Cannot resolve coordinate reference ${r}: No color space specified and relative references are not allowed here`);if(i=Re(s),i==="number"||i==="string"&&s>=0){let l=Object.entries(a.coords)[s];if(l)return{space:a,id:l[0],index:s,...l[1]}}a=fe.get(a);let o=s.toLowerCase(),u=0;for(let l in a.coords){let f=a.coords[l];if(l.toLowerCase()===o||f.name?.toLowerCase()===o)return{space:a,id:l,index:u,...f};u++}throw new TypeError(`No "${s}" coordinate found in ${a.name}. Its coordinates are: ${Object.keys(a.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}};function oc(e){let r=[e];for(let n=e;n=n.base;)r.push(n);return r}function Xi(e,{coords:r}={}){if(e.coords&&!e.coordGrammar){e.type||="function",e.name||="color",e.coordGrammar=ms(e.coords);let n=Object.entries(r).map(([i,a],s)=>{let o=e.coordGrammar[s][0],u=a.range||a.refRange,l=o.range,f="";return o=="<percentage>"?(l=[0,100],f="%"):o=="<angle>"&&(f="deg"),{fromRange:u,toRange:l,suffix:f}});e.serializeCoords=(i,a)=>i.map((s,o)=>{let{fromRange:u,toRange:l,suffix:f}=n[o];return u&&l&&(s=Dn(u,l,s)),s=gr(s,{precision:a,unit:f}),s})}return e}var G=new g({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]}),Q=class extends g{constructor(e){e.coords||(e.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),e.base||(e.base=G),e.toXYZ_M&&e.fromXYZ_M&&(e.toBase??=r=>{let n=R(e.toXYZ_M,r);return this.white!==this.base.white&&(n=xr(this.white,this.base.white,n)),n},e.fromBase??=r=>(r=xr(this.base.white,this.white,r),R(e.fromXYZ_M,r))),e.referred??="display";super(e)}};function Ht(e,r){return e=$(e),!r||e.space.equals(r)?e.coords.slice():(r=g.get(r),r.from(e))}function ee(e,r){e=$(e);let{space:n,index:i}=g.resolveCoord(r,e.space);return Ht(e,n)[i]}function Jn(e,r,n){return e=$(e),r=g.get(r),e.coords=r.to(e.space,n),e}Jn.returns="color";function $e(e,r,n){if(e=$(e),arguments.length===2&&Re(arguments[1])==="object"){let i=arguments[1];for(let a in i)$e(e,a,i[a])}else{typeof n=="function"&&(n=n(ee(e,r)));let{space:i,index:a}=g.resolveCoord(r,e.space),s=Ht(e,i);s[a]=n,Jn(e,i,s)}return e}$e.returns="color";var Hn=new g({id:"xyz-d50",name:"XYZ D50",white:"D50",base:G,fromBase:e=>xr(G.white,"D50",e),toBase:e=>xr("D50",G.white,e)}),uc=216/24389,Wi=24/116,ar=24389/27,nn=K.D50,te=new g({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:nn,base:Hn,fromBase(e){let n=e.map((i,a)=>i/nn[a]).map(i=>i>uc?Math.cbrt(i):(ar*i+16)/116);return[116*n[1]-16,500*(n[0]-n[1]),200*(n[1]-n[2])]},toBase(e){let r=[];return r[1]=(e[0]+16)/116,r[0]=e[1]/500+r[1],r[2]=r[1]-e[2]/200,[r[0]>Wi?Math.pow(r[0],3):(116*r[0]-16)/ar,e[0]>8?Math.pow((e[0]+16)/116,3):e[0]/ar,r[2]>Wi?Math.pow(r[2],3):(116*r[2]-16)/ar].map((i,a)=>i*nn[a])},formats:{lab:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function we(e){return(e%360+360)%360}function lc(e,r){if(e==="raw")return r;let[n,i]=r.map(we),a=i-n;return e==="increasing"?a<0&&(i+=360):e==="decreasing"?a>0&&(n+=360):e==="longer"?-180<a&&a<180&&(a>0?n+=360:i+=360):e==="shorter"&&(a>180?n+=360:a<-180&&(i+=360)),[n,i]}var kt=new g({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:te,fromBase(e){let[r,n,i]=e,a;const s=.02;return Math.abs(n)<s&&Math.abs(i)<s?a=NaN:a=Math.atan2(i,n)*180/Math.PI,[r,Math.sqrt(n**2+i**2),we(a)]},toBase(e){let[r,n,i]=e;return n<0&&(n=0),isNaN(i)&&(i=0),[r,n*Math.cos(i*Math.PI/180),n*Math.sin(i*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}}),Ui=25**7,wr=Math.PI,Qi=180/wr,tt=wr/180;function ea(e){const r=e*e;return r*r*r*e}function xs(e,r,{kL:n=1,kC:i=1,kH:a=1}={}){[e,r]=$([e,r]);let[s,o,u]=te.from(e),l=kt.from(te,[s,o,u])[1],[f,c,h]=te.from(r),d=kt.from(te,[f,c,h])[1];l<0&&(l=0),d<0&&(d=0);let y=(l+d)/2,m=ea(y),v=.5*(1-Math.sqrt(m/(m+Ui))),w=(1+v)*o,E=(1+v)*c,z=Math.sqrt(w**2+u**2),P=Math.sqrt(E**2+h**2),B=w===0&&u===0?0:Math.atan2(u,w),b=E===0&&h===0?0:Math.atan2(h,E);B<0&&(B+=2*wr),b<0&&(b+=2*wr),B*=Qi,b*=Qi;let _=f-s,C=P-z,A=b-B,V=B+b,T=Math.abs(A),J;z*P===0?J=0:T<=180?J=A:A>180?J=A-360:A<-180?J=A+360:re.warn("the unthinkable has happened");let H=2*Math.sqrt(P*z)*Math.sin(J*tt/2),ye=(s+f)/2,le=(z+P)/2,nr=ea(le),Ee;z*P===0?Ee=V:T<=180?Ee=V/2:V<360?Ee=(V+360)/2:Ee=(V-360)/2;let Ji=(ye-50)**2,Ff=1+.015*Ji/Math.sqrt(20+Ji),Hi=1+.045*le,Nt=1;Nt-=.17*Math.cos((Ee-30)*tt),Nt+=.24*Math.cos(2*Ee*tt),Nt+=.32*Math.cos((3*Ee+6)*tt),Nt-=.2*Math.cos((4*Ee-63)*tt);let Ki=1+.015*le*Nt,qf=30*Math.exp(-1*((Ee-275)/25)**2),Df=2*Math.sqrt(nr/(nr+Ui)),Gf=-1*Math.sin(2*qf*tt)*Df,ir=(_/(n*Ff))**2;return ir+=(C/(i*Hi))**2,ir+=(H/(a*Ki))**2,ir+=Gf*(C/(i*Hi))*(H/(a*Ki)),Math.sqrt(ir)}var fc=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],cc=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],hc=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],dc=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],dt=new g({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:G,fromBase(e){let n=R(fc,e).map(i=>Math.cbrt(i));return R(hc,n)},toBase(e){let n=R(dc,e).map(i=>i**3);return R(cc,n)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function xn(e,r){[e,r]=$([e,r]);let[n,i,a]=dt.from(e),[s,o,u]=dt.from(r),l=n-s,f=i-o,c=a-u;return Math.sqrt(l**2+f**2+c**2)}var yc=75e-6;function Ye(e,r,{epsilon:n=yc}={}){e=$(e),r||(r=e.space),r=g.get(r);let i=e.coords;return r!==e.space&&(i=r.from(e)),r.inGamut(i,{epsilon:n})}function yt(e){return{space:e.space,coords:e.coords.slice(),alpha:e.alpha}}function ws(e,r,n="lab"){n=g.get(n);let i=n.from(e),a=n.from(r);return Math.sqrt(i.reduce((s,o,u)=>{let l=a[u];return isNaN(o)||isNaN(l)?s:s+(l-o)**2},0))}function mc(e,r){return ws(e,r,"lab")}var pc=Math.PI,ta=pc/180;function vc(e,r,{l:n=2,c:i=1}={}){[e,r]=$([e,r]);let[a,s,o]=te.from(e),[,u,l]=kt.from(te,[a,s,o]),[f,c,h]=te.from(r),d=kt.from(te,[f,c,h])[1];u<0&&(u=0),d<0&&(d=0);let y=a-f,m=u-d,v=s-c,w=o-h,E=v**2+w**2-m**2,z=.511;a>=16&&(z=.040975*a/(1+.01765*a));let P=.0638*u/(1+.0131*u)+.638,B;Number.isNaN(l)&&(l=0),l>=164&&l<=345?B=.56+Math.abs(.2*Math.cos((l+168)*ta)):B=.36+Math.abs(.4*Math.cos((l+35)*ta));let b=Math.pow(u,4),_=Math.sqrt(b/(b+1900)),C=P*(_*B+1-_),A=(y/(n*z))**2;return A+=(m/(i*P))**2,A+=E/C**2,Math.sqrt(A)}var ra=203,Kn=new g({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:G,fromBase(e){return e.map(r=>Math.max(r*ra,0))},toBase(e){return e.map(r=>Math.max(r/ra,0))}}),sr=1.15,or=.66,na=2610/2**14,gc=2**14/2610,ia=3424/2**12,aa=2413/2**7,sa=2392/2**7,xc=1.7*2523/2**5,oa=2**5/(1.7*2523),ur=-.56,an=16295499532821565e-27,wc=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],bc=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],Ec=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],Mc=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]],bs=new g({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:Kn,fromBase(e){let[r,n,i]=e,a=sr*r-(sr-1)*i,s=or*n-(or-1)*r,u=R(wc,[a,s,i]).map(function(d){let y=ia+aa*(d/1e4)**na,m=1+sa*(d/1e4)**na;return(y/m)**xc}),[l,f,c]=R(Ec,u);return[(1+ur)*l/(1+ur*l)-an,f,c]},toBase(e){let[r,n,i]=e,a=(r+an)/(1+ur-ur*(r+an)),o=R(Mc,[a,n,i]).map(function(d){let y=ia-d**oa,m=sa*d**oa-aa;return 1e4*(y/m)**gc}),[u,l,f]=R(bc,o),c=(u+(sr-1)*f)/sr,h=(l+(or-1)*c)/or;return[c,h,f]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),wn=new g({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:bs,fromBase(e){let[r,n,i]=e,a;const s=2e-4;return Math.abs(n)<s&&Math.abs(i)<s?a=NaN:a=Math.atan2(i,n)*180/Math.PI,[r,Math.sqrt(n**2+i**2),we(a)]},toBase(e){return[e[0],e[1]*Math.cos(e[2]*Math.PI/180),e[1]*Math.sin(e[2]*Math.PI/180)]}});function zc(e,r){[e,r]=$([e,r]);let[n,i,a]=wn.from(e),[s,o,u]=wn.from(r),l=n-s,f=i-o;Number.isNaN(a)&&Number.isNaN(u)?(a=0,u=0):Number.isNaN(a)?a=u:Number.isNaN(u)&&(u=a);let c=a-u,h=2*Math.sqrt(i*o)*Math.sin(c/2*(Math.PI/180));return Math.sqrt(l**2+f**2+h**2)}var Es=3424/4096,Ms=2413/128,zs=2392/128,ua=2610/16384,Nc=2523/32,Sc=16384/2610,la=32/2523,Pc=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],$c=[[2048/4096,2048/4096,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],Cc=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],Ac=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]],bn=new g({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:Kn,fromBase(e){let r=R(Pc,e);return jc(r)},toBase(e){let r=Bc(e);return R(Ac,r)}});function jc(e){let r=e.map(function(n){let i=Es+Ms*(n/1e4)**ua,a=1+zs*(n/1e4)**ua;return(i/a)**Nc});return R($c,r)}function Bc(e){return R(Cc,e).map(function(i){let a=Math.max(i**la-Es,0),s=Ms-zs*i**la;return 1e4*(a/s)**Sc})}function Oc(e,r){[e,r]=$([e,r]);let[n,i,a]=bn.from(e),[s,o,u]=bn.from(r);return 720*Math.sqrt((n-s)**2+.25*(i-o)**2+(a-u)**2)}var Ic=K.D65,Ns=.42,fa=1/Ns,sn=2*Math.PI,Ss=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],Rc=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],_c=[[460,451,288],[460,-891,-261],[460,-220,-6300]],Tc={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},He={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},kc=180/Math.PI,ca=Math.PI/180;function Ps(e,r){return e.map(i=>{const a=me(r*Math.abs(i)*.01,Ns);return 400*jr(a,i)/(a+27.13)})}function Lc(e,r){const n=100/r*27.13**fa;return e.map(i=>{const a=Math.abs(i);return jr(n*me(a/(400-a),fa),i)})}function Vc(e){let r=we(e);r<=He.h[0]&&(r+=360);const n=vs(He.h,r)-1,[i,a]=He.h.slice(n,n+2),[s,o]=He.e.slice(n,n+2),u=He.H[n],l=(r-i)/s;return u+100*l/(l+(a-r)/o)}function Fc(e){let r=(e%400+400)%400;const n=Math.floor(.01*r);r=r%100;const[i,a]=He.h.slice(n,n+2),[s,o]=He.e.slice(n,n+2);return we((r*(o*i-s*a)-100*i*o)/(r*(o-s)-100*o))}function $s(e,r,n,i,a){const s={};s.discounting=a,s.refWhite=e,s.surround=i;const o=e.map(v=>v*100);s.la=r,s.yb=n;const u=o[1],l=R(Ss,o);i=Tc[s.surround];const f=i[0];s.c=i[1],s.nc=i[2];const h=(1/(5*s.la+1))**4;s.fl=h*s.la+.1*(1-h)*(1-h)*Math.cbrt(5*s.la),s.flRoot=s.fl**.25,s.n=s.yb/u,s.z=1.48+Math.sqrt(s.n),s.nbb=.725*s.n**-.2,s.ncb=s.nbb;const d=a?1:Math.max(Math.min(f*(1-1/3.6*Math.exp((-s.la-42)/92)),1),0);s.dRgb=l.map(v=>Tt(1,u/v,d)),s.dRgbInv=s.dRgb.map(v=>1/v);const y=l.map((v,w)=>v*s.dRgb[w]),m=Ps(y,s.fl);return s.aW=s.nbb*(2*m[0]+m[1]+.05*m[2]),s}var ha=$s(Ic,64/Math.PI*.2,20,"average",!1);function En(e,r){if(!(e.J!==void 0^e.Q!==void 0))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(e.C!==void 0^e.M!==void 0^e.s!==void 0))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(e.h!==void 0^e.H!==void 0))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(e.J===0||e.Q===0)return[0,0,0];let n=0;e.h!==void 0?n=we(e.h)*ca:n=Fc(e.H)*ca;const i=Math.cos(n),a=Math.sin(n);let s=0;e.J!==void 0?s=me(e.J,1/2)*.1:e.Q!==void 0&&(s=.25*r.c*e.Q/((r.aW+4)*r.flRoot));let o=0;e.C!==void 0?o=e.C/s:e.M!==void 0?o=e.M/r.flRoot/s:e.s!==void 0&&(o=4e-4*e.s**2*(r.aW+4)/r.c);const u=me(o*Math.pow(1.64-Math.pow(.29,r.n),-.73),10/9),l=.25*(Math.cos(n+2)+3.8),f=r.aW*me(s,2/r.c/r.z),c=5e4/13*r.nc*r.ncb*l,h=f/r.nbb,d=23*(h+.305)*Gn(u,23*c+u*(11*i+108*a)),y=d*i,m=d*a,v=Lc(R(_c,[h,y,m]).map(w=>w*1/1403),r.fl);return R(Rc,v.map((w,E)=>w*r.dRgbInv[E])).map(w=>w/100)}function Cs(e,r){const n=e.map(P=>P*100),i=Ps(R(Ss,n).map((P,B)=>P*r.dRgb[B]),r.fl),a=i[0]+(-12*i[1]+i[2])/11,s=(i[0]+i[1]-2*i[2])/9,o=(Math.atan2(s,a)%sn+sn)%sn,u=.25*(Math.cos(o+2)+3.8),l=5e4/13*r.nc*r.ncb*Gn(u*Math.sqrt(a**2+s**2),i[0]+i[1]+1.05*i[2]+.305),f=me(l,.9)*Math.pow(1.64-Math.pow(.29,r.n),.73),c=r.nbb*(2*i[0]+i[1]+.05*i[2]),h=me(c/r.aW,.5*r.c*r.z),d=100*me(h,2),y=4/r.c*h*(r.aW+4)*r.flRoot,m=f*h,v=m*r.flRoot,w=we(o*kc),E=Vc(w),z=50*me(r.c*f/(r.aW+4),1/2);return{J:d,C:m,h:w,s:z,Q:y,M:v,H:E}}var qc=new g({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:G,fromBase(e){const r=Cs(e,ha);return[r.J,r.M,r.h]},toBase(e){return En({J:e[0],M:e[1],h:e[2]},ha)}}),Dc=K.D65,Gc=216/24389,As=24389/27;function Jc(e){const r=e>Gc?Math.cbrt(e):(As*e+16)/116;return 116*r-16}function Mn(e){return e>8?Math.pow((e+16)/116,3):e/As}function Hc(e,r){let[n,i,a]=e,s=[],o=0;if(a===0)return[0,0,0];let u=Mn(a);a>0?o=.00379058511492914*a**2+.608983189401032*a+.9155088574762233:o=9514440756550361e-21*a**2+.08693057439788597*a-21.928975842194614;const l=2e-12,f=15;let c=0,h=1/0;for(;c<=f;){s=En({J:o,C:i,h:n},r);const d=Math.abs(s[1]-u);if(d<h){if(d<=l)return s;h=d}o=o-(s[1]-u)*o/(2*s[1]),c+=1}return En({J:o,C:i,h:n},r)}function Kc(e,r){const n=Jc(e[1]);if(n===0)return[0,0,0];const i=Cs(e,Yn);return[we(i.h),i.C,n]}var Yn=$s(Dc,200/Math.PI*Mn(50),Mn(50)*100,"average",!1),Lt=new g({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:G,fromBase(e){return Kc(e)},toBase(e){return Hc(e,Yn)},formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),Yc=Math.PI/180,da=[1,.007,.0228];function ya(e){e[1]<0&&(e=Lt.fromBase(Lt.toBase(e)));const r=Math.log(Math.max(1+da[2]*e[1]*Yn.flRoot,1))/da[2],n=e[0]*Yc,i=r*Math.cos(n),a=r*Math.sin(n);return[e[2],i,a]}function Zc(e,r){[e,r]=$([e,r]);let[n,i,a]=ya(Lt.from(e)),[s,o,u]=ya(Lt.from(r));return Math.sqrt((n-s)**2+(i-o)**2+(a-u)**2)}var mt={deltaE76:mc,deltaECMC:vc,deltaE2000:xs,deltaEJz:zc,deltaEITP:Oc,deltaEOK:xn,deltaEHCT:Zc};function Xc(e){const r=e?Math.floor(Math.log10(Math.abs(e))):0;return Math.max(parseFloat(`1e${r-2}`),1e-6)}var ma={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function Ve(e,{method:r=re.gamut_mapping,space:n=void 0,deltaEMethod:i="",jnd:a=2,blackWhiteClamp:s={}}={}){if(e=$(e),Jt(arguments[1])?n=arguments[1]:n||(n=e.space),n=g.get(n),Ye(e,n,{epsilon:0}))return e;let o;if(r==="css")o=Wc(e,{space:n});else{if(r!=="clip"&&!Ye(e,n)){Object.prototype.hasOwnProperty.call(ma,r)&&({method:r,jnd:a,deltaEMethod:i,blackWhiteClamp:s}=ma[r]);let u=xs;if(i!==""){for(let f in mt)if("deltae"+i.toLowerCase()===f.toLowerCase()){u=mt[f];break}}let l=Ve(O(e,n),{method:"clip",space:n});if(u(e,l)>a){if(Object.keys(s).length===3){let z=g.resolveCoord(s.channel),P=ee(O(e,z.space),z.id);if(ke(P)&&(P=0),P>=s.max)return O({space:"xyz-d65",coords:K.D65},e.space);if(P<=s.min)return O({space:"xyz-d65",coords:[0,0,0]},e.space)}let f=g.resolveCoord(r),c=f.space,h=f.id,d=O(e,c);d.coords.forEach((z,P)=>{ke(z)&&(d.coords[P]=0)});let m=(f.range||f.refRange)[0],v=Xc(a),w=m,E=ee(d,h);for(;E-w>v;){let z=yt(d);z=Ve(z,{space:n,method:"clip"}),u(d,z)-a<v?w=ee(d,h):E=ee(d,h),$e(d,h,(w+E)/2)}o=O(d,n)}else o=l}else o=O(e,n);if(r==="clip"||!Ye(o,n,{epsilon:0})){let u=Object.values(n.coords).map(l=>l.range||[]);o.coords=o.coords.map((l,f)=>{let[c,h]=u[f];return c!==void 0&&(l=Math.max(c,l)),h!==void 0&&(l=Math.min(l,h)),l})}}return n!==e.space&&(o=O(o,e.space)),e.coords=o.coords,e}Ve.returns="color";var pa={WHITE:{space:dt,coords:[1,0,0]},BLACK:{space:dt,coords:[0,0,0]}};function Wc(e,{space:r}={}){e=$(e),r||(r=e.space),r=g.get(r);const a=g.get("oklch");if(r.isUnbounded)return O(e,r);const s=O(e,a);let o=s.coords[0];if(o>=1){const m=O(pa.WHITE,r);return m.alpha=e.alpha,O(m,r)}if(o<=0){const m=O(pa.BLACK,r);return m.alpha=e.alpha,O(m,r)}if(Ye(s,r,{epsilon:0}))return O(s,r);function u(m){const v=O(m,r),w=Object.values(r.coords);return v.coords=v.coords.map((E,z)=>{if("range"in w[z]){const[P,B]=w[z].range;return ps(P,E,B)}return E}),v}let l=0,f=s.coords[1],c=!0,h=yt(s),d=u(h),y=xn(d,h);if(y<.02)return d;for(;f-l>1e-4;){const m=(l+f)/2;if(h.coords[1]=m,c&&Ye(h,r,{epsilon:0}))l=m;else if(d=u(h),y=xn(d,h),y<.02){if(.02-y<1e-4)break;c=!1,l=m}else f=m}return d}function O(e,r,{inGamut:n}={}){e=$(e),r=g.get(r);let i=r.from(e),a={space:r,coords:i,alpha:e.alpha};return n&&(a=Ve(a,n===!0?void 0:n)),a}O.returns="color";function It(e,{precision:r=re.precision,format:n="default",inGamut:i=!0,...a}={}){let s;e=$(e);let o=n;n=e.space.getFormat(n)??e.space.getFormat("default")??g.DEFAULT_FORMAT;let u=e.coords.slice();if(i||=n.toGamut,i&&!Ye(e)&&(u=Ve(yt(e),i===!0?void 0:i).coords),n.type==="custom")if(a.precision=r,n.serialize)s=n.serialize(u,e.alpha,a);else throw new TypeError(`format ${o} can only be used to parse colors, not for serialization`);else{let l=n.name||"color";n.serializeCoords?u=n.serializeCoords(u,r):r!==null&&(u=u.map(d=>gr(d,{precision:r})));let f=[...u];if(l==="color"){let d=n.id||n.ids?.[0]||e.space.id;f.unshift(d)}let c=e.alpha;r!==null&&(c=gr(c,{precision:r}));let h=e.alpha>=1||n.noAlpha?"":`${n.commas?",":" /"} ${c}`;s=`${l}(${f.join(n.commas?", ":" ")}${h})`}return s}var Uc=[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],Qc=[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]],Br=new Q({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:Uc,fromXYZ_M:Qc}),lr=1.09929682680944,va=.018053968510807,js=new Q({id:"rec2020",name:"REC.2020",base:Br,toBase(e){return e.map(function(r){return r<va*4.5?r/4.5:Math.pow((r+lr-1)/lr,1/.45)})},fromBase(e){return e.map(function(r){return r>=va?lr*Math.pow(r,.45)-(lr-1):4.5*r})}}),e0=[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],t0=[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]],Bs=new Q({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:e0,fromXYZ_M:t0}),r0=[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],D=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]],Os=new Q({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:r0,fromXYZ_M:D}),ga={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[153/255,50/255,204/255],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,153/255],lightslategrey:[119/255,136/255,153/255],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[102/255,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,204/255],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[102/255,51/255,153/255],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]},xa=Array(3).fill("<percentage> | <number>[0, 255]"),wa=Array(3).fill("<number>[0, 255]"),pt=new Q({id:"srgb",name:"sRGB",base:Os,fromBase:e=>e.map(r=>{let n=r<0?-1:1,i=r*n;return i>.0031308?n*(1.055*i**(1/2.4)-.055):12.92*r}),toBase:e=>e.map(r=>{let n=r<0?-1:1,i=r*n;return i<=.04045?r/12.92:n*((i+.055)/1.055)**2.4}),formats:{rgb:{coords:xa},rgb_number:{name:"rgb",commas:!0,coords:wa,noAlpha:!0},color:{},rgba:{coords:xa,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:wa},hex:{type:"custom",toGamut:!0,test:e=>/^#([a-f0-9]{3,4}){1,2}$/i.test(e),parse(e){e.length<=5&&(e=e.replace(/[a-f0-9]/gi,"$&$&"));let r=[];return e.replace(/[a-f0-9]{2}/gi,n=>{r.push(parseInt(n,16)/255)}),{spaceId:"srgb",coords:r.slice(0,3),alpha:r.slice(3)[0]}},serialize:(e,r,{collapse:n=!0}={})=>{r<1&&e.push(r),e=e.map(s=>Math.round(s*255));let i=n&&e.every(s=>s%17===0),a=e.map(s=>i?(s/17).toString(16):s.toString(16).padStart(2,"0")).join("");return"#"+a}},keyword:{type:"custom",test:e=>/^[a-z]+$/i.test(e),parse(e){e=e.toLowerCase();let r={spaceId:"srgb",coords:null,alpha:1};if(e==="transparent"?(r.coords=ga.black,r.alpha=0):r.coords=ga[e],r.coords)return r}}}}),Is=new Q({id:"p3",cssId:"display-p3",name:"P3",base:Bs,fromBase:pt.fromBase,toBase:pt.toBase});re.display_space=pt;var n0;if(typeof CSS<"u"&&CSS.supports)for(let e of[te,js,Is]){let r=e.getMinCoords(),i=It({space:e,coords:r,alpha:1});if(CSS.supports("color",i)){re.display_space=e;break}}function i0(e,{space:r=re.display_space,...n}={}){let i=It(e,n);if(typeof CSS>"u"||CSS.supports("color",i)||!re.display_space)i=new String(i),i.color=e;else{let a=e;if((e.coords.some(ke)||ke(e.alpha))&&!(n0??=CSS.supports("color","hsl(none 50% 50%)"))&&(a=yt(e),a.coords=a.coords.map(F),a.alpha=F(a.alpha),i=It(a,n),CSS.supports("color",i)))return i=new String(i),i.color=a,i;a=O(a,r),i=new String(It(a,n)),i.color=a}return i}function a0(e,r){return e=$(e),r=$(r),e.space===r.space&&e.alpha===r.alpha&&e.coords.every((n,i)=>n===r.coords[i])}function Fe(e){return ee(e,[G,"y"])}function Rs(e,r){$e(e,[G,"y"],r)}function s0(e){Object.defineProperty(e.prototype,"luminance",{get(){return Fe(this)},set(r){Rs(this,r)}})}var o0=Object.freeze({__proto__:null,getLuminance:Fe,register:s0,setLuminance:Rs});function u0(e,r){e=$(e),r=$(r);let n=Math.max(Fe(e),0),i=Math.max(Fe(r),0);return i>n&&([n,i]=[i,n]),(n+.05)/(i+.05)}var l0=.56,f0=.57,c0=.62,h0=.65,ba=.022,d0=1.414,y0=.1,m0=5e-4,p0=1.14,Ea=.027,v0=1.14;function Ma(e){return e>=ba?e:e+(ba-e)**d0}function rt(e){let r=e<0?-1:1,n=Math.abs(e);return r*Math.pow(n,2.4)}function g0(e,r){r=$(r),e=$(e);let n,i,a,s,o,u;r=O(r,"srgb"),[s,o,u]=r.coords;let l=rt(s)*.2126729+rt(o)*.7151522+rt(u)*.072175;e=O(e,"srgb"),[s,o,u]=e.coords;let f=rt(s)*.2126729+rt(o)*.7151522+rt(u)*.072175,c=Ma(l),h=Ma(f),d=h>c;return Math.abs(h-c)<m0?i=0:d?(n=h**l0-c**f0,i=n*p0):(n=h**h0-c**c0,i=n*v0),Math.abs(i)<y0?a=0:i>0?a=i-Ea:a=i+Ea,a*100}function x0(e,r){e=$(e),r=$(r);let n=Math.max(Fe(e),0),i=Math.max(Fe(r),0);i>n&&([n,i]=[i,n]);let a=n+i;return a===0?0:(n-i)/a}var w0=5e4;function b0(e,r){e=$(e),r=$(r);let n=Math.max(Fe(e),0),i=Math.max(Fe(r),0);return i>n&&([n,i]=[i,n]),i===0?w0:(n-i)/i}function E0(e,r){e=$(e),r=$(r);let n=ee(e,[te,"l"]),i=ee(r,[te,"l"]);return Math.abs(n-i)}var M0=216/24389,za=24/116,fr=24389/27,on=K.D65,zn=new g({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:on,base:G,fromBase(e){let n=e.map((i,a)=>i/on[a]).map(i=>i>M0?Math.cbrt(i):(fr*i+16)/116);return[116*n[1]-16,500*(n[0]-n[1]),200*(n[1]-n[2])]},toBase(e){let r=[];return r[1]=(e[0]+16)/116,r[0]=e[1]/500+r[1],r[2]=r[1]-e[2]/200,[r[0]>za?Math.pow(r[0],3):(116*r[0]-16)/fr,e[0]>8?Math.pow((e[0]+16)/116,3):e[0]/fr,r[2]>za?Math.pow(r[2],3):(116*r[2]-16)/fr].map((i,a)=>i*on[a])},formats:{"lab-d65":{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),un=Math.pow(5,.5)*.5+.5;function z0(e,r){e=$(e),r=$(r);let n=ee(e,[zn,"l"]),i=ee(r,[zn,"l"]),a=Math.abs(Math.pow(n,un)-Math.pow(i,un)),s=Math.pow(a,1/un)*Math.SQRT2-40;return s<7.5?0:s}var pr=Object.freeze({__proto__:null,contrastAPCA:g0,contrastDeltaPhi:z0,contrastLstar:E0,contrastMichelson:x0,contrastWCAG21:u0,contrastWeber:b0});function N0(e,r,n={}){Jt(n)&&(n={algorithm:n});let{algorithm:i,...a}=n;if(!i){let s=Object.keys(pr).map(o=>o.replace(/^contrast/,"")).join(", ");throw new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${s}`)}e=$(e),r=$(r);for(let s in pr)if("contrast"+i.toLowerCase()===s.toLowerCase())return pr[s](e,r,a);throw new TypeError(`Unknown contrast algorithm: ${i}`)}function Or(e){let[r,n,i]=Ht(e,G),a=r+15*n+3*i;return[4*r/a,9*n/a]}function _s(e){let[r,n,i]=Ht(e,G),a=r+n+i;return[r/a,n/a]}function S0(e){Object.defineProperty(e.prototype,"uv",{get(){return Or(this)}}),Object.defineProperty(e.prototype,"xy",{get(){return _s(this)}})}var P0=Object.freeze({__proto__:null,register:S0,uv:Or,xy:_s});function Bt(e,r,n={}){Jt(n)&&(n={method:n});let{method:i=re.deltaE,...a}=n;for(let s in mt)if("deltae"+i.toLowerCase()===s.toLowerCase())return mt[s](e,r,a);throw new TypeError(`Unknown deltaE method: ${i}`)}function $0(e,r=.25){let i=[g.get("oklch","lch"),"l"];return $e(e,i,a=>a*(1+r))}function C0(e,r=.25){let i=[g.get("oklch","lch"),"l"];return $e(e,i,a=>a*(1-r))}var A0=Object.freeze({__proto__:null,darken:C0,lighten:$0});function Ts(e,r,n=.5,i={}){return[e,r]=[$(e),$(r)],Re(n)==="object"&&([n,i]=[.5,n]),Kt(e,r,i)(n)}function ks(e,r,n={}){let i;Zn(e)&&([i,n]=[e,r],[e,r]=i.rangeArgs.colors);let{maxDeltaE:a,deltaEMethod:s,steps:o=2,maxSteps:u=1e3,...l}=n;i||([e,r]=[$(e),$(r)],i=Kt(e,r,l));let f=Bt(e,r),c=a>0?Math.max(o,Math.ceil(f/a)+1):o,h=[];if(u!==void 0&&(c=Math.min(c,u)),c===1)h=[{p:.5,color:i(.5)}];else{let d=1/(c-1);h=Array.from({length:c},(y,m)=>{let v=m*d;return{p:v,color:i(v)}})}if(a>0){let d=h.reduce((y,m,v)=>{if(v===0)return 0;let w=Bt(m.color,h[v-1].color,s);return Math.max(y,w)},0);for(;d>a;){d=0;for(let y=1;y<h.length&&h.length<u;y++){let m=h[y-1],v=h[y],w=(v.p+m.p)/2,E=i(w);d=Math.max(d,Bt(E,m.color),Bt(E,v.color)),h.splice(y,0,{p:w,color:i(w)}),y++}}}return h=h.map(d=>d.color),h}function Kt(e,r,n={}){if(Zn(e)){let[l,f]=[e,r];return Kt(...l.rangeArgs.colors,{...l.rangeArgs.options,...f})}let{space:i,outputSpace:a,progression:s,premultiplied:o}=n;e=$(e),r=$(r),e=yt(e),r=yt(r);let u={colors:[e,r],options:n};if(i?i=g.get(i):i=g.registry[re.interpolationSpace]||e.space,a=a?g.get(a):i,e=O(e,i),r=O(r,i),e=Ve(e),r=Ve(r),i.coords.h&&i.coords.h.type==="angle"){let l=n.hue=n.hue||"shorter",f=[i,"h"],[c,h]=[ee(e,f),ee(r,f)];isNaN(c)&&!isNaN(h)?c=h:isNaN(h)&&!isNaN(c)&&(h=c),[c,h]=lc(l,[c,h]),$e(e,f,c),$e(r,f,h)}return o&&(e.coords=e.coords.map(l=>l*e.alpha),r.coords=r.coords.map(l=>l*r.alpha)),Object.assign(l=>{l=s?s(l):l;let f=e.coords.map((d,y)=>{let m=r.coords[y];return Tt(d,m,l)}),c=Tt(e.alpha,r.alpha,l),h={space:i,coords:f,alpha:c};return o&&(h.coords=h.coords.map(d=>d/c)),a!==i&&(h=O(h,a)),h},{rangeArgs:u})}function Zn(e){return Re(e)==="function"&&!!e.rangeArgs}re.interpolationSpace="lab";function j0(e){e.defineFunction("mix",Ts,{returns:"color"}),e.defineFunction("range",Kt,{returns:"function<color>"}),e.defineFunction("steps",ks,{returns:"array<color>"})}var B0=Object.freeze({__proto__:null,isRange:Zn,mix:Ts,range:Kt,register:j0,steps:ks}),Ls=new g({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:pt,fromBase:e=>{let r=Math.max(...e),n=Math.min(...e),[i,a,s]=e,[o,u,l]=[NaN,0,(n+r)/2],f=r-n;if(f!==0){switch(u=l===0||l===1?0:(r-l)/Math.min(l,1-l),r){case i:o=(a-s)/f+(a<s?6:0);break;case a:o=(s-i)/f+2;break;case s:o=(i-a)/f+4}o=o*60}return u<0&&(o+=180,u=Math.abs(u)),o>=360&&(o-=360),[o,u*100,l*100]},toBase:e=>{let[r,n,i]=e;r=r%360,r<0&&(r+=360),n/=100,i/=100;function a(s){let o=(s+r/30)%12,u=n*Math.min(i,1-i);return i-u*Math.max(-1,Math.min(o-3,9-o,1))}return[a(0),a(8),a(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),Vs=new g({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:Ls,fromBase(e){let[r,n,i]=e;n/=100,i/=100;let a=i+n*Math.min(i,1-i);return[r,a===0?0:200*(1-i/a),100*a]},toBase(e){let[r,n,i]=e;n/=100,i/=100;let a=i*(1-n/2);return[r,a===0||a===1?0:(i-a)/Math.min(a,1-a)*100,a*100]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),O0=new g({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:Vs,fromBase(e){let[r,n,i]=e;return[r,i*(100-n)/100,100-i]},toBase(e){let[r,n,i]=e;n/=100,i/=100;let a=n+i;if(a>=1){let u=n/a;return[r,0,u*100]}let s=1-i,o=s===0?0:1-n/s;return[r,o*100,s*100]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),I0=[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],R0=[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]],Fs=new Q({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe\xAE 98 RGB compatible",white:"D65",toXYZ_M:I0,fromXYZ_M:R0}),_0=new Q({id:"a98rgb",cssId:"a98-rgb",name:"Adobe\xAE 98 RGB compatible",base:Fs,toBase:e=>e.map(r=>Math.pow(Math.abs(r),563/256)*Math.sign(r)),fromBase:e=>e.map(r=>Math.pow(Math.abs(r),256/563)*Math.sign(r))}),T0=[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],k0=[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]],qs=new Q({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:Hn,toXYZ_M:T0,fromXYZ_M:k0}),L0=1/512,V0=16/512,F0=new Q({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:qs,toBase(e){return e.map(r=>r<V0?r/16:r**1.8)},fromBase(e){return e.map(r=>r>=L0?r**(1/1.8):16*r)}}),q0=new g({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:dt,fromBase(e){let[r,n,i]=e,a;const s=2e-4;return Math.abs(n)<s&&Math.abs(i)<s?a=NaN:a=Math.atan2(i,n)*180/Math.PI,[r,Math.sqrt(n**2+i**2),we(a)]},toBase(e){let[r,n,i]=e,a,s;return isNaN(i)?(a=0,s=0):(a=n*Math.cos(i*Math.PI/180),s=n*Math.sin(i*Math.PI/180)),[r,a,s]},formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>[0,1]","<number> | <angle>"]}}}),Ds=K.D65,D0=216/24389,Na=24389/27,[Sa,Pa]=Or({space:G,coords:Ds}),Gs=new g({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:Ds,base:G,fromBase(e){let r=[F(e[0]),F(e[1]),F(e[2])],n=r[1],[i,a]=Or({space:G,coords:r});if(!Number.isFinite(i)||!Number.isFinite(a))return[0,0,0];let s=n<=D0?Na*n:116*Math.cbrt(n)-16;return[s,13*s*(i-Sa),13*s*(a-Pa)]},toBase(e){let[r,n,i]=e;if(r===0||ke(r))return[0,0,0];n=F(n),i=F(i);let a=n/(13*r)+Sa,s=i/(13*r)+Pa,o=r<=8?r/Na:Math.pow((r+16)/116,3);return[o*(9*a/(4*s)),o,o*((12-3*a-20*s)/(4*s))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),Xn=new g({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Gs,fromBase(e){let[r,n,i]=e,a;const s=.02;return Math.abs(n)<s&&Math.abs(i)<s?a=NaN:a=Math.atan2(i,n)*180/Math.PI,[r,Math.sqrt(n**2+i**2),we(a)]},toBase(e){let[r,n,i]=e;return n<0&&(n=0),isNaN(i)&&(i=0),[r,n*Math.cos(i*Math.PI/180),n*Math.sin(i*Math.PI/180)]},formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}}),G0=216/24389,J0=24389/27,$a=D[0][0],Ca=D[0][1],ln=D[0][2],Aa=D[1][0],ja=D[1][1],fn=D[1][2],Ba=D[2][0],Oa=D[2][1],cn=D[2][2];function nt(e,r,n){const i=r/(Math.sin(n)-e*Math.cos(n));return i<0?1/0:i}function br(e){const r=Math.pow(e+16,3)/1560896,n=r>G0?r:e/J0,i=n*(284517*$a-94839*ln),a=n*(838422*ln+769860*Ca+731718*$a),s=n*(632260*ln-126452*Ca),o=n*(284517*Aa-94839*fn),u=n*(838422*fn+769860*ja+731718*Aa),l=n*(632260*fn-126452*ja),f=n*(284517*Ba-94839*cn),c=n*(838422*cn+769860*Oa+731718*Ba),h=n*(632260*cn-126452*Oa);return{r0s:i/s,r0i:a*e/s,r1s:i/(s+126452),r1i:(a-769860)*e/(s+126452),g0s:o/l,g0i:u*e/l,g1s:o/(l+126452),g1i:(u-769860)*e/(l+126452),b0s:f/h,b0i:c*e/h,b1s:f/(h+126452),b1i:(c-769860)*e/(h+126452)}}function Ia(e,r){const n=r/360*Math.PI*2,i=nt(e.r0s,e.r0i,n),a=nt(e.r1s,e.r1i,n),s=nt(e.g0s,e.g0i,n),o=nt(e.g1s,e.g1i,n),u=nt(e.b0s,e.b0i,n),l=nt(e.b1s,e.b1i,n);return Math.min(i,a,s,o,u,l)}var H0=new g({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Xn,gamutSpace:pt,fromBase(e){let[r,n,i]=[F(e[0]),F(e[1]),F(e[2])],a;if(r>99.9999999)a=0,r=100;else if(r<1e-8)a=0,r=0;else{let s=br(r),o=Ia(s,i);a=n/o*100}return[i,a,r]},toBase(e){let[r,n,i]=[F(e[0]),F(e[1]),F(e[2])],a;if(i>99.9999999)i=100,a=0;else if(i<1e-8)i=0,a=0;else{let s=br(i);a=Ia(s,r)/100*n}return[i,a,r]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});D[0][0];D[0][1];D[0][2];D[1][0];D[1][1];D[1][2];D[2][0];D[2][1];D[2][2];function it(e,r){return Math.abs(r)/Math.sqrt(Math.pow(e,2)+1)}function Ra(e){let r=it(e.r0s,e.r0i),n=it(e.r1s,e.r1i),i=it(e.g0s,e.g0i),a=it(e.g1s,e.g1i),s=it(e.b0s,e.b0i),o=it(e.b1s,e.b1i);return Math.min(r,n,i,a,s,o)}var K0=new g({id:"hpluv",name:"HPLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:Xn,gamutSpace:"self",fromBase(e){let[r,n,i]=[F(e[0]),F(e[1]),F(e[2])],a;if(r>99.9999999)a=0,r=100;else if(r<1e-8)a=0,r=0;else{let s=br(r),o=Ra(s);a=n/o*100}return[i,a,r]},toBase(e){let[r,n,i]=[F(e[0]),F(e[1]),F(e[2])],a;if(i>99.9999999)i=100,a=0;else if(i<1e-8)i=0,a=0;else{let s=br(i);a=Ra(s)/100*n}return[i,a,r]},formats:{color:{id:"--hpluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),_a=203,Ta=2610/2**14,Y0=2**14/2610,Z0=2523/2**5,ka=2**5/2523,La=3424/2**12,Va=2413/2**7,Fa=2392/2**7,X0=new Q({id:"rec2100pq",cssId:"rec2100-pq",name:"REC.2100-PQ",base:Br,toBase(e){return e.map(function(r){return(Math.max(r**ka-La,0)/(Va-Fa*r**ka))**Y0*1e4/_a})},fromBase(e){return e.map(function(r){let n=Math.max(r*_a/1e4,0),i=La+Va*n**Ta,a=1+Fa*n**Ta;return(i/a)**Z0})}}),qa=.17883277,Da=.28466892,Ga=.55991073,hn=3.7743,W0=new Q({id:"rec2100hlg",cssId:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:Br,toBase(e){return e.map(function(r){return r<=.5?r**2/3*hn:(Math.exp((r-Ga)/qa)+Da)/12*hn})},fromBase(e){return e.map(function(r){return r/=hn,r<=1/12?Math.sqrt(3*r):qa*Math.log(12*r-Da)+Ga})}}),Js={};Le.add("chromatic-adaptation-start",e=>{e.options.method&&(e.M=Hs(e.W1,e.W2,e.options.method))});Le.add("chromatic-adaptation-end",e=>{e.M||(e.M=Hs(e.W1,e.W2,e.options.method))});function Ir({id:e,toCone_M:r,fromCone_M:n}){Js[e]=arguments[0]}function Hs(e,r,n="Bradford"){let i=Js[n],[a,s,o]=R(i.toCone_M,e),[u,l,f]=R(i.toCone_M,r),c=[[u/a,0,0],[0,l/s,0],[0,0,f/o]],h=R(c,i.toCone_M);return R(i.fromCone_M,h)}Ir({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599363874558397,-1.1293816185800916,.21989740959619328],[.3611914362417676,.6388124632850422,-6370596838649899e-21],[0,0,1.0890636230968613]]});Ir({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929054667121,-.14705425642099013,.15996265166373122],[.4323052697233945,.5183602715367774,.049291228212855594],[-.00852866457517732,.04004282165408486,.96848669578755]]});Ir({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238208355142,-.27886900021828726,.18274517938277307],[.4543690419753592,.4735331543074117,.07209780371722911],[-.009627608738429355,-.00569803121611342,1.0153256399545427]]});Ir({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.0112546305316845,.14918677544445172],[.3875265432361372,.6214474419314753,-.008973985167612521],[-.01584149884933386,-.03412293802851557,1.0499644368778496]]});Object.assign(K,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]});K.ACES=[.32168/.33767,1,(1-.32168-.33767)/.33767];var U0=[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],Q0=[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]],Ks=new Q({id:"acescg",cssId:"--acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:K.ACES,toXYZ_M:U0,fromXYZ_M:Q0}),cr=2**-16,dn=-.35828683,hr=(Math.log2(65504)+9.72)/17.52,eh=new Q({id:"acescc",cssId:"--acescc",name:"ACEScc",coords:{r:{range:[dn,hr],name:"Red"},g:{range:[dn,hr],name:"Green"},b:{range:[dn,hr],name:"Blue"}},referred:"scene",base:Ks,toBase(e){const r=-.3013698630136986;return e.map(function(n){return n<=r?(2**(n*17.52-9.72)-cr)*2:n<hr?2**(n*17.52-9.72):65504})},fromBase(e){return e.map(function(r){return r<=0?(Math.log2(cr)+9.72)/17.52:r<cr?(Math.log2(cr+r*.5)+9.72)/17.52:(Math.log2(r)+9.72)/17.52})}}),Ja=Object.freeze({__proto__:null,A98RGB:_0,A98RGB_Linear:Fs,ACEScc:eh,ACEScg:Ks,CAM16_JMh:qc,HCT:Lt,HPLuv:K0,HSL:Ls,HSLuv:H0,HSV:Vs,HWB:O0,ICTCP:bn,JzCzHz:wn,Jzazbz:bs,LCH:kt,LCHuv:Xn,Lab:te,Lab_D65:zn,Luv:Gs,OKLCH:q0,OKLab:dt,P3:Is,P3_Linear:Bs,ProPhoto:F0,ProPhoto_Linear:qs,REC_2020:js,REC_2020_Linear:Br,REC_2100_HLG:W0,REC_2100_PQ:X0,XYZ_ABS_D65:Kn,XYZ_D50:Hn,XYZ_D65:G,sRGB:pt,sRGB_Linear:Os}),q=class X{constructor(...r){let n;r.length===1&&(n=$(r[0]));let i,a,s;n?(i=n.space||n.spaceId,a=n.coords,s=n.alpha):[i,a,s]=r,Object.defineProperty(this,"space",{value:g.get(i),writable:!1,enumerable:!0,configurable:!0}),this.coords=a?a.slice():[0,0,0],this.alpha=s>1||s===void 0?1:s<0?0:s;for(let o=0;o<this.coords.length;o++)this.coords[o]==="NaN"&&(this.coords[o]=NaN);for(let o in this.space.coords)Object.defineProperty(this,o,{get:()=>this.get(o),set:u=>this.set(o,u)})}get spaceId(){return this.space.id}clone(){return new X(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...r){let n=i0(this,...r);return n.color=new X(n.color),n}static get(r,...n){return r instanceof X?r:new X(r,...n)}static defineFunction(r,n,i=n){let{instance:a=!0,returns:s}=i,o=function(...u){let l=n(...u);if(s==="color")l=X.get(l);else if(s==="function<color>"){let f=l;l=function(...c){let h=f(...c);return X.get(h)},Object.assign(l,f)}else s==="array<color>"&&(l=l.map(f=>X.get(f)));return l};r in X||(X[r]=o),a&&(X.prototype[r]=function(...u){return o(this,...u)})}static defineFunctions(r){for(let n in r)X.defineFunction(n,r[n],r[n])}static extend(r){if(r.register)r.register(X);else for(let n in r)X.defineFunction(n,r[n])}};q.defineFunctions({get:ee,getAll:Ht,set:$e,setAll:Jn,to:O,equals:a0,inGamut:Ye,toGamut:Ve,distance:ws,toString:It});Object.assign(q,{util:nc,hooks:Le,WHITES:K,Space:g,spaces:g.registry,parse:gs,defaults:re});for(let e of Object.keys(Ja))g.register(Ja[e]);for(let e in g.registry)Nn(e,g.registry[e]);Le.add("colorspace-init-end",e=>{Nn(e.id,e),e.aliases?.forEach(r=>{Nn(r,e)})});function Nn(e,r){let n=e.replace(/-/g,"_");Object.defineProperty(q.prototype,n,{get(){let i=this.getAll(e);return typeof Proxy>"u"?i:new Proxy(i,{has:(a,s)=>{try{return g.resolveCoord([r,s]),!0}catch{}return Reflect.has(a,s)},get:(a,s,o)=>{if(s&&typeof s!="symbol"&&!(s in a)){let{index:u}=g.resolveCoord([r,s]);if(u>=0)return a[u]}return Reflect.get(a,s,o)},set:(a,s,o,u)=>{if(s&&typeof s!="symbol"&&!(s in a)||s>=0){let{index:l}=g.resolveCoord([r,s]);if(l>=0)return a[l]=o,this.setAll(e,a),!0}return Reflect.set(a,s,o,u)}})},set(i){this.setAll(e,i)},configurable:!0,enumerable:!0})}q.extend(mt);q.extend({deltaE:Bt});Object.assign(q,{deltaEMethods:mt});q.extend(A0);q.extend({contrast:N0});q.extend(P0);q.extend(o0);q.extend(B0);q.extend(pr);var th=e=>{const r=Ys(e);return"opacity"in r?r:{...r,opacity:1}},Ys=e=>{if(typeof e=="string"&&e==="transparent")return{h:0,s:0,l:0,opacity:0};const r=be(e),n=r.hsl,i={h:n[0]/360,s:n[1]/100,l:n[2]/100};if(r.alpha!==1){if("type"in r.alpha){const a=Number.parseFloat(r.alpha.raw);return{...i,opacity:a}}return{...i,opacity:r.alpha/100}}return i},rh=e=>{if(e.h>1)throw new Error(`Expecting relative hue value 0..1. Got: ${e.h}`);if(e.s>1)throw new Error(`Expecting relative saturation value 0..1. Got: ${e.s}`);if(e.l>1)throw new Error(`Expecting relative lightness value 0..1. Got: ${e.l}`);if(e.opacity&&e.opacity>1)throw new Error(`Expecting relative opacity value 0..1. Got: ${e.opacity}`);const r=[e.h*360,e.s*100,e.l*100];return"opacity"in e?new q("hsl",r,e.opacity):new q("hsl",r)},nh=e=>{const r=[e.r,e.g,e.b];return"opacity"in e?new q("srgb",r,e.opacity):new q("srgb",r)},ih=e=>be(e).display(),ah=(e,r=.5,n=.75,i=1)=>{x(e,"positive","index"),x(r,"percentage","saturation"),x(n,"percentage","lightness"),x(i,"percentage","alpha");const a=e*137.508;return i===1?`hsl(${a},${r*100}%,${n*100}%)`:`hsl(${a},${r*100}%,${n*100}%,${i*100}%)`},sh=(e=qt)=>e()*360,oh=(e,r=1,n=.5,i=1)=>(x(e,"percentage","h"),x(r,"percentage","s"),x(n,"percentage","l"),be({h:e,s:r,l:n,opacity:i})),uh=e=>{const r=be(e),n=r.srgb;return r.alpha<1?{r:n.r,g:n.g,b:n.b,opacity:r.alpha}:{r:n.r,g:n.g,b:n.b}},be=e=>typeof e=="string"?(e.startsWith("--")&&(e=getComputedStyle(document.body).getPropertyValue(e)),new q(e)):ph(e)?new q(rh(e)):vh(e)?new q(nh(e)):e,lh=(...e)=>{for(const r of e){if(r===void 0||r===null)continue;return be(r).display()}return"rebeccapurple"},fh=e=>typeof e=="string"&&e==="transparent"?"#00000000":be(e).to("srgb").toString({format:"hex",collapse:!1}),ch=(e,r)=>{const n=be(e);return n.alpha*=r,n.toString()},hh=(e,r="black",n)=>{n===void 0&&(n=document.body);const i=getComputedStyle(n).getPropertyValue(`--${e}`).trim();return i===void 0||i.length===0?r:i},dh=(e,r={})=>{const n=r.space??"lch",i=r.hue??"shorter",s=Zs(e).map(o=>o[0].range(o[1],{space:n,hue:i}));return o=>{o=ot(o);const u=Gt(o,0,1,0,s.length),l=Math.floor(u),f=u-l;return s[l](f)}},Zs=e=>{if(!Array.isArray(e))throw new Error(`Param 'colours' is not an array as expected. Got: ${typeof e}`);if(e.length<2)throw new Error(`Param 'colours' should be at least two in length. Got: ${e.length}`);const r=e.map(n=>be(n));return[...fs(r)]},yh=(e,r,n={})=>{const i=n.space??"lch",a=n.hue??"shorter",s=Zs(e),o=Math.floor(r/s.length);return s.map(l=>l[0].steps(l[1],{space:i,hue:a,steps:o,outputSpace:"srgb"})).flat()},mh=e=>`linear-gradient(to right, ${e.map(n=>be(n)).map(n=>n.display()).join(", ")})`,ph=e=>!(e==null||typeof e!="object"||e.spaceId!==void 0||e.coords!==void 0||e.h===void 0||e.s===void 0||e.l===void 0),vh=e=>!(e==null||typeof e!="object"||e.r===void 0||e.g===void 0||e.b===void 0),gh=(e,r=0,n=360)=>(Y(e,void 0,"v"),Y(r,void 0,"min"),Y(n,void 0,"max"),e===r||e===n?r:(e>0&&e<r&&(e+=r),e-=r,n-=r,e=e%n,e<0&&(e=n-Math.abs(e)+r),e+r)),Ha=(e,r=0,n=1)=>{if(x(e,"","min"),x(r,"","min"),x(n,"","max"),e===r||e===n)return r;for(;(e<=r||e>=n)&&!(e===n||e===r);)e>n?e=r+(e-n):e<r&&(e=n-(r-e));return e},x2=(e,r,n,i,a)=>{let s=0;const o=Math.abs(a-i),u=Math.abs(r-i+a),l=Math.abs(i+(360-a)),f=Math.min(o,u,l);return f===l?s=i-n(f):f===u?s=i+n(f):i>a?s=i-n(f):s=i+n(f),gh(s,e,r)};function Wn(e,r){if(xh(e)){if(typeof e=="number")return e;let n=e.millis??0;return n+=(e.hours??0)*60*60*1e3,n+=(e.mins??0)*60*1e3,n+=(e.secs??0)*1e3,n}else{if(typeof r<"u")return r;throw new Error(`Not a valid interval: ${e}`)}}function xh(e){if(e===void 0||e===null)return!1;if(typeof e=="number")return!(Number.isNaN(e)||!Number.isFinite(e));if(typeof e!="object")return!1;const r="millis"in e,n="secs"in e,i="mins"in e,a="hours"in e;return r&&!jt(e.millis)[0]||n&&!jt(e.secs)[0]||i&&!jt(e.mins)[0]||a&&!jt(e.hours)[0]?!1:!!(r||n||a||i)}function Sn(e,r){Y(e,"positive","decimalPlaces");let n;if(e===0)n=Math.round;else{const i=Math.pow(10,e);n=a=>Math.floor(a*i)/i}return r===void 0?n:n(r)}var w2=(e,r)=>(x(e,"nonZero","v"),x(r,"nonZero","multiple"),Math.ceil(e/r)*r),wh=(e,r=qt)=>{const n=[];let i=0;for(let a=0;a<e.length;a++)i+=e[a],n[a]=i;if(i!==1)throw new Error(`Weightings should add up to 1. Got: ${i}`);return()=>{const a=r();for(let s=0;s<n.length;s++)if(a<=n[s])return s;throw new Error("Bug: weightedIndex could not select index")}},Xs=(e,r=Math.random)=>Math.floor(r()*e.length),bh=(e,r=!1,n=Math.random)=>{if(e===void 0)throw new Error("array is undefined");if(!Array.isArray(e))throw new Error("'array' param is not an array");if(e.length===0)return{value:void 0,array:[]};const i=Xs(e,n);if(r)return{value:e[i],array:e.splice(i,1)};{const a=[...e];return a.splice(i,1),{value:e[i],array:a}}},Ws=(e,r=Math.random)=>(Pe(e,"array"),e[Math.floor(r()*e.length)]),Eh=(e,r,n=Math.random)=>{if(e.length!==r.length)throw new Error("Lengths of 'array' and 'weightings' should be the same.");const i=wh(r,n);return()=>{const a=i();return e[a]}},Mh=(e,r=Math.random)=>{const n=[...e];for(let i=n.length-1;i>0;i--){const a=Math.floor(r()*(i+1));[n[i],n[a]]=[n[a],n[i]]}return n},Ka=(e,r,n=!0)=>{x(e,"","v"),Y(r,"","every");let i=e/r;const a=i%1;return i=Math.floor(i),(a===.5&&n||a>.5)&&i++,r*i};function*zh(e,r,n,i){x(e,"","start"),x(r,"","end"),x(n,"","steps");const a=i?Sn(i):o=>o,s=(r-e)/(n-1);if(x(s,"","step"),!Number.isFinite(s))throw new TypeError("Calculated step value is infinite");for(let o=0;o<n;o++){const u=e+s*o;yield a(u)}}var Nh=Object.prototype.toString,Us=e=>Nh.call(e),Sh=e=>Us(e)==="[object Map]",Ph=e=>Us(e)==="[object Set]",Ce=e=>typeof e=="string"?e:JSON.stringify(e),Pn=e=>{if(e===null)return"null";if(typeof e=="boolean"||typeof e=="number")return e.toString();if(typeof e=="string")return e;if(typeof e=="symbol")throw new TypeError("Symbol cannot be converted to string");return JSON.stringify(e)},$n=e=>{if(typeof e=="string")return e;const r=new Set;return JSON.stringify(e,(n,i)=>(r.add(n),i)),JSON.stringify(e,[...r].sort())},j=(e,r)=>e===r,Qs=(e,r)=>e===r?!0:Ce(e)===Ce(r),eo=(e,r,n)=>{if(typeof e!="object")throw new Error("Parameter 'a' expected to be object");if(typeof r!="object")throw new Error("Parameter 'b' expected to be object");if(Object.is(e,r))return!0;const i=n??eo;for(const a of Object.entries(r)){const s=e[a[0]],o=a[1];if(typeof s=="object"&&typeof o=="object"){if(!i(s,o))return!1}else if(s!==o)return!1}return!0},Un=(e,r)=>e===r?!0:$n(e)===$n(r),$h={};S($h,{SimpleEventEmitter:()=>Yt,eventRace:()=>jh});var Rr=e=>typeof e=="string"?e:JSON.stringify(e),Ch=(e,r,n=j)=>{for(const i of e.entries()){const a=i[1];for(const s of a)if(n(s,r))return i}},Ah=class{map;groupBy;valueEq;constructor(e=Rr,r=j,n=[]){this.groupBy=e,this.valueEq=r,this.map=new Map(n)}*entriesFlat(){for(const e of this.map.keys())for(const r of this.map.get(e))yield[e,r]}*entries(){for(const[e,r]of this.map.entries())yield[e,[...r]]}firstKeyByValue(e,r=j){const n=Ch(this,e,r);if(n)return n[0]}*get(e){const r=this.map.get(e);!r||(yield*r.values())}*keys(){yield*this.map.keys()}*valuesFlat(){for(const e of this.map)yield*e[1]}*keysAndCounts(){for(const e of this.map)yield[e[0],e[1].length]}has(e){return this.map.has(e)}hasKeyValue(e,r){const n=this.map.get(e);if(!n)return!1;for(const i of n)if(this.valueEq(i,r))return!0;return!1}debugString(){let e="";return[...this.map.keys()].every(n=>{const i=this.map.get(n);i!==void 0&&(e+=n+` (${i.length}) = ${JSON.stringify(i)}\r
`)}),e}get isEmpty(){return this.map.size===0}count(e){const r=this.map.get(e);return r?r.length:0}get lengthKeys(){return this.map.size}},to=class extends Ah{addKeyedValues(e,...r){const n=this.map.get(e);n===void 0?this.map.set(e,r):this.map.set(e,[...n,...r])}addValue(...e){for(const r of e){const n=this.groupBy(r);this.addKeyedValues(n,r)}}deleteKeyValue(e,r){const n=this.map.get(e);if(n===void 0)return!1;const i=n.filter(a=>!this.valueEq(a,r));return this.map.set(e,i),i.length<n.length}deleteByValue(e){let r=!1;const n=[...this.map.entries()];for(const i of n)for(const a of i[1])this.valueEq(a,e)&&(r=!0,this.deleteKeyValue(i[0],e));return r}delete(e){const r=this.map.get(e);return!r||r.length===0?!1:(this.map.delete(e),!0)}clear(){this.map.clear()}},ro=(e=Rr,r=j)=>new to(e,r),jh=(e,r,n={})=>{const i=Wn(n.timeout,6e4),a=n.signal;let s=!1,o=!1,u;return new Promise((f,c)=>{const h=y=>{"type"in y?r.includes(y.type)?(s=!0,f(y),d()):console.warn(`eventRace: Got event '${y.type}' that is not in race list`):(console.warn("eventRace: Event data does not have expected 'type' field"),console.log(y))};for(const y of r)e.addEventListener(y,h);const d=()=>{if(!o){u!==void 0&&clearTimeout(u),u=void 0,o=!0;for(const y of r)e.removeEventListener(y,h)}};u=setTimeout(()=>{s||o||(d(),c(new Error(`eventRace: Events not fired within interval. Events: ${JSON.stringify(r)} Interval: ${i}`)))},i),a?.addEventListener("abort",()=>{s||o||(d(),c(new Error(`Abort signal received ${a.reason}`)))})})},Yt=class{#e=ro();fireEvent(e,r){const n=this.#e.get(e);for(const i of n)i(r,this)}addEventListener(e,r){this.#e.addKeyedValues(e,r)}removeEventListener(e,r){this.#e.deleteKeyValue(e,r)}clearEventListeners(){this.#e.clear()}},no={};S(no,{MassiveSet:()=>Oh,immutable:()=>Bh,mutable:()=>io});var io=e=>new ao(e),ao=class extends Yt{store=new Map;keyString;constructor(e){super();this.keyString=e??Rr}get size(){return this.store.size}add(...e){let r=!1;for(const n of e){const i=this.has(n);this.store.set(this.keyString(n),n),super.fireEvent("add",{value:n,updated:i}),i||(r=!0)}return r}values(){return this.store.values()}clear(){this.store.clear(),super.fireEvent("clear",!0)}delete(e){const r=this.store.delete(this.keyString(e));return r&&super.fireEvent("delete",e),r}has(e){return this.store.has(this.keyString(e))}toArray(){return[...this.store.values()]}},so=class Cn{store;keyString;constructor(r,n){this.store=n??new Map,this.keyString=r??Rr}get size(){return this.store.size}add(...r){const n=new Map(this.store);for(const i of r){const a=this.keyString(i);n.set(a,i)}return new Cn(this.keyString,n)}delete(r){const n=new Map(this.store),i=this.keyString(r);return n.delete(i)?new Cn(this.keyString,n):this}has(r){const n=this.keyString(r);return this.store.has(n)}toArray(){return[...this.store.values()]}*values(){yield*this.store.values()}},Bh=(e=Ce)=>new so(e),Oh=class oo{#e;#t;children=new Map;values=[];constructor(r=1,n=0){this.#e=n,this.#t=r}sizeLocal(){return this.values.length}sizeChildren(){return[...this.children.values()].length}sizeChildrenDeep(){let r=this.sizeChildren();for(const n of this.children.values())r+=n.sizeChildrenDeep();return r}size(){let r=this.values.length;for(const n of this.children.values())r+=n.size();return r}add(r){if(typeof r!="string")throw new Error(`Param 'value' must be a string. Got: ${typeof r}`);if(r.length===0)throw new Error("Param 'value' is empty");const n=this.#n(r,!0);if(n===this){this.hasLocal(r)||this.values.push(r);return}if(!n)throw new Error(`Could not create child set for: ${r}`);n.add(r)}remove(r){if(typeof r!="string")throw new Error(`Param 'value' must be a string. Got: ${typeof r}`);if(r.length===0)throw new Error("Param 'value' is empty");const n=this.#n(r,!1);return n===void 0?!1:n===this?this.hasLocal(r)?(this.values=this.values.filter(i=>i!==r),!0):!1:n.remove(r)}debugDump(){const r=this.#r();for(const n of r)console.log(n)}#r(r=0){const n=[];n.push(`Depth: ${this.#e} Max: ${this.#t}`);for(const[i,a]of this.children.entries()){const s=a.#r(r+1);n.push(` key: ${i}`);for(const o of s)n.push(" ".repeat(r+1)+o)}n.push(`Values: (${this.values.length})`);for(const i of this.values)n.push(` ${i}`);return n.map(i=>" ".repeat(r)+i)}#n(r,n){if(r===void 0)throw new Error("Param 'value' undefined");if(this.#e===this.#t)return this;if(r.length<=this.#e)return this;const i=r[this.#e];if(i===void 0)throw new Error(`Logic error. Depth: ${this.#e} Len: ${r.length}`);let a=this.children.get(i);return a===void 0&&n&&(a=new oo(this.#t,this.#e+1),this.children.set(i,a)),a}hasLocal(r){for(const n of this.values)if(n===r)return!0;return!1}has(r){if(typeof r!="string")return!1;const n=this.#n(r,!1);return n===void 0?!1:n===this?this.hasLocal(r):n.has(r)}},Zt=(e,r)=>[...e].sort((n,i)=>{Pe(e,"data");const a=n[r],s=i[r];return a<s?-1:a>s?1:0}),uo={};S(uo,{arrayTest:()=>lo,defined:()=>_h,ifNaN:()=>Jf,integerParse:()=>Hf,integerTest:()=>Kf,isFunction:()=>Th,isPlainObject:()=>co,isPlainObjectOrPrimitive:()=>kh,isPowerOfTwo:()=>Yf,isStringArray:()=>Rh,nullUndef:()=>fo,numberTest:()=>jt,percentTest:()=>Zf,throwArrayTest:()=>Ih,throwFromResult:()=>ss,throwIntegerTest:()=>Y,throwNullUndef:()=>Vt,throwNumberTest:()=>x,throwPercentTest:()=>os});var lo=(e,r="?")=>Array.isArray(e)?[!0]:[!1,`Parameter '${r}' is expected to be an array'`],Ih=(e,r="?")=>{ss(lo(e,r))},Rh=e=>Array.isArray(e)?!e.some(r=>typeof r!="string"):!1,fo=(e,r="?")=>typeof e>"u"?[!1,`${r} param is undefined`]:e===null?[!1,`${r} param is null`]:[!0],Vt=(e,r="?")=>{const n=fo(e,r);if(!n[0])throw new Error(n[1])},_h=e=>e!==void 0,Th=e=>e instanceof Function,co=e=>{if(typeof e!="object"||e===null)return!1;const r=Object.getPrototypeOf(e);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kh=e=>{const r=typeof e;return r==="symbol"||r==="function"?!1:r==="bigint"||r==="number"||r==="string"||r==="boolean"?!0:co(e)},Lh=(e,r)=>{const n={};for(const i of Object.entries(e)){const a=r(i[0]);n[a]=i[1]}return n},Vh={};S(Vh,{Guards:()=>uo,comparerInverse:()=>Fh,defaultComparer:()=>Qn,defaultToString:()=>Pn,isEqualDefault:()=>j,isEqualTrace:()=>qh,isEqualValueDefault:()=>Qs,isEqualValueIgnoreOrder:()=>Un,isEqualValuePartial:()=>eo,isInteger:()=>Dh,isMap:()=>Sh,isSet:()=>Ph,jsComparer:()=>yo,mapKeys:()=>Lh,numericComparer:()=>ho,runningiOS:()=>Gh,toStringDefault:()=>Ce,toStringOrdered:()=>$n});var ho=(e,r)=>e===r?0:e>r?1:-1,yo=(e,r)=>{if(e===void 0&&r===void 0)return 0;if(e===void 0)return 1;if(r===void 0)return-1;const n=Pn(e),i=Pn(r);return n<i?-1:n>i?1:0},Fh=e=>(r,n)=>e(r,n)*-1,Qn=(e,r)=>typeof e=="number"&&typeof r=="number"?ho(e,r):yo(e,r),qh=e=>(r,n)=>{const i=e(r,n);return console.log(`isEqualTrace eq: ${i} a: ${ht(r)} b: ${ht(n)}`),i},Dh=e=>{if(e===void 0)return!1;if(typeof e=="string"){const r=Number.parseInt(e);return Number.isNaN(r)?!1:r.toString()===e.toString()}return typeof e=="number"?Number.isNaN(e)||!Number.isFinite(e)?!1:Math.round(e)===e:!1},Gh=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,Jh=(e,r)=>{if(r=Math.round(r),e.has(r))return r;{let n=1;for(;n<1e3;){if(e.has(r-n))return r-n;if(e.has(r+n))return r+n;n++}throw new Error(`Could not find target ${r}`)}},Hh=(e,r)=>{for(const n of r)if(e.has(n))return e.get(n)},Kh=(e,r,n,i)=>e.has(r)?[...e.values()].some(s=>i(s,n)):!1,Yh=(e,r,n=j)=>{for(const i of Object.entries(e))n(i[1],r)&&e.delete(i[0])},Zh=(e,r)=>{for(const n of e.entries())if(r(n[1],n[0]))return n},Xh=(e,r,n=j)=>{for(const i of e.entries())if(n(i[1],r))return i},mo=(e,r,...n)=>{const i=e===void 0?new Map:new Map(e);for(const a of n){const s=r(a);i.has(s)||i.set(s,a)}return i},Wh=(e,r)=>{const n=r??Qn;return[...e.entries()].sort((i,a)=>n(i[1],a[1]))},po=(e,r,n)=>{const i=typeof n>"u"?Qn:n;return[...e.entries()].sort((a,s)=>{const o=a[1],u=s[1];return i(o[r],u[r])})},vo=(e,r,n)=>[...e.entries()].some(a=>n(a[1],r));function*go(e,r){for(const n of e.values())r(n)&&(yield n)}var An=e=>[...e.values()],xo=(e,r=Ce,n=!1)=>{const i=new Map;for(const a of e){const s=r(a);if(i.has(s)&&!n)throw new Error(`id ${s} is already used and new data will overwrite it. `);i.set(s,a)}return i},Uh=e=>{const r=new Map;if(Array.isArray(e))for(const n of e)jn(r,n);else jn(r,e);return r},jn=(e,r)=>{const n=Object.entries(r);for(const[i,a]of n)e.set(i,a)},wo=(e,r)=>[...e.values()].find(n=>r(n)),Qh=(e,r)=>[...e.values()].some(n=>r(n)),ed=(e,r)=>[...e].reduce((n,[i,a])=>{const s=r(a);return n[i]=s,n},{}),ei=(e,r)=>{if(e.length!==r.length)throw new Error("Keys and values arrays should be same length");return Object.fromEntries(e.map((n,i)=>[n,r[i]]))},td=(e,r)=>new Map(Array.from(e,n=>[n[0],r(n[1],n[0])])),rd=e=>[...e].reduce((r,[n,i])=>(r[n]=i,r),{}),nd=(e,r)=>[...e.entries()].map(n=>r(n[0],n[1])),id=(e,...r)=>{const n=new Map;for(const i of r)for(const[a,s]of i){let o=n.get(a);o=o?e(o,s):s,n.set(a,o)}return n},bo=(e,r)=>{const n=r??(i=>i);return vt(e).map((i,a)=>i*n(a/(vt.length-1)))},vt=e=>e.filter(r=>typeof r=="number"&&!Number.isNaN(r)),Eo=e=>{let r=0;const n=e[0].length;for(let i=0;i<n;i++){let a=0;for(const[s,o]of e.entries())s===0?a=o[i]:a*=o[i];r+=a}return r},ad=e=>{if(e===void 0)throw new Error("data parameter is undefined");const r=vt(e);return r.reduce((i,a)=>i+a,0)/r.length},sd=e=>Math.min(...vt(e)),od=e=>e.reduce((r,n,i,a)=>n>a[r]?i:r,0),ti=(...e)=>e.reduce((r,n,i,a)=>n<a[r]?i:r,0),ud=e=>Math.max(...vt(e)),ld=e=>e.reduce((r,n)=>typeof n!="number"||Number.isNaN(n)||Number.isFinite(n)?r:r+n,0),fd=e=>{let r=Number.MIN_SAFE_INTEGER;for(const n of e)r=Math.max(r,n);return r},cd=e=>{let r=0;for(const n of e)r+=n;return r},Mo=e=>{let r=Number.MIN_SAFE_INTEGER;for(const n of e)r=Math.min(r,n);return r},hd={};S(hd,{Arcs:()=>xl,Beziers:()=>Hu,Circles:()=>Nu,Compound:()=>Wu,Convolve2d:()=>dl,CurveSimplification:()=>ol,Ellipses:()=>sl,Grids:()=>Tu,Layouts:()=>pu,Lines:()=>jo,Paths:()=>Iu,Points:()=>Vr,Polar:()=>Ro,QuadTree:()=>ul,Rects:()=>Bu,Scaler:()=>hl,Shapes:()=>gu,SurfacePoints:()=>Pl,Triangles:()=>Xe,Vectors:()=>Nl,Waypoints:()=>zo,degreeToRadian:()=>Ze,radianInvert:()=>_o,radianToDegree:()=>ai,radiansFromAxisX:()=>vd});var zo={};S(zo,{fromPoints:()=>yy,init:()=>mu});var _r=(...e)=>{const r=[];let n=e[0];for(let i=1;i<e.length;i++)r.push(Dt(n,e[i])),n=e[i];return r},je=e=>!(e===void 0||e.a===void 0||e.b===void 0||!M(e.a)||!M(e.b)),No=e=>Array.isArray(e)?!e.some(n=>!je(n)):!1,Tr=(e,r="line")=>{if(e===void 0)throw new Error(`${r} undefined`);if(e.a===void 0)throw new Error(`${r}.a undefined. Expected {a:Point, b:Point}. Got: ${JSON.stringify(e)}`);if(e.b===void 0)throw new Error(`${r}.b undefined. Expected {a:Point, b:Point} Got: ${JSON.stringify(e)}`)},kr=(e,r)=>{let n;if(je(e))r=e.b,n=e.a;else if(n=e,r===void 0)throw new Error(`Since first parameter is not a line, two points are expected. Got a: ${JSON.stringify(n)} b: ${JSON.stringify(r)}`);return N(n,"a"),N(n,"b"),[n,r]};function U(e,r){if(No(e))return e.reduce((u,l)=>U(l)+u,0);if(e===void 0)throw new TypeError("Parameter 'aOrLine' is undefined");const[n,i]=kr(e,r),a=i.x-n.x,s=i.y-n.y;if(n.z!==void 0&&i.z!==void 0){const o=i.z-n.z;return Math.hypot(a,s,o)}else return Math.hypot(a,s)}function ve(e,r,n,i){typeof n=="boolean"&&(i=n,n=void 0),i?x(e,"","amount"):os(e,"amount");const[a,s]=kr(r,n),o=U(a,s),u=o*(1-e);if(o===0&&u===0)return Object.freeze({...s});const l=s.x-u*(s.x-a.x)/o,f=s.y-u*(s.y-a.y)/o;return Object.freeze({...s,x:l,y:f})}var So=e=>({x:e.b.x-e.a.x,y:e.b.y-e.a.y}),Po=e=>{const r=U(e),n=So(e);return{x:n.x/r,y:n.y/r}},$o=(e,r)=>{const n=So(e),i=Po(e),a={x:e.a.x-i.y*r,y:e.a.y+i.x*r};return{a,b:{x:a.x+n.x,y:a.y+n.y}}},Co=(e,r,n=0)=>{const i=ve(n,e),a=Po(e);return{x:i.x-a.y*r,y:i.y+a.x*r}},Ao=(e,r)=>{const[n,i]=kr(e,r);return ve(.5,n,i)},jo={};S(jo,{Empty:()=>ny,Placeholder:()=>iy,angleRadian:()=>oy,apply:()=>fu,asPoints:()=>dy,bbox:()=>Oo,distance:()=>hu,distanceSingleLine:()=>Er,divide:()=>Io,extendFromA:()=>cy,fromFlatArray:()=>pd,fromNumbers:()=>ls,fromPivot:()=>$d,fromPoints:()=>Dt,fromPointsToPath:()=>Cd,getPointParameter:()=>kr,guard:()=>Tr,interpolate:()=>ve,isEmpty:()=>ay,isEqual:()=>Do,isLine:()=>je,isPlaceholder:()=>sy,isPolyLine:()=>No,joinPointsToLines:()=>_r,length:()=>U,midpoint:()=>Ao,multiply:()=>iu,nearest:()=>ii,normaliseByRect:()=>uy,parallel:()=>$o,perpendicularPoint:()=>Co,pointAtX:()=>fy,pointsOf:()=>hy,relativePosition:()=>au,rotate:()=>su,scaleFromMidpoint:()=>ly,slope:()=>di,subtract:()=>ou,sum:()=>uu,toFlatArray:()=>du,toPath:()=>ze,toString:()=>lu,toSvgString:()=>yu,withinRange:()=>cu});var We=(e,r="Dimension")=>{if(e===void 0)throw new Error(`${r} is undefined`);if(Number.isNaN(e))throw new Error(`${r} is NaN`);if(e<0)throw new Error(`${r} cannot be negative`)},de=(e,r="rect")=>{if(e===void 0)throw new Error("{$name} undefined");W(e)&&N(e,r),We(e.width,r+".width"),We(e.height,r+".height")},ri=(e,r)=>{if(de(e),W(e)&&r===void 0)return e;if(r===void 0)throw new Error("Unpositioned rect needs origin parameter");return Object.freeze({...e,...r})},ni=(e,r="rect")=>{if(!W(e))throw new Error(`Expected ${r} to have x,y`);de(e,r)},dd=e=>e.width===0&&e.height===0,yd=e=>Number.isNaN(e.width)&&Number.isNaN(e.height),W=e=>e.x!==void 0&&e.y!==void 0,Z=e=>!(e===void 0||e.width===void 0||e.height===void 0),ge=e=>Z(e)&&W(e);function Bn(e,r,n,i){if(M(e)){if(typeof r=="number"&&n!==void 0)x(r,"positive","width"),x(n,"positive","height");else{if(!Z(r))throw new Error("Expected second parameter to be a rect");n=r.height,r=r.width}return Object.freeze({x:e.x/r,y:e.y/n})}else{if(x(e,"positive","x"),typeof r!="number")throw new TypeError("Expecting second parameter to be a number (width)");if(typeof n!="number")throw new TypeError("Expecting third parameter to be a number (height)");if(x(r,"positive","y"),x(n,"positive","width"),i===void 0)throw new Error("Expected height parameter");return x(i,"positive","height"),Object.freeze({x:e/n,y:r/i})}}function ce(e,r,n){if(e===void 0)return{x:0,y:0};if(Array.isArray(e)){if(e.length===0)return Object.freeze({x:0,y:0});if(e.length===1)return Object.freeze({x:e[0],y:0});if(e.length===2)return Object.freeze({x:e[0],y:e[1]});if(e.length===3)return Object.freeze({x:e[0],y:e[1],z:e[2]});throw new Error(`Expected array to be 1-3 elements in length. Got ${e.length}.`)}if(M(e))return e;if(typeof e!="number"||typeof r!="number")throw new TypeError(`Expected point or x,y as parameters. Got: a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`);return Object.freeze(typeof n=="number"?{x:e,y:r,z:n}:{x:e,y:r})}function I(e,r,n,i){const a=ce(r,n,i);return N(a,"b"),N(e,"a"),Te(a)&&Te(e)?Math.hypot(a.x-e.x,a.y-e.y,a.z-e.z):Math.hypot(a.x-e.x,a.y-e.y)}var ii=(e,r)=>{const n=i=>{const{a,b:s}=i,o={x:s.x-a.x,y:s.y-a.y},u={x:r.x-a.x,y:r.y-a.y},l=o.x*o.x+o.y*o.y;let f=u.x*o.x+u.y*o.y;const c=Math.min(1,Math.max(0,f/l));return f=(s.x-a.x)*(r.y-a.y)-(s.y-a.y)*(r.x-a.x),{x:a.x+o.x*c,y:a.y+o.y*c}};if(Array.isArray(e)){const i=e.map(s=>n(s)),a=i.map(s=>I(s,r));return Object.freeze(i[ti(...a)])}else return Object.freeze(n(e))},Er=(e,r)=>{if(Tr(e,"line"),N(r,"point"),U(e)===0)return U(e.a,r);const n=ii(e,r);return U(n,r)},Ke=(e,...r)=>{if(r.length===0)throw new Error("No points provided");let n=r[0];for(const i of r)n=e(n,i);return n},Bo=(e,r,n,i)=>{if(e.y>n.y)throw new Error("topLeft.y greater than bottomRight.y");if(e.y>i.y)throw new Error("topLeft.y greater than bottomLeft.y");const a=r.x-e.x,s=n.x-i.x,o=Math.abs(i.y-e.y),u=Math.abs(n.y-r.y);return{x:Math.min(e.x,i.x),y:Math.min(r.y,e.y),width:Math.max(a,s),height:Math.max(o,u)}},Lr=(...e)=>{const r=Ke((f,c)=>f.x<c.x?f:c,...e),n=Ke((f,c)=>f.x>c.x?f:c,...e),i=Ke((f,c)=>f.y<c.y?f:c,...e),a=Ke((f,c)=>f.y>c.y?f:c,...e),s={x:r.x,y:i.y},o={x:n.x,y:i.y},u={x:n.x,y:a.y},l={x:r.x,y:a.y};return Bo(s,o,u,l)},Oo=e=>Lr(e.a,e.b);function Mr(e,r,n,i){if(M(e))return N(e,"a"),M(r)?Object.freeze({x:e.x/r.x,y:e.y/r.y}):Z(r)?(de(r,"rect"),Object.freeze({x:e.x/r.width,y:e.y/r.height})):(n===void 0&&(n=r),N(e),x(r,"nonZero","x"),x(n,"nonZero","y"),Object.freeze({x:e.x/r,y:e.y/n}));if(typeof r!="number")throw new TypeError("expected second parameter to be y1 coord");return x(e,"positive","x1"),x(r,"positive","y1"),n===void 0&&(n=1),i===void 0&&(i=n),x(n,"nonZero","x2"),x(i,"nonZero","y2"),Object.freeze({x:e/n,y:r/i})}function md(e,r,n){const i=ce(e,r,n);return us(i,"divisor"),(a,s,o)=>{const u=ce(a,s,o);return typeof u.z>"u"?Object.freeze({x:u.x/i.x,y:u.y/i.y}):Object.freeze({x:u.x/i.x,y:u.y/i.y,z:u.z/(i.z??1)})}}var Io=(e,r)=>Object.freeze({...e,a:Mr(e.a,r),b:Mr(e.b,r)}),pd=e=>{if(!Array.isArray(e))throw new Error("arr parameter is not an array");if(e.length!==4)throw new Error("array is expected to have length four");return ls(e[0],e[1],e[2],e[3])},Ro={};S(Ro,{clampMagnitude:()=>Vo,divide:()=>Pd,dotProduct:()=>Lo,fromCartesian:()=>oi,guard:()=>ne,invert:()=>wd,isAntiParallel:()=>Md,isOpposite:()=>bd,isParallel:()=>Ed,isPolarCoord:()=>si,multiply:()=>Sd,normalise:()=>ko,rotate:()=>To,rotateDegrees:()=>zd,spiral:()=>xd,spiralRaw:()=>Nd,toCartesian:()=>ae,toPoint:()=>qo,toString:()=>Fo});function Ze(e){return Array.isArray(e)?e.map(r=>r*(Math.PI/180)):e*(Math.PI/180)}function _o(e){return(e+Math.PI)%(2*Math.PI)}function ai(e){return Array.isArray(e)?e.map(r=>r*180/Math.PI):e*180/Math.PI}var vd=e=>Math.atan2(e.x,e.y);function se(e,r,n,i){if(M(e))return N(e,"a"),M(r)?(N(r,"b"),Object.freeze({...e,x:e.x-r.x,y:e.y-r.y})):(n===void 0&&(n=r),Object.freeze({...e,x:e.x-r,y:e.y-n}));if(x(e,"","a"),typeof r!="number")throw new TypeError("Second parameter is expected to by y value");if(x(r,"","b"),Number.isNaN(n))throw new Error("Third parameter is NaN");if(Number.isNaN(i))throw new Error("Fourth parameter is NaN");return n===void 0&&(n=0),i===void 0&&(i=0),Object.freeze({x:e-n,y:r-i})}var Ue={x:0,y:0},gd=Object.freeze({x:0,y:0}),si=e=>!(e.distance===void 0||e.angleRadian===void 0),oi=(e,r)=>{e=se(e,r);const n=Math.atan2(e.y,e.x);return Object.freeze({...e,angleRadian:n,distance:Math.hypot(e.x,e.y)})},ae=(e,r,n)=>{if(si(e)){if(r===void 0&&(r=Ue),M(r))return Ya(e.distance,e.angleRadian,r);throw new Error("Expecting (Coord, Point). Second parameter is not a point")}else{if(typeof e=="object")throw new TypeError(`First param is an object, but not a Coord: ${JSON.stringify(e)}`);if(typeof e=="number"&&typeof r=="number"){if(n===void 0&&(n=Ue),!M(n))throw new Error("Expecting (number, number, Point). Point param wrong type");return Ya(e,r,n)}else throw new TypeError(`Expecting parameters of (number, number). Got: (${typeof e}, ${typeof r}, ${typeof n}). a: ${JSON.stringify(e)}`)}};function*xd(e,r){let n=0;for(;;){const i=e*n++;yield{distance:r*i,angleRadian:i,step:n}}}var To=(e,r)=>Object.freeze({...e,angleRadian:e.angleRadian+r}),ko=e=>{if(e.distance===0)throw new Error("Cannot normalise vector of length 0");return Object.freeze({...e,distance:1})},ne=(e,r="Point")=>{if(e===void 0)throw new Error(`'${r}' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e===null)throw new Error(`'${r}' is null. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e.angleRadian===void 0)throw new Error(`'${r}.angleRadian' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e.distance===void 0)throw new Error(`'${r}.distance' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(typeof e.angleRadian!="number")throw new TypeError(`'${r}.angleRadian' must be a number. Got ${e.angleRadian}`);if(typeof e.distance!="number")throw new TypeError(`'${r}.distance' must be a number. Got ${e.distance}`);if(e.angleRadian===null)throw new Error(`'${r}.angleRadian' is null`);if(e.distance===null)throw new Error(`'${r}.distance' is null`);if(Number.isNaN(e.angleRadian))throw new TypeError(`'${r}.angleRadian' is NaN`);if(Number.isNaN(e.distance))throw new Error(`'${r}.distance' is NaN`)},Lo=(e,r)=>(ne(e,"a"),ne(r,"b"),e.distance*r.distance*Math.cos(r.angleRadian-e.angleRadian)),wd=e=>(ne(e,"c"),Object.freeze({...e,angleRadian:e.angleRadian-Math.PI})),bd=(e,r)=>(ne(e,"a"),ne(r,"b"),e.distance!==r.distance?!1:e.angleRadian===-r.angleRadian),Ed=(e,r)=>(ne(e,"a"),ne(r,"b"),e.angleRadian===r.angleRadian),Md=(e,r)=>(ne(e,"a"),ne(r,"b"),e.angleRadian===-r.angleRadian),zd=(e,r)=>Object.freeze({...e,angleRadian:e.angleRadian+Ze(r)}),Nd=(e,r,n)=>{const i=r*e;return Object.freeze({distance:n*i,angleRadian:i})},Sd=(e,r)=>(ne(e),x(r,"","amt"),Object.freeze({...e,distance:e.distance*r})),Pd=(e,r)=>(ne(e),x(r,"","amt"),Object.freeze({...e,distance:e.distance/r})),Vo=(e,r=1,n=0)=>{let i=e.distance;return i>r&&(i=r),i<n&&(i=n),Object.freeze({...e,distance:i})},Ya=(e,r,n=Ue)=>(N(n),Object.freeze({x:n.x+e*Math.cos(r),y:n.y+e*Math.sin(r)})),Fo=(e,r)=>{if(e===void 0)return"(undefined)";if(e===null)return"(null)";const n=ai(e.angleRadian),i=r?e.distance.toFixed(r):e.distance,a=r?n.toFixed(r):n;return`(${i},${a})`},qo=(e,r=gd)=>(ne(e,"v"),Object.freeze({x:r.x+e.distance*Math.cos(e.angleRadian),y:r.y+e.distance*Math.sin(e.angleRadian)})),$d=(e={x:.5,y:.5},r=1,n=0,i=.5)=>{const a=r*i,s=r*(1-i),o=ae(a,_o(n),e),u=ae(s,n,e);return Object.freeze({a:o,b:u})},Cd=(e,r)=>ze(Dt(e,r)),pe=(...e)=>{if(e===void 0)throw new Error("parameter 'p' is undefined");if(e.length<2)return!0;for(let r=1;r<e.length;r++)if(e[r].x!==e[0].x||e[r].y!==e[0].y)return!1;return!0},Do=(e,r)=>pe(e.a,r.a)&&pe(e.b,r.b),Vr={};S(Vr,{Empty:()=>Ue,Placeholder:()=>Td,abs:()=>Ad,angle:()=>Rt,apply:()=>jd,bbox:()=>Lr,centroid:()=>Go,clamp:()=>Bd,clampMagnitude:()=>eu,compare:()=>Od,compareByX:()=>Jo,convexHull:()=>Id,distance:()=>I,distanceToCenter:()=>Ld,distanceToExterior:()=>Vd,divide:()=>Mr,divider:()=>md,dotProduct:()=>Uo,findMinimum:()=>Ke,from:()=>Fd,fromNumbers:()=>hi,getPointParameter:()=>ce,guard:()=>N,guardNonZeroPoint:()=>us,interpolate:()=>qd,invert:()=>Dd,isEmpty:()=>ut,isEqual:()=>pe,isNaN:()=>Wf,isNull:()=>Xf,isPlaceholder:()=>lt,isPoint:()=>M,isPoint3d:()=>Te,leftmost:()=>Gd,multiply:()=>Ft,multiplyScalar:()=>Qo,normalise:()=>tu,normaliseByRect:()=>Bn,pipeline:()=>ru,pipelineApply:()=>Kd,progressBetween:()=>Yd,project:()=>On,quantiseEvery:()=>Zd,random:()=>Xd,reduce:()=>nu,relation:()=>Wd,rightmost:()=>Jd,rotate:()=>Se,rotatePointArray:()=>Ud,round:()=>Qd,subtract:()=>se,sum:()=>qe,toArray:()=>Wo,toIntegerValues:()=>ey,toString:()=>Nr,withinRange:()=>ty,wrap:()=>ry});var Ad=e=>({...e,x:Math.abs(e.x),y:Math.abs(e.y)}),Rt=(e,r,n)=>(N(e,"a"),r===void 0?Math.atan2(e.y,e.x):(N(r,"b"),n===void 0?Math.atan2(r.y-e.y,r.x-e.x):(N(n,"c"),Math.atan2(r.y-e.y,r.x-e.x)-Math.atan2(n.y-e.y,n.x-e.x)))),jd=(e,r)=>(N(e,"pt"),Object.freeze({...e,x:r(e.x,"x"),y:r(e.y,"y")})),Go=(...e)=>{if(!Array.isArray(e))throw new Error("Expected list of points");const r=e.reduce((n,i)=>{if(i===void 0)return n;if(Array.isArray(i))throw new TypeError("'points' list contains an array. Did you mean: centroid(...myPoints)?");if(!M(i))throw new Error(`'points' contains something which is not a point: ${JSON.stringify(i)}`);return{x:n.x+i.x,y:n.y+i.y}},{x:0,y:0});return Object.freeze({x:r.x/e.length,y:r.y/e.length})};function Bd(e,r,n,i){if(M(e))return r===void 0&&(r=0),n===void 0&&(n=1),x(r,"","min"),x(n,"","max"),Object.freeze({x:ot(e.x,r,n),y:ot(e.y,r,n)});if(r===void 0)throw new Error("Expected y coordinate");return n===void 0&&(n=0),i===void 0&&(i=1),x(e,"","x"),x(r,"","y"),x(n,"","min"),x(i,"","max"),Object.freeze({x:ot(e,n,i),y:ot(r,n,i)})}var Od=(e,r)=>e.x<r.x&&e.y<r.y?-2:e.x>r.x&&e.y>r.y?2:e.x<r.x||e.y<r.y?-1:e.x>r.x||e.y>r.y?1:e.x===r.x&&e.x===r.y?0:Number.NaN,Jo=(e,r)=>e.x-r.x||e.y-r.y,Id=(...e)=>{const r=[...e].sort(Jo);if(r.length===1)return r;const n=s=>{const o=[];for(const u of s){for(;o.length>=2;){const l=o.at(-1),f=o.at(-2);if((l.x-f.x)*(u.y-f.y)>=(l.y-f.y)*(u.x-f.x))o.pop();else break}o.push(u)}return o.pop(),o},i=n(r),a=n(r.reverse());return i.length===1&&a.length===1&&pe(a[0],i[0])?i:[...i,...a]},Xt=(e,r="circle")=>{if(L(e)&&N(e,"circle"),Number.isNaN(e.radius))throw new Error(`${r}.radius is NaN`);if(e.radius<=0)throw new Error(`${r}.radius must be greater than zero`)},zr=(e,r="circle")=>{if(!L(e))throw new Error("Expected a positioned circle with x,y");Xt(e,r)},Rd=e=>!!(Number.isNaN(e.radius)||L(e)&&(Number.isNaN(e.x)||Number.isNaN(e.y))),Ho=e=>e.x!==void 0&&e.y!==void 0,xt=e=>e.radius!==void 0,L=e=>xt(e)&&Ho(e),ui=(e,r)=>(zr(e,"a"),L(r)&&zr(r,"b"),I(e,r)),li=(e,r)=>{if(zr(e,"a"),L(r))return Math.max(0,ui(e,r)-e.radius-r.radius);if(M(r)){const n=I(e,r);return n<e.radius?0:n}else throw new Error("Second parameter invalid type")},Ko=(e,r)=>e.radius!==r.radius?!1:L(e)&&L(r)?!(e.x!==r.x||e.y!==r.y||e.z!==r.z):(!L(e)&&!L(r),!1),qe=function(e,r,n,i){if(e===void 0)throw new TypeError("a missing");let a,s;if(M(e))if(a=e,r===void 0&&(r=Ue),M(r))s=r;else{if(r===void 0)throw new Error("Expects x coordinate");s={x:r,y:n??r}}else if(!M(r)){if(r===void 0)throw new Error("Expected number as second param");if(a={x:e,y:r},n===void 0)throw new Error("Expects x coordiante");s={x:n,y:i??0}}if(a===void 0)throw new Error(`ptA missing. a: ${JSON.stringify(e)}`);if(s===void 0)throw new Error(`ptB missing. b: ${JSON.stringify(r)}`);return N(a,"a"),N(s,"b"),Object.freeze({x:a.x+s.x,y:a.y+s.y})},_d=(e,r)=>{const n={x:r.b.x-r.a.x,y:r.b.y-r.a.y},i={x:r.a.x-e.x,y:r.a.y-e.y},a=(n.x*i.x+n.y*i.y)*-2,s=2*(n.x*n.x+n.y*n.y),o=Math.sqrt(a*a-2*s*(i.x*i.x+i.y*i.y-e.radius*e.radius));if(Number.isNaN(o))return[];const u=(a-o)/s,l=(a+o)/s,f=[];return u<=1&&u>=0&&f.push({x:r.a.x+n.x*u,y:r.a.y+n.y*u}),l<=1&&l>=0&&f.push({x:r.a.x+n.x*l,y:r.a.y+n.y*l}),f},Yo=(e,r)=>{const n=se(r,e),i=Math.hypot(n.y,n.x);if(i>e.radius+r.radius)return[];if(i<Math.abs(e.radius-r.radius))return[];if(Ko(e,r))return[];const a=(e.radius*e.radius-r.radius*r.radius+i*i)/(2*i),s={x:e.x+n.x*a/i,y:e.y+n.y*a/i},o=Math.sqrt(e.radius*e.radius-a*a),u={x:-n.y*(o/i),y:n.x*(o/i)};return[qe(s,u),se(s,u)]},Zo=(e,r)=>{const n=e.x-Math.max(r.x,Math.min(e.x,r.x+r.width)),i=e.y-Math.max(r.y,Math.min(e.y,r.y+r.height));return n*n+i*i<e.radius*e.radius},Za=(e,r)=>Yo(e,r).length===2;function Wt(e,r,n){de(e,"rect");let i=0,a=0;if(typeof r=="number"){if(n===void 0)throw new Error("x and y coordinate needed");i=r,a=n}else i=r.x,a=r.y;if(W(e)){if(i-e.x>e.width||i<e.x||a-e.y>e.height||a<e.y)return!1}else if(i>e.width||i<0||a>e.height||a<0)return!1;return!0}var Xo=(e,r)=>{if(!ge(e))throw new Error("a parameter should be RectPositioned");if(L(r))return Zo(r,e);if(M(r))return Wt(e,r);throw new Error(`Unknown shape for b: ${JSON.stringify(r)}`)},fi=(e,r)=>(de(e),r===void 0&&M(e)?r=e:r===void 0&&(r={x:0,y:0}),ri(e,r),Object.freeze({x:r.x+e.width/2,y:r.y+e.height/2})),Td=Object.freeze({x:Number.NaN,y:Number.NaN}),ci=(e,r)=>{if(ni(e,"rect"),N(r,"pt"),Wt(e,r))return 0;const n=Math.max(e.x-r.x,0,r.x-e.x+e.width),i=Math.max(e.y-r.y,0,r.y-e.y+e.height);return Math.hypot(n,i)},kd=(e,r)=>I(fi(e),r),Ld=(e,r)=>{if(ge(r))return ci(r,e);if(L(r))return li(r,e);if(M(r))return I(e,r);throw new Error("Unknown shape")},Vd=(e,r)=>{if(ge(r))return ci(r,e);if(L(r))return li(r,e);if(M(r))return I(e,r);throw new Error("Unknown shape")},Wo=e=>[e.x,e.y],Uo=(...e)=>{const r=e.map(n=>Wo(n));return Eo(r)},Fd=(e,r)=>{if(Array.isArray(e)){if(e.length!==2)throw new Error(`Expected array of length two, got ${e.length}`);return Object.freeze({x:e[0],y:e[1]})}else{if(e===void 0)e=0;else if(Number.isNaN(e))throw new Error("x is NaN");if(r===void 0)r=0;else if(Number.isNaN(r))throw new Error("y is NaN");return Object.freeze({x:e,y:r})}},hi=(...e)=>{const r=[];if(Array.isArray(e[0]))for(const n of e){if(n.length%2!==0)throw new Error("coords array should be even-numbered");r.push(Object.freeze({x:n[0],y:n[1]}))}else{if(e.length%2!==0)throw new Error("Expected even number of elements: [x,y,x,y...]");for(let n=0;n<e.length;n+=2)r.push(Object.freeze({x:e[n],y:e[n+1]}))}return r},qd=(e,r,n,i=!1)=>ve(e,r,n,i),Dd=(e,r="both")=>{switch(r){case"both":return Te(e)?Object.freeze({...e,x:e.x*-1,y:e.y*-1,z:e.z*-1}):Object.freeze({...e,x:e.x*-1,y:e.y*-1});case"x":return Object.freeze({...e,x:e.x*-1});case"y":return Object.freeze({...e,y:e.y*-1});case"z":{if(Te(e))return Object.freeze({...e,z:e.z*-1});throw new Error("pt parameter is missing z")}default:throw new Error("Unknown what parameter. Expecting 'both', 'x' or 'y'")}};function Ft(e,r,n){if(N(e,"a"),typeof r=="number")return typeof n>"u"&&(n=r),x(n,"","y"),x(r,"","x"),Object.freeze({x:e.x*r,y:e.y*n});if(M(r))return N(r,"b"),Object.freeze({x:e.x*r.x,y:e.y*r.y});if(Z(r))return de(r,"rect"),Object.freeze({x:e.x*r.width,y:e.y*r.height});throw new Error(`Invalid arguments. a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`)}var Qo=(e,r)=>Te(e)?Object.freeze({...e,x:e.x*r,y:e.y*r,z:e.z*r}):Object.freeze({...e,x:e.x*r,y:e.y*r}),eu=(e,r=1,n=0)=>{const i=I(e);let a=1;return i>r?a=r/i:i<n&&(a=n/i),a===1?e:Ft(e,a,a)},Gd=(...e)=>Ke((r,n)=>r.x<=n.x?r:n,...e),Jd=(...e)=>Ke((r,n)=>r.x>=n.x?r:n,...e),Hd=(e,r)=>{if(M(e)&&(r=e.y,e=e.x),r===void 0)throw new Error("Expected y");return Math.hypot(e,r)},tu=(e,r)=>{const n=ce(e,r),i=Hd(n);return i===0?Ue:Object.freeze({...n,x:n.x/i,y:n.y/i})},Kd=(e,...r)=>ru(...r)(e),ru=(...e)=>r=>e.reduce((n,i)=>i(n),r),Yd=(e,r,n)=>{const i=se(e,r),a=se(n,r);return Te(i)&&Te(a)?(i.x*a.x+i.y*a.y+i.z*a.z)/(a.x*a.x+a.y*a.y+a.z*a.z):(i.x*a.x+i.y*a.y)/(a.x*a.x+a.y*a.y)},On=(e,r,n)=>{const i=Math.cos(n)*r+e.x,a=Math.sin(n)*r+e.y;return{x:i,y:a}},Zd=(e,r,n=!0)=>Object.freeze({x:Ka(e.x,r.x,n),y:Ka(e.y,r.y,n)}),Xd=e=>(e===void 0&&(e=qt),Object.freeze({x:e(),y:e()})),nu=(e,r,n)=>{n===void 0&&(n={x:0,y:0});let i=n;for(const a of e)i=r(a,i);return i},Wd=(e,r)=>{const n=ce(e,r);let i=0,a=0,s=0,o=performance.now(),u=n;return(f,c)=>{const h=ce(f,c);i+=h.x,a+=h.y,s++;const d=I(h,n),y=I(h,u),m=performance.now(),v=y/(m-o);return o=m,u=h,Object.freeze({angle:Rt(h,n),distanceFromStart:d,distanceFromLast:y,speed:v,centroid:Go(h,n),average:{x:i/s,y:a/s}})}};function Se(e,r,n){n===void 0&&(n={x:0,y:0}),N(n,"origin"),x(r,"","amountRadian");const i=Array.isArray(e);if(r===0)return e;i||(e=[e]);const a=e;for(const[l,f]of a.entries())N(f,`pt[${l}]`);const u=a.map(l=>oi(l,n)).map(l=>To(l,r)).map(l=>ae(l,n));return i?u:u[0]}var Ud=(e,r)=>{const n=[[Math.cos(r),-Math.sin(r)],[Math.sin(r),Math.cos(r)]],i=[];for(const[a,s]of e.entries())i[a]=[n[0][0]*s[0]+n[0][1]*s[1],n[1][0]*s[0]+n[1][1]*s[1]];return i},Qd=(e,r,n)=>{const i=ce(e,r);return n=n??r,n=n??2,Object.freeze({...i,x:Sn(n,i.x),y:Sn(n,i.y)})},ey=(e,r=Math.round)=>(N(e,"pt"),Object.freeze({x:r(e.x),y:r(e.y)}));function Nr(e,r){if(e===void 0)return"(undefined)";if(e===null)return"(null)";N(e,"pt");const n=r?e.x.toFixed(r):e.x,i=r?e.y.toFixed(r):e.y;if(e.z===void 0)return`(${n},${i})`;{const a=r?e.z.toFixed(r):e.z;return`(${n},${i},${a})`}}var ty=(e,r,n)=>{N(e,"a"),N(r,"b"),typeof n=="number"?(x(n,"positive","maxRange"),n={x:n,y:n}):N(n,"maxRange");const i=Math.abs(r.x-e.x),a=Math.abs(r.y-e.y);return i<=n.x&&a<=n.y},ry=(e,r,n)=>(r===void 0&&(r={x:1,y:1}),n===void 0&&(n={x:0,y:0}),N(e,"pt"),N(r,"ptMax"),N(n,"ptMin"),Object.freeze({x:Ha(e.x,n.x,r.x),y:Ha(e.y,n.y,r.y)})),iu=(e,r)=>Object.freeze({...e,a:Ft(e.a,r),b:Ft(e.b,r)}),au=(e,r)=>{const n=I(e.a,r),i=U(e);return n/i},su=(e,r,n)=>r===void 0||r===0?e:(n===void 0&&(n=.5),typeof n=="number"&&(n=ve(n,e.a,e.b)),Object.freeze({...e,a:Se(e.a,r,n),b:Se(e.b,r,n)})),ou=(e,r)=>Object.freeze({...e,a:se(e.a,r),b:se(e.b,r)}),uu=(e,r)=>Object.freeze({...e,a:qe(e.a,r),b:qe(e.b,r)});function lu(e,r){if(je(e))Tr(e,"a"),r=e.b,e=e.a;else if(r===void 0)throw new Error("Expect second point if first is a point");return Nr(e)+"-"+Nr(r)}var ny=Object.freeze({a:Object.freeze({x:0,y:0}),b:Object.freeze({x:0,y:0})}),iy=Object.freeze({a:Object.freeze({x:Number.NaN,y:Number.NaN}),b:Object.freeze({x:Number.NaN,y:Number.NaN})}),ay=e=>ut(e.a)&&ut(e.b),sy=e=>lt(e.a)&&lt(e.b),fu=(e,r)=>Object.freeze({...e,a:r(e.a),b:r(e.b)}),oy=(e,r)=>{let n;if(je(e))n=e.a,r=e.b;else if(n=e,r===void 0)throw new Error("b point must be provided");return Math.atan2(r.y-n.y,r.x-n.x)},uy=(e,r,n)=>Object.freeze({...e,a:Bn(e.a,r,n),b:Bn(e.b,r,n)}),cu=(e,r,n)=>hu(e,r)<=n,di=(e,r)=>{let n;if(je(e))n=e.a,r=e.b;else if(n=e,r===void 0)throw new Error("b parameter required");if(r===void 0)throw new TypeError("Second point missing");return(r.y-n.y)/(r.x-n.x)},ly=(e,r)=>{const n=ve(r/2,e),i=ve(.5+r/2,e);return{a:n,b:i}},fy=(e,r)=>{const n=e.a.y+(r-e.a.x)*di(e);return Object.freeze({x:r,y:n})},cy=(e,r)=>{const n=U(e);return Object.freeze({...e,a:e.a,b:Object.freeze({x:e.b.x+(e.b.x-e.a.x)/n*r,y:e.b.y+(e.b.y-e.a.y)/n*r})})};function*hy(e){const{a:r,b:n}=e;let i=Math.floor(r.x),a=Math.floor(r.y);const s=Math.floor(n.x),o=Math.floor(n.y),u=Math.abs(s-i),l=-Math.abs(o-a),f=i<s?1:-1,c=a<o?1:-1;let h=u+l;for(;yield{x:i,y:a},!(i===s&&a===o);){const d=2*h;d>=l&&(h+=l,i+=f),d<=u&&(h+=u,a+=c)}}var hu=(e,r)=>{if(Array.isArray(e)){const n=e.map(i=>Er(i,r));return Mo(n)}else return Er(e,r)},du=(e,r)=>{if(je(e))return[e.a.x,e.a.y,e.b.x,e.b.y];if(M(e)&&M(r))return[e.x,e.y,r.x,r.y];throw new Error("Expected single line parameter, or a and b points")};function*dy(e){for(const r of e)yield r.a,yield r.b}var yu=(e,r)=>[`M${e.x} ${e.y} L ${r.x} ${r.y}`],ze=e=>{const{a:r,b:n}=e;return Object.freeze({...e,length:()=>U(r,n),interpolate:i=>ve(i,r,n),relativePosition:i=>au(e,i),bbox:()=>Oo(e),toString:()=>lu(r,n),toFlatArray:()=>du(r,n),toSvgString:()=>yu(r,n),toPoints:()=>[r,n],rotate:(i,a)=>ze(su(e,i,a)),nearest:i=>ii(e,i),sum:i=>ze(uu(e,i)),divide:i=>ze(Io(e,i)),multiply:i=>ze(iu(e,i)),subtract:i=>ze(ou(e,i)),midpoint:()=>Ao(r,n),distanceToPoint:i=>Er(e,i),parallel:i=>$o(e,i),perpendicularPoint:(i,a)=>Co(e,i,a),slope:()=>di(e),withinRange:(i,a)=>cu(e,i,a),isEqual:i=>Do(e,i),apply:i=>ze(fu(e,i)),kind:"line"})},yy=(e,r={})=>{const n=_r(...e);return mu(n.map(i=>ze(i)),r)},mu=(e,r={})=>{const n=r.maxDistanceFromLine??.1;return a=>{const o=e.map((l,f)=>{const c=l.nearest(a),h=I(a,c);return{positionRelative:l.relativePosition(c,n),path:l,index:f,nearest:c,distance:h,rank:Number.MAX_SAFE_INTEGER}}).filter(l=>l.distance<=n),u=Zt(o,"distance");for(let l=0;l<u.length;l++)u[l].rank=l;return u}},pu={};S(pu,{CirclePacking:()=>vu});var vu={};S(vu,{random:()=>xy});var gu={};S(gu,{arrow:()=>gy,center:()=>py,isIntersecting:()=>Mu,randomPoint:()=>zu,starburst:()=>vy});var ft=(e,r)=>{const n=ri(e,r);return[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}]},_e=(e,r,n)=>(We(r,"width"),We(n,"height"),N(e,"origin"),{x:e.x,y:e.y,width:r,height:n}),xu=(e,r,n)=>{const i=ui(e,r);if(xt(r))return i<Math.abs(e.radius-r.radius);if(M(r))return n===void 0?i<=e.radius:i<Math.abs(e.radius-n);throw new Error("b parameter is expected to be CirclePositioned or Point")},yi=(e,r,n)=>pe(e,r)||xu(e,r,n)?!0:xt(r)?Za(e,r):ge(r)?Zo(e,r):M(r)&&n!==void 0?Za(e,{...r,radius:n}):!1,Xa=Math.PI*2,wu=(e,r={})=>{const n=L(e)?e:{x:0,y:0},i=r.strategy??"uniform",a=r.margin??0,s=e.radius-a,o=r.randomSource??Math.random;switch(i){case"naive":return qe(n,ae(o()*s,o()*Xa));case"uniform":return qe(n,ae(Math.sqrt(o())*s,o()*Xa));default:throw new Error(`Unknown strategy '${i}'. Expects 'uniform' or 'naive'`)}},bu=e=>L(e)?Object.freeze({x:e.x,y:e.y}):Object.freeze({x:e.radius,y:e.radius}),my=e=>(e===void 0&&(e=qt),Object.freeze({x:e(),y:e(),width:e(),height:e()})),Eu=(e,r={})=>{const n=r.randomSource??qt,i=r.margin??{x:0,y:0},a=n()*(e.width-i.x-i.x),s=n()*(e.height-i.y-i.y),o={x:a+i.x,y:s+i.y};return W(e)?qe(o,e):Object.freeze(o)},Mu=(e,r)=>{if(L(e))return yi(e,r);if(ge(e))return Xo(e,r);throw new Error(`a or b are unknown shapes. a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`)},zu=(e,r={})=>{if(L(e))return wu(e,r);if(ge(e))return Eu(e,r);throw new Error("Unknown shape. Only CirclePositioned and RectPositioned are supported.")},py=e=>{if(e===void 0)return Object.freeze({x:.5,y:.5});if(Z(e))return fi(e);if(Xe.isTriangle(e))return Xe.centroid(e);if(xt(e))return bu(e);throw new Error(`Unknown shape: ${JSON.stringify(e)}`)},vy=(e,r=5,n,i=Vr.Empty,a)=>{Y(r,"positive","points");const s=Math.PI*2/r,o=s/2,u=a?.initialAngleRadian??-Math.PI/2;n===void 0&&(n=e/2);let l=u;const f=[];for(let c=0;c<r;c++){const h=ae(e,l,i),d=ae(n,l-o,i),y=ae(n,l+o,i);f.push(d,h),c+1<r&&f.push(y),l+=s}return f},gy=(e,r,n={})=>{const i=n.tailLength??10,a=n.tailThickness??Math.max(i/5,5),s=n.angleRadian??0,o=n.arrowSize??Math.max(i/5,15),u=Math.PI/2;let l,f;if(r==="tip")l=Xe.equilateralFromVertex(e,o,u),f=ft(_e({x:l.a.x-i,y:e.y-a/2},i,a));else if(r==="middle"){const h=i+o/2,d=a/2;l=Xe.equilateralFromVertex({x:e.x+o*1.2,y:e.y},o,u),f=ft(_e({x:e.x-h,y:e.y-d},i+o,a))}else f=ft(_e({x:e.x,y:e.y-a/2},i,a)),l=Xe.equilateralFromVertex({x:e.x+i+o*.7,y:e.y},o,u);return Vr.rotate([f[0],f[1],l.a,l.b,l.c,f[2],f[3]],s,e)},xy=(e,r,n={})=>{if(!Array.isArray(e))throw new Error("Parameter 'circles' is not an array");const i=n.attempts??2e3,a=Zt(e,"radius"),s=[],o=(u,l)=>s.some(f=>yi(f,u,l));for(;a.length>0;){const u=a.pop();if(!u)break;const l={...n,margin:{x:u.radius,y:u.radius}};for(let f=0;f<i;f++){const c=zu(r,l);if(!o(c,u.radius)){s.push(Object.freeze({...u,...c}));break}}}return s},Nu={};S(Nu,{area:()=>wy,bbox:()=>Pu,center:()=>bu,circumference:()=>mi,distanceCenter:()=>ui,distanceFromExterior:()=>li,exteriorIntegerPoints:()=>by,guard:()=>Xt,guardPositioned:()=>zr,interiorIntegerPoints:()=>Ey,interpolate:()=>Au,intersectionLine:()=>_d,intersections:()=>Yo,isCircle:()=>xt,isCirclePositioned:()=>L,isContainedBy:()=>xu,isEqual:()=>Ko,isIntersecting:()=>yi,isNaN:()=>Rd,isPositioned:()=>Ho,length:()=>zy,multiplyScalar:()=>Sy,nearest:()=>$u,pointOnPerimeter:()=>Cu,randomPoint:()=>wu,toPath:()=>Py,toPositioned:()=>pi,toSvg:()=>ju});var wy=e=>(Xt(e),Math.PI*e.radius*e.radius),Su=(e,r,n)=>{N(e,"origin"),We(r,"width"),We(n,"height");const i=r/2,a=n/2;return{x:e.x-i,y:e.y-a,width:r,height:n}},Pu=e=>L(e)?Su(e,e.radius*2,e.radius*2):{width:e.radius*2,height:e.radius*2,x:0,y:0};function*by(e){const{x:r,y:n,radius:i}=e;let a=i,s=0,o=1-r;for(;a>=s;)yield{x:a+r,y:s+n},yield{x:s+r,y:a+n},yield{x:-a+r,y:s+n},yield{x:-s+r,y:a+n},yield{x:-a+r,y:-s+n},yield{x:-s+r,y:-a+n},yield{x:a+r,y:-s+n},yield{x:s+r,y:-a+n},s++,o<0?o+=2*s+1:(a--,o+=2*(s-a+1))}function*Ey(e){const r=e.x-e.radius,n=e.x+e.radius,i=e.y-e.radius,a=e.y+e.radius;for(let s=r;s<n;s++)for(let o=i;o<a;o++)Math.abs(I(e,s,o))<=e.radius&&(yield{x:s,y:o})}var My=Math.PI*2,$u=(e,r)=>{const n=i=>{const a=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),s=i.x+i.radius*((r.x-i.x)/a),o=i.y+i.radius*((r.y-i.y)/a);return{x:s,y:o}};if(Array.isArray(e)){const i=e.map(s=>n(s)),a=i.map(s=>I(s,r));return Object.freeze(i[ti(...a)])}else return Object.freeze(n(e))},Cu=(e,r,n)=>(n===void 0&&(n=L(e)?e:{x:0,y:0}),{x:Math.cos(-r)*e.radius+n.x,y:Math.sin(-r)*e.radius+n.y}),mi=e=>(Xt(e),My*e.radius),zy=e=>mi(e),Ny=Math.PI*2,Au=(e,r)=>Cu(e,r*Ny);function Sy(e,r){if(L(e)){const n=Qo(e,r);return Object.freeze({...e,...n,radius:e.radius*r})}else return Object.freeze({...e,radius:e.radius*r})}var ju=(e,r,n)=>{if(xt(e)){if(n!==void 0)return yn(e.radius,n,r);if(L(e))return yn(e.radius,e,r);throw new Error("origin parameter needed for non-positioned circle")}else{if(n===void 0)throw new Error("origin parameter needed");return yn(e,n,r)}},yn=(e,r,n)=>{const{x:i,y:a}=r,s=n?"1":"0";return`
    M ${i}, ${a}
    m -${e}, 0
    a ${e},${e} 0 1,${s} ${e*2},0
    a ${e},${e} 0 1,${s} -${e*2},0
  `.split(`
`)},Py=e=>(Xt(e),{...e,nearest:r=>$u(e,r),interpolate:r=>Au(e,r),bbox:()=>Pu(e),length:()=>mi(e),toSvgString:(r=!0)=>ju(e,r),relativePosition:(r,n)=>{throw new Error("Not implemented")},distanceToPoint:r=>{throw new Error("Not implemented")},kind:"circular"}),pi=(e,r,n)=>{if(L(e))return e;const i=ce(r,n);return Object.freeze({...e,...i})},Bu={};S(Bu,{area:()=>$y,cardinal:()=>Cy,center:()=>fi,corners:()=>ft,distanceFromCenter:()=>kd,distanceFromExterior:()=>ci,edges:()=>Ou,empty:()=>By,emptyPositioned:()=>Oy,fromCenter:()=>Su,fromElement:()=>Iy,fromNumbers:()=>Ry,fromTopLeft:()=>_e,getEdgeX:()=>Ay,getEdgeY:()=>jy,getRectPositioned:()=>ri,getRectPositionedParameter:()=>_y,guard:()=>de,guardDim:()=>We,guardPositioned:()=>ni,intersectsPoint:()=>Wt,isEmpty:()=>dd,isEqual:()=>ky,isEqualSize:()=>Ty,isIntersecting:()=>Xo,isPlaceholder:()=>yd,isPositioned:()=>W,isRect:()=>Z,isRectPositioned:()=>ge,lengths:()=>Ly,maxFromCorners:()=>Bo,multiply:()=>Vy,multiplyScalar:()=>Fy,normaliseByRect:()=>qy,random:()=>my,randomPoint:()=>Eu,subtract:()=>Dy,sum:()=>Gy,toArray:()=>Jy});var $y=e=>(de(e),e.height*e.width),Cy=(e,r)=>{const{x:n,y:i,width:a,height:s}=e;switch(r){case"nw":return Object.freeze({x:n,y:i});case"n":return Object.freeze({x:n+a/2,y:i});case"ne":return Object.freeze({x:n+a,y:i});case"sw":return Object.freeze({x:n,y:i+s});case"s":return Object.freeze({x:n+a/2,y:i+s});case"se":return Object.freeze({x:n+a,y:i+s});case"w":return Object.freeze({x:n,y:i+s/2});case"e":return Object.freeze({x:n+a,y:i+s/2});case"center":return Object.freeze({x:n+a/2,y:i+s/2});default:throw new Error(`Unknown direction: ${r}`)}},Ou=(e,r)=>{const n=ft(e,r);return _r(...n,n[0])},Ay=(e,r)=>{switch(de(e),r){case"top":return M(e)?e.x:0;case"bottom":return M(e)?e.x:0;case"left":return M(e)?e.y:0;case"right":return M(e)?e.x+e.width:e.width}},jy=(e,r)=>{switch(de(e),r){case"top":return M(e)?e.y:0;case"bottom":return M(e)?e.y+e.height:e.height;case"left":return M(e)?e.y:0;case"right":return M(e)?e.y:0}},By=Object.freeze({width:0,height:0}),Oy=Object.freeze({x:0,y:0,width:0,height:0}),Iy=e=>({width:e.clientWidth,height:e.clientHeight});function Ry(e,r,n,i){if(n===void 0||i===void 0){if(typeof e!="number")throw new Error("width is not an number");if(typeof r!="number")throw new TypeError("height is not an number");return Object.freeze({width:e,height:r})}if(typeof e!="number")throw new Error("x is not an number");if(typeof r!="number")throw new Error("y is not an number");if(typeof n!="number")throw new Error("width is not an number");if(typeof i!="number")throw new Error("height is not an number");return Object.freeze({x:e,y:r,width:n,height:i})}function _y(e,r,n,i){if(typeof e=="number")if(typeof r=="number"){if(typeof n=="number"&&typeof i=="number")return{x:e,y:r,width:n,height:i};if(Z(n))return{x:e,y:r,width:n.width,height:n.height};throw new TypeError("If params 'a' & 'b' are numbers, expect following parameters to be x,y or Rect")}else throw new TypeError("If parameter 'a' is a number, expect following parameters to be: y,w,h");else{if(ge(e))return e;if(Z(e)){if(typeof r=="number"&&typeof n=="number")return{width:e.width,height:e.height,x:r,y:n};if(M(r))return{width:e.width,height:e.height,x:r.x,y:r.y};throw new TypeError("If param 'a' is a Rect, expects following parameters to be x,y")}else if(M(e)){if(typeof r=="number"&&typeof n=="number")return{x:e.x,y:e.y,width:r,height:n};if(Z(r))return{x:e.x,y:e.y,width:r.width,height:r.height};throw new TypeError("If parameter 'a' is a Point, expect following params to be: Rect or width,height")}}throw new TypeError("Expect a first parameter to be x,RectPositioned,Rect or Point")}var Ty=(e,r)=>{if(e===void 0)throw new Error("a undefined");if(r===void 0)throw new Error("b undefined");return e.width===r.width&&e.height===r.height},ky=(e,r)=>W(e)&&W(r)?pe(e,r)?e.width===r.width&&e.height===r.height:!1:!W(e)&&!W(r)?e.width===r.width&&e.height===r.height:!1,Ly=e=>(ni(e,"rect"),Ou(e).map(r=>U(r)));function Vy(e,r,n){if(de(e,"a"),Z(r))return ge(e)?Object.freeze({...e,x:e.x*r.width,y:e.y*r.height,width:e.width*r.width,height:e.height*r.height}):Object.freeze({...e,width:e.width*r.width,height:e.height*r.height});if(typeof r!="number")throw new TypeError(`Expected second parameter of type Rect or number. Got ${JSON.stringify(r)}`);return n===void 0&&(n=r),ge(e)?Object.freeze({...e,x:e.x*r,y:e.y*n,width:e.width*r,height:e.height*n}):Object.freeze({...e,width:e.width*r,height:e.height*n})}function Fy(e,r){return W(e)?Object.freeze({...e,x:e.x*r,y:e.y*r,width:e.width*r,height:e.height*r}):Object.freeze({...e,width:e.width*r,height:e.height*r})}var qy=(e,r,n)=>{let i;if(n===void 0)if(Z(r))n=r.height,i=r.width;else throw new Error("Expects rectangle or width and height parameters for normaliseBy");else if(typeof r=="number")i=r;else throw new TypeError("Expects rectangle or width and height parameters for normaliseBy");return W(e)?Object.freeze({x:e.x/i,y:e.y/n,width:e.width/i,height:e.height/n}):Object.freeze({width:e.width/i,height:e.height/n})};function Dy(e,r,n){if(e===void 0)throw new Error("First parameter undefined");if(typeof r=="number"){const i=n??0;return Object.freeze({...e,width:e.width-r,height:e.height-i})}else return Object.freeze({...e,width:e.width-r.width,height:e.height-r.height})}function Gy(e,r,n){if(e===void 0)throw new Error("First parameter undefined");if(typeof r=="number"){const i=n??0;return Object.freeze({...e,width:e.width+r,height:e.height+i})}else return Object.freeze({...e,width:e.width+r.width,height:e.height+r.height})}function Jy(e){if(W(e))return[e.x,e.y,e.width,e.height];if(Z(e))return[e.width,e.height];throw new Error(`Param 'rect' is not a rectangle. Got: ${JSON.stringify(e)}`)}var Iu={};S(Iu,{getEnd:()=>In,getStart:()=>_u});var Fr=e=>e.quadratic!==void 0,Ru=e=>e.cubic1!==void 0&&e.cubic2!==void 0,_u=function(e){if(Fr(e))return e.a;if(je(e))return e.a;throw new Error(`Unknown path type ${JSON.stringify(e)}`)},In=function(e){if(Fr(e))return e.b;if(je(e))return e.b;throw new Error(`Unknown path type ${JSON.stringify(e)}`)},Tu={};S(Tu,{access1dArray:()=>c1,allDirections:()=>qr,array2dUpdater:()=>h1,asRectangles:()=>Zy,cellAtPoint:()=>qu,cellEquals:()=>Lu,cellFromIndex:()=>y1,cellKeyString:()=>ku,cellMiddle:()=>Uy,cells:()=>bt,crossDirections:()=>Du,getLine:()=>Qy,getVectorFromCardinal:()=>Dr,guardCell:()=>xe,indexFromCell:()=>Gr,inside:()=>Vu,isEqual:()=>Yy,neighbours:()=>Gu,offset:()=>wt,offsetCardinals:()=>e1,rectangleForCell:()=>Fu,rows:()=>f1,simpleLine:()=>t1,toArray:()=>Xy,visitArray:()=>d1,visitFor:()=>u1,visitNeigbours:()=>Wy,visitor:()=>et,visitorBreadth:()=>i1,visitorColumn:()=>l1,visitorDepth:()=>n1,visitorRandom:()=>s1,visitorRandomContiguous:()=>a1,visitorRow:()=>o1});var Hy=e=>e===void 0?!1:"x"in e&&"y"in e,Ky=e=>!(e===void 0||e[1]===void 0),Yy=(e,r)=>{if(r===void 0||e===void 0)return!1;if("rows"in e&&"cols"in e)if("rows"in r&&"cols"in r){if(e.rows!==r.rows||e.cols!==r.cols)return!1}else return!1;if("size"in e)if("size"in r){if(e.size!==r.size)return!1}else return!1;return!0},ku=e=>`Cell{${e.x},${e.y}}`,Lu=(e,r)=>r===void 0||e===void 0?!1:e.x===r.x&&e.y===r.y,xe=(e,r="Param",n)=>{if(e===void 0)throw new Error(r+" is undefined. Expecting {x,y}");if(e.x===void 0)throw new Error(r+".x is undefined");if(e.y===void 0)throw new Error(r+".y is undefined");if(Number.isNaN(e.x))throw new Error(r+".x is NaN");if(Number.isNaN(e.y))throw new Error(r+".y is NaN");if(!Number.isInteger(e.x))throw new TypeError(r+".x is non-integer");if(!Number.isInteger(e.y))throw new TypeError(r+".y is non-integer");if(n!==void 0&&!Vu(n,e))throw new Error(`${r} is outside of grid. Cell: ${e.x},${e.y} Grid: ${n.cols}, ${n.rows}`)},Ut=(e,r="Param")=>{if(e===void 0)throw new Error(`${r} is undefined. Expecting grid.`);if(!("rows"in e))throw new Error(`${r}.rows is undefined`);if(!("cols"in e))throw new Error(`${r}.cols is undefined`);if(!Number.isInteger(e.rows))throw new TypeError(`${r}.rows is not an integer`);if(!Number.isInteger(e.cols))throw new TypeError(`${r}.cols is not an integer`)},Vu=(e,r)=>!(r.x<0||r.y<0||r.x>=e.cols||r.y>=e.rows),Fu=(e,r)=>{xe(r);const n=e.size,i=r.x*n,a=r.y*n;return _e({x:i,y:a},n,n)};function*Zy(e){for(const r of bt(e))yield Fu(e,r)}var Xy=(e,r)=>{const n=[];for(let i=0;i<e.rows;i++)if(n[i]=Array.from({length:e.cols}),r)for(let a=0;a<e.cols;a++)n[i][a]=r;return n},qu=(e,r)=>{const n=e.size;if(x(n,"positive","grid.size"),r.x<0||r.y<0)return;const i=Math.floor(r.x/n),a=Math.floor(r.y/n);if(!(i>=e.cols)&&!(a>=e.rows))return{x:i,y:a}},qr=Object.freeze(["n","ne","nw","e","s","se","sw","w"]),Du=Object.freeze(["n","e","s","w"]),Gu=(e,r,n="undefined",i)=>{const a=i??qr,s=a.map(o=>wt(e,r,Dr(o),n));return ei(a,s)};function*Wy(e,r,n="undefined",i){const s=(i??qr).map(o=>wt(e,r,Dr(o),n));for(const o of s)o!==void 0&&(yield o)}var Uy=(e,r)=>{xe(r);const n=e.size,i=r.x*n,a=r.y*n;return Object.freeze({x:i+n/2,y:a+n/2})},Qy=(e,r)=>{xe(e),xe(r);let n=e.x,i=e.y;const a=Math.abs(r.x-n),s=Math.abs(r.y-i),o=n<r.x?1:-1,u=i<r.y?1:-1;let l=a-s;const f=[];for(;f.push(Object.freeze({x:n,y:i})),!(n===r.x&&i===r.y);){const c=2*l;c>-s&&(l-=s,n+=o),c<a&&(l+=a,i+=u)}return f},e1=(e,r,n,i="stop")=>{Ut(e,"grid"),xe(r,"start"),Y(n,"aboveZero","steps");const a=qr,s=a.map(u=>Dr(u,n)),o=a.map((u,l)=>wt(e,r,s[l],i));return ei(a,o)},Dr=(e,r=1)=>{let n;switch(e){case"n":{n={x:0,y:-1*r};break}case"ne":{n={x:1*r,y:-1*r};break}case"e":{n={x:1*r,y:0};break}case"se":{n={x:1*r,y:1*r};break}case"s":{n={x:0,y:1*r};break}case"sw":{n={x:-1*r,y:1*r};break}case"w":{n={x:-1*r,y:0};break}case"nw":{n={x:-1*r,y:-1*r};break}default:n={x:0,y:0}}return Object.freeze(n)},t1=function(e,r,n=!1){const i=[];if(e.x===r.x){const a=n?r.y+1:r.y;for(let s=e.y;s<a;s++)i.push({x:e.x,y:s})}else if(e.y===r.y){const a=n?r.x+1:r.x;for(let s=e.x;s<a;s++)i.push({x:s,y:e.y})}else throw new Error(`Only does vertical and horizontal: ${e.x},${e.y} - ${r.x},${r.y}`);return i},wt=function(e,r,n,i="undefined"){xe(r,"start",e),xe(n),Ut(e,"grid");let a=r.x,s=r.y;switch(i){case"wrap":{a+=n.x%e.cols,s+=n.y%e.rows,a<0?a=e.cols+a:a>=e.cols&&(a-=e.cols),s<0?s=e.rows+s:s>=e.rows&&(s-=e.rows);break}case"stop":{a+=n.x,s+=n.y,a=Yi(a,e.cols),s=Yi(s,e.rows);break}case"undefined":{if(a+=n.x,s+=n.y,a<0||s<0||a>=e.cols||s>=e.rows)return;break}case"unbounded":{a+=n.x,s+=n.y;break}default:throw new Error(`Unknown BoundsLogic case ${i}`)}return Object.freeze({x:a,y:s})},r1=(e,r,n,i)=>{const a=Gu(e,r,i,n);return Object.entries(a).filter(o=>Ky(o))},et=function*(e,r,n,i={}){Ut(r,"grid"),xe(n,"start",r);const a=i.visited??io(ku),s=e.options??((f,c)=>r1(f,c,Du,"undefined"));if(!Hy(n))throw new Error("'start' parameter is undefined or not a cell");let o=[n],u=[],l;for(;o.length>0;){if(l===void 0){const f=o.pop();if(f===void 0)break;l=f}if(!a.has(l)){a.add(l),yield l;const f=s(r,l).filter(c=>c[1]===void 0?!1:!a.has(c[1]));if(f.length===0)l!==void 0&&(o=o.filter(c=>Lu(c,l)));else for(const c of f)c!==void 0&&c[1]!==void 0&&u.push(c)}if(u=u.filter(f=>!a.has(f[1])),u.length===0)l=void 0;else{const f=e.select(u);f!==void 0&&(o.push(f[1]),l=f[1])}}},n1=(e,r,n={})=>et({select:i=>i.at(-1)},e,r,n),i1=(e,r,n={})=>et({select:i=>i[0]},e,r,n),Ju=e=>Ws(e),a1=(e,r,n={})=>et({select:Ju},e,r,n),s1=(e,r,n={})=>et({options:(i,a)=>{const s=[];for(const o of bt(i,a))s.push(["n",o]);return s},select:Ju},e,r,n),o1=(e,r,n={})=>{r||(r={x:0,y:0});const{reversed:i=!1}=n;return et({select:u=>u.find(l=>l[0]===(i?"w":"e")),options:(u,l)=>(i?l.x>0?l={x:l.x-1,y:l.y}:l.y>0?l={x:u.cols-1,y:l.y-1}:l={x:u.cols-1,y:u.rows-1}:l.x<u.rows-1?l={x:l.x+1,y:l.y}:l.y<u.rows-1?l={x:0,y:l.y+1}:l={x:0,y:0},[[i?"w":"e",l]])},e,r,n)},u1=(e,r,n,i)=>{Y(n,"","steps");const a={reversed:n<0};n=Math.abs(n);let s=r,o=i(e,r,a);o.next();let u=0;for(;u<n;){u++;const{value:l}=o.next();if(l)s=l,a.debug&&console.log(`stepsMade: ${u} cell: ${s.x}, ${s.y} reverse: ${a.reversed}`);else if(n>=e.cols*e.rows)n-=e.cols*e.rows,u=0,o=i(e,r,a),o.next(),s=r,a.debug&&console.log(`resetting visitor to ${n}`);else throw new Error("Value not received by visitor")}return s},l1=(e,r,n={})=>{const{reversed:i=!1}=n;return et({select:s=>s.find(o=>o[0]===(i?"n":"s")),options:(s,o)=>(i?o.y>0?o={x:o.x,y:o.y-1}:o.x===0?o={x:s.cols-1,y:s.rows-1}:o={x:o.x-1,y:s.rows-1}:o.y<s.rows-1?o={x:o.x,y:o.y+1}:o.x<s.cols-1?o={x:o.x+1,y:0}:o={x:0,y:0},[[i?"n":"s",o]])},e,r,n)},f1=function*(e,r){r||(r={x:0,y:0});let n=r.y,i=[];for(const a of bt(e,r))a.y===n?i.push(a):(yield i,i=[a],n=a.y);i.length>0&&(yield i)},bt=function*(e,r){r||(r={x:0,y:0}),Ut(e,"grid"),xe(r,"start",e);let{x:n,y:i}=r,a=!0;do yield{x:n,y:i},n++,n===e.cols&&(i++,n=0),i===e.rows&&(i=0,n=0),n===r.x&&i===r.y&&(a=!1);while(a)},c1=(e,r)=>{const n={cols:r,rows:Math.ceil(e.length/r)};return(a,s)=>{const o=Gr(n,a,s);if(o!==void 0)return e[o]}},h1=(e,r)=>(i,a)=>{const s=qu(e,a);if(s===void 0)throw new Error(`Position does not exist. Pos: ${JSON.stringify(a)} Grid: ${JSON.stringify(e)}`);r[s.y][s.x]=i};function*d1(e,r,n,i){if(typeof e>"u")throw new TypeError("First parameter is undefined, expected an array");if(e===null)throw new Error("First parameter is null, expected an array");if(!Array.isArray(e))throw new Error("First parameter should be an array");if(Y(r,"aboveZero","cols"),e.length===0)return;const a=i?.boundsWrap??"stop",s=Math.ceil(e.length/r),o={cols:r,rows:s};n===void 0&&(n=bt);const u=n(o,{x:0,y:0},i);for(const l of u){const f=Gr(o,l,a);if(f===void 0)return;yield[e[f],f]}}var Gr=(e,r,n)=>{if(Ut(e,"grid"),r.x<0)switch(n){case"stop":{r={...r,x:0};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r=wt(e,{x:0,y:r.y},{x:r.x,y:0},"wrap");break}}if(r.y<0)switch(n){case"stop":{r={...r,y:0};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r={...r,y:e.rows+r.y};break}}if(r.x>=e.cols)switch(n){case"stop":{r={...r,x:e.cols-1};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r={...r,x:r.x%e.cols};break}}if(r.y>=e.rows)switch(n){case"stop":{r={...r,y:e.rows-1};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r={...r,y:r.y%e.rows};break}}return r.y*e.cols+r.x},y1=(e,r)=>{let n=0;return n=typeof e=="number"?e:e.cols,Y(n,"aboveZero","colsOrGrid"),{x:r%n,y:Math.floor(r/n)}},Hu={};S(Hu,{computeQuadraticSimple:()=>M1,cubic:()=>N1,isCubicBezier:()=>Ru,isQuadraticBezier:()=>Fr,quadratic:()=>Xu,quadraticBend:()=>E1,quadraticSimple:()=>vi,quadraticToSvgString:()=>Zu,toPath:()=>z1});var{abs:St,cos:Me,sin:at,acos:m1,atan2:Pt,sqrt:Be,pow:ie}=Math;function $t(e){return e<0?-ie(-e,1/3):ie(e,1/3)}var Ku=Math.PI,dr=2*Ku,Oe=Ku/2,p1=1e-6,mn=Number.MAX_SAFE_INTEGER||9007199254740991,pn=Number.MIN_SAFE_INTEGER||-9007199254740991,v1={x:0,y:0,z:0},p={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,r){const n=r(e);let i=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(i+=n.z*n.z),Be(i)},compute:function(e,r,n){if(e===0)return r[0].t=0,r[0];const i=r.length-1;if(e===1)return r[i].t=1,r[i];const a=1-e;let s=r;if(i===0)return r[0].t=e,r[0];if(i===1){const u={x:a*s[0].x+e*s[1].x,y:a*s[0].y+e*s[1].y,t:e};return n&&(u.z=a*s[0].z+e*s[1].z),u}if(i<4){let u=a*a,l=e*e,f,c,h,d=0;i===2?(s=[s[0],s[1],s[2],v1],f=u,c=a*e*2,h=l):i===3&&(f=u*a,c=u*e*3,h=a*l*3,d=e*l);const y={x:f*s[0].x+c*s[1].x+h*s[2].x+d*s[3].x,y:f*s[0].y+c*s[1].y+h*s[2].y+d*s[3].y,t:e};return n&&(y.z=f*s[0].z+c*s[1].z+h*s[2].z+d*s[3].z),y}const o=JSON.parse(JSON.stringify(r));for(;o.length>1;){for(let u=0;u<o.length-1;u++)o[u]={x:o[u].x+(o[u+1].x-o[u].x)*e,y:o[u].y+(o[u+1].y-o[u].y)*e},typeof o[u].z<"u"&&(o[u].z=o[u].z+(o[u+1].z-o[u].z)*e);o.splice(o.length-1,1)}return o[0].t=e,o[0]},computeWithRatios:function(e,r,n,i){const a=1-e,s=n,o=r;let u=s[0],l=s[1],f=s[2],c=s[3],h;if(u*=a,l*=e,o.length===2)return h=u+l,{x:(u*o[0].x+l*o[1].x)/h,y:(u*o[0].y+l*o[1].y)/h,z:i?(u*o[0].z+l*o[1].z)/h:!1,t:e};if(u*=a,l*=2*a,f*=e*e,o.length===3)return h=u+l+f,{x:(u*o[0].x+l*o[1].x+f*o[2].x)/h,y:(u*o[0].y+l*o[1].y+f*o[2].y)/h,z:i?(u*o[0].z+l*o[1].z+f*o[2].z)/h:!1,t:e};if(u*=a,l*=1.5*a,f*=3*a,c*=e*e*e,o.length===4)return h=u+l+f+c,{x:(u*o[0].x+l*o[1].x+f*o[2].x+c*o[3].x)/h,y:(u*o[0].y+l*o[1].y+f*o[2].y+c*o[3].y)/h,z:i?(u*o[0].z+l*o[1].z+f*o[2].z+c*o[3].z)/h:!1,t:e}},derive:function(e,r){const n=[];for(let i=e,a=i.length,s=a-1;a>1;a--,s--){const o=[];for(let u=0,l;u<s;u++)l={x:s*(i[u+1].x-i[u].x),y:s*(i[u+1].y-i[u].y)},r&&(l.z=s*(i[u+1].z-i[u].z)),o.push(l);n.push(o),i=o}return n},between:function(e,r,n){return r<=e&&e<=n||p.approximately(e,r)||p.approximately(e,n)},approximately:function(e,r,n){return St(e-r)<=(n||p1)},length:function(e){const n=p.Tvalues.length;let i=0;for(let a=0,s;a<n;a++)s=.5*p.Tvalues[a]+.5,i+=p.Cvalues[a]*p.arcfn(s,e);return .5*i},map:function(e,r,n,i,a){const s=n-r,o=a-i,u=e-r,l=u/s;return i+o*l},lerp:function(e,r,n){const i={x:r.x+e*(n.x-r.x),y:r.y+e*(n.y-r.y)};return r.z!==void 0&&n.z!==void 0&&(i.z=r.z+e*(n.z-r.z)),i},pointToString:function(e){let r=e.x+"/"+e.y;return typeof e.z<"u"&&(r+="/"+e.z),r},pointsToString:function(e){return"["+e.map(p.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,r,n){const i=r.x-e.x,a=r.y-e.y,s=n.x-e.x,o=n.y-e.y,u=i*o-a*s,l=i*s+a*o;return Pt(u,l)},round:function(e,r){const n=""+e,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+r))},dist:function(e,r){const n=e.x-r.x,i=e.y-r.y;return Be(n*n+i*i)},closest:function(e,r){let n=ie(2,63),i,a;return e.forEach(function(s,o){a=p.dist(r,s),a<n&&(n=a,i=o)}),{mdist:n,mpos:i}},abcratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const n=ie(e,r)+ie(1-e,r),i=n-1;return St(i/n)},projectionratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const n=ie(1-e,r),i=ie(e,r)+n;return n/i},lli8:function(e,r,n,i,a,s,o,u){const l=(e*i-r*n)*(a-o)-(e-n)*(a*u-s*o),f=(e*i-r*n)*(s-u)-(r-i)*(a*u-s*o),c=(e-n)*(s-u)-(r-i)*(a-o);return c==0?!1:{x:l/c,y:f/c}},lli4:function(e,r,n,i){const a=e.x,s=e.y,o=r.x,u=r.y,l=n.x,f=n.y,c=i.x,h=i.y;return p.lli8(a,s,o,u,l,f,c,h)},lli:function(e,r){return p.lli4(e,e.c,r,r.c)},makeline:function(e,r){return new Jr(e.x,e.y,(e.x+r.x)/2,(e.y+r.y)/2,r.x,r.y)},findbbox:function(e){let r=mn,n=mn,i=pn,a=pn;return e.forEach(function(s){const o=s.bbox();r>o.x.min&&(r=o.x.min),n>o.y.min&&(n=o.y.min),i<o.x.max&&(i=o.x.max),a<o.y.max&&(a=o.y.max)}),{x:{min:r,mid:(r+i)/2,max:i,size:i-r},y:{min:n,mid:(n+a)/2,max:a,size:a-n}}},shapeintersections:function(e,r,n,i,a){if(!p.bboxoverlap(r,i))return[];const s=[],o=[e.startcap,e.forward,e.back,e.endcap],u=[n.startcap,n.forward,n.back,n.endcap];return o.forEach(function(l){l.virtual||u.forEach(function(f){if(f.virtual)return;const c=l.intersects(f,a);c.length>0&&(c.c1=l,c.c2=f,c.s1=e,c.s2=n,s.push(c))})}),s},makeshape:function(e,r,n){const i=r.points.length,a=e.points.length,s=p.makeline(r.points[i-1],e.points[0]),o=p.makeline(e.points[a-1],r.points[0]),u={startcap:s,forward:e,back:r,endcap:o,bbox:p.findbbox([s,e,r,o])};return u.intersections=function(l){return p.shapeintersections(u,u.bbox,l,l.bbox,n)},u},getminmax:function(e,r,n){if(!n)return{min:0,max:0};let i=mn,a=pn,s,o;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let u=0,l=n.length;u<l;u++)s=n[u],o=e.get(s),o[r]<i&&(i=o[r]),o[r]>a&&(a=o[r]);return{min:i,mid:(i+a)/2,max:a,size:a-i}},align:function(e,r){const n=r.p1.x,i=r.p1.y,a=-Pt(r.p2.y-i,r.p2.x-n),s=function(o){return{x:(o.x-n)*Me(a)-(o.y-i)*at(a),y:(o.x-n)*at(a)+(o.y-i)*Me(a)}};return e.map(s)},roots:function(e,r){r=r||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=e.length-1,i=p.align(e,r),a=function(C){return 0<=C&&C<=1};if(n===2){const C=i[0].y,A=i[1].y,V=i[2].y,T=C-2*A+V;if(T!==0){const J=-Be(A*A-C*V),H=-C+A,ye=-(J+H)/T,le=-(-J+H)/T;return[ye,le].filter(a)}else if(A!==V&&T===0)return[(2*A-V)/(2*A-2*V)].filter(a);return[]}const s=i[0].y,o=i[1].y,u=i[2].y,l=i[3].y;let f=-s+3*o-3*u+l,c=3*s-6*o+3*u,h=-3*s+3*o,d=s;if(p.approximately(f,0)){if(p.approximately(c,0))return p.approximately(h,0)?[]:[-d/h].filter(a);const C=Be(h*h-4*c*d),A=2*c;return[(C-h)/A,(-h-C)/A].filter(a)}c/=f,h/=f,d/=f;const y=(3*h-c*c)/3,m=y/3,v=(2*c*c*c-9*c*h+27*d)/27,w=v/2,E=w*w+m*m*m;let z,P,B,b,_;if(E<0){const C=-y/3,A=C*C*C,V=Be(A),T=-v/(2*V),J=T<-1?-1:T>1?1:T,H=m1(J),ye=$t(V),le=2*ye;return B=le*Me(H/3)-c/3,b=le*Me((H+dr)/3)-c/3,_=le*Me((H+2*dr)/3)-c/3,[B,b,_].filter(a)}else{if(E===0)return z=w<0?$t(-w):-$t(w),B=2*z-c/3,b=-z-c/3,[B,b].filter(a);{const C=Be(E);return z=$t(-w+C),P=$t(w+C),[z-P-c/3].filter(a)}}},droots:function(e){if(e.length===3){const r=e[0],n=e[1],i=e[2],a=r-2*n+i;if(a!==0){const s=-Be(n*n-r*i),o=-r+n,u=-(s+o)/a,l=-(-s+o)/a;return[u,l]}else if(n!==i&&a===0)return[(2*n-i)/(2*(n-i))];return[]}if(e.length===2){const r=e[0],n=e[1];return r!==n?[r/(r-n)]:[]}return[]},curvature:function(e,r,n,i,a){let s,o,u,l,f=0,c=0;const h=p.compute(e,r),d=p.compute(e,n),y=h.x*h.x+h.y*h.y;if(i?(s=Be(ie(h.y*d.z-d.y*h.z,2)+ie(h.z*d.x-d.z*h.x,2)+ie(h.x*d.y-d.x*h.y,2)),o=ie(y+h.z*h.z,3/2)):(s=h.x*d.y-h.y*d.x,o=ie(y,3/2)),s===0||o===0)return{k:0,r:0};if(f=s/o,c=o/s,!a){const m=p.curvature(e-.001,r,n,i,!0).k,v=p.curvature(e+.001,r,n,i,!0).k;l=(v-f+(f-m))/2,u=(St(v-f)+St(f-m))/2}return{k:f,r:c,dk:l,adk:u}},inflections:function(e){if(e.length<4)return[];const r=p.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=r[2].x*r[1].y,i=r[3].x*r[1].y,a=r[1].x*r[2].y,s=r[3].x*r[2].y,o=18*(-3*n+2*i+3*a-s),u=18*(3*n-i-3*a),l=18*(a-n);if(p.approximately(o,0)){if(!p.approximately(u,0)){let d=-l/u;if(0<=d&&d<=1)return[d]}return[]}const f=2*o;if(p.approximately(f,0))return[];const c=u*u-4*o*l;if(c<0)return[];const h=Math.sqrt(c);return[(h-u)/f,-(u+h)/f].filter(function(d){return 0<=d&&d<=1})},bboxoverlap:function(e,r){const n=["x","y"],i=n.length;for(let a=0,s,o,u,l;a<i;a++)if(s=n[a],o=e[s].mid,u=r[s].mid,l=(e[s].size+r[s].size)/2,St(o-u)>=l)return!1;return!0},expandbox:function(e,r){r.x.min<e.x.min&&(e.x.min=r.x.min),r.y.min<e.y.min&&(e.y.min=r.y.min),r.z&&r.z.min<e.z.min&&(e.z.min=r.z.min),r.x.max>e.x.max&&(e.x.max=r.x.max),r.y.max>e.y.max&&(e.y.max=r.y.max),r.z&&r.z.max>e.z.max&&(e.z.max=r.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,r,n){const i=e.bbox(),a=r.bbox(),s=1e5,o=n||.5;if(i.x.size+i.y.size<o&&a.x.size+a.y.size<o)return[(s*(e._t1+e._t2)/2|0)/s+"/"+(s*(r._t1+r._t2)/2|0)/s];let u=e.split(.5),l=r.split(.5),f=[{left:u.left,right:l.left},{left:u.left,right:l.right},{left:u.right,right:l.right},{left:u.right,right:l.left}];f=f.filter(function(h){return p.bboxoverlap(h.left.bbox(),h.right.bbox())});let c=[];return f.length===0||(f.forEach(function(h){c=c.concat(p.pairiteration(h.left,h.right,o))}),c=c.filter(function(h,d){return c.indexOf(h)===d})),c},getccenter:function(e,r,n){const i=r.x-e.x,a=r.y-e.y,s=n.x-r.x,o=n.y-r.y,u=i*Me(Oe)-a*at(Oe),l=i*at(Oe)+a*Me(Oe),f=s*Me(Oe)-o*at(Oe),c=s*at(Oe)+o*Me(Oe),h=(e.x+r.x)/2,d=(e.y+r.y)/2,y=(r.x+n.x)/2,m=(r.y+n.y)/2,v=h+u,w=d+l,E=y+f,z=m+c,P=p.lli8(h,d,v,w,y,m,E,z),B=p.dist(P,e);let b=Pt(e.y-P.y,e.x-P.x),_=Pt(r.y-P.y,r.x-P.x),C=Pt(n.y-P.y,n.x-P.x),A;return b<C?((b>_||_>C)&&(b+=dr),b>C&&(A=C,C=b,b=A)):C<_&&_<b?(A=C,C=b,b=A):C+=dr,P.s=b,P.e=C,P.r=B,P},numberSort:function(e,r){return e-r}},vn=class Yu{constructor(r){this.curves=[],this._3d=!1,r&&(this.curves=r,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(r){return p.pointsToString(r.points)}).join(", ")+"]"}addCurve(r){this.curves.push(r),this._3d=this._3d||r._3d}length(){return this.curves.map(function(r){return r.length()}).reduce(function(r,n){return r+n})}curve(r){return this.curves[r]}bbox(){const r=this.curves;for(var n=r[0].bbox(),i=1;i<r.length;i++)p.expandbox(n,r[i].bbox());return n}offset(r){const n=[];return this.curves.forEach(function(i){n.push(...i.offset(r))}),new Yu(n)}},{abs:Ct,min:Wa,max:Ua,cos:g1,sin:x1,acos:w1,sqrt:At}=Math,b1=Math.PI,Jr=class k{constructor(r){let n=r&&r.forEach?r:Array.from(arguments).slice(),i=!1;if(typeof n[0]=="object"){i=n.length;const y=[];n.forEach(function(m){["x","y","z"].forEach(function(v){typeof m[v]<"u"&&y.push(m[v])})}),n=y}let a=!1;const s=n.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(s!==6&&s!==8&&s!==9&&s!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!a&&(s===9||s===12)||r&&r[0]&&typeof r[0].z<"u",u=this.points=[];for(let y=0,m=o?3:2;y<s;y+=m){var l={x:n[y],y:n[y+1]};o&&(l.z=n[y+2]),u.push(l)}const f=this.order=u.length-1,c=this.dims=["x","y"];o&&c.push("z"),this.dimlen=c.length;const h=p.align(u,{p1:u[0],p2:u[f]}),d=p.dist(u[0],u[f]);this._linear=h.reduce((y,m)=>y+Ct(m.y),0)<d/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(r,n,i,a){if(typeof a>"u"&&(a=.5),a===0)return new k(n,n,i);if(a===1)return new k(r,n,n);const s=k.getABC(2,r,n,i,a);return new k(r,s.A,i)}static cubicFromPoints(r,n,i,a,s){typeof a>"u"&&(a=.5);const o=k.getABC(3,r,n,i,a);typeof s>"u"&&(s=p.dist(n,o.C));const u=s*(1-a)/a,l=p.dist(r,i),f=(i.x-r.x)/l,c=(i.y-r.y)/l,h=s*f,d=s*c,y=u*f,m=u*c,v={x:n.x-h,y:n.y-d},w={x:n.x+y,y:n.y+m},E=o.A,z={x:E.x+(v.x-E.x)/(1-a),y:E.y+(v.y-E.y)/(1-a)},P={x:E.x+(w.x-E.x)/a,y:E.y+(w.y-E.y)/a},B={x:r.x+(z.x-r.x)/a,y:r.y+(z.y-r.y)/a},b={x:i.x+(P.x-i.x)/(1-a),y:i.y+(P.y-i.y)/(1-a)};return new k(r,B,b,i)}static getUtils(){return p}getUtils(){return k.getUtils()}static get PolyBezier(){return vn}valueOf(){return this.toString()}toString(){return p.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const r=this.points,n=r[0].x,i=r[0].y,a=["M",n,i,this.order===2?"Q":"C"];for(let s=1,o=r.length;s<o;s++)a.push(r[s].x),a.push(r[s].y);return a.join(" ")}setRatios(r){if(r.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=r,this._lut=[]}verify(){const r=this.coordDigest();r!==this._print&&(this._print=r,this.update())}coordDigest(){return this.points.map(function(r,n){return""+n+r.x+r.y+(r.z?r.z:0)}).join("")}update(){this._lut=[],this.dpoints=p.derive(this.points,this._3d),this.computedirection()}computedirection(){const r=this.points,n=p.angle(r[0],r[this.order],r[1]);this.clockwise=n>0}length(){return p.length(this.derivative.bind(this))}static getABC(r=2,n,i,a,s=.5){const o=p.projectionratio(s,r),u=1-o,l={x:o*n.x+u*a.x,y:o*n.y+u*a.y},f=p.abcratio(s,r);return{A:{x:i.x+(i.x-l.x)/f,y:i.y+(i.y-l.y)/f},B:i,C:l,S:n,E:a}}getABC(r,n){n=n||this.get(r);let i=this.points[0],a=this.points[this.order];return k.getABC(this.order,i,n,a,r)}getLUT(r){if(this.verify(),r=r||100,this._lut.length===r+1)return this._lut;this._lut=[],r++,this._lut=[];for(let n=0,i,a;n<r;n++)a=n/(r-1),i=this.compute(a),i.t=a,this._lut.push(i);return this._lut}on(r,n){n=n||5;const i=this.getLUT(),a=[];for(let s=0,o,u=0;s<i.length;s++)o=i[s],p.dist(o,r)<n&&(a.push(o),u+=s/i.length);return a.length?t/=a.length:!1}project(r){const n=this.getLUT(),i=n.length-1,a=p.closest(n,r),s=a.mpos,o=(s-1)/i,u=(s+1)/i,l=.1/i;let f=a.mdist,c=o,h=c,d;f+=1;for(let y;c<u+l;c+=l)d=this.compute(c),y=p.dist(r,d),y<f&&(f=y,h=c);return h=h<0?0:h>1?1:h,d=this.compute(h),d.t=h,d.d=f,d}get(r){return this.compute(r)}point(r){return this.points[r]}compute(r){return this.ratios?p.computeWithRatios(r,this.points,this.ratios,this._3d):p.compute(r,this.points,this._3d,this.ratios)}raise(){const r=this.points,n=[r[0]],i=r.length;for(let a=1,s,o;a<i;a++)s=r[a],o=r[a-1],n[a]={x:(i-a)/i*s.x+a/i*o.x,y:(i-a)/i*s.y+a/i*o.y};return n[i]=r[i-1],new k(n)}derivative(r){return p.compute(r,this.dpoints[0],this._3d)}dderivative(r){return p.compute(r,this.dpoints[1],this._3d)}align(){let r=this.points;return new k(p.align(r,{p1:r[0],p2:r[r.length-1]}))}curvature(r){return p.curvature(r,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return p.inflections(this.points)}normal(r){return this._3d?this.__normal3(r):this.__normal2(r)}__normal2(r){const n=this.derivative(r),i=At(n.x*n.x+n.y*n.y);return{t:r,x:-n.y/i,y:n.x/i}}__normal3(r){const n=this.derivative(r),i=this.derivative(r+.01),a=At(n.x*n.x+n.y*n.y+n.z*n.z),s=At(i.x*i.x+i.y*i.y+i.z*i.z);n.x/=a,n.y/=a,n.z/=a,i.x/=s,i.y/=s,i.z/=s;const o={x:i.y*n.z-i.z*n.y,y:i.z*n.x-i.x*n.z,z:i.x*n.y-i.y*n.x},u=At(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=u,o.y/=u,o.z/=u;const l=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:r,x:l[0]*n.x+l[1]*n.y+l[2]*n.z,y:l[3]*n.x+l[4]*n.y+l[5]*n.z,z:l[6]*n.x+l[7]*n.y+l[8]*n.z}}hull(r){let n=this.points,i=[],a=[],s=0;for(a[s++]=n[0],a[s++]=n[1],a[s++]=n[2],this.order===3&&(a[s++]=n[3]);n.length>1;){i=[];for(let o=0,u,l=n.length-1;o<l;o++)u=p.lerp(r,n[o],n[o+1]),a[s++]=u,i.push(u);n=i}return a}split(r,n){if(r===0&&!!n)return this.split(n).left;if(n===1)return this.split(r).right;const i=this.hull(r),a={left:this.order===2?new k([i[0],i[3],i[5]]):new k([i[0],i[4],i[7],i[9]]),right:this.order===2?new k([i[5],i[4],i[2]]):new k([i[9],i[8],i[6],i[3]]),span:i};return a.left._t1=p.map(0,0,1,this._t1,this._t2),a.left._t2=p.map(r,0,1,this._t1,this._t2),a.right._t1=p.map(r,0,1,this._t1,this._t2),a.right._t2=p.map(1,0,1,this._t1,this._t2),n?(n=p.map(n,r,1,0,1),a.right.split(n).left):a}extrema(){const r={};let n=[];return this.dims.forEach(function(i){let a=function(o){return o[i]},s=this.dpoints[0].map(a);r[i]=p.droots(s),this.order===3&&(s=this.dpoints[1].map(a),r[i]=r[i].concat(p.droots(s))),r[i]=r[i].filter(function(o){return o>=0&&o<=1}),n=n.concat(r[i].sort(p.numberSort))}.bind(this)),r.values=n.sort(p.numberSort).filter(function(i,a){return n.indexOf(i)===a}),r}bbox(){const r=this.extrema(),n={};return this.dims.forEach(function(i){n[i]=p.getminmax(this,i,r[i])}.bind(this)),n}overlaps(r){const n=this.bbox(),i=r.bbox();return p.bboxoverlap(n,i)}offset(r,n){if(typeof n<"u"){const i=this.get(r),a=this.normal(r),s={c:i,n:a,x:i.x+a.x*n,y:i.y+a.y*n};return this._3d&&(s.z=i.z+a.z*n),s}if(this._linear){const i=this.normal(0),a=this.points.map(function(s){const o={x:s.x+r*i.x,y:s.y+r*i.y};return s.z&&i.z&&(o.z=s.z+r*i.z),o});return[new k(a)]}return this.reduce().map(function(i){return i._linear?i.offset(r)[0]:i.scale(r)})}simple(){if(this.order===3){const a=p.angle(this.points[0],this.points[3],this.points[1]),s=p.angle(this.points[0],this.points[3],this.points[2]);if(a>0&&s<0||a<0&&s>0)return!1}const r=this.normal(0),n=this.normal(1);let i=r.x*n.x+r.y*n.y;return this._3d&&(i+=r.z*n.z),Ct(w1(i))<b1/3}reduce(){let r,n=0,i=0,a=.01,s,o=[],u=[],l=this.extrema().values;for(l.indexOf(0)===-1&&(l=[0].concat(l)),l.indexOf(1)===-1&&l.push(1),n=l[0],r=1;r<l.length;r++)i=l[r],s=this.split(n,i),s._t1=n,s._t2=i,o.push(s),n=i;return o.forEach(function(f){for(n=0,i=0;i<=1;)for(i=n+a;i<=1+a;i+=a)if(s=f.split(n,i),!s.simple()){if(i-=a,Ct(n-i)<a)return[];s=f.split(n,i),s._t1=p.map(n,0,1,f._t1,f._t2),s._t2=p.map(i,0,1,f._t1,f._t2),u.push(s),n=i;break}n<1&&(s=f.split(n,1),s._t1=p.map(n,0,1,f._t1,f._t2),s._t2=f._t2,u.push(s))}),u}translate(r,n,i){i=typeof i=="number"?i:n;const a=this.order;let s=this.points.map((o,u)=>(1-u/a)*n+u/a*i);return new k(this.points.map((o,u)=>({x:o.x+r.x*s[u],y:o.y+r.y*s[u]})))}scale(r){const n=this.order;let i=!1;if(typeof r=="function"&&(i=r),i&&n===2)return this.raise().scale(i);const a=this.clockwise,s=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):r,i?i(1):r);const o=i?i(0):r,u=i?i(1):r,l=[this.offset(0,10),this.offset(1,10)],f=[],c=p.lli4(l[0],l[0].c,l[1],l[1].c);if(!c)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){const d=f[h*n]=p.copy(s[h*n]);d.x+=(h?u:o)*l[h].n.x,d.y+=(h?u:o)*l[h].n.y}),i?([0,1].forEach(function(h){if(!(n===2&&!!h)){var d=s[h+1],y={x:d.x-c.x,y:d.y-c.y},m=i?i((h+1)/n):r;i&&!a&&(m=-m);var v=At(y.x*y.x+y.y*y.y);y.x/=v,y.y/=v,f[h+1]={x:d.x+m*y.x,y:d.y+m*y.y}}}),new k(f)):([0,1].forEach(h=>{if(n===2&&!!h)return;const d=f[h*n],y=this.derivative(h),m={x:d.x+y.x,y:d.y+y.y};f[h+1]=p.lli4(d,m,c,s[h+1])}),new k(f))}outline(r,n,i,a){if(n=n===void 0?r:n,this._linear){const b=this.normal(0),_=this.points[0],C=this.points[this.points.length-1];let A,V,T;i===void 0&&(i=r,a=n),A={x:_.x+b.x*r,y:_.y+b.y*r},T={x:C.x+b.x*i,y:C.y+b.y*i},V={x:(A.x+T.x)/2,y:(A.y+T.y)/2};const J=[A,V,T];A={x:_.x-b.x*n,y:_.y-b.y*n},T={x:C.x-b.x*a,y:C.y-b.y*a},V={x:(A.x+T.x)/2,y:(A.y+T.y)/2};const H=[T,V,A],ye=p.makeline(H[2],J[0]),le=p.makeline(J[2],H[0]),nr=[ye,new k(J),le,new k(H)];return new vn(nr)}const s=this.reduce(),o=s.length,u=[];let l=[],f,c=0,h=this.length();const d=typeof i<"u"&&typeof a<"u";function y(b,_,C,A,V){return function(T){const J=A/C,H=(A+V)/C,ye=_-b;return p.map(T,0,1,b+J*ye,b+H*ye)}}s.forEach(function(b){const _=b.length();d?(u.push(b.scale(y(r,i,h,c,_))),l.push(b.scale(y(-n,-a,h,c,_)))):(u.push(b.scale(r)),l.push(b.scale(-n))),c+=_}),l=l.map(function(b){return f=b.points,f[3]?b.points=[f[3],f[2],f[1],f[0]]:b.points=[f[2],f[1],f[0]],b}).reverse();const m=u[0].points[0],v=u[o-1].points[u[o-1].points.length-1],w=l[o-1].points[l[o-1].points.length-1],E=l[0].points[0],z=p.makeline(w,m),P=p.makeline(v,E),B=[z].concat(u).concat([P]).concat(l);return new vn(B)}outlineshapes(r,n,i){n=n||r;const a=this.outline(r,n).curves,s=[];for(let o=1,u=a.length;o<u/2;o++){const l=p.makeshape(a[o],a[u-o],i);l.startcap.virtual=o>1,l.endcap.virtual=o<u/2-1,s.push(l)}return s}intersects(r,n){return r?r.p1&&r.p2?this.lineIntersects(r):(r instanceof k&&(r=r.reduce()),this.curveintersects(this.reduce(),r,n)):this.selfintersects(n)}lineIntersects(r){const n=Wa(r.p1.x,r.p2.x),i=Wa(r.p1.y,r.p2.y),a=Ua(r.p1.x,r.p2.x),s=Ua(r.p1.y,r.p2.y);return p.roots(this.points,r).filter(o=>{var u=this.get(o);return p.between(u.x,n,a)&&p.between(u.y,i,s)})}selfintersects(r){const n=this.reduce(),i=n.length-2,a=[];for(let s=0,o,u,l;s<i;s++)u=n.slice(s,s+1),l=n.slice(s+2),o=this.curveintersects(u,l,r),a.push(...o);return a}curveintersects(r,n,i){const a=[];r.forEach(function(o){n.forEach(function(u){o.overlaps(u)&&a.push({left:o,right:u})})});let s=[];return a.forEach(function(o){const u=p.pairiteration(o.left,o.right,i);u.length>0&&(s=s.concat(u))}),s}arcs(r){return r=r||.5,this._iterate(r,[])}_error(r,n,i,a){const s=(a-i)/4,o=this.get(i+s),u=this.get(a-s),l=p.dist(r,n),f=p.dist(r,o),c=p.dist(r,u);return Ct(f-l)+Ct(c-l)}_iterate(r,n){let i=0,a=1,s;do{s=0,a=1;let o=this.get(i),u,l,f,c,h=!1,d=!1,y,m=a,v=1;do if(d=h,c=f,m=(i+a)/2,u=this.get(m),l=this.get(a),f=p.getccenter(o,u,l),f.interval={start:i,end:a},h=this._error(f,o,i,a)<=r,y=d&&!h,y||(v=a),h){if(a>=1){if(f.interval.end=v=1,c=f,a>1){let E={x:f.x+f.r*g1(f.e),y:f.y+f.r*x1(f.e)};f.e+=p.angle({x:f.x,y:f.y},E,this.get(1))}break}a=a+(a-i)/2}else a=m;while(!y&&s++<100);if(s>=100)break;c=c||f,n.push(c),i=v}while(a<1);return n}},E1=(e,r,n=0)=>vi(e,r,n),vi=(e,r,n=0)=>{if(Number.isNaN(n))throw new Error("bend is NaN");if(n<-1||n>1)throw new Error("Expects bend range of -1 to 1");const i=ve(.5,e,r);let a=i;r.y<e.y?a=n>0?{x:Math.min(e.x,r.x),y:Math.min(e.y,r.y)}:{x:Math.max(e.x,r.x),y:Math.max(e.y,r.y)}:a=n>0?{x:Math.max(e.x,r.x),y:Math.min(e.y,r.y)}:{x:Math.min(e.x,r.x),y:Math.max(e.y,r.y)};const s=ve(Math.abs(n),i,a);return Xu(e,r,s)},M1=(e,r,n,i)=>{const a=vi(e,r,n);return new Jr(a.a,a.quadratic,a.b).compute(i)},Zu=(e,r,n)=>[`M ${e.x} ${e.y} Q ${n.x} ${n.y} ${r.x} ${r.y}`],z1=e=>{if(Ru(e))return S1(e);if(Fr(e))return P1(e);throw new Error("Unknown bezier type")},N1=(e,r,n,i)=>({a:Object.freeze(e),b:Object.freeze(r),cubic1:Object.freeze(n),cubic2:Object.freeze(i)}),S1=e=>{const{a:r,cubic1:n,cubic2:i,b:a}=e,s=new Jr(r,n,i,a);return Object.freeze({...e,length:()=>s.length(),interpolate:o=>s.compute(o),nearest:o=>{throw new Error("not implemented")},bbox:()=>{const{x:o,y:u}=s.bbox(),l=o.size,f=u.size;if(l===void 0)throw new Error("x.size not present on calculated bbox");if(f===void 0)throw new Error("x.size not present on calculated bbox");return _e({x:o.min,y:u.min},l,f)},relativePosition:(o,u)=>{throw new Error("Not implemented")},distanceToPoint:o=>{throw new Error("Not implemented")},toSvgString:()=>["brrup"],kind:"bezier/cubic"})},Xu=(e,r,n)=>({a:Object.freeze(e),b:Object.freeze(r),quadratic:Object.freeze(n)}),P1=e=>{const{a:r,b:n,quadratic:i}=e,a=new Jr(r,i,n);return Object.freeze({...e,length:()=>a.length(),interpolate:s=>a.compute(s),nearest:s=>{throw new Error("not implemented")},bbox:()=>{const{x:s,y:o}=a.bbox(),u=s.size,l=o.size;if(u===void 0)throw new Error("x.size not present on calculated bbox");if(l===void 0)throw new Error("x.size not present on calculated bbox");return _e({x:s.min,y:o.min},u,l)},distanceToPoint:s=>{throw new Error("Not implemented")},relativePosition:(s,o)=>{throw new Error("Not implemented")},toString:()=>a.toString(),toSvgString:()=>Zu(r,n,i),kind:"bezier/quadratic"})},Wu={};S(Wu,{bbox:()=>tl,computeDimensions:()=>Hr,distanceToPoint:()=>Qu,fromPaths:()=>al,guardContinuous:()=>nl,interpolate:()=>Uu,relativePosition:()=>el,setSegment:()=>$1,toString:()=>rl,toSvgString:()=>il});var $1=(e,r,n)=>{const i=[...e.segments];return i[r]=n,al(...i)},Uu=(e,r,n,i)=>{i===void 0&&(i=Hr(e));const a=r*(n?i.totalWidth:i.totalLength);let s=0;const o=n?i.widths:i.lengths;for(const[u,l]of o.entries())if(s+l>=a){let c=(a-s)/l;return c>1&&(c=1),e[u].interpolate(c)}else s+=l;return{x:0,y:0}},Qu=(e,r)=>{if(e.length===0)return 0;let n=e.map((i,a)=>({path:i,index:a,distance:i.distanceToPoint(r)}));if(n=Zt(n,"distance"),n.length===0)throw new Error("Could not look up distances");return n[0].distance},el=(e,r,n,i)=>{i===void 0&&(i=Hr(e));let a=e.map((f,c)=>({path:f,index:c,distance:f.distanceToPoint(r)}));if(a=Zt(a,"distance"),a.length<0)throw new Error("Point does not intersect with path");const s=a[0];if(s.distance>n)throw new Error(`Point does not intersect with path. Minimum distance: ${s.distance}, threshold: ${n}`);const o=s.path.relativePosition(r,n);let u=0;for(let f=0;f<s.index;f++)u+=i.lengths[f];u+=i.lengths[s.index]*o;const l=u/i.totalLength;return console.log(`acc: ${u} rel: ${l} on path: ${o} path: ${s.index}`),l},Hr=e=>{const r=e.map(s=>s.bbox().width),n=e.map(s=>s.length());let i=0,a=0;for(const s of n)i+=s;for(const s of r)a+=s;return{totalLength:i,totalWidth:a,widths:r,lengths:n}},tl=e=>{const n=e.map(i=>i.bbox()).flatMap(i=>ft(i));return Lr(...n)},rl=e=>e.map(r=>r.toString()).join(", "),nl=e=>{let r=In(e[0]);for(let n=1;n<e.length;n++){const i=_u(e[n]);if(!pe(i,r))throw new Error(`Path index ${n} does not start at prior path end. Start: ${i.x},${i.y} expected: ${r.x},${r.y}`);r=In(e[n])}},il=e=>e.flatMap(r=>r.toSvgString()),al=(...e)=>{nl(e);const r=Hr(e);return Object.freeze({segments:e,length:()=>r.totalLength,nearest:n=>{throw new Error("not implemented")},interpolate:(n,i=!1)=>Uu(e,n,i,r),relativePosition:(n,i)=>el(e,n,i,r),distanceToPoint:n=>Qu(e,n),bbox:()=>tl(e),toString:()=>rl(e),toSvgString:()=>il(e),kind:"compound"})},sl={};S(sl,{fromDegrees:()=>C1});var C1=(e,r,n=0,i=0,a=360)=>({radiusX:e,radiusY:r,rotation:Ze(n),startAngle:Ze(i),endAngle:Ze(a)}),ol={};S(ol,{rdpPerpendicularDistance:()=>_n,rdpShortestDistance:()=>Rn});var Rn=(e,r=.1)=>{const n=e[0],i=e.at(-1);if(e.length<3)return e;let a=-1,s=0;for(let o=1;o<e.length-1;o++){const u=j1(e[o],n,i);u>s&&(s=u,a=o)}if(s>r){const o=e.slice(0,a+1),u=e.slice(a),l=Rn(o,r),f=Rn(u,r);return[...l.slice(0,-1),...f]}else return[n,i]},_n=(e,r=.1)=>{const n=e[0],i=e.at(-1);if(e.length<3)return e;let a=-1,s=0;for(let o=1;o<e.length-1;o++){const u=A1(e[o],n,i);u>s&&(s=u,a=o)}if(s>r){const o=e.slice(0,a+1),u=e.slice(a),l=_n(o,r),f=_n(u,r);return[...l.slice(0,-1),...f]}else return[n,i]};function A1(e,r,n){let i,a,s;return r.x==n.x?i=Math.abs(e.x-r.x):(a=(n.y-r.y)/(n.x-r.x),s=r.y-a*r.x,i=Math.abs(a*e.x-e.y+s)/Math.sqrt(Math.pow(a,2)+1)),i}var j1=(e,r,n)=>{const i=I(r,n);if(i==0)return I(e,r);const a=((e.x-r.x)*(n.x-r.x)+(e.y-r.y)*(n.y-r.y))/i;return a<0?I(e,r):a>1?I(e,n):I(e,{x:r.x+a*(n.x-r.x),y:r.y+a*(n.y-r.y)})},ul={};S(ul,{Direction:()=>ll,QuadTreeNode:()=>fl,quadTree:()=>B1});var ll=(e=>(e[e.Nw=0]="Nw",e[e.Ne=1]="Ne",e[e.Sw=2]="Sw",e[e.Se=3]="Se",e))(ll||{}),B1=(e,r=[],n={})=>{const i={maxItems:n.maxItems??4,maxLevels:n.maxLevels??4},a=new fl(void 0,e,0,i);for(const s of r)a.add(s);return a},fl=class cl{constructor(r,n,i,a){this.boundary=n,this.level=i,this.opts=a,this.#r=r}#e=[];#t=[];#r;getLengthChildren(){return this.#t.length}*parents(){let r=this;for(;r.#r!==void 0;)yield r.#r,r=r.#r}getParent(){return this.#r}*children(){for(const r of this.#t)yield r}getValue(){return this.#e}getIdentity(){return this}direction(r){return this.#t[r]}add(r){if(!Mu(this.boundary,r))return!1;if(this.#t.length>0){for(const n of this.#t)n.add(r);return!0}if(this.#e.push(r),this.#e.length>this.opts.maxItems&&this.level<this.opts.maxLevels){this.#t.length===0&&this.#n();for(const n of this.#e)for(const i of this.#t)i.add(n);this.#e=[]}return!0}couldHold(r){return Wt(this.boundary,r)}#n(){const r=this.boundary.width/2,n=this.boundary.height/2,i=this.boundary.x,a=this.boundary.y,o=hi(i+r,a,i,a,i,a+n,i+r,a+n).map(u=>_e(u,r,n));this.#t=o.map(u=>new cl(this,u,this.level+1,this.opts))}},hl={};S(hl,{scaler:()=>I1});var O1=Object.freeze({width:Number.NaN,height:Number.NaN}),b2=Object.freeze({x:Number.NaN,y:Number.NaN,width:Number.NaN,height:Number.NaN}),I1=(e="both",r)=>{const n=r??O1;let i=1,a=1,s={x:1,y:1};const o=()=>{switch(e){case"height":return{x:a,y:a};case"width":return{x:i,y:i};case"min":return{x:Math.min(i,a),y:Math.min(i,a)};case"max":return{x:Math.max(i,a),y:Math.max(i,a)};default:return{x:i,y:a}}},u=(h,d,y,m)=>{let v=Number.NaN,w=Number.NaN,E=n.width,z=n.height;if(typeof h=="number")if(v=h,typeof d=="number"){if(w=d,y===void 0)return[v,w,E,z];if(Z(y))E=y.width,z=y.height;else if(typeof y=="number")if(E=y,typeof m=="number")z=m;else throw new TypeError("Missing final height value");else throw new Error("Missing valid output range")}else if(Z(d))E=d.width,z=d.height;else throw new Error("Expected input y or output Rect to follow first number parameter");else if(M(h)){if(v=h.x,w=h.y,d===void 0)return[v,w,E,z];if(Z(d))E=d.width,z=d.height;else if(typeof d=="number")if(E=d,typeof y=="number")z=y;else throw new TypeError("Expected height as third parameter after Point and output width");else throw new TypeError("Expected Rect or width as second parameter when first parameter is a Point")}else throw new Error("Expected input Point or x value as first parameter");return[v,w,E,z]},l=(h,d,y,m)=>{const v=u(h,d,y,m);return c(!0,...v)},f=(h,d,y,m)=>{const v=u(h,d,y,m);return c(!1,...v)},c=(h,d,y,m,v)=>{if(Number.isNaN(m))throw new Error("Output width range missing");if(Number.isNaN(v))throw new Error("Output height range missing");return(m!==i||v!==a)&&(i=m,a=v,s=o()),h?{x:d*s.x,y:y*s.y}:{x:d/s.x,y:y/s.y}};return{computeScale:o,rel:f,abs:l,width:n.width,height:n.height}},dl={};S(dl,{boxBlurKernel:()=>V1,convolve:()=>pl,convolveCell:()=>ml,convolveImage:()=>_1,edgeDetectionKernel:()=>k1,gaussianBlur3Kernel:()=>F1,gaussianBlur5Kernel:()=>q1,identityKernel:()=>T1,kernel2dToArray:()=>vl,multiply:()=>Qt,rgbReducer:()=>gl,sharpenKernel:()=>L1,unsharpMasking5Kernel:()=>D1});var R1={};S(R1,{accessor:()=>yl});var yl=e=>{const r={rows:e.width,cols:e.height},n=e.data;return(a,s)=>{const o=Gr(r,a,s);if(o===void 0)return;const u=o*4;return{r:n[u],g:n[u+1],b:n[u+2],opacity:n[u+3]}}},Qt=(e,r)=>{const n=e.length,i=e[0].length,a=[];for(let s=0;s<n;s++){a[s]=[];for(let o=0;o<i;o++)a[s][o]=e[s][o]*r}return a};function ml(e,r,n,i,a){const s=r.map(o=>{const u=wt(n,e,o[0],"stop");return u?[o[1],i(u,"undefined")]:[o[1],void 0]});return a(s)}function*_1(e,r){const n={rows:r.width,cols:r.height},i=yl(r);yield*pl(e,n,i,bt(n),gl)}function*pl(e,r,n,i,a,s){if(!s){const u=e.length,l=e[0].length;s={x:Math.floor(u/2),y:Math.floor(l/2)}}const o=vl(e,s);for(const u of i){const l=ml(u,o,r,n,a);yield[u,l]}}var vl=(e,r)=>{const n=[],i=e.length,a=e[0].length;r||(r={x:Math.floor(i/2),y:Math.floor(a/2)});for(let s=0;s<i;s++)for(let o=0;o<a;o++)n.push([{x:s-r.x,y:o-r.y},e[s][o]]);return n},gl=e=>{let r=0,n=0,i=0;for(const s of e){const o=s[1],u=s[0];o!==void 0&&o.opacity!==0&&u!==0&&(r+=o.r*u,n+=o.g*u,i+=o.b*u)}return{r,g:n,b:i,opacity:255}},T1=[[0,0,0],[0,1,0],[0,0,0]],k1=[[0,-1,0],[-1,4,-1],[0,-1,0]],L1=[[0,-1,0],[-1,5,-1],[0,-1,0]],V1=Qt([[1,1,1],[1,1,1],[1,1,1]],1/9),F1=Qt([[1,2,1],[2,4,2],[1,2,1]],1/16),q1=Qt([[1,4,6,4,1],[4,16,24,16,4],[6,24,36,24,6],[4,16,24,16,4],[1,4,6,4,1]],1/256),D1=Qt([[1,4,6,4,1],[4,16,24,16,4],[6,24,-476,24,6],[4,16,24,16,4],[1,4,6,4,1]],-1/256),xl={};S(xl,{bbox:()=>Ml,distanceCenter:()=>H1,fromDegrees:()=>G1,guard:()=>gi,interpolate:()=>xi,isArc:()=>wl,isEqual:()=>K1,isPositioned:()=>Ne,length:()=>El,point:()=>Sr,toLine:()=>bl,toPath:()=>J1,toSvg:()=>zl});var wl=e=>e.startRadian!==void 0&&e.endRadian!==void 0,Ne=e=>e.x!==void 0&&e.y!==void 0,Qa=Math.PI*2;function G1(e,r,n,i){const a={radius:e,startRadian:Ze(r),endRadian:Ze(n)};if(M(i)){N(i);const s={...a,x:i.x,y:i.y};return Object.freeze(s)}else return Object.freeze(a)}var bl=e=>Dt(Sr(e,e.startRadian),Sr(e,e.endRadian)),Sr=(e,r,n)=>{if(r>e.endRadian)throw new Error("angleRadian beyond end angle of arc");if(r<e.startRadian)throw new Error("angleRadian beyond start angle of arc");return n===void 0&&(n=Ne(e)?e:{x:0,y:0}),{x:Math.cos(r)*e.radius+n.x,y:Math.sin(r)*e.radius+n.y}},gi=e=>{if(e===void 0)throw new Error("Arc is undefined");if(Ne(e)&&N(e,"arc"),e.radius===void 0)throw new Error(`Arc radius is undefined (${JSON.stringify(e)})`);if(typeof e.radius!="number")throw new Error("Radius must be a number");if(Number.isNaN(e.radius))throw new Error("Radius is NaN");if(e.radius<=0)throw new Error("Radius must be greater than zero");if(e.startRadian===void 0)throw new Error("Arc is missing 'startRadian' field");if(e.endRadian===void 0)throw new Error("Arc is missing 'startRadian' field");if(Number.isNaN(e.endRadian))throw new Error("Arc endRadian is NaN");if(Number.isNaN(e.startRadian))throw new Error("Arc endRadian is NaN");if(e.startRadian>=e.endRadian)throw new Error("startRadian is expected to be les than endRadian")},xi=(e,r,n)=>(gi(r),Sr(r,r.startRadian+(r.endRadian-r.startRadian)*e,n)),J1=e=>(gi(e),Object.freeze({...e,nearest:r=>{throw new Error("not implemented")},interpolate:r=>xi(r,e),bbox:()=>Ml(e),length:()=>El(e),toSvgString:()=>zl(e),relativePosition:(r,n)=>{throw new Error("Not implemented")},distanceToPoint:r=>{throw new Error("Not implemented")},kind:"arc"})),El=e=>Qa*e.radius*((e.startRadian-e.endRadian)/Qa),Ml=e=>{if(Ne(e)){const r=xi(.5,e),n=bl(e);return Lr(r,n.a,n.b)}else return{width:e.radius*2,height:e.radius*2}},zl=(e,r,n,i,a)=>{if(wl(e))return Ne(e)?yr(e,e.radius,e.startRadian,e.endRadian,r):M(r)?yr(r,e.radius,e.startRadian,e.endRadian,n):yr({x:0,y:0},e.radius,e.startRadian,e.endRadian);if(n===void 0)throw new Error("startAngle undefined");if(i===void 0)throw new Error("endAngle undefined");if(M(e)){if(typeof r=="number"&&typeof n=="number"&&typeof i=="number")return yr(e,r,n,i,a);throw new TypeError("Expected (point, number, number, number). Missing a number param.")}else throw new Error("Expected (point, number, number, number). Missing first point.")},yr=(e,r,n,i,a)=>{(a===void 0||typeof a!="object")&&(a={});const s=i-n===360,o=ae(r,i-.01,e),u=ae(r,n,e),{largeArc:l=!1,sweep:f=!1}=a,c=[`
    M ${o.x} ${o.y}
    A ${r} ${r} 0 ${l?"1":"0"} ${f?"1":"0"} ${u.x} ${u.y},
  `];return s&&c.push("z"),c},H1=(e,r)=>I(e,r),K1=(e,r)=>e.radius!==r.radius?!1:Ne(e)&&Ne(r)?!(e.x!==r.x||e.y!==r.y||e.z!==r.z):!(!(!Ne(e)&&!Ne(r))||e.endRadian!==r.endRadian||e.startRadian!==r.startRadian),Nl={};S(Nl,{clampMagnitude:()=>nm,divide:()=>om,dotProduct:()=>rm,fromLineCartesian:()=>W1,fromLinePolar:()=>U1,fromPointPolar:()=>Sl,fromRadians:()=>Z1,multiply:()=>sm,normalise:()=>Q1,quadrantOffsetAngle:()=>em,subtract:()=>am,sum:()=>im,toCartesian:()=>Ae,toPolar:()=>er,toRadians:()=>X1,toString:()=>tm});var Y1=Object.freeze({x:0,y:0}),vr=Math.PI*2,Pr=Math.PI,Z1=e=>Object.freeze({x:Math.cos(e),y:Math.sin(e)}),X1=e=>Math.atan2(e.y,e.x),Sl=(e,r="",n=Y1)=>{e=se(e,n);let i=Math.atan2(e.y,e.x);return r==="unipolar"&&i<0?i+=vr:r==="bipolar"&&(i>Pr?i-=vr:i<=-Pr&&(i+=vr)),Object.freeze({distance:I(e),angleRadian:i})},W1=e=>se(e.b,e.a),U1=e=>{Tr(e,"line");const r=se(e.b,e.a);return Sl(r)},he=e=>!!si(e),Qe=e=>!!M(e),Q1=e=>{if(he(e))return ko(e);if(Qe(e))return tu(e);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},em=e=>e.x>=0&&e.y>=0?0:e.x<0&&e.y>=0||e.x<0&&e.y<0?Pr:vr,er=(e,r=Ue)=>{if(he(e))return e;if(Qe(e))return oi(e,r);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},Ae=e=>{if(he(e))return qo(e);if(Qe(e))return e;throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},tm=(e,r)=>{if(he(e))return Fo(e,r);if(Qe(e))return Nr(e,r);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},rm=(e,r)=>{if(he(e)&&he(r))return Lo(e,r);if(Qe(e)&&Qe(r))return Uo(e,r);throw new Error("Expected two polar/Cartesian vectors.")},nm=(e,r=1,n=0)=>{if(he(e))return Vo(e,r,n);if(Qe(e))return eu(e,r,n);throw new Error("Expected either polar or Cartesian vector")},im=(e,r)=>{const n=he(e);e=Ae(e),r=Ae(r);const i=qe(e,r);return n?er(i):i},am=(e,r)=>{const n=he(e);e=Ae(e),r=Ae(r);const i=se(e,r);return n?er(i):i},sm=(e,r)=>{const n=he(e);e=Ae(e),r=Ae(r);const i=Ft(e,r);return n?er(i):i},om=(e,r)=>{const n=he(e);e=Ae(e),r=Ae(r);const i=Mr(e,r);return n?er(i):i},Pl={};S(Pl,{circleRings:()=>ym,circleVogelSpiral:()=>dm,sphereFibonacci:()=>mm});var wi=Math.cos,bi=Math.sin,um=Math.asin,Ei=Math.sqrt,lm=Math.pow,Mi=Math.PI,fm=Math.PI*2,cm=Mi*(3-Ei(5)),hm=(1+Ei(5))/2;function*dm(e,r={}){const n=r.maxPoints??5e3,i=r.density??.95,a=r.rotation??0,s=pi(e??{radius:1,x:0,y:0}),o=s.radius;let u=s.radius*Gt(i,0,1,.3,.01);r.spacing&&(u=r.spacing);let l=0,f=0,c=0;for(;f<n&&l<o;)l=u*f**.5,c=a+f*2*Mi/hm,yield Object.freeze({x:s.x+l*wi(c),y:s.y+l*bi(c)}),f++}function*ym(e,r={}){const n=r.rings??5,i=pi(e??{radius:1,x:0,y:0}),a=1/n,s=r.rotation??0;let o=1;yield Object.freeze({x:i.x,y:i.y});for(let u=a;u<=1;u+=a){const l=Math.round(Mi/um(1/(2*o)));for(const f of zh(0,fm,l+1))yield Object.freeze({x:i.x+u*wi(f+s)*i.radius,y:i.y+u*bi(f+s)*i.radius});o++}}function*mm(e=100,r=0,n){const i=2/e,a=n??{x:0,y:0,z:0,radius:1};for(let s=0;s<e;s++){const o=s*i-1+i/2,u=Ei(1-lm(o,2)),l=(s+1)%e*cm+r,f=wi(l)*u,c=bi(l)*u;yield Object.freeze({x:a.x+f*a.radius,y:a.y+o*a.radius,z:a.z+c*a.radius})}}var Xe={};S(Xe,{Empty:()=>Qm,Equilateral:()=>Al,Isosceles:()=>Bl,Placeholder:()=>ep,Right:()=>jl,angles:()=>tr,anglesDegrees:()=>op,apply:()=>np,area:()=>$l,barycentricCoord:()=>Tl,barycentricToCartestian:()=>gp,bbox:()=>_l,centroid:()=>Yr,corners:()=>sp,edges:()=>Kr,equilateralFromVertex:()=>mp,fromFlatArray:()=>vp,fromPoints:()=>Ni,fromRadius:()=>dp,guard:()=>oe,innerCircle:()=>pm,intersectsPoint:()=>xp,isAcute:()=>cp,isEmpty:()=>tp,isEqual:()=>ap,isEquilateral:()=>up,isIsosceles:()=>lp,isOblique:()=>fp,isObtuse:()=>hp,isPlaceholder:()=>rp,isRightAngle:()=>Rl,isTriangle:()=>ip,lengths:()=>zi,outerCircle:()=>vm,perimeter:()=>Cl,rotate:()=>gm,rotateByVertex:()=>yp,toFlatArray:()=>pp});var oe=(e,r="t")=>{if(e===void 0)throw new Error("{$name} undefined");N(e.a,r+".a"),N(e.b,r+".b"),N(e.c,r+".c")},Kr=e=>(oe(e),_r(e.a,e.b,e.c,e.a)),$l=e=>{oe(e,"t");const r=Kr(e).map(i=>U(i)),n=(r[0]+r[1]+r[2])/2;return Math.sqrt(n*(n-r[0])*(n-r[1])*(n-r[2]))},Yr=e=>{oe(e);const r=nu([e.a,e.b,e.c],(i,a)=>({x:i.x+a.x,y:i.y+a.y}));return{x:r.x/3,y:r.y/3}},Cl=e=>(oe(e),Kr(e).reduce((r,n)=>r+U(n),0)),pm=e=>{const r=Yr(e),n=Cl(e)/2;return{radius:$l(e)/n,...r}},vm=e=>{const[r,n,i]=Kr(e).map(o=>U(o)),a=Yr(e);return{radius:r*n*i/Math.sqrt((r+n+i)*(-r+n+i)*(r-n+i)*(r+n-i)),...a}},gm=(e,r,n)=>r===void 0||r===0?e:(n===void 0&&(n=Yr(e)),Object.freeze({...e,a:Se(e.a,r,n),b:Se(e.b,r,n),c:Se(e.c,r,n)})),Al={};S(Al,{area:()=>Nm,centerFromA:()=>wm,centerFromB:()=>bm,centerFromC:()=>Em,circumcircle:()=>Sm,fromCenter:()=>xm,height:()=>Mm,incircle:()=>Zr,perimeter:()=>zm});var es=Math.PI*4/3,ts=Math.PI*2/3,De=e=>typeof e=="number"?e:e.length,xm=(e,r,n)=>{r||(r=Object.freeze({x:0,y:0}));const i=De(e)/Math.sqrt(3),a=n??Math.PI*1.5,s={x:i*Math.cos(a)+r.x,y:i*Math.sin(a)+r.y},o={x:i*Math.cos(a+es)+r.x,y:i*Math.sin(a+es)+r.y},u={x:i*Math.cos(a+ts)+r.x,y:i*Math.sin(a+ts)+r.y};return Object.freeze({a:o,b:s,c:u})},wm=(e,r)=>{r||(r=Object.freeze({x:0,y:0}));const n=De(e),{radius:i}=Zr(e);return{x:r.x+n/2,y:r.y-i}},bm=(e,r)=>{r||(r=Object.freeze({x:0,y:0}));const{radius:n}=Zr(e);return{x:r.x,y:r.y+n*2}},Em=(e,r)=>{r||(r=Object.freeze({x:0,y:0}));const n=De(e),{radius:i}=Zr(e);return{x:r.x-n/2,y:r.y-i}},Mm=e=>Math.sqrt(3)/2*De(e),zm=e=>De(e)*3,Nm=e=>Math.pow(De(e),2)*Math.sqrt(3)/4,Sm=e=>({radius:Math.sqrt(3)/3*De(e)}),Zr=e=>({radius:Math.sqrt(3)/6*De(e)}),jl={};S(jl,{adjacentFromHypotenuse:()=>Lm,adjacentFromOpposite:()=>Vm,angleAtPointA:()=>Bm,angleAtPointB:()=>Om,area:()=>jm,circumcircle:()=>Rm,fromA:()=>Pm,fromB:()=>$m,fromC:()=>Cm,height:()=>Xr,hypotenuseFromAdjacent:()=>qm,hypotenuseFromOpposite:()=>Fm,hypotenuseSegments:()=>Wr,incircle:()=>_m,medians:()=>Im,oppositeFromAdjacent:()=>Tm,oppositeFromHypotenuse:()=>km,perimeter:()=>Am,resolveLengths:()=>ue});var Pm=(e,r)=>{r||(r=Object.freeze({x:0,y:0}));const n=ue(e),i=Wr(e),a=Xr(e),s={x:r.x,y:r.y},o={x:r.x+n.hypotenuse,y:r.y},u={x:r.x+i[1],y:r.y-a};return{a:s,b:o,c:u}},$m=(e,r)=>{r||(r=Object.freeze({x:0,y:0}));const n=ue(e),i=Wr(e),a=Xr(e),s={x:r.x,y:r.y},o={x:r.x-n.hypotenuse,y:r.y},u={x:r.x-i[0],y:r.y-a};return{a:o,b:s,c:u}},Cm=(e,r)=>{r||(r=Object.freeze({x:0,y:0}));const n=Wr(e),i=Xr(e),a={x:r.x,y:r.y},s={x:r.x-n[1],y:r.y+i},o={x:r.x+n[0],y:r.y+i};return{a:s,b:o,c:a}},ue=e=>{const r=e.adjacent,n=e.opposite,i=e.hypotenuse;if(r!==void 0&&n!==void 0)return{...e,adjacent:r,opposite:n,hypotenuse:Math.hypot(r,n)};if(r&&i)return{...e,adjacent:r,hypotenuse:i,opposite:i*i-r*r};if(n&&i)return{...e,hypotenuse:i,opposite:n,adjacent:i*i-n*n};if(e.opposite&&e.hypotenuse&&e.adjacent)return e;throw new Error("Missing at least two edges")},Xr=e=>{const r=ue(e),n=r.opposite*r.opposite/r.hypotenuse,i=r.adjacent*r.adjacent/r.hypotenuse;return Math.sqrt(n*i)},Wr=e=>{const r=ue(e),n=r.opposite*r.opposite/r.hypotenuse,i=r.adjacent*r.adjacent/r.hypotenuse;return[n,i]},Am=e=>{const r=ue(e);return r.adjacent+r.hypotenuse+r.opposite},jm=e=>{const r=ue(e);return r.opposite*r.adjacent/2},Bm=e=>{const r=ue(e);return Math.acos((r.adjacent*r.adjacent+r.hypotenuse*r.hypotenuse-r.opposite*r.opposite)/(2*r.adjacent*r.hypotenuse))},Om=e=>{const r=ue(e);return Math.acos((r.opposite*r.opposite+r.hypotenuse*r.hypotenuse-r.adjacent*r.adjacent)/(2*r.opposite*r.hypotenuse))},Im=e=>{const r=ue(e),n=r.adjacent*r.adjacent,i=r.hypotenuse*r.hypotenuse,a=r.opposite*r.opposite;return[Math.sqrt(2*(n+i)-a)/2,Math.sqrt(2*(i+a)-n)/2,Math.sqrt(2*(a+n)-i)/2]},Rm=e=>({radius:ue(e).hypotenuse/2}),_m=e=>{const r=ue(e);return{radius:(r.adjacent+r.opposite-r.hypotenuse)/2}},Tm=(e,r)=>Math.tan(e)*r,km=(e,r)=>Math.sin(e)*r,Lm=(e,r)=>Math.cos(e)*r,Vm=(e,r)=>r/Math.tan(e),Fm=(e,r)=>r/Math.sin(e),qm=(e,r)=>r/Math.cos(e),Bl={};S(Bl,{apexAngle:()=>Dm,area:()=>Hm,baseAngle:()=>Ol,circumcircle:()=>Km,fromA:()=>Xm,fromB:()=>Wm,fromC:()=>Um,fromCenter:()=>Zm,height:()=>Ge,incircle:()=>Il,legHeights:()=>Gm,medians:()=>Ym,perimeter:()=>Jm});var Ol=e=>Math.acos(e.base/(2*e.legs)),Dm=e=>{const r=e.legs*e.legs,n=e.base*e.base;return Math.acos((2*r-n)/(2*r))},Ge=e=>{const r=e.legs*e.legs,n=e.base*e.base;return Math.sqrt((4*r-n)/4)},Gm=e=>{const r=Ol(e);return e.base*Math.sin(r)},Jm=e=>2*e.legs+e.base,Hm=e=>Ge(e)*e.base/2,Km=e=>{const r=Ge(e),n=r*r,i=e.base*e.base;return{radius:(4*n+i)/(8*r)}},Il=e=>{const r=Ge(e);return{radius:e.base*r/(2*e.legs+e.base)}},Ym=e=>{const r=e.legs*e.legs,n=e.base*e.base,i=Math.sqrt(r+2*n)/2,a=Math.sqrt(4*r-n)/2;return[i,i,a]},Zm=(e,r)=>{r||(r=Object.freeze({x:0,y:0}));const n=Ge(e),i=Il(e).radius,a=n-i,s={x:r.x-e.base/2,y:r.y+i},o={x:r.x+e.base/2,y:r.y+i},u={x:r.x,y:r.y-a};return{a:s,b:o,c:u}},Xm=(e,r)=>{r||(r=Object.freeze({x:0,y:0}));const n=Ge(e),i={x:r.x,y:r.y},a={x:r.x+e.base,y:r.y},s={x:r.x+e.base/2,y:r.y-n};return{a:i,b:a,c:s}},Wm=(e,r)=>{r||(r=Object.freeze({x:0,y:0}));const n=Ge(e),i={x:r.x,y:r.y},a={x:r.x-e.base,y:r.y},s={x:r.x-e.base/2,y:r.y-n};return{a,b:i,c:s}},Um=(e,r)=>{r||(r=Object.freeze({x:0,y:0}));const n=Ge(e),i={x:r.x,y:r.y},a={x:r.x-e.base/2,y:r.y+n},s={x:r.x+e.base/2,y:r.y+n};return{a,b:s,c:i}},rs=Math.PI*2,Qm=Object.freeze({a:{x:0,y:0},b:{x:0,y:0},c:{x:0,y:0}}),ep=Object.freeze({a:{x:Number.NaN,y:Number.NaN},b:{x:Number.NaN,y:Number.NaN},c:{x:Number.NaN,y:Number.NaN}}),tp=e=>ut(e.a)&&ut(e.b)&&ut(e.c),rp=e=>lt(e.a)&&lt(e.b)&&lt(e.c),np=(e,r)=>Object.freeze({...e,a:r(e.a,"a"),b:r(e.b,"b"),c:r(e.c,"c")}),ip=e=>{if(e===void 0)return!1;const r=e;return!(!M(r.a)||!M(r.b)||!M(r.c))},ap=(e,r)=>pe(e.a,r.a)&&pe(e.b,r.b)&&pe(e.c,r.c),sp=e=>(oe(e),[e.a,e.b,e.c]),zi=e=>(oe(e),[I(e.a,e.b),I(e.b,e.c),I(e.c,e.a)]),tr=e=>(oe(e),[Rt(e.a,e.b),Rt(e.b,e.c),Rt(e.c,e.a)]),op=e=>(oe(e),ai(tr(e))),up=e=>{oe(e);const[r,n,i]=zi(e);return r===n&&n===i},lp=e=>{const[r,n,i]=zi(e);return r===n||n===i||i===r},Rl=e=>tr(e).includes(Math.PI/2),fp=e=>!Rl(e),cp=e=>!tr(e).some(r=>r>=Math.PI/2),hp=e=>tr(e).some(r=>r>Math.PI/2),dp=(e,r,n={})=>{x(r,"positive","radius"),N(e,"origin");const i=n.initialAngleRadian??0,s=[i,i+rs*1/3,i+rs*2/3].map(o=>ae(r,o,e));return Ni(s)},yp=(e,r,n="b")=>{const i=n==="a"?e.a:n==="b"?e.b:e.c;return Object.freeze({a:Se(e.a,r,i),b:Se(e.b,r,i),c:Se(e.c,r,i)})},mp=(e,r=10,n=Math.PI/2)=>{e||(e=Object.freeze({x:0,y:0}));const i=On(e,r,Math.PI- -n/2),a=On(e,r,Math.PI-n/2);return{a:i,b:e,c:a}},pp=e=>(oe(e),[e.a.x,e.a.y,e.b.x,e.b.y,e.c.x,e.c.y]),vp=e=>{if(!Array.isArray(e))throw new Error("coords expected as array");if(e.length!==6)throw new Error(`coords array expected with 6 elements. Got ${e.length}`);return Ni(hi(...e))},Ni=e=>{if(!Array.isArray(e))throw new Error("points expected as array");if(e.length!==3)throw new Error(`points array expected with 3 elements. Got ${e.length}`);return{a:e[0],b:e[1],c:e[2]}},_l=(e,r=0)=>{const{a:n,b:i,c:a}=e,s=Math.min(n.x,i.x,a.x)-r,o=Math.max(n.x,i.x,a.x)+r,u=Math.min(n.y,i.y,a.y)-r,l=Math.max(n.y,i.y,a.y)+r;return{x:s,y:u,width:o-s,height:l-u}},Tl=(e,r,n)=>{const i=ce(r,n),a=(l,f,c,h)=>(c.y-h.y)*l+(h.x-c.x)*f+c.x*h.y-h.x*c.y,s=a(i.x,i.y,e.b,e.c)/a(e.a.x,e.a.y,e.b,e.c),o=a(i.x,i.y,e.c,e.a)/a(e.b.x,e.b.y,e.c,e.a),u=a(i.x,i.y,e.a,e.b)/a(e.c.x,e.c.y,e.a,e.b);return{a:s,b:o,c:u}},gp=(e,r)=>{oe(e);const{a:n,b:i,c:a}=e,s=n.x*r.a+i.x*r.b+a.x*r.c,o=n.y*r.a+i.y*r.b+a.y*r.c;if(n.z&&i.z&&a.z){const u=n.z*r.a+i.z*r.b+a.z*r.c;return Object.freeze({x:s,y:o,z:u})}else return Object.freeze({x:s,y:o})},xp=(e,r,n)=>{const i=_l(e),a=ce(r,n);if(!Wt(i,a))return!1;const s=Tl(e,a);return 0<=s.a&&s.a<=1&&0<=s.b&&s.b<=1&&0<=s.c&&s.c<=1};function*Tn(e,r,n=j){const i=[];for(const a of r)e.find(o=>n(o,a))||i.find(u=>n(u,a))||(i.push(a),yield a)}var wp=(e,r=j)=>{const n=[];for(const i of e)if(Array.isArray(i))for(const a of Tn(n,i,r))n.push(a);else return[...Tn([],e,r)];return n},bp=(e,r)=>(n,i)=>{let a=e.get(n);return a!==void 0||(a=r(n,i),e.set(n,a)),a},Ep=(e,r)=>async(n,i)=>{let a=e.get(n);if(a!==void 0)return a;if(a=await r(n,i),a===void 0)throw new Error("fn returned undefined");return e.set(n,a),a},Mp=(e,r,n)=>{const i=r.length+n.length,a=e.capacity??i,s=i-a,o=e.discardPolicy??"additions";switch(o){case"additions":return r.length===0?n.slice(0,n.length-s):r.length===e.capacity?r:[...r,...n.slice(0,s-1)];case"newer":{if(s>=r.length)return r.length===0?[...n.slice(0,a-1),n.at(-1)]:n.slice(Math.max(0,n.length-a),Math.min(n.length,a)+1);{const u=Math.max(1,n.length-r.length),l=n.slice(n.length-u,n.length);return[...r.slice(0,Math.min(r.length,a-1)),...l]}}case"older":return[...r,...n].slice(s);default:throw new Error(`Unknown overflow policy ${o}`)}},kl=(e,r,...n)=>{if(e===void 0)throw new Error("opts parameter undefined");const i=r.length+n.length,a=e.capacity&&i>e.capacity,s=a?Mp(e,r,n):[...r,...n];if(e.capacity&&s.length!==e.capacity&&a)throw new Error(`Bug! Expected return to be at capacity. Return len: ${s.length} capacity: ${e.capacity} opts: ${JSON.stringify(e)}`);if(!e.capacity&&s.length!==i)throw new Error(`Bug! Return length not expected. Return len: ${s.length} expected: ${i} opts: ${JSON.stringify(e)}`);return s},Ll=(e,r)=>{if(r.length===0)throw new Error("Queue is empty");return r.slice(1)},kn=(e,r)=>r[0],Vl=(e,r)=>r.length===0,Fl=(e,r)=>e.capacity?r.length>=e.capacity:!1,Et=class extends Yt{opts;data;eq;constructor(e={},r=[]){super();if(e===void 0)throw new Error("opts parameter undefined");this.opts=e,this.data=r,this.eq=e.eq??j}clear(){const e=[...this.data];this.data=[],this.fireEvent("removed",{finalData:this.data,removed:e}),this.onClear()}onClear(){}at(e){if(e>=this.data.length)throw new Error("Index outside bounds of queue");const r=this.data.at(e);if(r===void 0)throw new Error("Index appears to be outside range of queue");return r}enqueue(...e){this.data=kl(this.opts,this.data,...e);const r=this.data.length;return this.onEnqueue(this.data,e),r}onEnqueue(e,r){this.fireEvent("enqueue",{added:r,finalData:e})}dequeue(){const e=kn(this.opts,this.data);if(e!==void 0)return this.data=Ll(this.opts,this.data),this.fireEvent("dequeue",{removed:e,finalData:this.data}),this.onRemoved([e],this.data),e}onRemoved(e,r){this.fireEvent("removed",{removed:e,finalData:r})}removeWhere(e){const r=this.data.length,n=this.data.filter(i=>e(i));return n.length===0?0:(this.data=this.data.filter(i=>!e(i)),this.onRemoved(n,this.data),r-this.data.length)}toArray(){return[...this.data]}get isEmpty(){return Vl(this.opts,this.data)}get isFull(){return Fl(this.opts,this.data)}get length(){return this.data.length}get peek(){return kn(this.opts,this.data)}};function zp(e={},...r){return new Et({...e},[...r])}var ql=e=>{if(!Array.isArray(e))throw new Error("Parameter needs to be an array");for(let r=0;r<e.length;r++)for(let n=0;n<e.length;n++)if(r!==n&&e[r]===e[n])return!0;return!1};function*Dl(e,r=0,n=Number.POSITIVE_INFINITY){const i=e[Symbol.iterator]();for(;r>0;r--,n--)i.next();for(const a of e)if(n-- >0)yield a;else break}var $r=(e,r,n="index")=>{if(Pe(e),Y(r,"positive",n),r>e.length-1)throw new Error(`'${n}' ${r} beyond array max of ${e.length-1}`)},Np=e=>e.filter(r=>r!==void 0),Sp=(e,r)=>{const n=[],i=[];for(const a of e)r(a)?n.push(a):i.push(a);return[n,i]},Gl=(e,r,n,i)=>{Pe(e),typeof n>"u"&&(n=0),typeof i>"u"&&(i=e.length),$r(e,n,"startIndex"),$r(e,i-1,"endIndex");const a=[];for(let s=n;s<i;s++)r(e[s],s,e)&&a.push(e[s]);return a},Ur=(e,r,n=j)=>{if(Array.isArray(r)){const i=[];for(const a of e)r.some(s=>n(a,s))||i.push(a);return i}else return e.filter(i=>!n(i,r))},Jl={};S(Jl,{FromObject:()=>Hl,Mutable:()=>Yl,Pathed:()=>pf,Traverse:()=>Ef,compare:()=>Si,isTraversable:()=>Cf,isTreeNode:()=>$f,toTraversable:()=>Tv});var Hl={};S(Hl,{asDynamicTraversable:()=>Ri,children:()=>Mt,create:()=>_i,createSimplified:()=>bv,createWrapped:()=>wv,depthFirst:()=>df,getByPath:()=>xv,prettyPrint:()=>cf,prettyPrintEntries:()=>vv,toStringDeep:()=>hf,traceByPath:()=>yf});var Pp={};S(Pp,{chunks:()=>Ip,chunksOverlapping:()=>Op,concat:()=>Rp,dropWhile:()=>_p,equals:()=>Lp,every:()=>Vp,fill:()=>Fp,filter:()=>Dp,find:()=>Gp,first:()=>Bp,flatten:()=>Jp,forEach:()=>qp,fromArray:()=>tv,fromIterable:()=>Qp,last:()=>Kl,map:()=>Hp,max:()=>Kp,min:()=>Yp,next:()=>kp,reduce:()=>Cp,repeat:()=>Xp,slice:()=>Dl,some:()=>Zp,toArray:()=>ev,unique:()=>Wp,uniqueByValue:()=>Ap,until:()=>Tp,yieldNumber:()=>jp,zip:()=>Up});var E2=e=>Symbol.asyncIterator in new Object(e),$p=e=>Symbol.iterator in new Object(e),M2=(e,r)=>{const n=[],i=[];let a=!1;const s=f=>{n.length>0?n.shift()(...f):i.push(f)},o=()=>new Promise(f=>{if(i.length>0){const c=i.shift();f(...c)}else n.push(f)}),u=(...f)=>{s(f)};return e.addEventListener(r,u),{next:async()=>a?{done:!0,value:void 0}:{done:!1,value:await o()},return:async()=>(a=!0,e.removeEventListener(r,u),{done:!0,value:void 0}),throw:async f=>(a=!0,{done:!0,value:Promise.reject(new Error(f))})}};function Cp(e,r,n){for(const i of e)n=r(n,i);return n}function*Ap(e,r=Ce,n=new Set){for(const i of e){const a=r(i);n.has(a)||(n.add(a),yield i)}}function jp(e,r){return()=>{const n=e.next().value;return n===void 0?r:n}}function Bp(e){for(const r of e)return r}function Kl(e){let r;for(const n of e)r=n;return r}function*Op(e,r){if(r<=1)throw new Error("Size should be at least 2");let n=[];for(const i of e)n.push(i),n.length===r&&(yield n,n=[n.at(-1)]);n.length<=1||n.length>0&&(yield n)}function*Ip(e,r){let n=[];for(const i of e)n.push(i),n.length===r&&(yield n,n=[]);n.length>0&&(yield n)}function*Rp(...e){for(const r of e)yield*r}function*_p(e,r){for(const n of e)r(n)||(yield n)}var Tp=(e,r)=>{for(const n of e){const i=r();if(typeof i=="boolean"&&!i)break}},kp=e=>()=>{const r=e.next();if(!r.done)return r.value};function Lp(e,r,n){for(;;){const i=e.next(),a=r.next();if(n!==void 0){if(!n(i.value,a.value))return!1}else if(i.value!==a.value)return!1;if(i.done??a.done)return i.done&&a.done}}function Vp(e,r){for(const n of e)if(!r(n))return!1;return!0}function*Fp(e,r){for(const n of e)yield r}function qp(e,r){for(const n of e){const i=r(n);if(typeof i=="boolean"&&!i)break}}function*Dp(e,r){for(const n of e)!r(n)||(yield n)}function Gp(e,r){for(const n of e)if(r(n))return n}function*Jp(e){for(const r of e)if(typeof r=="object"){if(Array.isArray(r))for(const n of r)yield n;else if($p(r))for(const n of r)yield n}else yield r}function*Hp(e,r){for(const n of e)yield r(n)}function*Kp(e,r=(n,i)=>n>i){let n;for(const i of e){if(n===void 0){n=i,yield n;continue}r(i,n)&&(n=i,yield n)}return n}function*Yp(e,r=(n,i)=>n>i){let n;for(const i of e)n===void 0&&(n=i,yield n),r(n,i)&&(n=i,yield n)}function Zp(e,r){for(const n of e)if(r(n))return!0;return!1}function*Xp(e,r){const n=typeof r=="number"?r:Number.POSITIVE_INFINITY,i=typeof r=="number"?void 0:r;let a=n;for(;;){for(const s of e())if(yield s,i?.aborted)break;if(Number.isFinite(n)&&(a--,a===0)||i?.aborted)break}}function*Wp(e){const r=[];let n=[];n=Array.isArray(e)?e:[e];for(const i of n)for(const a of i)r.includes(a)||(r.push(a),yield a)}function*Up(...e){const r=e.map(n=>n[Symbol.iterator]());for(;;){const n=r.map(i=>i.next());if(n.some(i=>i.done))return;yield n.map(i=>i.value)}}function*Qp(e){for(const r of e)yield r}function ev(e,r={}){const n=[],i=Date.now(),a=r.limit??Number.POSITIVE_INFINITY,s=Wn(r.elapsed,Number.POSITIVE_INFINITY);for(const o of e){if(n.length>=a||Date.now()-i>s)break;n.push(o)}return n}function*tv(e){for(const r of e)yield r}var Yl={};S(Yl,{add:()=>Oi,addValue:()=>Ar,asDynamicTraversable:()=>gt,breadthFirst:()=>Ci,children:()=>lv,childrenLength:()=>mv,compare:()=>sv,computeMaxDepth:()=>dv,createNode:()=>rr,depthFirst:()=>uv,findAnyChildByValue:()=>hv,findChildByValue:()=>cv,followValue:()=>ff,fromPlainObject:()=>of,getRoot:()=>Bi,hasAnyChild:()=>en,hasAnyParent:()=>Cr,hasChild:()=>rf,hasParent:()=>af,nodeDepth:()=>fv,parents:()=>ji,queryByValue:()=>nf,remove:()=>$i,root:()=>tn,rootWrapped:()=>yv,setChildren:()=>lf,stripParentage:()=>Pi,throwTreeTest:()=>tf,toStringDeep:()=>Ii,treeTest:()=>Ai,value:()=>pv,wrap:()=>Ie});var rv=(e,r,n)=>{const i=r.length+n.length,a=e.discardPolicy??"additions",s=e.capacity??i,o=i-s;switch(e.debug&&console.log(`Stack.push: stackLen: ${r.length} potentialLen: ${i} toRemove: ${o} policy: ${a}`),a){case"additions":return e.debug&&console.log(`Stack.push:DiscardAdditions: stackLen: ${r.length} slice: ${i-s} toAddLen: ${n.length}`),r.length===e.capacity?r:[...r,...n.slice(0,n.length-o)];case"newer":return o>=r.length?n.slice(Math.max(0,n.length-s),Math.min(n.length,s)+1):(e.debug&&console.log(` from orig: ${JSON.stringify(r.slice(0,r.length-o))}`),[...r.slice(0,r.length-o),...n.slice(0,Math.min(n.length,s-o+1))]);case"older":return[...r,...n].slice(o);default:throw new Error(`Unknown discard policy ${a}`)}},Zl=(e,r,...n)=>{const i=r.length+n.length;return e.capacity&&i>e.capacity?rv(e,r,n):[...r,...n]},Xl=(e,r)=>{if(r.length===0)throw new Error("Stack is empty");return r.slice(0,-1)},Ln=(e,r)=>r.at(-1),Wl=(e,r)=>r.length===0,Ul=(e,r)=>e.capacity?r.length>=e.capacity:!1,Qr=class{opts;data;constructor(e={},r=[]){this.opts=e,this.data=r}push(...e){return e.length===0?this.data.length:(this.data=Zl(this.opts,this.data,...e),this.data.length)}forEach(e){this.data.forEach(e)}forEachFromTop(e){[...this.data].reverse().forEach(e)}pop(){const e=Ln(this.opts,this.data);return this.data=Xl(this.opts,this.data),e}get isEmpty(){return Wl(this.opts,this.data)}get isFull(){return Ul(this.opts,this.data)}get peek(){return Ln(this.opts,this.data)}get length(){return this.data.length}},nv=(e={},...r)=>new Qr({...e},[...r]),Si=(e,r,n=Un,i)=>{const a=Ql(e,r,n),s=iv(e,r,n),o={valueChanged:!a,a:e,b:r,added:s.added,removed:s.removed,childChanged:!1},u={value:o,childrenStore:[],parent:i},l=s.identical.map(c=>Si(c[0],c[1],n,u)),f=ns(o)||l.some(c=>ns(c.value));return lf(u,l),u.toString=()=>ef(u,0),u.value.childChanged=f,tf(u),u},ns=e=>e===void 0?!1:!!(e.valueChanged||e.childChanged||e.added.length>0||e.removed.length>0),iv=(e,r,n=Un)=>{const i=[...e.children()],a=[...r.children()],s=[],o=[];for(const l of i){let f=-1;for(const[c,h]of a.entries())if(Ql(l,h,n)){s.push([l,h]),f=c;break}f===-1?o.push(l):a.splice(f,1)}return{added:[...a],identical:s,removed:o}},Ql=(e,r,n)=>!!(e.getIdentity()===r.getIdentity()||n(e.getValue(),r.getValue())),mr=e=>JSON.stringify(e.getValue()),ef=(e,r=0)=>{if(e===void 0)return"(undefined)";let n=av(e.value,r);for(const i of e.childrenStore)n+=ef(i,r+2);return n},av=(e,r)=>{const n=" ".repeat(r);if(e===void 0)return`${n}(undefined)`;const i=[];if(i.push(`a: ${mr(e.a)} b: ${mr(e.b)}`),e.valueChanged?i.push(`Value changed. Child changed: ${e.childChanged}`):i.push(`Value unchanged. Child changed: ${e.childChanged}`),e.added.length>0){i.push("Added:");for(const a of e.added)i.push(" - "+mr(a))}if(e.removed.length>0){i.push(`Removed: ${e.removed.length}`);for(const a of e.removed)i.push(" - "+mr(a))}return i.push(`----
`),i.map(a=>n+a).join(`
`)},sv=(e,r,n)=>Si(gt(e),gt(r),n),Pi=e=>({value:e.value,childrenStore:e.childrenStore.map(n=>Pi(n))}),st=e=>"wraps"in e?e.wraps:e,ov=e=>"wraps"in e?e:Ie(e),Ie=e=>({*children(){for(const r of e.childrenStore)yield Ie(r)},getValue:()=>e.value,getIdentity:()=>e,*queryValue(r){for(const n of nf(r,st(e)))yield Ie(n)},getParent:()=>e.parent===void 0?void 0:Ie(e.parent),hasParent:r=>af(e,st(r)),hasAnyParent:r=>Cr(e,st(r)),hasChild:r=>rf(st(r),e),hasAnyChild:r=>en(st(r),e),remove:()=>{$i(e)},addValue:r=>{const n=Ar(r,e);return Ie(n)},add:r=>(Oi(st(r),e),ov(r)),wraps:e}),$i=e=>{const r=e.parent;r!==void 0&&(e.parent=void 0,r.childrenStore=Ur(r.childrenStore,e))};function*uv(e){if(!tn)return;const r=new Qr;r.push(...e.childrenStore);let n=r.pop();for(;n&&(yield n,n&&r.push(...n.childrenStore),!r.isEmpty);)n=r.pop()}function*Ci(e){if(!e)return;const r=new Et;r.enqueue(...e.childrenStore);let n=r.dequeue();for(;n&&(yield n,n&&r.enqueue(...n.childrenStore),!r.isEmpty);)n=r.dequeue()}function Ai(e,r=[]){if(e.parent===e)return[!1,"Root has itself as parent",e];if(r.includes(e))return[!1,"Same node instance is appearing further in tree",e];if(r.push(e),ql(e.childrenStore))return[!1,"Children list contains duplicates",e];for(const n of e.childrenStore){if(n.parent!==e)return[!1,"Member of childrenStore does not have .parent set",n];if(en(e,n))return[!1,"Child has parent as its own child",n];const i=Ai(n,r);if(!i[0])return i}return[!0,"",e]}function tf(e){const r=Ai(e);if(!r[0])throw new Error(`${r[1]} Node: ${ht(r[2].value,30)}`,{cause:r[2]})}function*lv(e){for(const r of e.childrenStore)yield r}function*ji(e){let r=e.parent;for(;r;)yield r,r=r.parent}function fv(e){return[...ji(e)].length}var rf=(e,r)=>{for(const n of r.childrenStore)if(n===e)return!0;return!1},cv=(e,r,n=j)=>{for(const i of r.childrenStore)if(n(e,i.value))return i};function*nf(e,r,n=j){for(const i of r.childrenStore)n(e,i.value)&&(yield i)}var en=(e,r)=>{for(const n of Ci(r))if(n===e)return!0;return!1},hv=(e,r,n=j)=>{for(const i of Ci(r))if(n(i.value,e))return i},Bi=e=>e.parent?Bi(e.parent):e,Cr=(e,r)=>{for(const n of ji(e))if(n===r)return!0;return!1},af=(e,r)=>e.parent===r,dv=e=>sf(e,0),sf=(e,r=0)=>{let n=r;for(const i of e.childrenStore)n=Math.max(n,sf(i,r+1));return n},Oi=(e,r)=>{uf(e,r);const n=e.parent;r.childrenStore=[...r.childrenStore,e],e.parent=r,n&&(n.childrenStore=Ur(n.childrenStore,e))},Ar=(e,r)=>rr(e,r),tn=e=>rr(e),of=(e,r="",n,i=[])=>{const a=Object.entries(e);n=n===void 0?tn():Ar({label:r,value:e},n);for(const s of a){const o=s[1];i.includes(o)||(i.push(o),typeof s[1]=="object"?of(o,s[0],n,i):Ar({label:s[0],value:o},n))}return n},yv=e=>Ie(rr(e)),rr=(e,r)=>{const n={childrenStore:[],parent:r,value:e};return r!==void 0&&(r.childrenStore=[...r.childrenStore,n]),n},mv=e=>e.childrenStore.length,pv=e=>e.value,gt=e=>({*children(){for(const n of e.childrenStore)yield gt(n)},getParent(){if(e.parent!==void 0)return gt(e.parent)},getValue(){return e.value},getIdentity(){return e}}),uf=(e,r)=>{if(r===e)throw new Error("Cannot add self as child");if(e.parent!==r){if(Cr(r,e))throw new Error("Child contains parent (1)",{cause:e});if(Cr(e,r))throw new Error("Parent already contains child",{cause:e});if(en(r,e))throw new Error("Child contains parent (2)",{cause:e})}},lf=(e,r)=>{for(const n of r)uf(n,e);e.childrenStore=[...r];for(const n of r)n.parent=e},Ii=(e,r=0)=>{const n=`${"  ".repeat(r)} + ${e.value?JSON.stringify(e.value):"-"}`;return e.childrenStore.length>0?n+`
`+e.childrenStore.map(i=>Ii(i,r+1)).join(`
`):n};function*ff(e,r,n=1){for(const i of e.childrenStore){const a=i.value;a!==void 0&&r(a,n)&&(yield i.value,yield*ff(i,r,n+1))}}function Ot(e){return typeof e=="number"||typeof e=="string"||typeof e=="bigint"||typeof e=="boolean"}function vv(e){if(e.length===0)return"(empty)";let r="";for(const[n,i]of e.entries())r+="  ".repeat(n),r+=i.name+" = "+JSON.stringify(i.nodeValue)+`
`;return r}var cf=(e,r=0,n={})=>{Vt(e,"node");const i=n.name??"node",a=Ev(e,i),s=`${"  ".repeat(r)} + name: ${a.name} value: ${JSON.stringify(a.nodeValue)}`,o=[...Mt(e,n)];return o.length>0?s+`
`+o.map(u=>cf(u.nodeValue,r+1,{...n,name:u.name})).join(`
`):s},hf=(e,r=0)=>{let n=" ".repeat(r)+` ${e.value?.name}`;if(e.value!==void 0){if("sourceValue"in e.value&&"nodeValue"in e.value){let i=ht(e.value?.sourceValue,20);const a=ht(e.value?.nodeValue,20);i=i===a?"":"source: "+i,n+=` = ${a} ${i}`}else"value"in e.value&&e.value.value!==void 0&&(n+=` = ${e.value.value}`);"ancestors"in e.value&&(n+=` (ancestors: ${e.value.ancestors.join(", ")})`)}n+=`
`;for(const i of e.childrenStore)n+=hf(i,r+1);return n};function*Mt(e,r={}){Vt(e,"node");const n=r.filter??"none",i=a=>n==="none"?[!0,Ot(a)]:n==="leaves"&&Ot(a)?[!0,!0]:n==="branches"&&!Ot(a)?[!0,!1]:[!1,Ot(a)];if(Array.isArray(e))for(const[a,s]of e.entries()){const o=i(s);o[0]&&(yield{name:a.toString(),sourceValue:s,nodeValue:o[1]?s:void 0})}else if(typeof e=="object"){const a="entries"in e?e.entries():Object.entries(e);for(const[s,o]of a){const u=i(o);u[0]&&(yield{name:s,sourceValue:o,nodeValue:u[1]?o:void 0})}}}function*df(e,r={},n=[]){for(const i of Mt(e,r))yield{...i,ancestors:[...n]},yield*df(i.sourceValue,r,[...n,i.name])}function gv(e,r){for(const n of Mt(r))if(n.name===e)return n}function xv(e,r,n={}){const i=Kl(yf(e,r,n));if(!i)throw new Error(`Could not trace path: ${e} `);return i}function*yf(e,r,n={}){Vt(e,"path"),Vt(r,"node");const i=n.separator??".",a=e.split(i),s=[];for(const o of a){const u=gv(o,r);if(!u){yield{name:o,sourceValue:void 0,nodeValue:void 0,ancestors:s};return}r=u.sourceValue,yield{...u,ancestors:[...s]},s.push(o)}}var Ri=(e,r={},n=[],i)=>{const a=r.name??"object",s={*children(){for(const o of Mt(e,r))yield Ri(o.sourceValue,{...r,name:o.name},[...n,a],s)},getParent(){return i},getValue(){return{name:a,value:e,ancestors:n}},getIdentity(){return e}};return s},wv=(e,r)=>Ie(_i(e,r)),_i=(e,r={})=>{const i=r.valuesAtLeaves??!1?a=>{if(Ot(a))return a}:a=>a;return mf(e,i(e),r,[])},mf=(e,r,n={},i)=>{const a=n.name??"object_ci",s=tn({name:a,value:r,ancestors:[...i]});i=[...i,a];for(const o of Mt(e,n)){const u=n.valuesAtLeaves?o.nodeValue:o.sourceValue;Oi(mf(o.sourceValue,u,{...n,name:o.name},i),s)}return s},bv=(e,r={})=>Pi(_i(e,r));function Ev(e,r=""){return"name"in e&&"nodeValue"in e&&"sourceValue"in e?e:"name"in e?{name:e.name,nodeValue:e,sourceValue:e}:{name:r,nodeValue:e,sourceValue:e}}var pf={};S(pf,{addValueByPath:()=>vf,childrenLengthByPath:()=>zv,clearValuesByPath:()=>xf,create:()=>Mv,removeByPath:()=>gf,valueByPath:()=>wf,valuesByPath:()=>ki});var Mv=(e={})=>{let r;return{add:(h,d)=>{const y=vf(h,d,r,e);r===void 0&&(r=Bi(y))},prettyPrint:()=>r===void 0?"(empty)":Ii(r),remove:h=>r===void 0?!1:gf(h,r,e),getValue:h=>{if(r!==void 0)return wf(h,r,e)},getValues:h=>r===void 0?[]:ki(h,r,e),hasPath:h=>r===void 0?!1:ct(h,r,e)!==void 0,childrenLength:h=>{if(r===void 0)return 0;const d=ct(h,r,e);return d===void 0?0:d.childrenStore.length},getNode:h=>r===void 0?void 0:ct(h,r,e),clearValues:h=>r===void 0?!1:xf(h,r,e)}},vf=(e,r,n,i={})=>{const a=i.separator??".",s=i.duplicates??"overwrite",o=r.split(a);let u=0;for(const l of o){const f=u===o.length-1,c=Ti(l,n);if(c===void 0)n=rr({value:f?e:void 0,label:l},n);else if(n=c,f)switch(s){case"ignore":break;case"allow":{const h=bf(n);n.value={values:[...h,e],label:l};break}case"overwrite":{n.value={value:e,label:l};break}}else n=c;u++}if(n===void 0)throw new Error("Could not create tree");return n},gf=(e,r,n={})=>{if(r===void 0)return!1;const i=ct(e,r,n);return i===void 0?!1:($i(i),!0)},xf=(e,r,n={})=>{if(r===void 0)return!1;const i=ct(e,r,n);return i===void 0?!1:(i.value={label:i.value?.label??"",value:void 0},!0)},zv=(e,r,n={})=>{if(r===void 0)return 0;const i=ct(e,r,n);return i===void 0?0:i.childrenStore.length},Ti=(e,r)=>{if(r!==void 0){if(e===void 0)throw new Error("Parameter 'label' cannot be undefined");if(r.value?.label===e)return r;for(const n of r.childrenStore)if(n.value?.label===e)return n}},wf=(e,r,n={})=>{const i=ki(e,r,n);if(i.length!==0){if(i.length>1)throw new Error("Multiple values at path. Use getValues instead");return i[0]}},bf=e=>e.value===void 0?[]:"values"in e.value?e.value.values:"value"in e.value?e.value.value===void 0?[]:[e.value.value]:[],ct=(e,r,n={})=>{const i=n.separator??".",a=e.split(i);let s=r;for(const o of a)if(s=Ti(o,s),s===void 0)return;return s},ki=(e,r,n={})=>{const i=n.separator??".",a=e.split(i);let s=r;for(const o of a)if(s=Ti(o,s),s===void 0)return[];return bf(s)},Ef={};S(Ef,{breadthFirst:()=>zt,childrenLength:()=>Nv,couldAddChild:()=>Cv,depthFirst:()=>qi,find:()=>Iv,findAnyChildByValue:()=>Ov,findAnyParentByValue:()=>$v,findByValue:()=>Rv,findChildByValue:()=>Nf,findParentByValue:()=>Fi,followValue:()=>Sf,hasAnyChild:()=>Vn,hasAnyChildValue:()=>Av,hasAnyParent:()=>Sv,hasAnyParentValue:()=>Pv,hasChild:()=>Mf,hasChildValue:()=>zf,hasParent:()=>Li,hasParentValue:()=>Vi,parents:()=>Bv,siblings:()=>jv,toString:()=>_v,toStringDeep:()=>Pf});var Nv=e=>[...e.children()].length,Sv=(e,r,n)=>Li(e,r,n,Number.MAX_SAFE_INTEGER),Pv=(e,r,n)=>Vi(e,r,n,Number.MAX_SAFE_INTEGER),$v=(e,r,n)=>Fi(e,r,n,Number.MAX_SAFE_INTEGER),Li=(e,r,n=j,i=0)=>{if(i<0)return!1;const a=e.getParent();return a===void 0?!1:n(a,r)||n(a.getIdentity(),r.getIdentity())?!0:Li(a,r,n,i-1)},Vi=(e,r,n=j,i=0)=>{if(i<0)return!1;const a=e.getParent();return a===void 0?!1:n(a.getValue(),r)?!0:Vi(a,r,n,i-1)},Fi=(e,r,n=j,i=0)=>{if(i<0)return;const a=e.getParent();if(a!==void 0)return n(a.getValue(),r)?a:Fi(a,r,n,i-1)},Cv=(e,r,n=j)=>{if(n(e,r))throw new Error("Child equals parent");if(Vn(e,r,n))throw new Error("Circular. Parent already has child");if(Vn(r,e,n))throw new Error("Prospective child has parent as child relation")},Vn=(e,r,n=j)=>Mf(e,r,n,Number.MAX_SAFE_INTEGER),Av=(e,r,n=j)=>zf(e,r,n,Number.MAX_SAFE_INTEGER),Mf=(e,r,n=j,i=0)=>{if(i<0)return!1;if(n(e,r)||n(e.getIdentity(),r.getIdentity()))return!0;for(const a of zt(e,i))if(n(a,r)||n(a.getIdentity(),r.getIdentity()))return!0;return!1},zf=(e,r,n=j,i=0)=>{if(i<0)return!1;if(n(e.getValue(),r))return!0;for(const a of zt(e,i))if(n(a.getValue(),r))return!0;return!1};function*jv(e){const r=e.getParent();if(r!==void 0)for(const n of r.children())n!==e&&(yield n)}function*Bv(e){let r=e.getParent();for(;r!==void 0;)yield r,r=r.getParent()}var Ov=(e,r,n=j)=>Nf(e,r,n,Number.MAX_SAFE_INTEGER),Nf=(e,r,n=j,i=0)=>{if(!(i<0)){if(n(e.getValue(),r))return e;for(const a of zt(e,i))if(n(a.getValue(),r))return a}};function*qi(e){if(!e)return;const r=new Qr;let n=e;for(;n;){const i=[...n.children()];if(r.push(...i),r.isEmpty)break;n=r.pop(),n&&(yield n)}}function*zt(e,r=Number.MAX_SAFE_INTEGER){if(!e)return;const n=new Et;let i=e;for(;i;){if(r<0)return;for(const a of i.children())yield a,n.enqueue(a);i=n.dequeue(),r--}}function Iv(e,r,n="breadth"){if(r(e))return e;const i=n==="breadth"?zt:qi;for(const a of i(e))if(r(a))return a}function Rv(e,r,n="breadth"){if(r(e.getValue()))return e;const i=n==="breadth"?zt:qi;for(const a of i(e))if(r(a.getValue()))return a}function*Sf(e,r,n=1){for(const i of e.children())r(i.getValue(),n)&&(yield i.getValue(),yield*Sf(i,r,n+1))}function Pf(e,r=0){if(e===void 0)return"(undefined)";if(e===null)return"(null)";const n=e.getValue();let i=typeof n;Array.isArray(n)&&(i="array");let a="  ".repeat(r)+`value: ${JSON.stringify(n)} (${i})
`;for(const s of e.children())a+=Pf(s,r+1);return a}function _v(...e){let r="";for(const n of e){const i=n.getValue(),a=ht(i),s=[...n.children()],o=n.getParent();let u=typeof i;Array.isArray(i)&&(u="array"),r+=`value: ${a} (${u}) kids: ${s.length} parented: ${o?"y":"n"}
`}return r}var Tv=e=>{if(Cf(e))return e;if($f(e))return gt(e);if(typeof e=="object")return Ri(e);throw new Error("Parameter 'node' not convertible")},$f=e=>!!("parent"in e&&"childrenStore"in e&&"value"in e&&Array.isArray(e.childrenStore)),Cf=e=>"children"in e&&"getParent"in e&&"getValue"in e&&"getIdentity"in e,kv=class Af extends Array{#e;#t;constructor(r=0){super();Y(r,"positive","capacity"),this.#e=r,this.#t=0}add(r){const n=Af.from(this);return n[this.#t]=r,n.#e=this.#e,this.#e>0?n.#t=this.#t+1===this.#e?0:this.#t+1:n.#t=this.#t+1,n}get pointer(){return this.#t}get isFull(){return this.#e===0?!1:this.length===this.#e}},Di=e=>new kv(e),jf={};S(jf,{ExpiringMap:()=>Bf,MapOfMutableImpl:()=>rn,MapOfSimpleMutable:()=>to,NumberMap:()=>Hv,addKeepingExisting:()=>mo,addObject:()=>jn,deleteByValue:()=>Yh,expiringMap:()=>Lv,filter:()=>go,find:()=>wo,firstEntryByIterablePredicate:()=>Zh,firstEntryByIterableValue:()=>Xh,fromIterable:()=>xo,fromObject:()=>Uh,getClosestIntegerKey:()=>Jh,getFromKeys:()=>Hh,getOrGenerate:()=>Ep,getOrGenerateSync:()=>bp,hasAnyValue:()=>vo,hasKeyValue:()=>Kh,immutable:()=>Je,mapOfSimpleMutable:()=>ro,mapToArray:()=>nd,mapToObjectTransform:()=>ed,mergeByKey:()=>id,mutable:()=>Dv,ofArrayMutable:()=>Kv,ofCircularMutable:()=>Jv,ofSetMutable:()=>Gv,some:()=>Qh,sortByValue:()=>Wh,sortByValueProperty:()=>po,toArray:()=>An,toObject:()=>rd,transformMap:()=>td,zipKeyValue:()=>ei});var Lv=(e={})=>new Bf(e),Bf=class extends Yt{capacity;store;evictPolicy;autoDeleteElapsedMs;autoDeletePolicy;constructor(e={}){super();if(this.capacity=e.capacity??-1,Y(this.capacity,"nonZero","capacity"),this.store=new Map,e.evictPolicy&&this.capacity<=0)throw new Error("evictPolicy is set, but no capacity limit is set");this.evictPolicy=e.evictPolicy??"none",this.autoDeleteElapsedMs=e.autoDeleteElapsedMs??-1,this.autoDeletePolicy=e.autoDeletePolicy??"none",this.autoDeleteElapsedMs>0&&setInterval(()=>{this.#e()},Math.max(1e3,this.autoDeleteElapsedMs*2))}get keyLength(){return this.store.size}*entries(){for(const e of this.store.entries())yield[e[0],e[1].value]}*values(){for(const e of this.store.values())yield e.value}*keys(){yield*this.store.keys()}elapsedSet(e){const r=this.store.get(e);return r&&Date.now()-r.lastSet}elapsedGet(e){const r=this.store.get(e);return r&&Date.now()-r.lastGet}has(e){return this.store.has(e)}get(e){const r=this.store.get(e);if(r)return r.value}delete(e){const r=this.store.get(e);if(!r)return!1;const n=this.store.delete(e);return this.fireEvent("removed",{key:e,value:r.value}),n}clear(){this.store.clear()}touch(e){const r=this.store.get(e);return r?(this.store.set(e,{...r,lastSet:Date.now(),lastGet:Date.now()}),!0):!1}findEvicteeKey(){if(this.evictPolicy==="none")return;let e="";if(this.evictPolicy==="oldestGet")e="lastGet";else if(this.evictPolicy==="oldestSet")e="lastSet";else throw new Error(`Unknown eviction policy ${this.evictPolicy}`);return po(this.store,e)[0][0]}#e(){this.autoDeletePolicy!=="none"&&this.deleteWithElapsed(this.autoDeleteElapsedMs,this.autoDeletePolicy)}deleteWithElapsed(e,r){const n=[...this.store.entries()],i=[],a=Wn(e,1e3),s=Date.now();for(const o of n){const u=s-o[1].lastGet,l=s-o[1].lastSet;(r==="get"?u:r==="set"?l:Math.max(u,l))>=a&&i.push([o[0],o[1].value])}for(const o of i){this.store.delete(o[0]);const u={key:o[0],value:o[1]};this.fireEvent("expired",u),this.fireEvent("removed",u)}return i}set(e,r){const n=this.store.get(e);if(n){this.store.set(e,{...n,lastSet:performance.now()});return}if(this.keyLength===this.capacity&&this.capacity>0){const i=this.findEvicteeKey();if(!i)throw new Error(`ExpiringMap full (capacity: ${this.capacity})`);const a=this.store.get(i);if(this.store.delete(i),a){const s={key:i,value:a.value};this.fireEvent("expired",s),this.fireEvent("removed",s)}}this.store.set(e,{lastGet:0,lastSet:Date.now(),value:r}),this.fireEvent("newKey",{key:e,value:r})}},Vv=(e,r)=>{const n=new Map(e.entries());for(const i of r){if(i[0]===void 0)throw new Error("key cannot be undefined");if(i[1]===void 0)throw new Error("value cannot be undefined");n.set(i[0],i[1])}return n},Fv=(e,r)=>{const n=new Map(e.entries());for(const i of r){if(i.key===void 0)throw new Error("key cannot be undefined");if(i.value===void 0)throw new Error("value cannot be undefined");n.set(i.key,i.value)}return n},qv=(e,r)=>e.has(r),_t=(e,...r)=>{if(e===void 0)throw new Error("map parameter is undefined");if(r===void 0)throw new Error("data parameter i.s undefined");if(r.length===0)return e;const n=r[0];return typeof n.key<"u"&&typeof n.value<"u"?Fv(e,r):Vv(e,r)},Of=(e,r,n)=>{const i=new Map(e.entries());return i.set(r,n),i},If=(e,r)=>{const n=new Map(e.entries());return n.delete(r),n},Je=e=>{if(e===void 0)return Je([]);if(Array.isArray(e))return Je(_t(new Map,...e));const r=e;return{add:(...n)=>{const i=_t(r,...n);return Je(i)},set:(n,i)=>{const a=Of(r,n,i);return Je(a)},get:n=>r.get(n),delete:n=>Je(If(r,n)),clear:()=>Je(),has:n=>r.has(n),entries:()=>r.entries(),values:()=>r.values(),isEmpty:()=>r.size===0}},Dv=(...e)=>{let r=_t(new Map,...e);return{add:(...n)=>{r=_t(r,...n)},delete:n=>{r=If(r,n)},clear:()=>{r=_t(new Map)},set:(n,i)=>{r=Of(r,n,i)},get:n=>r.get(n),entries:()=>r.entries(),values:()=>r.values(),isEmpty:()=>r.size===0,has:n=>qv(r,n)}},rn=class extends Yt{#e=new Map;groupBy;type;constructor(e,r={}){super();this.type=e,this.groupBy=r.groupBy??Ce}get typeName(){return this.type.name}get lengthKeys(){return this.#e.size}get lengthMax(){let e=0;for(const r of this.#e.values())e=Math.max(e,this.type.count(r));return e}debugString(){const e=[...this.#e.keys()];let r=`Keys: ${e.join(", ")}\r
`;for(const n of e){const i=this.#e.get(n);if(i===void 0)r+=` - ${n} (undefined)\r
`;else{const a=this.type.toArray(i);a!==void 0&&(r+=` - ${n} (${this.type.count(i)}) = ${JSON.stringify(a)}\r
`)}}return r}get isEmpty(){return this.#e.size===0}clear(){this.#e.clear(),super.fireEvent("clear",!0)}addKeyedValues(e,...r){const n=this.#e.get(e);n===void 0?(this.#e.set(e,this.type.add(void 0,r)),super.fireEvent("addedKey",{key:e}),super.fireEvent("addedValues",{values:r})):(this.#e.set(e,this.type.add(n,r)),super.fireEvent("addedValues",{values:r}))}set(e,r){return this.addKeyedValues(e,...r),this}addValue(...e){for(const r of e)this.addKeyedValues(this.groupBy(r),r)}hasKeyValue(e,r,n){const i=this.#e.get(e);return i===void 0?!1:this.type.has(i,r,n)}has(e){return this.#e.has(e)}deleteKeyValue(e,r){const n=this.#e.get(e);return n===void 0?!1:this.deleteKeyValueFromMap(n,e,r)}deleteKeyValueFromMap(e,r,n){const i=this.type.count(e),a=this.type.without(e,n),s=a.length;return this.#e.set(r,this.type.add(void 0,a)),i>s}deleteByValue(e){let r=!1;return[...this.#e.keys()].filter(n=>{const i=this.#e.get(n);if(!i)throw new Error("Bug: map could not be accessed");this.deleteKeyValueFromMap(i,n,e)&&(r=!0,this.count(n)===0&&this.delete(n))}),r}delete(e){return this.#e.get(e)===void 0?!1:(this.#e.delete(e),this.fireEvent("deleteKey",{key:e}),!0)}firstKeyByValue(e,r=j){return[...this.#e.keys()].find(a=>{const s=this.#e.get(a);if(s===void 0)throw new Error("Bug: map could not be accessed");return this.type.has(s,e,r)})}count(e){const r=this.#e.get(e);return r===void 0?0:this.type.count(r)}*get(e){const r=this.#e.get(e);r!==void 0&&(yield*this.type.iterable(r))}*valuesFor(e){const r=this.#e.get(e);r!==void 0&&(yield*this.type.iterable(r))}getSource(e){return this.#e.get(e)}*keys(){yield*this.#e.keys()}*entriesFlat(){for(const e of this.#e.entries())for(const r of this.type.iterable(e[1]))yield[e[0],r]}*valuesFlat(){for(const e of this.#e.entries())yield*this.type.iterable(e[1])}*entries(){for(const[e,r]of this.#e.entries()){const n=[...this.type.iterable(r)];yield[e,n]}}*keysAndCounts(){for(const e of this.keys())yield[e,this.count(e)]}merge(e){for(const r of e.keys()){const n=e.get(r);this.addKeyedValues(r,...n)}}get size(){return this.#e.size}get[Symbol.toStringTag](){return this.#e[Symbol.toStringTag]}},Gv=e=>{const r=e?.hash??Ce,n=(s,o)=>r(s)===r(o),i={get name(){return"set"},iterable:s=>s.values(),add:(s,o)=>mo(s,r,...o),count:s=>s.size,find:(s,o)=>wo(s,o),filter:(s,o)=>go(s,o),toArray:s=>An(s),has:(s,o)=>vo(s,o,n),without:(s,o)=>Ur(An(s),o,n)};return new rn(i,e)},Jv=e=>{const r=j,n={get name(){return"circular"},add:(i,a)=>{i===void 0&&(i=Di(e.capacity));for(const s of a)i=i.add(s);return i},count:i=>i.length,find:(i,a)=>i.find(a),filter:(i,a)=>i.filter(a),toArray:i=>i,iterable:i=>i.values(),has:(i,a)=>i.find(s=>r(s,a))!==void 0,without:(i,a)=>i.filter(s=>!r(s,a))};return new rn(n,e)},Hv=class extends Map{defaultValue;constructor(e=0){super();this.defaultValue=e}get(e){const r=super.get(e);return r===void 0?this.defaultValue:r}reset(e){return super.set(e,this.defaultValue),this.defaultValue}multiply(e,r){let i=super.get(e)??this.defaultValue;return i*=r,super.set(e,i),i}add(e,r=1){let i=super.get(e)??this.defaultValue;return i+=r,super.set(e,i),i}subtract(e,r=1){let i=super.get(e)??this.defaultValue;return i-=r,super.set(e,i),i}},Kv=(e={})=>{const r=e.convertToString,n=typeof r>"u"?j:(o,u)=>r(o)===r(u),i=e.comparer??n,a={get name(){return"array"},add:(o,u)=>o===void 0?[...u]:[...o,...u],iterable:o=>o.values(),count:o=>o.length,find:(o,u)=>o.find(l=>u(l)),filter:(o,u)=>o.filter(l=>u(l)),toArray:o=>o,has:(o,u)=>o.some(l=>i(l,u)),without:(o,u)=>o.filter(l=>!i(l,u))};return new rn(a,e)},is=(e,r)=>{let n,i=Number.MIN_SAFE_INTEGER;for(const a of e){const s=r(a);s>=i&&(i=s,n=a)}return n},as=(e,r)=>{let n,i=Number.MAX_SAFE_INTEGER;for(const a of e){const s=r(a);s<=i&&(i=s,n=a)}return n},z2=(e,r,n=j)=>{const i=[],a=[],s=[];for(const u of e){let l=!1;for(const f of r)if(n(u,f)){l=!0;break}l?i.push(u):a.push(u)}for(const u of r){let l=!1;for(const f of e)n(u,f)&&(l=!0);l||s.push(u)}const o=a.length===0&&s.length===0;return{shared:i,isSame:o,a,b:s}},Rf={};S(Rf,{QueueMutable:()=>Et,immutable:()=>Yv,mutable:()=>zp,priority:()=>Xv});var _f=class Fn{opts;#e;constructor(r={},n=[]){if(r===void 0)throw new Error("opts parameter undefined");this.opts=r,this.#e=n}forEach(r){for(let n=this.#e.length-1;n>=0;n--)r(this.#e[n])}forEachFromFront(r){this.#e.forEach(n=>{r(n)})}enqueue(...r){return new Fn(this.opts,kl(this.opts,this.#e,...r))}dequeue(){return new Fn(this.opts,Ll(this.opts,this.#e))}get isEmpty(){return Vl(this.opts,this.#e)}get isFull(){return Fl(this.opts,this.#e)}get length(){return this.#e.length}get peek(){return kn(this.opts,this.#e)}toArray(){return[...this.#e]}},Yv=(e={},...r)=>(e={...e},new _f(e,[...r])),Zv=class extends Et{constructor(e={}){e.eq===void 0&&(e={...e,eq:(r,n)=>j(r.item,n.item)});super(e)}enqueueWithPriority(e,r){x(r,"positive"),super.enqueue({item:e,priority:r})}changePriority(e,r,n=!1,i){if(e===void 0)throw new Error("Item cannot be undefined");let a;for(const s of this.data)if(i){if(i(s.item,e)){a=s;break}}else if(this.eq(s,{item:e,priority:0})){a=s;break}if(a===void 0&&!n)throw new Error(`Item not found in priority queue. Item: ${JSON.stringify(e)}`);a!==void 0&&this.removeWhere(s=>a===s),this.enqueueWithPriority(e,r)}dequeueMax(){const e=is(this.data,r=>r.priority);if(e!==void 0)return this.removeWhere(r=>r===e),e.item}dequeueMin(){const e=as(this.data,r=>r.priority);if(e!==void 0)return this.removeWhere(r=>r===e),e.item}peekMax(){const e=is(this.data,r=>r.priority);if(e!==void 0)return e.item}peekMin(){const e=as(this.data,r=>r.priority);if(e!==void 0)return e.item}};function Xv(e={}){return new Zv(e)}var Wv=(e,r,n=j)=>{if(Pe(e,"arrayA"),Pe(r,"arrayB"),e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(!n(e[i],r[i]))return!1;return!0},Gi=(e,r)=>{if(!Array.isArray(e))throw new Error("Param 'array' is not an array.");if(e.length===0)return!0;const n=r??Qs,i=e[0];return!e.some(s=>!n(i,s))},Tf=(...e)=>{if(e.some(a=>!Array.isArray(a)))throw new Error("All parameters must be an array");const r=e.map(a=>a.length);if(!Gi(r))throw new Error("Arrays must be of same length");const n=[],i=r[0];for(let a=0;a<i;a++)n.push(e.map(s=>s[a]));return n},Uv=(e,r)=>{typeof r=="function"&&(r=bo(e,r));const n=Tf(e,r),[i,a]=n.reduce((s,o)=>[s[0]+o[0]*o[1],s[1]+o[1]],[0,0]);return i/a},Qv=(e,r={})=>{if(e===void 0)throw new Error("'data' is undefined");if(!Array.isArray(e))if("next"in e){(r.startIndex||r.endIndex)&&(e=Dl(e,r.startIndex,r.endIndex));let o=0,u=Number.MAX_SAFE_INTEGER,l=Number.MIN_SAFE_INTEGER,f=0;for(const c of e){if(typeof c!="number")throw new TypeError(`Generator should yield numbers. Got: ${typeof c}`);o+=c,f++,u=Math.min(u,c),l=Math.max(l,c)}return{avg:o/f,total:o,max:l,min:u}}else throw new Error("'data' parameter is neither array or iterable");if(e.length===0)return{total:0,min:0,max:0,avg:0};const n=r.startIndex??0,i=r.endIndex??e.length,a=Gl(e,o=>typeof o=="number"&&!Number.isNaN(o),n,i),s=a.reduce((o,u)=>o+u,0);return{total:s,max:Math.max(...a),min:Math.min(...a),avg:s/a.length}},kf={};S(kf,{additionalValues:()=>Tn,average:()=>ad,averageWeighted:()=>Uv,chunks:()=>t2,circularArray:()=>Di,contains:()=>r2,containsDuplicateInstances:()=>ql,containsDuplicateValues:()=>n2,cycle:()=>e2,dotProduct:()=>Eo,ensureLength:()=>i2,filterAB:()=>Sp,filterBetween:()=>Gl,flatten:()=>a2,groupBy:()=>s2,guardArray:()=>Pe,guardIndex:()=>$r,insertAt:()=>o2,interleave:()=>u2,isContentsTheSame:()=>Gi,isEqual:()=>Wv,max:()=>ud,maxFast:()=>fd,maxIndex:()=>od,mergeByKey:()=>l2,min:()=>sd,minFast:()=>Mo,minIndex:()=>ti,minMaxAvg:()=>Qv,pairwise:()=>fs,pairwiseReduce:()=>Uf,randomElement:()=>Ws,randomElementWeightedSource:()=>Eh,randomIndex:()=>Xs,randomPluck:()=>bh,remove:()=>f2,sample:()=>c2,shuffle:()=>Mh,sortByNumericProperty:()=>Zt,total:()=>ld,totalFast:()=>cd,unique:()=>wp,until:()=>h2,validNumbers:()=>vt,weight:()=>bo,without:()=>Ur,withoutUndefined:()=>Np,zip:()=>Tf});var e2=e=>{const r=[...e];let n=0;const i=()=>(n++,n===r.length&&(n=0),s()),a=()=>(n--,n===-1&&(n=r.length-1),s()),s=()=>r.at(n);return{toArray:()=>[...r],next:i,prev:a,get current(){return s()},select:l=>{if(typeof l=="number")n=l;else{const f=r.indexOf(l);if(f===-1)throw new Error("Could not find value");n=f}}}};function t2(e,r){const n=[];for(let i=0;i<e.length;i+=r)n.push(e.slice(i,i+r));return n}var r2=(e,r,n=j)=>{if(!Array.isArray(e))throw new TypeError("Expects haystack parameter to be an array");if(!Array.isArray(r))throw new TypeError("Expects needles parameter to be an array");for(const i of r){let a=!1;for(const s of e)if(n(i,s)){a=!0;break}if(!a)return!1}return!0},n2=(e,r=Ce)=>{if(!Array.isArray(e))throw new Error("Parameter needs to be an array");try{const n=xo(e,r)}catch{return!0}return!1},i2=(e,r,n="undefined")=>{if(e===void 0)throw new Error("Data undefined");if(!Array.isArray(e))throw new Error("data is not an array");if(e.length===r)return[...e];if(e.length>r)return e.slice(0,r);const i=[...e],a=r-i.length;for(let s=0;s<a;s++)switch(n){case"undefined":{i.push(void 0);break}case"repeat":{i.push(e[s%e.length]);break}case"first":{i.push(e[0]);break}case"last":{i.push(e.at(-1));break}}return i},a2=e=>[...e].flat(),s2=(e,r)=>{const n=new Map;for(const i of e){const a=r(i);let s=n.get(a);s||(s=[],n.set(a,s)),s.push(i)}return n},o2=(e,r,...n)=>{if(!Array.isArray(e))throw new TypeError("Param 'data' is not an arry");return[...e.slice(0,r),...n,...e.slice(r+1)]},u2=(...e)=>{if(e.some(a=>!Array.isArray(a)))throw new Error("All parameters must be an array");const r=e.map(a=>a.length);if(!Gi(r))throw new Error("Arrays must be of same length");const n=[],i=r[0];for(let a=0;a<i;a++)for(const s of e)n.push(s[a]);return n},l2=(e,r,...n)=>{const i=new Map;for(const a of n)for(const s of a){if(s===void 0)continue;const o=e(s);let u=i.get(o);u=u?r(u,s):s,i.set(o,u)}return[...i.values()]},f2=(e,r)=>{if(!Array.isArray(e))throw new TypeError("'data' parameter should be an array");return $r(e,r,"index"),[...e.slice(0,r),...e.slice(r+1)]},c2=(e,r)=>{let n=1;if(r<=1){const a=e.length*r;n=Math.round(e.length/a)}else n=r;if(Y(n,"positive","amount"),n>e.length-1)throw new Error("Subsample steps exceeds array length");const i=[];for(let a=n-1;a<e.length;a+=n)i.push(e[a]);return i},h2=(e,r,n)=>{const i=[];let a=n;for(const s of e){const[o,u]=r(s,a);if(o)break;a=u,i.push(s)}return i},d2={};S(d2,{Arrays:()=>kf,Maps:()=>jf,QueueImmutable:()=>_f,QueueMutable:()=>Et,Queues:()=>Rf,SetStringImmutable:()=>so,SetStringMutable:()=>ao,Sets:()=>no,StackImmutable:()=>Vf,StackMutable:()=>Qr,Stacks:()=>Lf,Trees:()=>Jl,circularArray:()=>Di});var Lf={};S(Lf,{immutable:()=>y2,mutable:()=>nv});var Vf=class qn{opts;data;constructor(r={},n=[]){this.opts=r,this.data=n}push(...r){return new qn(this.opts,Zl(this.opts,this.data,...r))}pop(){return new qn(this.opts,Xl(this.opts,this.data))}forEach(r){this.data.forEach(r)}forEachFromTop(r){[...this.data].reverse().forEach(r)}get isEmpty(){return Wl(this.opts,this.data)}get isFull(){return Ul(this.opts,this.data)}get peek(){return Ln(this.opts,this.data)}get length(){return this.data.length}},y2=(e={},...r)=>new Vf({...e},[...r]);export{fd as $,_p as A,Tp as B,tc as C,Ip as D,Dp as E,Fp as F,Rp as G,Gp as H,Pp as I,qp as J,Hp as K,tv as L,Jp as M,Zp as N,Cp as O,Dl as P,Wp as Q,Ap as R,Yt as S,ev as T,Vp as U,Lp as V,Up as W,Qp as X,jf as Y,Ep as Z,Mo as _,Ws as a,Vr as a$,cd as a0,Et as a1,Qv as a2,ud as a3,jh as a4,z2 as a5,Lh as a6,j as a7,kh as a8,Ot as a9,Rt as aA,R1 as aB,Vf as aC,Ih as aD,N as aE,Fr as aF,Ru as aG,ch as aH,By as aI,w2 as aJ,yd as aK,b2 as aL,Ty as aM,pe as aN,Np as aO,Oy as aP,Wt as aQ,Dy as aR,Vd as aS,ti as aT,lh as aU,Yv as aV,Jv as aW,Kv as aX,I1 as aY,de as aZ,Vy as a_,Dh as aa,df as ab,ei as ac,Zv as ad,Je as ae,Hv as af,Qs as ag,Yi as ah,Gt as ai,p2 as aj,g2 as ak,v2 as al,Qf as am,ec as an,gh as ao,x2 as ap,ad as aq,Uv as ar,Wd as as,U as at,_r as au,Nl as av,ny as aw,I as ax,se as ay,Td as az,Hu as b,ce as b0,Cy as b1,Ft as b2,Ys as b3,fh as b4,Qr as b5,f2 as b6,o2 as b7,je as b8,sp as b9,Ze as bA,Lf as bB,ft as ba,Ue as bb,O1 as bc,Hh as bd,Ay as be,jy as bf,Ro as bg,z1 as bh,vi as bi,Mr as bj,Eo as bk,zh as bl,od as bm,sd as bn,Ka as bo,ld as bp,vt as bq,bo as br,sl as bs,Tu as bt,kf as bu,ai as bv,jo as bw,xl as bx,Nu as by,no as bz,ot as c,Xs as d,sh as e,ls as f,hh as g,Ha as h,Wn as i,bp as j,Qn as k,xh as l,zp as m,M2 as n,E2 as o,$p as p,Rf as q,Sn as r,Mh as s,Ce as t,wp as u,Wv as v,wh as w,Un as x,Yp as y,Kp as z};
