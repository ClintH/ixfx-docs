import{_ as ue,a as $e,b as J,c as R,u as _d,d as ar,e as Ze,f as Ce,s as Md,g as Id,i as zi,o as Wi}from"./chunk-X4RNBMU5.3ea1d229.js";var Bd={};ue(Bd,{SimpleEventEmitter:()=>Ln});var qt,Rd=class{constructor(){$e(this,qt,new Map)}add(e,...n){const r=J(this,qt).get(e);r===void 0?J(this,qt).set(e,n):J(this,qt).set(e,[...r,...n])}keys(){return J(this,qt).keys()}debugString(){let e="";return Array.from(J(this,qt).keys()).every(r=>{const i=J(this,qt).get(r);i!==void 0&&(e+=r+` (${i.length}) = ${JSON.stringify(i)}\r
`)}),e}get(e){return J(this,qt).get(e)}delete(e,n){const r=J(this,qt).get(e);if(r===void 0)return!1;const i=r.filter(a=>a!==n);return J(this,qt).set(e,i),i.length<r.length}clear(){J(this,qt).clear()}};qt=new WeakMap;var Rc=()=>new Rd,lr,Ln=class{constructor(){$e(this,lr,Rc())}fireEvent(e,n){const r=J(this,lr).get(e);r!==void 0&&r.forEach(i=>{try{i(n,this)}catch(a){console.debug("Event listener error: ",a)}})}addEventListener(e,n){J(this,lr).add(e,n)}removeEventListener(e,n){J(this,lr).delete(e,n)}clearEventListeners(){J(this,lr).clear()}};lr=new WeakMap;var Pc={};ue(Pc,{setMutable:()=>Su});var Su=(e=void 0)=>new Pd(e),Pd=class extends Ln{constructor(e=void 0){super();R(this,"store",new Map),R(this,"keyString"),e===void 0&&(e=n=>typeof n=="string"?n:JSON.stringify(n)),this.keyString=e}add(...e){e.forEach(n=>{const r=this.has(n);this.store.set(this.keyString(n),n),super.fireEvent("add",{value:n,updated:r})})}values(){return this.store.values()}clear(){this.store.clear(),super.fireEvent("clear",!0)}delete(e){const n=this.store.delete(this.keyString(e));return n&&super.fireEvent("delete",e),n}has(e){return this.store.has(this.keyString(e))}toArray(){return Array.from(this.store.values())}},_u={};ue(_u,{chunks:()=>Nd,concat:()=>zd,dropWhile:()=>Wd,equals:()=>Ld,every:()=>Od,fill:()=>kd,filter:()=>Td,find:()=>$d,flatten:()=>qd,forEach:()=>jd,map:()=>Ud,max:()=>Vd,min:()=>Hd,range:()=>Kd,reduce:()=>Gd,slice:()=>Jd,some:()=>Yd,takeWhile:()=>Xd,toArray:()=>Zd,unique:()=>Qd,zip:()=>xd});async function*Nd(e,n){let r=[];for await(const i of e)r.push(i),r.length===n&&(yield r,r=[]);r.length>0&&(yield r)}async function*zd(...e){for await(const n of e)yield*n}async function*Wd(e,n){for await(const r of e)if(!n(r)){yield r;break}yield*e}async function Ld(e,n,r){const i=e[Symbol.iterator](),a=n[Symbol.iterator]();for(;;){const u=await i.next(),o=await a.next();if(r!==void 0){if(!r(u.value,o.value))return!1}else if(u.value!==o.value)return!1;if(u.done||o.done)return u.done&&o.done}}async function Od(e,n){let r=!0;for await(const i of e)r=r&&n(i);return r}async function*kd(e,n){for await(const r of e)yield n}async function*Td(e,n){for await(const r of e)!n(r)||(yield r)}async function $d(e,n){for await(const r of e)if(n(r))return r}async function*qd(e){for await(const n of e)Symbol.asyncIterator in n?yield*n:yield n}async function jd(e,n){for await(const r of e)n(r)}async function*Ud(e,n){for await(const r of e)yield n(r)}async function Vd(e,n=(r,i)=>r>i){let r;for await(const i of e){if(!r){r=i;continue}r=n(r,i)?r:i}return r}async function Hd(e,n=(r,i)=>r>i){let r;for await(const i of e){if(!r){r=i;continue}r=n(r,i)?i:r}return r}async function*Kd(e,n){for(let r=0;r<n;r++)yield e++}async function Gd(e,n,r){for await(const i of e)r=n(r,i);return r}async function*Jd(e,n=0,r=Number.POSITIVE_INFINITY){const i=e[Symbol.asyncIterator]();for(;n>0;n--,r--)await i.next();for await(const a of e)if(r-- >0)yield a;else break}async function Yd(e,n){for await(const r of e)if(n(r))return!0;return!1}async function*Xd(e,n){for await(const r of e){if(!n(r))return;yield r}}async function Zd(e,n=1/0){const r=[],i=e[Symbol.asyncIterator]();for(;r.length<n;){const{value:a,done:u}=await i.next();if(u)break;r.push(a)}return r}async function*Qd(e,n=r=>r){const r=[];for await(const i of e){const a=n(i);r.indexOf(a)===-1&&(r.push(a),yield i)}}async function*xd(...e){const n=e.map(r=>r[Symbol.asyncIterator]());for(;;){const r=await Promise.all(n.map(i=>i.next()));if(r.some(i=>i.done))return;yield r.map(i=>i.value)}}var ie=(e,n="",r="?")=>{if(typeof e>"u")throw new Error(`Parameter ${r} is undefined`);if(Number.isNaN(e))throw new Error(`Parameter '${r}' is NaN`);if(typeof e!="number")throw new Error(`Parameter '${r}' is not a number (${e})`);switch(n){case"positive":if(e<0)throw new Error(`Parameter '${r}' must be at least zero (${e})`);break;case"negative":if(e>0)throw new Error(`Parameter '${r}' must be zero or lower (${e})`);break;case"aboveZero":if(e<=0)throw new Error(`Parameter '${r}' must be above zero (${e})`);break;case"belowZero":if(e>=0)throw new Error(`Parameter '${r}' must be below zero (${e})`);break;case"percentage":if(e>1||e<0)throw new Error(`Parameter '${r}' must be in percentage range (0 to 1). (${e})`);break;case"nonZero":if(e===0)throw new Error(`Parameter '${r}' must non-zero. (${e})`);break;case"bipolar":if(e>1||e<-1)throw new Error(`Parameter '${r}' must be in bipolar percentage range (-1 to 1). (${e})`);break}return!0},e0=(e,n="?")=>ie(e,"percentage",n),Ue=(e,n="",r="?")=>{if(ie(e,n,r),!Number.isInteger(e))throw new Error(`Paramter ${r} is not an integer`)},t0=e=>Array.isArray(e)?e.find(n=>typeof n!="string")===void 0:!1,n0=(e,n="?")=>{if(!Array.isArray(e))throw new Error(`Parameter '${n}' is expected to be an array'`)},r0={};ue(r0,{IterableAsync:()=>_u,getFieldByPath:()=>ea,getFieldPaths:()=>Mu,ifNaN:()=>Ya,isEqualDefault:()=>ii,isEqualValueDefault:()=>Wc,isPowerOfTwo:()=>Nc,relativeDifference:()=>i0,roundUpToMultiple:()=>zc,runningiOS:()=>a0,toStringDefault:()=>Qr});var Ya=(e,n)=>Number.isNaN(e)?n:e,Nc=e=>Math.log2(e)%1===0,i0=e=>n=>n/e,ea=(e,n="")=>{if(n.length===0)return e;if(n in e)return e[n];{const r=_d(n,".");return r in e?ea(e[r],n.substring(r.length+1)):void 0}},Mu=e=>{const n=[],r=(i,a="")=>{if(typeof i=="object"){const u=Object.keys(i);a.length>0&&(a+="."),u.forEach(o=>r(i[o],a+o))}else n.push(a)};return r(e),n},zc=(e,n)=>(ie(e,"nonZero","v"),ie(n,"nonZero","muliple"),Math.ceil(e/n)*n),ii=(e,n)=>e===n,Wc=(e,n)=>e===n?!0:Qr(e)===Qr(n),Qr=e=>typeof e=="string"?e:JSON.stringify(e),a0=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;try{typeof window<"u"&&(window.ixfx={...window.ixfx,getFieldByPath:ea,getFieldPaths:Mu})}catch{}var u0=Ze({"node_modules/rxjs/node_modules/tslib/tslib.js"(e,n){var r,i,a,u,o,c,s,l,f,d,g,M,P,q,L,A,_,W,k,C,S,B,U,ae;(function(ee){var pe=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(T){ee(be(pe,be(T)))}):typeof n=="object"&&typeof n.exports=="object"?ee(be(pe,be(n.exports))):ee(be(pe));function be(T,$){return T!==pe&&(typeof Object.create=="function"?Object.defineProperty(T,"__esModule",{value:!0}):T.__esModule=!0),function(K,X){return T[K]=$?$(K,X):X}}})(function(ee){var pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,$){T.__proto__=$}||function(T,$){for(var K in $)Object.prototype.hasOwnProperty.call($,K)&&(T[K]=$[K])};r=function(T,$){if(typeof $!="function"&&$!==null)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");pe(T,$);function K(){this.constructor=T}T.prototype=$===null?Object.create($):(K.prototype=$.prototype,new K)},i=Object.assign||function(T){for(var $,K=1,X=arguments.length;K<X;K++){$=arguments[K];for(var re in $)Object.prototype.hasOwnProperty.call($,re)&&(T[re]=$[re])}return T},a=function(T,$){var K={};for(var X in T)Object.prototype.hasOwnProperty.call(T,X)&&$.indexOf(X)<0&&(K[X]=T[X]);if(T!=null&&typeof Object.getOwnPropertySymbols=="function")for(var re=0,X=Object.getOwnPropertySymbols(T);re<X.length;re++)$.indexOf(X[re])<0&&Object.prototype.propertyIsEnumerable.call(T,X[re])&&(K[X[re]]=T[X[re]]);return K},u=function(T,$,K,X){var re=arguments.length,x=re<3?$:X===null?X=Object.getOwnPropertyDescriptor($,K):X,ye;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(T,$,K,X);else for(var Fe=T.length-1;Fe>=0;Fe--)(ye=T[Fe])&&(x=(re<3?ye(x):re>3?ye($,K,x):ye($,K))||x);return re>3&&x&&Object.defineProperty($,K,x),x},o=function(T,$){return function(K,X){$(K,X,T)}},c=function(T,$){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(T,$)},s=function(T,$,K,X){function re(x){return x instanceof K?x:new K(function(ye){ye(x)})}return new(K||(K=Promise))(function(x,ye){function Fe(ze){try{ve(X.next(ze))}catch(dt){ye(dt)}}function xe(ze){try{ve(X.throw(ze))}catch(dt){ye(dt)}}function ve(ze){ze.done?x(ze.value):re(ze.value).then(Fe,xe)}ve((X=X.apply(T,$||[])).next())})},l=function(T,$){var K={label:0,sent:function(){if(x[0]&1)throw x[1];return x[1]},trys:[],ops:[]},X,re,x,ye;return ye={next:Fe(0),throw:Fe(1),return:Fe(2)},typeof Symbol=="function"&&(ye[Symbol.iterator]=function(){return this}),ye;function Fe(ve){return function(ze){return xe([ve,ze])}}function xe(ve){if(X)throw new TypeError("Generator is already executing.");for(;K;)try{if(X=1,re&&(x=ve[0]&2?re.return:ve[0]?re.throw||((x=re.return)&&x.call(re),0):re.next)&&!(x=x.call(re,ve[1])).done)return x;switch(re=0,x&&(ve=[ve[0]&2,x.value]),ve[0]){case 0:case 1:x=ve;break;case 4:return K.label++,{value:ve[1],done:!1};case 5:K.label++,re=ve[1],ve=[0];continue;case 7:ve=K.ops.pop(),K.trys.pop();continue;default:if(x=K.trys,!(x=x.length>0&&x[x.length-1])&&(ve[0]===6||ve[0]===2)){K=0;continue}if(ve[0]===3&&(!x||ve[1]>x[0]&&ve[1]<x[3])){K.label=ve[1];break}if(ve[0]===6&&K.label<x[1]){K.label=x[1],x=ve;break}if(x&&K.label<x[2]){K.label=x[2],K.ops.push(ve);break}x[2]&&K.ops.pop(),K.trys.pop();continue}ve=$.call(T,K)}catch(ze){ve=[6,ze],re=0}finally{X=x=0}if(ve[0]&5)throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}},f=function(T,$){for(var K in T)K!=="default"&&!Object.prototype.hasOwnProperty.call($,K)&&ae($,T,K)},ae=Object.create?function(T,$,K,X){X===void 0&&(X=K),Object.defineProperty(T,X,{enumerable:!0,get:function(){return $[K]}})}:function(T,$,K,X){X===void 0&&(X=K),T[X]=$[K]},d=function(T){var $=typeof Symbol=="function"&&Symbol.iterator,K=$&&T[$],X=0;if(K)return K.call(T);if(T&&typeof T.length=="number")return{next:function(){return T&&X>=T.length&&(T=void 0),{value:T&&T[X++],done:!T}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")},g=function(T,$){var K=typeof Symbol=="function"&&T[Symbol.iterator];if(!K)return T;var X=K.call(T),re,x=[],ye;try{for(;($===void 0||$-- >0)&&!(re=X.next()).done;)x.push(re.value)}catch(Fe){ye={error:Fe}}finally{try{re&&!re.done&&(K=X.return)&&K.call(X)}finally{if(ye)throw ye.error}}return x},M=function(){for(var T=[],$=0;$<arguments.length;$++)T=T.concat(g(arguments[$]));return T},P=function(){for(var T=0,$=0,K=arguments.length;$<K;$++)T+=arguments[$].length;for(var X=Array(T),re=0,$=0;$<K;$++)for(var x=arguments[$],ye=0,Fe=x.length;ye<Fe;ye++,re++)X[re]=x[ye];return X},q=function(T,$,K){if(K||arguments.length===2)for(var X=0,re=$.length,x;X<re;X++)(x||!(X in $))&&(x||(x=Array.prototype.slice.call($,0,X)),x[X]=$[X]);return T.concat(x||Array.prototype.slice.call($))},L=function(T){return this instanceof L?(this.v=T,this):new L(T)},A=function(T,$,K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var X=K.apply(T,$||[]),re,x=[];return re={},ye("next"),ye("throw"),ye("return"),re[Symbol.asyncIterator]=function(){return this},re;function ye(Re){X[Re]&&(re[Re]=function(ut){return new Promise(function(Rt,Yt){x.push([Re,ut,Rt,Yt])>1||Fe(Re,ut)})})}function Fe(Re,ut){try{xe(X[Re](ut))}catch(Rt){dt(x[0][3],Rt)}}function xe(Re){Re.value instanceof L?Promise.resolve(Re.value.v).then(ve,ze):dt(x[0][2],Re)}function ve(Re){Fe("next",Re)}function ze(Re){Fe("throw",Re)}function dt(Re,ut){Re(ut),x.shift(),x.length&&Fe(x[0][0],x[0][1])}},_=function(T){var $,K;return $={},X("next"),X("throw",function(re){throw re}),X("return"),$[Symbol.iterator]=function(){return this},$;function X(re,x){$[re]=T[re]?function(ye){return(K=!K)?{value:L(T[re](ye)),done:re==="return"}:x?x(ye):ye}:x}},W=function(T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $=T[Symbol.asyncIterator],K;return $?$.call(T):(T=typeof d=="function"?d(T):T[Symbol.iterator](),K={},X("next"),X("throw"),X("return"),K[Symbol.asyncIterator]=function(){return this},K);function X(x){K[x]=T[x]&&function(ye){return new Promise(function(Fe,xe){ye=T[x](ye),re(Fe,xe,ye.done,ye.value)})}}function re(x,ye,Fe,xe){Promise.resolve(xe).then(function(ve){x({value:ve,done:Fe})},ye)}},k=function(T,$){return Object.defineProperty?Object.defineProperty(T,"raw",{value:$}):T.raw=$,T};var be=Object.create?function(T,$){Object.defineProperty(T,"default",{enumerable:!0,value:$})}:function(T,$){T.default=$};C=function(T){if(T&&T.__esModule)return T;var $={};if(T!=null)for(var K in T)K!=="default"&&Object.prototype.hasOwnProperty.call(T,K)&&ae($,T,K);return be($,T),$},S=function(T){return T&&T.__esModule?T:{default:T}},B=function(T,$,K,X){if(K==="a"&&!X)throw new TypeError("Private accessor was defined without a getter");if(typeof $=="function"?T!==$||!X:!$.has(T))throw new TypeError("Cannot read private member from an object whose class did not declare it");return K==="m"?X:K==="a"?X.call(T):X?X.value:$.get(T)},U=function(T,$,K,X,re){if(X==="m")throw new TypeError("Private method is not writable");if(X==="a"&&!re)throw new TypeError("Private accessor was defined without a setter");if(typeof $=="function"?T!==$||!re:!$.has(T))throw new TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?re.call(T,K):re?re.value=K:$.set(T,K),K},ee("__extends",r),ee("__assign",i),ee("__rest",a),ee("__decorate",u),ee("__param",o),ee("__metadata",c),ee("__awaiter",s),ee("__generator",l),ee("__exportStar",f),ee("__createBinding",ae),ee("__values",d),ee("__read",g),ee("__spread",M),ee("__spreadArrays",P),ee("__spreadArray",q),ee("__await",L),ee("__asyncGenerator",A),ee("__asyncDelegator",_),ee("__asyncValues",W),ee("__makeTemplateObject",k),ee("__importStar",C),ee("__importDefault",S),ee("__classPrivateFieldGet",B),ee("__classPrivateFieldSet",U)})}}),o0=Ze({"node_modules/json5/dist/index.js"(e,n){(function(r,i){typeof e=="object"&&typeof n<"u"?n.exports=i():typeof define=="function"&&define.amd?define(i):r.JSON5=i()})(e,function(){function r(h,y){return y={exports:{}},h(y,y.exports),y.exports}var i=r(function(h){var y=h.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=y)}),a=r(function(h){var y=h.exports={version:"2.6.5"};typeof __e=="number"&&(__e=y)});a.version;var u=function(h){return typeof h=="object"?h!==null:typeof h=="function"},o=function(h){if(!u(h))throw TypeError(h+" is not an object!");return h},c=function(h){try{return!!h()}catch{return!0}},s=!c(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),l=i.document,f=u(l)&&u(l.createElement),d=function(h){return f?l.createElement(h):{}},g=!s&&!c(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7}),M=function(h,y){if(!u(h))return h;var F,N;if(y&&typeof(F=h.toString)=="function"&&!u(N=F.call(h))||typeof(F=h.valueOf)=="function"&&!u(N=F.call(h))||!y&&typeof(F=h.toString)=="function"&&!u(N=F.call(h)))return N;throw TypeError("Can't convert object to primitive value")},P=Object.defineProperty,q=s?Object.defineProperty:function(y,F,N){if(o(y),F=M(F,!0),o(N),g)try{return P(y,F,N)}catch{}if("get"in N||"set"in N)throw TypeError("Accessors not supported!");return"value"in N&&(y[F]=N.value),y},L={f:q},A=function(h,y){return{enumerable:!(h&1),configurable:!(h&2),writable:!(h&4),value:y}},_=s?function(h,y,F){return L.f(h,y,A(1,F))}:function(h,y,F){return h[y]=F,h},W={}.hasOwnProperty,k=function(h,y){return W.call(h,y)},C=0,S=Math.random(),B=function(h){return"Symbol(".concat(h===void 0?"":h,")_",(++C+S).toString(36))},U=r(function(h){var y="__core-js_shared__",F=i[y]||(i[y]={});(h.exports=function(N,Y){return F[N]||(F[N]=Y!==void 0?Y:{})})("versions",[]).push({version:a.version,mode:"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),ae=U("native-function-to-string",Function.toString),ee=r(function(h){var y=B("src"),F="toString",N=(""+ae).split(F);a.inspectSource=function(Y){return ae.call(Y)},(h.exports=function(Y,te,oe,Ne){var Ie=typeof oe=="function";Ie&&(k(oe,"name")||_(oe,"name",te)),Y[te]!==oe&&(Ie&&(k(oe,y)||_(oe,y,Y[te]?""+Y[te]:N.join(String(te)))),Y===i?Y[te]=oe:Ne?Y[te]?Y[te]=oe:_(Y,te,oe):(delete Y[te],_(Y,te,oe)))})(Function.prototype,F,function(){return typeof this=="function"&&this[y]||ae.call(this)})}),pe=function(h){if(typeof h!="function")throw TypeError(h+" is not a function!");return h},be=function(h,y,F){if(pe(h),y===void 0)return h;switch(F){case 1:return function(N){return h.call(y,N)};case 2:return function(N,Y){return h.call(y,N,Y)};case 3:return function(N,Y,te){return h.call(y,N,Y,te)}}return function(){return h.apply(y,arguments)}},T="prototype",$=function(h,y,F){var N=h&$.F,Y=h&$.G,te=h&$.S,oe=h&$.P,Ne=h&$.B,Ie=Y?i:te?i[y]||(i[y]={}):(i[y]||{})[T],rt=Y?a:a[y]||(a[y]={}),gt=rt[T]||(rt[T]={}),D,b,z,H;Y&&(F=y);for(D in F)b=!N&&Ie&&Ie[D]!==void 0,z=(b?Ie:F)[D],H=Ne&&b?be(z,i):oe&&typeof z=="function"?be(Function.call,z):z,Ie&&ee(Ie,D,z,h&$.U),rt[D]!=z&&_(rt,D,H),oe&&gt[D]!=z&&(gt[D]=z)};i.core=a,$.F=1,$.G=2,$.S=4,$.P=8,$.B=16,$.W=32,$.U=64,$.R=128;var K=$,X=Math.ceil,re=Math.floor,x=function(h){return isNaN(h=+h)?0:(h>0?re:X)(h)},ye=function(h){if(h==null)throw TypeError("Can't call method on  "+h);return h},Fe=function(h){return function(y,F){var N=String(ye(y)),Y=x(F),te=N.length,oe,Ne;return Y<0||Y>=te?h?"":void 0:(oe=N.charCodeAt(Y),oe<55296||oe>56319||Y+1===te||(Ne=N.charCodeAt(Y+1))<56320||Ne>57343?h?N.charAt(Y):oe:h?N.slice(Y,Y+2):(oe-55296<<10)+(Ne-56320)+65536)}},xe=Fe(!1);K(K.P,"String",{codePointAt:function(y){return xe(this,y)}}),a.String.codePointAt;var ve=Math.max,ze=Math.min,dt=function(h,y){return h=x(h),h<0?ve(h+y,0):ze(h,y)},Re=String.fromCharCode,ut=String.fromCodePoint;K(K.S+K.F*(!!ut&&ut.length!=1),"String",{fromCodePoint:function(y){for(var F=arguments,N=[],Y=arguments.length,te=0,oe;Y>te;){if(oe=+F[te++],dt(oe,1114111)!==oe)throw RangeError(oe+" is not a valid code point");N.push(oe<65536?Re(oe):Re(((oe-=65536)>>10)+55296,oe%1024+56320))}return N.join("")}}),a.String.fromCodePoint;var Rt=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Yt=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,vn=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Ge={Space_Separator:Rt,ID_Start:Yt,ID_Continue:vn},De={isSpaceSeparator:function(y){return typeof y=="string"&&Ge.Space_Separator.test(y)},isIdStartChar:function(y){return typeof y=="string"&&(y>="a"&&y<="z"||y>="A"&&y<="Z"||y==="$"||y==="_"||Ge.ID_Start.test(y))},isIdContinueChar:function(y){return typeof y=="string"&&(y>="a"&&y<="z"||y>="A"&&y<="Z"||y>="0"&&y<="9"||y==="$"||y==="_"||y==="\u200C"||y==="\u200D"||Ge.ID_Continue.test(y))},isDigit:function(y){return typeof y=="string"&&/[0-9]/.test(y)},isHexDigit:function(y){return typeof y=="string"&&/[0-9A-Fa-f]/.test(y)}},ot,Me,Je,ct,Le,Pe,Se,bt,vt,Pt=function(y,F){ot=String(y),Me="start",Je=[],ct=0,Le=1,Pe=0,Se=void 0,bt=void 0,vt=void 0;do Se=Ct(),St[Me]();while(Se.type!=="eof");return typeof F=="function"?At({"":vt},"",F):vt};function At(h,y,F){var N=h[y];if(N!=null&&typeof N=="object")for(var Y in N){var te=At(N,Y,F);te===void 0?delete N[Y]:N[Y]=te}return F.call(h,y,N)}var fe,he,Nt,st,me;function Ct(){for(fe="default",he="",Nt=!1,st=1;;){me=et();var h=zt[fe]();if(h)return h}}function et(){if(ot[ct])return String.fromCodePoint(ot.codePointAt(ct))}function j(){var h=et();return h===`
`?(Le++,Pe=0):h?Pe+=h.length:Pe++,h&&(ct+=h.length),h}var zt={default:function(){switch(me){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":j();return;case"/":j(),fe="comment";return;case void 0:return j(),Ee("eof")}if(De.isSpaceSeparator(me)){j();return}return zt[Me]()},comment:function(){switch(me){case"*":j(),fe="multiLineComment";return;case"/":j(),fe="singleLineComment";return}throw de(j())},multiLineComment:function(){switch(me){case"*":j(),fe="multiLineCommentAsterisk";return;case void 0:throw de(j())}j()},multiLineCommentAsterisk:function(){switch(me){case"*":j();return;case"/":j(),fe="default";return;case void 0:throw de(j())}j(),fe="multiLineComment"},singleLineComment:function(){switch(me){case`
`:case"\r":case"\u2028":case"\u2029":j(),fe="default";return;case void 0:return j(),Ee("eof")}j()},value:function(){switch(me){case"{":case"[":return Ee("punctuator",j());case"n":return j(),tt("ull"),Ee("null",null);case"t":return j(),tt("rue"),Ee("boolean",!0);case"f":return j(),tt("alse"),Ee("boolean",!1);case"-":case"+":j()==="-"&&(st=-1),fe="sign";return;case".":he=j(),fe="decimalPointLeading";return;case"0":he=j(),fe="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":he=j(),fe="decimalInteger";return;case"I":return j(),tt("nfinity"),Ee("numeric",1/0);case"N":return j(),tt("aN"),Ee("numeric",NaN);case'"':case"'":Nt=j()==='"',he="",fe="string";return}throw de(j())},identifierNameStartEscape:function(){if(me!=="u")throw de(j());j();var y=Ft();switch(y){case"$":case"_":break;default:if(!De.isIdStartChar(y))throw Ve();break}he+=y,fe="identifierName"},identifierName:function(){switch(me){case"$":case"_":case"\u200C":case"\u200D":he+=j();return;case"\\":j(),fe="identifierNameEscape";return}if(De.isIdContinueChar(me)){he+=j();return}return Ee("identifier",he)},identifierNameEscape:function(){if(me!=="u")throw de(j());j();var y=Ft();switch(y){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!De.isIdContinueChar(y))throw Ve();break}he+=y,fe="identifierName"},sign:function(){switch(me){case".":he=j(),fe="decimalPointLeading";return;case"0":he=j(),fe="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":he=j(),fe="decimalInteger";return;case"I":return j(),tt("nfinity"),Ee("numeric",st*(1/0));case"N":return j(),tt("aN"),Ee("numeric",NaN)}throw de(j())},zero:function(){switch(me){case".":he+=j(),fe="decimalPoint";return;case"e":case"E":he+=j(),fe="decimalExponent";return;case"x":case"X":he+=j(),fe="hexadecimal";return}return Ee("numeric",st*0)},decimalInteger:function(){switch(me){case".":he+=j(),fe="decimalPoint";return;case"e":case"E":he+=j(),fe="decimalExponent";return}if(De.isDigit(me)){he+=j();return}return Ee("numeric",st*Number(he))},decimalPointLeading:function(){if(De.isDigit(me)){he+=j(),fe="decimalFraction";return}throw de(j())},decimalPoint:function(){switch(me){case"e":case"E":he+=j(),fe="decimalExponent";return}if(De.isDigit(me)){he+=j(),fe="decimalFraction";return}return Ee("numeric",st*Number(he))},decimalFraction:function(){switch(me){case"e":case"E":he+=j(),fe="decimalExponent";return}if(De.isDigit(me)){he+=j();return}return Ee("numeric",st*Number(he))},decimalExponent:function(){switch(me){case"+":case"-":he+=j(),fe="decimalExponentSign";return}if(De.isDigit(me)){he+=j(),fe="decimalExponentInteger";return}throw de(j())},decimalExponentSign:function(){if(De.isDigit(me)){he+=j(),fe="decimalExponentInteger";return}throw de(j())},decimalExponentInteger:function(){if(De.isDigit(me)){he+=j();return}return Ee("numeric",st*Number(he))},hexadecimal:function(){if(De.isHexDigit(me)){he+=j(),fe="hexadecimalInteger";return}throw de(j())},hexadecimalInteger:function(){if(De.isHexDigit(me)){he+=j();return}return Ee("numeric",st*Number(he))},string:function(){switch(me){case"\\":j(),he+=kt();return;case'"':if(Nt)return j(),Ee("string",he);he+=j();return;case"'":if(!Nt)return j(),Ee("string",he);he+=j();return;case`
`:case"\r":throw de(j());case"\u2028":case"\u2029":nt(me);break;case void 0:throw de(j())}he+=j()},start:function(){switch(me){case"{":case"[":return Ee("punctuator",j())}fe="value"},beforePropertyName:function(){switch(me){case"$":case"_":he=j(),fe="identifierName";return;case"\\":j(),fe="identifierNameStartEscape";return;case"}":return Ee("punctuator",j());case'"':case"'":Nt=j()==='"',fe="string";return}if(De.isIdStartChar(me)){he+=j(),fe="identifierName";return}throw de(j())},afterPropertyName:function(){if(me===":")return Ee("punctuator",j());throw de(j())},beforePropertyValue:function(){fe="value"},afterPropertyValue:function(){switch(me){case",":case"}":return Ee("punctuator",j())}throw de(j())},beforeArrayValue:function(){if(me==="]")return Ee("punctuator",j());fe="value"},afterArrayValue:function(){switch(me){case",":case"]":return Ee("punctuator",j())}throw de(j())},end:function(){throw de(j())}};function Ee(h,y){return{type:h,value:y,line:Le,column:Pe}}function tt(h){for(var y=0,F=h;y<F.length;y+=1){var N=F[y],Y=et();if(Y!==N)throw de(j());j()}}function kt(){var h=et();switch(h){case"b":return j(),"\b";case"f":return j(),"\f";case"n":return j(),`
`;case"r":return j(),"\r";case"t":return j(),"	";case"v":return j(),"\v";case"0":if(j(),De.isDigit(et()))throw de(j());return"\0";case"x":return j(),Tt();case"u":return j(),Ft();case`
`:case"\u2028":case"\u2029":return j(),"";case"\r":return j(),et()===`
`&&j(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw de(j());case void 0:throw de(j())}return j()}function Tt(){var h="",y=et();if(!De.isHexDigit(y)||(h+=j(),y=et(),!De.isHexDigit(y)))throw de(j());return h+=j(),String.fromCodePoint(parseInt(h,16))}function Ft(){for(var h="",y=4;y-- >0;){var F=et();if(!De.isHexDigit(F))throw de(j());h+=j()}return String.fromCodePoint(parseInt(h,16))}var St={start:function(){if(Se.type==="eof")throw Oe();_t()},beforePropertyName:function(){switch(Se.type){case"identifier":case"string":bt=Se.value,Me="afterPropertyName";return;case"punctuator":yt();return;case"eof":throw Oe()}},afterPropertyName:function(){if(Se.type==="eof")throw Oe();Me="beforePropertyValue"},beforePropertyValue:function(){if(Se.type==="eof")throw Oe();_t()},beforeArrayValue:function(){if(Se.type==="eof")throw Oe();if(Se.type==="punctuator"&&Se.value==="]"){yt();return}_t()},afterPropertyValue:function(){if(Se.type==="eof")throw Oe();switch(Se.value){case",":Me="beforePropertyName";return;case"}":yt()}},afterArrayValue:function(){if(Se.type==="eof")throw Oe();switch(Se.value){case",":Me="beforeArrayValue";return;case"]":yt()}},end:function(){}};function _t(){var h;switch(Se.type){case"punctuator":switch(Se.value){case"{":h={};break;case"[":h=[];break}break;case"null":case"boolean":case"numeric":case"string":h=Se.value;break}if(vt===void 0)vt=h;else{var y=Je[Je.length-1];Array.isArray(y)?y.push(h):y[bt]=h}if(h!==null&&typeof h=="object")Je.push(h),Array.isArray(h)?Me="beforeArrayValue":Me="beforePropertyName";else{var F=Je[Je.length-1];F==null?Me="end":Array.isArray(F)?Me="afterArrayValue":Me="afterPropertyValue"}}function yt(){Je.pop();var h=Je[Je.length-1];h==null?Me="end":Array.isArray(h)?Me="afterArrayValue":Me="afterPropertyValue"}function de(h){return lt(h===void 0?"JSON5: invalid end of input at "+Le+":"+Pe:"JSON5: invalid character '"+mt(h)+"' at "+Le+":"+Pe)}function Oe(){return lt("JSON5: invalid end of input at "+Le+":"+Pe)}function Ve(){return Pe-=5,lt("JSON5: invalid identifier character at "+Le+":"+Pe)}function nt(h){console.warn("JSON5: '"+mt(h)+"' in strings is not valid ECMAScript; consider escaping")}function mt(h){var y={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(y[h])return y[h];if(h<" "){var F=h.charCodeAt(0).toString(16);return"\\x"+("00"+F).substring(F.length)}return h}function lt(h){var y=new SyntaxError(h);return y.lineNumber=Le,y.columnNumber=Pe,y}var Mt=function(y,F,N){var Y=[],te="",oe,Ne,Ie="",rt;if(F!=null&&typeof F=="object"&&!Array.isArray(F)&&(N=F.space,rt=F.quote,F=F.replacer),typeof F=="function")Ne=F;else if(Array.isArray(F)){oe=[];for(var gt=0,D=F;gt<D.length;gt+=1){var b=D[gt],z=void 0;typeof b=="string"?z=b:(typeof b=="number"||b instanceof String||b instanceof Number)&&(z=String(b)),z!==void 0&&oe.indexOf(z)<0&&oe.push(z)}}return N instanceof Number?N=Number(N):N instanceof String&&(N=String(N)),typeof N=="number"?N>0&&(N=Math.min(10,Math.floor(N)),Ie="          ".substr(0,N)):typeof N=="string"&&(Ie=N.substr(0,10)),H("",{"":y});function H(Ae,Te){var ge=Te[Ae];switch(ge!=null&&(typeof ge.toJSON5=="function"?ge=ge.toJSON5(Ae):typeof ge.toJSON=="function"&&(ge=ge.toJSON(Ae))),Ne&&(ge=Ne.call(Te,Ae,ge)),ge instanceof Number?ge=Number(ge):ge instanceof String?ge=String(ge):ge instanceof Boolean&&(ge=ge.valueOf()),ge){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof ge=="string")return se(ge);if(typeof ge=="number")return String(ge);if(typeof ge=="object")return Array.isArray(ge)?It(ge):we(ge)}function se(Ae){for(var Te={"'":.1,'"':.2},ge={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},Ye="",pt=0;pt<Ae.length;pt++){var Qe=Ae[pt];switch(Qe){case"'":case'"':Te[Qe]++,Ye+=Qe;continue;case"\0":if(De.isDigit(Ae[pt+1])){Ye+="\\x00";continue}}if(ge[Qe]){Ye+=ge[Qe];continue}if(Qe<" "){var Qt=Qe.charCodeAt(0).toString(16);Ye+="\\x"+("00"+Qt).substring(Qt.length);continue}Ye+=Qe}var Lt=rt||Object.keys(Te).reduce(function($t,xt){return Te[$t]<Te[xt]?$t:xt});return Ye=Ye.replace(new RegExp(Lt,"g"),ge[Lt]),Lt+Ye+Lt}function we(Ae){if(Y.indexOf(Ae)>=0)throw TypeError("Converting circular structure to JSON5");Y.push(Ae);var Te=te;te=te+Ie;for(var ge=oe||Object.keys(Ae),Ye=[],pt=0,Qe=ge;pt<Qe.length;pt+=1){var Qt=Qe[pt],Lt=H(Qt,Ae);if(Lt!==void 0){var $t=ke(Qt)+":";Ie!==""&&($t+=" "),$t+=Lt,Ye.push($t)}}var xt;if(Ye.length===0)xt="{}";else{var _n;if(Ie==="")_n=Ye.join(","),xt="{"+_n+"}";else{var Lr=`,
`+te;_n=Ye.join(Lr),xt=`{
`+te+_n+`,
`+Te+"}"}}return Y.pop(),te=Te,xt}function ke(Ae){if(Ae.length===0)return se(Ae);var Te=String.fromCodePoint(Ae.codePointAt(0));if(!De.isIdStartChar(Te))return se(Ae);for(var ge=Te.length;ge<Ae.length;ge++)if(!De.isIdContinueChar(String.fromCodePoint(Ae.codePointAt(ge))))return se(Ae);return Ae}function It(Ae){if(Y.indexOf(Ae)>=0)throw TypeError("Converting circular structure to JSON5");Y.push(Ae);var Te=te;te=te+Ie;for(var ge=[],Ye=0;Ye<Ae.length;Ye++){var pt=H(String(Ye),Ae);ge.push(pt!==void 0?pt:"null")}var Qe;if(ge.length===0)Qe="[]";else if(Ie===""){var Qt=ge.join(",");Qe="["+Qt+"]"}else{var Lt=`,
`+te,$t=ge.join(Lt);Qe=`[
`+te+$t+`,
`+Te+"]"}return Y.pop(),te=Te,Qe}},Wt={parse:Pt,stringify:Mt},Xt=Wt,Zt=Xt;return Zt})}}),Lc={};ue(Lc,{button:()=>gv,checkbox:()=>yv,numeric:()=>mv,select:()=>pv,textAreaKeyboard:()=>vv});var c0=ar(u0(),1),{__extends:Pr,__assign:aE,__rest:uE,__decorate:oE,__param:cE,__metadata:sE,__awaiter:s0,__generator:Oc,__exportStar:lE,__createBinding:fE,__values:Xa,__read:Cr,__spread:hE,__spreadArrays:dE,__spreadArray:xr,__await:Wa,__asyncGenerator:l0,__asyncDelegator:vE,__asyncValues:f0,__makeTemplateObject:yE,__importStar:mE,__importDefault:gE,__classPrivateFieldGet:pE,__classPrivateFieldSet:wE}=c0.default;function qe(e){return typeof e=="function"}function h0(e){var n=function(i){Error.call(i),i.stack=new Error().stack},r=e(n);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var La=h0(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(i,a){return a+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Za(e,n){if(e){var r=e.indexOf(n);0<=r&&e.splice(r,1)}}var ta=function(){function e(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var n,r,i,a,u;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var c=Xa(o),s=c.next();!s.done;s=c.next()){var l=s.value;l.remove(this)}}catch(q){n={error:q}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}else o.remove(this);var f=this.initialTeardown;if(qe(f))try{f()}catch(q){u=q instanceof La?q.errors:[q]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var g=Xa(d),M=g.next();!M.done;M=g.next()){var P=M.value;try{rc(P)}catch(q){u=u??[],q instanceof La?u=xr(xr([],Cr(u)),Cr(q.errors)):u.push(q)}}}catch(q){i={error:q}}finally{try{M&&!M.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}}if(u)throw new La(u)}},e.prototype.add=function(n){var r;if(n&&n!==this)if(this.closed)rc(n);else{if(n instanceof e){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(n)}},e.prototype._hasParent=function(n){var r=this._parentage;return r===n||Array.isArray(r)&&r.includes(n)},e.prototype._addParent=function(n){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(n),r):r?[r,n]:n},e.prototype._removeParent=function(n){var r=this._parentage;r===n?this._parentage=null:Array.isArray(r)&&Za(r,n)},e.prototype.remove=function(n){var r=this._finalizers;r&&Za(r,n),n instanceof e&&n._removeParent(this)},e.EMPTY=function(){var n=new e;return n.closed=!0,n}(),e}();ta.EMPTY;function kc(e){return e instanceof ta||e&&"closed"in e&&qe(e.remove)&&qe(e.add)&&qe(e.unsubscribe)}function rc(e){qe(e)?e():e.unsubscribe()}var Tc={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},d0={setTimeout:function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return setTimeout.apply(void 0,xr([e,n],Cr(r)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function $c(e){d0.setTimeout(function(){throw e})}function ic(){}function v0(e){e()}var Iu=function(e){Pr(n,e);function n(r){var i=e.call(this)||this;return i.isStopped=!1,r?(i.destination=r,kc(r)&&r.add(i)):i.destination=p0,i}return n.create=function(r,i,a){return new Qa(r,i,a)},n.prototype.next=function(r){this.isStopped||this._next(r)},n.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(r){this.destination.next(r)},n.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(ta),y0=Function.prototype.bind;function Oa(e,n){return y0.call(e,n)}var m0=function(){function e(n){this.partialObserver=n}return e.prototype.next=function(n){var r=this.partialObserver;if(r.next)try{r.next(n)}catch(i){vi(i)}},e.prototype.error=function(n){var r=this.partialObserver;if(r.error)try{r.error(n)}catch(i){vi(i)}else vi(n)},e.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(r){vi(r)}},e}(),Qa=function(e){Pr(n,e);function n(r,i,a){var u=e.call(this)||this,o;if(qe(r)||!r)o={next:r??void 0,error:i??void 0,complete:a??void 0};else{var c;u&&Tc.useDeprecatedNextContext?(c=Object.create(r),c.unsubscribe=function(){return u.unsubscribe()},o={next:r.next&&Oa(r.next,c),error:r.error&&Oa(r.error,c),complete:r.complete&&Oa(r.complete,c)}):o=r}return u.destination=new m0(o),u}return n}(Iu);function vi(e){$c(e)}function g0(e){throw e}var p0={closed:!0,next:ic,error:g0,complete:ic},Bu=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function w0(e){return e}function D0(e){return e.length===0?w0:e.length===1?e[0]:function(r){return e.reduce(function(i,a){return a(i)},r)}}var Cn=function(){function e(n){n&&(this._subscribe=n)}return e.prototype.lift=function(n){var r=new e;return r.source=this,r.operator=n,r},e.prototype.subscribe=function(n,r,i){var a=this,u=b0(n)?n:new Qa(n,r,i);return v0(function(){var o=a,c=o.operator,s=o.source;u.add(c?c.call(u,s):s?a._subscribe(u):a._trySubscribe(u))}),u},e.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(r){n.error(r)}},e.prototype.forEach=function(n,r){var i=this;return r=ac(r),new r(function(a,u){var o=new Qa({next:function(c){try{n(c)}catch(s){u(s),o.unsubscribe()}},error:u,complete:a});i.subscribe(o)})},e.prototype._subscribe=function(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)},e.prototype[Bu]=function(){return this},e.prototype.pipe=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return D0(n)(this)},e.prototype.toPromise=function(n){var r=this;return n=ac(n),new n(function(i,a){var u;r.subscribe(function(o){return u=o},function(o){return a(o)},function(){return i(u)})})},e.create=function(n){return new e(n)},e}();function ac(e){var n;return(n=e??Tc.Promise)!==null&&n!==void 0?n:Promise}function E0(e){return e&&qe(e.next)&&qe(e.error)&&qe(e.complete)}function b0(e){return e&&e instanceof Iu||E0(e)&&kc(e)}function A0(e){return qe(e?.lift)}function Ru(e){return function(n){if(A0(n))return n.lift(function(r){try{return e(r,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Li(e,n,r,i,a){return new C0(e,n,r,i,a)}var C0=function(e){Pr(n,e);function n(r,i,a,u,o,c){var s=e.call(this,r)||this;return s.onFinalize=o,s.shouldUnsubscribe=c,s._next=i?function(l){try{i(l)}catch(f){r.error(f)}}:e.prototype._next,s._error=u?function(l){try{u(l)}catch(f){r.error(f)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=a?function(){try{a()}catch(l){r.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,s}return n.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},n}(Iu),F0={now:function(){return Date.now()},delegate:void 0},S0=function(e){Pr(n,e);function n(r,i){return e.call(this)||this}return n.prototype.schedule=function(r,i){return this},n}(ta),uc={setInterval:function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return setInterval.apply(void 0,xr([e,n],Cr(r)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},_0=function(e){Pr(n,e);function n(r,i){var a=e.call(this,r,i)||this;return a.scheduler=r,a.work=i,a.pending=!1,a}return n.prototype.schedule=function(r,i){var a;if(i===void 0&&(i=0),this.closed)return this;this.state=r;var u=this.id,o=this.scheduler;return u!=null&&(this.id=this.recycleAsyncId(o,u,i)),this.pending=!0,this.delay=i,this.id=(a=this.id)!==null&&a!==void 0?a:this.requestAsyncId(o,this.id,i),this},n.prototype.requestAsyncId=function(r,i,a){return a===void 0&&(a=0),uc.setInterval(r.flush.bind(r,this),a)},n.prototype.recycleAsyncId=function(r,i,a){if(a===void 0&&(a=0),a!=null&&this.delay===a&&this.pending===!1)return i;i!=null&&uc.clearInterval(i)},n.prototype.execute=function(r,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(r,i);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(r,i){var a=!1,u;try{this.work(r)}catch(o){a=!0,u=o||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),u},n.prototype.unsubscribe=function(){if(!this.closed){var r=this,i=r.id,a=r.scheduler,u=a.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Za(u,this),i!=null&&(this.id=this.recycleAsyncId(a,i,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},n}(S0),oc=function(){function e(n,r){r===void 0&&(r=e.now),this.schedulerActionCtor=n,this.now=r}return e.prototype.schedule=function(n,r,i){return r===void 0&&(r=0),new this.schedulerActionCtor(this,n).schedule(i,r)},e.now=F0.now,e}(),M0=function(e){Pr(n,e);function n(r,i){i===void 0&&(i=oc.now);var a=e.call(this,r,i)||this;return a.actions=[],a._active=!1,a}return n.prototype.flush=function(r){var i=this.actions;if(this._active){i.push(r);return}var a;this._active=!0;do if(a=r.execute(r.state,r.delay))break;while(r=i.shift());if(this._active=!1,a){for(;r=i.shift();)r.unsubscribe();throw a}},n}(oc),I0=new M0(_0),qc=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function B0(e){return qe(e?.then)}function R0(e){return qe(e[Bu])}function P0(e){return Symbol.asyncIterator&&qe(e?.[Symbol.asyncIterator])}function N0(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function z0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var W0=z0();function L0(e){return qe(e?.[W0])}function O0(e){return l0(this,arguments,function(){var r,i,a,u;return Oc(this,function(o){switch(o.label){case 0:r=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Wa(r.read())];case 3:return i=o.sent(),a=i.value,u=i.done,u?[4,Wa(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Wa(a)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function k0(e){return qe(e?.getReader)}function Pu(e){if(e instanceof Cn)return e;if(e!=null){if(R0(e))return T0(e);if(qc(e))return $0(e);if(B0(e))return q0(e);if(P0(e))return jc(e);if(L0(e))return j0(e);if(k0(e))return U0(e)}throw N0(e)}function T0(e){return new Cn(function(n){var r=e[Bu]();if(qe(r.subscribe))return r.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $0(e){return new Cn(function(n){for(var r=0;r<e.length&&!n.closed;r++)n.next(e[r]);n.complete()})}function q0(e){return new Cn(function(n){e.then(function(r){n.closed||(n.next(r),n.complete())},function(r){return n.error(r)}).then(null,$c)})}function j0(e){return new Cn(function(n){var r,i;try{for(var a=Xa(e),u=a.next();!u.done;u=a.next()){var o=u.value;if(n.next(o),n.closed)return}}catch(c){r={error:c}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}n.complete()})}function jc(e){return new Cn(function(n){V0(e,n).catch(function(r){return n.error(r)})})}function U0(e){return jc(O0(e))}function V0(e,n){var r,i,a,u;return s0(this,void 0,void 0,function(){var o,c;return Oc(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),r=f0(e),s.label=1;case 1:return[4,r.next()];case 2:if(i=s.sent(),!!i.done)return[3,4];if(o=i.value,n.next(o),n.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=s.sent(),a={error:c},[3,11];case 6:return s.trys.push([6,,9,10]),i&&!i.done&&(u=r.return)?[4,u.call(r)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})}function H0(e,n,r,i,a){i===void 0&&(i=0),a===void 0&&(a=!1);var u=n.schedule(function(){r(),a?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(u),!a)return u}function Oi(e,n){return Ru(function(r,i){var a=0;r.subscribe(Li(i,function(u){i.next(e.call(n,u,a++))}))})}var K0=Array.isArray;function G0(e,n){return K0(n)?e.apply(void 0,xr([],Cr(n))):e(n)}function J0(e){return Oi(function(n){return G0(e,n)})}function Y0(e,n,r,i,a,u,o,c){var s=[],l=0,f=0,d=!1,g=function(){d&&!s.length&&!l&&n.complete()},M=function(q){return l<i?P(q):s.push(q)},P=function(q){u&&n.next(q),l++;var L=!1;Pu(r(q,f++)).subscribe(Li(n,function(A){a?.(A),u?M(A):n.next(A)},function(){L=!0},void 0,function(){if(L)try{l--;for(var A=function(){var _=s.shift();o?H0(n,o,function(){return P(_)}):P(_)};s.length&&l<i;)A();g()}catch(_){n.error(_)}}))};return e.subscribe(Li(n,M,function(){d=!0,g()})),function(){c?.()}}function Uc(e,n,r){return r===void 0&&(r=1/0),qe(n)?Uc(function(i,a){return Oi(function(u,o){return n(i,u,a,o)})(Pu(e(i,a)))},r):(typeof n=="number"&&(r=n),Ru(function(i,a){return Y0(i,a,e,r)}))}var X0=["addListener","removeListener"],Z0=["addEventListener","removeEventListener"],Q0=["on","off"];function ki(e,n,r,i){if(qe(r)&&(i=r,r=void 0),i)return ki(e,n,r).pipe(J0(i));var a=Cr(tv(e)?Z0.map(function(c){return function(s){return e[c](n,s,r)}}):x0(e)?X0.map(cc(e,n)):ev(e)?Q0.map(cc(e,n)):[],2),u=a[0],o=a[1];if(!u&&qc(e))return Uc(function(c){return ki(c,n,r)})(Pu(e));if(!u)throw new TypeError("Invalid event target");return new Cn(function(c){var s=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];return c.next(1<l.length?l:l[0])};return u(s),function(){return o(s)}})}function cc(e,n){return function(r){return function(i){return e[r](n,i)}}}function x0(e){return qe(e.addListener)&&qe(e.removeListener)}function ev(e){return qe(e.on)&&qe(e.off)}function tv(e){return qe(e.addEventListener)&&qe(e.removeEventListener)}function Vc(e,n){return n===void 0&&(n=I0),Ru(function(r,i){var a=null,u=null,o=null,c=function(){if(a){a.unsubscribe(),a=null;var l=u;u=null,i.next(l)}};function s(){var l=o+e,f=n.now();if(f<l){a=this.schedule(void 0,l-f),i.add(a);return}c()}r.subscribe(Li(i,function(l){u=l,o=n.now(),a||(a=n.schedule(s,e),i.add(a))},function(){c(),i.complete()},void 0,function(){u=a=null}))})}var Hc=ar(o0(),1),Kc=(e,n)=>{const r=ht(e),i=zu(),a=()=>{const u=window.innerWidth,o=window.innerHeight;r.setAttribute("width",u.toString()),r.setAttribute("height",o.toString());const c={width:u,height:o,center:{x:u/2,y:o/2}};n!==void 0&&n({el:r,bounds:c})};return i.subscribe(a),a(),i},nv=(e,n,r=!1)=>{if(e==null)throw new Error("domQueryOrEl is null or undefined");const i=ht(e);if(i.nodeName!=="CANVAS")throw new Error(`Expected HTML element with node name CANVAS, not ${i.nodeName}`);const a=i.getContext("2d");if(a===null)throw new Error("Could not create drawing context");const u=()=>{const c=window.innerWidth,s=window.innerHeight;i.width=c,i.height=s;const l={width:c,height:s,center:{x:c/2,y:s/2}};n!==void 0&&n({ctx:a,el:i,bounds:l})};r||(i.style.top="0",i.style.left="0",i.style.zIndex="-100",i.style.position="fixed");const o=zu();return o.subscribe(u),u(),o},rv=(e,n)=>{if(!(e===null||!e)){if(!Array.isArray(n))throw new Error("List should be an array of strings");for(let r=0;r<n.length;r++)if(e.classList.contains(n[r])){e.classList.remove(n[r]),r+1<n.length?e.classList.add(n[r+1]):e.classList.add(n[0]);return}e.classList.add(n[0])}},iv=(e,n,r=100)=>{const i=ht(e),a=i.parentElement;if(a===null)throw new Error("Element has no parent");return Wu(a,r).subscribe(o=>{const c=o.find(d=>d.target===a);if(c===void 0)return;const s=c.contentRect.width,l=c.contentRect.height;i.setAttribute("width",s+"px"),i.setAttribute("height",l+"px");const f={width:s,height:l,center:{x:s/2,y:l/2}};n!==void 0&&n({el:i,bounds:f})})},av=e=>{const n=ht(e),i=window.getComputedStyle(n).transform;if(i==="none"||typeof i>"u")return{x:0,y:0,z:0};const a=i.includes("3d")?"3d":"2d",u=i.match(/matrix.*\((.+)\)/)[1].split(", ");return a==="2d"?{x:parseFloat(u[4]),y:parseFloat(u[5]),z:0}:a==="3d"?{x:parseFloat(u[12]),y:parseFloat(u[13]),z:parseFloat(u[14])}:{x:0,y:0,z:0}},Nu=(e,n,r=100)=>{const i=ht(e);if(i.nodeName!=="CANVAS")throw new Error(`Expected HTML element with node name CANVAS, not ${i.nodeName}`);const a=i.parentElement;if(a===null)throw new Error("Element has no parent");const u=i.getContext("2d");if(u===null)throw new Error("Could not create drawing context");return i.style.width="100%",i.style.height="100%",Wu(a,r).subscribe(c=>{const s=c.find(g=>g.target===a);if(s===void 0)return;const l=s.contentRect.width,f=s.contentRect.height;i.setAttribute("width",i.offsetWidth+"px"),i.setAttribute("height",i.offsetHeight+"px");const d={width:l,height:f,center:{x:l/2,y:f/2}};n!==void 0&&n({ctx:u,el:i,bounds:d})})},zu=(e=100)=>ki(window,"resize").pipe(Vc(e)),ht=e=>{if(typeof e=="string"){const r=document.querySelector(e);if(r===null)throw e.startsWith("#")?new Error(`Query '${e}' did not match anything. Try '#id', 'div', or '.class'`):new Error(`Query '${e}' did not match anything. Did you mean '#${e}?`);e=r}else{if(e===null)throw new Error(`domQueryOrEl ${e} is null`);if(e===void 0)throw new Error(`domQueryOrEl ${e} is undefined`)}return e},uv=(e,n)=>{const r=document.createElement(n);return e.parentElement?.insertBefore(r,e.nextSibling),r},ov=(e,n)=>{const r=document.createElement(n);return e.appendChild(r),r},cv=(e,n)=>{const r=ht(e),i=a=>{const u=new Set;for(const[c,s]of a){const l=`table-${c}`;u.add(l);let f=r.querySelector(`#${l}`);f===null&&(f=document.createElement("table"),f.id=l,r.append(f)),xa(f,s)}Array.from(r.querySelectorAll("table")).forEach(c=>{u.has(c.id)||c.remove()})};return n&&i(n),a=>{i(a)}},xa=(e,n,r={})=>{const i=r.precision??2;if(n===void 0){e.innerHTML="";return}const a=new Set;for(const[o,c]of Object.entries(n)){const s=`row-${o}`;a.add(s);let l=e.querySelector(`#${s}`);if(l===null){l=document.createElement("tr"),e.append(l),l.id=s;const g=document.createElement("td");g.innerText=o,l.append(g)}let f=l.querySelector(`#${s}-val`);f===null&&(f=document.createElement("td"),f.id=`${s}-val`,l.append(f));let d;r.formatter&&(d=r.formatter(c,o)),d===void 0&&(typeof c=="object"?d=Hc.default.stringify(c):typeof c=="number"?r.roundNumbers?d=Math.round(c).toString():d=c.toFixed(i):d=c.toString()),f.innerHTML=d}Array.from(e.querySelectorAll("tr")).forEach(o=>{a.has(o.id)||o.remove()})},sv=(e,n,r)=>{const i=ht(e),a=document.createElement("table");return i.append(a),n&&xa(a,n,r),u=>{xa(a,u,r)}},lv=e=>{let n=e.lastElementChild;for(;n;)e.removeChild(n),n=e.lastElementChild},fv=()=>new Cn(n=>{const r=new MutationObserver(a=>{n.next(a)}),i={attributeFilter:["class"],attributes:!0};return r.observe(document.documentElement,i),function(){r.disconnect()}}),Wu=(e,n=1e3)=>{if(e===null)throw new Error("elem parameter is null. Expected element to observe");if(e===void 0)throw new Error("elem parameter is undefined. Expected element to observe");return new Cn(i=>{const a=new ResizeObserver(u=>{i.next(u)});return a.observe(e),function(){a.unobserve(e)}}).pipe(Vc(n))},hv=e=>new Promise((r,i)=>{const a=Hc.default.stringify(e);navigator.clipboard.writeText(JSON.stringify(a)).then(()=>{r(!0)},u=>{console.warn("Could not copy to clipboard"),console.log(a),i(u)})}),dv=(e,n,r)=>{if(e===null)throw new Error("parentEl is null");if(e===void 0)throw new Error("parentEl is undefined");const i=new Set;for(const[u,o]of n){const c=`c-${u}`,s=e.querySelector(`#${c}`),l=r(o,s);s!==l&&(l.id=c,e.append(l)),i.add(c)}const a=[];for(let u=0;u<e.children.length;u++){const o=e.children[u];i.has(o.id)||a.push(o)}a.forEach(u=>u.remove())},vv=e=>{e.addEventListener("keydown",n=>{const r=e.value,i=e.selectionStart,a=e.selectionEnd;if(n.key==="Tab"&&n.shiftKey)return e.value.substring(i-2,i)==="  "&&(e.value=r.substring(0,i-2)+r.substring(a)),e.selectionStart=e.selectionEnd=i-2,n.preventDefault(),!1;if(n.key==="Tab")return e.value=r.substring(0,i)+"  "+r.substring(a),e.selectionStart=e.selectionEnd=i+2,n.preventDefault(),!1})},yv=(e,n)=>{const r=ht(e);return n&&r.addEventListener("change",()=>{n(r.checked)}),{get checked(){return r.checked},set checked(i){r.checked=i}}},mv=(e,n,r)=>{const i=ht(e),a=r?"change":"input";return n&&i.addEventListener(a,()=>{n(parseInt(i.value))}),{get value(){return parseInt(i.value)},set value(u){i.value=u.toString()}}},gv=(e,n)=>{const r=ht(e);return n&&r.addEventListener("click",i=>{n()}),{click(){n&&n()},set disabled(i){r.disabled=i}}},pv=(e,n,r={})=>{const i=ht(e),{placeholderOpt:a,shouldAddChoosePlaceholder:u=!1,autoSelectAfterChoice:o=-1}=r,c=()=>{n!==void 0&&n(i.value),o>=0&&(i.selectedIndex=o)};return n&&i.addEventListener("change",s=>{c()}),{set disabled(s){i.disabled=s},get value(){return i.value},get index(){return i.selectedIndex},get isSelectedPlaceholder(){return(u||r.placeholderOpt!==void 0)&&i.selectedIndex===0},setOpts(s,l){i.options.length=0,u?s=["-- Choose --",...s]:a!==void 0&&(s=[a,...s]);let f=0;s.forEach((d,g)=>{const M=document.createElement("option");M.value=d,M.innerHTML=d,l!==void 0&&d===l&&(f=g),i.options.add(M)}),i.selectedIndex=f},select(s=0,l=!1){i.selectedIndex=s,l&&n&&c()}}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tr=(e,n)=>(Ue(e,"positive","timeoutMs"),e===0?new Promise(r=>requestAnimationFrame(i=>{r(n)})):new Promise(r=>setTimeout(()=>r(n),e))),Gc=async function*(e,n){let r=!1;try{for(;!r;){if(await tr(n),r)return;if(typeof e=="function")yield await e();else if(typeof e=="object")if("next"in e&&"return"in e&&"throw"in e){const i=await e.next();if(i.done)return;yield i.value}else throw new Error("interval: produce param does not seem to be a generator?");else throw new Error("produce param does not seem to return a value/Promise and is not a generator?")}}finally{r=!0}},wv=async(e,n)=>(await tr(n),Promise.resolve(await e()));async function*Dv(){let e,n=new Promise(a=>e=a),r=0;const i=()=>{e(),n=new Promise(a=>e=a)};try{for(;;)r=window.requestAnimationFrame(i),yield await n}finally{e(),window.cancelAnimationFrame(r)}}async function*Lu(e){if(e===0)return yield*Dv();let n,r=new Promise(u=>n=u),i=0;const a=()=>{n(),r=new Promise(u=>n=u)};try{for(;;)i=window.setTimeout(a,e),yield await r}finally{n(),window.clearTimeout(i)}}var Ev={};ue(Ev,{Async:()=>_u,Sync:()=>Yc,count:()=>Uv,delayLoop:()=>Lu,interval:()=>Gc,numericPercent:()=>Vv,numericRange:()=>Xc,numericRangeRaw:()=>jv,pingPong:()=>Ou,pingPongPercent:()=>Jc});var Jc=function(e=.1,n,r,i,a){return n===void 0&&(n=0),r===void 0&&(r=1),i===void 0&&(i=n),ie(e,"bipolar","interval"),ie(r,"bipolar","end"),ie(i,"bipolar","offset"),ie(n,"bipolar","start"),Ou(e,n,r,i,a)},Ou=function*(e,n,r,i,a){if(n===void 0)throw new Error("Parameter 'lower' is undefined");if(e===void 0)throw new Error("Parameter 'interval' is undefined");if(r===void 0)throw new Error("Parameter 'upper' is undefined");if(a===void 0&&e<=1&&e>=0?a=10/e:a===void 0&&(a=1234),Number.isNaN(e))throw new Error("interval parameter is NaN");if(Number.isNaN(n))throw new Error("lower parameter is NaN");if(Number.isNaN(r))throw new Error("upper parameter is NaN");if(Number.isNaN(i))throw new Error("upper parameter is NaN");if(n>=r)throw new Error("lower must be less than upper");if(e===0)throw new Error("Interval cannot be zero");const u=r-n;if(Math.abs(e)>=u)throw new Error(`Interval should be between -${u} and ${u}`);let o=e>0;if(r=Math.floor(r*a),n=Math.floor(n*a),e=Math.floor(Math.abs(e*a)),e===0)throw new Error(`Interval is zero (rounding: ${a})`);if(i===void 0?i=n:i=Math.floor(i*a),i>r||i<n)throw new Error(`Start (${i/a}) must be within lower (${n/a}) and upper (${r/a})`);let c=i;yield c/a;let s=!0;for(;;)c=c+(o?e:-e),o&&c>=r?(o=!1,c=r,c===r&&s&&(c=n,o=!0)):!o&&c<=n&&(o=!0,c=n,c===n&&s&&(c=r,o=!1)),yield c/a,s=!1},Yc={};ue(Yc,{chunks:()=>bv,concat:()=>Av,dropWhile:()=>Cv,equals:()=>Fv,every:()=>Sv,fill:()=>_v,filter:()=>Iv,find:()=>Bv,flatten:()=>Rv,forEach:()=>Mv,map:()=>Pv,max:()=>Nv,min:()=>zv,range:()=>Wv,reduce:()=>Lv,slice:()=>Ov,some:()=>kv,takeWhile:()=>Tv,unique:()=>$v,zip:()=>qv});function*bv(e,n){let r=[];for(const i of e)r.push(i),r.length===n&&(yield r,r=[]);r.length>0&&(yield r)}function*Av(...e){for(const n of e)yield*n}function*Cv(e,n){for(const r of e)if(!n(r)){yield r;break}yield*e}function Fv(e,n,r){for(;;){const i=e.next(),a=n.next();if(r!==void 0){if(!r(i.value,a.value))return!1}else if(i.value!==a.value)return!1;if(i.done||a.done)return i.done&&a.done}}function Sv(e,n){let r=!0;for(const i of e)r=r&&n(i);return r}function*_v(e,n){for(const r of e)yield n}function Mv(e,n){for(const r of e)n(r)}function*Iv(e,n){for(const r of e)!n(r)||(yield r)}function Bv(e,n){for(const r of e)if(n(r))return r}function*Rv(e){for(const n of e)Symbol.iterator in n?yield*n:yield n}function*Pv(e,n){for(const r of e)yield n(r)}function Nv(e,n=(r,i)=>r>i){let r;for(const i of e){if(!r){r=i;continue}r=n(r,i)?r:i}return r}function zv(e,n=(r,i)=>r>i){let r;for(const i of e){if(!r){r=i;continue}r=n(r,i)?i:r}return r}function*Wv(e,n){for(let r=0;r<n;r++)yield e++}function Lv(e,n,r){for(const i of e)r=n(r,i);return r}function*Ov(e,n=0,r=Number.POSITIVE_INFINITY){const i=e[Symbol.iterator]();for(;n>0;n--,r--)i.next();for(const a of e)if(r-- >0)yield a;else break}function kv(e,n){for(const r of e)if(n(r))return!0;return!1}function*Tv(e,n){for(const r of e){if(!n(r))return;yield r}}function*$v(e,n=r=>r){const r=[];for(const i of e){const a=n(i);r.indexOf(a)===-1&&(r.push(a),yield i)}}function*qv(...e){const n=e.map(r=>r[Symbol.iterator]());for(;;){const r=n.map(i=>i.next());if(r.some(i=>i.done))return;yield r.map(i=>i.value)}}var jv=function*(e,n=0,r,i=!1){if(e<=0)throw new Error("Interval is expected to be above zero");r===void 0&&(r=Number.MAX_SAFE_INTEGER);let a=n;do for(;a<r;)yield a,a+=e;while(i)},Xc=function*(e,n=0,r,i=!1,a){ie(e,"nonZero");const u=e<0;if(r!==void 0){if(u&&n<r)throw new Error(`Interval of ${e} will never go from ${n} to ${r}`);if(!u&&n>r)throw new Error(`Interval of ${e} will never go from ${n} to ${r}`)}a=a??1e3,r===void 0?r=Number.MAX_SAFE_INTEGER:r*=a,e=e*a;do{let o=n*a;for(;!u&&o<=r||u&&o>=r;)yield o/a,o+=e}while(i)},Uv=function*(e,n=0){if(Ue(e,"","amount"),Ue(n,"","offset"),e===0)return;let r=0;do e<0?yield-r+n:yield r+n;while(r++<Math.abs(e)-1)},Vv=function(e=.01,n=!1,r=0,i=1){return ie(e,"percentage","interval"),ie(r,"percentage","start"),ie(i,"percentage","end"),Xc(e,r,i,n)},Zc={};ue(Zc,{addUniqueByHash:()=>xc,filter:()=>ts,find:()=>ns,getOrGenerate:()=>Qc,getOrGenerateSync:()=>Kv,hasAnyValue:()=>es,hasKeyValue:()=>Hv,mapToArray:()=>Xv,mapToObj:()=>Yv,mapToObjTransform:()=>Gv,toArray:()=>eu,transformMap:()=>Jv,zipKeyValue:()=>ku});var Hv=(e,n,r,i)=>e.has(n)?Array.from(e.values()).some(u=>i(u,r)):!1,Qc=(e,n)=>async(r,i)=>{let a=e.get(r);if(a!==void 0)return Promise.resolve(a);if(a=await n(r,i),a===void 0)throw new Error("fn returned undefined");return e.set(r,a),a},Kv=(e,n)=>(r,i)=>{let a=e.get(r);return a!==void 0||(a=n(r,i),e.set(r,a)),a},xc=(e,n,...r)=>{const i=e===void 0?new Map:new Map(e);return r.forEach(a=>{const u=n(a);i.has(u)||i.set(u,a)}),i},es=(e,n,r)=>Array.from(e.entries()).some(a=>r(a[1],n));function*ts(e,n){for(const r of e.values())n(r)&&(yield r)}var eu=e=>Array.from(e.values()),ns=(e,n)=>Array.from(e.values()).find(r=>n(r)),Gv=(e,n)=>Array.from(e).reduce((r,[i,a])=>{const u=n(a);return r[i]=u,r},{}),ku=(e,n)=>{if(e.length!==n.length)throw new Error("Keys and values arrays should be same length");return Object.fromEntries(e.map((r,i)=>[r,n[i]]))},Jv=(e,n)=>new Map(Array.from(e,r=>[r[0],n(r[1],r[0])])),Yv=e=>Array.from(e).reduce((n,[r,i])=>(n[r]=i,n),{}),Xv=(e,n)=>Array.from(e.entries()).map(r=>n(r[0],r[1])),Tu={};ue(Tu,{StateMachine:()=>ur,create:()=>ty,descriptionFromList:()=>rs,drive:()=>ry,fromList:()=>xv,fromListBidirectional:()=>ey});var Zv=e=>Array.isArray(e)?!1:typeof e.expressions<"u",rs=(...e)=>{const n={};for(let r=0;r<e.length;r++)r===e.length-1?n[e[r]]=null:n[e[r]]=e[r+1];return n},Qv=(...e)=>{const n={};for(let r=0;r<e.length;r++)n[e[r]]=[];for(let r=0;r<e.length;r++){const i=n[e[r]];r===e.length-1?e.length>1?i.push(e[r-1]):n[e[r]]=null:(i.push(e[r+1]),r>0&&i.push(e[r-1]))}return n},xv=(...e)=>new ur(e[0],rs(...e)),ey=(...e)=>new ur(e[0],Qv(...e)),ty=(e,n,r={debug:!1})=>new ur(e,n,r),Bn,bi,Rn,fr,Ai,Hn,Ci=class extends Ln{constructor(e,n,r={debug:!1}){super();$e(this,Bn,void 0),$e(this,bi,void 0),$e(this,Rn,void 0),$e(this,fr,void 0),$e(this,Ai,void 0),$e(this,Hn,void 0);const[i,a]=Ci.validate(e,n);if(!i)throw new Error(a);Ce(this,Ai,e),Ce(this,Rn,n),Ce(this,bi,r.debug??!1),Ce(this,Bn,e),Ce(this,fr,!1),Ce(this,Hn,0)}get states(){return Object.keys(J(this,Rn))}static validate(e,n){const r=Object.keys(n),i=new Set,a=new Set;for(let c=0;c<r.length;c++){const s=r[c];if(i.has(s))return[!1,`Key ${s} is already used`];if(i.add(s),typeof r[c]!="string")return[!1,`Key[${c}] is not a string`];const l=n[s];if(l===void 0)return[!1,`Key ${s} value is undefined`];if(typeof l=="string"){if(a.add(l),l===s)return[!1,`Loop present for ${s}`]}else if(Array.isArray(l)){if(!t0(l))return[!1,`Key ${s} value is not an array of strings`];if(l.forEach(f=>a.add(f)),l.find(f=>f===s))return[!1,`Loop present for ${s}`]}else if(l!==null)return[!1,`Key ${s} has a value that is neither null, string or array`]}const o=Array.from(a).find(c=>!i.has(c));return o?[!1,`Potential state '${o}' does not exist as a top-level state`]:n[e]===void 0?[!1,`Initial state ${e} not present`]:[!0,""]}next(){const e=J(this,Rn)[J(this,Bn)];if(e===null)return null;if(Array.isArray(e))if(typeof e[0]=="string")this.state=e[0];else throw new Error("Error in machine description. Potential state array does not contain strings");else if(typeof e=="string")this.state=e;else throw new Error("Error in machine description. Potential state is neither array nor string");return this.state}get isDone(){return J(this,fr)}reset(){Ce(this,fr,!1),Ce(this,Bn,J(this,Ai)),Ce(this,Hn,Date.now())}static isValid(e,n,r){if(r[n]===void 0)return[!1,`Machine cannot change to non-existent state ${n}`];const i=r[e];if(Array.isArray(i)){if(!i.includes(n))return[!1,`Machine cannot change '${e} -> ${n}'. Allowed transitions: ${i.join(", ")}`]}else if(n!==i&&i!=="*")return[!1,`Machine cannot '${e} -> ${n}'. Allowed transition: ${i}`];return[!0,"ok"]}isValid(e){return Ci.isValid(this.state,e,J(this,Rn))}set state(e){const n=J(this,Bn);if(e===n)return;const[r,i]=Ci.isValid(n,e,J(this,Rn));if(!r)throw new Error(i);J(this,bi)&&console.log(`StateMachine: ${n} -> ${e}`),Ce(this,Bn,e),J(this,Rn)[e]===null&&Ce(this,fr,!0),Ce(this,Hn,Date.now()),setTimeout(()=>{this.fireEvent("change",{newState:e,priorState:n}),this.isDone&&this.fireEvent("stop",{state:e})},1)}get state(){return J(this,Bn)}get changedAt(){return J(this,Hn)}get elapsed(){return Date.now()-J(this,Hn)}},ur=Ci;Bn=new WeakMap;bi=new WeakMap;Rn=new WeakMap;fr=new WeakMap;Ai=new WeakMap;Hn=new WeakMap;var ny=e=>{const n=e.select??"first",r=Array.isArray(e.expressions)?e.expressions:[e.expressions];return{select:n,expressions:r,tryAll:e.tryAll??!0}},sc=(e=[])=>{const n=e.filter(r=>r!==void 0);return n.sort((r,i)=>{const a=r.score??0,u=i.score??0;return a===u?0:a>u?-1:1}),n},ry=(e,n)=>{const r="first",i={};for(const s of Object.keys(n)){const l=n[s];Zv(l)?i[s]=ny(l):Array.isArray(l)?i[s]={select:r,expressions:l,tryAll:!0}:i[s]={select:r,tryAll:!0,expressions:[l]}}const a=s=>{try{if(typeof s.next!==void 0&&s.next)e.next();else if(typeof s.state!==void 0)e.state=s.state;else if(typeof s.reset!==void 0&&s.reset)e.reset();else throw new Error("Result has neither 'reset', 'next' nor 'state' properties needed to drive state machine");return!0}catch(l){return console.warn(l),!1}},u=(s,l)=>{for(const f of l){if(a(f))return!0;if(!s.tryAll)break}return!1},o=(s,l)=>{if(!s)return!1;let f=!1;switch(s.select){case"first":for(const d of s.expressions){const g=d(l);if(!!g&&a(g)){f=!0;break}}break;case"highest":f=u(s,[...sc(s.expressions.map(d=>d(l)))]);break;case"lowest":f=u(s,[...sc(s.expressions.map(d=>d(l)))].reverse());break;default:throw new Error(`Unknown select type: ${s.select}. Expected first, highest or lowest`)}return f};return s=>{let l=i[e.state];!l&&e.isDone,l||(l=i.__default);let f=o(l,s);f||(l=i.__fallback,f=o(l,s))}},iy={};ue(iy,{StateMachine:()=>Tu,completionMs:()=>us,continuously:()=>qu,debounce:()=>oy,delay:()=>wv,delayLoop:()=>Lu,forEach:()=>ls,forEachAsync:()=>fs,frequencyTimer:()=>Fn,frequencyTimerSource:()=>os,hasElapsedMs:()=>as,interval:()=>Gc,msElapsedTimer:()=>hn,relativeTimer:()=>Nr,relativeTimerMs:()=>cs,repeat:()=>Uu,sleep:()=>tr,throttle:()=>cy,ticksElapsedTimer:()=>$u,timeout:()=>ss,updateOutdated:()=>ay,waitFor:()=>ju});var is={};ue(is,{completionMs:()=>us,frequencyTimer:()=>Fn,frequencyTimerSource:()=>os,hasElapsedMs:()=>as,msElapsedTimer:()=>hn,relativeTimer:()=>Nr,relativeTimerMs:()=>cs,ticksElapsedTimer:()=>$u});var Ut=(e,n=0,r=1)=>{if(Number.isNaN(e))throw new Error("v parameter is NaN");if(Number.isNaN(n))throw new Error("min parameter is NaN");if(Number.isNaN(r))throw new Error("max parameter is NaN");return e<n?n:e>r?r:e},tu=(e,n)=>{if(!Number.isInteger(e))throw new Error(`v parameter must be an integer (${e})`);const r=Array.isArray(n)?n.length:n;if(!Number.isInteger(r))throw new Error(`length parameter must be an integer (${r}, ${typeof r})`);return e=Math.round(e),e<0?0:e>=r?r-1:e};function as(e){const n=Nr(e,hn());return()=>n.isDone}function us(e){const n=Nr(e,hn());return()=>n.elapsed}var os=e=>()=>Fn(e,hn()),Nr=(e,n,r=!0)=>{let i=!1,a=1;return{mod(u){a=u},get isDone(){return i},reset:()=>{i=!1,n.reset()},get elapsed(){let u=n.elapsed/(e*a);return r&&(u=Ut(u)),u>=1&&(i=!0),u}}},cs=(e,n=!0)=>Nr(e,hn(),n),Fn=(e,n=hn())=>{const r=e/1e3;let i=1;return{mod:a=>{i=a},reset:()=>{n.reset()},get elapsed(){const a=n.elapsed*(r*i),u=a-Math.floor(a);if(u<0)throw new Error(`Unexpected cycle fraction less than 0. Elapsed: ${a} f: ${u}`);if(u>1)throw new Error(`Unexpected cycle fraction more than 1. Elapsed: ${a} f: ${u}`);return u}}},hn=()=>{let e=performance.now();return{reset:()=>{e=performance.now()},get elapsed(){return performance.now()-e}}},$u=()=>{let e=0;return{reset:()=>{e=0},get elapsed(){return e++}}},ss=(e,n)=>{if(e===void 0)throw new Error("callback parameter is undefined");Ue(n,"aboveZero","timeoutMs");let r=0,i=0;const a=async(o=n,c)=>new Promise((l,f)=>{i=performance.now();try{Ue(o,"aboveZero","altTimeoutMs")}catch(d){f(d);return}r!==0&&u(),r=window.setTimeout(async()=>{await e(performance.now()-i,...c),r=0,l(void 0)},o)}),u=()=>{r!==0&&(i=0,window.clearTimeout(r))};return{start:a,cancel:u,get isDone(){return r!==0}}},ay=(e,n,r="slow")=>{let i=0,a,u=n;return()=>new Promise(async(o,c)=>{const s=performance.now()-i;if(a===void 0||s>u)try{i=performance.now(),a=await e(s),u=n}catch(l){r==="fast"?(a=void 0,i=0):r==="backoff"&&(u=Math.floor(u*1.2)),c(l);return}o(a)})},uy=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>setTimeout(e,1),qu=(e,n,r)=>{n!==void 0&&Ue(n,"positive","intervalMs");let i=!1,a=0,u=performance.now(),o=n===void 0?0:n;const c=o===0?uy:d=>setTimeout(d,o),s=()=>{!i||(i=!1,a=0)},l=async()=>{if(!i)return;const d=e(a++,performance.now()-u);let g;if(typeof d=="object"?g=await d:g=d,g!==void 0&&!g){s();return}c(l)};return{start:()=>{if(i&&r!==void 0){const d=r(a,performance.now()-u);if(u=performance.now(),d!==void 0&&!d){s();return}}else if(i)return;i=!0,c(l)},get intervalMs(){return o},set intervalMs(d){Ue(d,"positive","ms"),o=d},get isDone(){return!i},get ticks(){return a},get elapsedMs(){return performance.now()-u},cancel:s}},oy=(e,n)=>{const r=ss(e,n);return(...i)=>r.start(void 0,i)},cy=(e,n)=>{let r=0;return async(...i)=>{const a=performance.now()-r;if(a>=n){const u=e(a,...i);typeof u=="object"&&await u,r=performance.now()}}},ju=(e,n,r)=>{let i=!1;const a=o=>{u!==0&&(window.clearTimeout(u),u=0),o?n(o):i=!0,r!==void 0&&r(i)};let u=window.setTimeout(()=>{u=0;try{n(`Timeout after ${e}ms`)}finally{r!==void 0&&r(i)}},e);return a},ls=(e,n)=>{for(const r of e){const i=n(r);if(typeof i=="boolean"&&!i)break}},fs=async function(e,n,r){if(Array.isArray(e))for(const i of e){const a=await n(i);if(r&&await tr(r),typeof a=="boolean"&&!a)break}else for await(const i of e){const a=await n(i);if(r&&await tr(r),typeof a=="boolean"&&!a)break}},Uu=(e,n)=>{let r,i;r=i=0;const a=[];if(typeof e=="number")for(ie(e,"positive","countOrPredicate");e-- >0;){r++;const u=n();u!==void 0&&(a.push(u),i++)}else for(;e(r,i);){r++;const u=n();u!==void 0&&(a.push(u),i++)}return a};try{typeof window<"u"&&(window.ixfx={...window.ixfx,Flow:{StateMachine:Tu,Timer:is,forEach:ls,forEachAsync:fs,repeat:Uu}})}catch{}var Kt=Ze({"node_modules/fp-ts/lib/function.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getEndomorphismMonoid=e.not=e.SK=e.hole=e.pipe=e.untupled=e.tupled=e.absurd=e.decrement=e.increment=e.tuple=e.flow=e.flip=e.constVoid=e.constUndefined=e.constNull=e.constFalse=e.constTrue=e.constant=e.unsafeCoerce=e.identity=e.apply=e.getRing=e.getSemiring=e.getMonoid=e.getSemigroup=e.getBooleanAlgebra=void 0;var n=function(C){return function(){return{meet:function(S,B){return function(U){return C.meet(S(U),B(U))}},join:function(S,B){return function(U){return C.join(S(U),B(U))}},zero:function(){return C.zero},one:function(){return C.one},implies:function(S,B){return function(U){return C.implies(S(U),B(U))}},not:function(S){return function(B){return C.not(S(B))}}}}};e.getBooleanAlgebra=n;var r=function(C){return function(){return{concat:function(S,B){return function(U){return C.concat(S(U),B(U))}}}}};e.getSemigroup=r;var i=function(C){var S=(0,e.getSemigroup)(C);return function(){return{concat:S().concat,empty:function(){return C.empty}}}};e.getMonoid=i;var a=function(C){return{add:function(S,B){return function(U){return C.add(S(U),B(U))}},zero:function(){return C.zero},mul:function(S,B){return function(U){return C.mul(S(U),B(U))}},one:function(){return C.one}}};e.getSemiring=a;var u=function(C){var S=(0,e.getSemiring)(C);return{add:S.add,mul:S.mul,one:S.one,zero:S.zero,sub:function(B,U){return function(ae){return C.sub(B(ae),U(ae))}}}};e.getRing=u;var o=function(C){return function(S){return S(C)}};e.apply=o;function c(C){return C}e.identity=c,e.unsafeCoerce=c;function s(C){return function(){return C}}e.constant=s,e.constTrue=s(!0),e.constFalse=s(!1),e.constNull=s(null),e.constUndefined=s(void 0),e.constVoid=e.constUndefined;function l(C){return function(S,B){return C(B,S)}}e.flip=l;function f(C,S,B,U,ae,ee,pe,be,T){switch(arguments.length){case 1:return C;case 2:return function(){return S(C.apply(this,arguments))};case 3:return function(){return B(S(C.apply(this,arguments)))};case 4:return function(){return U(B(S(C.apply(this,arguments))))};case 5:return function(){return ae(U(B(S(C.apply(this,arguments)))))};case 6:return function(){return ee(ae(U(B(S(C.apply(this,arguments))))))};case 7:return function(){return pe(ee(ae(U(B(S(C.apply(this,arguments)))))))};case 8:return function(){return be(pe(ee(ae(U(B(S(C.apply(this,arguments))))))))};case 9:return function(){return T(be(pe(ee(ae(U(B(S(C.apply(this,arguments)))))))))}}}e.flow=f;function d(){for(var C=[],S=0;S<arguments.length;S++)C[S]=arguments[S];return C}e.tuple=d;function g(C){return C+1}e.increment=g;function M(C){return C-1}e.decrement=M;function P(C){throw new Error("Called `absurd` function which should be uncallable")}e.absurd=P;function q(C){return function(S){return C.apply(void 0,S)}}e.tupled=q;function L(C){return function(){for(var S=[],B=0;B<arguments.length;B++)S[B]=arguments[B];return C(S)}}e.untupled=L;function A(C,S,B,U,ae,ee,pe,be,T){switch(arguments.length){case 1:return C;case 2:return S(C);case 3:return B(S(C));case 4:return U(B(S(C)));case 5:return ae(U(B(S(C))));case 6:return ee(ae(U(B(S(C)))));case 7:return pe(ee(ae(U(B(S(C))))));case 8:return be(pe(ee(ae(U(B(S(C)))))));case 9:return T(be(pe(ee(ae(U(B(S(C))))))));default:{for(var $=arguments[0],K=1;K<arguments.length;K++)$=arguments[K]($);return $}}}e.pipe=A,e.hole=P;var _=function(C,S){return S};e.SK=_;function W(C){return function(S){return!C(S)}}e.not=W;var k=function(){return{concat:function(C,S){return f(C,S)},empty:c}};e.getEndomorphismMonoid=k}}),On=Ze({"node_modules/fp-ts/lib/internal.js"(e){var n=e&&e.__spreadArray||function(P,q,L){if(L||arguments.length===2)for(var A=0,_=q.length,W;A<_;A++)(W||!(A in q))&&(W||(W=Array.prototype.slice.call(q,0,A)),W[A]=q[A]);return P.concat(W||Array.prototype.slice.call(q))};Object.defineProperty(e,"__esModule",{value:!0}),e.fromReadonlyNonEmptyArray=e.has=e.emptyRecord=e.emptyReadonlyArray=e.tail=e.head=e.isNonEmpty=e.singleton=e.right=e.left=e.isRight=e.isLeft=e.some=e.none=e.isSome=e.isNone=void 0;var r=function(P){return P._tag==="None"};e.isNone=r;var i=function(P){return P._tag==="Some"};e.isSome=i,e.none={_tag:"None"};var a=function(P){return{_tag:"Some",value:P}};e.some=a;var u=function(P){return P._tag==="Left"};e.isLeft=u;var o=function(P){return P._tag==="Right"};e.isRight=o;var c=function(P){return{_tag:"Left",left:P}};e.left=c;var s=function(P){return{_tag:"Right",right:P}};e.right=s;var l=function(P){return[P]};e.singleton=l;var f=function(P){return P.length>0};e.isNonEmpty=f;var d=function(P){return P[0]};e.head=d;var g=function(P){return P.slice(1)};e.tail=g,e.emptyReadonlyArray=[],e.emptyRecord={},e.has=Object.prototype.hasOwnProperty;var M=function(P){return n([P[0]],P.slice(1),!0)};e.fromReadonlyNonEmptyArray=M}}),na=Ze({"node_modules/fp-ts/lib/Apply.js"(e){var n=e&&e.__createBinding||(Object.create?function(A,_,W,k){k===void 0&&(k=W);var C=Object.getOwnPropertyDescriptor(_,W);(!C||("get"in C?!_.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return _[W]}}),Object.defineProperty(A,k,C)}:function(A,_,W,k){k===void 0&&(k=W),A[k]=_[W]}),r=e&&e.__setModuleDefault||(Object.create?function(A,_){Object.defineProperty(A,"default",{enumerable:!0,value:_})}:function(A,_){A.default=_}),i=e&&e.__importStar||function(A){if(A&&A.__esModule)return A;var _={};if(A!=null)for(var W in A)W!=="default"&&Object.prototype.hasOwnProperty.call(A,W)&&n(_,A,W);return r(_,A),_};Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceS=e.sequenceT=e.getApplySemigroup=e.apS=e.apSecond=e.apFirst=e.ap=void 0;var a=Kt(),u=i(On());function o(A,_){return function(W){return function(k){return A.ap(A.map(k,function(C){return function(S){return _.ap(C,S)}}),W)}}}e.ap=o;function c(A){return function(_){return function(W){return A.ap(A.map(W,function(k){return function(){return k}}),_)}}}e.apFirst=c;function s(A){return function(_){return function(W){return A.ap(A.map(W,function(){return function(k){return k}}),_)}}}e.apSecond=s;function l(A){return function(_,W){return function(k){return A.ap(A.map(k,function(C){return function(S){var B;return Object.assign({},C,(B={},B[_]=S,B))}}),W)}}}e.apS=l;function f(A){return function(_){return{concat:function(W,k){return A.ap(A.map(W,function(C){return function(S){return _.concat(C,S)}}),k)}}}}e.getApplySemigroup=f;function d(A,_,W){return function(k){for(var C=Array(W.length+1),S=0;S<W.length;S++)C[S]=W[S];return C[W.length]=k,_===0?A.apply(null,C):d(A,_-1,C)}}var g={1:function(A){return[A]},2:function(A){return function(_){return[A,_]}},3:function(A){return function(_){return function(W){return[A,_,W]}}},4:function(A){return function(_){return function(W){return function(k){return[A,_,W,k]}}}},5:function(A){return function(_){return function(W){return function(k){return function(C){return[A,_,W,k,C]}}}}}};function M(A){return u.has.call(g,A)||(g[A]=d(a.tuple,A-1,[])),g[A]}function P(A){return function(){for(var _=[],W=0;W<arguments.length;W++)_[W]=arguments[W];for(var k=_.length,C=M(k),S=A.map(_[0],C),B=1;B<k;B++)S=A.ap(S,_[B]);return S}}e.sequenceT=P;function q(A){var _=A.length;switch(_){case 1:return function(W){var k;return k={},k[A[0]]=W,k};case 2:return function(W){return function(k){var C;return C={},C[A[0]]=W,C[A[1]]=k,C}};case 3:return function(W){return function(k){return function(C){var S;return S={},S[A[0]]=W,S[A[1]]=k,S[A[2]]=C,S}}};case 4:return function(W){return function(k){return function(C){return function(S){var B;return B={},B[A[0]]=W,B[A[1]]=k,B[A[2]]=C,B[A[3]]=S,B}}}};case 5:return function(W){return function(k){return function(C){return function(S){return function(B){var U;return U={},U[A[0]]=W,U[A[1]]=k,U[A[2]]=C,U[A[3]]=S,U[A[4]]=B,U}}}}};default:return d(function(){for(var W=[],k=0;k<arguments.length;k++)W[k]=arguments[k];for(var C={},S=0;S<_;S++)C[A[S]]=W[S];return C},_-1,[])}}function L(A){return function(_){for(var W=Object.keys(_),k=W.length,C=q(W),S=A.map(_[W[0]],C),B=1;B<k;B++)S=A.ap(S,_[W[B]]);return S}}e.sequenceS=L}}),ai=Ze({"node_modules/fp-ts/lib/Chain.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bind=e.chainFirst=void 0;function n(i){return function(a){return function(u){return i.chain(u,function(o){return i.map(a(o),function(){return o})})}}}e.chainFirst=n;function r(i){return function(a,u){return function(o){return i.chain(o,function(c){return i.map(u(c),function(s){var l;return Object.assign({},c,(l={},l[a]=s,l))})})}}}e.bind=r}}),hs=Ze({"node_modules/fp-ts/lib/FromEither.js"(e){var n=e&&e.__createBinding||(Object.create?function(q,L,A,_){_===void 0&&(_=A);var W=Object.getOwnPropertyDescriptor(L,A);(!W||("get"in W?!L.__esModule:W.writable||W.configurable))&&(W={enumerable:!0,get:function(){return L[A]}}),Object.defineProperty(q,_,W)}:function(q,L,A,_){_===void 0&&(_=A),q[_]=L[A]}),r=e&&e.__setModuleDefault||(Object.create?function(q,L){Object.defineProperty(q,"default",{enumerable:!0,value:L})}:function(q,L){q.default=L}),i=e&&e.__importStar||function(q){if(q&&q.__esModule)return q;var L={};if(q!=null)for(var A in q)A!=="default"&&Object.prototype.hasOwnProperty.call(q,A)&&n(L,q,A);return r(L,q),L};Object.defineProperty(e,"__esModule",{value:!0}),e.filterOrElse=e.chainFirstEitherK=e.chainEitherK=e.fromEitherK=e.chainOptionK=e.fromOptionK=e.fromPredicate=e.fromOption=void 0;var a=ai(),u=Kt(),o=i(On());function c(q){return function(L){return function(A){return q.fromEither(o.isNone(A)?o.left(L()):o.right(A.value))}}}e.fromOption=c;function s(q){return function(L,A){return function(_){return q.fromEither(L(_)?o.right(_):o.left(A(_)))}}}e.fromPredicate=s;function l(q){var L=c(q);return function(A){var _=L(A);return function(W){return(0,u.flow)(W,_)}}}e.fromOptionK=l;function f(q,L){var A=l(q);return function(_){var W=A(_);return function(k){return function(C){return L.chain(C,W(k))}}}}e.chainOptionK=f;function d(q){return function(L){return(0,u.flow)(L,q.fromEither)}}e.fromEitherK=d;function g(q,L){var A=d(q);return function(_){return function(W){return L.chain(W,A(_))}}}e.chainEitherK=g;function M(q,L){return(0,u.flow)(d(q),(0,a.chainFirst)(L))}e.chainFirstEitherK=M;function P(q,L){return function(A,_){return function(W){return L.chain(W,function(k){return q.fromEither(A(k)?o.right(k):o.left(_(k)))})}}}e.filterOrElse=P}}),ui=Ze({"node_modules/fp-ts/lib/Functor.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctorComposition=e.bindTo=e.flap=e.map=void 0;var n=Kt();function r(o,c){return function(s){return function(l){return o.map(l,function(f){return c.map(f,s)})}}}e.map=r;function i(o){return function(c){return function(s){return o.map(s,function(l){return l(c)})}}}e.flap=i;function a(o){return function(c){return function(s){return o.map(s,function(l){var f;return f={},f[c]=l,f})}}}e.bindTo=a;function u(o,c){var s=r(o,c);return{map:function(l,f){return(0,n.pipe)(l,s(f))}}}e.getFunctorComposition=u}}),Vu=Ze({"node_modules/fp-ts/lib/Eq.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.eqDate=e.eqNumber=e.eqString=e.eqBoolean=e.eq=e.strictEqual=e.getStructEq=e.getTupleEq=e.Contravariant=e.getMonoid=e.getSemigroup=e.eqStrict=e.URI=e.contramap=e.tuple=e.struct=e.fromEquals=void 0;var n=Kt(),r=function(f){return{equals:function(d,g){return d===g||f(d,g)}}};e.fromEquals=r;var i=function(f){return(0,e.fromEquals)(function(d,g){for(var M in f)if(!f[M].equals(d[M],g[M]))return!1;return!0})};e.struct=i;var a=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return(0,e.fromEquals)(function(g,M){return f.every(function(P,q){return P.equals(g[q],M[q])})})};e.tuple=a;var u=function(f,d){return(0,n.pipe)(f,(0,e.contramap)(d))},o=function(f){return function(d){return(0,e.fromEquals)(function(g,M){return d.equals(f(g),f(M))})}};e.contramap=o,e.URI="Eq",e.eqStrict={equals:function(f,d){return f===d}};var c={equals:function(){return!0}},s=function(){return{concat:function(f,d){return(0,e.fromEquals)(function(g,M){return f.equals(g,M)&&d.equals(g,M)})}}};e.getSemigroup=s;var l=function(){return{concat:(0,e.getSemigroup)().concat,empty:c}};e.getMonoid=l,e.Contravariant={URI:e.URI,contramap:u},e.getTupleEq=e.tuple,e.getStructEq=e.struct,e.strictEqual=e.eqStrict.equals,e.eq=e.Contravariant,e.eqBoolean=e.eqStrict,e.eqString=e.eqStrict,e.eqNumber=e.eqStrict,e.eqDate={equals:function(f,d){return f.valueOf()===d.valueOf()}}}}),oi=Ze({"node_modules/fp-ts/lib/Ord.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ordDate=e.ordNumber=e.ordString=e.ordBoolean=e.ord=e.getDualOrd=e.getTupleOrd=e.between=e.clamp=e.max=e.min=e.geq=e.leq=e.gt=e.lt=e.equals=e.trivial=e.Contravariant=e.getMonoid=e.getSemigroup=e.URI=e.contramap=e.reverse=e.tuple=e.fromCompare=e.equalsDefault=void 0;var n=Vu(),r=Kt(),i=function(S){return function(B,U){return B===U||S(B,U)===0}};e.equalsDefault=i;var a=function(S){return{equals:(0,e.equalsDefault)(S),compare:function(B,U){return B===U?0:S(B,U)}}};e.fromCompare=a;var u=function(){for(var S=[],B=0;B<arguments.length;B++)S[B]=arguments[B];return(0,e.fromCompare)(function(U,ae){for(var ee=0;ee<S.length-1;ee++){var pe=S[ee].compare(U[ee],ae[ee]);if(pe!==0)return pe}return S[ee].compare(U[ee],ae[ee])})};e.tuple=u;var o=function(S){return(0,e.fromCompare)(function(B,U){return S.compare(U,B)})};e.reverse=o;var c=function(S,B){return(0,r.pipe)(S,(0,e.contramap)(B))},s=function(S){return function(B){return(0,e.fromCompare)(function(U,ae){return B.compare(S(U),S(ae))})}};e.contramap=s,e.URI="Ord";var l=function(){return{concat:function(S,B){return(0,e.fromCompare)(function(U,ae){var ee=S.compare(U,ae);return ee!==0?ee:B.compare(U,ae)})}}};e.getSemigroup=l;var f=function(){return{concat:(0,e.getSemigroup)().concat,empty:(0,e.fromCompare)(function(){return 0})}};e.getMonoid=f,e.Contravariant={URI:e.URI,contramap:c},e.trivial={equals:r.constTrue,compare:(0,r.constant)(0)};var d=function(S){return function(B){return function(U){return U===B||S.compare(U,B)===0}}};e.equals=d;var g=function(S){return function(B,U){return S.compare(B,U)===-1}};e.lt=g;var M=function(S){return function(B,U){return S.compare(B,U)===1}};e.gt=M;var P=function(S){return function(B,U){return S.compare(B,U)!==1}};e.leq=P;var q=function(S){return function(B,U){return S.compare(B,U)!==-1}};e.geq=q;var L=function(S){return function(B,U){return B===U||S.compare(B,U)<1?B:U}};e.min=L;var A=function(S){return function(B,U){return B===U||S.compare(B,U)>-1?B:U}};e.max=A;var _=function(S){var B=(0,e.min)(S),U=(0,e.max)(S);return function(ae,ee){return function(pe){return U(B(pe,ee),ae)}}};e.clamp=_;var W=function(S){var B=(0,e.lt)(S),U=(0,e.gt)(S);return function(ae,ee){return function(pe){return!(B(pe,ae)||U(pe,ee))}}};e.between=W,e.getTupleOrd=e.tuple,e.getDualOrd=e.reverse,e.ord=e.Contravariant;function k(S,B){return S<B?-1:S>B?1:0}var C={equals:n.eqStrict.equals,compare:k};e.ordBoolean=C,e.ordString=C,e.ordNumber=C,e.ordDate=(0,r.pipe)(e.ordNumber,(0,e.contramap)(function(S){return S.valueOf()}))}}),sy=Ze({"node_modules/fp-ts/lib/Magma.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=e.endo=e.filterSecond=e.filterFirst=e.reverse=void 0;var n=function(o){return{concat:function(c,s){return o.concat(s,c)}}};e.reverse=n;var r=function(o){return function(c){return{concat:function(s,l){return o(s)?c.concat(s,l):l}}}};e.filterFirst=r;var i=function(o){return function(c){return{concat:function(s,l){return o(l)?c.concat(s,l):s}}}};e.filterSecond=i;var a=function(o){return function(c){return{concat:function(s,l){return c.concat(o(s),o(l))}}}};e.endo=a;var u=function(o){return function(c){return function(s){return s.reduce(function(l,f){return o.concat(l,f)},c)}}};e.concatAll=u}}),ly=Ze({"node_modules/fp-ts/lib/Semigroup.js"(e){var n=e&&e.__createBinding||(Object.create?function(_,W,k,C){C===void 0&&(C=k);var S=Object.getOwnPropertyDescriptor(W,k);(!S||("get"in S?!W.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return W[k]}}),Object.defineProperty(_,C,S)}:function(_,W,k,C){C===void 0&&(C=k),_[C]=W[k]}),r=e&&e.__setModuleDefault||(Object.create?function(_,W){Object.defineProperty(_,"default",{enumerable:!0,value:W})}:function(_,W){_.default=W}),i=e&&e.__importStar||function(_){if(_&&_.__esModule)return _;var W={};if(_!=null)for(var k in _)k!=="default"&&Object.prototype.hasOwnProperty.call(_,k)&&n(W,_,k);return r(W,_),W};Object.defineProperty(e,"__esModule",{value:!0}),e.semigroupProduct=e.semigroupSum=e.semigroupString=e.getFunctionSemigroup=e.semigroupAny=e.semigroupAll=e.fold=e.getIntercalateSemigroup=e.getMeetSemigroup=e.getJoinSemigroup=e.getDualSemigroup=e.getStructSemigroup=e.getTupleSemigroup=e.getFirstSemigroup=e.getLastSemigroup=e.getObjectSemigroup=e.semigroupVoid=e.concatAll=e.last=e.first=e.intercalate=e.tuple=e.struct=e.reverse=e.constant=e.max=e.min=void 0;var a=Kt(),u=i(On()),o=i(sy()),c=i(oi()),s=function(_){return{concat:c.min(_)}};e.min=s;var l=function(_){return{concat:c.max(_)}};e.max=l;var f=function(_){return{concat:function(){return _}}};e.constant=f,e.reverse=o.reverse;var d=function(_){return{concat:function(W,k){var C={};for(var S in _)u.has.call(_,S)&&(C[S]=_[S].concat(W[S],k[S]));return C}}};e.struct=d;var g=function(){for(var _=[],W=0;W<arguments.length;W++)_[W]=arguments[W];return{concat:function(k,C){return _.map(function(S,B){return S.concat(k[B],C[B])})}}};e.tuple=g;var M=function(_){return function(W){return{concat:function(k,C){return W.concat(k,W.concat(_,C))}}}};e.intercalate=M;var P=function(){return{concat:a.identity}};e.first=P;var q=function(){return{concat:function(_,W){return W}}};e.last=q,e.concatAll=o.concatAll,e.semigroupVoid=(0,e.constant)(void 0);var L=function(){return{concat:function(_,W){return Object.assign({},_,W)}}};e.getObjectSemigroup=L,e.getLastSemigroup=e.last,e.getFirstSemigroup=e.first,e.getTupleSemigroup=e.tuple,e.getStructSemigroup=e.struct,e.getDualSemigroup=e.reverse,e.getJoinSemigroup=e.max,e.getMeetSemigroup=e.min,e.getIntercalateSemigroup=e.intercalate;function A(_){var W=(0,e.concatAll)(_);return function(k,C){return C===void 0?W(k):W(k)(C)}}e.fold=A,e.semigroupAll={concat:function(_,W){return _&&W}},e.semigroupAny={concat:function(_,W){return _||W}},e.getFunctionSemigroup=a.getSemigroup,e.semigroupString={concat:function(_,W){return _+W}},e.semigroupSum={concat:function(_,W){return _+W}},e.semigroupProduct={concat:function(_,W){return _*W}}}}),Hu=Ze({"node_modules/fp-ts/lib/ReadonlyNonEmptyArray.js"(e){var n=e&&e.__createBinding||(Object.create?function(D,b,z,H){H===void 0&&(H=z);var se=Object.getOwnPropertyDescriptor(b,z);(!se||("get"in se?!b.__esModule:se.writable||se.configurable))&&(se={enumerable:!0,get:function(){return b[z]}}),Object.defineProperty(D,H,se)}:function(D,b,z,H){H===void 0&&(H=z),D[H]=b[z]}),r=e&&e.__setModuleDefault||(Object.create?function(D,b){Object.defineProperty(D,"default",{enumerable:!0,value:b})}:function(D,b){D.default=b}),i=e&&e.__importStar||function(D){if(D&&D.__esModule)return D;var b={};if(D!=null)for(var z in D)z!=="default"&&Object.prototype.hasOwnProperty.call(D,z)&&n(b,D,z);return r(b,D),b},a=e&&e.__spreadArray||function(D,b,z){if(z||arguments.length===2)for(var H=0,se=b.length,we;H<se;H++)(we||!(H in b))&&(we||(we=Array.prototype.slice.call(b,0,H)),we[H]=b[H]);return D.concat(we||Array.prototype.slice.call(b))};Object.defineProperty(e,"__esModule",{value:!0}),e.reduceRight=e.foldMap=e.reduce=e.mapWithIndex=e.map=e.flatten=e.duplicate=e.extend=e.chain=e.ap=e.alt=e.altW=e.of=e.chunksOf=e.splitAt=e.chop=e.chainWithIndex=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.modifyAt=e.updateAt=e.sort=e.groupBy=e.group=e.reverse=e.concat=e.concatW=e.fromArray=e.unappend=e.unprepend=e.range=e.replicate=e.makeBy=e.fromReadonlyArray=e.rotate=e.union=e.sortBy=e.uniq=e.unsafeUpdateAt=e.unsafeInsertAt=e.append=e.appendW=e.prepend=e.prependW=e.isOutOfBound=e.isNonEmpty=e.empty=void 0,e.filterWithIndex=e.filter=e.groupSort=e.intercalate=e.updateLast=e.modifyLast=e.updateHead=e.modifyHead=e.matchRight=e.matchLeft=e.concatAll=e.max=e.min=e.init=e.last=e.tail=e.head=e.apS=e.bind=e.bindTo=e.Do=e.Comonad=e.Alt=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getUnionSemigroup=e.getEq=e.getSemigroup=e.getShow=e.URI=e.extract=e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.foldMapWithIndex=e.reduceWithIndex=void 0,e.readonlyNonEmptyArray=e.fold=e.prependToAll=e.insertAt=e.snoc=e.cons=e.unsnoc=e.uncons=void 0;var u=na(),o=ai(),c=Vu(),s=Kt(),l=ui(),f=i(On()),d=oi(),g=i(ly());e.empty=f.emptyReadonlyArray,e.isNonEmpty=f.isNonEmpty;var M=function(D,b){return D<0||D>=b.length};e.isOutOfBound=M;var P=function(D){return function(b){return a([D],b,!0)}};e.prependW=P,e.prepend=e.prependW;var q=function(D){return function(b){return a(a([],b,!0),[D],!1)}};e.appendW=q,e.append=e.appendW;var L=function(D,b,z){if((0,e.isNonEmpty)(z)){var H=f.fromReadonlyNonEmptyArray(z);return H.splice(D,0,b),H}return[b]};e.unsafeInsertAt=L;var A=function(D,b,z){if(z[D]===b)return z;var H=f.fromReadonlyNonEmptyArray(z);return H[D]=b,H};e.unsafeUpdateAt=A;var _=function(D){return function(b){if(b.length===1)return b;for(var z=[(0,e.head)(b)],H=(0,e.tail)(b),se=function(Ae){z.every(function(Te){return!D.equals(Te,Ae)})&&z.push(Ae)},we=0,ke=H;we<ke.length;we++){var It=ke[we];se(It)}return z}};e.uniq=_;var W=function(D){if((0,e.isNonEmpty)(D)){var b=(0,d.getMonoid)();return(0,e.sort)(D.reduce(b.concat,b.empty))}return s.identity};e.sortBy=W;var k=function(D){var b=(0,e.uniq)(D);return function(z){return function(H){return b((0,s.pipe)(H,$(z)))}}};e.union=k;var C=function(D){return function(b){var z=b.length,H=Math.round(D)%z;if((0,e.isOutOfBound)(Math.abs(H),b)||H===0)return b;if(H<0){var se=(0,e.splitAt)(-H)(b),we=se[0],ke=se[1];return(0,s.pipe)(ke,$(we))}else return(0,e.rotate)(H-z)(b)}};e.rotate=C;var S=function(D){return(0,e.isNonEmpty)(D)?f.some(D):f.none};e.fromReadonlyArray=S;var B=function(D){return function(b){for(var z=Math.max(0,Math.floor(b)),H=[D(0)],se=1;se<z;se++)H.push(D(se));return H}};e.makeBy=B;var U=function(D){return(0,e.makeBy)(function(){return D})};e.replicate=U;var ae=function(D,b){return D<=b?(0,e.makeBy)(function(z){return D+z})(b-D+1):[D]};e.range=ae;var ee=function(D){return[(0,e.head)(D),(0,e.tail)(D)]};e.unprepend=ee;var pe=function(D){return[(0,e.init)(D),(0,e.last)(D)]};e.unappend=pe;var be=function(D){return(0,e.fromReadonlyArray)(D.slice())};e.fromArray=be;function T(D){return function(b){return b.concat(D)}}e.concatW=T;function $(D,b){return b?D.concat(b):function(z){return z.concat(D)}}e.concat=$;var K=function(D){return D.length===1?D:a([(0,e.last)(D)],D.slice(0,-1).reverse(),!0)};e.reverse=K;function X(D){return function(b){var z=b.length;if(z===0)return e.empty;for(var H=[],se=b[0],we=[se],ke=1;ke<z;ke++){var It=b[ke];D.equals(It,se)?we.push(It):(H.push(we),se=It,we=[se])}return H.push(we),H}}e.group=X;var re=function(D){return function(b){for(var z={},H=0,se=b;H<se.length;H++){var we=se[H],ke=D(we);f.has.call(z,ke)?z[ke].push(we):z[ke]=[we]}return z}};e.groupBy=re;var x=function(D){return function(b){return b.length===1?b:b.slice().sort(D.compare)}};e.sort=x;var ye=function(D,b){return(0,e.modifyAt)(D,function(){return b})};e.updateAt=ye;var Fe=function(D,b){return function(z){return(0,e.isOutOfBound)(D,z)?f.none:f.some((0,e.unsafeUpdateAt)(D,b(z[D]),z))}};e.modifyAt=Fe;var xe=function(D,b,z){for(var H=[z(D[0],b[0])],se=Math.min(D.length,b.length),we=1;we<se;we++)H[we]=z(D[we],b[we]);return H};e.zipWith=xe;function ve(D,b){return b===void 0?function(z){return ve(z,D)}:(0,e.zipWith)(D,b,function(z,H){return[z,H]})}e.zip=ve;var ze=function(D){for(var b=[D[0][0]],z=[D[0][1]],H=1;H<D.length;H++)b[H]=D[H][0],z[H]=D[H][1];return[b,z]};e.unzip=ze;var dt=function(D){return function(b){for(var z=[D,b[0]],H=1;H<b.length;H++)z.push(D,b[H]);return z}};e.prependAll=dt;var Re=function(D){return function(b){var z=(0,e.tail)(b);return(0,e.isNonEmpty)(z)?(0,s.pipe)(z,(0,e.prependAll)(D),(0,e.prepend)((0,e.head)(b))):b}};e.intersperse=Re;var ut=function(D){return function(b){for(var z=f.fromReadonlyNonEmptyArray(D(0,(0,e.head)(b))),H=1;H<b.length;H++)z.push.apply(z,D(H,b[H]));return z}};e.chainWithIndex=ut;var Rt=function(D){return function(b){for(var z=D(b),H=z[0],se=z[1],we=[H],ke=se;(0,e.isNonEmpty)(ke);){var It=D(ke),Ae=It[0],Te=It[1];we.push(Ae),ke=Te}return we}};e.chop=Rt;var Yt=function(D){return function(b){var z=Math.max(1,D);return z>=b.length?[b,e.empty]:[(0,s.pipe)(b.slice(1,z),(0,e.prepend)((0,e.head)(b))),b.slice(z)]}};e.splitAt=Yt;var vn=function(D){return(0,e.chop)((0,e.splitAt)(D))};e.chunksOf=vn;var Ge=function(D,b){return(0,s.pipe)(D,(0,e.map)(b))},De=function(D,b){return(0,s.pipe)(D,(0,e.mapWithIndex)(b))},ot=function(D,b){return(0,s.pipe)(D,(0,e.ap)(b))},Me=function(D,b){return(0,s.pipe)(D,(0,e.chain)(b))},Je=function(D,b){return(0,s.pipe)(D,(0,e.extend)(b))},ct=function(D,b,z){return(0,s.pipe)(D,(0,e.reduce)(b,z))},Le=function(D){var b=(0,e.foldMap)(D);return function(z,H){return(0,s.pipe)(z,b(H))}},Pe=function(D,b,z){return(0,s.pipe)(D,(0,e.reduceRight)(b,z))},Se=function(D){var b=(0,e.traverse)(D);return function(z,H){return(0,s.pipe)(z,b(H))}},bt=function(D,b){return(0,s.pipe)(D,(0,e.alt)(b))},vt=function(D,b,z){return(0,s.pipe)(D,(0,e.reduceWithIndex)(b,z))},Pt=function(D){var b=(0,e.foldMapWithIndex)(D);return function(z,H){return(0,s.pipe)(z,b(H))}},At=function(D,b,z){return(0,s.pipe)(D,(0,e.reduceRightWithIndex)(b,z))},fe=function(D){var b=(0,e.traverseWithIndex)(D);return function(z,H){return(0,s.pipe)(z,b(H))}};e.of=f.singleton;var he=function(D){return function(b){return(0,s.pipe)(b,T(D()))}};e.altW=he,e.alt=e.altW;var Nt=function(D){return(0,e.chain)(function(b){return(0,s.pipe)(D,(0,e.map)(b))})};e.ap=Nt;var st=function(D){return(0,e.chainWithIndex)(function(b,z){return D(z)})};e.chain=st;var me=function(D){return function(b){for(var z=(0,e.tail)(b),H=[D(b)];(0,e.isNonEmpty)(z);)H.push(D(z)),z=(0,e.tail)(z);return H}};e.extend=me,e.duplicate=(0,e.extend)(s.identity),e.flatten=(0,e.chain)(s.identity);var Ct=function(D){return(0,e.mapWithIndex)(function(b,z){return D(z)})};e.map=Ct;var et=function(D){return function(b){for(var z=[D(0,(0,e.head)(b))],H=1;H<b.length;H++)z.push(D(H,b[H]));return z}};e.mapWithIndex=et;var j=function(D,b){return(0,e.reduceWithIndex)(D,function(z,H,se){return b(H,se)})};e.reduce=j;var zt=function(D){return function(b){return function(z){return z.slice(1).reduce(function(H,se){return D.concat(H,b(se))},b(z[0]))}}};e.foldMap=zt;var Ee=function(D,b){return(0,e.reduceRightWithIndex)(D,function(z,H,se){return b(H,se)})};e.reduceRight=Ee;var tt=function(D,b){return function(z){return z.reduce(function(H,se,we){return b(we,H,se)},D)}};e.reduceWithIndex=tt;var kt=function(D){return function(b){return function(z){return z.slice(1).reduce(function(H,se,we){return D.concat(H,b(we+1,se))},b(0,z[0]))}}};e.foldMapWithIndex=kt;var Tt=function(D,b){return function(z){return z.reduceRight(function(H,se,we){return b(we,se,H)},D)}};e.reduceRightWithIndex=Tt;var Ft=function(D){var b=(0,e.traverseWithIndex)(D);return function(z){return b(function(H,se){return z(se)})}};e.traverse=Ft;var St=function(D){return(0,e.traverseWithIndex)(D)(s.SK)};e.sequence=St;var _t=function(D){return function(b){return function(z){for(var H=D.map(b(0,(0,e.head)(z)),e.of),se=1;se<z.length;se++)H=D.ap(D.map(H,function(we){return function(ke){return(0,s.pipe)(we,(0,e.append)(ke))}}),b(se,z[se]));return H}}};e.traverseWithIndex=_t,e.extract=f.head,e.URI="ReadonlyNonEmptyArray";var yt=function(D){return{show:function(b){return"[".concat(b.map(D.show).join(", "),"]")}}};e.getShow=yt;var de=function(){return{concat:$}};e.getSemigroup=de;var Oe=function(D){return(0,c.fromEquals)(function(b,z){return b.length===z.length&&b.every(function(H,se){return D.equals(H,z[se])})})};e.getEq=Oe;var Ve=function(D){var b=(0,e.union)(D);return{concat:function(z,H){return b(H)(z)}}};e.getUnionSemigroup=Ve,e.Functor={URI:e.URI,map:Ge},e.flap=(0,l.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:Ge,mapWithIndex:De},e.Apply={URI:e.URI,map:Ge,ap:ot},e.apFirst=(0,u.apFirst)(e.Apply),e.apSecond=(0,u.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:Ge,ap:ot,of:e.of},e.Chain={URI:e.URI,map:Ge,ap:ot,chain:Me},e.chainFirst=(0,o.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:Ge,ap:ot,of:e.of,chain:Me},e.Foldable={URI:e.URI,reduce:ct,foldMap:Le,reduceRight:Pe},e.FoldableWithIndex={URI:e.URI,reduce:ct,foldMap:Le,reduceRight:Pe,reduceWithIndex:vt,foldMapWithIndex:Pt,reduceRightWithIndex:At},e.Traversable={URI:e.URI,map:Ge,reduce:ct,foldMap:Le,reduceRight:Pe,traverse:Se,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:Ge,mapWithIndex:De,reduce:ct,foldMap:Le,reduceRight:Pe,traverse:Se,sequence:e.sequence,reduceWithIndex:vt,foldMapWithIndex:Pt,reduceRightWithIndex:At,traverseWithIndex:fe},e.Alt={URI:e.URI,map:Ge,alt:bt},e.Comonad={URI:e.URI,map:Ge,extend:Je,extract:e.extract},e.Do=(0,e.of)(f.emptyRecord),e.bindTo=(0,l.bindTo)(e.Functor),e.bind=(0,o.bind)(e.Chain),e.apS=(0,u.apS)(e.Apply),e.head=e.extract,e.tail=f.tail;var nt=function(D){return D[D.length-1]};e.last=nt;var mt=function(D){return D.slice(0,-1)};e.init=mt;var lt=function(D){var b=g.min(D);return function(z){return z.reduce(b.concat)}};e.min=lt;var Mt=function(D){var b=g.max(D);return function(z){return z.reduce(b.concat)}};e.max=Mt;var Wt=function(D){return function(b){return b.reduce(D.concat)}};e.concatAll=Wt;var Xt=function(D){return function(b){return D((0,e.head)(b),(0,e.tail)(b))}};e.matchLeft=Xt;var Zt=function(D){return function(b){return D((0,e.init)(b),(0,e.last)(b))}};e.matchRight=Zt;var h=function(D){return function(b){return a([D((0,e.head)(b))],(0,e.tail)(b),!0)}};e.modifyHead=h;var y=function(D){return(0,e.modifyHead)(function(){return D})};e.updateHead=y;var F=function(D){return function(b){return(0,s.pipe)((0,e.init)(b),(0,e.append)(D((0,e.last)(b))))}};e.modifyLast=F;var N=function(D){return(0,e.modifyLast)(function(){return D})};e.updateLast=N;var Y=function(D){var b=(0,e.concatAll)(D);return function(z){return(0,s.flow)((0,e.intersperse)(z),b)}};e.intercalate=Y;function te(D){var b=(0,e.sort)(D),z=X(D);return function(H){return(0,e.isNonEmpty)(H)?z(b(H)):e.empty}}e.groupSort=te;function oe(D){return(0,e.filterWithIndex)(function(b,z){return D(z)})}e.filter=oe;var Ne=function(D){return function(b){return(0,e.fromReadonlyArray)(b.filter(function(z,H){return D(H,z)}))}};e.filterWithIndex=Ne,e.uncons=e.unprepend,e.unsnoc=e.unappend;function Ie(D,b){return b===void 0?(0,e.prepend)(D):(0,s.pipe)(b,(0,e.prepend)(D))}e.cons=Ie;var rt=function(D,b){return(0,s.pipe)(D,$([b]))};e.snoc=rt;var gt=function(D,b){return function(z){return D<0||D>z.length?f.none:f.some((0,e.unsafeInsertAt)(D,b,z))}};e.insertAt=gt,e.prependToAll=e.prependAll,e.fold=e.concatAll,e.readonlyNonEmptyArray={URI:e.URI,of:e.of,map:Ge,mapWithIndex:De,ap:ot,chain:Me,extend:Je,extract:e.extract,reduce:ct,foldMap:Le,reduceRight:Pe,traverse:Se,sequence:e.sequence,reduceWithIndex:vt,foldMapWithIndex:Pt,reduceRightWithIndex:At,traverseWithIndex:fe,alt:bt}}}),fy=Ze({"node_modules/fp-ts/lib/NonEmptyArray.js"(e){var n=e&&e.__createBinding||(Object.create?function(h,y,F,N){N===void 0&&(N=F);var Y=Object.getOwnPropertyDescriptor(y,F);(!Y||("get"in Y?!y.__esModule:Y.writable||Y.configurable))&&(Y={enumerable:!0,get:function(){return y[F]}}),Object.defineProperty(h,N,Y)}:function(h,y,F,N){N===void 0&&(N=F),h[N]=y[F]}),r=e&&e.__setModuleDefault||(Object.create?function(h,y){Object.defineProperty(h,"default",{enumerable:!0,value:y})}:function(h,y){h.default=y}),i=e&&e.__importStar||function(h){if(h&&h.__esModule)return h;var y={};if(h!=null)for(var F in h)F!=="default"&&Object.prototype.hasOwnProperty.call(h,F)&&n(y,h,F);return r(y,h),y},a=e&&e.__spreadArray||function(h,y,F){if(F||arguments.length===2)for(var N=0,Y=y.length,te;N<Y;N++)(te||!(N in y))&&(te||(te=Array.prototype.slice.call(y,0,N)),te[N]=y[N]);return h.concat(te||Array.prototype.slice.call(y))};Object.defineProperty(e,"__esModule",{value:!0}),e.mapWithIndex=e.map=e.flatten=e.duplicate=e.extend=e.chain=e.ap=e.alt=e.altW=e.chunksOf=e.splitAt=e.chop=e.chainWithIndex=e.foldMap=e.foldMapWithIndex=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.of=e.copy=e.modifyAt=e.updateAt=e.insertAt=e.sort=e.groupBy=e.group=e.reverse=e.concat=e.concatW=e.unappend=e.unprepend=e.range=e.replicate=e.makeBy=e.fromArray=e.fromReadonlyNonEmptyArray=e.rotate=e.union=e.sortBy=e.uniq=e.unsafeUpdateAt=e.unsafeInsertAt=e.append=e.appendW=e.prepend=e.prependW=e.isOutOfBound=e.isNonEmpty=void 0,e.filter=e.groupSort=e.intercalate=e.updateLast=e.modifyLast=e.updateHead=e.modifyHead=e.matchRight=e.matchLeft=e.concatAll=e.max=e.min=e.init=e.last=e.tail=e.head=e.apS=e.bind=e.bindTo=e.Do=e.Comonad=e.Alt=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getUnionSemigroup=e.getEq=e.getSemigroup=e.getShow=e.URI=e.extract=e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.reduce=void 0,e.nonEmptyArray=e.fold=e.prependToAll=e.snoc=e.cons=e.unsnoc=e.uncons=e.filterWithIndex=void 0;var u=na(),o=ai(),c=Kt(),s=ui(),l=i(On()),f=oi(),d=i(Hu()),g=function(h){return h.length>0};e.isNonEmpty=g;var M=function(h,y){return h<0||h>=y.length};e.isOutOfBound=M;var P=function(h){return function(y){return a([h],y,!0)}};e.prependW=P,e.prepend=e.prependW;var q=function(h){return function(y){return a(a([],y,!0),[h],!1)}};e.appendW=q,e.append=e.appendW;var L=function(h,y,F){if((0,e.isNonEmpty)(F)){var N=(0,e.fromReadonlyNonEmptyArray)(F);return N.splice(h,0,y),N}return[y]};e.unsafeInsertAt=L;var A=function(h,y,F){var N=(0,e.fromReadonlyNonEmptyArray)(F);return N[h]=y,N};e.unsafeUpdateAt=A;var _=function(h){return function(y){if(y.length===1)return(0,e.copy)(y);for(var F=[(0,e.head)(y)],N=(0,e.tail)(y),Y=function(Ie){F.every(function(rt){return!h.equals(rt,Ie)})&&F.push(Ie)},te=0,oe=N;te<oe.length;te++){var Ne=oe[te];Y(Ne)}return F}};e.uniq=_;var W=function(h){if((0,e.isNonEmpty)(h)){var y=(0,f.getMonoid)();return(0,e.sort)(h.reduce(y.concat,y.empty))}return e.copy};e.sortBy=W;var k=function(h){var y=(0,e.uniq)(h);return function(F){return function(N){return y((0,c.pipe)(N,T(F)))}}};e.union=k;var C=function(h){return function(y){var F=y.length,N=Math.round(h)%F;if((0,e.isOutOfBound)(Math.abs(N),y)||N===0)return(0,e.copy)(y);if(N<0){var Y=(0,e.splitAt)(-N)(y),te=Y[0],oe=Y[1];return(0,c.pipe)(oe,T(te))}else return(0,e.rotate)(N-F)(y)}};e.rotate=C,e.fromReadonlyNonEmptyArray=l.fromReadonlyNonEmptyArray;var S=function(h){return(0,e.isNonEmpty)(h)?l.some(h):l.none};e.fromArray=S;var B=function(h){return function(y){for(var F=Math.max(0,Math.floor(y)),N=[h(0)],Y=1;Y<F;Y++)N.push(h(Y));return N}};e.makeBy=B;var U=function(h){return(0,e.makeBy)(function(){return h})};e.replicate=U;var ae=function(h,y){return h<=y?(0,e.makeBy)(function(F){return h+F})(y-h+1):[h]};e.range=ae;var ee=function(h){return[(0,e.head)(h),(0,e.tail)(h)]};e.unprepend=ee;var pe=function(h){return[(0,e.init)(h),(0,e.last)(h)]};e.unappend=pe;function be(h){return function(y){return y.concat(h)}}e.concatW=be;function T(h,y){return y?h.concat(y):function(F){return F.concat(h)}}e.concat=T;var $=function(h){return a([(0,e.last)(h)],h.slice(0,-1).reverse(),!0)};e.reverse=$;function K(h){return function(y){var F=y.length;if(F===0)return[];for(var N=[],Y=y[0],te=[Y],oe=1;oe<F;oe++){var Ne=y[oe];h.equals(Ne,Y)?te.push(Ne):(N.push(te),Y=Ne,te=[Y])}return N.push(te),N}}e.group=K;var X=function(h){return function(y){for(var F={},N=0,Y=y;N<Y.length;N++){var te=Y[N],oe=h(te);l.has.call(F,oe)?F[oe].push(te):F[oe]=[te]}return F}};e.groupBy=X;var re=function(h){return function(y){return y.slice().sort(h.compare)}};e.sort=re;var x=function(h,y){return function(F){return h<0||h>F.length?l.none:l.some((0,e.unsafeInsertAt)(h,y,F))}};e.insertAt=x;var ye=function(h,y){return(0,e.modifyAt)(h,function(){return y})};e.updateAt=ye;var Fe=function(h,y){return function(F){return(0,e.isOutOfBound)(h,F)?l.none:l.some((0,e.unsafeUpdateAt)(h,y(F[h]),F))}};e.modifyAt=Fe,e.copy=e.fromReadonlyNonEmptyArray;var xe=function(h){return[h]};e.of=xe;var ve=function(h,y,F){for(var N=[F(h[0],y[0])],Y=Math.min(h.length,y.length),te=1;te<Y;te++)N[te]=F(h[te],y[te]);return N};e.zipWith=ve;function ze(h,y){return y===void 0?function(F){return ze(F,h)}:(0,e.zipWith)(h,y,function(F,N){return[F,N]})}e.zip=ze;var dt=function(h){for(var y=[h[0][0]],F=[h[0][1]],N=1;N<h.length;N++)y[N]=h[N][0],F[N]=h[N][1];return[y,F]};e.unzip=dt;var Re=function(h){return function(y){for(var F=[h,y[0]],N=1;N<y.length;N++)F.push(h,y[N]);return F}};e.prependAll=Re;var ut=function(h){return function(y){var F=(0,e.tail)(y);return(0,e.isNonEmpty)(F)?(0,c.pipe)(F,(0,e.prependAll)(h),(0,e.prepend)((0,e.head)(y))):(0,e.copy)(y)}};e.intersperse=ut,e.foldMapWithIndex=d.foldMapWithIndex,e.foldMap=d.foldMap;var Rt=function(h){return function(y){for(var F=(0,e.fromReadonlyNonEmptyArray)(h(0,(0,e.head)(y))),N=1;N<y.length;N++)F.push.apply(F,h(N,y[N]));return F}};e.chainWithIndex=Rt;var Yt=function(h){return function(y){for(var F=h(y),N=F[0],Y=F[1],te=[N],oe=Y;(0,e.isNonEmpty)(oe);){var Ne=h(oe),Ie=Ne[0],rt=Ne[1];te.push(Ie),oe=rt}return te}};e.chop=Yt;var vn=function(h){return function(y){var F=Math.max(1,h);return F>=y.length?[(0,e.copy)(y),[]]:[(0,c.pipe)(y.slice(1,F),(0,e.prepend)((0,e.head)(y))),y.slice(F)]}};e.splitAt=vn;var Ge=function(h){return(0,e.chop)((0,e.splitAt)(h))};e.chunksOf=Ge;var De=function(h,y){return(0,c.pipe)(h,(0,e.map)(y))},ot=function(h,y){return(0,c.pipe)(h,(0,e.mapWithIndex)(y))},Me=function(h,y){return(0,c.pipe)(h,(0,e.ap)(y))},Je=function(h,y){return(0,c.pipe)(h,(0,e.chain)(y))},ct=function(h,y){return(0,c.pipe)(h,(0,e.extend)(y))},Le=function(h,y,F){return(0,c.pipe)(h,(0,e.reduce)(y,F))},Pe=function(h){var y=(0,e.foldMap)(h);return function(F,N){return(0,c.pipe)(F,y(N))}},Se=function(h,y,F){return(0,c.pipe)(h,(0,e.reduceRight)(y,F))},bt=function(h){var y=(0,e.traverse)(h);return function(F,N){return(0,c.pipe)(F,y(N))}},vt=function(h,y){return(0,c.pipe)(h,(0,e.alt)(y))},Pt=function(h,y,F){return(0,c.pipe)(h,(0,e.reduceWithIndex)(y,F))},At=function(h){var y=(0,e.foldMapWithIndex)(h);return function(F,N){return(0,c.pipe)(F,y(N))}},fe=function(h,y,F){return(0,c.pipe)(h,(0,e.reduceRightWithIndex)(y,F))},he=function(h){var y=(0,e.traverseWithIndex)(h);return function(F,N){return(0,c.pipe)(F,y(N))}},Nt=function(h){return function(y){return(0,c.pipe)(y,be(h()))}};e.altW=Nt,e.alt=e.altW;var st=function(h){return(0,e.chain)(function(y){return(0,c.pipe)(h,(0,e.map)(y))})};e.ap=st;var me=function(h){return(0,e.chainWithIndex)(function(y,F){return h(F)})};e.chain=me;var Ct=function(h){return function(y){for(var F=(0,e.tail)(y),N=[h(y)];(0,e.isNonEmpty)(F);)N.push(h(F)),F=(0,e.tail)(F);return N}};e.extend=Ct,e.duplicate=(0,e.extend)(c.identity),e.flatten=(0,e.chain)(c.identity);var et=function(h){return(0,e.mapWithIndex)(function(y,F){return h(F)})};e.map=et;var j=function(h){return function(y){for(var F=[h(0,(0,e.head)(y))],N=1;N<y.length;N++)F.push(h(N,y[N]));return F}};e.mapWithIndex=j,e.reduce=d.reduce,e.reduceWithIndex=d.reduceWithIndex,e.reduceRight=d.reduceRight,e.reduceRightWithIndex=d.reduceRightWithIndex;var zt=function(h){var y=(0,e.traverseWithIndex)(h);return function(F){return y(function(N,Y){return F(Y)})}};e.traverse=zt;var Ee=function(h){return(0,e.traverseWithIndex)(h)(function(y,F){return F})};e.sequence=Ee;var tt=function(h){return function(y){return function(F){for(var N=h.map(y(0,(0,e.head)(F)),e.of),Y=1;Y<F.length;Y++)N=h.ap(h.map(N,function(te){return function(oe){return(0,c.pipe)(te,(0,e.append)(oe))}}),y(Y,F[Y]));return N}}};e.traverseWithIndex=tt,e.extract=d.head,e.URI="NonEmptyArray",e.getShow=d.getShow;var kt=function(){return{concat:T}};e.getSemigroup=kt,e.getEq=d.getEq;var Tt=function(h){var y=(0,e.union)(h);return{concat:function(F,N){return y(N)(F)}}};e.getUnionSemigroup=Tt,e.Functor={URI:e.URI,map:De},e.flap=(0,s.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:De,mapWithIndex:ot},e.Apply={URI:e.URI,map:De,ap:Me},e.apFirst=(0,u.apFirst)(e.Apply),e.apSecond=(0,u.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:De,ap:Me,of:e.of},e.Chain={URI:e.URI,map:De,ap:Me,chain:Je},e.chainFirst=(0,o.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:De,ap:Me,of:e.of,chain:Je},e.Foldable={URI:e.URI,reduce:Le,foldMap:Pe,reduceRight:Se},e.FoldableWithIndex={URI:e.URI,reduce:Le,foldMap:Pe,reduceRight:Se,reduceWithIndex:Pt,foldMapWithIndex:At,reduceRightWithIndex:fe},e.Traversable={URI:e.URI,map:De,reduce:Le,foldMap:Pe,reduceRight:Se,traverse:bt,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:De,mapWithIndex:ot,reduce:Le,foldMap:Pe,reduceRight:Se,traverse:bt,sequence:e.sequence,reduceWithIndex:Pt,foldMapWithIndex:At,reduceRightWithIndex:fe,traverseWithIndex:he},e.Alt={URI:e.URI,map:De,alt:vt},e.Comonad={URI:e.URI,map:De,extend:ct,extract:e.extract},e.Do=(0,e.of)(l.emptyRecord),e.bindTo=(0,s.bindTo)(e.Functor),e.bind=(0,o.bind)(e.Chain),e.apS=(0,u.apS)(e.Apply),e.head=d.head;var Ft=function(h){return h.slice(1)};e.tail=Ft,e.last=d.last;var St=function(h){return h.slice(0,-1)};e.init=St,e.min=d.min,e.max=d.max;var _t=function(h){return function(y){return y.reduce(h.concat)}};e.concatAll=_t;var yt=function(h){return function(y){return h((0,e.head)(y),(0,e.tail)(y))}};e.matchLeft=yt;var de=function(h){return function(y){return h((0,e.init)(y),(0,e.last)(y))}};e.matchRight=de;var Oe=function(h){return function(y){return a([h((0,e.head)(y))],(0,e.tail)(y),!0)}};e.modifyHead=Oe;var Ve=function(h){return(0,e.modifyHead)(function(){return h})};e.updateHead=Ve;var nt=function(h){return function(y){return(0,c.pipe)((0,e.init)(y),(0,e.append)(h((0,e.last)(y))))}};e.modifyLast=nt;var mt=function(h){return(0,e.modifyLast)(function(){return h})};e.updateLast=mt,e.intercalate=d.intercalate;function lt(h){var y=(0,e.sort)(h),F=K(h);return function(N){return(0,e.isNonEmpty)(N)?F(y(N)):[]}}e.groupSort=lt;function Mt(h){return(0,e.filterWithIndex)(function(y,F){return h(F)})}e.filter=Mt;var Wt=function(h){return function(y){return(0,e.fromArray)(y.filter(function(F,N){return h(N,F)}))}};e.filterWithIndex=Wt,e.uncons=e.unprepend,e.unsnoc=e.unappend;function Xt(h,y){return y===void 0?(0,e.prepend)(h):(0,c.pipe)(y,(0,e.prepend)(h))}e.cons=Xt;var Zt=function(h,y){return(0,c.pipe)(h,(0,e.append)(y))};e.snoc=Zt,e.prependToAll=e.prependAll,e.fold=d.concatAll,e.nonEmptyArray={URI:e.URI,of:e.of,map:De,mapWithIndex:ot,ap:Me,chain:Je,extend:ct,extract:e.extract,reduce:Le,foldMap:Pe,reduceRight:Se,traverse:bt,sequence:e.sequence,reduceWithIndex:Pt,foldMapWithIndex:At,reduceRightWithIndex:fe,traverseWithIndex:he,alt:vt}}}),ds=Ze({"node_modules/fp-ts/lib/number.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Field=e.MonoidProduct=e.MonoidSum=e.SemigroupProduct=e.SemigroupSum=e.MagmaSub=e.Show=e.Bounded=e.Ord=e.Eq=e.isNumber=void 0;var n=function(r){return typeof r=="number"};e.isNumber=n,e.Eq={equals:function(r,i){return r===i}},e.Ord={equals:e.Eq.equals,compare:function(r,i){return r<i?-1:r>i?1:0}},e.Bounded={equals:e.Eq.equals,compare:e.Ord.compare,top:1/0,bottom:-1/0},e.Show={show:function(r){return JSON.stringify(r)}},e.MagmaSub={concat:function(r,i){return r-i}},e.SemigroupSum={concat:function(r,i){return r+i}},e.SemigroupProduct={concat:function(r,i){return r*i}},e.MonoidSum={concat:e.SemigroupSum.concat,empty:0},e.MonoidProduct={concat:e.SemigroupProduct.concat,empty:1},e.Field={add:e.SemigroupSum.concat,zero:0,mul:e.SemigroupProduct.concat,one:1,sub:e.MagmaSub.concat,degree:function(r){return 1},div:function(r,i){return r/i},mod:function(r,i){return r%i}}}}),vs=Ze({"node_modules/fp-ts/lib/Separated.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.right=e.left=e.flap=e.Functor=e.Bifunctor=e.URI=e.bimap=e.mapLeft=e.map=e.separated=void 0;var n=Kt(),r=ui(),i=function(g,M){return{left:g,right:M}};e.separated=i;var a=function(g,M){return(0,n.pipe)(g,(0,e.map)(M))},u=function(g,M){return(0,n.pipe)(g,(0,e.mapLeft)(M))},o=function(g,M,P){return(0,n.pipe)(g,(0,e.bimap)(M,P))},c=function(g){return function(M){return(0,e.separated)((0,e.left)(M),g((0,e.right)(M)))}};e.map=c;var s=function(g){return function(M){return(0,e.separated)(g((0,e.left)(M)),(0,e.right)(M))}};e.mapLeft=s;var l=function(g,M){return function(P){return(0,e.separated)(g((0,e.left)(P)),M((0,e.right)(P)))}};e.bimap=l,e.URI="Separated",e.Bifunctor={URI:e.URI,mapLeft:u,bimap:o},e.Functor={URI:e.URI,map:a},e.flap=(0,r.flap)(e.Functor);var f=function(g){return g.left};e.left=f;var d=function(g){return g.right};e.right=d}}),ys=Ze({"node_modules/fp-ts/lib/Witherable.js"(e){var n=e&&e.__createBinding||(Object.create?function(s,l,f,d){d===void 0&&(d=f);var g=Object.getOwnPropertyDescriptor(l,f);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(s,d,g)}:function(s,l,f,d){d===void 0&&(d=f),s[d]=l[f]}),r=e&&e.__setModuleDefault||(Object.create?function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}:function(s,l){s.default=l}),i=e&&e.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var f in s)f!=="default"&&Object.prototype.hasOwnProperty.call(s,f)&&n(l,s,f);return r(l,s),l};Object.defineProperty(e,"__esModule",{value:!0}),e.filterE=e.witherDefault=e.wiltDefault=void 0;var a=i(On());function u(s,l){return function(f){var d=s.traverse(f);return function(g,M){return f.map(d(g,M),l.separate)}}}e.wiltDefault=u;function o(s,l){return function(f){var d=s.traverse(f);return function(g,M){return f.map(d(g,M),l.compact)}}}e.witherDefault=o;function c(s){return function(l){var f=s.wither(l);return function(d){return function(g){return f(g,function(M){return l.map(d(M),function(P){return P?a.some(M):a.none})})}}}}e.filterE=c}}),ms=Ze({"node_modules/fp-ts/lib/Zero.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.guard=void 0;function n(r,i){return function(a){return a?i.of(void 0):r.zero()}}e.guard=n}}),hy=Ze({"node_modules/fp-ts/lib/ReadonlyArray.js"(e){var n=e&&e.__createBinding||(Object.create?function(v,m,w,O){O===void 0&&(O=w);var Q=Object.getOwnPropertyDescriptor(m,w);(!Q||("get"in Q?!m.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return m[w]}}),Object.defineProperty(v,O,Q)}:function(v,m,w,O){O===void 0&&(O=w),v[O]=m[w]}),r=e&&e.__setModuleDefault||(Object.create?function(v,m){Object.defineProperty(v,"default",{enumerable:!0,value:m})}:function(v,m){v.default=m}),i=e&&e.__importStar||function(v){if(v&&v.__esModule)return v;var m={};if(v!=null)for(var w in v)w!=="default"&&Object.prototype.hasOwnProperty.call(v,w)&&n(m,v,w);return r(m,v),m},a=e&&e.__spreadArray||function(v,m,w){if(w||arguments.length===2)for(var O=0,Q=m.length,ne;O<Q;O++)(ne||!(O in m))&&(ne||(ne=Array.prototype.slice.call(m,0,O)),ne[O]=m[O]);return v.concat(ne||Array.prototype.slice.call(m))};Object.defineProperty(e,"__esModule",{value:!0}),e.sort=e.lefts=e.rights=e.reverse=e.modifyAt=e.deleteAt=e.updateAt=e.insertAt=e.findLastIndex=e.findLastMap=e.findLast=e.findFirstMap=e.findFirst=e.findIndex=e.dropLeftWhile=e.dropRight=e.dropLeft=e.spanLeft=e.takeLeftWhile=e.takeRight=e.takeLeft=e.init=e.tail=e.last=e.head=e.lookup=e.isOutOfBound=e.size=e.scanRight=e.scanLeft=e.chainWithIndex=e.foldRight=e.matchRight=e.matchRightW=e.foldLeft=e.matchLeft=e.matchLeftW=e.match=e.matchW=e.fromEither=e.fromOption=e.fromPredicate=e.replicate=e.makeBy=e.appendW=e.append=e.prependW=e.prepend=e.isNonEmpty=e.isEmpty=void 0,e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.foldMap=e.reduce=e.foldMapWithIndex=e.duplicate=e.extend=e.filterWithIndex=e.partitionMapWithIndex=e.partitionMap=e.partitionWithIndex=e.partition=e.compact=e.filterMap=e.filterMapWithIndex=e.filter=e.separate=e.mapWithIndex=e.map=e.flatten=e.chain=e.ap=e.alt=e.altW=e.zero=e.of=e._chainRecBreadthFirst=e._chainRecDepthFirst=e.difference=e.intersection=e.union=e.concat=e.concatW=e.comprehension=e.fromOptionK=e.chunksOf=e.splitAt=e.chop=e.sortBy=e.uniq=e.elem=e.rotate=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=void 0,e.toArray=e.unsafeDeleteAt=e.unsafeUpdateAt=e.unsafeInsertAt=e.fromEitherK=e.FromEither=e.filterE=e.Witherable=e.ChainRecBreadthFirst=e.chainRecBreadthFirst=e.ChainRecDepthFirst=e.chainRecDepthFirst=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.guard=e.Zero=e.Alt=e.Unfoldable=e.chainFirst=e.Monad=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.getOrd=e.getEq=e.getMonoid=e.getSemigroup=e.getShow=e.URI=e.unfold=e.wilt=e.wither=e.traverseWithIndex=void 0,e.readonlyArray=e.prependToAll=e.snoc=e.cons=e.range=e.apS=e.bind=e.bindTo=e.Do=e.intercalate=e.exists=e.some=e.every=e.empty=e.fromArray=void 0;var u=na(),o=ai(),c=Vu(),s=hs(),l=Kt(),f=ui(),d=i(On()),g=i(ds()),M=oi(),P=i(Hu()),q=vs(),L=ys(),A=ms(),_=function(v){return v.length===0};e.isEmpty=_,e.isNonEmpty=P.isNonEmpty,e.prepend=P.prepend,e.prependW=P.prependW,e.append=P.append,e.appendW=P.appendW;var W=function(v,m){return v<=0?e.empty:P.makeBy(m)(v)};e.makeBy=W;var k=function(v,m){return(0,e.makeBy)(v,function(){return m})};e.replicate=k;function C(v){return function(m){return v(m)?[m]:e.empty}}e.fromPredicate=C;var S=function(v){return d.isNone(v)?e.empty:[v.value]};e.fromOption=S;var B=function(v){return d.isLeft(v)?e.empty:[v.right]};e.fromEither=B;var U=function(v,m){return function(w){return(0,e.isNonEmpty)(w)?m(w):v()}};e.matchW=U,e.match=e.matchW;var ae=function(v,m){return function(w){return(0,e.isNonEmpty)(w)?m(P.head(w),P.tail(w)):v()}};e.matchLeftW=ae,e.matchLeft=e.matchLeftW,e.foldLeft=e.matchLeft;var ee=function(v,m){return function(w){return(0,e.isNonEmpty)(w)?m(P.init(w),P.last(w)):v()}};e.matchRightW=ee,e.matchRight=e.matchRightW,e.foldRight=e.matchRight;var pe=function(v){return function(m){if((0,e.isEmpty)(m))return e.empty;for(var w=[],O=0;O<m.length;O++)w.push.apply(w,v(O,m[O]));return w}};e.chainWithIndex=pe;var be=function(v,m){return function(w){var O=w.length,Q=new Array(O+1);Q[0]=v;for(var ne=0;ne<O;ne++)Q[ne+1]=m(Q[ne],w[ne]);return Q}};e.scanLeft=be;var T=function(v,m){return function(w){var O=w.length,Q=new Array(O+1);Q[O]=v;for(var ne=O-1;ne>=0;ne--)Q[ne]=m(w[ne],Q[ne+1]);return Q}};e.scanRight=T;var $=function(v){return v.length};e.size=$,e.isOutOfBound=P.isOutOfBound;function K(v,m){return m===void 0?function(w){return K(v,w)}:(0,e.isOutOfBound)(v,m)?d.none:d.some(m[v])}e.lookup=K;var X=function(v){return(0,e.isNonEmpty)(v)?d.some(P.head(v)):d.none};e.head=X;var re=function(v){return(0,e.isNonEmpty)(v)?d.some(P.last(v)):d.none};e.last=re;var x=function(v){return(0,e.isNonEmpty)(v)?d.some(P.tail(v)):d.none};e.tail=x;var ye=function(v){return(0,e.isNonEmpty)(v)?d.some(P.init(v)):d.none};e.init=ye;var Fe=function(v){return function(m){return(0,e.isOutOfBound)(v,m)?m:v===0?e.empty:m.slice(0,v)}};e.takeLeft=Fe;var xe=function(v){return function(m){return(0,e.isOutOfBound)(v,m)?m:v===0?e.empty:m.slice(-v)}};e.takeRight=xe;function ve(v){return function(m){for(var w=[],O=0,Q=m;O<Q.length;O++){var ne=Q[O];if(!v(ne))break;w.push(ne)}var Xe=w.length;return Xe===m.length?m:Xe===0?e.empty:w}}e.takeLeftWhile=ve;var ze=function(v,m){for(var w=v.length,O=0;O<w&&m(v[O]);O++);return O};function dt(v){return function(m){var w=(0,e.splitAt)(ze(m,v))(m),O=w[0],Q=w[1];return{init:O,rest:Q}}}e.spanLeft=dt;var Re=function(v){return function(m){return v<=0||(0,e.isEmpty)(m)?m:v>=m.length?e.empty:m.slice(v,m.length)}};e.dropLeft=Re;var ut=function(v){return function(m){return v<=0||(0,e.isEmpty)(m)?m:v>=m.length?e.empty:m.slice(0,m.length-v)}};e.dropRight=ut;function Rt(v){return function(m){var w=ze(m,v);return w===0?m:w===m.length?e.empty:m.slice(w)}}e.dropLeftWhile=Rt;var Yt=function(v){return function(m){for(var w=0;w<m.length;w++)if(v(m[w]))return d.some(w);return d.none}};e.findIndex=Yt;function vn(v){return function(m){for(var w=0;w<m.length;w++)if(v(m[w]))return d.some(m[w]);return d.none}}e.findFirst=vn;var Ge=function(v){return function(m){for(var w=0;w<m.length;w++){var O=v(m[w]);if(d.isSome(O))return O}return d.none}};e.findFirstMap=Ge;function De(v){return function(m){for(var w=m.length-1;w>=0;w--)if(v(m[w]))return d.some(m[w]);return d.none}}e.findLast=De;var ot=function(v){return function(m){for(var w=m.length-1;w>=0;w--){var O=v(m[w]);if(d.isSome(O))return O}return d.none}};e.findLastMap=ot;var Me=function(v){return function(m){for(var w=m.length-1;w>=0;w--)if(v(m[w]))return d.some(w);return d.none}};e.findLastIndex=Me;var Je=function(v,m){return function(w){return v<0||v>w.length?d.none:d.some(P.unsafeInsertAt(v,m,w))}};e.insertAt=Je;var ct=function(v,m){return(0,e.modifyAt)(v,function(){return m})};e.updateAt=ct;var Le=function(v){return function(m){return(0,e.isOutOfBound)(v,m)?d.none:d.some((0,e.unsafeDeleteAt)(v,m))}};e.deleteAt=Le;var Pe=function(v,m){return function(w){return(0,e.isOutOfBound)(v,w)?d.none:d.some((0,e.unsafeUpdateAt)(v,m(w[v]),w))}};e.modifyAt=Pe;var Se=function(v){return v.length<=1?v:v.slice().reverse()};e.reverse=Se;var bt=function(v){for(var m=[],w=0;w<v.length;w++){var O=v[w];O._tag==="Right"&&m.push(O.right)}return m};e.rights=bt;var vt=function(v){for(var m=[],w=0;w<v.length;w++){var O=v[w];O._tag==="Left"&&m.push(O.left)}return m};e.lefts=vt;var Pt=function(v){return function(m){return m.length<=1?m:m.slice().sort(v.compare)}};e.sort=Pt;var At=function(v,m,w){for(var O=[],Q=Math.min(v.length,m.length),ne=0;ne<Q;ne++)O[ne]=w(v[ne],m[ne]);return O};e.zipWith=At;function fe(v,m){return m===void 0?function(w){return fe(w,v)}:(0,e.zipWith)(v,m,function(w,O){return[w,O]})}e.zip=fe;var he=function(v){for(var m=[],w=[],O=0;O<v.length;O++)m[O]=v[O][0],w[O]=v[O][1];return[m,w]};e.unzip=he;var Nt=function(v){var m=P.prependAll(v);return function(w){return(0,e.isNonEmpty)(w)?m(w):w}};e.prependAll=Nt;var st=function(v){var m=P.intersperse(v);return function(w){return(0,e.isNonEmpty)(w)?m(w):w}};e.intersperse=st;var me=function(v){var m=P.rotate(v);return function(w){return(0,e.isNonEmpty)(w)?m(w):w}};e.rotate=me;function Ct(v){return function(m,w){if(w===void 0){var O=Ct(v);return function(Xe){return O(m,Xe)}}for(var Q=function(Xe){return v.equals(Xe,m)},ne=0;ne<w.length;ne++)if(Q(w[ne]))return!0;return!1}}e.elem=Ct;var et=function(v){var m=P.uniq(v);return function(w){return(0,e.isNonEmpty)(w)?m(w):w}};e.uniq=et;var j=function(v){var m=P.sortBy(v);return function(w){return(0,e.isNonEmpty)(w)?m(w):w}};e.sortBy=j;var zt=function(v){var m=P.chop(v);return function(w){return(0,e.isNonEmpty)(w)?m(w):e.empty}};e.chop=zt;var Ee=function(v){return function(m){return v>=1&&(0,e.isNonEmpty)(m)?P.splitAt(v)(m):(0,e.isEmpty)(m)?[m,e.empty]:[e.empty,m]}};e.splitAt=Ee;var tt=function(v){var m=P.chunksOf(v);return function(w){return(0,e.isNonEmpty)(w)?m(w):e.empty}};e.chunksOf=tt;var kt=function(v){return function(){for(var m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];return(0,e.fromOption)(v.apply(void 0,m))}};e.fromOptionK=kt;function Tt(v,m,w){w===void 0&&(w=function(){return!0});var O=function(Q,ne){return(0,e.isNonEmpty)(ne)?(0,l.pipe)(P.head(ne),(0,e.chain)(function(Xe){return O((0,l.pipe)(Q,(0,e.append)(Xe)),P.tail(ne))})):w.apply(void 0,Q)?[m.apply(void 0,Q)]:e.empty};return O(e.empty,v)}e.comprehension=Tt;var Ft=function(v){return function(m){return(0,e.isEmpty)(m)?v:(0,e.isEmpty)(v)?m:m.concat(v)}};e.concatW=Ft,e.concat=e.concatW;function St(v){var m=P.union(v);return function(w,O){if(O===void 0){var Q=St(v);return function(ne){return Q(ne,w)}}return(0,e.isNonEmpty)(w)&&(0,e.isNonEmpty)(O)?m(O)(w):(0,e.isNonEmpty)(w)?w:O}}e.union=St;function _t(v){var m=Ct(v);return function(w,O){if(O===void 0){var Q=_t(v);return function(ne){return Q(ne,w)}}return w.filter(function(ne){return m(ne,O)})}}e.intersection=_t;function yt(v){var m=Ct(v);return function(w,O){if(O===void 0){var Q=yt(v);return function(ne){return Q(ne,w)}}return w.filter(function(ne){return!m(ne,O)})}}e.difference=yt;var de=function(v,m){return(0,l.pipe)(v,(0,e.map)(m))},Oe=function(v,m){return(0,l.pipe)(v,(0,e.mapWithIndex)(m))},Ve=function(v,m){return(0,l.pipe)(v,(0,e.ap)(m))},nt=function(v,m){return(0,l.pipe)(v,(0,e.chain)(m))},mt=function(v,m){return(0,l.pipe)(v,(0,e.filter)(m))},lt=function(v,m){return(0,l.pipe)(v,(0,e.filterMap)(m))},Mt=function(v,m){return(0,l.pipe)(v,(0,e.partition)(m))},Wt=function(v,m){return(0,l.pipe)(v,(0,e.partitionMap)(m))},Xt=function(v,m){return(0,l.pipe)(v,(0,e.partitionWithIndex)(m))},Zt=function(v,m){return(0,l.pipe)(v,(0,e.partitionMapWithIndex)(m))},h=function(v,m){return(0,l.pipe)(v,(0,e.alt)(m))},y=function(v,m,w){return(0,l.pipe)(v,(0,e.reduce)(m,w))},F=function(v){var m=(0,e.foldMap)(v);return function(w,O){return(0,l.pipe)(w,m(O))}},N=function(v,m,w){return(0,l.pipe)(v,(0,e.reduceRight)(m,w))},Y=function(v,m,w){return(0,l.pipe)(v,(0,e.reduceWithIndex)(m,w))},te=function(v){var m=(0,e.foldMapWithIndex)(v);return function(w,O){return(0,l.pipe)(w,m(O))}},oe=function(v,m,w){return(0,l.pipe)(v,(0,e.reduceRightWithIndex)(m,w))},Ne=function(v,m){return(0,l.pipe)(v,(0,e.filterMapWithIndex)(m))},Ie=function(v,m){return(0,l.pipe)(v,(0,e.filterWithIndex)(m))},rt=function(v,m){return(0,l.pipe)(v,(0,e.extend)(m))},gt=function(v){var m=(0,e.traverse)(v);return function(w,O){return(0,l.pipe)(w,m(O))}},D=function(v){var m=(0,e.traverseWithIndex)(v);return function(w,O){return(0,l.pipe)(w,m(O))}},b=function(v,m){return(0,l.pipe)(v,(0,e.chainRecDepthFirst)(m))};e._chainRecDepthFirst=b;var z=function(v,m){return(0,l.pipe)(v,(0,e.chainRecBreadthFirst)(m))};e._chainRecBreadthFirst=z,e.of=P.of;var H=function(){return e.empty};e.zero=H;var se=function(v){return function(m){return m.concat(v())}};e.altW=se,e.alt=e.altW;var we=function(v){return(0,e.chain)(function(m){return(0,l.pipe)(v,(0,e.map)(m))})};e.ap=we;var ke=function(v){return function(m){return(0,l.pipe)(m,(0,e.chainWithIndex)(function(w,O){return v(O)}))}};e.chain=ke,e.flatten=(0,e.chain)(l.identity);var It=function(v){return function(m){return m.map(function(w){return v(w)})}};e.map=It;var Ae=function(v){return function(m){return m.map(function(w,O){return v(O,w)})}};e.mapWithIndex=Ae;var Te=function(v){for(var m=[],w=[],O=0,Q=v;O<Q.length;O++){var ne=Q[O];ne._tag==="Left"?m.push(ne.left):w.push(ne.right)}return(0,q.separated)(m,w)};e.separate=Te;var ge=function(v){return function(m){return m.filter(v)}};e.filter=ge;var Ye=function(v){return function(m){for(var w=[],O=0;O<m.length;O++){var Q=v(O,m[O]);d.isSome(Q)&&w.push(Q.value)}return w}};e.filterMapWithIndex=Ye;var pt=function(v){return(0,e.filterMapWithIndex)(function(m,w){return v(w)})};e.filterMap=pt,e.compact=(0,e.filterMap)(l.identity);var Qe=function(v){return(0,e.partitionWithIndex)(function(m,w){return v(w)})};e.partition=Qe;var Qt=function(v){return function(m){for(var w=[],O=[],Q=0;Q<m.length;Q++){var ne=m[Q];v(Q,ne)?O.push(ne):w.push(ne)}return(0,q.separated)(w,O)}};e.partitionWithIndex=Qt;var Lt=function(v){return(0,e.partitionMapWithIndex)(function(m,w){return v(w)})};e.partitionMap=Lt;var $t=function(v){return function(m){for(var w=[],O=[],Q=0;Q<m.length;Q++){var ne=v(Q,m[Q]);ne._tag==="Left"?w.push(ne.left):O.push(ne.right)}return(0,q.separated)(w,O)}};e.partitionMapWithIndex=$t;var xt=function(v){return function(m){return m.filter(function(w,O){return v(O,w)})}};e.filterWithIndex=xt;var _n=function(v){return function(m){return m.map(function(w,O){return v(m.slice(O))})}};e.extend=_n,e.duplicate=(0,e.extend)(l.identity);var Lr=function(v){return function(m){return function(w){return w.reduce(function(O,Q,ne){return v.concat(O,m(ne,Q))},v.empty)}}};e.foldMapWithIndex=Lr;var _a=function(v,m){return(0,e.reduceWithIndex)(v,function(w,O,Q){return m(O,Q)})};e.reduce=_a;var Or=function(v){var m=(0,e.foldMapWithIndex)(v);return function(w){return m(function(O,Q){return w(Q)})}};e.foldMap=Or;var kr=function(v,m){return function(w){for(var O=w.length,Q=v,ne=0;ne<O;ne++)Q=m(ne,Q,w[ne]);return Q}};e.reduceWithIndex=kr;var Ma=function(v,m){return(0,e.reduceRightWithIndex)(v,function(w,O,Q){return m(O,Q)})};e.reduceRight=Ma;var Ia=function(v,m){return function(w){return w.reduceRight(function(O,Q,ne){return m(ne,Q,O)},v)}};e.reduceRightWithIndex=Ia;var Ba=function(v){var m=(0,e.traverseWithIndex)(v);return function(w){return m(function(O,Q){return w(Q)})}};e.traverse=Ba;var p=function(v){return function(m){return y(m,v.of((0,e.zero)()),function(w,O){return v.ap(v.map(w,function(Q){return function(ne){return(0,l.pipe)(Q,(0,e.append)(ne))}}),O)})}};e.sequence=p;var E=function(v){return function(m){return(0,e.reduceWithIndex)(v.of((0,e.zero)()),function(w,O,Q){return v.ap(v.map(O,function(ne){return function(Xe){return(0,l.pipe)(ne,(0,e.append)(Xe))}}),m(w,Q))})}};e.traverseWithIndex=E;var I=function(v){var m=Pa(v);return function(w){return function(O){return m(O,w)}}};e.wither=I;var G=function(v){var m=Na(v);return function(w){return function(O){return m(O,w)}}};e.wilt=G;var ce=function(v,m){for(var w=[],O=v;;){var Q=m(O);if(d.isSome(Q)){var ne=Q.value,Xe=ne[0],Vn=ne[1];w.push(Xe),O=Vn}else break}return w};e.unfold=ce,e.URI="ReadonlyArray";var le=function(v){return{show:function(m){return"[".concat(m.map(v.show).join(", "),"]")}}};e.getShow=le;var Un=function(){return{concat:function(v,m){return(0,e.isEmpty)(v)?m:(0,e.isEmpty)(m)?v:v.concat(m)}}};e.getSemigroup=Un;var Ra=function(){return{concat:(0,e.getSemigroup)().concat,empty:e.empty}};e.getMonoid=Ra;var ld=function(v){return(0,c.fromEquals)(function(m,w){return m.length===w.length&&m.every(function(O,Q){return v.equals(O,w[Q])})})};e.getEq=ld;var fd=function(v){return(0,M.fromCompare)(function(m,w){for(var O=m.length,Q=w.length,ne=Math.min(O,Q),Xe=0;Xe<ne;Xe++){var Vn=v.compare(m[Xe],w[Xe]);if(Vn!==0)return Vn}return g.Ord.compare(O,Q)})};e.getOrd=fd;var hd=function(v){var m=St(v);return{concat:function(w,O){return m(O)(w)}}};e.getUnionSemigroup=hd;var dd=function(v){return{concat:(0,e.getUnionSemigroup)(v).concat,empty:e.empty}};e.getUnionMonoid=dd;var vd=function(v){var m=_t(v);return{concat:function(w,O){return m(O)(w)}}};e.getIntersectionSemigroup=vd;var yd=function(v){var m=yt(v);return{concat:function(w,O){return m(O)(w)}}};e.getDifferenceMagma=yd,e.Functor={URI:e.URI,map:de},e.flap=(0,f.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:de,mapWithIndex:Oe},e.Apply={URI:e.URI,map:de,ap:Ve},e.apFirst=(0,u.apFirst)(e.Apply),e.apSecond=(0,u.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:de,ap:Ve,of:e.of},e.Chain={URI:e.URI,map:de,ap:Ve,chain:nt},e.Monad={URI:e.URI,map:de,ap:Ve,of:e.of,chain:nt},e.chainFirst=(0,o.chainFirst)(e.Chain),e.Unfoldable={URI:e.URI,unfold:e.unfold},e.Alt={URI:e.URI,map:de,alt:h},e.Zero={URI:e.URI,zero:e.zero},e.guard=(0,A.guard)(e.Zero,e.Pointed),e.Alternative={URI:e.URI,map:de,ap:Ve,of:e.of,alt:h,zero:e.zero},e.Extend={URI:e.URI,map:de,extend:rt},e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:de,compact:e.compact,separate:e.separate,filter:mt,filterMap:lt,partition:Mt,partitionMap:Wt},e.FilterableWithIndex={URI:e.URI,map:de,mapWithIndex:Oe,compact:e.compact,separate:e.separate,filter:mt,filterMap:lt,partition:Mt,partitionMap:Wt,partitionMapWithIndex:Zt,partitionWithIndex:Xt,filterMapWithIndex:Ne,filterWithIndex:Ie},e.Foldable={URI:e.URI,reduce:y,foldMap:F,reduceRight:N},e.FoldableWithIndex={URI:e.URI,reduce:y,foldMap:F,reduceRight:N,reduceWithIndex:Y,foldMapWithIndex:te,reduceRightWithIndex:oe},e.Traversable={URI:e.URI,map:de,reduce:y,foldMap:F,reduceRight:N,traverse:gt,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:de,mapWithIndex:Oe,reduce:y,foldMap:F,reduceRight:N,reduceWithIndex:Y,foldMapWithIndex:te,reduceRightWithIndex:oe,traverse:gt,sequence:e.sequence,traverseWithIndex:D};var md=function(v){return function(m){for(var w=a([],v(m),!0),O=[];w.length>0;){var Q=w.shift();d.isLeft(Q)?w.unshift.apply(w,v(Q.left)):O.push(Q.right)}return O}};e.chainRecDepthFirst=md,e.ChainRecDepthFirst={URI:e.URI,map:de,ap:Ve,chain:nt,chainRec:e._chainRecDepthFirst};var gd=function(v){return function(m){var w=v(m),O=[],Q=[];function ne(za){d.isLeft(za)?v(za.left).forEach(function(Sd){return O.push(Sd)}):Q.push(za.right)}for(var Xe=0,Vn=w;Xe<Vn.length;Xe++){var Fd=Vn[Xe];ne(Fd)}for(;O.length>0;)ne(O.shift());return Q}};e.chainRecBreadthFirst=gd,e.ChainRecBreadthFirst={URI:e.URI,map:de,ap:Ve,chain:nt,chainRec:e._chainRecBreadthFirst};var Pa=(0,L.witherDefault)(e.Traversable,e.Compactable),Na=(0,L.wiltDefault)(e.Traversable,e.Compactable);e.Witherable={URI:e.URI,map:de,compact:e.compact,separate:e.separate,filter:mt,filterMap:lt,partition:Mt,partitionMap:Wt,reduce:y,foldMap:F,reduceRight:N,traverse:gt,sequence:e.sequence,wither:Pa,wilt:Na},e.filterE=(0,L.filterE)(e.Witherable),e.FromEither={URI:e.URI,fromEither:e.fromEither},e.fromEitherK=(0,s.fromEitherK)(e.FromEither),e.unsafeInsertAt=P.unsafeInsertAt;var pd=function(v,m,w){return(0,e.isNonEmpty)(w)?P.unsafeUpdateAt(v,m,w):w};e.unsafeUpdateAt=pd;var wd=function(v,m){var w=m.slice();return w.splice(v,1),w};e.unsafeDeleteAt=wd;var Dd=function(v){return v.slice()};e.toArray=Dd;var Ed=function(v){return(0,e.isEmpty)(v)?e.empty:v.slice()};e.fromArray=Ed,e.empty=P.empty;function bd(v){return function(m){return m.every(v)}}e.every=bd;var Ad=function(v){return function(m){return m.some(v)}};e.some=Ad,e.exists=e.some;var Cd=function(v){var m=P.intercalate(v);return function(w){return(0,e.match)(function(){return v.empty},m(w))}};e.intercalate=Cd,e.Do=(0,e.of)(d.emptyRecord),e.bindTo=(0,f.bindTo)(e.Functor),e.bind=(0,o.bind)(e.Chain),e.apS=(0,u.apS)(e.Apply),e.range=P.range,e.cons=P.cons,e.snoc=P.snoc,e.prependToAll=e.prependAll,e.readonlyArray={URI:e.URI,compact:e.compact,separate:e.separate,map:de,ap:Ve,of:e.of,chain:nt,filter:mt,filterMap:lt,partition:Mt,partitionMap:Wt,mapWithIndex:Oe,partitionMapWithIndex:Zt,partitionWithIndex:Xt,filterMapWithIndex:Ne,filterWithIndex:Ie,alt:h,zero:e.zero,unfold:e.unfold,reduce:y,foldMap:F,reduceRight:N,traverse:gt,sequence:e.sequence,reduceWithIndex:Y,foldMapWithIndex:te,reduceRightWithIndex:oe,traverseWithIndex:D,extend:rt,wither:Pa,wilt:Na}}}),dy=Ze({"node_modules/fp-ts/lib/Array.js"(e){var n=e&&e.__createBinding||(Object.create?function(p,E,I,G){G===void 0&&(G=I);var ce=Object.getOwnPropertyDescriptor(E,I);(!ce||("get"in ce?!E.__esModule:ce.writable||ce.configurable))&&(ce={enumerable:!0,get:function(){return E[I]}}),Object.defineProperty(p,G,ce)}:function(p,E,I,G){G===void 0&&(G=I),p[G]=E[I]}),r=e&&e.__setModuleDefault||(Object.create?function(p,E){Object.defineProperty(p,"default",{enumerable:!0,value:E})}:function(p,E){p.default=E}),i=e&&e.__importStar||function(p){if(p&&p.__esModule)return p;var E={};if(p!=null)for(var I in p)I!=="default"&&Object.prototype.hasOwnProperty.call(p,I)&&n(E,p,I);return r(E,p),E};Object.defineProperty(e,"__esModule",{value:!0}),e.lefts=e.rights=e.reverse=e.modifyAt=e.deleteAt=e.updateAt=e.insertAt=e.copy=e.findLastIndex=e.findLastMap=e.findLast=e.findFirstMap=e.findFirst=e.findIndex=e.dropLeftWhile=e.dropRight=e.dropLeft=e.spanLeft=e.takeLeftWhile=e.takeRight=e.takeLeft=e.init=e.tail=e.last=e.head=e.lookup=e.isOutOfBound=e.size=e.scanRight=e.scanLeft=e.chainWithIndex=e.foldRight=e.matchRight=e.matchRightW=e.foldLeft=e.matchLeft=e.matchLeftW=e.match=e.matchW=e.fromEither=e.fromOption=e.fromPredicate=e.replicate=e.makeBy=e.appendW=e.append=e.prependW=e.prepend=e.isNonEmpty=e.isEmpty=void 0,e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.reduce=e.foldMapWithIndex=e.foldMap=e.duplicate=e.extend=e.filterWithIndex=e.alt=e.altW=e.partitionMapWithIndex=e.partitionMap=e.partitionWithIndex=e.partition=e.filter=e.separate=e.compact=e.filterMap=e.filterMapWithIndex=e.mapWithIndex=e.flatten=e.chain=e.ap=e.map=e.zero=e.of=e.difference=e.intersection=e.union=e.concat=e.concatW=e.comprehension=e.fromOptionK=e.chunksOf=e.splitAt=e.chop=e.sortBy=e.uniq=e.elem=e.rotate=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.sort=void 0,e.some=e.every=e.unsafeDeleteAt=e.unsafeUpdateAt=e.unsafeInsertAt=e.fromEitherK=e.FromEither=e.filterE=e.ChainRecBreadthFirst=e.chainRecBreadthFirst=e.ChainRecDepthFirst=e.chainRecDepthFirst=e.Witherable=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.guard=e.Zero=e.Alt=e.Unfoldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.getOrd=e.getEq=e.getMonoid=e.getSemigroup=e.getShow=e.URI=e.unfold=e.wilt=e.wither=void 0,e.array=e.prependToAll=e.snoc=e.cons=e.empty=e.range=e.apS=e.bind=e.bindTo=e.Do=e.intercalate=e.exists=void 0;var a=na(),u=ai(),o=hs(),c=Kt(),s=ui(),l=i(On()),f=i(fy()),d=i(hy()),g=vs(),M=ys(),P=ms(),q=function(p){return p.length===0};e.isEmpty=q,e.isNonEmpty=f.isNonEmpty,e.prepend=f.prepend,e.prependW=f.prependW,e.append=f.append,e.appendW=f.appendW;var L=function(p,E){return p<=0?[]:f.makeBy(E)(p)};e.makeBy=L;var A=function(p,E){return(0,e.makeBy)(p,function(){return E})};e.replicate=A;function _(p){return function(E){return p(E)?[E]:[]}}e.fromPredicate=_;var W=function(p){return l.isNone(p)?[]:[p.value]};e.fromOption=W;var k=function(p){return l.isLeft(p)?[]:[p.right]};e.fromEither=k;var C=function(p,E){return function(I){return(0,e.isNonEmpty)(I)?E(I):p()}};e.matchW=C,e.match=e.matchW;var S=function(p,E){return function(I){return(0,e.isNonEmpty)(I)?E(f.head(I),f.tail(I)):p()}};e.matchLeftW=S,e.matchLeft=e.matchLeftW,e.foldLeft=e.matchLeft;var B=function(p,E){return function(I){return(0,e.isNonEmpty)(I)?E(f.init(I),f.last(I)):p()}};e.matchRightW=B,e.matchRight=e.matchRightW,e.foldRight=e.matchRight;var U=function(p){return function(E){for(var I=[],G=0;G<E.length;G++)I.push.apply(I,p(G,E[G]));return I}};e.chainWithIndex=U;var ae=function(p,E){return function(I){var G=I.length,ce=new Array(G+1);ce[0]=p;for(var le=0;le<G;le++)ce[le+1]=E(ce[le],I[le]);return ce}};e.scanLeft=ae;var ee=function(p,E){return function(I){var G=I.length,ce=new Array(G+1);ce[G]=p;for(var le=G-1;le>=0;le--)ce[le]=E(I[le],ce[le+1]);return ce}};e.scanRight=ee;var pe=function(p){return p.length};e.size=pe,e.isOutOfBound=f.isOutOfBound,e.lookup=d.lookup,e.head=d.head,e.last=d.last;var be=function(p){return(0,e.isNonEmpty)(p)?l.some(f.tail(p)):l.none};e.tail=be;var T=function(p){return(0,e.isNonEmpty)(p)?l.some(f.init(p)):l.none};e.init=T;var $=function(p){return function(E){return(0,e.isOutOfBound)(p,E)?(0,e.copy)(E):E.slice(0,p)}};e.takeLeft=$;var K=function(p){return function(E){return(0,e.isOutOfBound)(p,E)?(0,e.copy)(E):p===0?[]:E.slice(-p)}};e.takeRight=K;function X(p){return function(E){for(var I=[],G=0,ce=E;G<ce.length;G++){var le=ce[G];if(!p(le))break;I.push(le)}return I}}e.takeLeftWhile=X;var re=function(p,E){for(var I=p.length,G=0;G<I&&E(p[G]);G++);return G};function x(p){return function(E){var I=(0,e.splitAt)(re(E,p))(E),G=I[0],ce=I[1];return{init:G,rest:ce}}}e.spanLeft=x;var ye=function(p){return function(E){return p<=0||(0,e.isEmpty)(E)?(0,e.copy)(E):p>=E.length?[]:E.slice(p,E.length)}};e.dropLeft=ye;var Fe=function(p){return function(E){return p<=0||(0,e.isEmpty)(E)?(0,e.copy)(E):p>=E.length?[]:E.slice(0,E.length-p)}};e.dropRight=Fe;function xe(p){return function(E){return E.slice(re(E,p))}}e.dropLeftWhile=xe,e.findIndex=d.findIndex;function ve(p){return d.findFirst(p)}e.findFirst=ve,e.findFirstMap=d.findFirstMap;function ze(p){return d.findLast(p)}e.findLast=ze,e.findLastMap=d.findLastMap,e.findLastIndex=d.findLastIndex;var dt=function(p){return p.slice()};e.copy=dt;var Re=function(p,E){return function(I){return p<0||p>I.length?l.none:l.some((0,e.unsafeInsertAt)(p,E,I))}};e.insertAt=Re;var ut=function(p,E){return(0,e.modifyAt)(p,function(){return E})};e.updateAt=ut;var Rt=function(p){return function(E){return(0,e.isOutOfBound)(p,E)?l.none:l.some((0,e.unsafeDeleteAt)(p,E))}};e.deleteAt=Rt;var Yt=function(p,E){return function(I){return(0,e.isOutOfBound)(p,I)?l.none:l.some((0,e.unsafeUpdateAt)(p,E(I[p]),I))}};e.modifyAt=Yt;var vn=function(p){return(0,e.isEmpty)(p)?[]:p.slice().reverse()};e.reverse=vn;var Ge=function(p){for(var E=[],I=0;I<p.length;I++){var G=p[I];G._tag==="Right"&&E.push(G.right)}return E};e.rights=Ge;var De=function(p){for(var E=[],I=0;I<p.length;I++){var G=p[I];G._tag==="Left"&&E.push(G.left)}return E};e.lefts=De;var ot=function(p){return function(E){return E.length<=1?(0,e.copy)(E):E.slice().sort(p.compare)}};e.sort=ot;var Me=function(p,E,I){for(var G=[],ce=Math.min(p.length,E.length),le=0;le<ce;le++)G[le]=I(p[le],E[le]);return G};e.zipWith=Me;function Je(p,E){return E===void 0?function(I){return Je(I,p)}:(0,e.zipWith)(p,E,function(I,G){return[I,G]})}e.zip=Je;var ct=function(p){for(var E=[],I=[],G=0;G<p.length;G++)E[G]=p[G][0],I[G]=p[G][1];return[E,I]};e.unzip=ct;var Le=function(p){var E=f.prependAll(p);return function(I){return(0,e.isNonEmpty)(I)?E(I):[]}};e.prependAll=Le;var Pe=function(p){var E=f.intersperse(p);return function(I){return(0,e.isNonEmpty)(I)?E(I):(0,e.copy)(I)}};e.intersperse=Pe;var Se=function(p){var E=f.rotate(p);return function(I){return(0,e.isNonEmpty)(I)?E(I):(0,e.copy)(I)}};e.rotate=Se,e.elem=d.elem;var bt=function(p){var E=f.uniq(p);return function(I){return(0,e.isNonEmpty)(I)?E(I):(0,e.copy)(I)}};e.uniq=bt;var vt=function(p){var E=f.sortBy(p);return function(I){return(0,e.isNonEmpty)(I)?E(I):(0,e.copy)(I)}};e.sortBy=vt;var Pt=function(p){var E=f.chop(p);return function(I){return(0,e.isNonEmpty)(I)?E(I):[]}};e.chop=Pt;var At=function(p){return function(E){return p>=1&&(0,e.isNonEmpty)(E)?f.splitAt(p)(E):(0,e.isEmpty)(E)?[(0,e.copy)(E),[]]:[[],(0,e.copy)(E)]}};e.splitAt=At;var fe=function(p){var E=f.chunksOf(p);return function(I){return(0,e.isNonEmpty)(I)?E(I):[]}};e.chunksOf=fe;var he=function(p){return function(){for(var E=[],I=0;I<arguments.length;I++)E[I]=arguments[I];return(0,e.fromOption)(p.apply(void 0,E))}};e.fromOptionK=he;function Nt(p,E,I){I===void 0&&(I=function(){return!0});var G=function(ce,le){return(0,e.isNonEmpty)(le)?(0,c.pipe)(f.head(le),(0,e.chain)(function(Un){return G((0,c.pipe)(ce,(0,e.append)(Un)),f.tail(le))})):I.apply(void 0,ce)?[E.apply(void 0,ce)]:[]};return G([],p)}e.comprehension=Nt;var st=function(p){return function(E){return(0,e.isEmpty)(E)?(0,e.copy)(p):(0,e.isEmpty)(p)?(0,e.copy)(E):E.concat(p)}};e.concatW=st,e.concat=e.concatW;function me(p){var E=f.union(p);return function(I,G){if(G===void 0){var ce=me(p);return function(le){return ce(le,I)}}return(0,e.isNonEmpty)(I)&&(0,e.isNonEmpty)(G)?E(G)(I):(0,e.isNonEmpty)(I)?(0,e.copy)(I):(0,e.copy)(G)}}e.union=me;function Ct(p){var E=(0,e.elem)(p);return function(I,G){if(G===void 0){var ce=Ct(p);return function(le){return ce(le,I)}}return I.filter(function(le){return E(le,G)})}}e.intersection=Ct;function et(p){var E=(0,e.elem)(p);return function(I,G){if(G===void 0){var ce=et(p);return function(le){return ce(le,I)}}return I.filter(function(le){return!E(le,G)})}}e.difference=et;var j=function(p,E){return(0,c.pipe)(p,(0,e.map)(E))},zt=function(p,E){return(0,c.pipe)(p,(0,e.mapWithIndex)(E))},Ee=function(p,E){return(0,c.pipe)(p,(0,e.ap)(E))},tt=function(p,E){return(0,c.pipe)(p,(0,e.chain)(E))},kt=function(p,E){return(0,c.pipe)(p,(0,e.filter)(E))},Tt=function(p,E){return(0,c.pipe)(p,(0,e.filterMap)(E))},Ft=function(p,E){return(0,c.pipe)(p,(0,e.partition)(E))},St=function(p,E){return(0,c.pipe)(p,(0,e.partitionMap)(E))},_t=function(p,E){return(0,c.pipe)(p,(0,e.partitionWithIndex)(E))},yt=function(p,E){return(0,c.pipe)(p,(0,e.partitionMapWithIndex)(E))},de=function(p,E){return(0,c.pipe)(p,(0,e.alt)(E))},Oe=function(p,E,I){return(0,c.pipe)(p,(0,e.reduce)(E,I))},Ve=function(p){var E=(0,e.foldMap)(p);return function(I,G){return(0,c.pipe)(I,E(G))}},nt=function(p,E,I){return(0,c.pipe)(p,(0,e.reduceRight)(E,I))},mt=function(p,E,I){return(0,c.pipe)(p,(0,e.reduceWithIndex)(E,I))},lt=function(p){var E=(0,e.foldMapWithIndex)(p);return function(I,G){return(0,c.pipe)(I,E(G))}},Mt=function(p,E,I){return(0,c.pipe)(p,(0,e.reduceRightWithIndex)(E,I))},Wt=function(p,E){return(0,c.pipe)(p,(0,e.filterMapWithIndex)(E))},Xt=function(p,E){return(0,c.pipe)(p,(0,e.filterWithIndex)(E))},Zt=function(p,E){return(0,c.pipe)(p,(0,e.extend)(E))},h=function(p){var E=(0,e.traverse)(p);return function(I,G){return(0,c.pipe)(I,E(G))}},y=function(p){var E=(0,e.traverseWithIndex)(p);return function(I,G){return(0,c.pipe)(I,E(G))}},F=d._chainRecDepthFirst,N=d._chainRecBreadthFirst;e.of=f.of;var Y=function(){return[]};e.zero=Y;var te=function(p){return function(E){return E.map(function(I){return p(I)})}};e.map=te;var oe=function(p){return(0,e.chain)(function(E){return(0,c.pipe)(p,(0,e.map)(E))})};e.ap=oe;var Ne=function(p){return function(E){return(0,c.pipe)(E,(0,e.chainWithIndex)(function(I,G){return p(G)}))}};e.chain=Ne,e.flatten=(0,e.chain)(c.identity);var Ie=function(p){return function(E){return E.map(function(I,G){return p(G,I)})}};e.mapWithIndex=Ie;var rt=function(p){return function(E){for(var I=[],G=0;G<E.length;G++){var ce=p(G,E[G]);l.isSome(ce)&&I.push(ce.value)}return I}};e.filterMapWithIndex=rt;var gt=function(p){return(0,e.filterMapWithIndex)(function(E,I){return p(I)})};e.filterMap=gt,e.compact=(0,e.filterMap)(c.identity);var D=function(p){for(var E=[],I=[],G=0,ce=p;G<ce.length;G++){var le=ce[G];le._tag==="Left"?E.push(le.left):I.push(le.right)}return(0,g.separated)(E,I)};e.separate=D;var b=function(p){return function(E){return E.filter(p)}};e.filter=b;var z=function(p){return(0,e.partitionWithIndex)(function(E,I){return p(I)})};e.partition=z;var H=function(p){return function(E){for(var I=[],G=[],ce=0;ce<E.length;ce++){var le=E[ce];p(ce,le)?G.push(le):I.push(le)}return(0,g.separated)(I,G)}};e.partitionWithIndex=H;var se=function(p){return(0,e.partitionMapWithIndex)(function(E,I){return p(I)})};e.partitionMap=se;var we=function(p){return function(E){for(var I=[],G=[],ce=0;ce<E.length;ce++){var le=p(ce,E[ce]);le._tag==="Left"?I.push(le.left):G.push(le.right)}return(0,g.separated)(I,G)}};e.partitionMapWithIndex=we;var ke=function(p){return function(E){return E.concat(p())}};e.altW=ke,e.alt=e.altW;var It=function(p){return function(E){return E.filter(function(I,G){return p(G,I)})}};e.filterWithIndex=It;var Ae=function(p){return function(E){return E.map(function(I,G){return p(E.slice(G))})}};e.extend=Ae,e.duplicate=(0,e.extend)(c.identity),e.foldMap=d.foldMap,e.foldMapWithIndex=d.foldMapWithIndex,e.reduce=d.reduce,e.reduceWithIndex=d.reduceWithIndex,e.reduceRight=d.reduceRight,e.reduceRightWithIndex=d.reduceRightWithIndex;var Te=function(p){var E=(0,e.traverseWithIndex)(p);return function(I){return E(function(G,ce){return I(ce)})}};e.traverse=Te;var ge=function(p){return function(E){return Oe(E,p.of((0,e.zero)()),function(I,G){return p.ap(p.map(I,function(ce){return function(le){return(0,c.pipe)(ce,(0,e.append)(le))}}),G)})}};e.sequence=ge;var Ye=function(p){return function(E){return(0,e.reduceWithIndex)(p.of((0,e.zero)()),function(I,G,ce){return p.ap(p.map(G,function(le){return function(Un){return(0,c.pipe)(le,(0,e.append)(Un))}}),E(I,ce))})}};e.traverseWithIndex=Ye;var pt=function(p){var E=Or(p);return function(I){return function(G){return E(G,I)}}};e.wither=pt;var Qe=function(p){var E=kr(p);return function(I){return function(G){return E(G,I)}}};e.wilt=Qe;var Qt=function(p,E){for(var I=[],G=p;;){var ce=E(G);if(l.isSome(ce)){var le=ce.value,Un=le[0],Ra=le[1];I.push(Un),G=Ra}else break}return I};e.unfold=Qt,e.URI="Array",e.getShow=d.getShow;var Lt=function(){return{concat:function(p,E){return p.concat(E)}}};e.getSemigroup=Lt;var $t=function(){return{concat:(0,e.getSemigroup)().concat,empty:[]}};e.getMonoid=$t,e.getEq=d.getEq,e.getOrd=d.getOrd;var xt=function(p){var E=me(p);return{concat:function(I,G){return E(G)(I)}}};e.getUnionSemigroup=xt;var _n=function(p){return{concat:(0,e.getUnionSemigroup)(p).concat,empty:[]}};e.getUnionMonoid=_n;var Lr=function(p){var E=Ct(p);return{concat:function(I,G){return E(G)(I)}}};e.getIntersectionSemigroup=Lr;var _a=function(p){var E=et(p);return{concat:function(I,G){return E(G)(I)}}};e.getDifferenceMagma=_a,e.Functor={URI:e.URI,map:j},e.flap=(0,s.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:j,mapWithIndex:zt},e.Apply={URI:e.URI,map:j,ap:Ee},e.apFirst=(0,a.apFirst)(e.Apply),e.apSecond=(0,a.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:j,ap:Ee,of:e.of},e.Chain={URI:e.URI,map:j,ap:Ee,chain:tt},e.chainFirst=(0,u.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:j,ap:Ee,of:e.of,chain:tt},e.Unfoldable={URI:e.URI,unfold:e.unfold},e.Alt={URI:e.URI,map:j,alt:de},e.Zero={URI:e.URI,zero:e.zero},e.guard=(0,P.guard)(e.Zero,e.Pointed),e.Alternative={URI:e.URI,map:j,ap:Ee,of:e.of,alt:de,zero:e.zero},e.Extend={URI:e.URI,map:j,extend:Zt},e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:j,compact:e.compact,separate:e.separate,filter:kt,filterMap:Tt,partition:Ft,partitionMap:St},e.FilterableWithIndex={URI:e.URI,map:j,mapWithIndex:zt,compact:e.compact,separate:e.separate,filter:kt,filterMap:Tt,partition:Ft,partitionMap:St,partitionMapWithIndex:yt,partitionWithIndex:_t,filterMapWithIndex:Wt,filterWithIndex:Xt},e.Foldable={URI:e.URI,reduce:Oe,foldMap:Ve,reduceRight:nt},e.FoldableWithIndex={URI:e.URI,reduce:Oe,foldMap:Ve,reduceRight:nt,reduceWithIndex:mt,foldMapWithIndex:lt,reduceRightWithIndex:Mt},e.Traversable={URI:e.URI,map:j,reduce:Oe,foldMap:Ve,reduceRight:nt,traverse:h,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:j,mapWithIndex:zt,reduce:Oe,foldMap:Ve,reduceRight:nt,reduceWithIndex:mt,foldMapWithIndex:lt,reduceRightWithIndex:Mt,traverse:h,sequence:e.sequence,traverseWithIndex:y};var Or=(0,M.witherDefault)(e.Traversable,e.Compactable),kr=(0,M.wiltDefault)(e.Traversable,e.Compactable);e.Witherable={URI:e.URI,map:j,compact:e.compact,separate:e.separate,filter:kt,filterMap:Tt,partition:Ft,partitionMap:St,reduce:Oe,foldMap:Ve,reduceRight:nt,traverse:h,sequence:e.sequence,wither:Or,wilt:kr},e.chainRecDepthFirst=d.chainRecDepthFirst,e.ChainRecDepthFirst={URI:e.URI,map:j,ap:Ee,chain:tt,chainRec:F},e.chainRecBreadthFirst=d.chainRecBreadthFirst,e.ChainRecBreadthFirst={URI:e.URI,map:j,ap:Ee,chain:tt,chainRec:N},e.filterE=(0,M.filterE)(e.Witherable),e.FromEither={URI:e.URI,fromEither:e.fromEither},e.fromEitherK=(0,o.fromEitherK)(e.FromEither),e.unsafeInsertAt=f.unsafeInsertAt;var Ma=function(p,E,I){return(0,e.isNonEmpty)(I)?f.unsafeUpdateAt(p,E,I):[]};e.unsafeUpdateAt=Ma;var Ia=function(p,E){var I=E.slice();return I.splice(p,1),I};e.unsafeDeleteAt=Ia,e.every=d.every;var Ba=function(p){return function(E){return E.some(p)}};e.some=Ba,e.exists=e.some,e.intercalate=d.intercalate,e.Do=(0,e.of)(l.emptyRecord),e.bindTo=(0,s.bindTo)(e.Functor),e.bind=(0,u.bind)(e.Chain),e.apS=(0,a.apS)(e.Apply),e.range=f.range,e.empty=[],e.cons=f.cons,e.snoc=f.snoc,e.prependToAll=e.prependAll,e.array={URI:e.URI,compact:e.compact,separate:e.separate,map:j,ap:Ee,of:e.of,chain:tt,filter:kt,filterMap:Tt,partition:Ft,partitionMap:St,mapWithIndex:zt,partitionMapWithIndex:yt,partitionWithIndex:_t,filterMapWithIndex:Wt,filterWithIndex:Xt,alt:de,zero:e.zero,unfold:e.unfold,reduce:Oe,foldMap:Ve,reduceRight:nt,traverse:h,sequence:e.sequence,reduceWithIndex:mt,foldMapWithIndex:lt,reduceRightWithIndex:Mt,traverseWithIndex:y,extend:Zt,wither:Or,wilt:kr}}}),vy=Ze({"node_modules/fp-ts/lib/string.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.endsWith=e.startsWith=e.includes=e.split=e.size=e.isEmpty=e.slice=e.trimRight=e.trimLeft=e.trim=e.replace=e.toLowerCase=e.toUpperCase=e.isString=e.Show=e.Ord=e.Monoid=e.empty=e.Semigroup=e.Eq=void 0;var n=Hu();e.Eq={equals:function(L,A){return L===A}},e.Semigroup={concat:function(L,A){return L+A}},e.empty="",e.Monoid={concat:e.Semigroup.concat,empty:e.empty},e.Ord={equals:e.Eq.equals,compare:function(L,A){return L<A?-1:L>A?1:0}},e.Show={show:function(L){return JSON.stringify(L)}};var r=function(L){return typeof L=="string"};e.isString=r;var i=function(L){return L.toUpperCase()};e.toUpperCase=i;var a=function(L){return L.toLowerCase()};e.toLowerCase=a;var u=function(L,A){return function(_){return _.replace(L,A)}};e.replace=u;var o=function(L){return L.trim()};e.trim=o;var c=function(L){return L.trimLeft()};e.trimLeft=c;var s=function(L){return L.trimRight()};e.trimRight=s;var l=function(L,A){return function(_){return _.slice(L,A)}};e.slice=l;var f=function(L){return L.length===0};e.isEmpty=f;var d=function(L){return L.length};e.size=d;var g=function(L){return function(A){var _=A.split(L);return(0,n.isNonEmpty)(_)?_:[A]}};e.split=g;var M=function(L,A){return function(_){return _.includes(L,A)}};e.includes=M;var P=function(L,A){return function(_){return _.startsWith(L,A)}};e.startsWith=P;var q=function(L,A){return function(_){return _.endsWith(L,A)}};e.endsWith=q}}),gs={};ue(gs,{byValueString:()=>cd,getSorter:()=>sd,minMaxAvg:()=>rE,sortByKey:()=>Cu,sortByValueNumber:()=>Fu,sortByValueString:()=>nE});var Ku=ar(dy(),1),Gu=ar(Kt(),1),Ti=ar(vy(),1),lc=ar(ds(),1),Fr=ar(oi(),1),an={};ue(an,{areValuesIdentical:()=>ec,average:()=>Ds,averageWeighted:()=>Es,chunks:()=>xD,dotProduct:()=>gy,ensureLength:()=>GD,filterBetween:()=>ud,flatten:()=>HD,groupBy:()=>ZD,guardArray:()=>Sa,guardIndex:()=>xi,interleave:()=>KD,intersection:()=>VD,max:()=>Cs,maxFast:()=>Ss,maxIndex:()=>py,min:()=>bs,minFast:()=>Yu,minIndex:()=>As,minMaxAvg:()=>ra,randomElement:()=>nc,randomIndex:()=>tc,randomPluck:()=>JD,remove:()=>XD,sample:()=>QD,shuffle:()=>YD,total:()=>Fs,totalFast:()=>_s,validNumbers:()=>Sr,weight:()=>ws,without:()=>od,zip:()=>ad});var yy={};ue(yy,{arrayElement:()=>nc,arrayIndex:()=>tc,defaultRandom:()=>on,float:()=>jD,gaussian:()=>xo,gaussianSkewed:()=>$D,hue:()=>No,integer:()=>qD,shortGuid:()=>UD,string:()=>id,weighted:()=>rd,weightedInteger:()=>TD,weightedSkewed:()=>kD});var Ju={};ue(Ju,{crossfade:()=>ND,fromCubicBezier:()=>PD,functions:()=>Qo,gaussian:()=>nd,get:()=>Fa,getEasings:()=>zD,mix:()=>td,tick:()=>RD,time:()=>BD});var my={};ue(my,{FrequencyMutable:()=>Yh,IntervalTracker:()=>Zh,Normalise:()=>ps,NumberTracker:()=>eo,PointTracker:()=>Ho,TrackedPointMap:()=>Wh,TrackedValueMap:()=>zh,TrackerBase:()=>xu,clamp:()=>Ut,clampIndex:()=>tu,flip:()=>Ni,frequencyMutable:()=>FD,interpolate:()=>Zo,interpolateAngle:()=>xh,intervalTracker:()=>MD,movingAverage:()=>_D,movingAverageLight:()=>Xh,movingAverageTimed:()=>SD,numberTracker:()=>Xr,piPi:()=>Au,pointTracker:()=>Z1,pointsTracker:()=>Lh,scale:()=>Dn,scaleClamped:()=>wy,scalePercent:()=>Ey,scalePercentages:()=>Dy,wrap:()=>Qi,wrapInteger:()=>Qh,wrapRange:()=>ID});var ps={};ue(ps,{array:()=>Ay,stream:()=>by});var ws=(e,n)=>{const r=n===void 0?i=>i:n;return Sr(e).map((i,a)=>i*r(a/(Sr.length-1)))},Sr=e=>e.filter(n=>typeof n=="number"&&!Number.isNaN(n)),gy=e=>{let n=0;const r=e[0].length;for(let i=0;i<r;i++){let a=0;for(let u=0;u<e.length;u++)u===0?a=e[u][i]:a*=e[u][i];n+=a}return n},Ds=e=>{if(e===void 0)throw new Error("data parameter is undefined");const n=Sr(e);return n.reduce((i,a)=>i+a,0)/n.length},Es=(e,n)=>{typeof n=="function"&&(n=ws(e,n));const r=ad(e,n),[i,a]=r.reduce((u,o)=>[u[0]+o[0]*o[1],u[1]+o[1]],[0,0]);return i/a},bs=e=>Math.min(...Sr(e)),py=e=>e.reduce((n,r,i,a)=>r>a[n]?i:n,0),As=(...e)=>e.reduce((n,r,i,a)=>r<a[n]?i:n,0),Cs=e=>Math.max(...Sr(e)),Fs=e=>e.reduce((n,r)=>typeof r!="number"||Number.isNaN(r)||Number.isFinite(r)?n:n+r,0),Ss=e=>{let n=Number.MIN_SAFE_INTEGER;for(let r=0;r<e.length;r++)n=Math.max(n,e[r]);return n},_s=e=>{let n=0;for(let r=0;r<e.length;r++)n+=e[r];return n},Yu=e=>{let n=Number.MIN_SAFE_INTEGER;for(let r=0;r<e.length;r++)n=Math.min(n,e[r]);return n},ra=(e,n,r)=>{if(e===void 0)throw new Error("'data' is undefined");if(!Array.isArray(e))throw new Error("'data' parameter is not an array");if(e.length===0)return{total:0,min:0,max:0,avg:0};n===void 0&&(n=0),r===void 0&&(r=e.length-1);const i=ud(e,u=>typeof u=="number"&&!Number.isNaN(u),n,r),a=i.reduce((u,o)=>u+o,0);return{total:a,max:Math.max(...i),min:Math.min(...i),avg:a/i.length}},Dn=(e,n,r,i,a,u)=>{if(a===void 0&&(a=1),i===void 0&&(i=0),n===r)return a;let o=(e-n)/(r-n);return u!==void 0&&(o=u(o)),o*(a-i)+i},wy=(e,n,r,i,a,u)=>{if(a===void 0&&(a=1),i===void 0&&(i=0),n===r)return a;const o=Dn(e,n,r,i,a,u);return Ut(o,i,a)},Dy=(e,n,r=1)=>(ie(e,"percentage","v"),ie(n,"percentage","outMin"),ie(r,"percentage","outMax"),Dn(e,0,1,n,r)),Ey=(e,n,r)=>(ie(e,"percentage","v"),Dn(e,0,1,n,r)),by=(e,n)=>{let r=e??Number.MAX_SAFE_INTEGER,i=n??Number.MIN_SAFE_INTEGER;return ie(e),ie(n),a=>(ie(a),r=Math.min(r,a),i=Math.max(i,a),Dn(a,r,i))},Ay=(e,n,r)=>{if(!Array.isArray(e))throw new Error("values param should be an array");const i=ra(e),a=n??i.min,u=r??i.max;return e.map(o=>Ut(Dn(o,a,u)))},Cy={};ue(Cy,{Arcs:()=>Xu,Beziers:()=>ci,Circles:()=>En,Compound:()=>so,Ellipses:()=>po,Grids:()=>fo,Lines:()=>Bt,Paths:()=>Dr,Points:()=>V,Polar:()=>ft,Rects:()=>Be,Shapes:()=>wo,Triangles:()=>Zn,Vectors:()=>sf,degreeToRadian:()=>zn,radianToDegree:()=>ya,radiansFromAxisX:()=>Ef});var Xu={};ue(Xu,{bbox:()=>Il,distanceCenter:()=>_m,fromDegrees:()=>Fm,guard:()=>no,interpolate:()=>ro,isArc:()=>Sl,isEqual:()=>Mm,isPositioned:()=>pn,length:()=>Ml,point:()=>ji,toLine:()=>_l,toPath:()=>Sm,toSvg:()=>Bl});var V={};ue(V,{Empty:()=>Mr,Placeholder:()=>vl,abs:()=>um,angle:()=>pr,apply:()=>hm,bbox:()=>om,centroid:()=>ml,clamp:()=>Cm,clampMagnitude:()=>Fl,compare:()=>mm,compareByX:()=>Al,convexHull:()=>ym,distance:()=>rn,distanceToCenter:()=>am,distanceToExterior:()=>im,divide:()=>bl,dotProduct:()=>dl,findMinimum:()=>Jn,from:()=>fm,fromNumbers:()=>pl,getPointParam:()=>nr,guard:()=>_e,guardNonZeroPoint:()=>yl,interpolate:()=>lm,invert:()=>bm,isEmpty:()=>Fi,isEqual:()=>Zr,isNull:()=>tm,isPlaceholder:()=>Si,isPoint:()=>je,isPoint3d:()=>cu,leftmost:()=>nm,multiply:()=>to,normalise:()=>Cl,normaliseByRect:()=>wm,pipeline:()=>wl,pipelineApply:()=>dm,project:()=>su,quantiseEvery:()=>vm,random:()=>Dm,reduce:()=>Dl,relation:()=>lu,rightmost:()=>rm,rotate:()=>Xn,rotatePointArray:()=>gm,subtract:()=>or,sum:()=>El,toArray:()=>cm,toIntegerValues:()=>Am,toString:()=>gl,withinRange:()=>sm,wrap:()=>Em});var Bt={};ue(Bt,{angleRadian:()=>Oy,apply:()=>Gs,asPoints:()=>Uy,bbox:()=>ll,distance:()=>al,divide:()=>Ys,extendFromA:()=>qy,fromFlatArray:()=>Vy,fromNumbers:()=>qi,fromPoints:()=>ua,fromPointsToPath:()=>Hy,getPointsParam:()=>aa,guard:()=>Zu,interpolate:()=>Wn,isEqual:()=>Ks,isLine:()=>kn,isPolyLine:()=>Hs,joinPointsToLines:()=>sl,length:()=>nn,midpoint:()=>xs,multiply:()=>Js,nearest:()=>el,normaliseByRect:()=>ky,parallel:()=>il,perpendicularPoint:()=>rl,pointAtX:()=>$y,pointsOf:()=>jy,rotate:()=>fl,scaleFromMidpoint:()=>Ty,slope:()=>Qu,subtract:()=>Zs,sum:()=>Xs,toFlatArray:()=>ol,toPath:()=>Nn,toString:()=>ul,toSvgString:()=>cl,withinRange:()=>Qs});var Fy={};ue(Fy,{Arrays:()=>an,MapOfMutableImpl:()=>ia,Maps:()=>Zc,Queues:()=>ks,Sets:()=>Pc,Stacks:()=>Ps,circularArray:()=>Is,map:()=>hr,mapArray:()=>Bs,mapCircularMutable:()=>Rs,mapMutable:()=>Ly,mapSet:()=>_y,queue:()=>Us,queueMutable:()=>_r,setMutable:()=>Su,simpleMapArrayMutable:()=>Rc,stack:()=>$i,stackMutable:()=>Os});var mn,cn,Ms=class extends Array{constructor(e=0){super();$e(this,mn,void 0),$e(this,cn,void 0),Ue(e,"positive","capacity"),Ce(this,mn,e),Ce(this,cn,0)}add(e){const n=Ms.from(this);return n[J(this,cn)]=e,Ce(n,mn,J(this,mn)),J(this,mn)>0?Ce(n,cn,J(this,cn)+1===J(this,mn)?0:J(this,cn)+1):Ce(n,cn,J(this,cn)+1),n}get pointer(){return J(this,cn)}get isFull(){return J(this,mn)===0?!1:this.length===J(this,mn)}},Sy=Ms;mn=new WeakMap;cn=new WeakMap;var Is=e=>new Sy(e),He,ia=class extends Ln{constructor(e,n={}){super();$e(this,He,new Map),R(this,"groupBy"),R(this,"type"),this.type=e,this.groupBy=n.groupBy??Qr}get typeName(){return this.type.name}get lengthMax(){let e=0;for(const n of J(this,He).values())e=Math.max(e,this.type.count(n));return e}debugString(){const e=Array.from(J(this,He).keys());let n=`Keys: ${e.join(", ")}\r
`;return e.forEach(r=>{const i=J(this,He).get(r);if(i!==void 0){const a=this.type.toArray(i);a!==void 0&&(n+=` - ${r} (${this.type.count(i)}) = ${JSON.stringify(a)}\r
`)}else n+=` - ${r} (undefined)\r
`}),n}get isEmpty(){return J(this,He).size===0}clear(){J(this,He).clear(),super.fireEvent("clear",!0)}addKeyedValues(e,...n){const r=J(this,He).get(e);r===void 0?(J(this,He).set(e,this.type.add(void 0,n)),super.fireEvent("addedKey",{key:e}),super.fireEvent("addedValues",{values:n})):(J(this,He).set(e,this.type.add(r,n)),super.fireEvent("addedValues",{values:n}))}addValue(...e){e.forEach(n=>this.addKeyedValues(this.groupBy(n),n))}hasKeyValue(e,n){const r=J(this,He).get(e);return r===void 0?!1:this.type.has(r,n)}has(e){return J(this,He).has(e)}deleteKeyValue(e,n){const r=J(this,He).get(e);if(r===void 0)return!1;const i=this.type.count(r),a=this.type.without(r,n),u=a.length;return J(this,He).set(e,this.type.add(void 0,a)),i>u}delete(e){return J(this,He).get(e)===void 0?!1:(J(this,He).delete(e),this.fireEvent("deleteKey",{key:e}),!0)}findKeyForValue(e){return Array.from(J(this,He).keys()).find(i=>{const a=J(this,He).get(i);if(a===void 0)throw Error("Bug: map could not be accessed");return!!this.type.has(a,e)})}count(e){const n=J(this,He).get(e);return n===void 0?0:this.type.count(n)}get(e){const n=J(this,He).get(e);if(n!==void 0)return this.type.toArray(n)}getSource(e){return J(this,He).get(e)}keys(){return Array.from(J(this,He).keys())}keysAndCounts(){return this.keys().map(r=>[r,this.count(r)])}merge(e){e.keys().forEach(r=>{const i=e.get(r);i!==void 0&&this.addKeyedValues(r,...i)})}};He=new WeakMap;var Bs=(e={})=>{const n=e.comparer===void 0?e.toString===void 0?(a,u)=>e.toString(a)===e.toString(u):ii:e.comparer,r={get name(){return"array"},add:(a,u)=>a===void 0?[...u]:[...a,...u],count:a=>a.length,find:(a,u)=>a.find(u),filter:(a,u)=>a.filter(u),toArray:a=>a,has:(a,u)=>a.find(o=>n(o,u))!==void 0,without:(a,u)=>a.filter(o=>!n(o,u))};return new ia(r,e)},_y=e=>{const n=e?.hash??Qr,r=(u,o)=>n(u)===n(o),i={get name(){return"set"},add:(u,o)=>xc(u,n,...o),count:u=>u.size,find:(u,o)=>ns(u,o),filter:(u,o)=>ts(u,o),toArray:u=>eu(u),has:(u,o)=>es(u,o,r),without:(u,o)=>od(eu(u),o,r)};return new ia(i,e)},Rs=e=>{const n=ii,r={get name(){return"circular"},add:(i,a)=>(i===void 0&&(i=Is(e.capacity)),a.forEach(u=>i=i?.add(u)),i),count:i=>i.length,find:(i,a)=>i.find(a),filter:(i,a)=>i.filter(a),toArray:i=>i,has:(i,a)=>i.find(u=>n(u,a))!==void 0,without:(i,a)=>i.filter(u=>!n(u,a))};return new ia(r,e)},Ps={};ue(Ps,{stack:()=>$i,stackMutable:()=>Os});var My=(e,n,r)=>{const i=n.length+r.length,a=e.discardPolicy??"additions",u=e.capacity??i,o=i-u;switch(e.debug&&console.log(`Stack.push: stackLen: ${n.length} potentialLen: ${i} toRemove: ${o} policy: ${a}`),a){case"additions":return e.debug&&console.log(`Stack.push:DiscardAdditions: stackLen: ${n.length} slice: ${i-u} toAddLen: ${r.length}`),n.length===e.capacity?n:[...n,...r.slice(0,r.length-o)];case"newer":return o>=n.length?r.slice(Math.max(0,r.length-u),Math.min(r.length,u)+1):(e.debug&&console.log(` from orig: ${n.slice(0,n.length-o)}`),[...n.slice(0,n.length-o),...r.slice(0,Math.min(r.length,u-o+1))]);case"older":return[...n,...r].slice(o);default:throw new Error(`Unknown discard policy ${a}`)}},Ns=(e,n,...r)=>{const i=n.length+r.length;return e.capacity&&i>e.capacity?My(e,n,r):[...n,...r]},zs=(e,n)=>{if(n.length===0)throw new Error("Stack is empty");return n.slice(0,n.length-1)},nu=(e,n)=>n[n.length-1],Ws=(e,n)=>n.length===0,Ls=(e,n)=>e.capacity?n.length>=e.capacity:!1,ru=class{constructor(e,n){R(this,"opts"),R(this,"data"),this.opts=e,this.data=n}push(...e){return new ru(this.opts,Ns(this.opts,this.data,...e))}pop(){return new ru(this.opts,zs(this.opts,this.data))}forEach(e){this.data.forEach(e)}forEachFromTop(e){[...this.data].reverse().forEach(e)}get isEmpty(){return Ws(this.opts,this.data)}get isFull(){return Ls(this.opts,this.data)}get peek(){return nu(this.opts,this.data)}get length(){return this.data.length}},Iy=class{constructor(e,n){R(this,"opts"),R(this,"data"),this.opts=e,this.data=n}push(...e){return this.data=Ns(this.opts,this.data,...e),this.data.length}forEach(e){this.data.forEach(e)}forEachFromTop(e){[...this.data].reverse().forEach(e)}pop(){const e=nu(this.opts,this.data);return zs(this.opts,this.data),e}get isEmpty(){return Ws(this.opts,this.data)}get isFull(){return Ls(this.opts,this.data)}get peek(){return nu(this.opts,this.data)}get length(){return this.data.length}},$i=(e={},...n)=>new ru({...e},[...n]),Os=(e={},...n)=>new Iy({...e},[...n]),ks={};ue(ks,{queue:()=>Us,queueMutable:()=>_r});var yi=(e,n)=>{e.debug&&console.log(`queue:${n}`)},By=(e,n,r)=>{const i=n.length+r.length,a=e.capacity??i,u=i-a,o=e.discardPolicy??"additions";switch(yi(e,`queueLen: ${n.length} potentialLen: ${i} toRemove: ${u} policy: ${o}`),o){case"additions":return yi(e,`trimQueue:DiscardAdditions: queueLen: ${n.length} slice: ${i-a} toAddLen: ${r.length}`),n.length===e.capacity?n:[...n,...r.slice(0,u-1)];case"newer":if(u>=n.length)return r.slice(Math.max(0,r.length-a),Math.min(r.length,a)+1);{const c=r.slice(0,Math.min(r.length,a-u+1)),s=n.slice(0,n.length-u);yi(e,`trimQueue: toRemove: ${u} keeping: ${JSON.stringify(s)} from orig: ${JSON.stringify(n)} toAddFinal: ${JSON.stringify(c)}`);const l=[...s,...c];return yi(e,`final: ${JSON.stringify(l)}`),l}case"older":return[...n,...r].slice(u);default:throw new Error(`Unknown overflow policy ${o}`)}},Ts=(e,n,...r)=>{if(e===void 0)throw new Error("opts parameter undefined");const i=n.length+r.length,a=e.capacity&&i>e.capacity,u=a?By(e,n,r):[...n,...r];if(e.capacity&&u.length!==e.capacity&&a)throw new Error(`Bug! Expected return to be at capacity. Return len: ${u.length} capacity: ${e.capacity} opts: ${JSON.stringify(e)}`);if(!e.capacity&&u.length!==i)throw new Error(`Bug! Return length not expected. Return len: ${u.length} expected: ${i} opts: ${JSON.stringify(e)}`);return u},$s=(e,n)=>{if(n.length===0)throw new Error("Queue is empty");return n.slice(1)},iu=(e,n)=>n[0],qs=(e,n)=>n.length===0,js=(e,n)=>e.capacity?n.length>=e.capacity:!1,au=class{constructor(e,n){if(R(this,"opts"),R(this,"data"),e===void 0)throw new Error("opts parameter undefined");this.opts=e,this.data=n}forEach(e){for(let n=this.data.length-1;n>=0;n--)e(this.data[n])}forEachFromFront(e){this.data.forEach(n=>e(n))}enqueue(...e){return new au(this.opts,Ts(this.opts,this.data,...e))}dequeue(){return new au(this.opts,$s(this.opts,this.data))}get isEmpty(){return qs(this.opts,this.data)}get isFull(){return js(this.opts,this.data)}get length(){return this.data.length}get peek(){return iu(this.opts,this.data)}},Ry=class{constructor(e,n){if(R(this,"opts"),R(this,"data"),e===void 0)throw new Error("opts parameter undefined");this.opts=e,this.data=n}enqueue(...e){return this.data=Ts(this.opts,this.data,...e),this.data.length}dequeue(){const e=iu(this.opts,this.data);return this.data=$s(this.opts,this.data),e}get isEmpty(){return qs(this.opts,this.data)}get isFull(){return js(this.opts,this.data)}get length(){return this.data.length}get peek(){return iu(this.opts,this.data)}},Us=(e={},...n)=>(e={...e},new au(e,[...n])),_r=(e={},...n)=>new Ry({...e},[...n]),Py=(e,n)=>{const r=new Map(e.entries());return n.forEach(i=>{if(i[0]===void 0)throw new Error("key cannot be undefined");if(i[1]===void 0)throw new Error("value cannot be undefined");r.set(i[0],i[1])}),r},Ny=(e,n)=>{const r=new Map(e.entries());return n.forEach(i=>{if(i.key===void 0)throw new Error("key cannot be undefined");if(i.value===void 0)throw new Error("value cannot be undefined");r.set(i.key,i.value)}),r},zy=(e,n)=>e.has(n),Yr=(e,...n)=>{if(e===void 0)throw new Error("map parameter is undefined");if(n===void 0)throw new Error("data parameter i.s undefined");if(n.length===0)return e;const r=n[0];return typeof r.key<"u"&&typeof r.value<"u"?Ny(e,n):Py(e,n)},Wy=(e,n,r)=>{const i=new Map(e.entries());return i.set(n,r),i},Vs=(e,n)=>{const r=new Map(e.entries());return r.delete(n),r},hr=e=>{if(e===void 0)return hr([]);if(Array.isArray(e))return hr(Yr(new Map,...e));const n=e;return{add:(...r)=>{const i=Yr(n,...r);return hr(i)},get:r=>n.get(r),delete:r=>hr(Vs(n,r)),clear:()=>hr(),has:r=>n.has(r),entries:()=>n.entries(),isEmpty:()=>n.size===0}},Ly=(...e)=>{let n=Yr(new Map,...e);return{add:(...r)=>{n=Yr(n,...r)},delete:r=>{n=Vs(n,r)},clear:()=>{n=Yr(new Map)},set:(r,i)=>{n=Wy(n,r,i)},get:r=>n.get(r),entries:()=>n.entries(),isEmpty:()=>n.size===0,has:r=>zy(n,r)}},kn=e=>!(e===void 0||e.a===void 0||e.b===void 0||!V.isPoint(e.a)||!V.isPoint(e.b)),Hs=e=>Array.isArray(e)?!e.some(r=>!kn(r)):!1,Ks=(e,n)=>V.isEqual(e.a,n.a)&&V.isEqual(e.b,n.b),Gs=(e,n)=>Object.freeze({...e,a:n(e.a),b:n(e.b)}),Zu=(e,n="line")=>{if(e===void 0)throw new Error(`${n} undefined`);if(e.a===void 0)throw new Error(`${n}.a undefined. Expected {a:Point, b:Point}`);if(e.b===void 0)throw new Error(`${n}.b undefined. Expected {a:Point, b:Point}`)},Oy=(e,n)=>{let r;if(kn(e))r=e.a,n=e.b;else if(r=e,n===void 0)throw new Error("b point must be provided");return Math.atan2(n.y-r.y,n.x-r.x)},Js=(e,n)=>Object.freeze({...e,a:V.multiply(e.a,n),b:V.multiply(e.b,n)}),Ys=(e,n)=>Object.freeze({...e,a:V.divide(e.a,n),b:V.divide(e.b,n)}),Xs=(e,n)=>Object.freeze({...e,a:V.sum(e.a,n),b:V.sum(e.b,n)}),Zs=(e,n)=>Object.freeze({...e,a:V.subtract(e.a,n),b:V.subtract(e.b,n)}),ky=(e,n,r)=>Object.freeze({...e,a:V.normaliseByRect(e.a,n,r),b:V.normaliseByRect(e.b,n,r)}),Qs=(e,n,r)=>al(e,n)<=r;function nn(e,n){if(Hs(e))return e.reduce((c,s)=>nn(s)+c,0);const[r,i]=aa(e,n),a=i.x-r.x,u=i.y-r.y;if(r.z!==void 0&&i.z!==void 0){const o=i.z-r.z;return Math.hypot(a,u,o)}else return Math.hypot(a,u)}var xs=(e,n)=>{const[r,i]=aa(e,n);return Wn(.5,r,i)},aa=(e,n)=>{let r;if(kn(e))n=e.b,r=e.a;else if(r=e,n===void 0)throw new Error(`Since first parameter is not a line, two points are expected. Got a: ${JSON.stringify(r)} b: ${JSON.stringify(n)}`);return _e(r,"a"),_e(r,"b"),[r,n]},el=(e,n)=>{const r=i=>{const{a,b:u}=i,o={x:u.x-a.x,y:u.y-a.y},c={x:n.x-a.x,y:n.y-a.y},s=o.x*o.x+o.y*o.y;let l=c.x*o.x+c.y*o.y;const f=Math.min(1,Math.max(0,l/s));return l=(u.x-a.x)*(n.y-a.y)-(u.y-a.y)*(n.x-a.x),{x:a.x+o.x*f,y:a.y+o.y*f}};if(Array.isArray(e)){const i=e.map(u=>r(u)),a=i.map(u=>V.distance(u,n));return Object.freeze(i[an.minIndex(...a)])}else return Object.freeze(r(e))},Qu=(e,n)=>{let r;if(kn(e))r=e.a,n=e.b;else if(r=e,n===void 0)throw new Error("b parameter required");if(n!==void 0)return(n.y-r.y)/(n.x-r.x);throw Error("Second point missing")},tl=e=>({x:e.b.x-e.a.x,y:e.b.y-e.a.y}),nl=e=>{const n=nn(e),r=tl(e);return{x:r.x/n,y:r.y/n}},rl=(e,n,r=0)=>{const i=Wn(r,e),a=nl(e);return{x:i.x-a.y*n,y:i.y+a.x*n}},il=(e,n)=>{const r=tl(e),i=nl(e),a={x:e.a.x-i.y*n,y:e.a.y+i.x*n};return{a,b:{x:a.x+r.x,y:a.y+r.y}}},Ty=(e,n)=>{const r=Wn(n/2,e),i=Wn(.5+n/2,e);return{a:r,b:i}},$y=(e,n)=>{const r=e.a.y+(n-e.a.x)*Qu(e);return Object.freeze({x:n,y:r})},qy=(e,n)=>{const r=nn(e);return Object.freeze({...e,a:e.a,b:Object.freeze({x:e.b.x+(e.b.x-e.a.x)/r*n,y:e.b.y+(e.b.y-e.a.y)/r*n})})};function*jy(e){const{a:n,b:r}=e;let i=Math.floor(n.x),a=Math.floor(n.y);const u=Math.floor(r.x),o=Math.floor(r.y),c=Math.abs(u-i),s=-Math.abs(o-a),l=i<u?1:-1,f=a<o?1:-1;let d=c+s;for(;yield{x:i,y:a},!(i===u&&a===o);){const g=2*d;g>=s&&(d+=s,i+=l),g<=c&&(d+=c,a+=f)}}var al=(e,n)=>{if(Array.isArray(e)){const r=e.map(i=>uu(i,n));return Yu(r)}else return uu(e,n)},uu=(e,n)=>{if(Zu(e,"line"),_e(n,"point"),nn(e)===0)return nn(e.a,n);const r=el(e,n);return nn(r,n)};function Wn(e,n,r,i){typeof r=="boolean"&&(i=r,r=void 0),i?ie(e,"","amount"):e0(e,"amount");const[a,u]=aa(n,r),o=nn(a,u),c=o*(1-e);if(o===0&&c===0)return Object.freeze({...u});const s=u.x-c*(u.x-a.x)/o,l=u.y-c*(u.y-a.y)/o;return Object.freeze({...u,x:s,y:l})}function ul(e,n){if(kn(e))Zu(e,"a"),n=e.b,e=e.a;else if(n===void 0)throw new Error("Expect second point if first is a point");return V.toString(e)+"-"+V.toString(n)}var qi=(e,n,r,i)=>{if(Number.isNaN(e))throw new Error("x1 is NaN");if(Number.isNaN(r))throw new Error("x2 is NaN");if(Number.isNaN(n))throw new Error("y1 is NaN");if(Number.isNaN(i))throw new Error("y2 is NaN");return ua({x:e,y:n},{x:r,y:i})},ol=(e,n)=>{if(kn(e))return[e.a.x,e.a.y,e.b.x,e.b.y];if(V.isPoint(e)&&V.isPoint(n))return[e.x,e.y,n.x,n.y];throw new Error("Expected single line parameter, or a and b points")};function*Uy(e){for(const n of e)yield n.a,yield n.b}var cl=(e,n)=>[`M${e.x} ${e.y} L ${n.x} ${n.y}`],Vy=e=>{if(!Array.isArray(e))throw new Error("arr parameter is not an array");if(e.length!==4)throw new Error("array is expected to have length four");return qi(e[0],e[1],e[2],e[3])},ua=(e,n)=>(_e(e,"a"),_e(n,"b"),e=Object.freeze({...e}),n=Object.freeze({...n}),Object.freeze({a:e,b:n})),sl=(...e)=>{const n=[];let r=e[0];for(let i=1;i<e.length;i++)n.push(ua(r,e[i])),r=e[i];return n},Hy=(e,n)=>Nn(ua(e,n)),ll=e=>V.bbox(e.a,e.b),Nn=e=>{const{a:n,b:r}=e;return Object.freeze({...e,length:()=>nn(n,r),interpolate:i=>Wn(i,n,r),bbox:()=>ll(e),toString:()=>ul(n,r),toFlatArray:()=>ol(n,r),toSvgString:()=>cl(n,r),toPoints:()=>[n,r],rotate:(i,a)=>Nn(fl(e,i,a)),sum:i=>Nn(Xs(e,i)),divide:i=>Nn(Ys(e,i)),multiply:i=>Nn(Js(e,i)),subtract:i=>Nn(Zs(e,i)),midpoint:()=>xs(n,r),distance:i=>uu(e,i),parallel:i=>il(e,i),perpendicularPoint:(i,a)=>rl(e,i,a),slope:()=>Qu(e),withinRange:(i,a)=>Qs(e,i,a),isEqual:i=>Ks(e,i),apply:i=>Nn(Gs(e,i)),kind:"line"})},fl=(e,n,r)=>n===void 0||n===0?e:(r===void 0&&(r=.5),typeof r=="number"&&(r=Wn(r,e.a,e.b)),Object.freeze({...e,a:V.rotate(e.a,n,r),b:V.rotate(e.b,n,r)})),Ky={};ue(Ky,{average:()=>Jy,averageWeighted:()=>Yy,filter:()=>em,isValid:()=>hl,max:()=>Zy,min:()=>Xy,quantiseEvery:()=>ou,total:()=>Qy,tracker:()=>xy});var xu=class{constructor(e="TrackerBase",n={}){this.id=e,R(this,"seenCount"),R(this,"storeIntermediate"),R(this,"resetAfterSamples"),R(this,"sampleLimit"),this.storeIntermediate=n.storeIntermediate??!1,this.resetAfterSamples=n.resetAfterSamples??-1,this.sampleLimit=n.sampleLimit??-1,this.seenCount=0}reset(){this.seenCount=0,this.onReset()}seen(...e){this.resetAfterSamples>0&&this.seenCount>this.resetAfterSamples?this.reset():this.sampleLimit>0&&this.seenCount>this.sampleLimit*2&&(this.seenCount=this.trimStore(this.sampleLimit),this.onTrimmed()),this.seenCount+=e.length;const n=this.seenImpl(e);this.onSeen(n)}onSeen(e){}},Gy=class extends xu{constructor(e,n){super(e,n);R(this,"values"),R(this,"timestamps"),this.values=[],this.timestamps=[]}trimStore(e){return e>=this.values.length?this.values.length:(this.values=this.values.slice(-e),this.timestamps=this.timestamps.slice(-e),this.values.length)}onTrimmed(){}get last(){return this.values.at(-1)}get initial(){return this.values.at(0)}get size(){return this.values.length}get elapsed(){if(this.values.length<0)throw new Error("No values seen yet");return Date.now()-this.timestamps[0]}onReset(){this.values=[],this.timestamps=[]}seenImpl(e){const n=e.at(-1),r=Date.now();return this.storeIntermediate?(this.values.push(...e),this.timestamps.push(...Uu(e.length,()=>r))):this.values.length===0?(this.values.push(n),this.timestamps.push(r)):this.values.length===2?(this.values[1]=n,this.timestamps[1]=r):this.values.length===1&&(this.values.push(n),this.timestamps.push(r)),e}},eo=class extends Gy{constructor(){super(...arguments);R(this,"total",0),R(this,"min",Number.MAX_SAFE_INTEGER),R(this,"max",Number.MIN_SAFE_INTEGER)}get avg(){return this.total/this.seenCount}difference(){if(this.last!==void 0&&this.initial!==void 0)return this.last-this.initial}relativeDifference(){if(this.last!==void 0&&this.initial!==void 0)return this.last/this.initial}onReset(){this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER,this.total=0,super.onReset()}onTrimmed(){this.min=Yu(this.values),this.max=Ss(this.values),this.total=_s(this.values)}onSeen(e){if(e.some(n=>Number.isNaN(n)))throw Error("Cannot add NaN");this.total=e.reduce((n,r)=>n+r,this.total),this.min=Math.min(...e,this.min),this.max=Math.max(...e,this.max)}getMinMaxAvg(){return{min:this.min,max:this.max,avg:this.avg}}},Xr=(e,n)=>new eo(e??"",n??{}),Jy=(...e)=>Ds(e),Yy=(e,...n)=>Es(n,e),Xy=(...e)=>bs(e),Zy=(...e)=>Cs(e),Qy=(...e)=>Fs(e),hl=e=>!(typeof e!="number"||Number.isNaN(e)),xy=(e,n)=>Xr(e,n);function*em(e){for(const n of e)hl(n)&&(yield n)}var ou=(e,n,r=!0)=>{let i=e/n;const a=i%1;return i=Math.floor(i),(a===.5&&r||a>.5)&&i++,n*i};function nr(e,n){if(e===void 0)return{x:0,y:0};if(V.isPoint(e))return e;if(typeof e!="number"||typeof n!="number")throw new Error(`Expected point or x,y as parameters. Got: a: ${JSON.stringify(e)} b: ${JSON.stringify(n)}`);return Object.freeze({x:e,y:n})}var dl=(...e)=>{const n=e.map(r=>V.toArray(r));return an.dotProduct(n)},Mr=Object.freeze({x:0,y:0}),vl=Object.freeze({x:NaN,y:NaN}),Fi=e=>e.x===0&&e.y===0,Si=e=>Number.isNaN(e.x)&&Number.isNaN(e.y),tm=e=>e.x===null&&e.y===null,Jn=(e,...n)=>{if(n.length===0)throw new Error("No points provided");let r=n[0];return n.forEach(i=>{r=e(r,i)}),r},nm=(...e)=>Jn((n,r)=>n.x<=r.x?n:r,...e),rm=(...e)=>Jn((n,r)=>n.x>=r.x?n:r,...e);function rn(e,n,r){const i=nr(n,r);return _e(i),Math.hypot(i.x-e.x,i.y-e.y)}var im=(e,n)=>{if(Be.isRectPositioned(n))return Be.distanceFromExterior(n,e);if(En.isCirclePositioned(n))return En.distanceFromExterior(n,e);if(je(n))return rn(e,n);throw new Error("Unknown shape")},am=(e,n)=>{if(Be.isRectPositioned(n))return Be.distanceFromExterior(n,e);if(En.isCirclePositioned(n))return En.distanceFromExterior(n,e);if(je(n))return rn(e,n);throw new Error("Unknown shape")};function _e(e,n="Point"){if(e===void 0)throw new Error(`'${n}' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(e===null)throw new Error(`'${n}' is null. Expected {x,y} got ${JSON.stringify(e)}`);if(e.x===void 0)throw new Error(`'${n}.x' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(e.y===void 0)throw new Error(`'${n}.y' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(typeof e.x!="number")throw new Error(`'${n}.x' must be a number. Got ${e.x}`);if(typeof e.y!="number")throw new Error(`'${n}.y' must be a number. Got ${e.y}`);if(e.x===null)throw new Error(`'${n}.x' is null`);if(e.y===null)throw new Error(`'${n}.y' is null`);if(Number.isNaN(e.x))throw new Error(`'${n}.x' is NaN`);if(Number.isNaN(e.y))throw new Error(`'${n}.y' is NaN`)}var yl=(e,n="pt")=>(_e(e,n),ie(e.x,"nonZero",`${n}.x`),ie(e.y,"nonZero",`${n}.y`),!0),um=e=>({...e,x:Math.abs(e.x),y:Math.abs(e.y)}),pr=(e,n,r)=>n===void 0?Math.atan2(e.y,e.x):r!==void 0?Math.atan2(n.y-e.y,n.x-e.x)-Math.atan2(r.y-e.y,r.x-e.x):Math.atan2(n.y-e.y,n.x-e.x),ml=(...e)=>{if(!Array.isArray(e))throw new Error("Expected list of points");const n=e.reduce((r,i)=>{if(i===void 0)return r;if(Array.isArray(i))throw new Error("'points' list contains an array. Did you mean: centroid(...myPoints)?");if(!je(i))throw new Error(`'points' contains something which is not a point: ${JSON.stringify(i)}`);return{x:r.x+i.x,y:r.y+i.y}},{x:0,y:0});return Object.freeze({x:n.x/e.length,y:n.y/e.length})},om=(...e)=>{const n=Jn((l,f)=>l.x<f.x?l:f,...e),r=Jn((l,f)=>l.x>f.x?l:f,...e),i=Jn((l,f)=>l.y<f.y?l:f,...e),a=Jn((l,f)=>l.y>f.y?l:f,...e),u={x:n.x,y:i.y},o={x:r.x,y:i.y},c={x:r.x,y:a.y},s={x:n.x,y:a.y};return Be.maxFromCorners(u,o,c,s)};function je(e){return!(e===void 0||e===null||e.x===void 0||e.y===void 0)}var cu=e=>!(e===void 0||e===null||e.x===void 0||e.y===void 0||e.z===void 0),cm=e=>[e.x,e.y];function gl(e,n){if(e===void 0)return"(undefined)";if(e===null)return"(null)";const r=n?e.x.toFixed(n):e.x,i=n?e.y.toFixed(n):e.y;if(e.z!==void 0){const a=n?e.z.toFixed(n):e.z;return`(${r},${i},${a})`}else return`(${r},${i})`}var Zr=(...e)=>{if(e===void 0)throw new Error("parameter 'p' is undefined");if(e.length<2)return!0;for(let n=1;n<e.length;n++)if(e[n].x!==e[0].x||e[n].y!==e[0].y)return!1;return!0},sm=(e,n,r)=>{typeof r=="number"&&(r={x:r,y:r});const i=Math.abs(n.x-e.x),a=Math.abs(n.y-e.y);return i<=r.x&&a<=r.y},lm=(e,n,r,i=!1)=>Wn(e,n,r,i),fm=(e,n)=>{if(Array.isArray(e)){if(e.length!==2)throw new Error("Expected array of length two, got "+e.length);return Object.freeze({x:e[0],y:e[1]})}else{if(e===void 0)e=0;else if(Number.isNaN(e))throw new Error("x is NaN");if(n===void 0)n=0;else if(Number.isNaN(n))throw new Error("y is NaN");return Object.freeze({x:e,y:n})}},pl=(...e)=>{const n=[];if(Array.isArray(e[0]))e.forEach(r=>{if(r.length%2!==0)throw new Error("coords array should be even-numbered");n.push(Object.freeze({x:r[0],y:r[1]}))});else{if(e.length%2!==0)throw new Error("Expected even number of elements: [x,y,x,y...]");for(let r=0;r<e.length;r+=2)n.push(Object.freeze({x:e[r],y:e[r+1]}))}return n};function or(e,n,r,i){if(je(e))return _e(e,"a"),je(n)?(_e(n,"b"),Object.freeze({x:e.x-n.x,y:e.y-n.y})):(r===void 0&&(r=n),Object.freeze({x:e.x-n,y:e.y-r}));if(ie(e,"","a"),typeof n!="number")throw new Error("Second parameter is expected to by y value");if(ie(n,"","b"),Number.isNaN(r))throw new Error("Third parameter is NaN");if(Number.isNaN(i))throw new Error("Fourth parameter is NaN");return r===void 0&&(r=0),i===void 0&&(i=0),Object.freeze({x:e-r,y:n-i})}var hm=(e,n)=>Object.freeze({...e,x:n(e.x,"x"),y:n(e.y,"y")}),dm=(e,...n)=>wl(...n)(e),wl=(...e)=>n=>e.reduce((r,i)=>i(r),n),Dl=(e,n,r={x:0,y:0})=>{let i=r;return e.forEach(a=>{i=n(a,i)}),i},El=function(e,n,r,i){if(e===void 0)throw new Error(`a missing. a: ${e}`);let a,u;if(je(e))if(a=e,n===void 0&&(n=Mr),je(n))u=n;else{if(n===void 0)throw new Error("Expects x coordinate");u={x:n,y:r===void 0?n:r}}else if(!je(n)){if(n===void 0)throw new Error("Expected number as second param");if(a={x:e,y:n},r===void 0)throw new Error("Expects x coordiante");u={x:r,y:i===void 0?0:i}}if(a===void 0)throw new Error(`ptA missing. a: ${e}`);if(u===void 0)throw new Error(`ptB missing. b: ${n}`);return _e(a,"a"),_e(u,"b"),Object.freeze({x:a.x+u.x,y:a.y+u.y})};function to(e,n,r){if(_e(e,"a"),typeof n=="number")return typeof r>"u"&&(r=n),ie(r,"","y"),ie(n,"","x"),Object.freeze({x:e.x*n,y:e.y*r});if(je(n))return _e(n,"b"),Object.freeze({x:e.x*n.x,y:e.y*n.y});if(Be.isRect(n))return Be.guard(n,"rect"),Object.freeze({x:e.x*n.width,y:e.y*n.height});throw new Error(`Invalid arguments. a: ${JSON.stringify(e)} b: ${JSON.stringify(n)}`)}function bl(e,n,r,i){if(je(e))return _e(e,"a"),je(n)?(yl(n),Object.freeze({x:e.x/n.x,y:e.y/n.y})):Be.isRect(n)?(Be.guard(n,"rect"),Object.freeze({x:e.x/n.width,y:e.y/n.height})):(r===void 0&&(r=n),_e(e),ie(n,"nonZero","x"),ie(r,"nonZero","y"),Object.freeze({x:e.x/n,y:e.y/r}));if(typeof n!="number")throw new Error("expected second parameter to be y1 coord");return ie(e,"positive","x1"),ie(n,"positive","y1"),r===void 0&&(r=1),i===void 0&&(i=r),ie(r,"nonZero","x2"),ie(i,"nonZero","y2"),Object.freeze({x:e/r,y:n/i})}var vm=(e,n,r=!0)=>Object.freeze({x:ou(e.x,n.x,r),y:ou(e.y,n.y,r)}),ym=(...e)=>{const n=[...e].sort(Al);if(n.length===1)return n;const r=u=>{const o=[];return u.forEach(c=>{for(;o.length>=2;){const s=o[o.length-1],l=o[o.length-2];if((s.x-l.x)*(c.y-l.y)>=(s.y-l.y)*(c.x-l.x))o.pop();else break}o.push(c)}),o.pop(),o},i=r(n),a=r(n.reverse());return i.length===1&&a.length===1&&Zr(a[0],i[0])?i:i.concat(a)},mm=(e,n)=>e.x<n.x&&e.y<n.y?-2:e.x>n.x&&e.y>n.y?2:e.x<n.x||e.y<n.y?-1:e.x>n.x||e.y>n.y?1:e.x===n.x&&e.x===n.y?0:NaN,Al=(e,n)=>e.x-n.x||e.y-n.y,su=(e,n,r)=>{const i=Math.cos(r)*n+e.x,a=Math.sin(r)*n+e.y;return{x:i,y:a}};function Xn(e,n,r){r===void 0&&(r={x:0,y:0}),_e(r,"origin"),ie(n,"","amountRadian");const i=Array.isArray(e);if(n===0)return e;i||(e=[e]);const a=e;a.forEach((s,l)=>_e(s,`pt[${l}]`));const c=a.map(s=>ft.fromCartesian(s,r)).map(s=>ft.rotate(s,n)).map(s=>ft.toCartesian(s,r));return i?c:c[0]}var gm=(e,n)=>{const r=[[Math.cos(n),-Math.sin(n)],[Math.sin(n),Math.cos(n)]],i=[];for(let a=0;a<e.length;++a)i[a]=[r[0][0]*e[a][0]+r[0][1]*e[a][1],r[1][0]*e[a][0]+r[1][1]*e[a][1]];return i},pm=(e,n)=>{if(je(e)&&(n=e.y,e=e.x),n===void 0)throw new Error("Expected y");return Math.sqrt(e*e+n*n)},Cl=(e,n)=>{const r=nr(e,n),i=pm(r);return i===0?V.Empty:Object.freeze({x:r.x/i,y:r.y/i})};function wm(e,n,r,i){if(je(e)){if(typeof n=="number"&&r!==void 0)ie(n,"positive","width"),ie(r,"positive","height");else{if(!Be.isRect(n))throw new Error("Expected second parameter to be a rect");r=n.height,n=n.width}return Object.freeze({x:e.x/n,y:e.y/r})}else{if(ie(e,"positive","x"),typeof n!="number")throw new Error("Expecting second parameter to be a number (width)");if(typeof r!="number")throw new Error("Expecting third parameter to be a number (height)");if(ie(n,"positive","y"),ie(r,"positive","width"),i===void 0)throw new Error("Expected height parameter");return ie(i,"positive","height"),Object.freeze({x:e/r,y:n/i})}}var Dm=e=>(e===void 0&&(e=on),{x:e(),y:e()}),Em=(e,n={x:1,y:1},r={x:0,y:0})=>(_e(e,"pt"),_e(n,"ptMax"),_e(r,"ptMin"),Object.freeze({x:Qi(e.x,r.x,n.x),y:Qi(e.y,r.y,n.y)})),bm=(e,n="both")=>{switch(n){case"both":return cu(e)?Object.freeze({...e,x:e.x*-1,y:e.y*-1,z:e.z*-1}):Object.freeze({...e,x:e.x*-1,y:e.y*-1});case"x":return Object.freeze({...e,x:e.x*-1});case"y":return Object.freeze({...e,y:e.y*-1});case"z":if(cu(e))return Object.freeze({...e,z:e.z*-1});throw new Error("pt parameter is missing z");default:throw new Error("Unknown what parameter. Expecting 'both', 'x' or 'y'")}},Am=(e,n=Math.round)=>(_e(e,"pt"),Object.freeze({x:n(e.x),y:n(e.y)})),Fl=(e,n=1,r=0)=>{const i=rn(e);let a=1;return i>n?a=n/i:i<r&&(a=r/i),a===1?e:to(e,a,a)};function Cm(e,n,r,i){if(je(e))return n===void 0&&(n=0),r===void 0&&(r=1),ie(n,"","min"),ie(r,"","max"),Object.freeze({x:Ut(e.x,n,r),y:Ut(e.y,n,r)});if(n===void 0)throw new Error("Expected y coordinate");return r===void 0&&(r=0),i===void 0&&(i=1),ie(e,"","x"),ie(n,"","y"),ie(r,"","min"),ie(i,"","max"),Object.freeze({x:Ut(e,r,i),y:Ut(n,r,i)})}var lu=(e,n)=>{const r=nr(e,n);let i=0,a=0,u=0,o=performance.now(),c=r;return(l,f)=>{const d=nr(l,f);i+=d.x,a+=d.y,u++;const g=rn(d,r),M=rn(d,c),P=performance.now(),q=M/(P-o);return o=P,c=d,Object.freeze({angle:pr(d,r),distanceFromStart:g,distanceFromLast:M,speed:q,centroid:ml(d,r),average:{x:i/u,y:a/u}})}},Sl=e=>e.startRadian!==void 0&&e.endRadian!==void 0,pn=e=>e.x!==void 0&&e.y!==void 0,fc=Math.PI*2;function Fm(e,n,r,i){const a={radius:e,startRadian:zn(n),endRadian:zn(r)};if(je(i)){_e(i);const u={...a,x:i.x,y:i.y};return Object.freeze(u)}else return Object.freeze(a)}var _l=e=>Bt.fromPoints(ji(e,e.startRadian),ji(e,e.endRadian)),ji=(e,n,r)=>{if(n>e.endRadian)throw new Error("angleRadian beyond end angle of arc");if(n<e.startRadian)throw new Error("angleRadian beyond start angle of arc");return r===void 0&&(pn(e)?r=e:r={x:0,y:0}),{x:Math.cos(n)*e.radius+r.x,y:Math.sin(n)*e.radius+r.y}},no=e=>{if(e===void 0)throw new Error("Arc is undefined");if(pn(e)&&_e(e,"arc"),e.radius===void 0)throw new Error(`Arc radius is undefined (${JSON.stringify(e)})`);if(typeof e.radius!="number")throw new Error("Radius must be a number");if(Number.isNaN(e.radius))throw new Error("Radius is NaN");if(e.radius<=0)throw new Error("Radius must be greater than zero");if(e.startRadian===void 0)throw new Error("Arc is missing 'startRadian' field");if(e.endRadian===void 0)throw new Error("Arc is missing 'startRadian' field");if(Number.isNaN(e.endRadian))throw new Error("Arc endRadian is NaN");if(Number.isNaN(e.startRadian))throw new Error("Arc endRadian is NaN");if(e.startRadian>=e.endRadian)throw new Error("startRadian is expected to be les than endRadian")},ro=(e,n,r)=>(no(n),ji(n,n.startRadian+(n.endRadian-n.startRadian)*e,r)),Sm=e=>(no(e),Object.freeze({...e,interpolate:n=>ro(n,e),bbox:()=>Il(e),length:()=>Ml(e),toSvgString:()=>Bl(e),kind:"arc"})),Ml=e=>fc*e.radius*((e.startRadian-e.endRadian)/fc),Il=e=>{if(pn(e)){const n=ro(.5,e),r=_l(e);return V.bbox(n,r.a,r.b)}else return{width:e.radius*2,height:e.radius*2}},Bl=(e,n,r,i,a)=>{if(Sl(e))return pn(e)?mi(e,e.radius,e.startRadian,e.endRadian,n):je(n)?mi(n,e.radius,e.startRadian,e.endRadian,r):mi({x:0,y:0},e.radius,e.startRadian,e.endRadian);if(r===void 0)throw new Error("startAngle undefined");if(i===void 0)throw new Error("endAngle undefined");if(je(e)){if(typeof n=="number"&&typeof r=="number"&&typeof i=="number")return mi(e,n,r,i,a);throw new Error("Expected (point, number, number, number). Missing a number param.")}else throw new Error("Expected (point, number, number, number). Missing first point.")},mi=(e,n,r,i,a)=>{(a===void 0||typeof a!="object")&&(a={});const u=i-r===360,o=ft.toCartesian(n,i-.01,e),c=ft.toCartesian(n,r,e),{largeArc:s=!1,sweep:l=!1}=a,f=[`
    M ${o.x} ${o.y}
    A ${n} ${n} 0 ${s?"1":"0"} ${l?"1":"0"} ${c.x} ${c.y},
  `];return u&&f.push("z"),f},_m=(e,n)=>V.distance(e,n),Mm=(e,n)=>e.radius!==n.radius?!1:pn(e)&&pn(n)?!(e.x!==n.x||e.y!==n.y||e.z!==n.z):!(!(!pn(e)&&!pn(n))||e.endRadian!==n.endRadian||e.startRadian!==n.startRadian),ci={};ue(ci,{computeQuadraticSimple:()=>Om,cubic:()=>km,isCubicBezier:()=>io,isQuadraticBezier:()=>oa,quadratic:()=>Nl,quadraticBend:()=>Lm,quadraticSimple:()=>wr,quadraticToSvgString:()=>Pl,toPath:()=>Mi});var{abs:Tr,cos:yn,sin:sr,acos:Im,atan2:$r,sqrt:Mn,pow:jt}=Math;function qr(e){return e<0?-jt(-e,1/3):jt(e,1/3)}var Rl=Math.PI,gi=2*Rl,In=Rl/2,Bm=1e-6,ka=Number.MAX_SAFE_INTEGER||9007199254740991,Ta=Number.MIN_SAFE_INTEGER||-9007199254740991,Rm={x:0,y:0,z:0},Z={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){const r=n(e);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Mn(i)},compute:function(e,n,r){if(e===0)return n[0].t=0,n[0];const i=n.length-1;if(e===1)return n[i].t=1,n[i];const a=1-e;let u=n;if(i===0)return n[0].t=e,n[0];if(i===1){const c={x:a*u[0].x+e*u[1].x,y:a*u[0].y+e*u[1].y,t:e};return r&&(c.z=a*u[0].z+e*u[1].z),c}if(i<4){let c=a*a,s=e*e,l,f,d,g=0;i===2?(u=[u[0],u[1],u[2],Rm],l=c,f=a*e*2,d=s):i===3&&(l=c*a,f=c*e*3,d=a*s*3,g=e*s);const M={x:l*u[0].x+f*u[1].x+d*u[2].x+g*u[3].x,y:l*u[0].y+f*u[1].y+d*u[2].y+g*u[3].y,t:e};return r&&(M.z=l*u[0].z+f*u[1].z+d*u[2].z+g*u[3].z),M}const o=JSON.parse(JSON.stringify(n));for(;o.length>1;){for(let c=0;c<o.length-1;c++)o[c]={x:o[c].x+(o[c+1].x-o[c].x)*e,y:o[c].y+(o[c+1].y-o[c].y)*e},typeof o[c].z<"u"&&(o[c]=o[c].z+(o[c+1].z-o[c].z)*e);o.splice(o.length-1,1)}return o[0].t=e,o[0]},computeWithRatios:function(e,n,r,i){const a=1-e,u=r,o=n;let c=u[0],s=u[1],l=u[2],f=u[3],d;if(c*=a,s*=e,o.length===2)return d=c+s,{x:(c*o[0].x+s*o[1].x)/d,y:(c*o[0].y+s*o[1].y)/d,z:i?(c*o[0].z+s*o[1].z)/d:!1,t:e};if(c*=a,s*=2*a,l*=e*e,o.length===3)return d=c+s+l,{x:(c*o[0].x+s*o[1].x+l*o[2].x)/d,y:(c*o[0].y+s*o[1].y+l*o[2].y)/d,z:i?(c*o[0].z+s*o[1].z+l*o[2].z)/d:!1,t:e};if(c*=a,s*=1.5*a,l*=3*a,f*=e*e*e,o.length===4)return d=c+s+l+f,{x:(c*o[0].x+s*o[1].x+l*o[2].x+f*o[3].x)/d,y:(c*o[0].y+s*o[1].y+l*o[2].y+f*o[3].y)/d,z:i?(c*o[0].z+s*o[1].z+l*o[2].z+f*o[3].z)/d:!1,t:e}},derive:function(e,n){const r=[];for(let i=e,a=i.length,u=a-1;a>1;a--,u--){const o=[];for(let c=0,s;c<u;c++)s={x:u*(i[c+1].x-i[c].x),y:u*(i[c+1].y-i[c].y)},n&&(s.z=u*(i[c+1].z-i[c].z)),o.push(s);r.push(o),i=o}return r},between:function(e,n,r){return n<=e&&e<=r||Z.approximately(e,n)||Z.approximately(e,r)},approximately:function(e,n,r){return Tr(e-n)<=(r||Bm)},length:function(e){const r=Z.Tvalues.length;let i=0;for(let a=0,u;a<r;a++)u=.5*Z.Tvalues[a]+.5,i+=Z.Cvalues[a]*Z.arcfn(u,e);return .5*i},map:function(e,n,r,i,a){const u=r-n,o=a-i,c=e-n,s=c/u;return i+o*s},lerp:function(e,n,r){const i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return n.z!==void 0&&r.z!==void 0&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return typeof e.z<"u"&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(Z.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){const i=n.x-e.x,a=n.y-e.y,u=r.x-e.x,o=r.y-e.y,c=i*o-a*u,s=i*u+a*o;return $r(c,s)},round:function(e,n){const r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){const r=e.x-n.x,i=e.y-n.y;return Mn(r*r+i*i)},closest:function(e,n){let r=jt(2,63),i,a;return e.forEach(function(u,o){a=Z.dist(n,u),a<r&&(r=a,i=o)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=jt(e,n)+jt(1-e,n),i=r-1;return Tr(i/r)},projectionratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=jt(1-e,n),i=jt(e,n)+r;return r/i},lli8:function(e,n,r,i,a,u,o,c){const s=(e*i-n*r)*(a-o)-(e-r)*(a*c-u*o),l=(e*i-n*r)*(u-c)-(n-i)*(a*c-u*o),f=(e-r)*(u-c)-(n-i)*(a-o);return f==0?!1:{x:s/f,y:l/f}},lli4:function(e,n,r,i){const a=e.x,u=e.y,o=n.x,c=n.y,s=r.x,l=r.y,f=i.x,d=i.y;return Z.lli8(a,u,o,c,s,l,f,d)},lli:function(e,n){return Z.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new We(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=ka,r=ka,i=Ta,a=Ta;return e.forEach(function(u){const o=u.bbox();n>o.x.min&&(n=o.x.min),r>o.y.min&&(r=o.y.min),i<o.x.max&&(i=o.x.max),a<o.y.max&&(a=o.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+a)/2,max:a,size:a-r}}},shapeintersections:function(e,n,r,i,a){if(!Z.bboxoverlap(n,i))return[];const u=[],o=[e.startcap,e.forward,e.back,e.endcap],c=[r.startcap,r.forward,r.back,r.endcap];return o.forEach(function(s){s.virtual||c.forEach(function(l){if(l.virtual)return;const f=s.intersects(l,a);f.length>0&&(f.c1=s,f.c2=l,f.s1=e,f.s2=r,u.push(f))})}),u},makeshape:function(e,n,r){const i=n.points.length,a=e.points.length,u=Z.makeline(n.points[i-1],e.points[0]),o=Z.makeline(e.points[a-1],n.points[0]),c={startcap:u,forward:e,back:n,endcap:o,bbox:Z.findbbox([u,e,n,o])};return c.intersections=function(s){return Z.shapeintersections(c,c.bbox,s,s.bbox,r)},c},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=ka,a=Ta,u,o;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let c=0,s=r.length;c<s;c++)u=r[c],o=e.get(u),o[n]<i&&(i=o[n]),o[n]>a&&(a=o[n]);return{min:i,mid:(i+a)/2,max:a,size:a-i}},align:function(e,n){const r=n.p1.x,i=n.p1.y,a=-$r(n.p2.y-i,n.p2.x-r),u=function(o){return{x:(o.x-r)*yn(a)-(o.y-i)*sr(a),y:(o.x-r)*sr(a)+(o.y-i)*yn(a)}};return e.map(u)},roots:function(e,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=e.length-1,i=Z.align(e,n),a=function(B){return 0<=B&&B<=1};if(r===2){const B=i[0].y,U=i[1].y,ae=i[2].y,ee=B-2*U+ae;if(ee!==0){const pe=-Mn(U*U-B*ae),be=-B+U,T=-(pe+be)/ee,$=-(-pe+be)/ee;return[T,$].filter(a)}else if(U!==ae&&ee===0)return[(2*U-ae)/(2*U-2*ae)].filter(a);return[]}const u=i[0].y,o=i[1].y,c=i[2].y,s=i[3].y;let l=-u+3*o-3*c+s,f=3*u-6*o+3*c,d=-3*u+3*o,g=u;if(Z.approximately(l,0)){if(Z.approximately(f,0))return Z.approximately(d,0)?[]:[-g/d].filter(a);const B=Mn(d*d-4*f*g),U=2*f;return[(B-d)/U,(-d-B)/U].filter(a)}f/=l,d/=l,g/=l;const M=(3*d-f*f)/3,P=M/3,q=(2*f*f*f-9*f*d+27*g)/27,L=q/2,A=L*L+P*P*P;let _,W,k,C,S;if(A<0){const B=-M/3,U=B*B*B,ae=Mn(U),ee=-q/(2*ae),pe=ee<-1?-1:ee>1?1:ee,be=Im(pe),T=qr(ae),$=2*T;return k=$*yn(be/3)-f/3,C=$*yn((be+gi)/3)-f/3,S=$*yn((be+2*gi)/3)-f/3,[k,C,S].filter(a)}else{if(A===0)return _=L<0?qr(-L):-qr(L),k=2*_-f/3,C=-_-f/3,[k,C].filter(a);{const B=Mn(A);return _=qr(-L+B),W=qr(L+B),[_-W-f/3].filter(a)}}},droots:function(e){if(e.length===3){const n=e[0],r=e[1],i=e[2],a=n-2*r+i;if(a!==0){const u=-Mn(r*r-n*i),o=-n+r,c=-(u+o)/a,s=-(-u+o)/a;return[c,s]}else if(r!==i&&a===0)return[(2*r-i)/(2*(r-i))];return[]}if(e.length===2){const n=e[0],r=e[1];return n!==r?[n/(n-r)]:[]}return[]},curvature:function(e,n,r,i,a){let u,o,c,s,l=0,f=0;const d=Z.compute(e,n),g=Z.compute(e,r),M=d.x*d.x+d.y*d.y;if(i?(u=Mn(jt(d.y*g.z-g.y*d.z,2)+jt(d.z*g.x-g.z*d.x,2)+jt(d.x*g.y-g.x*d.y,2)),o=jt(M+d.z*d.z,3/2)):(u=d.x*g.y-d.y*g.x,o=jt(M,3/2)),u===0||o===0)return{k:0,r:0};if(l=u/o,f=o/u,!a){const P=Z.curvature(e-.001,n,r,i,!0).k,q=Z.curvature(e+.001,n,r,i,!0).k;s=(q-l+(l-P))/2,c=(Tr(q-l)+Tr(l-P))/2}return{k:l,r:f,dk:s,adk:c}},inflections:function(e){if(e.length<4)return[];const n=Z.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,a=n[1].x*n[2].y,u=n[3].x*n[2].y,o=18*(-3*r+2*i+3*a-u),c=18*(3*r-i-3*a),s=18*(a-r);if(Z.approximately(o,0)){if(!Z.approximately(c,0)){let g=-s/c;if(0<=g&&g<=1)return[g]}return[]}const l=2*o;if(Z.approximately(l,0))return[];const f=c*c-4*o*s;if(f<0)return[];const d=Math.sqrt(f);return[(d-c)/l,-(c+d)/l].filter(function(g){return 0<=g&&g<=1})},bboxoverlap:function(e,n){const r=["x","y"],i=r.length;for(let a=0,u,o,c,s;a<i;a++)if(u=r[a],o=e[u].mid,c=n[u].mid,s=(e[u].size+n[u].size)/2,Tr(o-c)>=s)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){const i=e.bbox(),a=n.bbox(),u=1e5,o=r||.5;if(i.x.size+i.y.size<o&&a.x.size+a.y.size<o)return[(u*(e._t1+e._t2)/2|0)/u+"/"+(u*(n._t1+n._t2)/2|0)/u];let c=e.split(.5),s=n.split(.5),l=[{left:c.left,right:s.left},{left:c.left,right:s.right},{left:c.right,right:s.right},{left:c.right,right:s.left}];l=l.filter(function(d){return Z.bboxoverlap(d.left.bbox(),d.right.bbox())});let f=[];return l.length===0||(l.forEach(function(d){f=f.concat(Z.pairiteration(d.left,d.right,o))}),f=f.filter(function(d,g){return f.indexOf(d)===g})),f},getccenter:function(e,n,r){const i=n.x-e.x,a=n.y-e.y,u=r.x-n.x,o=r.y-n.y,c=i*yn(In)-a*sr(In),s=i*sr(In)+a*yn(In),l=u*yn(In)-o*sr(In),f=u*sr(In)+o*yn(In),d=(e.x+n.x)/2,g=(e.y+n.y)/2,M=(n.x+r.x)/2,P=(n.y+r.y)/2,q=d+c,L=g+s,A=M+l,_=P+f,W=Z.lli8(d,g,q,L,M,P,A,_),k=Z.dist(W,e);let C=$r(e.y-W.y,e.x-W.x),S=$r(n.y-W.y,n.x-W.x),B=$r(r.y-W.y,r.x-W.x),U;return C<B?((C>S||S>B)&&(C+=gi),C>B&&(U=B,B=C,C=U)):B<S&&S<C?(U=B,B=C,C=U):B+=gi,W.s=C,W.e=B,W.r=k,W},numberSort:function(e,n){return e-n}},_i=class{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return Z.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){const e=this.curves;for(var n=e[0].bbox(),r=1;r<e.length;r++)Z.expandbox(n,e[r].bbox());return n}offset(e){const n=[];return this.curves.forEach(function(r){n.push(...r.offset(e))}),new _i(n)}},{abs:jr,min:hc,max:dc,cos:Pm,sin:Nm,acos:zm,sqrt:Ur}=Math,Wm=Math.PI,We=class{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),r=!1;if(typeof n[0]=="object"){r=n.length;const g=[];n.forEach(function(M){["x","y","z"].forEach(function(P){typeof M[P]<"u"&&g.push(M[P])})}),n=g}let i=!1;const a=n.length;if(r){if(r>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const u=this._3d=!i&&(a===9||a===12)||e&&e[0]&&typeof e[0].z<"u",o=this.points=[];for(let g=0,M=u?3:2;g<a;g+=M){var c={x:n[g],y:n[g+1]};u&&(c.z=n[g+2]),o.push(c)}const s=this.order=o.length-1,l=this.dims=["x","y"];u&&l.push("z"),this.dimlen=l.length;const f=Z.align(o,{p1:o[0],p2:o[s]}),d=Z.dist(o[0],o[s]);this._linear=f.reduce((g,M)=>g+jr(M.y),0)<d/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,r,i){if(typeof i>"u"&&(i=.5),i===0)return new We(n,n,r);if(i===1)return new We(e,n,n);const a=We.getABC(2,e,n,r,i);return new We(e,a.A,r)}static cubicFromPoints(e,n,r,i,a){typeof i>"u"&&(i=.5);const u=We.getABC(3,e,n,r,i);typeof a>"u"&&(a=Z.dist(n,u.C));const o=a*(1-i)/i,c=Z.dist(e,r),s=(r.x-e.x)/c,l=(r.y-e.y)/c,f=a*s,d=a*l,g=o*s,M=o*l,P={x:n.x-f,y:n.y-d},q={x:n.x+g,y:n.y+M},L=u.A,A={x:L.x+(P.x-L.x)/(1-i),y:L.y+(P.y-L.y)/(1-i)},_={x:L.x+(q.x-L.x)/i,y:L.y+(q.y-L.y)/i},W={x:e.x+(A.x-e.x)/i,y:e.y+(A.y-e.y)/i},k={x:r.x+(_.x-r.x)/(1-i),y:r.y+(_.y-r.y)/(1-i)};return new We(e,W,k,r)}static getUtils(){return Z}getUtils(){return We.getUtils()}static get PolyBezier(){return _i}valueOf(){return this.toString()}toString(){return Z.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const e=this.points,n=e[0].x,r=e[0].y,i=["M",n,r,this.order===2?"Q":"C"];for(let a=1,u=e.length;a<u;a++)i.push(e[a].x),i.push(e[a].y);return i.join(" ")}setRatios(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){const e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=Z.derive(this.points,this._3d),this.computedirection()}computedirection(){const e=this.points,n=Z.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return Z.length(this.derivative.bind(this))}static getABC(e=2,n,r,i,a=.5){const u=Z.projectionratio(a,e),o=1-u,c={x:u*n.x+o*i.x,y:u*n.y+o*i.y},s=Z.abcratio(a,e);return{A:{x:r.x+(r.x-c.x)/s,y:r.y+(r.y-c.y)/s},B:r,C:c,S:n,E:i}}getABC(e,n){n=n||this.get(e);let r=this.points[0],i=this.points[this.order];return We.getABC(this.order,r,n,i,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,r,i;n<e;n++)i=n/(e-1),r=this.compute(i),r.t=i,this._lut.push(r);return this._lut}on(e,n){n=n||5;const r=this.getLUT(),i=[];for(let a=0,u,o=0;a<r.length;a++)u=r[a],Z.dist(u,e)<n&&(i.push(u),o+=a/r.length);return i.length?t/=i.length:!1}project(e){const n=this.getLUT(),r=n.length-1,i=Z.closest(n,e),a=i.mpos,u=(a-1)/r,o=(a+1)/r,c=.1/r;let s=i.mdist,l=u,f=l,d;s+=1;for(let g;l<o+c;l+=c)d=this.compute(l),g=Z.dist(e,d),g<s&&(s=g,f=l);return f=f<0?0:f>1?1:f,d=this.compute(f),d.t=f,d.d=s,d}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?Z.computeWithRatios(e,this.points,this.ratios,this._3d):Z.compute(e,this.points,this._3d,this.ratios)}raise(){const e=this.points,n=[e[0]],r=e.length;for(let i=1,a,u;i<r;i++)a=e[i],u=e[i-1],n[i]={x:(r-i)/r*a.x+i/r*u.x,y:(r-i)/r*a.y+i/r*u.y};return n[r]=e[r-1],new We(n)}derivative(e){return Z.compute(e,this.dpoints[0],this._3d)}dderivative(e){return Z.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new We(Z.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return Z.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return Z.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){const n=this.derivative(e),r=Ur(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/r,y:n.x/r}}__normal3(e){const n=this.derivative(e),r=this.derivative(e+.01),i=Ur(n.x*n.x+n.y*n.y+n.z*n.z),a=Ur(r.x*r.x+r.y*r.y+r.z*r.z);n.x/=i,n.y/=i,n.z/=i,r.x/=a,r.y/=a,r.z/=a;const u={x:r.y*n.z-r.z*n.y,y:r.z*n.x-r.x*n.z,z:r.x*n.y-r.y*n.x},o=Ur(u.x*u.x+u.y*u.y+u.z*u.z);u.x/=o,u.y/=o,u.z/=o;const c=[u.x*u.x,u.x*u.y-u.z,u.x*u.z+u.y,u.x*u.y+u.z,u.y*u.y,u.y*u.z-u.x,u.x*u.z-u.y,u.y*u.z+u.x,u.z*u.z];return{t:e,x:c[0]*n.x+c[1]*n.y+c[2]*n.z,y:c[3]*n.x+c[4]*n.y+c[5]*n.z,z:c[6]*n.x+c[7]*n.y+c[8]*n.z}}hull(e){let n=this.points,r=[],i=[],a=0;for(i[a++]=n[0],i[a++]=n[1],i[a++]=n[2],this.order===3&&(i[a++]=n[3]);n.length>1;){r=[];for(let u=0,o,c=n.length-1;u<c;u++)o=Z.lerp(e,n[u],n[u+1]),i[a++]=o,r.push(o);n=r}return i}split(e,n){if(e===0&&!!n)return this.split(n).left;if(n===1)return this.split(e).right;const r=this.hull(e),i={left:this.order===2?new We([r[0],r[3],r[5]]):new We([r[0],r[4],r[7],r[9]]),right:this.order===2?new We([r[5],r[4],r[2]]):new We([r[9],r[8],r[6],r[3]]),span:r};return i.left._t1=Z.map(0,0,1,this._t1,this._t2),i.left._t2=Z.map(e,0,1,this._t1,this._t2),i.right._t1=Z.map(e,0,1,this._t1,this._t2),i.right._t2=Z.map(1,0,1,this._t1,this._t2),n?(n=Z.map(n,e,1,0,1),i.right.split(n).left):i}extrema(){const e={};let n=[];return this.dims.forEach(function(r){let i=function(u){return u[r]},a=this.dpoints[0].map(i);e[r]=Z.droots(a),this.order===3&&(a=this.dpoints[1].map(i),e[r]=e[r].concat(Z.droots(a))),e[r]=e[r].filter(function(u){return u>=0&&u<=1}),n=n.concat(e[r].sort(Z.numberSort))}.bind(this)),e.values=n.sort(Z.numberSort).filter(function(r,i){return n.indexOf(r)===i}),e}bbox(){const e=this.extrema(),n={};return this.dims.forEach(function(r){n[r]=Z.getminmax(this,r,e[r])}.bind(this)),n}overlaps(e){const n=this.bbox(),r=e.bbox();return Z.bboxoverlap(n,r)}offset(e,n){if(typeof n<"u"){const r=this.get(e),i=this.normal(e),a={c:r,n:i,x:r.x+i.x*n,y:r.y+i.y*n};return this._3d&&(a.z=r.z+i.z*n),a}if(this._linear){const r=this.normal(0),i=this.points.map(function(a){const u={x:a.x+e*r.x,y:a.y+e*r.y};return a.z&&r.z&&(u.z=a.z+e*r.z),u});return[new We(i)]}return this.reduce().map(function(r){return r._linear?r.offset(e)[0]:r.scale(e)})}simple(){if(this.order===3){const i=Z.angle(this.points[0],this.points[3],this.points[1]),a=Z.angle(this.points[0],this.points[3],this.points[2]);if(i>0&&a<0||i<0&&a>0)return!1}const e=this.normal(0),n=this.normal(1);let r=e.x*n.x+e.y*n.y;return this._3d&&(r+=e.z*n.z),jr(zm(r))<Wm/3}reduce(){let e,n=0,r=0,i=.01,a,u=[],o=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),n=c[0],e=1;e<c.length;e++)r=c[e],a=this.split(n,r),a._t1=n,a._t2=r,u.push(a),n=r;return u.forEach(function(s){for(n=0,r=0;r<=1;)for(r=n+i;r<=1+i;r+=i)if(a=s.split(n,r),!a.simple()){if(r-=i,jr(n-r)<i)return[];a=s.split(n,r),a._t1=Z.map(n,0,1,s._t1,s._t2),a._t2=Z.map(r,0,1,s._t1,s._t2),o.push(a),n=r;break}n<1&&(a=s.split(n,1),a._t1=Z.map(n,0,1,s._t1,s._t2),a._t2=s._t2,o.push(a))}),o}translate(e,n,r){r=typeof r=="number"?r:n;const i=this.order;let a=this.points.map((u,o)=>(1-o/i)*n+o/i*r);return new We(this.points.map((u,o)=>({x:u.x+e.x*a[o],y:u.y+e.y*a[o]})))}scale(e){const n=this.order;let r=!1;if(typeof e=="function"&&(r=e),r&&n===2)return this.raise().scale(r);const i=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):e,r?r(1):e);const u=r?r(0):e,o=r?r(1):e,c=[this.offset(0,10),this.offset(1,10)],s=[],l=Z.lli4(c[0],c[0].c,c[1],c[1].c);if(!l)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(f){const d=s[f*n]=Z.copy(a[f*n]);d.x+=(f?o:u)*c[f].n.x,d.y+=(f?o:u)*c[f].n.y}),r?([0,1].forEach(function(f){if(!(n===2&&!!f)){var d=a[f+1],g={x:d.x-l.x,y:d.y-l.y},M=r?r((f+1)/n):e;r&&!i&&(M=-M);var P=Ur(g.x*g.x+g.y*g.y);g.x/=P,g.y/=P,s[f+1]={x:d.x+M*g.x,y:d.y+M*g.y}}}),new We(s)):([0,1].forEach(f=>{if(n===2&&!!f)return;const d=s[f*n],g=this.derivative(f),M={x:d.x+g.x,y:d.y+g.y};s[f+1]=Z.lli4(d,M,l,a[f+1])}),new We(s))}outline(e,n,r,i){if(n=n===void 0?e:n,this._linear){const k=this.normal(0),C=this.points[0],S=this.points[this.points.length-1];let B,U,ae;r===void 0&&(r=e,i=n),B={x:C.x+k.x*e,y:C.y+k.y*e},ae={x:S.x+k.x*r,y:S.y+k.y*r},U={x:(B.x+ae.x)/2,y:(B.y+ae.y)/2};const ee=[B,U,ae];B={x:C.x-k.x*n,y:C.y-k.y*n},ae={x:S.x-k.x*i,y:S.y-k.y*i},U={x:(B.x+ae.x)/2,y:(B.y+ae.y)/2};const pe=[ae,U,B],be=Z.makeline(pe[2],ee[0]),T=Z.makeline(ee[2],pe[0]),$=[be,new We(ee),T,new We(pe)];return new _i($)}const a=this.reduce(),u=a.length,o=[];let c=[],s,l=0,f=this.length();const d=typeof r<"u"&&typeof i<"u";function g(k,C,S,B,U){return function(ae){const ee=B/S,pe=(B+U)/S,be=C-k;return Z.map(ae,0,1,k+ee*be,k+pe*be)}}a.forEach(function(k){const C=k.length();d?(o.push(k.scale(g(e,r,f,l,C))),c.push(k.scale(g(-n,-i,f,l,C)))):(o.push(k.scale(e)),c.push(k.scale(-n))),l+=C}),c=c.map(function(k){return s=k.points,s[3]?k.points=[s[3],s[2],s[1],s[0]]:k.points=[s[2],s[1],s[0]],k}).reverse();const M=o[0].points[0],P=o[u-1].points[o[u-1].points.length-1],q=c[u-1].points[c[u-1].points.length-1],L=c[0].points[0],A=Z.makeline(q,M),_=Z.makeline(P,L),W=[A].concat(o).concat([_]).concat(c);return new _i(W)}outlineshapes(e,n,r){n=n||e;const i=this.outline(e,n).curves,a=[];for(let u=1,o=i.length;u<o/2;u++){const c=Z.makeshape(i[u],i[o-u],r);c.startcap.virtual=u>1,c.endcap.virtual=u<o/2-1,a.push(c)}return a}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof We&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){const n=hc(e.p1.x,e.p2.x),r=hc(e.p1.y,e.p2.y),i=dc(e.p1.x,e.p2.x),a=dc(e.p1.y,e.p2.y);return Z.roots(this.points,e).filter(u=>{var o=this.get(u);return Z.between(o.x,n,i)&&Z.between(o.y,r,a)})}selfintersects(e){const n=this.reduce(),r=n.length-2,i=[];for(let a=0,u,o,c;a<r;a++)o=n.slice(a,a+1),c=n.slice(a+2),u=this.curveintersects(o,c,e),i.push(...u);return i}curveintersects(e,n,r){const i=[];e.forEach(function(u){n.forEach(function(o){u.overlaps(o)&&i.push({left:u,right:o})})});let a=[];return i.forEach(function(u){const o=Z.pairiteration(u.left,u.right,r);o.length>0&&(a=a.concat(o))}),a}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,r,i){const a=(i-r)/4,u=this.get(r+a),o=this.get(i-a),c=Z.dist(e,n),s=Z.dist(e,u),l=Z.dist(e,o);return jr(s-c)+jr(l-c)}_iterate(e,n){let r=0,i=1,a;do{a=0,i=1;let u=this.get(r),o,c,s,l,f=!1,d=!1,g,M=i,P=1;do if(d=f,l=s,M=(r+i)/2,o=this.get(M),c=this.get(i),s=Z.getccenter(u,o,c),s.interval={start:r,end:i},f=this._error(s,u,r,i)<=e,g=d&&!f,g||(P=i),f){if(i>=1){if(s.interval.end=P=1,l=s,i>1){let L={x:s.x+s.r*Pm(s.e),y:s.y+s.r*Nm(s.e)};s.e+=Z.angle({x:s.x,y:s.y},L,this.get(1))}break}i=i+(i-r)/2}else i=M;while(!g&&a++<100);if(a>=100)break;l=l||s,n.push(l),r=P}while(i<1);return n}},oa=e=>e.quadratic!==void 0,io=e=>e.cubic1!==void 0&&e.cubic2!==void 0,Lm=(e,n,r=0)=>wr(e,n,r),wr=(e,n,r=0)=>{if(isNaN(r))throw Error("bend is NaN");if(r<-1||r>1)throw Error("Expects bend range of -1 to 1");const i=Bt.interpolate(.5,e,n);let a=i;n.y<e.y?a=r>0?{x:Math.min(e.x,n.x),y:Math.min(e.y,n.y)}:{x:Math.max(e.x,n.x),y:Math.max(e.y,n.y)}:a=r>0?{x:Math.max(e.x,n.x),y:Math.min(e.y,n.y)}:{x:Math.min(e.x,n.x),y:Math.max(e.y,n.y)};const u=Bt.interpolate(Math.abs(r),i,a);return Nl(e,n,u)},Om=(e,n,r,i)=>{const a=wr(e,n,r);return new We(a.a,a.quadratic,a.b).compute(i)},Pl=(e,n,r)=>[`M ${e.x} ${e.y} Q ${r.x} ${r.y} ${n.x} ${n.y}`],Mi=e=>{if(io(e))return Tm(e);if(oa(e))return $m(e);throw new Error("Unknown bezier type")},km=(e,n,r,i)=>({a:Object.freeze(e),b:Object.freeze(n),cubic1:Object.freeze(r),cubic2:Object.freeze(i)}),Tm=e=>{const{a:n,cubic1:r,cubic2:i,b:a}=e,u=new We(n,r,i,a);return Object.freeze({...e,length:()=>u.length(),interpolate:o=>u.compute(o),bbox:()=>{const{x:o,y:c}=u.bbox(),s=o.size,l=c.size;if(s===void 0)throw new Error("x.size not present on calculated bbox");if(l===void 0)throw new Error("x.size not present on calculated bbox");return Be.fromTopLeft({x:o.min,y:c.min},s,l)},toString:()=>u.toString(),toSvgString:()=>["brrup"],kind:"bezier/cubic"})},Nl=(e,n,r)=>({a:Object.freeze(e),b:Object.freeze(n),quadratic:Object.freeze(r)}),$m=e=>{const{a:n,b:r,quadratic:i}=e,a=new We(n,i,r);return Object.freeze({...e,length:()=>a.length(),interpolate:u=>a.compute(u),bbox:()=>{const{x:u,y:o}=a.bbox(),c=u.size,s=o.size;if(c===void 0)throw new Error("x.size not present on calculated bbox");if(s===void 0)throw new Error("x.size not present on calculated bbox");return Be.fromTopLeft({x:u.min,y:o.min},c,s)},toString:()=>a.toString(),toSvgString:()=>Pl(n,r,i),kind:"bezier/quadratic"})},En={};ue(En,{area:()=>jm,bbox:()=>Tl,center:()=>qm,circumference:()=>kl,distanceCenter:()=>co,distanceFromExterior:()=>Vm,interpolate:()=>Ll,intersectionLine:()=>Km,intersections:()=>ql,isCircle:()=>ao,isCirclePositioned:()=>uo,isContainedBy:()=>$l,isEqual:()=>oo,isIntersecting:()=>Um,isPositioned:()=>Vt,length:()=>Ol,point:()=>Wl,toPath:()=>Hm,toSvg:()=>jl});var zl=Math.PI*2,Vt=e=>e.x!==void 0&&e.y!==void 0,ao=e=>e.radius!==void 0,uo=e=>ao(e)&&Vt(e),Wl=(e,n,r)=>(r===void 0&&(Vt(e)?r=e:r={x:0,y:0}),{x:Math.cos(-n)*e.radius+r.x,y:Math.sin(-n)*e.radius+r.y}),ca=(e,n="circle")=>{if(Vt(e)&&_e(e,"circle"),Number.isNaN(e.radius))throw new Error(`${n}.radius is NaN`);if(e.radius<=0)throw new Error(`${n}.radius must be greater than zero`)},fu=(e,n="circle")=>{if(!Vt(e))throw new Error("Expected a positioned circle with x,y");return ca(e,n)},qm=e=>Vt(e)?Object.freeze({x:e.x,y:e.y}):Object.freeze({x:e.radius,y:e.radius}),Ll=(e,n)=>Wl(e,n*zl),Ol=e=>kl(e),kl=e=>(ca(e),zl*e.radius),jm=e=>(ca(e),Math.PI*e.radius*e.radius),Tl=e=>Vt(e)?Be.fromCenter(e,e.radius*2,e.radius*2):{width:e.radius*2,height:e.radius*2},$l=(e,n)=>co(e,n)<Math.abs(e.radius-n.radius),Um=(e,n)=>oo(e,n)||$l(e,n)?!0:ql(e,n).length===2,ql=(e,n)=>{const r=V.subtract(n,e),i=Math.sqrt(r.y*r.y+r.x*r.x);if(i>e.radius+n.radius)return[];if(i<Math.abs(e.radius-n.radius))return[];if(oo(e,n))return[];const a=(e.radius*e.radius-n.radius*n.radius+i*i)/(2*i),u={x:e.x+r.x*a/i,y:e.y+r.y*a/i},o=Math.sqrt(e.radius*e.radius-a*a),c={x:-r.y*(o/i),y:r.x*(o/i)};return[V.sum(u,c),V.subtract(u,c)]},oo=(e,n)=>e.radius!==n.radius?!1:Vt(e)&&Vt(n)?!(e.x!==n.x||e.y!==n.y||e.z!==n.z):(!Vt(e)&&!Vt(n),!1),co=(e,n)=>(fu(e,"a"),uo(n)&&fu(n,"b"),V.distance(e,n)),Vm=(e,n)=>{if(fu(e,"a"),uo(n))return Math.max(0,co(e,n)-e.radius-n.radius);if(V.isPoint(n)){const r=V.distance(e,n);return r<e.radius?0:r}else throw new Error("Second parameter invalid type")},jl=(e,n,r)=>{if(ao(e)){if(r!==void 0)return $a(e.radius,r,n);if(Vt(e))return $a(e.radius,e,n);throw new Error("origin parameter needed for non-positioned circle")}else{if(r!==void 0)return $a(e,r,n);throw new Error("origin parameter needed")}},$a=(e,n,r)=>{const{x:i,y:a}=n,u=r?"1":"0";return`
    M ${i}, ${a}
    m -${e}, 0
    a ${e},${e} 0 1,${u} ${e*2},0
    a ${e},${e} 0 1,${u} -${e*2},0
  `.split(`
`)},Hm=e=>(ca(e),Object.freeze({...e,interpolate:n=>Ll(e,n),bbox:()=>Tl(e),length:()=>Ol(e),toSvgString:(n=!0)=>jl(e,n),kind:"circular"})),Km=(e,n)=>{const r={x:n.b.x-n.a.x,y:n.b.y-n.a.y},i={x:n.a.x-e.x,y:n.a.y-e.y},a=(r.x*i.x+r.y*i.y)*-2,u=2*(r.x*r.x+r.y*r.y),o=Math.sqrt(a*a-2*u*(i.x*i.x+i.y*i.y-e.radius*e.radius));if(isNaN(o))return[];const c=(a-o)/u,s=(a+o)/u,l=[];return c<=1&&c>=0&&l.push({x:n.a.x+r.x*c,y:n.a.y+r.y*c}),s<=1&&s>=0&&l.push({x:n.a.x+r.x*s,y:n.a.y+r.y*s}),l},so={};ue(so,{bbox:()=>Vl,computeDimensions:()=>lo,fromPaths:()=>Jl,guardContinuous:()=>Kl,interpolate:()=>Ul,setSegment:()=>Gm,toString:()=>Hl,toSvgString:()=>Gl});var Gm=(e,n,r)=>{const i=[...e.segments];return i[n]=r,Jl(...i)},Ul=(e,n,r,i)=>{i===void 0&&(i=lo(e));const a=n*(r?i.totalWidth:i.totalLength);let u=0;const o=r?i.widths:i.lengths;for(let c=0;c<o.length;c++)if(u+o[c]>=a){let l=(a-u)/o[c];return l>1&&(l=1),e[c].interpolate(l)}else u+=o[c];return{x:0,y:0}},lo=e=>{const n=e.map(u=>u.bbox().width),r=e.map(u=>u.length());let i=0,a=0;for(let u=0;u<r.length;u++)i+=r[u];for(let u=0;u<n.length;u++)a+=n[u];return{totalLength:i,totalWidth:a,widths:n,lengths:r}},Vl=e=>{const r=e.map(i=>i.bbox()).map(i=>Be.corners(i)).flat();return V.bbox(...r)},Hl=e=>e.map(n=>n.toString()).join(", "),Kl=e=>{let n=Dr.getEnd(e[0]);for(let r=1;r<e.length;r++){const i=Dr.getStart(e[r]);if(!V.isEqual(i,n))throw new Error("Path index "+r+" does not start at prior path end. Start: "+i.x+","+i.y+" expected: "+n.x+","+n.y);n=Dr.getEnd(e[r])}},Gl=e=>e.flatMap(n=>n.toSvgString()),Jl=(...e)=>{Kl(e);const n=lo(e);return Object.freeze({segments:e,length:()=>n.totalLength,interpolate:(r,i=!1)=>Ul(e,r,i,n),bbox:()=>Vl(e),toString:()=>Hl(e),toSvgString:()=>Gl(e),kind:"compound"})},fo={};ue(fo,{allDirections:()=>ho,cellAtPoint:()=>Qm,cellEquals:()=>Xl,cellKeyString:()=>Yl,cellMiddle:()=>xm,cells:()=>mo,crossDirections:()=>Ql,getLine:()=>eg,getVectorFromCardinal:()=>vo,guardCell:()=>fn,inside:()=>Zl,isEqual:()=>Xm,neighbours:()=>xl,offset:()=>yo,offsetCardinals:()=>tg,rectangleForCell:()=>Zm,rows:()=>fg,simpleLine:()=>ng,visitFor:()=>sg,visitor:()=>cr,visitorBreadth:()=>ag,visitorColumn:()=>lg,visitorDepth:()=>ig,visitorRandom:()=>og,visitorRandomContiguous:()=>ug,visitorRow:()=>cg});var Jm=e=>e===void 0?!1:"x"in e&&"y"in e,Ym=e=>!(e===void 0||e[1]===void 0),Xm=(e,n)=>{if("rows"in e&&"cols"in e)if("rows"in n&&"cols"in n){if(e.rows!==n.rows||e.cols!==n.cols)return!1}else return!1;if("size"in e)if("size"in n){if(e.size!==n.size)return!1}else return!1;return!0},Yl=e=>`Cell{${e.x},${e.y}}`,Xl=(e,n)=>n===void 0||e===void 0?!1:e.x===n.x&&e.y===n.y,fn=(e,n="Param",r)=>{if(e===void 0)throw new Error(n+" is undefined. Expecting {x,y}");if(e.x===void 0)throw new Error(n+".x is undefined");if(e.y===void 0)throw new Error(n+".y is undefined");if(!Number.isInteger(e.x))throw new Error(n+".x is non-integer");if(!Number.isInteger(e.y))throw new Error(n+".y is non-integer");if(r!==void 0&&!Zl(r,e))throw new Error(`${n} is outside of grid. Cell: ${e.x},${e.y} Grid: ${r.cols}, ${r.rows}`)},sa=(e,n="Param")=>{if(e===void 0)throw new Error(`${n} is undefined. Expecting grid.`);if(!("rows"in e))throw new Error(`${n}.rows is undefined`);if(!("cols"in e))throw new Error(`${n}.cols is undefined`);if(!Number.isInteger(e.rows))throw new Error(`${n}.rows is not an integer`);if(!Number.isInteger(e.cols))throw new Error(`${n}.cols is not an integer`)},Zl=(e,n)=>!(n.x<0||n.y<0||n.x>=e.cols||n.y>=e.rows),Zm=(e,n)=>{fn(e);const r=n.size,i=e.x*r,a=e.y*r;return Be.fromTopLeft({x:i,y:a},r,r)},Qm=(e,n)=>{const r=n.size;if(e.x<0||e.y<0)return;const i=Math.floor(e.x/r),a=Math.floor(e.y/r);if(!(i>=n.cols)&&!(a>=n.rows))return{x:i,y:a}},ho=Object.freeze(["n","ne","nw","e","s","se","sw","w"]),Ql=Object.freeze(["n","e","s","w"]),xl=(e,n,r="undefined",i)=>{const a=i??ho,u=a.map(o=>yo(e,n,vo(o),r));return ku(a,u)},xm=(e,n)=>{fn(e);const r=n.size,i=e.x*r,a=e.y*r;return Object.freeze({x:i+r/2,y:a+r/2})},eg=(e,n)=>{fn(e),fn(n);let r=e.x,i=e.y;const a=Math.abs(n.x-r),u=Math.abs(n.y-i),o=r<n.x?1:-1,c=i<n.y?1:-1;let s=a-u;const l=[];for(;l.push(Object.freeze({x:r,y:i})),!(r===n.x&&i===n.y);){const f=2*s;f>-u&&(s-=u,r+=o),f<a&&(s+=a,i+=c)}return l},tg=(e,n,r,i="stop")=>{sa(e,"grid"),fn(n,"start"),Ue(r,"aboveZero","steps");const a=ho,u=a.map(c=>vo(c,r)),o=a.map((c,s)=>yo(e,n,u[s],i));return ku(a,o)},vo=(e,n=1)=>{let r;switch(e){case"n":r={x:0,y:-1*n};break;case"ne":r={x:1*n,y:-1*n};break;case"e":r={x:1*n,y:0};break;case"se":r={x:1*n,y:1*n};break;case"s":r={x:0,y:1*n};break;case"sw":r={x:-1*n,y:1*n};break;case"w":r={x:-1*n,y:0};break;case"nw":r={x:-1*n,y:-1*n};break;default:r={x:0,y:0}}return Object.freeze(r)},ng=function(e,n,r=!1){const i=[];if(e.x===n.x){const a=r?n.y+1:n.y;for(let u=e.y;u<a;u++)i.push({x:e.x,y:u})}else if(e.y===n.y){const a=r?n.x+1:n.x;for(let u=e.x;u<a;u++)i.push({x:u,y:e.y})}else throw new Error(`Only does vertical and horizontal: ${e.x},${e.y} - ${n.x},${n.y}`);return i},yo=function(e,n,r,i="undefined"){fn(n,"start",e),fn(r),sa(e,"grid");let a=n.x,u=n.y;switch(i){case"wrap":a+=r.x%e.cols,u+=r.y%e.rows,a<0?a=e.cols+a:a>=e.cols&&(a-=e.cols),u<0?u=e.rows+u:u>=e.rows&&(u-=e.rows);break;case"stop":a+=r.x,u+=r.y,a=tu(a,e.cols),u=tu(u,e.rows);break;case"undefined":if(a+=r.x,u+=r.y,a<0||u<0||a>=e.cols||u>=e.rows)return;break;case"unbounded":a+=r.x,u+=r.y;break;default:throw new Error(`Unknown BoundsLogic case ${i}`)}return Object.freeze({x:a,y:u})},rg=(e,n,r,i)=>{const a=xl(e,n,i,r);return Object.entries(a).filter(Ym)},cr=function*(e,n,r,i={}){sa(n,"grid"),fn(r,"start",n);const a=i.visited??Su(l=>Yl(l)),u=e.options?e.options:(l,f)=>rg(l,f,Ql,"undefined");if(!Jm(r))throw new Error("'start' parameter is undefined or not a cell");let o=[r],c=[],s=null;for(;o.length>0;){if(s===null){const l=o.pop();if(l===void 0)break;s=l}if(!a.has(s)){a.add(s),yield s;const l=u(n,s).filter(f=>!a.has(f[1]));l.length===0?s!==null&&(o=o.filter(f=>Xl(f,s))):c.push(...l)}if(c=c.filter(l=>!a.has(l[1])),c.length===0)s=null;else{const l=e.select(c);l!==void 0&&(o.push(l[1]),s=l[1])}}},ig=(e,n,r={})=>cr({select:i=>i[i.length-1]},e,n,r),ag=(e,n,r={})=>cr({select:i=>i[0]},e,n,r),ef=e=>nc(e),ug=(e,n,r={})=>cr({select:ef},e,n,r),og=(e,n,r={})=>cr({options:(i,a)=>{const u=[];for(const o of mo(i,a))u.push(["n",o]);return u},select:ef},e,n,r),cg=(e,n,r={})=>{const{reversed:i=!1}=r;return cr({select:c=>c.find(s=>s[0]===(i?"w":"e")),options:(c,s)=>(i?s.x>0?s={x:s.x-1,y:s.y}:s.y>0?s={x:c.cols-1,y:s.y-1}:s={x:c.cols-1,y:c.rows-1}:s.x<c.rows-1?s={x:s.x+1,y:s.y}:s.y<c.rows-1?s={x:0,y:s.y+1}:s={x:0,y:0},[[i?"w":"e",s]])},e,n,r)},sg=(e,n,r,i)=>{Ue(r,"","steps");const a={reversed:r<0};r=Math.abs(r);let u=n,o=i(e,n,a);o.next();let c=0;for(;c<r;){c++;const{value:s}=o.next();if(s)u=s,a.debug&&console.log(`stepsMade: ${c} cell: ${u.x}, ${u.y} reverse: ${a.reversed}`);else if(r>=e.cols*e.rows)r-=e.cols*e.rows,c=0,o=i(e,n,a),o.next(),u=n,a.debug&&console.log(`resetting visitor to ${r}`);else throw new Error("Value not received by visitor")}return u},lg=(e,n,r={})=>{const{reversed:i=!1}=r;return cr({select:u=>u.find(o=>o[0]===(i?"n":"s")),options:(u,o)=>(i?o.y>0?o={x:o.x,y:o.y-1}:o.x===0?o={x:u.cols-1,y:u.rows-1}:o={x:o.x-1,y:u.rows-1}:o.y<u.rows-1?o={x:o.x,y:o.y+1}:o.x<u.cols-1?o={x:o.x+1,y:0}:o={x:0,y:0},[[i?"n":"s",o]])},e,n,r)},fg=function*(e,n={x:0,y:0}){let r=n.y,i=[];for(const a of mo(e,n))a.y!==r?(yield i,i=[a],r=a.y):i.push(a);i.length>0&&(yield i)},mo=function*(e,n={x:0,y:0}){sa(e,"grid"),fn(n,"start",e);let{x:r,y:i}=n,a=!0;do yield{x:r,y:i},r++,r===e.cols&&(i++,r=0),i===e.rows&&(i=0,r=0),r===n.x&&i===n.y&&(a=!1);while(a)},Dr={};ue(Dr,{getEnd:()=>dg,getStart:()=>hg});var hg=function(e){if(ci.isQuadraticBezier(e))return e.a;if(Bt.isLine(e))return e.a;throw new Error(`Unknown path type ${JSON.stringify(e)}`)},dg=function(e){if(ci.isQuadraticBezier(e))return e.b;if(Bt.isLine(e))return e.b;throw new Error(`Unknown path type ${JSON.stringify(e)}`)},Be={};ue(Be,{area:()=>Rg,center:()=>uf,corners:()=>go,distanceFromCenter:()=>Cg,distanceFromExterior:()=>Ag,edges:()=>of,empty:()=>vg,emptyPositioned:()=>tf,fromCenter:()=>bg,fromElement:()=>mg,fromNumbers:()=>pg,fromTopLeft:()=>Sg,getEdgeX:()=>vu,getEdgeY:()=>yu,guard:()=>dn,intersectsPoint:()=>Ui,isEmpty:()=>yg,isEqual:()=>rf,isEqualSize:()=>gg,isPlaceholder:()=>ei,isPositioned:()=>Ht,isRect:()=>si,isRectPositioned:()=>du,lengths:()=>Ig,maxFromCorners:()=>Fg,multiply:()=>Mg,normaliseByRect:()=>_g,perimeter:()=>Bg,placeholder:()=>nf,placeholderPositioned:()=>hu,subtract:()=>Dg,sum:()=>Eg,toArray:()=>wg});var vg=Object.freeze({width:0,height:0}),tf=Object.freeze({x:0,y:0,width:0,height:0}),nf=Object.freeze({width:Number.NaN,height:Number.NaN}),hu=Object.freeze({x:Number.NaN,y:Number.NaN,width:Number.NaN,height:Number.NaN}),yg=e=>e.width===0&&e.height===0,ei=e=>Number.isNaN(e.width)&&Number.isNaN(e.height),Ht=e=>e.x!==void 0&&e.y!==void 0,si=e=>!(e===void 0||e.width===void 0||e.height===void 0),du=e=>si(e)&&Ht(e),mg=e=>({width:e.clientWidth,height:e.clientHeight}),gg=(e,n)=>{if(e===void 0)throw new Error("a undefined");if(n===void 0)throw new Error("b undefined");return e.width===n.width&&e.height===n.height};function pg(e,n,r,i){if(r===void 0||i===void 0){if(typeof e!="number")throw new Error("width is not an number");if(typeof n!="number")throw new Error("height is not an number");return Object.freeze({width:e,height:n})}if(typeof e!="number")throw new Error("x is not an number");if(typeof n!="number")throw new Error("y is not an number");if(typeof r!="number")throw new Error("width is not an number");if(typeof i!="number")throw new Error("height is not an number");return Object.freeze({x:e,y:n,width:r,height:i})}function wg(e){if(Ht(e))return[e.x,e.y,e.width,e.height];if(si(e))return[e.width,e.height];throw new Error(`rect param is not a rectangle. Got: ${JSON.stringify(e)}`)}var rf=(e,n)=>Ht(e)&&Ht(n)?V.isEqual(e,n)?e.width===n.width&&e.height===n.height:!1:!Ht(e)&&!Ht(n)?e.width===n.width&&e.height===n.height:!1;function Dg(e,n,r){if(e===void 0)throw new Error("First parameter undefined");if(typeof n=="number"){const i=r===void 0?0:r;return Object.freeze({...e,width:e.width-n,height:e.height-i})}else return Object.freeze({...e,width:e.width-n.width,height:e.height-n.height})}function Eg(e,n,r){if(e===void 0)throw new Error("First parameter undefined");if(typeof n=="number"){const i=r===void 0?0:r;return Object.freeze({...e,width:e.width+n,height:e.height+i})}else return Object.freeze({...e,width:e.width+n.width,height:e.height+n.height})}function Ui(e,n,r){dn(e,"rect");let i=0,a=0;if(typeof n=="number"){if(r===void 0)throw new Error("x and y coordinate needed");i=n,a=r}else i=n.x,a=n.y;if(Ht(e)){if(i-e.x>e.width||i<e.x||a-e.y>e.height||a<e.y)return!1}else if(i>e.width||i<0||a>e.height||a<0)return!1;return!0}var bg=(e,n,r)=>{V.guard(e,"origin"),Ir(n,"width"),Ir(r,"height");const i=n/2,a=r/2;return{x:e.x-i,y:e.y-a,width:n,height:r}},Ag=(e,n)=>{if(af(e,"rect"),V.guard(n,"pt"),Ui(e,n))return 0;const r=Math.max(e.x-n.x,0,n.x-e.x+e.width),i=Math.max(e.y-n.y,0,n.y-e.y+e.height);return Math.sqrt(r*r+i*i)},Cg=(e,n)=>V.distance(uf(e),n),Fg=(e,n,r,i)=>{if(e.y>r.y)throw new Error("topLeft.y greater than bottomRight.y");if(e.y>i.y)throw new Error("topLeft.y greater than bottomLeft.y");const a=n.x-e.x,u=r.x-i.x,o=Math.abs(i.y-e.y),c=Math.abs(r.y-n.y);return{x:Math.min(e.x,i.x),y:Math.min(n.y,e.y),width:Math.max(a,u),height:Math.max(o,c)}},Ir=(e,n="Dimension")=>{if(e===void 0)throw Error(`${n} is undefined`);if(isNaN(e))throw Error(`${n} is NaN`);if(e<0)throw Error(`${n} cannot be negative`)},dn=(e,n="rect")=>{if(e===void 0)throw Error("{$name} undefined");Ht(e)&&V.guard(e,n),Ir(e.width,n+".width"),Ir(e.height,n+".height")},af=(e,n="rect")=>{if(!Ht(e))throw new Error(`Expected ${n} to have x,y`);dn(e,n)},Sg=(e,n,r)=>(Ir(n,"width"),Ir(r,"height"),V.guard(e,"origin"),{x:e.x,y:e.y,width:n,height:r}),go=(e,n)=>{if(dn(e),n===void 0&&V.isPoint(e))n=e;else if(n===void 0)throw new Error("Unpositioned rect needs origin param");return[{x:n.x,y:n.y},{x:n.x+e.width,y:n.y},{x:n.x+e.width,y:n.y+e.height},{x:n.x,y:n.y+e.height}]},vu=(e,n)=>{switch(dn(e),n){case"top":return V.isPoint(e)?e.x:0;case"bottom":return V.isPoint(e)?e.x:0;case"left":return V.isPoint(e)?e.y:0;case"right":return V.isPoint(e)?e.x+e.width:e.width}},yu=(e,n)=>{switch(dn(e),n){case"top":return V.isPoint(e)?e.y:0;case"bottom":return V.isPoint(e)?e.y+e.height:e.height;case"left":return V.isPoint(e)?e.y:0;case"right":return V.isPoint(e)?e.y:0}},_g=(e,n,r)=>{let i;if(r===void 0)if(si(n))r=n.height,i=n.width;else throw new Error("Expects rectangle or width and height parameters for normaliseBy");else if(typeof n=="number")i=n;else throw new Error("Expects rectangle or width and height parameters for normaliseBy");return Ht(e)?Object.freeze({x:e.x/i,y:e.y/r,width:e.width/i,height:e.height/r}):Object.freeze({width:e.width/i,height:e.height/r})};function Mg(e,n,r){if(dn(e,"a"),si(n))return du(e)?{...e,x:e.x*n.width,y:e.y*n.height,width:e.width*n.width,height:e.width*n.height}:{...e,width:e.width*n.width,height:e.width*n.height};if(typeof n!="number")throw new Error(`Expected second parameter of type Rect or number. Got ${JSON.stringify(n)}`);return r===void 0&&(r=n),du(e)?{...e,x:e.x*n,y:e.y*r,width:e.width*n,height:e.width*r}:{...e,width:e.width*n,height:e.width*r}}var uf=(e,n)=>(dn(e),n===void 0&&V.isPoint(e)?n=e:n===void 0&&(n={x:0,y:0}),Object.freeze({x:n.x+e.width/2,y:n.y+e.height/2})),Ig=e=>(af(e,"rect"),of(e).map(n=>Bt.length(n))),of=(e,n)=>{const r=go(e,n);return Bt.joinPointsToLines(...r,r[0])},Bg=e=>(dn(e),e.height+e.height+e.width+e.width),Rg=e=>(dn(e),e.height*e.width),po={};ue(po,{fromDegrees:()=>Pg});var Pg=(e,n,r=0,i=0,a=360)=>({radiusX:e,radiusY:n,rotation:zn(r),startAngle:zn(i),endAngle:zn(a)}),ft={};ue(ft,{clampMagnitude:()=>Gg,divide:()=>Kg,dotProduct:()=>kg,fromCartesian:()=>zg,guard:()=>Ot,invert:()=>Tg,isAntiParallel:()=>jg,isCoord:()=>cf,isOpposite:()=>$g,isParallel:()=>qg,multiply:()=>Hg,normalise:()=>Og,rotate:()=>Lg,rotateDegrees:()=>Ug,spiral:()=>Wg,spiralRaw:()=>Vg,toCartesian:()=>Ii,toPoint:()=>Yg,toString:()=>Jg});var Ng=Object.freeze({x:0,y:0}),cf=e=>!(e.distance===void 0||e.angleRadian===void 0),zg=(e,n)=>{e=or(e,n);const r=Math.atan2(e.y,e.x);return Object.freeze({...e,angleRadian:r,distance:Math.sqrt(e.x*e.x+e.y*e.y)})},Ii=(e,n,r)=>{if(cf(e)){if(n===void 0&&(n=Mr),je(n))return vc(e.distance,e.angleRadian,n);throw new Error("Expecting (Coord, Point). Second parameter is not a point")}else if(typeof e=="number"&&typeof n=="number"){if(r===void 0&&(r=Mr),!je(r))throw new Error("Expecting (number, number, Point). Point param wrong type");return vc(e,n,r)}else throw new Error(`Expecting parameters of (number, number). Got: (${typeof e}, ${typeof n}, ${typeof r}). a: ${JSON.stringify(e)}`)};function*Wg(e,n){let r=0;for(;;){const i=e*r++;yield{distance:n*i,angleRadian:i,step:r}}}var Lg=(e,n)=>Object.freeze({...e,angleRadian:e.angleRadian+n}),Og=e=>{if(e.distance===0)throw new Error("Cannot normalise vector of length 0");return Object.freeze({...e,distance:1})},Ot=(e,n="Point")=>{if(e===void 0)throw new Error(`'${n}' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e===null)throw new Error(`'${n}' is null. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e.angleRadian===void 0)throw new Error(`'${n}.angleRadian' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e.distance===void 0)throw new Error(`'${n}.distance' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(typeof e.angleRadian!="number")throw new Error(`'${n}.angleRadian' must be a number. Got ${e.angleRadian}`);if(typeof e.distance!="number")throw new Error(`'${n}.distance' must be a number. Got ${e.distance}`);if(e.angleRadian===null)throw new Error(`'${n}.angleRadian' is null`);if(e.distance===null)throw new Error(`'${n}.distance' is null`);if(Number.isNaN(e.angleRadian))throw new Error(`'${n}.angleRadian' is NaN`);if(Number.isNaN(e.distance))throw new Error(`'${n}.distance' is NaN`)},kg=(e,n)=>(Ot(e,"a"),Ot(n,"b"),e.distance*n.distance*Math.cos(n.angleRadian-e.angleRadian)),Tg=e=>(Ot(e,"c"),Object.freeze({...e,angleRadian:e.angleRadian-Math.PI})),$g=(e,n)=>(Ot(e,"a"),Ot(n,"b"),e.distance!==n.distance?!1:e.angleRadian===-n.angleRadian),qg=(e,n)=>(Ot(e,"a"),Ot(n,"b"),e.angleRadian===n.angleRadian),jg=(e,n)=>(Ot(e,"a"),Ot(n,"b"),e.angleRadian===-n.angleRadian),Ug=(e,n)=>Object.freeze({...e,angleRadian:e.angleRadian+zn(n)}),Vg=(e,n,r)=>{const i=n*e;return Object.freeze({distance:r*i,angleRadian:i})},Hg=(e,n)=>(Ot(e),ie(n,"","amt"),Object.freeze({...e,distance:e.distance*n})),Kg=(e,n)=>(Ot(e),ie(n,"","amt"),Object.freeze({...e,distance:e.distance/n})),Gg=(e,n=1,r=0)=>{let i=e.distance;return i>n&&(i=n),i<r&&(i=r),Object.freeze({...e,distance:i})},vc=(e,n,r=Mr)=>(_e(r),Object.freeze({x:r.x+e*Math.cos(n),y:r.y+e*Math.sin(n)})),Jg=(e,n)=>{if(e===void 0)return"(undefined)";if(e===null)return"(null)";const r=ya(e.angleRadian),i=n?e.distance.toFixed(n):e.distance,a=n?r.toFixed(n):r;return`(${i},${a})`},Yg=(e,n=Ng)=>(Ot(e,"v"),Object.freeze({x:n.x+e.distance*Math.cos(e.angleRadian),y:n.y+e.distance*Math.sin(e.angleRadian)})),wo={};ue(wo,{arrow:()=>Qg,center:()=>Xg,starburst:()=>Zg});var Xg=e=>{if(e===void 0)return Object.freeze({x:.5,y:.5});if(Be.isRect(e))return Be.center(e);if(Zn.isTriangle(e))return Zn.centroid(e);if(En.isCircle(e))return En.center(e);throw new Error(`Unknown shape: ${JSON.stringify(e)}`)},Zg=(e,n=5,r,i={x:0,y:0},a)=>{Ue(n,"positive","points");const u=Math.PI*2/n,o=u/2,c=a?.initialAngleRadian??-Math.PI/2;r===void 0&&(r=e/2);let s=c;const l=[];for(let f=0;f<n;f++){const d=Ii(e,s,i),g=Ii(r,s-o,i),M=Ii(r,s+o,i);l.push(g,d),f+1<n&&l.push(M),s+=u}return l},Qg=(e,n,r={})=>{const i=r.tailLength??10,a=r.tailThickness??Math.max(i/5,5),u=r.angleRadian??0,o=r.arrowSize??Math.max(i/5,15),c=Math.PI/2;let s,l;if(n==="tip")s=Zn.equilateralFromVertex(e,o,c),l=Be.corners(Be.fromTopLeft({x:s.a.x-i,y:e.y-a/2},i,a));else if(n==="middle"){const d=i+o/2,g=a/2;s=Zn.equilateralFromVertex({x:e.x+o*1.2,y:e.y},o,c),l=Be.corners(Be.fromTopLeft({x:e.x-d,y:e.y-g},i+o,a))}else l=Be.corners(Be.fromTopLeft({x:e.x,y:e.y-a/2},i,a)),s=Zn.equilateralFromVertex({x:e.x+i+o*.7,y:e.y},o,c);return V.rotate([l[0],l[1],s.a,s.b,s.c,l[2],l[3]],u,e)},sf={};ue(sf,{clampMagnitude:()=>up,divide:()=>lp,dotProduct:()=>ap,fromLineCartesian:()=>ep,fromLinePolar:()=>tp,fromPointPolar:()=>lf,multiply:()=>sp,normalise:()=>np,quadrantOffsetAngle:()=>rp,subtract:()=>cp,sum:()=>op,toCartesian:()=>bn,toPolar:()=>li,toString:()=>ip});var xg=Object.freeze({x:0,y:0}),Bi=Math.PI*2,Vi=Math.PI,lf=(e,n="",r=xg)=>{e=or(e,r);let i=Math.atan2(e.y,e.x);return n==="unipolar"&&i<0?i+=Bi:n==="bipolar"&&(i>Vi?i-=Bi:i<=-Vi&&(i+=Bi)),Object.freeze({distance:rn(e),angleRadian:i})},ep=e=>or(e.b,e.a),tp=e=>{const n=or(e.b,e.a);return lf(n)},un=e=>!!ft.isCoord(e),rr=e=>!!je(e),np=e=>{if(un(e))return ft.normalise(e);if(rr(e))return Cl(e);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},rp=e=>e.x>=0&&e.y>=0?0:e.x<0&&e.y>=0||e.x<0&&e.y<0?Vi:Bi,li=(e,n=Mr)=>{if(un(e))return e;if(rr(e))return ft.fromCartesian(e,n);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},bn=e=>{if(un(e))return ft.toPoint(e);if(rr(e))return e;throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},ip=(e,n)=>{if(un(e))return ft.toString(e,n);if(rr(e))return gl(e,n);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},ap=(e,n)=>{if(un(e)&&un(n))return ft.dotProduct(e,n);if(rr(e)&&rr(n))return dl(e,n);throw new Error("Expected two polar/Cartesian vectors.")},up=(e,n=1,r=0)=>{if(un(e))return ft.clampMagnitude(e,n,r);if(rr(e))return Fl(e,n,r);throw new Error("Expected either polar or Cartesian vector")},op=(e,n)=>{const r=un(e);e=bn(e),n=bn(n);const i=El(e,n);return r?li(i):i},cp=(e,n)=>{const r=un(e);e=bn(e),n=bn(n);const i=or(e,n);return r?li(i):i},sp=(e,n)=>{const r=un(e);e=bn(e),n=bn(n);const i=to(e,n);return r?li(i):i},lp=(e,n)=>{const r=un(e);e=bn(e),n=bn(n);const i=bl(e,n);return r?li(i):i},Zn={};ue(Zn,{Empty:()=>Hp,Equilateral:()=>ff,Isosceles:()=>df,Placeholder:()=>Kp,Right:()=>hf,angles:()=>fi,anglesDegrees:()=>Qp,apply:()=>Yp,area:()=>pf,barycentricCoord:()=>Df,barycentricToCartestian:()=>fw,bbox:()=>wf,centroid:()=>va,corners:()=>mu,edges:()=>da,equilateralFromVertex:()=>cw,fromFlatArray:()=>lw,fromPoints:()=>Eo,fromRadius:()=>uw,guard:()=>Jt,innerCircle:()=>iw,intersectsPoint:()=>hw,isAcute:()=>nw,isEmpty:()=>Gp,isEqual:()=>Zp,isEquilateral:()=>xp,isIsoceles:()=>ew,isOblique:()=>tw,isObtuse:()=>rw,isPlaceholder:()=>Jp,isRightAngle:()=>mf,isTriangle:()=>Xp,lengths:()=>Do,outerCircle:()=>aw,perimeter:()=>gf,rotate:()=>dw,rotateByVertex:()=>ow,toFlatArray:()=>sw});var ff={};ue(ff,{area:()=>gp,centerFromA:()=>hp,centerFromB:()=>dp,centerFromC:()=>vp,circumcircle:()=>pp,fromCenter:()=>fp,height:()=>yp,incircle:()=>la,perimeter:()=>mp});var yc=Math.PI*4/3,mc=Math.PI*2/3,Tn=e=>typeof e=="number"?e:e.length,fp=(e,n={x:0,y:0},r)=>{const i=Tn(e)/Math.sqrt(3),a=r??Math.PI*1.5,u={x:i*Math.cos(a)+n.x,y:i*Math.sin(a)+n.y},o={x:i*Math.cos(a+yc)+n.x,y:i*Math.sin(a+yc)+n.y},c={x:i*Math.cos(a+mc)+n.x,y:i*Math.sin(a+mc)+n.y};return Object.freeze({a:o,b:u,c})},hp=(e,n={x:0,y:0})=>{const r=Tn(e),{radius:i}=la(e);return{x:n.x+r/2,y:n.y-i}},dp=(e,n={x:0,y:0})=>{const{radius:r}=la(e);return{x:n.x,y:n.y+r*2}},vp=(e,n={x:0,y:0})=>{const r=Tn(e),{radius:i}=la(e);return{x:n.x-r/2,y:n.y-i}},yp=e=>Math.sqrt(3)/2*Tn(e),mp=e=>Tn(e)*3,gp=e=>Math.pow(Tn(e),2)*Math.sqrt(3)/4,pp=e=>({radius:Math.sqrt(3)/3*Tn(e)}),la=e=>({radius:Math.sqrt(3)/6*Tn(e)}),hf={};ue(hf,{adjacentFromHypotenuse:()=>Rp,adjacentFromOpposite:()=>Pp,angleAtPointA:()=>Cp,angleAtPointB:()=>Fp,area:()=>Ap,circumcircle:()=>_p,fromA:()=>wp,fromB:()=>Dp,fromC:()=>Ep,height:()=>fa,hypotenuseFromAdjacent:()=>zp,hypotenuseFromOpposite:()=>Np,hypotenuseSegments:()=>ha,incircle:()=>Mp,medians:()=>Sp,oppositeFromAdjacent:()=>Ip,oppositeFromHypotenuse:()=>Bp,perimeter:()=>bp,resolveLengths:()=>Gt});var wp=(e,n={x:0,y:0})=>{const r=Gt(e),i=ha(e),a=fa(e),u={x:n.x,y:n.y},o={x:n.x+r.hypotenuse,y:n.y},c={x:n.x+i[1],y:n.y-a};return{a:u,b:o,c}},Dp=(e,n={x:0,y:0})=>{const r=Gt(e),i=ha(e),a=fa(e),u={x:n.x,y:n.y},o={x:n.x-r.hypotenuse,y:n.y},c={x:n.x-i[0],y:n.y-a};return{a:o,b:u,c}},Ep=(e,n={x:0,y:0})=>{const r=ha(e),i=fa(e),a={x:n.x,y:n.y},u={x:n.x-r[1],y:n.y+i},o={x:n.x+r[0],y:n.y+i};return{a:u,b:o,c:a}},Gt=e=>{const n=e.adjacent,r=e.opposite,i=e.hypotenuse;if(n!==void 0&&r!==void 0)return{...e,adjacent:n,opposite:r,hypotenuse:Math.sqrt(n*n+r*r)};if(n&&i)return{...e,adjacent:n,hypotenuse:i,opposite:i*i-n*n};if(r&&i)return{...e,hypotenuse:i,opposite:r,adjacent:i*i-r*r};if(e.opposite&&e.hypotenuse&&e.adjacent)return e;throw new Error("Missing at least two edges")},fa=e=>{const n=Gt(e),r=n.opposite*n.opposite/n.hypotenuse,i=n.adjacent*n.adjacent/n.hypotenuse;return Math.sqrt(r*i)},ha=e=>{const n=Gt(e),r=n.opposite*n.opposite/n.hypotenuse,i=n.adjacent*n.adjacent/n.hypotenuse;return[r,i]},bp=e=>{const n=Gt(e);return n.adjacent+n.hypotenuse+n.opposite},Ap=e=>{const n=Gt(e);return n.opposite*n.adjacent/2},Cp=e=>{const n=Gt(e);return Math.acos((n.adjacent*n.adjacent+n.hypotenuse*n.hypotenuse-n.opposite*n.opposite)/(2*n.adjacent*n.hypotenuse))},Fp=e=>{const n=Gt(e);return console.log(n),Math.acos((n.opposite*n.opposite+n.hypotenuse*n.hypotenuse-n.adjacent*n.adjacent)/(2*n.opposite*n.hypotenuse))},Sp=e=>{const n=Gt(e),r=n.adjacent*n.adjacent,i=n.hypotenuse*n.hypotenuse,a=n.opposite*n.opposite;return[Math.sqrt(2*(r+i)-a)/2,Math.sqrt(2*(i+a)-r)/2,Math.sqrt(2*(a+r)-i)/2]},_p=e=>({radius:Gt(e).hypotenuse/2}),Mp=e=>{const n=Gt(e);return{radius:(n.adjacent+n.opposite-n.hypotenuse)/2}},Ip=(e,n)=>Math.tan(e)*n,Bp=(e,n)=>Math.sin(e)*n,Rp=(e,n)=>Math.cos(e)*n,Pp=(e,n)=>n/Math.tan(e),Np=(e,n)=>n/Math.sin(e),zp=(e,n)=>n/Math.cos(e),df={};ue(df,{apexAngle:()=>Wp,area:()=>kp,baseAngle:()=>vf,circumcircle:()=>Tp,fromA:()=>jp,fromB:()=>Up,fromC:()=>Vp,fromCenter:()=>qp,height:()=>$n,incircle:()=>yf,legHeights:()=>Lp,medians:()=>$p,perimeter:()=>Op});var vf=e=>Math.acos(e.base/(2*e.legs)),Wp=e=>{const n=e.legs*e.legs,r=e.base*e.base;return Math.acos((2*n-r)/(2*n))},$n=e=>{const n=e.legs*e.legs,r=e.base*e.base;return Math.sqrt((4*n-r)/4)},Lp=e=>{const n=vf(e);return e.base*Math.sin(n)},Op=e=>2*e.legs+e.base,kp=e=>$n(e)*e.base/2,Tp=e=>{const n=$n(e),r=n*n,i=e.base*e.base;return{radius:(4*r+i)/(8*n)}},yf=e=>{const n=$n(e);return{radius:e.base*n/(2*e.legs+e.base)}},$p=e=>{const n=e.legs*e.legs,r=e.base*e.base,i=Math.sqrt(n+2*r)/2,a=Math.sqrt(4*n-r)/2;return[i,i,a]},qp=(e,n={x:0,y:0})=>{const r=$n(e),i=yf(e).radius,a=r-i,u={x:n.x-e.base/2,y:n.y+i},o={x:n.x+e.base/2,y:n.y+i},c={x:n.x,y:n.y-a};return{a:u,b:o,c}},jp=(e,n={x:0,y:0})=>{const r=$n(e),i={x:n.x,y:n.y},a={x:n.x+e.base,y:n.y},u={x:n.x+e.base/2,y:n.y-r};return{a:i,b:a,c:u}},Up=(e,n={x:0,y:0})=>{const r=$n(e),i={x:n.x,y:n.y},a={x:n.x-e.base,y:n.y},u={x:n.x-e.base/2,y:n.y-r};return{a,b:i,c:u}},Vp=(e,n={x:0,y:0})=>{const r=$n(e),i={x:n.x,y:n.y},a={x:n.x-e.base/2,y:n.y+r},u={x:n.x+e.base/2,y:n.y+r};return{a,b:u,c:i}},gc=Math.PI*2,Hp=Object.freeze({a:{x:0,y:0},b:{x:0,y:0},c:{x:0,y:0}}),Kp=Object.freeze({a:{x:NaN,y:NaN},b:{x:NaN,y:NaN},c:{x:NaN,y:NaN}}),Gp=e=>Fi(e.a)&&Fi(e.b)&&Fi(e.c),Jp=e=>Si(e.a)&&Si(e.b)&&Si(e.c),Yp=(e,n)=>Object.freeze({...e,a:n(e.a,"a"),b:n(e.b,"b"),c:n(e.c,"c")}),Jt=(e,n="t")=>{if(e===void 0)throw Error("{$name} undefined");_e(e.a,n+".a"),_e(e.b,n+".b"),_e(e.c,n+".c")},Xp=e=>{if(e===void 0)return!1;const n=e;return!(!je(n.a)||!je(n.b)||!je(n.c))},Zp=(e,n)=>Zr(e.a,n.a)&&Zr(e.b,n.b)&&Zr(e.c,n.c),mu=e=>(Jt(e),[e.a,e.b,e.c]),da=e=>(Jt(e),Bt.joinPointsToLines(e.a,e.b,e.c,e.a)),Do=e=>(Jt(e),[rn(e.a,e.b),rn(e.b,e.c),rn(e.c,e.a)]),fi=e=>(Jt(e),[pr(e.a,e.b),pr(e.b,e.c),pr(e.c,e.a)]),Qp=e=>(Jt(e),ya(fi(e))),xp=e=>{Jt(e);const[n,r,i]=Do(e);return n===r&&r===i},ew=e=>{const[n,r,i]=Do(e);return n===r||r===i||i===n},mf=e=>fi(e).some(n=>n===Math.PI/2),tw=e=>!mf(e),nw=e=>!fi(e).some(n=>n>=Math.PI/2),rw=e=>fi(e).some(n=>n>Math.PI/2),va=e=>{Jt(e);const n=Dl([e.a,e.b,e.c],(i,a)=>({x:i.x+a.x,y:i.y+a.y}));return{x:n.x/3,y:n.y/3}},gf=e=>(Jt(e),da(e).reduce((n,r)=>n+Bt.length(r),0)),pf=e=>{Jt(e,"t");const n=da(e).map(i=>Bt.length(i)),r=(n[0]+n[1]+n[2])/2;return Math.sqrt(r*(r-n[0])*(r-n[1])*(r-n[2]))},iw=e=>{const n=va(e),r=gf(e)/2;return{radius:pf(e)/r,...n}},aw=e=>{const[n,r,i]=da(e).map(o=>Bt.length(o)),a=va(e);return{radius:n*r*i/Math.sqrt((n+r+i)*(-n+r+i)*(n-r+i)*(n+r-i)),...a}},uw=(e,n,r={})=>{ie(n,"positive","radius"),_e(e,"origin");const i=r.initialAngleRadian??0,u=[i,i+gc*1/3,i+gc*2/3].map(o=>ft.toCartesian(n,o,e));return Eo(u)},ow=(e,n,r="b")=>{const i=r==="a"?e.a:r==="b"?e.b:e.c;return Object.freeze({a:Xn(e.a,n,i),b:Xn(e.b,n,i),c:Xn(e.c,n,i)})},cw=(e={x:0,y:0},n=10,r=Math.PI/2)=>{const i=su(e,n,Math.PI- -r/2),a=su(e,n,Math.PI-r/2);return{a:i,b:e,c:a}},sw=e=>(Jt(e),[e.a.x,e.a.y,e.b.x,e.b.y,e.c.x,e.c.y]),lw=e=>{if(!Array.isArray(e))throw new Error("coords expected as array");if(e.length!==6)throw new Error(`coords array expected with 6 elements. Got ${e.length}`);return Eo(pl(...e))},Eo=e=>{if(!Array.isArray(e))throw new Error("points expected as array");if(e.length!==3)throw new Error(`points array expected with 3 elements. Got ${e.length}`);return{a:e[0],b:e[1],c:e[2]}},wf=(e,n=0)=>{const{a:r,b:i,c:a}=e,u=Math.min(r.x,i.x,a.x)-n,o=Math.max(r.x,i.x,a.x)+n,c=Math.min(r.y,i.y,a.y)-n,s=Math.max(r.y,i.y,a.y)+n;return{x:u,y:c,width:o-u,height:s-c}},Df=(e,n,r)=>{const i=nr(n,r),a=(s,l,f,d)=>(f.y-d.y)*s+(d.x-f.x)*l+f.x*d.y-d.x*f.y,u=a(i.x,i.y,e.b,e.c)/a(e.a.x,e.a.y,e.b,e.c),o=a(i.x,i.y,e.c,e.a)/a(e.b.x,e.b.y,e.c,e.a),c=a(i.x,i.y,e.a,e.b)/a(e.c.x,e.c.y,e.a,e.b);return{a:u,b:o,c}},fw=(e,n)=>{Jt(e);const{a:r,b:i,c:a}=e,u=r.x*n.a+i.x*n.b+a.x*n.c,o=r.y*n.a+i.y*n.b+a.y*n.c;if(r.z&&i.z&&a.z){const c=r.z*n.a+i.z*n.b+a.z*n.c;return Object.freeze({x:u,y:o,z:c})}else return Object.freeze({x:u,y:o})},hw=(e,n,r)=>{const i=wf(e),a=nr(n,r);if(!Be.intersectsPoint(i,a))return!1;const u=Df(e,a);return 0<=u.a&&u.a<=1&&0<=u.b&&u.b<=1&&0<=u.c&&u.c<=1},dw=(e,n,r)=>n===void 0||n===0?e:(r===void 0&&(r=va(e)),Object.freeze({...e,a:Xn(e.a,n,r),b:Xn(e.b,n,r),c:Xn(e.c,n,r)}));function zn(e){return Array.isArray(e)?e.map(n=>n*(Math.PI/180)):e*(Math.PI/180)}function ya(e){return Array.isArray(e)?e.map(n=>n*180/Math.PI):e*180/Math.PI}var Ef=e=>Math.atan2(e.x,e.y);try{typeof window<"u"&&(window.ixfx={...window.ixfx,Geometry:{Circles:En,Arcs:Xu,Lines:Bt,Rects:Be,Points:V,Paths:Dr,Grids:fo,Beziers:ci,Compound:so,Ellipses:po,Polar:ft,Shapes:wo,radiansFromAxisX:Ef,radianToDegree:ya,degreeToRadian:zn}})}catch{}var vw={};ue(vw,{AudioAnalysers:()=>Ff,AudioVisualisers:()=>Sf,Bluetooth:()=>bf,Camera:()=>Nf,Codec:()=>bo,Espruino:()=>Mf,FrameProcessor:()=>Mw,Serial:()=>If,StringReceiveBuffer:()=>Ao,StringWriteBuffer:()=>Co});var bf={};ue(bf,{NordicBleDevice:()=>Cf,defaultOpts:()=>ma});var bo=class{constructor(){R(this,"enc",new TextEncoder),R(this,"dec",new TextDecoder("utf-8"))}toBuffer(e){return this.enc.encode(e)}fromBuffer(e){return this.dec.decode(e)}},Ao=class{constructor(e,n=`
`){this.onData=e,this.separator=n,R(this,"buffer",""),R(this,"stream")}async close(){const e=this.stream;!e||(await e.abort(),await e.close())}clear(){this.buffer=""}writable(){return this.stream===void 0&&(this.stream=this.createWritable()),this.stream}createWritable(){const e=this;return new WritableStream({write(n){e.add(n)},close(){e.clear()}})}addImpl(e){const n=e.indexOf(this.separator);if(n<0)return this.buffer+=e,"";const r=e.substring(0,n);try{this.onData(this.buffer+r),e=e.substring(r.length+this.separator.length)}catch(i){console.warn(i)}return this.buffer="",e}add(e){for(;e.length>0;)e=this.addImpl(e)}},Co=class{constructor(e,n=-1){this.onData=e,this.chunkSize=n,R(this,"paused",!1),R(this,"queue"),R(this,"writer"),R(this,"intervalMs"),R(this,"stream"),this.intervalMs=10,this.queue=_r(),this.writer=qu(()=>this.onWrite(),this.intervalMs)}async close(){const e=this.stream?.getWriter();e?.releaseLock(),await e?.close()}clear(){this.queue=_r()}writable(){return this.stream===void 0&&(this.stream=this.createWritable()),this.stream}createWritable(){const e=this;return new WritableStream({write(n){e.add(n)},close(){e.clear()}})}async onWrite(){if(this.queue.isEmpty)return!1;if(this.paused)return console.warn("WriteBuffer.onWrite: paused..."),!0;const e=this.queue.dequeue();return e===void 0?!1:(await this.onData(e),!0)}add(e){this.chunkSize>0?this.queue.enqueue(...Md(e,this.chunkSize)):this.queue.enqueue(e),this.writer.start()}},Af=async(e,n=5,r=200,i)=>{Ue(n,"positive","attempts"),Ue(r,"positive","startingTimeoutMs");let a=r,u=0;for(;n>0;){try{return await e()}catch{n--}if(u+=a,i&&i.cancel)throw new Error("Cancelled");if(await tr(a),i&&i.cancel)throw new Error("Cancelled");a*=2}throw new Error(`Retry failed after ${n} attempts over ${u} ms.`)},yw=class extends Ln{constructor(e,n){super();this.device=e,this.config=n,R(this,"states"),R(this,"codec"),R(this,"rx"),R(this,"tx"),R(this,"gatt"),R(this,"verboseLogging",!1),R(this,"rxBuffer"),R(this,"txBuffer"),this.verboseLogging=n.debug,this.txBuffer=new Co(async r=>{await this.writeInternal(r)},n.chunkSize),this.rxBuffer=new Ao(r=>{this.fireEvent("data",{data:r})}),this.codec=new bo,this.states=new ur("ready",{ready:"connecting",connecting:["connected","closed"],connected:["closed"],closed:"connecting"}),this.states.addEventListener("change",r=>{this.fireEvent("change",r),this.verbose(`${r.priorState} -> ${r.newState}`),r.priorState==="connected"&&(this.rxBuffer.clear(),this.txBuffer.clear())}),e.addEventListener("gattserverdisconnected",()=>{this.isClosed||(this.verbose("GATT server disconnected"),this.states.state="closed")}),this.verbose(`ctor ${e.name} ${e.id}`)}get isConnected(){return this.states.state==="connected"}get isClosed(){return this.states.state==="closed"}write(e){if(this.states.state!=="connected")throw new Error(`Cannot write while state is ${this.states.state}`);this.txBuffer.add(e)}async writeInternal(e){this.verbose(`writeInternal ${e}`);const n=this.tx;if(n===void 0)throw new Error("Unexpectedly without tx characteristic");try{await n.writeValue(this.codec.toBuffer(e))}catch(r){this.warn(r)}}disconnect(){this.states.state==="connected"&&this.gatt?.disconnect()}async connect(){const e=this.config.connectAttempts??3;this.states.state="connecting",this.verbose("connect");const n=this.device.gatt;if(n===void 0)throw new Error("Gatt not available on device");await Af(async()=>{const r=await n.connect();this.verbose("Getting primary service");const i=await r.getPrimaryService(this.config.service);this.verbose("Getting characteristics");const a=await i.getCharacteristic(this.config.rxGattCharacteristic),u=await i.getCharacteristic(this.config.txGattCharacteristic);a.addEventListener("characteristicvaluechanged",o=>this.onRx(o)),this.rx=a,this.tx=u,this.gatt=n,this.states.state="connected",await a.startNotifications()},e,200)}onRx(e){if(this.rx===void 0)return;const r=e.target.value;if(r===void 0)return;let i=this.codec.fromBuffer(r.buffer);const a=zi(i,19),u=zi(i,17);u&&a<u&&(this.verbose("Tx plz start"),i=Wi(i,u,1),this.txBuffer.paused=!1),a&&a>u&&(this.verbose("Tx plz stop"),i=Wi(i,a,1),this.txBuffer.paused=!0),this.rxBuffer.add(i)}verbose(e){this.verboseLogging&&console.info(`${this.config.name} `,e)}log(e){console.log(`${this.config.name} `,e)}warn(e){console.warn(`${this.config.name} `,e)}},ma={chunkSize:20,service:"6e400001-b5a3-f393-e0a9-e50e24dcca9e",txGattCharacteristic:"6e400002-b5a3-f393-e0a9-e50e24dcca9e",rxGattCharacteristic:"6e400003-b5a3-f393-e0a9-e50e24dcca9e",name:"NordicDevice",connectAttempts:5,debug:!1},Cf=class extends yw{constructor(e,n={}){super(e,{...ma,...n})}},Ff={};ue(Ff,{AudioAnalyser:()=>ga,basic:()=>mw,freq:()=>gw,peakLevel:()=>pw});var Sf={};ue(Sf,{default:()=>_f});var _f=class{constructor(e,n){R(this,"freqMaxRange",200),R(this,"audio"),R(this,"parent"),R(this,"lastPointer",{x:0,y:0}),R(this,"pointerDown",!1),R(this,"pointerClicking",!1),R(this,"pointerClickDelayMs",100),R(this,"pointerDelaying",!1),R(this,"waveTracker"),R(this,"freqTracker"),R(this,"el"),this.audio=n,this.parent=e,this.waveTracker=Xr(),this.freqTracker=Xr(),e.innerHTML=`
    <section>
      <button id="rendererComponentToggle">\u{1F53C}</button>
      <div>
        <h1>Visualiser</h1>
        <div style="display:flex; flex-wrap: wrap">
          <div class="visPanel">
            <h2>Frequency distribution</h2>
            <br />
            <canvas id="rendererComponentFreqData" height="200" width="400"></canvas>
          </div>
          <div class="visPanel">
            <h2>Waveform</h2>
            <button id="rendererComponentWaveReset">Reset</button>
            <div>
              Press and hold on wave to measure
            </div>
            <br />
            <canvas id="rendererComponentWaveData" height="200" width="400"></canvas>
          </div>
        </div>
      </div>
    </section>
    `,this.el=e.children[0],document.getElementById("rendererComponentToggle")?.addEventListener("click",()=>{this.setExpanded(!this.isExpanded())}),this.el.addEventListener("pointermove",r=>this.onPointer(r)),this.el.addEventListener("pointerup",()=>{this.pointerDelaying=!1,this.pointerDown=!1}),this.el.addEventListener("pointerdown",()=>{this.pointerDelaying=!0,setTimeout(()=>{this.pointerDelaying&&(this.pointerDelaying=!1,this.pointerDown=!0)},this.pointerClickDelayMs)}),this.el.addEventListener("pointerleave",()=>{this.pointerDelaying=!1,this.pointerDown=!1}),document.getElementById("rendererComponentWaveReset")?.addEventListener("click",()=>{this.clear()})}renderFreq(e){if(!this.isExpanded()||!e)return;const n=document.getElementById("rendererComponentFreqData");if(n===null)throw new Error("Cannot find canvas element");const r=n.getContext("2d");if(r===null)throw new Error("Cannot create drawing context");const i=e.length,a=n.clientWidth,u=n.clientHeight;r.clearRect(0,0,a,u);const o=this.getPointerRelativeTo(n),c=a/i,s=an.minMaxAvg(e);for(let l=0;l<i;l++){if(!Number.isFinite(e[l]))continue;const d=(e[l]-s.min)/this.freqMaxRange,g=Math.abs(u*d),M=u-g,P=l/i*360,q=l*c;if(r.fillStyle="hsl("+P+", 100%, 50%)",o.y>0&&o.y<=u&&o.x>=q&&o.x<=q+c){this.freqTracker.id!==l.toString()&&(this.freqTracker=Xr(l.toString())),this.freqTracker.seen(e[l]);const L=this.freqTracker.getMinMaxAvg();r.fillStyle="black",this.audio&&r.fillText(`Frequency (${l}) at pointer: ${this.audio.getFrequencyAtIndex(l).toLocaleString("en")} - ${this.audio.getFrequencyAtIndex(l+1).toLocaleString("en")}`,2,10),r.fillText(`Raw value: ${e[l].toFixed(2)}`,2,20),r.fillText(`Min: ${L.min.toFixed(2)}`,2,40),r.fillText(`Max: ${L.max.toFixed(2)}`,60,40),r.fillText(`Avg: ${L.avg.toFixed(2)}`,120,40)}r.fillRect(q,M,c,g)}}isExpanded(){const e=this.el.querySelector("div");if(e===null)throw new Error("contents div not found");return e.style.display===""}setExpanded(e){const n=this.el.querySelector("div"),r=this.el.querySelector("button");if(r===null)throw new Error("Button element not found");if(n===null)throw new Error("Contents element not found");e?(n.style.display="",r.innerText="\u{1F53C}"):(n.style.display="none",r.innerText="\u{1F53D}")}clear(){this.clearCanvas(document.getElementById("rendererComponentFreqData")),this.clearCanvas(document.getElementById("rendererComponentWaveData"))}clearCanvas(e){if(e===null)throw new Error("Canvas is null");const n=e.getContext("2d");if(n===null)throw new Error("Cannot create drawing context");n.fillStyle="white",n.fillRect(0,0,e.clientWidth,e.clientHeight)}renderWave(e,n=!0){if(!this.isExpanded()||!e)return;const r=document.getElementById("rendererComponentWaveData");if(r===null)throw new Error("Cannot find wave canvas");const i=r.getContext("2d");if(i===null)throw new Error("Cannot create drawing context for wave");const a=r.clientWidth,u=r.clientHeight,o=this.getPointerRelativeTo(r),c=20,s=60,l=e.length;i.fillStyle="white",i.fillRect(0,0,s,c);const f=a/l;i.fillStyle="rgba(255, 255, 255, 0.03)",i.fillRect(0,20,a,u),i.fillStyle="red",n?i.fillRect(0,u/2,a,1):i.fillRect(0,u-1,a,1),i.lineWidth=1,i.strokeStyle="black",i.beginPath();let d=0;for(let g=0;g<l;g++){const M=e[g]*u,P=n?u/2-M:u-M;g===0?i.moveTo(d,P):i.lineTo(d,P),d+=f,this.pointerDown&&this.waveTracker.seen(e[g])}if(i.lineTo(a,n?u/2:u),i.stroke(),this.pointerDown){const g=this.waveTracker.getMinMaxAvg();i.fillStyle="rgba(255,255,0,1)",i.fillRect(s,0,150,20),i.fillStyle="black",i.fillText("Min: "+g.min.toFixed(2),60,10),i.fillText("Max: "+g.max.toFixed(2),110,10),i.fillText("Avg: "+g.avg.toFixed(2),160,10)}else this.waveTracker.reset();o.y>0&&o.y<=u&&o.x>=0&&o.x<=a&&(i.fillStyle="black",i.fillText("Level: "+(1-o.y/u).toFixed(2),2,10))}getPointerRelativeTo(e){const n=e.getBoundingClientRect();return{x:this.lastPointer.x-n.left-window.scrollX,y:this.lastPointer.y-n.top-window.scrollY}}onPointer(e){this.lastPointer={x:e.pageX,y:e.pageY},e.preventDefault()}},mw=(e,n={})=>new ga((r,i)=>{const a=new Float32Array(r.frequencyBinCount),u=new Float32Array(r.fftSize);r.getFloatFrequencyData(a),r.getFloatTimeDomainData(u),e(a,u,i)},n),gw=(e,n={})=>new ga((r,i)=>{const a=new Float32Array(r.frequencyBinCount);r.getFloatFrequencyData(a),e(a,i)},n),pw=(e,n={})=>new ga((r,i)=>{const a=new Float32Array(r.fftSize);r.getFloatTimeDomainData(a),e(an.maxFast(a),i)},n),Hr,dr,ga=class{constructor(e,n={}){if(R(this,"showVis"),R(this,"fftSize"),R(this,"smoothingTimeConstant"),$e(this,Hr,!1),R(this,"debug"),$e(this,dr,!1),R(this,"visualiser"),R(this,"audioCtx"),R(this,"analyserNode"),R(this,"analyse"),this.showVis=n.showVis??!1,this.fftSize=n.fftSize??1024,this.debug=n.debug??!1,this.smoothingTimeConstant=n.smoothingTimeConstant??.8,Ue(this.fftSize,"positive","opts.fftSize"),ie(this.smoothingTimeConstant,"percentage","opts.smoothingTimeConstant"),!Nc(this.fftSize))throw new Error(`fftSize must be a power of two from 32 to 32768 (${this.fftSize})`);if(this.fftSize<32)throw new Error("fftSize must be at least 32");if(this.fftSize>32768)throw new Error("fftSize must be no greater than 32768");this.analyse=e,this.paused=!1,this.init();const r=document.getElementById("audio-visualiser");if(r){const i=new _f(r,this);i.setExpanded(this.showVis),this.visualiser=i}}init(){if(J(this,dr)){this.debug&&console.debug("Init already in progress");return}Ce(this,dr,!0),navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{this.onMicSuccess(e)}).catch(e=>{Ce(this,dr,!1),console.error(e)})}get paused(){return J(this,Hr)}set paused(e){e!==J(this,Hr)&&(Ce(this,Hr,e),e?this.debug&&console.log("Paused"):(this.debug&&console.log("Unpaused"),window.requestAnimationFrame(this.analyseLoop.bind(this))))}setup(e,n){const r=e.createAnalyser();return r.fftSize=this.fftSize,r.smoothingTimeConstant=this.smoothingTimeConstant,e.createMediaStreamSource(n).connect(r),r}onMicSuccess(e){try{const n=new AudioContext;n.addEventListener("statechange",()=>{this.debug&&console.log(`Audio context state: ${n.state}`)}),this.audioCtx=n,this.analyserNode=this.setup(n,e),window.requestAnimationFrame(this.analyseLoop.bind(this))}catch(n){Ce(this,dr,!1),console.error(n)}}analyseLoop(){if(this.paused){this.debug&&console.log("Paused");return}const e=this.analyserNode;if(e===void 0){console.warn("Analyser undefined");return}try{this.analyse(e,this)}catch(n){console.error(n)}window.requestAnimationFrame(this.analyseLoop.bind(this))}getFrequencyRangeMax(e,n,r){const i=this.sliceByFrequency(e,n,r);return an.max(i)}sliceByFrequency(e,n,r){const i=this.getIndexForFrequency(e),a=this.getIndexForFrequency(n);return r.slice(i,a)}getFrequencyAtIndex(e){const n=this.analyserNode,r=this.audioCtx;if(n===void 0)throw new Error("Analyser not available");if(r===void 0)throw new Error("Audio context not available");if(Ue(e,"positive","index"),e>n.frequencyBinCount)throw new Error(`Index ${e} exceeds frequency bin count ${n.frequencyBinCount}`);return e*r.sampleRate/(n.frequencyBinCount*2)}getIndexForFrequency(e){const n=this.analyserNode;if(n===void 0)throw new Error("Analyser not available");const r=n.context.sampleRate/2,i=Math.round(e/r*n.frequencyBinCount);return i<0?0:i>=n.frequencyBinCount?n.frequencyBinCount-1:i}};Hr=new WeakMap;dr=new WeakMap;var Mf={};ue(Mf,{EspruinoBleDevice:()=>Fo,EspruinoSerialDevice:()=>Rf,connectBle:()=>bw,deviceEval:()=>So,puck:()=>Dw,serial:()=>Ew});var Fo=class extends Cf{constructor(e,n={}){super(e,n);R(this,"evalTimeoutMs"),R(this,"evalReplyBluetooth",!0),this.evalTimeoutMs=n.evalTimeoutMs??5*1e3}async writeScript(e){this.write(`reset();
`),this.write(`${e}
`)}async eval(e,n={},r){const i=n.debug??!1;return So(e,n,this,"Bluetooth.println",i,r??(u=>this.warn(u)))}},If={};ue(If,{Device:()=>Bf});var ww=class extends Ln{constructor(e={}){super();R(this,"states"),R(this,"codec"),R(this,"verboseLogging",!1),R(this,"name"),R(this,"connectAttempts"),R(this,"chunkSize"),R(this,"rxBuffer"),R(this,"txBuffer"),this.verboseLogging=e.debug??!1,this.chunkSize=e.chunkSize??1024,this.connectAttempts=e.connectAttempts??3,this.name=e.name??"JsonDevice",this.txBuffer=new Co(async n=>{await this.writeInternal(n)},e.chunkSize),this.rxBuffer=new Ao(n=>{this.fireEvent("data",{data:n})}),this.codec=new bo,this.states=new ur("ready",{ready:"connecting",connecting:["connected","closed"],connected:["closed"],closed:"connecting"}),this.states.addEventListener("change",n=>{this.fireEvent("change",n),this.verbose(`${n.priorState} -> ${n.newState}`),n.priorState==="connected"&&(this.rxBuffer.clear(),this.txBuffer.clear())})}get isConnected(){return this.states.state==="connected"}get isClosed(){return this.states.state==="closed"}write(e){if(this.states.state!=="connected")throw new Error(`Cannot write while state is ${this.states.state}`);this.txBuffer.add(e)}async close(){this.states.state==="connected"&&this.onClosed()}async connect(){const e=this.connectAttempts;this.states.state="connecting",await this.onPreConnect(),await Af(async()=>{await this.onConnectAttempt(),this.states.state="connected"},e,200)}onRx(e){const n=e.target.value;if(n===void 0)return;let r=this.codec.fromBuffer(n.buffer);const i=zi(r,19),a=zi(r,17);a&&i<a&&(this.verbose("Tx plz start"),r=Wi(r,a,1),this.txBuffer.paused=!1),i&&i>a&&(this.verbose("Tx plz stop"),r=Wi(r,i,1),this.txBuffer.paused=!0),this.rxBuffer.add(r)}verbose(e){this.verboseLogging&&console.info(`${this.name} `,e)}log(e){console.log(`${this.name} `,e)}warn(e){console.warn(`${this.name} `,e)}},Bf=class extends ww{constructor(e={}){super(e);this.config=e,R(this,"port"),R(this,"tx"),R(this,"abort"),R(this,"baudRate"),this.abort=new AbortController;const n=e.eol??`\r
`;this.baudRate=e.baudRate??9600,e.name===void 0&&(super.name="Serial.Device"),this.rxBuffer.separator=n}async writeInternal(e){if(this.tx===void 0)throw new Error("tx not ready");try{this.tx.write(e)}catch(n){this.warn(n)}}onClosed(){this.tx?.releaseLock(),this.abort.abort("closing port"),this.states.state="closed"}onPreConnect(){return Promise.resolve()}async onConnectAttempt(){let e={};const n={baudRate:this.baudRate};this.config.filters&&(e={filters:[...this.config.filters]}),this.port=await navigator.serial.requestPort(e),this.port.addEventListener("disconnect",o=>{this.close()}),await this.port.open(n);const r=this.port.writable,i=new TextEncoderStream;r!==null&&(i.readable.pipeTo(r,{signal:this.abort.signal}).catch(o=>{console.log("Serial.onConnectAttempt txText pipe:"),console.log(o)}),this.tx=i.writable.getWriter());const a=this.port.readable,u=new TextDecoderStream;a!==null&&(a.pipeTo(u.writable,{signal:this.abort.signal}).catch(o=>{console.log("Serial.onConnectAttempt rxR pipe:"),console.log(o)}),u.readable.pipeTo(this.rxBuffer.writable(),{signal:this.abort.signal}).catch(o=>{console.log("Serial.onConnectAttempt rxText pipe:"),console.log(o);try{this.port?.close()}catch(c){console.log(c)}}))}},Rf=class extends Bf{constructor(e){super(e);R(this,"evalTimeoutMs"),R(this,"evalReplyBluetooth",!1),e===void 0&&(e={}),this.evalTimeoutMs=e.evalTimeoutMs??5*1e3}async disconnect(){return super.close()}async writeScript(e){this.write(`reset();
`),this.write(`${e}
`)}async eval(e,n={},r){const i=n.debug??!1;return So(e,n,this,"USB.println",i,r??(u=>this.warn(u)))}},Dw=async(e={})=>{const n=e.name??"Puck",r=e.debug??!1,i=await navigator.bluetooth.requestDevice({filters:Pf(e),optionalServices:[ma.service]});console.log(i.name);const a=new Fo(i,{name:n,debug:r});return await a.connect(),a},Ew=async(e={})=>{const n=new Rf(e);return await n.connect(),n},Pf=e=>{const n=[];return e.filters?n.push(...e.filters):e.name?(n.push({name:e.name}),console.info(`Filtering Bluetooth devices by name '${e.name}'`)):n.push({namePrefix:"Puck.js"}),n},bw=async(e={})=>{const n=await navigator.bluetooth.requestDevice({filters:Pf(e),optionalServices:[ma.service]}),r=new Fo(n,{name:"Espruino"});return await r.connect(),r},So=async(e,n={},r,i,a,u)=>{const o=n.timeoutMs??r.evalTimeoutMs,c=n.assumeExclusive??!0;if(typeof e!="string")throw new Error("code parameter should be a string");return new Promise((s,l)=>{const f=id(5),d=q=>{try{let L=q.data;L.startsWith(">{")&&L.endsWith("}")&&(L=L.substring(1));const A=JSON.parse(L);"reply"in A?A.reply===f?(M(),"result"in A&&s(A.result)):u(`Expected reply ${f}, got ${A.reply}`):u(`Expected packet, missing 'reply' field. Got: ${q.data}`)}catch(L){c?M(q.data):u(L)}},g=q=>{q.newState!=="connected"&&M(`State changed to '${q.newState}', aborting`)};r.addEventListener("data",d),r.addEventListener("change",g);const M=ju(o,q=>{l(q)},()=>{r.removeEventListener("data",d),r.removeEventListener("change",g)}),P=`${i}(JSON.stringify({reply:"${f}", result:JSON.stringify(${e})}))
`;a&&u(P),r.write(P)})},Nf={};ue(Nf,{dumpDevices:()=>Aw,start:()=>zf});var Aw=async(e="videoinput")=>{(await navigator.mediaDevices.enumerateDevices()).forEach(r=>{r.kind===e&&(console.log(r.label),console.log(` Kind: ${r.kind}`),console.log(` Device id: ${r.deviceId}`))})},Cw=1e4,zf=async(e={})=>{const n=document.createElement("VIDEO");n.style.display="none",n.classList.add("ixfx-camera"),document.body.appendChild(n);let r=()=>{};const i=()=>{try{r()}catch{}n.remove()};try{return r=(await Fw(n,e)).dispose,{videoEl:n,dispose:i}}catch(a){throw console.error(a),i(),a}},Fw=async(e,n={})=>{if(e===void 0)throw new Error("videoEl undefined");if(e===null)throw new Error("videoEl null");const r=n.max,i=n.min,a=n.ideal,u={audio:!1,video:{width:{},height:{}}};n.facingMode==="front"&&(n={...n,facingMode:"user"}),n.facingMode==="back"&&(n={...n,facingMode:"environment"}),n.facingMode&&(u.video.facingMode=n.facingMode),n.deviceId&&(u.video.deviceId=n.deviceId),a&&(u.video.width={...u.video.width,ideal:a.width},u.video.height={...u.video.height,ideal:a.height}),r&&(u.video.width={...u.video.width,max:r.width},u.video.height={...u.video.height,max:r.height}),i&&(u.video.width={...u.video.width,min:i.width},u.video.height={...u.video.height,min:i.height});const o=ju(n.startTimeoutMs??Cw,c=>{throw new Error(`Camera getUserMedia failed: ${c}`)});try{const c=await navigator.mediaDevices.getUserMedia(u),s=()=>{e.pause(),c.getTracks().forEach(g=>g.stop())};e.srcObject=c,o();const l={videoEl:e,dispose:s};return new Promise((d,g)=>{e.addEventListener("loadedmetadata",()=>{e.play().then(()=>{d(l)}).catch(M=>{g(M)})})})}catch(c){throw o(c.toString()),c}},_o={};ue(_o,{capture:()=>_w,frames:()=>Sw,manualCapture:()=>Wf});async function*Sw(e,n={}){const r=n.maxIntervalMs??0,i=n.showCanvas??!1;let a=n.canvasEl,u,o;u=o=0,a===void 0&&(a=document.createElement("CANVAS"),a.classList.add("ixfx-frames"),i||(a.style.display="none"),document.body.appendChild(a));const c=()=>{a!==void 0&&(u=e.videoWidth,o=e.videoHeight,a.width=u,a.height=o)};let s=null;const l=Lu(r);for await(const f of l){if((u===0||o===0)&&c(),u===0||o===0)continue;if(s===null&&(s=a.getContext("2d")),s===null)return;s.drawImage(e,0,0,u,o),yield s.getImageData(0,0,u,o)}}var _w=(e,n={})=>{const r=n.maxIntervalMs??0,i=n.showCanvas??!1,a=n.onFrame,u=e.videoWidth,o=e.videoHeight,c=document.createElement("CANVAS");c.classList.add("ixfx-capture"),i||(c.style.display="none"),c.width=u,c.height=o;let s=null,l;n.workerScript&&(l=new Worker(n.workerScript));const f=l||a;!f&&!i&&console.warn("Video will be captured to hidden element without any processing. Is this what you want?");const d=qu(()=>{if(s===null&&(s=c.getContext("2d")),s===null)return;s.drawImage(e,0,0,u,o);let g;if(f&&(g=s.getImageData(0,0,u,o)),l&&l.postMessage({pixels:g.data.buffer,width:u,height:o,channels:4},[g.data.buffer]),a)try{a(g)}catch(M){console.error(M)}},r);return{start:()=>d.start(),cancel:()=>d.cancel(),canvasEl:c}},Wf=(e,n={})=>{const r=n.showCanvas??!1,i=e.videoWidth,a=e.videoHeight,u=n.canvasEl!==void 0;let o=n.canvasEl;return o||(o=document.createElement("CANVAS"),o.classList.add("ixfx-capture"),document.body.append(o),r||(o.style.display="none")),o.width=i,o.height=a,{canvasEl:o,capture:()=>{let f;if(f||(f=o?.getContext("2d")),!f)throw new Error("Could not create graphics context");f.drawImage(e,0,0,i,a);const d=f.getImageData(0,0,i,a);return d.currentTime=e.currentTime,n.postCaptureDraw&&n.postCaptureDraw(f,i,a),d},dispose:()=>{if(!u)try{o?.remove()}catch{}}}},Mw=class{constructor(e={}){R(this,"_source"),R(this,"_state"),R(this,"_teardownNeeded",!1),R(this,"_cameraConstraints"),R(this,"_cameraStartResult"),R(this,"_cameraCapture"),R(this,"_showCanvas"),R(this,"_showPreview"),R(this,"_postCaptureDraw"),R(this,"_timer"),R(this,"_captureCanvasEl"),this._state="ready",this._source="",this._timer=performance.now(),this._showCanvas=e.showCanvas??!1,this._showPreview=e.showPreview??!1,this._cameraConstraints=e.cameraConstraints??void 0,this._captureCanvasEl=e.captureCanvasEl??void 0,this._postCaptureDraw=e.postCaptureDraw}showPreview(e){if(this._state==="disposed")throw new Error("Disposed");let n;switch(this._source){case"camera":n=this._cameraStartResult?.videoEl,n!==void 0&&(n.style.display=e?"block":"none");break}this._showPreview=e}showCanvas(e){if(this._state==="disposed")throw new Error("Disposed");let n;switch(this._source){case"camera":n=this._cameraCapture?.canvasEl,n!==void 0&&(n.style.display=e?"block":"none");break}this._showCanvas=e}getCapturer(){if(this._state==="disposed")throw new Error("Disposed");switch(this._source){case"camera":return this._cameraCapture}}async useCamera(e){if(this._state==="disposed")throw new Error("Disposed");this._source="camera",this._teardownNeeded&&this.teardown(),e&&this._cameraConstraints,await this.init()}async initCamera(){const e=await zf(this._cameraConstraints);if(e===void 0)throw new Error("Could not start camera");this._showPreview&&(e.videoEl.style.display="block"),this._cameraCapture=Wf(e.videoEl,{postCaptureDraw:this._postCaptureDraw,showCanvas:this._showCanvas,canvasEl:this._captureCanvasEl}),this._cameraStartResult=e,this._teardownNeeded=!0,this._cameraStartResult=e}dispose(){this._state!=="disposed"&&(this.teardown(),this._state="disposed")}async init(){switch(this._timer=performance.now(),this._source){case"camera":await this.initCamera();break}this._state="initialised"}teardown(){if(!!this._teardownNeeded){switch(this._source){case"camera":this._cameraCapture?.dispose(),this._cameraStartResult?.dispose();break}this._teardownNeeded=!1}}getFrame(){if(this._state==="disposed")throw new Error("Disposed");switch(this._source){case"camera":return this.getFrameCamera()}}getTimestamp(){return performance.now()-this._timer}getFrameCamera(){return this._cameraCapture?.capture()}},Iw={};ue(Iw,{Colour:()=>hi,Drawing:()=>pa,Palette:()=>Vo,Plot:()=>$o,Plot2:()=>jo,SceneGraph:()=>Uo,Svg:()=>Oo,Video:()=>_o});var pa={};ue(pa,{arc:()=>nh,bezier:()=>ah,circle:()=>rh,connectedPoints:()=>Ea,copyToImg:()=>E1,dot:()=>tn,drawingStack:()=>mr,ellipse:()=>w1,getCtx:()=>th,line:()=>Lo,lineThroughPoints:()=>p1,makeHelper:()=>y1,paths:()=>ih,pointLabels:()=>ba,rect:()=>oh,textBlock:()=>ch,textBlockAligned:()=>C1,textWidth:()=>gr,translatePoint:()=>D1,triangle:()=>A1});var hi={};ue(hi,{getCssVariable:()=>Qf,goldenAngleColour:()=>c1,interpolate:()=>l1,opacity:()=>ri,randomHue:()=>No,scale:()=>f1,toHex:()=>s1,toHsl:()=>o1,toRgb:()=>Zf});function zr(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function di(e,n){var r=Object.create(e.prototype);for(var i in n)r[i]=n[i];return r}function qn(){}var ir=.7,Br=1/ir,Er="\\s*([+-]?\\d+)\\s*",ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bw=/^#([0-9a-f]{3,8})$/,Rw=new RegExp(`^rgb\\(${Er},${Er},${Er}\\)$`),Pw=new RegExp(`^rgb\\(${sn},${sn},${sn}\\)$`),Nw=new RegExp(`^rgba\\(${Er},${Er},${Er},${ti}\\)$`),zw=new RegExp(`^rgba\\(${sn},${sn},${sn},${ti}\\)$`),Ww=new RegExp(`^hsl\\(${ti},${sn},${sn}\\)$`),Lw=new RegExp(`^hsla\\(${ti},${sn},${sn},${ti}\\)$`),pc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zr(qn,Rr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wc,formatHex:wc,formatHex8:Ow,formatHsl:kw,formatRgb:Dc,toString:Dc});function wc(){return this.rgb().formatHex()}function Ow(){return this.rgb().formatHex8()}function kw(){return Lf(this).formatHsl()}function Dc(){return this.rgb().formatRgb()}function Rr(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=Bw.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Ec(n):r===3?new it(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?pi(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?pi(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Rw.exec(e))?new it(n[1],n[2],n[3],1):(n=Pw.exec(e))?new it(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Nw.exec(e))?pi(n[1],n[2],n[3],n[4]):(n=zw.exec(e))?pi(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Ww.exec(e))?Cc(n[1],n[2]/100,n[3]/100,1):(n=Lw.exec(e))?Cc(n[1],n[2]/100,n[3]/100,n[4]):pc.hasOwnProperty(e)?Ec(pc[e]):e==="transparent"?new it(NaN,NaN,NaN,0):null}function Ec(e){return new it(e>>16&255,e>>8&255,e&255,1)}function pi(e,n,r,i){return i<=0&&(e=n=r=NaN),new it(e,n,r,i)}function Mo(e){return e instanceof qn||(e=Rr(e)),e?(e=e.rgb(),new it(e.r,e.g,e.b,e.opacity)):new it}function Hi(e,n,r,i){return arguments.length===1?Mo(e):new it(e,n,r,i??1)}function it(e,n,r,i){this.r=+e,this.g=+n,this.b=+r,this.opacity=+i}zr(it,Hi,di(qn,{brighter(e){return e=e==null?Br:Math.pow(Br,e),new it(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ir:Math.pow(ir,e),new it(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new it(Qn(this.r),Qn(this.g),Qn(this.b),Ki(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bc,formatHex:bc,formatHex8:Tw,formatRgb:Ac,toString:Ac}));function bc(){return`#${Yn(this.r)}${Yn(this.g)}${Yn(this.b)}`}function Tw(){return`#${Yn(this.r)}${Yn(this.g)}${Yn(this.b)}${Yn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ac(){const e=Ki(this.opacity);return`${e===1?"rgb(":"rgba("}${Qn(this.r)}, ${Qn(this.g)}, ${Qn(this.b)}${e===1?")":`, ${e})`}`}function Ki(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yn(e){return e=Qn(e),(e<16?"0":"")+e.toString(16)}function Cc(e,n,r,i){return i<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new en(e,n,r,i)}function Lf(e){if(e instanceof en)return new en(e.h,e.s,e.l,e.opacity);if(e instanceof qn||(e=Rr(e)),!e)return new en;if(e instanceof en)return e;e=e.rgb();var n=e.r/255,r=e.g/255,i=e.b/255,a=Math.min(n,r,i),u=Math.max(n,r,i),o=NaN,c=u-a,s=(u+a)/2;return c?(n===u?o=(r-i)/c+(r<i)*6:r===u?o=(i-n)/c+2:o=(n-r)/c+4,c/=s<.5?u+a:2-u-a,o*=60):c=s>0&&s<1?0:o,new en(o,c,s,e.opacity)}function Gi(e,n,r,i){return arguments.length===1?Lf(e):new en(e,n,r,i??1)}function en(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}zr(en,Gi,di(qn,{brighter(e){return e=e==null?Br:Math.pow(Br,e),new en(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ir:Math.pow(ir,e),new en(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,a=2*r-i;return new it(qa(e>=240?e-240:e+120,a,i),qa(e,a,i),qa(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new en(Fc(this.h),wi(this.s),wi(this.l),Ki(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ki(this.opacity);return`${e===1?"hsl(":"hsla("}${Fc(this.h)}, ${wi(this.s)*100}%, ${wi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fc(e){return e=(e||0)%360,e<0?e+360:e}function wi(e){return Math.max(0,Math.min(1,e||0))}function qa(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}var Of=Math.PI/180,kf=180/Math.PI,Ji=18,Tf=.96422,$f=1,qf=.82521,jf=4/29,br=6/29,Uf=3*br*br,$w=br*br*br;function Vf(e){if(e instanceof ln)return new ln(e.l,e.a,e.b,e.opacity);if(e instanceof wn)return Hf(e);e instanceof it||(e=Mo(e));var n=Ha(e.r),r=Ha(e.g),i=Ha(e.b),a=ja((.2225045*n+.7168786*r+.0606169*i)/$f),u,o;return n===r&&r===i?u=o=a:(u=ja((.4360747*n+.3850649*r+.1430804*i)/Tf),o=ja((.0139322*n+.0971045*r+.7141733*i)/qf)),new ln(116*a-16,500*(u-a),200*(a-o),e.opacity)}function gu(e,n,r,i){return arguments.length===1?Vf(e):new ln(e,n,r,i??1)}function ln(e,n,r,i){this.l=+e,this.a=+n,this.b=+r,this.opacity=+i}zr(ln,gu,di(qn,{brighter(e){return new ln(this.l+Ji*(e??1),this.a,this.b,this.opacity)},darker(e){return new ln(this.l-Ji*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,n=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return n=Tf*Ua(n),e=$f*Ua(e),r=qf*Ua(r),new it(Va(3.1338561*n-1.6168667*e-.4906146*r),Va(-.9787684*n+1.9161415*e+.033454*r),Va(.0719453*n-.2289914*e+1.4052427*r),this.opacity)}}));function ja(e){return e>$w?Math.pow(e,1/3):e/Uf+jf}function Ua(e){return e>br?e*e*e:Uf*(e-jf)}function Va(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Ha(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function qw(e){if(e instanceof wn)return new wn(e.h,e.c,e.l,e.opacity);if(e instanceof ln||(e=Vf(e)),e.a===0&&e.b===0)return new wn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var n=Math.atan2(e.b,e.a)*kf;return new wn(n<0?n+360:n,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function pu(e,n,r,i){return arguments.length===1?qw(e):new wn(e,n,r,i??1)}function wn(e,n,r,i){this.h=+e,this.c=+n,this.l=+r,this.opacity=+i}function Hf(e){if(isNaN(e.h))return new ln(e.l,0,0,e.opacity);var n=e.h*Of;return new ln(e.l,Math.cos(n)*e.c,Math.sin(n)*e.c,e.opacity)}zr(wn,pu,di(qn,{brighter(e){return new wn(this.h,this.c,this.l+Ji*(e??1),this.opacity)},darker(e){return new wn(this.h,this.c,this.l-Ji*(e??1),this.opacity)},rgb(){return Hf(this).rgb()}}));var Kf=-.14861,Io=1.78277,Bo=-.29227,wa=-.90649,ni=1.97294,Sc=ni*wa,_c=ni*Io,Mc=Io*Bo-wa*Kf;function jw(e){if(e instanceof xn)return new xn(e.h,e.s,e.l,e.opacity);e instanceof it||(e=Mo(e));var n=e.r/255,r=e.g/255,i=e.b/255,a=(Mc*i+Sc*n-_c*r)/(Mc+Sc-_c),u=i-a,o=(ni*(r-a)-Bo*u)/wa,c=Math.sqrt(o*o+u*u)/(ni*a*(1-a)),s=c?Math.atan2(o,u)*kf-120:NaN;return new xn(s<0?s+360:s,c,a,e.opacity)}function wu(e,n,r,i){return arguments.length===1?jw(e):new xn(e,n,r,i??1)}function xn(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}zr(xn,wu,di(qn,{brighter(e){return e=e==null?Br:Math.pow(Br,e),new xn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ir:Math.pow(ir,e),new xn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Of,n=+this.l,r=isNaN(this.s)?0:this.s*n*(1-n),i=Math.cos(e),a=Math.sin(e);return new it(255*(n+r*(Kf*i+Io*a)),255*(n+r*(Bo*i+wa*a)),255*(n+r*(ni*i)),this.opacity)}}));var Da=e=>()=>e;function Gf(e,n){return function(r){return e+r*n}}function Uw(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(i){return Math.pow(e+i*n,r)}}function Ro(e,n){var r=n-e;return r?Gf(e,r>180||r<-180?r-360*Math.round(r/360):r):Da(isNaN(e)?n:e)}function Vw(e){return(e=+e)==1?at:function(n,r){return r-n?Uw(n,r,e):Da(isNaN(n)?r:n)}}function at(e,n){var r=n-e;return r?Gf(e,r):Da(isNaN(e)?n:e)}var Yi=function e(n){var r=Vw(n);function i(a,u){var o=r((a=Hi(a)).r,(u=Hi(u)).r),c=r(a.g,u.g),s=r(a.b,u.b),l=at(a.opacity,u.opacity);return function(f){return a.r=o(f),a.g=c(f),a.b=s(f),a.opacity=l(f),a+""}}return i.gamma=e,i}(1);function Hw(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,i=n.slice(),a;return function(u){for(a=0;a<r;++a)i[a]=e[a]*(1-u)+n[a]*u;return i}}function Kw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Gw(e,n){var r=n?n.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),u=new Array(r),o;for(o=0;o<i;++o)a[o]=Po(e[o],n[o]);for(;o<r;++o)u[o]=n[o];return function(c){for(o=0;o<i;++o)u[o]=a[o](c);return u}}function Jw(e,n){var r=new Date;return e=+e,n=+n,function(i){return r.setTime(e*(1-i)+n*i),r}}function Du(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function Yw(e,n){var r={},i={},a;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(a in n)a in e?r[a]=Po(e[a],n[a]):i[a]=n[a];return function(u){for(a in r)i[a]=r[a](u);return i}}var Eu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ka=new RegExp(Eu.source,"g");function Xw(e){return function(){return e}}function Zw(e){return function(n){return e(n)+""}}function Qw(e,n){var r=Eu.lastIndex=Ka.lastIndex=0,i,a,u,o=-1,c=[],s=[];for(e=e+"",n=n+"";(i=Eu.exec(e))&&(a=Ka.exec(n));)(u=a.index)>r&&(u=n.slice(r,u),c[o]?c[o]+=u:c[++o]=u),(i=i[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,s.push({i:o,x:Du(i,a)})),r=Ka.lastIndex;return r<n.length&&(u=n.slice(r),c[o]?c[o]+=u:c[++o]=u),c.length<2?s[0]?Zw(s[0].x):Xw(n):(n=s.length,function(l){for(var f=0,d;f<n;++f)c[(d=s[f]).i]=d.x(l);return c.join("")})}function Po(e,n){var r=typeof n,i;return n==null||r==="boolean"?Da(n):(r==="number"?Du:r==="string"?(i=Rr(n))?(n=i,Yi):Qw:n instanceof Rr?Yi:n instanceof Date?Jw:Kw(n)?Hw:Array.isArray(n)?Gw:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Yw:Du)(e,n)}function Jf(e){return function(n,r){var i=e((n=Gi(n)).h,(r=Gi(r)).h),a=at(n.s,r.s),u=at(n.l,r.l),o=at(n.opacity,r.opacity);return function(c){return n.h=i(c),n.s=a(c),n.l=u(c),n.opacity=o(c),n+""}}}var xw=Jf(Ro),e1=Jf(at);function t1(e,n){var r=at((e=gu(e)).l,(n=gu(n)).l),i=at(e.a,n.a),a=at(e.b,n.b),u=at(e.opacity,n.opacity);return function(o){return e.l=r(o),e.a=i(o),e.b=a(o),e.opacity=u(o),e+""}}function Yf(e){return function(n,r){var i=e((n=pu(n)).h,(r=pu(r)).h),a=at(n.c,r.c),u=at(n.l,r.l),o=at(n.opacity,r.opacity);return function(c){return n.h=i(c),n.c=a(c),n.l=u(c),n.opacity=o(c),n+""}}}var n1=Yf(Ro),r1=Yf(at);function Xf(e){return function n(r){r=+r;function i(a,u){var o=e((a=wu(a)).h,(u=wu(u)).h),c=at(a.s,u.s),s=at(a.l,u.l),l=at(a.opacity,u.opacity);return function(f){return a.h=o(f),a.s=c(f),a.l=s(Math.pow(f,r)),a.opacity=l(f),a+""}}return i.gamma=n,i}(1)}var i1=Xf(Ro),a1=Xf(at);function u1(e,n){n===void 0&&(n=e,e=Po);for(var r=0,i=n.length-1,a=n[0],u=new Array(i<0?0:i);r<i;)u[r]=e(a,a=n[++r]);return function(o){var c=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return u[c](o-c)}}var o1=e=>{const n=Zf(e),r=v1(n.r,n.b,n.g);return n.opacity?{...r,opacity:n.opacity}:r},c1=(e,n=.5,r=.75,i=1)=>{ie(e,"positive","index"),ie(n,"percentage","saturation"),ie(r,"percentage","lightness"),ie(i,"percentage","alpha");const a=e*137.508;if(i===1)return`hsl(${a},${n*100}%,${r*100}%)`},No=(e=on)=>e()*360,Zf=e=>{const n=zo(e),r=n.rgb();return n.opacity<1?{r:r.r,g:r.g,b:r.b,opacity:n.opacity}:{r:r.r,g:r.g,b:r.b}},zo=e=>{if(typeof e=="string"){const n=Rr(e);if(n!==null)return n}else{if(h1(e))return Gi(e.h,e.s,e.l);if(d1(e))return Hi(e.r,e.g,e.b)}throw new Error(`Could not resolve colour ${JSON.stringify(e)}`)},s1=e=>zo(e).formatHex(),ri=(e,n)=>{const r=zo(e);return r.opacity*=n,r.toString()},Qf=(e,n="black",r)=>{r===void 0&&(r=document.body);const i=getComputedStyle(r).getPropertyValue(`--${e}`).trim();return i===void 0||i.length===0?n:i},l1=(e,n,r,i)=>{if(ie(e,"percentage","amount"),typeof n!="string")throw new Error("Expected string for 'from' param");if(typeof r!="string")throw new Error("Expected string for 'to' param");let a;typeof i>"u"?a={}:typeof i=="string"?a={space:i}:a=i;const u=xf(a,[n,r]);if(u===void 0)throw new Error("Could not handle colour/space");return u(e)},xf=(e,n)=>{if(!Array.isArray(n))throw new Error("Expected one or more colours as parameters");let r;if(typeof e>"u"?r={}:typeof e=="string"?r={space:e}:r=e,!Array.isArray(n))throw new Error("Expected array for colours parameter");if(n.length<2)throw new Error("Interpolation expects at least two colours");const{space:i="rgb",long:a=!1}=r;let u;switch(i){case"lab":u=t1;break;case"hsl":u=a?e1:xw;break;case"hcl":u=a?r1:n1;break;case"cubehelix":u=a?a1:i1;break;case"rgb":u=Yi;default:u=Yi}return r.gamma&&(i==="rgb"||i==="cubehelix")&&(u=u.gamma(r.gamma)),n.length>2?u1(u,n):u(n[0],n[1])},f1=(e,n,...r)=>{if(ie(e,"aboveZero","steps"),!Array.isArray(r))throw new Error("Expected one or more colours as parameters");const i=xf(n,r);if(i===void 0)throw new Error("Could not handle colour/space");const a=1/(e-1),u=[];let o=0;for(let c=0;c<e;c++)u.push(i(o)),o+=a,o>1&&(o=1);return u},h1=e=>!(e.h===void 0||e.s===void 0||e.l===void 0),d1=e=>!(e.r===void 0||e.g===void 0||e.b===void 0),v1=(e,n,r)=>{e/=255,n/=255,r/=255;var i=Math.min(e,n,r),a=Math.max(e,n,r),u=a-i,o,c,s;return o=0,a===i?o=0:e===a?o=(n-r)/u:n===a?o=2+(r-e)/u:r===a&&(o=4+(e-n)/u),o=Math.min(o*60,360),o<0&&(o+=360),s=(i+a)/2,a===i?c=0:s<=.5?c=u/(a+i):c=u/(2-a-i),{h:o,s:c,l:s}},eh=Math.PI*2,th=e=>{if(e===null)throw Error("canvasElCtxOrQuery null. Must be a 2d drawing context or Canvas element");if(e===void 0)throw Error("canvasElCtxOrQuery undefined. Must be a 2d drawing context or Canvas element");const n=e instanceof CanvasRenderingContext2D?e:e instanceof HTMLCanvasElement?e.getContext("2d"):typeof e=="string"?ht(e).getContext("2d"):e;if(n===null)throw new Error("Could not create 2d context for canvas");return n},y1=(e,n)=>{const r=th(e);return{paths(i,a){ih(r,i,a)},line(i,a){Lo(r,i,a)},rect(i,a){oh(r,i,a)},bezier(i,a){ah(r,i,a)},connectedPoints(i,a){Ea(r,i,a)},pointLabels(i,a){ba(r,i,a)},dot(i,a){tn(r,i,a)},circle(i,a){rh(r,i,a)},arc(i,a){nh(r,i,a)},textBlock(i,a){a.bounds===void 0&&n!==void 0&&(a={...a,bounds:{...n,x:0,y:0}}),ch(r,i,a)}}},Wo=e=>m1(e.strokeStyle,e.fillStyle),Et=(e,n={},...r)=>{if(e===void 0)throw Error("ctx undefined");const i=mr(e).push(Wo(n),...r);return i.apply(),i},nh=(e,n,r={})=>{Et(e,r);const i=a=>{e.beginPath(),e.arc(a.x,a.y,a.radius,a.startRadian,a.endRadian),e.stroke()};Array.isArray(n)?n.forEach(i):i(n)},m1=(e,n)=>i=>{n&&(i.fillStyle=n),e&&(i.strokeStyle=e)},g1=(e,n,r)=>a=>{e&&(a.lineWidth=e),n&&(a.lineJoin=n),r&&(a.lineCap=r)},mr=(e,n)=>(n===void 0&&(n=$i()),{push:(...u)=>{n===void 0&&(n=$i());const o=n.push(...u);return u.forEach(c=>c(e)),mr(e,o)},pop:()=>{const u=n?.pop();return mr(e,u)},apply:()=>n===void 0?mr(e):(n.forEach(u=>u(e)),mr(e,n))}),p1=(e,n,r)=>{Et(e,r),e.moveTo(n[0].x,n[0].y),n.forEach((i,a)=>{if(a+2>=n.length)return;const u=n[a+1],o={x:(i.x+u.x)/2,y:(i.y+u.y)/2},c=(o.x+i.x)/2,s=(o.x+u.x)/2;e.quadraticCurveTo(c,u.y,o.x,o.y),e.quadraticCurveTo(s,u.y,u.x,u.y)})},rh=(e,n,r={})=>{Et(e,r);const i=a=>{e.beginPath(),e.arc(a.x,a.y,a.radius,0,eh),r.strokeStyle&&e.stroke(),r.fillStyle&&e.fill()};Array.isArray(n)?n.forEach(i):i(n)},w1=(e,n,r={})=>{Et(e,r);const i=a=>{e.beginPath();const u=a.rotation??0,o=a.startAngle??0,c=a.endAngle??eh;e.ellipse(a.x,a.y,a.radiusX,a.radiusY,u,o,c),r.strokeStyle&&e.stroke(),r.fillStyle&&e.fill()};Array.isArray(n)?n.forEach(i):i(n)},ih=(e,n,r={})=>{Et(e,r);const i=a=>{if(oa(a))uh(e,a,r);else if(kn(a))Lo(e,a,r);else throw new Error(`Unknown path type ${JSON.stringify(a)}`)};Array.isArray(n)?n.forEach(i):i(n)},Ea=(e,n,r={})=>{const i=r.loop??!1;n0(n),n.length!==0&&(n.forEach((a,u)=>_e(a,`Index ${u}`)),Et(e,r),e.beginPath(),e.moveTo(n[0].x,n[0].y),n.forEach(a=>e.lineTo(a.x,a.y)),i&&e.lineTo(n[0].x,n[0].y),(r.strokeStyle||r.strokeStyle===void 0&&r.fillStyle===void 0)&&e.stroke(),r.fillStyle&&e.fill())},ba=(e,n,r={},i)=>{n.length!==0&&(n.forEach((a,u)=>_e(a,`Index ${u}`)),Et(e,r),n.forEach((a,u)=>{const o=i!==void 0&&u<i.length?i[u]:u.toString();e.fillText(o.toString(),a.x,a.y)}))},D1=(e,n)=>{const r=e.getTransform();return{x:n.x*r.a+n.y*r.c+r.e,y:n.x*r.b+n.y*r.d+r.f}},E1=e=>{const n=document.createElement("img");return n.src=e.toDataURL("image/jpeg"),n},tn=(e,n,r)=>{r===void 0&&(r={});const i=r.radius??10;if(Et(e,r),e.beginPath(),Array.isArray(n))n.forEach(a=>{e.arc(a.x,a.y,i,0,2*Math.PI)});else{const a=n;e.arc(a.x,a.y,i,0,2*Math.PI)}(r.filled||!r.outlined)&&e.fill(),r.outlined&&e.stroke()},ah=(e,n,r)=>{oa(n)?uh(e,n,r):io(n)&&b1(e,n,r)},b1=(e,n,r={})=>{let i=Et(e,r);const{a,b:u,cubic1:o,cubic2:c}=n,s=r.debug??!1;e.beginPath(),e.moveTo(a.x,a.y),e.bezierCurveTo(o.x,o.y,c.x,c.y,u.x,u.y),e.stroke(),s&&(i=i.push(Wo({...r,strokeStyle:ri(r.strokeStyle??"silver",.6),fillStyle:ri(r.fillStyle??"yellow",.4)})),i.apply(),e.moveTo(a.x,a.y),e.lineTo(o.x,o.y),e.stroke(),e.moveTo(u.x,u.y),e.lineTo(c.x,c.y),e.stroke(),e.fillText("a",a.x+5,a.y),e.fillText("b",u.x+5,u.y),e.fillText("c1",o.x+5,o.y),e.fillText("c2",c.x+5,c.y),tn(e,o,{radius:3}),tn(e,c,{radius:3}),tn(e,a,{radius:3}),tn(e,u,{radius:3}),i=i.pop(),i.apply())},uh=(e,n,r={})=>{const{a:i,b:a,quadratic:u}=n,o=r.debug??!1;let c=Et(e,r);e.beginPath(),e.moveTo(i.x,i.y),e.quadraticCurveTo(u.x,u.y,a.x,a.y),e.stroke(),o&&(c=c.push(Wo({...r,strokeStyle:ri(r.strokeStyle??"silver",.6),fillStyle:ri(r.fillStyle??"yellow",.4)})),Ea(e,[i,u,a]),e.fillText("a",i.x+5,i.y),e.fillText("b",a.x+5,a.y),e.fillText("h",u.x+5,u.y),tn(e,u,{radius:3}),tn(e,i,{radius:3}),tn(e,a,{radius:3}),c=c.pop(),c.apply())},Lo=(e,n,r={})=>{const i=r.debug??!1,a=g1(r.lineWidth,r.lineJoin,r.lineCap);Et(e,r,a);const u=o=>{const{a:c,b:s}=o;e.beginPath(),e.moveTo(c.x,c.y),e.lineTo(s.x,s.y),i&&(e.fillText("a",c.x,c.y),e.fillText("b",s.x,s.y),tn(e,c,{radius:5,strokeStyle:"black"}),tn(e,s,{radius:5,strokeStyle:"black"})),e.stroke()};Array.isArray(n)?n.forEach(u):u(n)},A1=(e,n,r={})=>{Et(e,r);const i=a=>{Ea(e,mu(a),{...r,loop:!0}),r.debug&&ba(e,mu(a),void 0,["a","b","c"])};Array.isArray(n)?n.forEach(i):i(n)},oh=(e,n,r={})=>{Et(e,r);const i=a=>{r.filled&&e.fillRect(a.x,a.y,a.width,a.height),e.strokeRect(a.x,a.y,a.width,a.height),r.debug&&ba(e,go(a),void 0,["NW","NE","SE","SW"])};Array.isArray(n)?n.forEach(i):i(n)},gr=(e,n,r=0,i)=>{if(n==null||n.length===0)return 0;const a=e.measureText(n);return i?zc(a.width,i)+r:a.width+r},ch=(e,n,r)=>{Et(e,r);const i=r.anchorPadding??0,a=r.anchor,u=r.bounds??{x:0,y:0,width:1e6,height:1e6},o=n.map(M=>e.measureText(M)),c=o.map(M=>M.width),s=o.map(M=>M.actualBoundingBoxAscent+M.actualBoundingBoxDescent),l=Math.max(...c),f=s.reduce((M,P)=>M+P,0);let{x:d,y:g}=a;a.x+l>u.width?d=u.width-(l+i):d-=i,d<u.x&&(d=u.x+i),a.y+f>u.height?g=u.height-(f+i):g-=i,g<u.y&&(g=u.y+i),n.forEach((M,P)=>{e.fillText(M,d,g),g+=s[P]})},C1=(e,n,r)=>{const{bounds:i}=r,{horiz:a="left",vert:u="top"}=r;let o;typeof n=="string"?o=[n]:o=n,Et(e,r),e.save(),e.translate(i.x,i.y),e.textAlign="left",e.textBaseline="top";const c=i.width/2,s=i.height/2,l=o.map(M=>e.measureText(M)),f=l.map(M=>M.actualBoundingBoxAscent+M.actualBoundingBoxDescent),d=f.reduce((M,P)=>M+P,0);let g=0;u==="center"?g=s-d/2:u==="bottom"&&(g=i.height-d),o.forEach((M,P)=>{let q=0;a==="center"?q=c-l[P].width/2:a==="right"&&(q=i.width-l[P].width),e.fillText(o[P],q,g),g+=f[P]}),e.restore()},Oo={};ue(Oo,{Elements:()=>Xi,applyOpts:()=>Sn,applyPathOpts:()=>To,applyStrokeOpts:()=>jn,clear:()=>_1,createEl:()=>Aa,createOrResolve:()=>An,getBounds:()=>M1,makeHelper:()=>B1,remove:()=>wh,setBounds:()=>I1});var F1=(e,n,r)=>{const i=Aa("marker",e);if(n.markerWidth&&i.setAttribute("markerWidth",n.markerWidth?.toString()),n.markerHeight&&i.setAttribute("markerHeight",n.markerHeight?.toString()),n.orient?i.setAttribute("orient",n.orient.toString()):i.setAttribute("orient","auto-start-reverse"),n.viewBox&&i.setAttribute("viewBox",n.viewBox.toString()),n.refX&&i.setAttribute("refX",n.refX.toString()),n.refY&&i.setAttribute("refY",n.refY.toString()),r){const a=r();i.appendChild(a)}return i},Ga=(e,n,r)=>{if(e===null)return"(elem null)";const i=e.ownerSVGElement;if(i===null)throw new Error("parent for elem is null");const a=An(i,"defs","defs");let u=a.querySelector(`#${n.id}`);if(u!==null)return`url(#${n.id})`;if(n.id==="triangle")n={...n,strokeStyle:"transparent"},n.markerHeight||(n={...n,markerHeight:6}),n.markerWidth||(n={...n,markerWidth:6}),n.refX||(n={...n,refX:n.markerWidth}),n.refY||(n={...n,refY:n.markerHeight}),(!n.fillStyle||n.fillStyle==="none")&&(n={...n,fillStyle:"black"}),n.viewBox||(n={...n,viewBox:"0 0 10 10"}),u=F1(n.id,n,()=>{const o=Aa("path");return o.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),n&&Sn(o,n),o});else throw new Error(`Do not know how to make ${n.id}`);return u.id=n.id,a.appendChild(u),`url(#${n.id})`},Xi={};ue(Xi,{circle:()=>hh,circleUpdate:()=>fh,grid:()=>ph,group:()=>S1,groupUpdate:()=>dh,line:()=>Zi,lineUpdate:()=>vh,path:()=>sh,pathUpdate:()=>lh,text:()=>gh,textPath:()=>mh,textPathUpdate:()=>yh,textUpdate:()=>ko});var Ic=e=>e>=0&&e<=1?e*100+"%":e.toString(),sh=(e,n,r,i)=>{const a=An(n,"path",i),u=typeof e=="string"?e:e.join(`
`);return a.setAttributeNS(null,"d",u),n.appendChild(a),lh(a,r)},lh=(e,n)=>(n&&Sn(e,n),n&&jn(e,n),e),fh=(e,n,r)=>(e.setAttributeNS(null,"cx",n.x.toString()),e.setAttributeNS(null,"cy",n.y.toString()),e.setAttributeNS(null,"r",n.radius.toString()),r&&Sn(e,r),r&&jn(e,r),e),hh=(e,n,r,i)=>{const a=An(n,"circle",i);return fh(a,e,r)},S1=(e,n,r)=>{const i=An(n,"g",r);return dh(i,e)},dh=(e,n)=>{for(const r of n)r.parentNode!==e&&e.appendChild(r);return e},Zi=(e,n,r,i)=>{const a=An(n,"line",i);return vh(a,e,r)},vh=(e,n,r)=>(e.setAttributeNS(null,"x1",n.a.x.toString()),e.setAttributeNS(null,"y1",n.a.y.toString()),e.setAttributeNS(null,"x2",n.b.x.toString()),e.setAttributeNS(null,"y2",n.b.y.toString()),r&&Sn(e,r),r&&To(e,r),r&&jn(e,r),e),yh=(e,n,r)=>(r?.method&&e.setAttributeNS(null,"method",r.method),r?.side&&e.setAttributeNS(null,"side",r.side),r?.spacing&&e.setAttributeNS(null,"spacing",r.spacing),r?.startOffset&&e.setAttributeNS(null,"startOffset",Ic(r.startOffset)),r?.textLength&&e.setAttributeNS(null,"textLength",Ic(r.textLength)),n&&(e.textContent=n),r&&Sn(e,r),r&&jn(e,r),e),mh=(e,n,r,i,a)=>{const u=An(r,"text",a+"-text");ko(u,void 0,void 0,i);const o=An(u,"textPath",a);return o.setAttributeNS(null,"href",e),yh(o,n,i)},ko=(e,n,r,i)=>(n&&(e.setAttributeNS(null,"x",n.x.toString()),e.setAttributeNS(null,"y",n.y.toString())),r&&(e.textContent=r),i&&(Sn(e,i),i&&jn(e,i),i.anchor&&e.setAttributeNS(null,"text-anchor",i.anchor),i.align&&e.setAttributeNS(null,"alignment-baseline",i.align),(i.userSelect??!0)||(e.style.userSelect="none",e.style.webkitUserSelect="none")),e),gh=(e,n,r,i,a)=>{const u=An(n,"text",a);return ko(u,r,e,i)},ph=(e,n,r,i,a,u={})=>{u.strokeStyle||(u={...u,strokeStyle:Qf("bg-dim","silver")}),u.strokeWidth||(u={...u,strokeWidth:1});const o=Aa("g");Sn(o,u),To(o,u),jn(o,u);let c=0;for(;c<a;){const l=qi(0,c,i,c);Zi(l,o),c+=r}let s=0;for(;s<i;){const l=qi(s,0,s,a);Zi(l,o),s+=r}return e.appendChild(o),o},An=(e,n,r)=>{let i=null;if(r!==void 0&&(typeof r=="string"?i=e.querySelector(r):i=r),i===null){const a=document.createElementNS("http://www.w3.org/2000/svg",n);return e.appendChild(a),r&&typeof r=="string"&&r.startsWith("#")&&(a.id=r.substring(1)),a}return i},wh=(e,n)=>{if(typeof n=="string"){const r=e.querySelector(n);if(r===null)return;r.remove()}else n.remove()},_1=e=>{let n=e.lastElementChild;for(;n;)e.removeChild(n),n=e.lastElementChild},Aa=(e,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg",e);return n&&(r.id=n),r},To=(e,n)=>{n.markerEnd&&e.setAttribute("marker-end",Ga(e,n.markerEnd)),n.markerStart&&e.setAttribute("marker-start",Ga(e,n.markerStart)),n.markerMid&&e.setAttribute("marker-mid",Ga(e,n.markerMid))},Sn=(e,n)=>{n.fillStyle&&e.setAttributeNS(null,"fill",n.fillStyle),n.opacity&&e.setAttributeNS(null,"opacity",n.opacity.toString())},jn=(e,n)=>{n.strokeStyle&&e.setAttributeNS(null,"stroke",n.strokeStyle),n.strokeWidth&&e.setAttributeNS(null,"stroke-width",n.strokeWidth.toString()),n.strokeDash&&e.setAttribute("stroke-dasharray",n.strokeDash),n.strokeLineCap&&e.setAttribute("stroke-linecap",n.strokeLineCap)},M1=e=>{const n=e.getAttributeNS(null,"width"),r=n===null?0:parseFloat(n),i=e.getAttributeNS(null,"height"),a=i===null?0:parseFloat(i);return{width:r,height:a}},I1=(e,n)=>{e.setAttributeNS(null,"width",n.width.toString()),e.setAttributeNS(null,"height",n.height.toString())},B1=(e,n)=>(n&&(Sn(e,n),jn(e,n)),{remove:i=>wh(e,i),text:(i,a,u,o)=>gh(i,e,a,u,o),textPath:(i,a,u,o)=>mh(i,a,e,u,o),line:(i,a,u)=>Zi(i,e,a,u),circle:(i,a,u)=>hh(i,e,a,u),path:(i,a,u)=>sh(i,e,a,u),grid:(i,a,u,o,c)=>ph(e,i,a,u,o,c),query:i=>e.querySelector(i),get width(){const i=e.getAttributeNS(null,"width");return i===null?0:parseFloat(i)},set width(i){e.setAttributeNS(null,"width",i.toString())},get parent(){return e},get height(){const i=e.getAttributeNS(null,"height");return i===null?0:parseFloat(i)},set height(i){e.setAttributeNS(null,"height",i.toString())},clear:()=>{for(;e.firstChild;)e.removeChild(e.lastChild)}}),$o={};ue($o,{add:()=>Dh,calcScale:()=>qo,defaultAxis:()=>bu,draw:()=>Ar,drawValue:()=>Eh,plot:()=>T1});var R1=Math.PI*2,bu=e=>({endWith:"none",lineWidth:1,namePosition:"none",name:e,showLabels:e==="y",showLine:!0,textSize:e==="y"?20:10}),qo=(e,n,r)=>{const i=e.keys(),a=[];return i.forEach(u=>{const o=e.get(u);if(o===void 0)return;let{min:c,max:s}=ra(o),l=s-c,f;r!==void 0&&(f=r[u]),f==null&&(n.defaultSeriesVariable?f=hi.getCssVariable("accent",n.defaultSeriesColour):f=n.defaultSeriesColour),l===0&&(l=c,c=c-l/2,s=s+l/2),a.push({min:c,max:s,range:l,name:u,colour:f})}),a},Dh=(e,n,r="")=>{e.addKeyedValues(r,n)},Eh=(e,n,r)=>{const i={...r,translucentPlot:!0,leadingEdgeDot:!1};Ar(n,i),r={...r,highlightIndex:e,leadingEdgeDot:!0,translucentPlot:!1,style:"none",clearCanvas:!1},Ar(n,r)},P1=(e,n,r)=>qo(e,r,r.seriesColours).map(i=>({...i,range:n[1]-n[0],min:n[0],max:n[1]})),Ar=(e,n)=>{const{x:r,y:i,ctx:a,canvasSize:u}=n,o=n.margin,c=n.y.scaleRange?P1(e,n.y.scaleRange,n):qo(e,n,n.seriesColours);n.clearCanvas&&a.clearRect(0,0,u.width,u.height),n.debug&&(a.strokeStyle="orange",a.strokeRect(0,0,u.width,u.height)),a.translate(o,o);const s=n.plotSize??Ah(u,n),l={height:s.height+o+o,width:s.width};if((i.showLabels||i.showLine)&&(c.forEach(d=>{i.allowedSeries!==void 0&&!i.allowedSeries.includes(d.name)||N1(d,l,n)}),c.length>0&&i.showLine&&z1(l,c[0],n)),(r.showLabels||r.showLine)&&c.length>0){const d=i.labelRange?i.labelRange[0]:c[0].min;L1(s.width,er(d,c[0],s.height)+o+r.lineWidth,n)}const f={...n,plotSize:s};pa.translatePoint(a,n.pointer),c.forEach(d=>{const g=e.getSource(d.name);if(g===void 0)return;let M=e.typeName==="circular"?g.pointer-1:g.length-1;n.highlightIndex!==void 0&&(M=n.highlightIndex),a.save(),a.translate(0,o+o),O1(d,g,s,f,M),a.restore()}),n.showLegend&&(a.save(),a.translate(0,s.height+o+o+o),s.width,n.x.textSize+o+o,W1(c,n),a.restore()),a.resetTransform()},N1=(e,n,r)=>{const{ctx:i,y:a,digitsPrecision:u,margin:o}=r,{height:c}=n;r.debug&&(i.strokeStyle="purple",i.strokeRect(0,0,a.textSize,c+o)),i.fillStyle=e.colour.length>0?e.colour:"white",a.colour&&(i.fillStyle=a.colour);const s=a.labelRange?a.labelRange[0]:e.min,l=a.labelRange?a.labelRange[1]:e.max,f=a.labelRange?l-s:e.range,d=s+f/2,g=r.textHeight/2;i.textBaseline="top",i.fillText(s.toFixed(u),0,er(s,e,c)-g),i.fillText(d.toFixed(u),0,er(d,e,c)-g),i.fillText(l.toFixed(u),0,er(l,e,c)-o),i.translate(a.textSize+o,0)},z1=(e,n,r)=>{if(n===void 0)throw new Error("series undefined");const{ctx:i,y:a}=r,{height:u}=e,o=a.labelRange?a.labelRange[0]:n.min,c=a.labelRange?a.labelRange[1]:n.max,s=er(o,n,u),l=er(c,n,u);i.translate(a.lineWidth,0),i.lineWidth=a.lineWidth,i.beginPath(),i.moveTo(0,s),i.lineTo(0,l),i.strokeStyle=n.colour,a.colour&&(i.strokeStyle=a.colour),i.stroke(),i.translate(a.lineWidth,0)},W1=(e,n,r)=>{const{ctx:i}=n,a=10;let u=0;const o=n.margin*3,c=n.margin;i.lineWidth=n.lineWidth,e.forEach(s=>{i.moveTo(u,o),i.strokeStyle=s.colour,i.lineTo(u+a,o),i.stroke(),u+=a+n.margin;let l=s.name;s.lastValue&&(l+=" "+s.lastValue.toFixed(n.digitsPrecision));const f=i.measureText(l);i.fillStyle=s.colour,i.fillText(l,u,c),u+=f.width})},L1=(e,n,r)=>{const{ctx:i,x:a,y:u}=r;!a.showLine||(a.colour&&(i.strokeStyle=a.colour),i.lineWidth=a.lineWidth,i.beginPath(),i.moveTo(0,n),i.lineTo(e,n),i.stroke())},O1=(e,n,r,i,a)=>{const{ctx:u,lineWidth:o,translucentPlot:c=!1,margin:s,x:l}=i,f=i.style??"connected",d=r.height-s;let g=1;if(l.scaleRange){const A=l.scaleRange[1]-l.scaleRange[0];g=r.width/A}else i.capacity===0?g=r.width/n.length:g=r.width/i.capacity;const M=i.coalesce&&g<0?Math.floor(1/g):1;let P=0,q;i.debug&&(u.strokeStyle="green",u.strokeRect(0,0,r.width,r.height));const L=A=>c?hi.opacity(A,.2):A;f==="dots"?u.fillStyle=L(e.colour):f==="none"||(u.beginPath(),u.lineWidth=o,u.strokeStyle=L(e.colour));for(let A=0;A<n.length;A+=M){let _=er(n[A],e,d)-1;f==="dots"?(u.beginPath(),u.arc(P,_,o,0,R1),u.fill()):f==="none"||(A==0&&u.moveTo(P,_),u.lineTo(P,_)),A===a&&(q={x:P,y:_},e.lastValue=n[A]),P+=g}f==="connected"&&u.stroke(),q!==void 0&&i.leadingEdgeDot&&(u.beginPath(),u.fillStyle=L(e.colour),u.arc(q.x,q.y,3,0,2*Math.PI),u.fill())},er=(e,n,r)=>(1-(e-n.min)/n.range)*r,bh=(e,n,r,i)=>{let a=e;r.showLabels&&(a+=r.textSize),r.showLine&&(a+=r.lineWidth),(r.showLabels||r.showLine)&&(a+=e+e);let u=e,o=e+e,c=e+e;return n.showLabels?c+=n.textSize:c+=e,n.showLine&&(c+=n.lineWidth),(n.showLabels||n.showLine)&&(c+=e),i&&(c+=n.textSize),{left:a,right:u,top:o,bottom:c}},Ah=(e,n)=>{const{width:r,height:i}=e,a=bh(n.margin,n.x,n.y,n.showLegend);return{width:r-a.left-a.right,height:i-a.top-a.bottom}},k1=(e,n)=>{const{width:r,height:i}=e,a=bh(n.margin,n.x,n.y,n.showLegend);return{width:r+a.left+a.right,height:i+a.top+a.bottom}},T1=(e,n)=>{if(e===null)throw new Error("parentElOrQuery is null. Expected string or element");const r=ht(e);let i,a=!0,u=n.plotSize,o;r.nodeName==="CANVAS"?(i=r,a=!1,o={width:i.width,height:i.height}):(i=document.createElement("CANVAS"),r.append(i),u=n.plotSize,o={width:i.width,height:i.height});const c={x:0,y:0},s=A=>{c.x=A.offsetX,c.y=A.offsetY};i.addEventListener("pointermove",s);const l=i.getContext("2d"),f=n.capacity??10,d=f>0?Rs({capacity:f}):Bs(),g=l.measureText("Xy"),M=n.coalesce??!0;if(l===null)throw new Error("Drawing context not available");let P=bu("x");n.x&&(P={...P,...n.x});let q=bu("y");n.y&&(q={...q,...n.y});let L={...n,y:q,x:P,pointer:c,capacity:f,coalesce:M,plotSize:u,canvasSize:o,ctx:l,textHeight:n.textHeight??g.actualBoundingBoxAscent+g.actualBoundingBoxDescent,style:n.style??"connected",defaultSeriesColour:n.defaultSeriesColour??"yellow",margin:3,clearCanvas:!0,leadingEdgeDot:!0,debug:n.debug??!1,digitsPrecision:n.digitsPrecision??2,lineWidth:n.lineWidth??2,showLegend:n.showLegend??!1};if(u){const A=k1(u,L);i.width=A.width,i.height=A.height,L.canvasSize=A}return n.autoSizeCanvas&&Nu(i,A=>{const _=A.bounds;L={...L,plotSize:Ah(_,L),canvasSize:_},Ar(d,L)}),{drawValue:A=>{Eh(A,d,L)},dispose:()=>{i.removeEventListener("pointermove",s),a&&i.remove()},add:(A,_="",W=!1)=>{Dh(d,A,_),!W&&Ar(d,L)},draw:()=>{Ar(d,L)},clear:()=>{d.clear()}}},jo={};ue(jo,{AxisX:()=>Rh,AxisY:()=>Nh,Legend:()=>Bh,Plot:()=>U1,PlotArea:()=>Ih,Series:()=>Mh});var Uo={};ue(Uo,{Box:()=>Fh,CanvasBox:()=>Wr,CanvasMeasureState:()=>Sh,MeasureState:()=>Ch});var Di=(e,n)=>e.type==="px"&&n.type==="px"?e.value===n.value:!1,$1=(e,n)=>e===void 0&&n===void 0?!0:!(e===void 0||n===void 0||e.x&&n.x&&!Di(e.x,n.x)||e.y&&n.y&&!Di(e.y,n.y)||e.width&&n.width&&!Di(e.width,n.width)||e.height&&n.height&&!Di(e.height,n.height)),Ch=class{constructor(e){R(this,"bounds"),R(this,"pass"),R(this,"measurements"),this.bounds=e,this.pass=0,this.measurements=new Map}getSize(e){const n=this.measurements.get(e);if(n!==void 0&&!ei(n.size))return n.size}resolveToPx(e,n){if(e===void 0)return n;if(e.type==="px")return e.value;throw new Error(`Unknown unit type ${e.type}`)}},Fh=class{constructor(e,n){R(this,"visual",hu),R(this,"_desiredSize"),R(this,"_lastMeasure"),R(this,"children",[]),R(this,"_parent"),R(this,"_idMap",new Map),R(this,"debugLayout",!1),R(this,"_visible",!0),R(this,"_ready",!0),R(this,"takesSpaceWhenInvisible",!1),R(this,"needsDrawing",!0),R(this,"_needsLayout",!0),R(this,"debugHue",No()),R(this,"id"),this.id=n,this._parent=e,e?.onChildAdded(this)}hasChild(e){const n=this.children.find(i=>i===e),r=this.children.find(i=>i.id===e.id);return n!==void 0||r!==void 0}notify(e,n){this.onNotify(e,n),this.children.forEach(r=>r.notify(e,n))}onNotify(e,n){}onChildAdded(e){if(e.hasChild(this))throw new Error("Recursive");if(e===this)throw new Error("Cannot add self as child");if(this.hasChild(e))throw new Error("Child already present");this.children.push(e),this._idMap.set(e.id,e)}setReady(e,n=!1){this._ready=e,n&&this.children.forEach(r=>r.setReady(e,n))}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.onLayoutNeeded())}get desiredSize(){return this._desiredSize}set desiredSize(e){$1(e,this._desiredSize)||(this._desiredSize=e,this.onLayoutNeeded())}onLayoutNeeded(){this.notifyChildLayoutNeeded()}notifyChildLayoutNeeded(){this._needsLayout=!0,this.needsDrawing=!0,this._parent!==void 0?this._parent.notifyChildLayoutNeeded():this.update()}get root(){return this._parent===void 0?this:this._parent.root}measurePreflight(){}measureApply(e,n){let r=!0;return this._needsLayout=!1,rf(e.size,this.visual)&&(r=!1),Ht(e.size)?this.visual=e.size:this.visual={x:0,y:0,width:e.size.width,height:e.size.height},e.children.forEach(i=>{i!==void 0&&i.ref.measureApply(i,n)}),(r||n)&&(this.needsDrawing=!0,this.root.notify("measureApplied",this)),r}debugLog(e){console.log(this.id,e)}measureStart(e,n,r){this.measurePreflight();let i={ref:this,size:nf,children:[]};if(e.measurements.set(this.id,i),!this._visible&&!this.takesSpaceWhenInvisible)i.size=tf;else{let a=this._lastMeasure;if((this._needsLayout||this._lastMeasure===void 0)&&(a=this.measureSelf(e,r),this.root.notify("measured",this)),a===void 0)return;i.size=a,this._lastMeasure=a}if(i.children=this.children.map(a=>a.measureStart(e,n,i)),!(an.without(i.children,void 0).length<this.children.length))return i}measureSelf(e,n){let r=hu;if(n?n.size&&(r={x:0,y:0,width:n.size.width,height:n.size.height}):r={x:0,y:0,width:e.bounds.width,height:e.bounds.height},!ei(r))return r}updateDone(e,n){this.onUpdateDone(e,n),this.children.forEach(r=>r.updateDone(e,n))}update(e=!1){const n=this.updateBegin(e);let r=5,i=!1;for(;r--;){const a=this.measureStart(n,e);if(a!==void 0){if(this.measureApply(a,e),!this._ready)return;i=!0}}this.updateDone(n,e),i||console.warn("Ran out of measurement attempts")}},Sh=class extends Ch{constructor(e,n){super(e);R(this,"ctx"),this.ctx=n}},Wr=class extends Fh{constructor(e,n,r){super(e,r);if(R(this,"canvasEl"),n===void 0)throw new Error("canvasEl undefined");if(n===null)throw new Error("canvasEl null");this.canvasEl=n,e===void 0&&this.designateRoot()}designateRoot(){this.canvasEl.addEventListener("pointermove",e=>{const n={x:e.offsetX,y:e.offsetY};this.notifyPointerMove(n)}),this.canvasEl.addEventListener("pointerleave",e=>{this.notifyPointerLeave()}),this.canvasEl.addEventListener("click",e=>{const n={x:e.offsetX,y:e.offsetY};this.notifyClick(n)})}onClick(e){}notifyClick(e){if(!ei(this.visual)&&Ui(this.visual,e)){const n=V.subtract(e,this.visual.x,this.visual.y);this.onClick(n),this.children.forEach(r=>r.notifyClick(n))}}notifyPointerLeave(){this.onPointerLeave(),this.children.forEach(e=>e.notifyPointerLeave())}notifyPointerMove(e){if(!ei(this.visual)&&Ui(this.visual,e)){const n=V.subtract(e,this.visual.x,this.visual.y);this.onPointerMove(n),this.children.forEach(r=>r.notifyPointerMove(n))}}onPointerLeave(){}onPointerMove(e){}updateBegin(){const e=this.canvasEl.getContext("2d");if(e===null)throw new Error("Context unavailable");const n=this.canvasEl.getBoundingClientRect();return new Sh({width:n.width,height:n.height},e)}onUpdateDone(e,n){if(!this.needsDrawing&&!n)return;const r=this.canvasEl.getContext("2d");if(r===null)throw new Error("Context unavailable");r.save(),r.translate(this.visual.x,this.visual.y);const i=this.visual;this.debugLayout&&(r.lineWidth=1,r.strokeStyle=`hsl(${this.debugHue}, 100%, 50%)`,r.strokeRect(0,0,i.width,i.height),r.fillStyle=r.strokeStyle,r.fillText(this.id,10,10,i.width),r.beginPath(),r.moveTo(0,0),r.lineTo(i.width,i.height),r.stroke()),this.drawSelf(r),this.needsDrawing=!1,r.restore()}drawSelf(e){}},_h=class{constructor(e){R(this,"data"),R(this,"series"),R(this,"dirty",!1),R(this,"type","array"),R(this,"_range"),this.series=e,this.data=[],this.dirty=!0}clear(){this.set([]),this._range=void 0}set(e){this.data=e,this.dirty=!0}get length(){return this.data.length}get range(){return!this.dirty&&this._range!==void 0?this._range:(this.dirty=!1,this._range=an.minMaxAvg(this.data),{...this._range,changed:!0})}add(e){this.data=[...this.data,e],this.dirty=!0}},q1=class extends _h{constructor(e){super(e);R(this,"desiredDataPointMinWidth",5)}add(e){const n=this.series.lastPxPerPt;if(n>-1&&n<this.desiredDataPointMinWidth){const r=Math.floor(this.desiredDataPointMinWidth/n),i=[...this.data.slice(r),e];super.set(i)}else super.add(e)}},Mh=class{constructor(e,n,r,i){if(this.plot=r,R(this,"name"),R(this,"colour"),R(this,"source"),R(this,"drawingStyle"),R(this,"width",3),R(this,"dataHitPoint"),R(this,"tooltip"),R(this,"precision",2),R(this,"axisRange"),R(this,"lastPxPerPt",-1),R(this,"_visualRange"),R(this,"_visualRangeStretch"),this.name=e,this.drawingStyle=i.drawingStyle??"line",this.colour=i.colour,this.width=i.width??3,this.axisRange=i.axisRange??{min:Number.NaN,max:Number.NaN},this._visualRange={...this.axisRange},this._visualRangeStretch=i.visualRangeStretch??!0,n==="array")this.source=new _h(this);else if(n==="stream")this.source=new q1(this);else throw new Error("Unknown sourceType. Expected array|stream")}formatValue(e){return e.toFixed(this.precision)}get visualRange(){let e=this._visualRange;const n=this.source.range;let r=!1;if(n.changed)if(this._visualRangeStretch){const i=Math.min(Ya(e.min,n.min),n.min),a=Math.max(Ya(e.max,n.max),n.max);(i!==e.min||a!==e.max)&&(e={min:i,max:a},r=!0)}else Ph(n,e)||(e=n,r=!0);return this._visualRange=e,{...e,changed:r}}scaleValue(e){if(this.source===void 0)return e;const n=this.visualRange;return n.min==n.max?.5:Dn(e,n.min,n.max)}add(e){ie(e,"","value"),this.source.add(e),this.plot.plotArea.needsDrawing=!0}clear(){this.source.clear(),this._visualRange={...this.axisRange},this.plot.plotArea.needsDrawing=!0}},Ih=class extends Wr{constructor(e){super(e,e.canvasEl,"PlotArea");this.plot=e,R(this,"paddingPx",3),R(this,"piPi",Math.PI*2),R(this,"pointerDistanceThreshold",20),R(this,"lastRangeChange",0),R(this,"pointer")}clear(){this.lastRangeChange=0,this.pointer=void 0}measureSelf(e,n){const r=e.getSize("AxisY");if(r===void 0)return;const i=e.getSize("Legend");if(i===void 0)return;const a=e.getSize("AxisX");if(a!==void 0)return{x:r.width,y:0,width:e.bounds.width-r.width,height:e.bounds.height-i.height-a.height}}onNotify(e,n){e==="measureApplied"&&n===this.plot.axisY&&(this._needsLayout=!0),e==="measureApplied"&&n===this.plot.legend&&(this._needsLayout=!0)}onPointerLeave(){[...this.plot.series.values()].forEach(n=>{n.tooltip=void 0}),this.pointer=void 0,this.plot.legend.onLayoutNeeded()}onPointerMove(e){this.pointer=e,this.plot.legend.onLayoutNeeded()}measurePreflight(){this.updateTooltip()}updateTooltip(){const e=this.pointer;if(e===void 0)return;[...this.plot.series.values()].forEach(r=>{if(e===void 0){r.tooltip=void 0;return}if(r.dataHitPoint===void 0)return;const i=r.dataHitPoint(e);i[0]!==void 0&&(i[1]>this.pointerDistanceThreshold||(r.tooltip=r.formatValue(i[0].value)))}),this.plot.legend.needsDrawing=!0}drawSelf(e){if(this.plot.frozen)return;const n=this.plot.seriesArray();e.clearRect(0,0,this.visual.width,this.visual.height),n.forEach(r=>{if(r.source.type==="array"||r.source.type==="stream"){const i=r.source;if(i.data===void 0)return;const a=[...i.data];this.drawDataSet(r,a,e)}else console.warn(`Unknown data source type ${r.source.type}`)})}computeY(e,n){const r=e.scaleValue(n);return Ni(r)*this.visual.height+this.paddingPx}drawDataSet(e,n,r){const i=this.paddingPx+e.width,a=Be.subtract(this.visual,i*2,i*3.5),u=a.width/n.length;e.lastPxPerPt=u;let o=i;r.strokeStyle=e.colour,r.lineWidth=e.width;const c=[];if(e.dataHitPoint=s=>{const l=c.map(g=>V.distanceToExterior(s,g)),f=As(...l);return[c[f],l[f]]},e.drawingStyle==="line"){let s=0;r.beginPath();for(let l=0;l<n.length;l++){const f=Ut(e.scaleValue(n[l]));s=i+this.paddingPx+a.height*Ni(f),c.push({x:o,y:s,index:l,value:n[l]}),l==0?r.moveTo(o+u/2,s):r.lineTo(o+u/2,s),s>this.visual.height&&console.warn(s+" h: "+this.visual.height),o+=u}r.strokeStyle=e.colour,r.stroke()}else if(e.drawingStyle==="dotted"){let s=0;r.fillStyle=e.colour;for(let l=0;l<n.length;l++){const f=e.scaleValue(n[l]);s=i+a.height*Ni(f),r.beginPath(),r.arc(o+u/2,s,e.width,0,this.piPi),r.fill(),c.push({radius:e.width,x:o,y:s,index:l,value:n[l]}),o+=u}}else if(e.drawingStyle==="bar"){r.fillStyle=e.colour;const s=Math.ceil(u*.1);for(let l=0;l<n.length;l++){const f=e.scaleValue(n[l]),d=a.height*f,g={x:o+s,y:a.height-d+i,width:u-s,height:d,index:l,value:n[l]};r.fillRect(g.x,g.y,g.width,g.height),c.push(g),o+=u}}}},Bh=class extends Wr{constructor(e){super(e,e.canvasEl,"Legend");this.plot=e,R(this,"sampleSize",{width:10,height:10}),R(this,"padding",3),R(this,"widthSnapping",20)}clear(){}measureSelf(e,n){const r=e.measurements.get("AxisY"),i=this.sampleSize,a=this.widthSnapping,u=this.padding,o=e.ctx;if(r===void 0)return;const c=e.bounds.width-r.size.width,s=this.plot.seriesArray();let l=u;for(let g=0;g<s.length;g++)l+=i.width+u,l+=gr(o,s[g].name,u,a),l+=gr(o,s[g].tooltip,u,a);const d=Math.max(1,Math.ceil(l/c))*(this.sampleSize.height+this.padding+this.padding);return{x:r.size.width,y:e.bounds.height-d,width:c,height:d}}drawSelf(e){const n=this.plot.seriesArray(),r=this.sampleSize,i=this.padding,a=this.widthSnapping;let u=i,o=i;e.clearRect(0,0,this.visual.width,this.visual.height);for(let c=0;c<n.length;c++){const s=n[c];e.fillStyle=s.colour,e.fillRect(u,o,r.width,r.height),u+=r.width+i,e.textBaseline="middle",e.fillText(s.name,u,o+r.height/2),u+=gr(e,s.name,i,a),s.tooltip&&(e.fillStyle=this.plot.axisColour,e.fillText(s.tooltip,u,o+r.height/2),u+=gr(e,s.tooltip,i,a)),u+=i,u>this.visual.width-100&&(u=i,o+=r.height+i+i)}}onNotify(e,n){e==="measureApplied"&&n===this._parent.axisY&&(this._needsLayout=!0)}},Rh=class extends Wr{constructor(e){super(e,e.canvasEl,"AxisX");this.plot=e,R(this,"paddingPx",2),R(this,"colour")}clear(){}onNotify(e,n){e==="measureApplied"&&n===this.plot.axisY&&(this._needsLayout=!0),e==="measureApplied"&&n===this.plot.legend&&this.onLayoutNeeded()}drawSelf(e){const n=this.plot,r=this.visual,i=n.axisWidth,a=this.colour??n.axisColour;e.strokeStyle=a,e.clearRect(0,0,r.width,r.height),e.beginPath(),e.lineWidth=i,e.moveTo(0,i/2),e.lineTo(r.width,i/2),e.stroke()}measureSelf(e,n){const r=this.plot,i=e.measurements.get("AxisY");if(i===void 0)return;const a=e.measurements.get("Legend");if(a===void 0)return;const u=r.axisWidth+this.paddingPx;return{x:i.size.width,y:e.bounds.height-u-a.size.height,width:e.bounds.width-i.size.width,height:u}}},Ph=(e,n)=>e.max===n.max&&e.min===n.min,j1=e=>e.max===e.min,Nh=class extends Wr{constructor(e){super(e,e.canvasEl,"AxisY");this.plot=e,R(this,"_maxDigits",1),R(this,"seriesToShow"),R(this,"paddingPx",2),R(this,"colour"),R(this,"lastRange"),R(this,"lastPlotAreaHeight",0),this.lastRange={min:0,max:0}}clear(){this.lastRange={min:0,max:0},this.lastPlotAreaHeight=0}measurePreflight(){const e=this.getSeries();e!==void 0&&!Ph(e.visualRange,this.lastRange)&&(this._needsLayout=!0,this.needsDrawing=!0)}onNotify(e,n){const r=this.plot.plotArea;e==="measureApplied"&&n===r&&r.visual.height!==this.lastPlotAreaHeight&&(this.lastPlotAreaHeight=r.visual.height,this.needsDrawing=!0)}measureSelf(e){const n=e,r=this.paddingPx;let i=this.plot.axisWidth+r;const a=this.getSeries();if(a!==void 0){const o=a.visualRange;this._maxDigits=Math.ceil(o.max).toString().length+a.precision+1;const c="9".repeat(this._maxDigits);i+=gr(n.ctx,c,r*2)}const u=e.resolveToPx(this.desiredSize?.width,i);return{x:0,y:0,width:u,height:e.bounds.height}}drawSelf(e){const n=this.getSeries();if(n!==void 0)this.seriesAxis(n,e);else{if(this.seriesToShow===void 0)return;console.warn(`Plot AxisY series '${this.seriesToShow}' is missing.`)}}getSeries(){return this.seriesToShow===void 0?this.plot.seriesArray()[0]:this.plot.series.get(this.seriesToShow)}seriesAxis(e,n){const r=this.plot,i=r.plotArea,a=this.visual,u=this.paddingPx,o=e.visualRange,c=r.axisWidth,s=this.colour??r.axisColour;if(n.strokeStyle=s,n.fillStyle=s,Number.isNaN(o.min)&&Number.isNaN(o.max))return;this.lastRange=o,n.clearRect(0,0,a.width,a.height),n.beginPath(),n.lineWidth=c;const l=a.width-c/2;n.moveTo(l,i.paddingPx+c),n.lineTo(l,i.visual.height+c),n.stroke(),n.textBaseline="top";const f=a.width-u*4;j1(o)?Ja(n,e.formatValue(o.max),d=>[f-d.width,i.computeY(e,o.max)-u*4]):(Ja(n,e.formatValue(o.max),d=>[f-d.width,i.computeY(e,o.max)+c/2]),Ja(n,e.formatValue(o.min),d=>[f-d.width,i.computeY(e,o.min)-5]))}},Ja=(e,n,r)=>{const i=e.measureText(n),a=r(i);e.fillText(n,a[0],a[1])},U1=class extends Wr{constructor(e,n={}){if(e===void 0)throw new Error("canvasEl undefined");super(void 0,e,"Plot");R(this,"plotArea"),R(this,"legend"),R(this,"axisX"),R(this,"axisY"),R(this,"axisColour"),R(this,"axisWidth"),R(this,"series"),R(this,"_frozen",!1),R(this,"defaultSeriesOpts"),n.autoSize&&Nu(e,r=>{this.update(!0)}),this.axisColour=n.axisColour??"black",this.axisWidth=n.axisWidth??3,this.series=new Map,this.plotArea=new Ih(this),this.legend=new Bh(this),this.axisX=new Rh(this),this.axisY=new Nh(this)}clearSeries(){for(const e of this.series.values())e.clear()}clear(){this.series=new Map,this.plotArea.clear(),this.legend.clear(),this.axisX.clear(),this.axisY.clear(),this.update(!0)}get frozen(){return this._frozen}set frozen(e){this._frozen=e,e?(this.canvasEl.classList.add("frozen"),this.canvasEl.title="Plot frozen. Tap to unfreeze"):(this.canvasEl.title="",this.canvasEl.classList.remove("frozen"))}seriesArray(){return[...this.series.values()]}get seriesLength(){return this.series.size}plot(e){Mu(e).forEach(r=>{let i=this.series.get(r);i===void 0&&(i=this.createSeries(r,"stream"),i.drawingStyle="line"),i.add(ea(e,r))})}createSeriesFromObject(e,n=""){const r=Object.keys(e),i=a=>{const u=e[a];return typeof u=="object"?this.createSeriesFromObject(u,n+a+"."):typeof u=="number"?[this.createSeries(a,"stream")]:[]};return r.flatMap(i)}createSeries(e,n="array",r){const i=this.seriesLength;if(e===void 0&&(e=`series-${i}`),this.series.has(e))throw new Error(`Series name '${e}' already in use`);let a={colour:`hsl(${i*25%360}, 70%,50%)`,...r};this.defaultSeriesOpts&&(a={...this.defaultSeriesOpts,...a});const u=new Mh(e,n,this,a);return this.series.set(e,u),this.setReady(!0,!0),this.plotArea.needsDrawing=!0,u}},Vo={};ue(Vo,{create:()=>V1});var V1=e=>new H1(e),Kr,Ri,vr,Gr,H1=class{constructor(e){$e(this,Kr,new Map),$e(this,Ri,new Map),R(this,"fallbacks"),$e(this,vr,0),$e(this,Gr,void 0),e!==void 0?this.fallbacks=e:this.fallbacks=["red","blue","green","orange"],Ce(this,Gr,document.body)}setElementBase(e){Ce(this,Gr,e)}add(e,n){J(this,Kr).set(e,n)}alias(e,n){J(this,Ri).set(e,n)}get(e,n){const r=J(this,Ri).get(e);r!==void 0&&(e=r);const i=J(this,Kr).get(e);if(i!==void 0)return i;const a="--"+e;let u=getComputedStyle(J(this,Gr)).getPropertyValue(a).trim();if(u===void 0||u.length===0){if(n!==void 0)return n;u=this.fallbacks[J(this,vr)],Id(this,vr)._++,J(this,vr)===this.fallbacks.length&&Ce(this,vr,0)}return u}getOrAdd(e,n){if(this.has(e))return this.get(e);const r=this.get(e,n);return this.add(e,r),r}has(e){return J(this,Kr).has(e)}};Kr=new WeakMap;Ri=new WeakMap;vr=new WeakMap;Gr=new WeakMap;try{typeof window<"u"&&(window.ixfx={...window.ixfx,Visuals:{SceneGraph:Uo,Plot2:jo,Drawing:pa,Svg:Oo,Plot:$o,Palette:Vo,Colour:hi,Video:_o}})}catch{}var K1={};ue(K1,{DragDrop:()=>Oh,Forms:()=>Lc,clear:()=>lv,copyToClipboard:()=>hv,createAfter:()=>uv,createIn:()=>ov,cycleCssClass:()=>rv,dataTable:()=>sv,dataTableList:()=>cv,defaultErrorHandler:()=>x1,fullSizeCanvas:()=>nv,fullSizeElement:()=>Kc,getTranslation:()=>av,log:()=>J1,parentSize:()=>iv,parentSizeCanvas:()=>Nu,pointerVisualise:()=>Q1,reconcileChildren:()=>dv,resizeObservable:()=>Wu,resolveEl:()=>ht,rx:()=>Y1,themeChangeObservable:()=>fv,windowResize:()=>zu});var G1=(e,n)=>{const r=document.createElement("style");r.textContent=n;let i;return e.shadowRoot?(i=e.shadowRoot,i.innerHTML=""):i=e.attachShadow({mode:"open"}),i.appendChild(r),i},J1=(e,n={})=>{const{capacity:r=0,monospaced:i=!0,timestamp:a=!1,collapseDuplicates:u=!0,css:o=""}=n;let c=0,s,l=0;const f=ht(e),g=G1(f,`
  .log {
    font-family: ${i?'Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", Monaco, "Courier New", Courier, monospace':"normal"};
    background-color: var(--code-background-color);
    padding: var(--padding1, 0.2em);
    overflow-y: auto;
    height:100%;
  }
  .timestamp {
    margin-right: 0.5em;
    opacity: 0.5;
    font-size: 70%;
    align-self: center;
  }
  .line {
    display: flex;
    padding-bottom: 0.1em;
    padding-top: 0.1em;
  }
  .line:hover {
  
  }
  .error {
    color: red;
  }
  .badge {
    border: 1px solid currentColor;
    align-self: center;
    font-size: 70%;
    padding-left: 0.2em;
    padding-right: 0.2em;
    border-radius: 1em;
    margin-left: 0.5em;
    margin-right: 0.5em;
  }
  .msg {
    flex: 1;
    word-break: break-word;
  }
  ${o}
  `),M=document.createElement("div");M.className="log",g.append(M);const P=k=>{const C=document.createElement("div");if(typeof k=="string")C.innerHTML=k;else if(k instanceof Error){const S=k.stack;S===void 0?C.innerHTML=k.toString():C.innerHTML=S.toString()}else C.innerHTML=k;C.classList.add("error"),A(C),s=void 0,l=0};let q=0;const L=(k="")=>{let C;const S=window.performance.now()-q;if(!(n.minIntervalMs&&S<n.minIntervalMs))if(q=window.performance.now(),typeof k=="object"?C=JSON.stringify(k):k===void 0?C="(undefined)":k===null?C="(null)":typeof k=="number"?(Number.isNaN(C)&&(C="(NaN)"),C=k.toString()):C=k,C.length===0){const B=document.createElement("hr");s=void 0,A(B)}else if(C===s&&u){const B=M.firstElementChild;let U=B.querySelector(".badge");return U===null&&(U=document.createElement("div"),U.className="badge",B.insertAdjacentElement("beforeend",U)),B!==null&&(U.textContent=(++l).toString()),B}else{const B=document.createElement("div");return B.innerText=C,A(B),s=C,B}},A=k=>{if(a){const C=document.createElement("div"),S=document.createElement("div");S.className="timestamp",S.innerText=new Date().toLocaleTimeString(),C.append(S,k),k.classList.add("msg"),C.classList.add("line"),k=C}else k.classList.add("line","msg");if(n.reverse?M.appendChild(k):M.insertBefore(k,M.firstChild),r>0&&++c>r*2)for(;c>r;)M.lastChild?.remove(),c--;n.reverse&&(M.scrollTop=M.scrollHeight),l=0};return{error:P,log:L,append:A,clear:()=>{M.innerHTML="",s=void 0,l=0,c=0},dispose:()=>{M.remove()},get isEmpty(){return c===0}}},Y1=(e,n,r)=>{const i=ht(e),a=ki(i,n),u={},o=()=>{Object.keys(u).forEach(l=>{delete u[l]})},c=s=>(s.subscribe({next:l=>{Object.assign(u,l)}}),{value:u,clear:o});return r===void 0?c(a):r.pluck?c(a.pipe(Oi(s=>s[r.pluck]))):r.transform?c(a.pipe(Oi(s=>r.transform(s)))):c(a)},zh=class{constructor(e){R(this,"store"),R(this,"gog"),this.store=new Map,this.gog=Qc(this.store,e)}get size(){return this.store.size}has(e){return this.store.has(e)}async seen(e,...n){return(await this.getTrackedValue(e,...n)).seen(...n)}async getTrackedValue(e,...n){if(e===null)throw new Error("id parameter cannot be null");if(e===void 0)throw new Error("id parameter cannot be undefined");return await this.gog(e,n[0])}delete(e){this.store.delete(e)}reset(){this.store=new Map}*ids(){yield*this.store.keys()}*tracked(){yield*this.store.values()}*trackedByAge(){const e=Array.from(this.store.values());e.sort((n,r)=>{const i=n.elapsed,a=r.elapsed;return i===a?0:i>a?-1:1});for(const n of e)yield n}*valuesByAge(){for(const e of this.trackedByAge())yield e.last}*last(){for(const e of this.store.values())yield e.last}*initialValues(){for(const e of this.store.values())yield e.initial}get(e){return this.store.get(e)}},X1=class extends xu{constructor(e,n={}){super(e,n);R(this,"values"),this.values=[]}onTrimmed(){}trimStore(e){return e>=this.values.length?this.values.length:(this.values=this.values.slice(-e),this.values.length)}onReset(){this.values=[]}seenImpl(e){const n=e.map(i=>"at"in i?i:{...i,at:Date.now()}),r=n.at(-1);return this.storeIntermediate?this.values.push(...n):this.values.length===0?this.values.push(r):this.values.length===2?this.values[1]=r:this.values.length===1&&this.values.push(r),n}get last(){return this.values.length===1?this.values[0]:this.values.at(-1)}get initial(){return this.values.at(0)}get size(){return this.values.length}get elapsed(){return Date.now()-this.values[0].at}},Ho=class extends X1{constructor(e,n={}){super(e,n);this.id=e,R(this,"initialRelation"),R(this,"lastResult")}onTrimmed(){this.initialRelation=void 0}get x(){return this.last.x}get y(){return this.last.y}onReset(){super.onReset(),this.lastResult=void 0,this.initialRelation=void 0}seen(...e){const n=this.last;super.seen(...e);const r=this.last;if(this.initialRelation===void 0&&this.initial)this.initialRelation=lu(this.initial);else if(this.initialRelation===void 0)throw new Error("Bug: No initialRelation, and this.inital is undefined?");const i=lu(n),a={...this.initialRelation(r)},u={...i(r),speed:this.values.length<2?0:nn(n,r)/(r.at-n.at)},o={fromInitial:a,fromLast:u,values:[...this.values]};return this.lastResult=o,o}get line(){return this.values.length===1?[]:sl(...this.values)}distanceFromStart(){const e=this.initial;return this.values.length>=2&&e!==void 0?rn(e,this.last):0}difference(){const e=this.initial;return this.values.length>=2&&e!==void 0?or(this.last,e):vl}angleFromStart(){const e=this.initial;if(e!==void 0&&this.values.length>2)return pr(e,this.last)}get length(){if(this.values.length===1)return 0;const e=this.line;return nn(e)}},Wh=class extends zh{constructor(e={}){super((n,r)=>{if(r===void 0)throw new Error("Requires start point");const i=new Ho(n,e);return i.seen(r),i})}},Lh=(e={})=>new Wh(e),Z1=(e,n={})=>new Ho(e??"",n),Q1=(e,n={})=>{const r=n.touchRadius??45,i=n.touchRadius??20,a=n.trace??!1,u=n.hue??100,o=`hsla(${u}, 100%, 10%, 10%)`;let c=u;const s=ht(e),l=Lh({storeIntermediate:a}),f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.id="pointerVis",f.style.zIndex="-1000",f.style.position="fixed",f.style.top="0",f.style.left="0",f.style.width="100%",f.style.height="100%",f.style.boxSizing="border-box",f.style.border="3px solid red",f.style.pointerEvents="none",f.style.touchAction="none",Kc(f);let d=0;const g=async P=>{const q=P.pointerId.toString();l.delete(q),c=u,f.querySelector(`#pv-start-${q}`)?.remove();for(let L=0;L<d+10;L++)f.querySelector(`#pv-progress-${q}-${L}`)?.remove();d=0},M=async P=>{const q=P.pointerId.toString(),L={x:P.x,y:P.y},A=P.pointerType;if(P.type==="pointermove"&&!l.has(q))return;const _=await l.seen(q,L);if(_.values.length===1){const C=Xi.circle({..._.values[0],radius:A==="touch"?r:i},f,{fillStyle:o},`#pv-start-${q}`);C.style.pointerEvents="none",C.style.touchAction="none"}const W=`hsla(${c}, 100%, 50%, 50%)`,k=Xi.circle({...L,radius:A==="touch"?r:i},f,{fillStyle:W},`#pv-progress-${q}-${_.values.length}`);return k.style.pointerEvents="none",k.style.touchAction="none",c+=1,d=_.values.length,!0};document.body.appendChild(f),s.addEventListener("pointerdown",M),s.addEventListener("pointermove",M),s.addEventListener("pointerup",g),s.addEventListener("pointerleave",g),s.addEventListener("contextmenu",P=>{P.preventDefault()})},x1=()=>{let e=!0;const n=document.createElement("div");n.style.color="black",n.style.border="2px solid red",n.style.backgroundColor="hsl(0, 80%, 90%)",n.style.padding="1em",n.style.display="none",n.style.top="1em",n.style.left="1em",n.style.position="absolute",n.style.fontFamily="monospace";const r=document.createElement("div");r.style.maxWidth="50vw",r.style.maxHeight="50vh",r.style.overflowY="scroll",n.innerHTML="<h1>Error</h1>",n.append(r);const i=s=>{s.style.padding="0.3em",s.style.marginTop="1em"},a=document.createElement("button");a.innerText="Close",a.onclick=()=>{c()};const u=document.createElement("button");u.innerText="Stop displaying errors",u.onclick=()=>{e=!1,c()},i(a),i(u),n.append(a),n.append(u),document.body.append(n);const o=s=>{n.style.display="inline",s.stack?r.innerHTML+=`<pre>${s.stack}</pre>`:r.innerHTML+=`<p>${s}</p>`},c=()=>{n.style.display="none"};return window.onerror=(s,l,f,d,g)=>{e&&(g?(console.log(g),o(g)):(console.log(s),o(s)))},window.addEventListener("unhandledrejection",s=>{console.log(s.reason),e&&o(s.reason)}),{show:o,hide:c}},Oh={};ue(Oh,{draggable:()=>eD});var eD=(e,n)=>{let r=V.Placeholder,i;const a=()=>{e.classList.contains("drag-sel")&&e.classList.remove("drag-sel")},u=d=>{e.classList.contains("drag-sel")?e.classList.remove("drag-sel"):e.classList.add("drag-sel"),d.stopPropagation()};e.ownerDocument.addEventListener("click",a),e.addEventListener("click",u);const o=()=>{e.classList.remove("drag-progress"),e.ownerDocument.removeEventListener("pointermove",s),e.ownerDocument.removeEventListener("pointerup",l),e.ownerDocument.removeEventListener("pointercancel",f)},c=()=>{console.log("drag dispose"),e.classList.contains("drag-progress")?f(null,"dispose"):o(),e.ownerDocument.removeEventListener("click",a),e.removeEventListener("click",u)},s=d=>{d.preventDefault(),d.stopPropagation();const M={delta:V.isPlaceholder(r)?{x:d.offsetX,y:d.offsetY}:{x:d.x-r.x,y:d.y-r.y},initial:r,token:i};typeof n.progress<"u"&&!n.progress(M)&&f(null,"discontinued")},l=d=>{o();const g={x:d.x-r.x,y:d.y-r.y},M={initial:r,token:i,delta:g};typeof n.success<"u"&&n.success(M)},f=(d,g="pointercancel")=>{o();const M={token:i,initial:r,delta:{x:-1,y:-1}};typeof n.abort<"u"&&n.abort(g,M)};return e.addEventListener("pointerdown",d=>{if(!e.classList.contains("drag-sel"))return;r={x:d.x,y:d.y};const M=typeof n.start<"u"?n.start():{allow:!0,token:i};!M.allow||(i=M.token,e.classList.add("drag-progress"),e.ownerDocument.addEventListener("pointermove",s),e.ownerDocument.addEventListener("pointerup",l),e.ownerDocument.addEventListener("pointercancel",f))}),c},tD={};ue(tD,{Easings:()=>Ju,Forces:()=>Go,Oscillators:()=>Xo,adsr:()=>Ko,adsrSample:()=>$h,defaultAdsrOpts:()=>Th,jitter:()=>Jh,pingPong:()=>Ou,pingPongPercent:()=>Jc});var kh={};ue(kh,{adsr:()=>Ko,adsrSample:()=>$h,defaultAdsrOpts:()=>Th});var Th=()=>({attackBend:-1,decayBend:-.3,releaseBend:-.3,peakLevel:1,initialLevel:0,sustainLevel:.6,releaseLevel:0,attackDuration:600,decayDuration:200,releaseDuration:800,shouldLoop:!1}),wt,Pi,gn,Kn,Pn,nD=class extends Ln{constructor(e){super();$e(this,wt,void 0),$e(this,Pi,void 0),$e(this,gn,void 0),$e(this,Kn,void 0),$e(this,Pn,void 0),R(this,"attackDuration"),R(this,"decayDuration"),R(this,"releaseDuration"),R(this,"decayDurationTotal"),R(this,"shouldLoop"),this.attackDuration=e.attackDuration??300,this.decayDuration=e.decayDuration??500,this.releaseDuration=e.releaseDuration??1e3,this.shouldLoop=e.shouldLoop??!1;const n={attack:["decay","release"],decay:["sustain","release"],sustain:["release"],release:["complete"],complete:null};Ce(this,wt,new ur("attack",n)),J(this,wt).addEventListener("change",r=>{r.newState==="release"&&J(this,Pn)&&J(this,gn)?.reset(),super.fireEvent("change",r)}),J(this,wt).addEventListener("stop",r=>{super.fireEvent("complete",r)}),Ce(this,Pi,hn),Ce(this,Kn,Ce(this,Pn,!1)),this.decayDurationTotal=this.attackDuration+this.decayDuration}switchState(){if(J(this,gn)===void 0)return!1;let e=J(this,gn).elapsed;const n=J(this,Pn)&&!J(this,Kn);let r=!1;do switch(r=!1,J(this,wt).state){case"attack":(e>this.attackDuration||n)&&(J(this,wt).next(),r=!0);break;case"decay":(e>this.decayDurationTotal||n)&&(J(this,wt).next(),r=!0);break;case"sustain":(!J(this,Kn)||n)&&(e=0,J(this,wt).next(),J(this,gn)?.reset(),r=!0);break;case"release":e>this.releaseDuration&&(J(this,wt).next(),r=!0);break;case"complete":this.shouldLoop&&this.trigger(J(this,Pn))}while(r);return r}computeRaw(e=!0){if(J(this,gn)===void 0)return[void 0,0,J(this,wt).state];e&&this.switchState();const n=J(this,wt).state,r=J(this,gn).elapsed;let i=0;const a=J(this,wt).state;switch(a){case"attack":i=r/this.attackDuration;break;case"decay":i=(r-this.attackDuration)/this.decayDuration;break;case"sustain":i=1;break;case"release":i=Math.min(r/this.releaseDuration,1);break;case"complete":return[void 0,1,n];default:throw new Error(`State machine in unknown state: ${a}`)}return[a,i,n]}get isDone(){return J(this,wt).isDone}onTrigger(){}trigger(e=!1){this.onTrigger(),J(this,wt).reset(),Ce(this,gn,J(this,Pi).call(this)),Ce(this,Kn,e),Ce(this,Pn,e)}compute(){}release(){this.isDone||!J(this,Pn)||(Ce(this,Kn,!1),this.compute())}};wt=new WeakMap;Pi=new WeakMap;gn=new WeakMap;Kn=new WeakMap;Pn=new WeakMap;var rD=class extends nD{constructor(e){super(e);R(this,"attackPath"),R(this,"decayPath"),R(this,"releasePath"),R(this,"initialLevel"),R(this,"peakLevel"),R(this,"releaseLevel"),R(this,"sustainLevel"),R(this,"attackBend"),R(this,"decayBend"),R(this,"releaseBend"),R(this,"initialLevelOverride"),R(this,"retrigger"),R(this,"releasedAt"),this.initialLevel=e.initialLevel??0,this.peakLevel=e.peakLevel??1,this.releaseLevel=e.releaseLevel??0,this.sustainLevel=e.sustainLevel??.75,this.retrigger=e.retrigger??!0,this.attackBend=e.attackBend??0,this.releaseBend=e.releaseBend??0,this.decayBend=e.decayBend??0;const n=1;this.attackPath=Mi(wr({x:0,y:this.initialLevel},{x:n,y:this.peakLevel},-this.attackBend)),this.decayPath=Mi(wr({x:0,y:this.peakLevel},{x:n,y:this.sustainLevel},-this.decayBend)),this.releasePath=Mi(wr({x:0,y:this.sustainLevel},{x:n,y:this.releaseLevel},-this.releaseBend))}onTrigger(){if(this.initialLevelOverride=void 0,!this.retrigger){const[e,n,r]=this.compute();!Number.isNaN(n)&&n>0&&(this.initialLevelOverride=n)}}get value(){return this.compute(!0)[1]}compute(e=!0){const[n,r]=super.computeRaw(e);if(n===void 0)return[void 0,NaN,NaN];let i;switch(n){case"attack":i=this.attackPath.interpolate(r).y,this.initialLevelOverride!==void 0&&(i=Dn(i,0,1,this.initialLevelOverride,1)),this.releasedAt=i;break;case"decay":i=this.decayPath.interpolate(r).y,this.releasedAt=i;break;case"sustain":i=this.sustainLevel,this.releasedAt=i;break;case"release":i=this.releasePath.interpolate(r).y,this.releasedAt!==void 0&&(i=Dn(i,0,this.sustainLevel,0,this.releasedAt));break;case"complete":i=this.releaseLevel,this.releasedAt=void 0;break;default:throw new Error(`Unknown state: ${n}`)}return[n,i,r]}},Ko=e=>new rD(e);async function*$h(e,n){if(e.shouldLoop)throw new Error("Cannot sample a looping envelope");const r=Ko(e);for(r.trigger();;){await tr(n);const i=r.value;if(r.isDone)return;yield i}}var Go={};ue(Go,{accelerationForce:()=>sD,angleFromAccelerationForce:()=>Uh,angleFromVelocityForce:()=>Vh,angularForce:()=>jh,apply:()=>cD,attractionForce:()=>uD,computeAccelerationToTarget:()=>Hh,computeAttractionForce:()=>qh,computePositionFromAngle:()=>Kh,computePositionFromVelocity:()=>Yo,computeVelocity:()=>Jo,constrainBounce:()=>aD,guard:()=>iD,magnitudeForce:()=>lD,nullForce:()=>fD,orientationForce:()=>gD,pendulumForce:()=>vD,springForce:()=>dD,targetForce:()=>oD,velocityForce:()=>hD});var iD=(e,n="t")=>{if(e===void 0)throw new Error(`Parameter ${n} is undefined. Expected ForceAffected`);if(e===null)throw new Error(`Parameter ${n} is null. Expected ForceAffected`);if(typeof e!="object")throw new Error(`Parameter ${n} is type ${typeof e}. Expected object of shape ForceAffected`)},aD=(e={width:1,height:1},n=1)=>{const r=vu(e,"left"),i=vu(e,"right"),a=yu(e,"top"),u=yu(e,"bottom");return o=>{const c=Yo(o.position??V.Empty,o.velocity??V.Empty);let s=o.velocity??V.Empty,{x:l,y:f}=c;return l>i?(l=i,s=V.invert(V.multiply(s,n),"x")):l<r&&(l=r,s=V.invert(V.multiply(s,n),"x")),f>u?(f=u,s=V.multiply(V.invert(s,"y"),n)):c.y<a&&(f=a,s=V.invert(V.multiply(s,n),"y")),Object.freeze({...o,position:{x:l,y:f},velocity:s})}},uD=(e,n,r={})=>i=>{let a=i.acceleration??V.Empty;return e.forEach(u=>{if(u===i)return;const o=qh(u,i,n,r);a=V.sum(a,o)}),{...i,acceleration:a}},qh=(e,n,r,i={})=>{if(e.position===void 0)throw new Error("attractor.position not set");if(n.position===void 0)throw new Error("attractee.position not set");const a=i.min??.01,u=i.max??.7,o=V.normalise(V.subtract(e.position,n.position)),c=Ut(V.distance(o),a,u);return V.multiply(o,r*(e.mass??1)*(n.mass??1)/(c*c))},oD=(e,n={})=>i=>{const a=Hh(e,i.position??{x:.5,y:.5},n);return{...i,acceleration:V.sum(i.acceleration??V.Empty,a)}},cD=(e,...n)=>{if(e===void 0)throw new Error("t parameter is undefined");n.forEach(u=>{u!=null&&(typeof u=="function"?e=u(e):e={...e,acceleration:V.sum(e.acceleration??V.Empty,u)})});const r=Jo(e.acceleration??V.Empty,e.velocity??V.Empty),i=Yo(e.position??V.Empty,r);return{...e,position:i,velocity:r,acceleration:V.Empty}},sD=(e,n="ignored")=>r=>Object.freeze({...r,acceleration:Ca(e,r,n)}),Ca=(e,n,r="ignored")=>{let i;if(r==="dampen")i=a=>V.divide(e,a,a);else if(r==="multiply")i=a=>V.multiply(e,a,a);else if(r==="ignored")i=a=>e;else throw new Error(`Unknown 'mass' parameter '${r}. Expected 'dampen', 'multiply' or 'ignored'`);return V.sum(n.acceleration??V.Empty,i(n.mass??1))},lD=(e,n="ignored")=>r=>{if(r.velocity===void 0)return r;const i=V.distance(V.normalise(r.velocity)),a=e*i*i,u=V.multiply(V.invert(r.velocity),a);return Object.freeze({...r,acceleration:Ca(u,r,n)})},fD=e=>e,hD=(e,n)=>{const r=V.pipeline(V.invert,i=>V.multiply(i,e));return i=>{if(i.velocity===void 0)return i;const a=r(i.velocity);return Object.freeze({...i,acceleration:Ca(a,i,n)})}},jh=()=>e=>{const n=e.angularAcceleration??0,r=e.angularVelocity??0,i=e.angle??0,a=r+n,u=i+a;return Object.freeze({...e,angle:u,angularVelocity:a,angularAcceleration:0})},Uh=(e=20)=>n=>{const r=n.acceleration??V.Empty;return Object.freeze({...n,angularAcceleration:r.x*e})},Vh=(e=1)=>n=>{const r=V.angle(n.velocity??V.Empty);return Object.freeze({...n,angle:e<1?xh(e,n.angle??0,r):r})},dD=(e,n=.5,r=2e-4,i=.999)=>a=>{const u=V.subtract(a.position??V.Empty,e),o=V.distance(u),c=Math.abs(n-o),s=V.pipelineApply(u,V.normalise,g=>V.multiply(g,-r*c)),l=Ca(s,a,"dampen"),f=Jo(l??V.Empty,a.velocity??V.Empty),d=V.multiply(f,i,i);return{...a,velocity:d,acceleration:V.Empty}},vD=(e={x:.5,y:0},n={})=>r=>{const i=n.length??V.distance(e,r.position??V.Empty),a=n.speed??.001,u=n.damping??.995;let o=r.angle;o===void 0&&(r.position?o=V.angle(e,r.position)-Math.PI/2:o=0);const c=-1*a/i*Math.sin(o),s=(r.angularVelocity??0)+c;return o+=s,Object.freeze({angularVelocity:s*u,angle:o,position:Kh(i,o+Math.PI/2,e)})},Jo=(e,n,r)=>{const i=V.sum(n,e);return r!==void 0?V.clampMagnitude(i,r):i},Hh=(e,n,r={})=>{const i=r.diminishBy??.001,a=V.subtract(e,n);return r.range&&V.compare(V.abs(a),r.range)===-2?V.Empty:V.multiply(a,i)},Yo=(e,n)=>V.sum(e,n),Kh=(e,n,r)=>ft.toCartesian(e,n,r),yD=jh(),mD=Uh(),gD=(e=.5)=>{const n=Vh(e);return r=>(r=yD(r),r=mD(r),r=n(r),r)},Xo={};ue(Xo,{saw:()=>AD,sine:()=>DD,sineBipolar:()=>ED,spring:()=>wD,square:()=>CD,triangle:()=>bD});var Gh=Math.PI*2,pD=(e={},n=0,r=1)=>{const i=e.mass??1,a=e.stiffness??100,u=e.soft??!1,o=e.damping??10,c=e.velocity??.1,s=r-n;if(u===!0||1<=o/(2*Math.sqrt(a*i))){const l=-Math.sqrt(a/i),f=-l*s-c;return d=>r-(s+d*f)*Math.E**(d*l)}else{const l=Math.sqrt(4*i*a-o**2),f=(o*s-2*i*c)/l,d=.5*l/i,g=-(.5*o)/i;return M=>r-(Math.cos(M*d)*s+Math.sin(M*d)*f)*Math.E**(M*g)}};function*wD(e={},n){n===void 0?n=hn():typeof n=="number"&&(n=Fn(n));const r=pD(e,0,1);let i=e.countdown??10;for(;i>0;){const a=r(n.elapsed/1e3);yield a,a===1?i--:i=100}}function*DD(e){for(typeof e=="number"&&(e=Fn(e));;)yield(Math.sin(e.elapsed*Gh)+1)/2}function*ED(e){for(typeof e=="number"&&(e=Fn(e));;)yield Math.sin(e.elapsed*Gh)}function*bD(e){for(typeof e=="number"&&(e=Fn(e));;){let n=e.elapsed;n<.5?n*=2:n=2-n*2,yield n}}function*AD(e){for(typeof e=="number"&&(e=Fn(e));;)yield e.elapsed}function*CD(e){for(typeof e=="number"&&(e=Fn(e));;)yield e.elapsed<.5?0:1}var Jh=(e,n,r={})=>{const i=r.type??"abs",a=r.clamped??!0,u=r.random??on;ie(e,a?"percentage":"bipolar","value"),ie(n,a?"percentage":"bipolar","jitter");let o;if(i==="rel"){n=e*n;const c=n*2*u();o=e-n+c}else if(i==="abs"){const c=n*2*u();o=e-n+c}else throw new Error(`Unknown jitter type: ${i}.`);return a?Ut(o):o};try{typeof window<"u"&&(window.ixfx={...window.ixfx,Modulation:{Forces:Go,jitter:Jh,Envelopes:kh,Oscillators:Xo,Easings:Ju}})}catch{}var Dt,yr,Yh=class extends Ln{constructor(e=void 0){super();$e(this,Dt,void 0),$e(this,yr,void 0),Ce(this,Dt,new Map),e===void 0&&(e=n=>{if(n===void 0)throw new Error("Cannot create key for undefined");return typeof n=="string"?n:JSON.stringify(n)}),Ce(this,yr,e)}clear(){J(this,Dt).clear(),this.fireEvent("change",void 0)}keys(){return J(this,Dt).keys()}values(){return J(this,Dt).values()}toArray(){return Array.from(J(this,Dt).entries())}debugString(){let e="";for(const[n,r]of J(this,Dt).entries())e+=`${n}: ${r}, `;return e.endsWith(", ")?e.substring(0,e.length-2):e}frequencyOf(e){if(typeof e=="string")return J(this,Dt).get(e);const n=J(this,yr).call(this,e);return J(this,Dt).get(n)}relativeFrequencyOf(e){let n;if(typeof e=="string")n=J(this,Dt).get(e);else{const i=J(this,yr).call(this,e);n=J(this,Dt).get(i)}if(n===void 0)return;const r=this.minMaxAvg();return n/r.total}entries(){return Array.from(J(this,Dt).entries())}minMaxAvg(){return gs.minMaxAvg(this.entries())}entriesSorted(e="value"){return sd(e)(this.entries())}add(...e){if(e===void 0)throw new Error("value parameter is undefined");e.map(J(this,yr)).forEach(r=>{const i=J(this,Dt).get(r)??0;J(this,Dt).set(r,i+1)}),this.fireEvent("change",void 0)}};Dt=new WeakMap;yr=new WeakMap;var FD=e=>new Yh(e),Xh=(e=3)=>{Ue(e,"aboveZero","scaling");let n=0,r=0,i=!1;return{dispose(){i=!0},get isDisposed(){return i},add(u){if(i)throw new Error("MovingAverage disposed, cannot add");return r++,n=n+(u-n)/Math.min(r,e),n},clear(){if(i)throw new Error("MovingAverage disposed, cannot clear");n=0,r=0},compute(){return n}}},SD=(e=200,n=0,r=3)=>{Ue(r,"aboveZero","scaling"),Ue(e,"aboveZero","decayRateMs");const i=Xh(r);let a=0;const u=()=>{a!==0&&clearTimeout(a),a=setTimeout(o,e)},o=()=>{i.add(n),i.isDisposed||setTimeout(o,e)};return{add(s){return u(),i.add(s)},dispose(){i.dispose()},clear:function(){i.clear()},compute:function(){return i.compute()},isDisposed:!1}},_D=(e=100,n)=>{let r=!1,i=_r({capacity:e,discardPolicy:"older"});const a=()=>{i=_r({capacity:e,discardPolicy:"older"})},u=()=>n===void 0?an.average(i.data):an.averageWeighted(i.data,n);return{add:s=>(i.enqueue(s),u()),compute:u,clear:a,dispose:()=>{r=!0},isDisposed:r}},Zh=class extends eo{constructor(){super(...arguments);R(this,"lastMark",0)}mark(){this.lastMark>0&&this.seen(window.performance.now()-this.lastMark),this.lastMark=window.performance.now()}},MD=(e,n)=>new Zh(e,n),Ni=e=>(typeof e=="function"&&(e=e()),ie(e,"percentage","v"),1-e),Qh=(e,n=0,r=360)=>(Ue(e,void 0,"v"),Ue(n,void 0,"min"),Ue(r,void 0,"max"),e===n||e===r?n:(e>0&&e<n&&(e+=n),e-=n,r-=n,e=e%r,e<0&&(e=r-Math.abs(e)+n),e+n)),Qi=(e,n=0,r=1)=>{if(ie(e,"","min"),ie(n,"","min"),ie(r,"","max"),e===n||e===r)return n;for(;(e<=n||e>=r)&&!(e===r||e===n);)e>r?e=n+(e-r):e<n&&(e=r-(n-e));return e},ID=(e,n,r,i,a)=>{let u=0;const o=Math.abs(a-i),c=Math.abs(n-i+a),s=Math.abs(i+(360-a)),l=Math.min(o,c,s);return l===s?u=i-r(l):l===c?u=i+r(l):i>a?u=i-r(l):u=i+r(l),Qh(u,e,n)},Au=Math.PI*2,Zo=(e,n,r)=>(1-e)*n+e*r,xh=(e,n,r)=>{const i=Qi(r-n,0,Au);return Zo(e,n,n+(i>Math.PI?i-Au:i))},Jr=Math.sqrt,Ke=Math.pow,Bc=Math.cos,Gn=Math.PI,Vr=Math.sin,BD=function(e,n){return ed(e,n,hn)},RD=function(e,n){return ed(e,n,$u)},ed=function(e,n,r){let i;if(typeof e=="function"?i=e:i=Fa(e),i===void 0)throw new Error(`Easing function not found: ${e}`);const a=Nr(n,r(),!0);return{get isDone(){return a.isDone},compute:()=>{const u=a.elapsed;return i(u)},reset:()=>{a.reset()}}},PD=(e,n)=>r=>{const i=1-r,a=i*i,u=r*r,o=u*r;return 3*e*a*r+3*n*i*u+o},td=(e,n,r,i)=>Zo(n,r(e),i(e)),ND=(e,n,r)=>td(e,e,n,r),Fa=function(e){if(e===null)throw new Error("easingName is null");if(e===void 0)throw new Error("easingName is undefined");const n=e.toLocaleLowerCase(),r=Object.entries(Qo).find(([i,a])=>i.toLocaleLowerCase()===n);return r===void 0?r:r[1]},zD=function(){return Array.from(Object.keys(Qo))},nd=(e=.4)=>{const n=1/Jr(2*Gn),r=.5;return i=>{const a=n/e;let u=-2.5,o=(i-r)/e;o*=o,u*=o;const c=a*Ke(Math.E,u);return c>1?1:c<0?0:c}},Ei=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},WD=e=>e*e*e*e*e,LD=e=>1-Ke(1-e,5),OD=e=>e*(1-e)*4,Qo={arch:OD,bell:nd(),sineIn:e=>1-Bc(e*Gn/2),sineOut:e=>Vr(e*Gn/2),quadIn:e=>e*e,quadOut:e=>1-(1-e)*(1-e),sineInOut:e=>-(Bc(Gn*e)-1)/2,quadInOut:e=>e<.5?2*e*e:1-Ke(-2*e+2,2)/2,cubicIn:e=>e*e*e,cubicOut:e=>1-Ke(1-e,3),quartIn:e=>e*e*e*e,quartOut:e=>1-Ke(1-e,4),quintIn:WD,quintOut:LD,expoIn:e=>e===0?0:Ke(2,10*e-10),expoOut:e=>e===1?1:1-Ke(2,-10*e),quintInOut:e=>e<.5?16*e*e*e*e*e:1-Ke(-2*e+2,5)/2,expoInOut:e=>e===0?0:e===1?1:e<.5?Ke(2,20*e-10)/2:(2-Ke(2,-20*e+10))/2,circIn:e=>1-Jr(1-Ke(e,2)),circOut:e=>Jr(1-Ke(e-1,2)),backIn:e=>2.70158*e*e*e-1.70158*e*e,backOut:e=>1+2.70158*Ke(e-1,3)+1.70158*Ke(e-1,2),circInOut:e=>e<.5?(1-Jr(1-Ke(2*e,2)))/2:(Jr(1-Ke(-2*e+2,2))+1)/2,backInOut:e=>{const r=2.5949095;return e<.5?Ke(2*e,2)*((r+1)*2*e-r)/2:(Ke(2*e-2,2)*((r+1)*(e*2-2)+r)+2)/2},elasticIn:e=>{const n=2*Gn/3;return e===0?0:e===1?1:-Ke(2,10*e-10)*Vr((e*10-10.75)*n)},elasticOut:e=>{const n=2*Gn/3;return e===0?0:e===1?1:Ke(2,-10*e)*Vr((e*10-.75)*n)+1},bounceIn:e=>1-Ei(1-e),bounceOut:Ei,elasticInOut:e=>{const n=2*Gn/4.5;return e===0?0:e===1?1:e<.5?-(Ke(2,20*e-10)*Vr((20*e-11.125)*n))/2:Ke(2,-20*e+10)*Vr((20*e-11.125)*n)/2+1},bounceInOut:e=>e<.5?(1-Ei(1-2*e))/2:(1+Ei(2*e-1))/2},on=Math.random,rd=(e="quadIn",n=on)=>{const r=n(),i=Fa(e);if(i===void 0)throw new Error(`Easing function '${e}' not found.`);return i(r)},kD=(e="quadIn",n=on)=>()=>rd(e,n),TD=(e,n,r,i=on)=>{ie(e);let a,u,o;if(o="quadIn",a=0,n===void 0)u=e;else if(typeof n=="number")a=e,u=n,r!==void 0&&(o=r);else if(typeof n=="string")u=e,o=n;else throw new Error(`Unexpected value type for maxOrEasing: ${n}`);r!==void 0&&(o=r);const c=Fa(o);if(c===void 0)throw new Error(`Easing '${o}' not found`);if(ie(a),u<=a)throw new Error("Max should be greater than min");const s=Ut(c(i()));return Math.floor(s*(u-a))+a},xo=(e=1)=>{let i=0,a=0;for(;i===0;)i=Math.random();for(;a===0;)a=Math.random();let u=Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*a);return u=u/10+.5,u>1||u<0?u=xo(e):(u=Math.pow(u,e),u*=1-0,u+=0),u},$D=(e=1)=>()=>xo(e),qD=(e,n)=>{let r=!1;n===void 0&&(e<0&&(e=Math.abs(e),r=!0),n=0);const i=e-n,a=Math.floor(Math.random()*i)+n;return r?-a:a},jD=(e=1,n=0)=>Math.random()*(e-n)+n,id=e=>Math.random().toString(36).substring(2,e+2),UD=()=>{const e=Math.random()*46656|0,n=Math.random()*46656|0,r=`000${e.toString(36)}`.slice(-3),i=`000${n.toString(36)}`.slice(-3);return r+i},Sa=(e,n="?")=>{if(e===void 0)throw new Error(`Param '${n}' is undefined. Expected array.`);if(e===null)throw new Error(`Param '${n}' is null. Expected array.`);if(!Array.isArray(e))throw new Error(`Param '${n}' not an array as expected`)},xi=(e,n,r="index")=>{if(Sa(e),Ue(n,"positive",r),n>e.length-1)throw new Error(`'${r}' ${n} beyond array max of ${e.length-1}`)},ec=(e,n)=>{if(!Array.isArray(e))throw new Error("Param 'array' is not an array.");if(e.length===0)return!0;const r=n===void 0?Wc:n,i=e[0];return!e.some(u=>!r(i,u))},VD=(e,n,r=ii)=>e.filter(i=>n.some(a=>r(i,a))),HD=e=>Array.prototype.concat.apply([],[...e]),ad=(...e)=>{if(e.some(a=>!Array.isArray(a)))throw new Error("All parameters must be an array");const n=e.map(a=>a.length);if(!ec(n))throw new Error("Arrays must be of same length");const r=[],i=n[0];for(let a=0;a<i;a++)r.push(e.map(u=>u[a]));return r},KD=(...e)=>{if(e.some(a=>!Array.isArray(a)))throw new Error("All parameters must be an array");const n=e.map(a=>a.length);if(!ec(n))throw new Error("Arrays must be of same length");const r=[],i=n[0];for(let a=0;a<i;a++)for(let u=0;u<e.length;u++)r.push(e[u][a]);return r},GD=(e,n,r="undefined")=>{if(e===void 0)throw new Error("Data undefined");if(!Array.isArray(e))throw new Error("data is not an array");if(e.length===n)return[...e];if(e.length>n)return e.slice(0,n);const i=[...e],a=n-i.length;for(let u=0;u<a;u++)r==="undefined"?i.push(void 0):r==="repeat"?i.push(e[u%e.length]):r==="first"?i.push(e[0]):r==="last"&&i.push(e[e.length-1]);return i},ud=(e,n,r,i)=>{Sa(e),typeof r>"u"&&(r=0),typeof i>"u"&&(i=e.length-1),xi(e,r,"startIndex"),xi(e,i,"endIndex");const a=[];for(let u=r;u<=i;u++)n(e[u],u,e)&&a.push(e[u]);return a},tc=(e,n=on)=>Math.floor(n()*e.length),nc=(e,n=on)=>(Sa(e,"array"),e[Math.floor(n()*e.length)]),JD=(e,n=!1,r=on)=>{if(e===void 0)throw new Error("array is undefined");if(!Array.isArray(e))throw new Error("'array' param is not an array");if(e.length===0)return{value:void 0,array:[]};const i=tc(e,r);if(n)return{value:e[i],array:e.splice(i,1)};{const a=[...e];return a.splice(i,1),{value:e[i],array:a}}},YD=(e,n=on)=>{const r=[...e];for(let i=r.length-1;i>0;i--){const a=Math.floor(n()*(i+1));[r[i],r[a]]=[r[a],r[i]]}return r},od=(e,n,r=ii)=>e.filter(i=>!r(i,n)),XD=(e,n)=>{if(!Array.isArray(e))throw new Error("'data' parameter should be an array");return xi(e,n,"index"),[...e.slice(0,n),...e.slice(n+1)]},ZD=(e,n)=>e.reduce((r,i)=>{const a=n(i),u=r.get(a);return u===void 0?r.set(a,[i]):u.push(i),r},new Map),QD=(e,n)=>{let r=1;if(n<=1){const a=e.length*n;r=Math.round(e.length/a)}else r=n;if(Ue(r,"positive","amount"),r>e.length-1)throw new Error("Subsample steps exceeds array length");const i=[];for(let a=r-1;a<e.length;a+=r)i.push(e[a]);return i};function xD(e,n){const r=[];for(let i=0;i<e.length;i+=n)r.push(e.slice(i,i+n));return r}var eE=(e=!1)=>(0,Gu.pipe)(e?(0,Fr.reverse)(Ti.Ord):Ti.Ord,(0,Fr.contramap)(n=>n[0])),cd=(e=!1)=>(0,Gu.pipe)(e?(0,Fr.reverse)(Ti.Ord):Ti.Ord,(0,Fr.contramap)(n=>n[1])),tE=(e=!1)=>(0,Gu.pipe)(e?(0,Fr.reverse)(lc.Ord):lc.Ord,(0,Fr.contramap)(n=>n[1])),Cu=(e=!1)=>(0,Ku.sort)(eE(e)),nE=(e=!1)=>(0,Ku.sort)(cd(e)),Fu=(e=!1)=>(0,Ku.sort)(tE(e)),sd=e=>{switch(e){case"value":return Fu(!1);case"valueReverse":return Fu(!0);case"key":return Cu(!1);case"keyReverse":return Cu(!0);default:throw new Error(`Unknown sorting value '${e}'. Expecting: value, valueReverse, key or keyReverse`)}},rE=(e,n)=>{n===void 0&&(n=i=>i[1]);const r=e.map(n);return ra(r)};export{an as A,ci as B,hi as C,pa as D,Ju as E,Lc as F,Ev as G,Su as H,zn as I,uv as J,ov as K,Bt as L,Ps as M,ps as N,Xo as O,$o as P,ks as Q,sd as R,Xi as S,FD as T,yy as U,sf as V,pv as W,gv as X,ur as Y,Ko as a,Vo as b,hv as c,Th as d,oy as e,Fn as f,qu as g,iy as h,rd as i,Jh as j,xo as k,J1 as l,Uu as m,po as n,fo as o,B1 as p,V as q,ht as r,ya as s,fv as t,Oh as u,ft as v,TD as w,Xu as x,Oo as y,En as z};
