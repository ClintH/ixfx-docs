var sm=Object.create,li=Object.defineProperty,Oc=Object.getOwnPropertyDescriptor,Tc=Object.getOwnPropertyNames,cm=Object.getPrototypeOf,lm=Object.prototype.hasOwnProperty,fm=(e,r,n)=>r in e?li(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,Ke=(e,r)=>function(){return r||(0,e[Tc(e)[0]])((r={exports:{}}).exports,r),r.exports},G=(e,r)=>{for(var n in r)li(e,n,{get:r[n],enumerable:!0})},dm=(e,r,n,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Tc(r))!lm.call(e,a)&&a!==n&&li(e,a,{get:()=>r[a],enumerable:!(i=Oc(r,a))||i.enumerable});return e},cn=(e,r,n)=>(n=e!=null?sm(cm(e)):{},dm(r||!e||!e.__esModule?li(n,"default",{value:e,enumerable:!0}):n,e)),gM=(e,r,n,i)=>{for(var a=i>1?void 0:i?Oc(r,n):r,u=e.length-1,o;u>=0;u--)(o=e[u])&&(a=(i?o(r,n,a):o(a))||a);return i&&a&&li(r,n,a),a},pM=(e,r,n)=>(fm(e,typeof r!="symbol"?r+"":r,n),n),Nt=Ke({"node_modules/fp-ts/lib/function.js"(e){var r=e&&e.__spreadArray||function(E,_,V){if(V||arguments.length===2)for(var q=0,X=_.length,ne;q<X;q++)(ne||!(q in _))&&(ne||(ne=Array.prototype.slice.call(_,0,q)),ne[q]=_[q]);return E.concat(ne||Array.prototype.slice.call(_))};Object.defineProperty(e,"__esModule",{value:!0}),e.dual=e.getEndomorphismMonoid=e.not=e.SK=e.hole=e.pipe=e.untupled=e.tupled=e.absurd=e.decrement=e.increment=e.tuple=e.flow=e.flip=e.constVoid=e.constUndefined=e.constNull=e.constFalse=e.constTrue=e.constant=e.unsafeCoerce=e.identity=e.apply=e.getRing=e.getSemiring=e.getMonoid=e.getSemigroup=e.getBooleanAlgebra=void 0;var n=function(E){return function(){return{meet:function(_,V){return function(q){return E.meet(_(q),V(q))}},join:function(_,V){return function(q){return E.join(_(q),V(q))}},zero:function(){return E.zero},one:function(){return E.one},implies:function(_,V){return function(q){return E.implies(_(q),V(q))}},not:function(_){return function(V){return E.not(_(V))}}}}};e.getBooleanAlgebra=n;var i=function(E){return function(){return{concat:function(_,V){return function(q){return E.concat(_(q),V(q))}}}}};e.getSemigroup=i;var a=function(E){var _=(0,e.getSemigroup)(E);return function(){return{concat:_().concat,empty:function(){return E.empty}}}};e.getMonoid=a;var u=function(E){return{add:function(_,V){return function(q){return E.add(_(q),V(q))}},zero:function(){return E.zero},mul:function(_,V){return function(q){return E.mul(_(q),V(q))}},one:function(){return E.one}}};e.getSemiring=u;var o=function(E){var _=(0,e.getSemiring)(E);return{add:_.add,mul:_.mul,one:_.one,zero:_.zero,sub:function(V,q){return function(X){return E.sub(V(X),q(X))}}}};e.getRing=o;var s=function(E){return function(_){return _(E)}};e.apply=s;function c(E){return E}e.identity=c,e.unsafeCoerce=c;function l(E){return function(){return E}}e.constant=l,e.constTrue=l(!0),e.constFalse=l(!1),e.constNull=l(null),e.constUndefined=l(void 0),e.constVoid=e.constUndefined;function f(E){return function(){for(var _=[],V=0;V<arguments.length;V++)_[V]=arguments[V];return _.length>1?E(_[1],_[0]):function(q){return E(q)(_[0])}}}e.flip=f;function d(E,_,V,q,X,ne,ye,de,je){switch(arguments.length){case 1:return E;case 2:return function(){return _(E.apply(this,arguments))};case 3:return function(){return V(_(E.apply(this,arguments)))};case 4:return function(){return q(V(_(E.apply(this,arguments))))};case 5:return function(){return X(q(V(_(E.apply(this,arguments)))))};case 6:return function(){return ne(X(q(V(_(E.apply(this,arguments))))))};case 7:return function(){return ye(ne(X(q(V(_(E.apply(this,arguments)))))))};case 8:return function(){return de(ye(ne(X(q(V(_(E.apply(this,arguments))))))))};case 9:return function(){return je(de(ye(ne(X(q(V(_(E.apply(this,arguments)))))))))}}}e.flow=d;function v(){for(var E=[],_=0;_<arguments.length;_++)E[_]=arguments[_];return E}e.tuple=v;function g(E){return E+1}e.increment=g;function P(E){return E-1}e.decrement=P;function L(E){throw new Error("Called `absurd` function which should be uncallable")}e.absurd=L;function B(E){return function(_){return E.apply(void 0,_)}}e.tupled=B;function S(E){return function(){for(var _=[],V=0;V<arguments.length;V++)_[V]=arguments[V];return E(_)}}e.untupled=S;function C(E,_,V,q,X,ne,ye,de,je){switch(arguments.length){case 1:return E;case 2:return _(E);case 3:return V(_(E));case 4:return q(V(_(E)));case 5:return X(q(V(_(E))));case 6:return ne(X(q(V(_(E)))));case 7:return ye(ne(X(q(V(_(E))))));case 8:return de(ye(ne(X(q(V(_(E)))))));case 9:return je(de(ye(ne(X(q(V(_(E))))))));default:{for(var yt=arguments[0],mt=1;mt<arguments.length;mt++)yt=arguments[mt](yt);return yt}}}e.pipe=C,e.hole=L;var N=function(E,_){return _};e.SK=N;function x(E){return function(_){return!E(_)}}e.not=x;var z=function(){return{concat:function(E,_){return d(E,_)},empty:c}};e.getEndomorphismMonoid=z;var I=function(E,_){var V=typeof E=="number"?function(q){return q.length>=E}:E;return function(){var q=Array.from(arguments);return V(arguments)?_.apply(this,q):function(X){return _.apply(void 0,r([X],q,!1))}}};e.dual=I}}),Wr=Ke({"node_modules/fp-ts/lib/internal.js"(e){var r=e&&e.__spreadArray||function(E,_,V){if(V||arguments.length===2)for(var q=0,X=_.length,ne;q<X;q++)(ne||!(q in _))&&(ne||(ne=Array.prototype.slice.call(_,0,q)),ne[q]=_[q]);return E.concat(ne||Array.prototype.slice.call(_))};Object.defineProperty(e,"__esModule",{value:!0}),e.flatMapReader=e.flatMapTask=e.flatMapIO=e.flatMapEither=e.flatMapOption=e.flatMapNullable=e.liftOption=e.liftNullable=e.fromReadonlyNonEmptyArray=e.has=e.emptyRecord=e.emptyReadonlyArray=e.tail=e.head=e.isNonEmpty=e.singleton=e.right=e.left=e.isRight=e.isLeft=e.some=e.none=e.isSome=e.isNone=void 0;var n=Nt(),i=function(E){return E._tag==="None"};e.isNone=i;var a=function(E){return E._tag==="Some"};e.isSome=a,e.none={_tag:"None"};var u=function(E){return{_tag:"Some",value:E}};e.some=u;var o=function(E){return E._tag==="Left"};e.isLeft=o;var s=function(E){return E._tag==="Right"};e.isRight=s;var c=function(E){return{_tag:"Left",left:E}};e.left=c;var l=function(E){return{_tag:"Right",right:E}};e.right=l;var f=function(E){return[E]};e.singleton=f;var d=function(E){return E.length>0};e.isNonEmpty=d;var v=function(E){return E[0]};e.head=v;var g=function(E){return E.slice(1)};e.tail=g,e.emptyReadonlyArray=[],e.emptyRecord={},e.has=Object.prototype.hasOwnProperty;var P=function(E){return r([E[0]],E.slice(1),!0)};e.fromReadonlyNonEmptyArray=P;var L=function(E){return function(_,V){return function(){for(var q=[],X=0;X<arguments.length;X++)q[X]=arguments[X];var ne=_.apply(void 0,q);return E.fromEither(ne==null?(0,e.left)(V.apply(void 0,q)):(0,e.right)(ne))}}};e.liftNullable=L;var B=function(E){return function(_,V){return function(){for(var q=[],X=0;X<arguments.length;X++)q[X]=arguments[X];var ne=_.apply(void 0,q);return E.fromEither((0,e.isNone)(ne)?(0,e.left)(V.apply(void 0,q)):(0,e.right)(ne.value))}}};e.liftOption=B;var S=function(E,_){return(0,n.dual)(3,function(V,q,X){return _.flatMap(V,(0,e.liftNullable)(E)(q,X))})};e.flatMapNullable=S;var C=function(E,_){return(0,n.dual)(3,function(V,q,X){return _.flatMap(V,(0,e.liftOption)(E)(q,X))})};e.flatMapOption=C;var N=function(E,_){return(0,n.dual)(2,function(V,q){return _.flatMap(V,function(X){return E.fromEither(q(X))})})};e.flatMapEither=N;var x=function(E,_){return(0,n.dual)(2,function(V,q){return _.flatMap(V,function(X){return E.fromIO(q(X))})})};e.flatMapIO=x;var z=function(E,_){return(0,n.dual)(2,function(V,q){return _.flatMap(V,function(X){return E.fromTask(q(X))})})};e.flatMapTask=z;var I=function(E,_){return(0,n.dual)(2,function(V,q){return _.flatMap(V,function(X){return E.fromReader(q(X))})})};e.flatMapReader=I}}),ha=Ke({"node_modules/fp-ts/lib/Apply.js"(e){var r=e&&e.__createBinding||(Object.create?function(S,C,N,x){x===void 0&&(x=N);var z=Object.getOwnPropertyDescriptor(C,N);(!z||("get"in z?!C.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return C[N]}}),Object.defineProperty(S,x,z)}:function(S,C,N,x){x===void 0&&(x=N),S[x]=C[N]}),n=e&&e.__setModuleDefault||(Object.create?function(S,C){Object.defineProperty(S,"default",{enumerable:!0,value:C})}:function(S,C){S.default=C}),i=e&&e.__importStar||function(S){if(S&&S.__esModule)return S;var C={};if(S!=null)for(var N in S)N!=="default"&&Object.prototype.hasOwnProperty.call(S,N)&&r(C,S,N);return n(C,S),C};Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceS=e.sequenceT=e.getApplySemigroup=e.apS=e.apSecond=e.apFirst=e.ap=void 0;var a=Nt(),u=i(Wr());function o(S,C){return function(N){return function(x){return S.ap(S.map(x,function(z){return function(I){return C.ap(z,I)}}),N)}}}e.ap=o;function s(S){return function(C){return function(N){return S.ap(S.map(N,function(x){return function(){return x}}),C)}}}e.apFirst=s;function c(S){return function(C){return function(N){return S.ap(S.map(N,function(){return function(x){return x}}),C)}}}e.apSecond=c;function l(S){return function(C,N){return function(x){return S.ap(S.map(x,function(z){return function(I){var E;return Object.assign({},z,(E={},E[C]=I,E))}}),N)}}}e.apS=l;function f(S){return function(C){return{concat:function(N,x){return S.ap(S.map(N,function(z){return function(I){return C.concat(z,I)}}),x)}}}}e.getApplySemigroup=f;function d(S,C,N){return function(x){for(var z=Array(N.length+1),I=0;I<N.length;I++)z[I]=N[I];return z[N.length]=x,C===0?S.apply(null,z):d(S,C-1,z)}}var v={1:function(S){return[S]},2:function(S){return function(C){return[S,C]}},3:function(S){return function(C){return function(N){return[S,C,N]}}},4:function(S){return function(C){return function(N){return function(x){return[S,C,N,x]}}}},5:function(S){return function(C){return function(N){return function(x){return function(z){return[S,C,N,x,z]}}}}}};function g(S){return u.has.call(v,S)||(v[S]=d(a.tuple,S-1,[])),v[S]}function P(S){return function(){for(var C=[],N=0;N<arguments.length;N++)C[N]=arguments[N];for(var x=C.length,z=g(x),I=S.map(C[0],z),E=1;E<x;E++)I=S.ap(I,C[E]);return I}}e.sequenceT=P;function L(S){var C=S.length;switch(C){case 1:return function(N){var x;return x={},x[S[0]]=N,x};case 2:return function(N){return function(x){var z;return z={},z[S[0]]=N,z[S[1]]=x,z}};case 3:return function(N){return function(x){return function(z){var I;return I={},I[S[0]]=N,I[S[1]]=x,I[S[2]]=z,I}}};case 4:return function(N){return function(x){return function(z){return function(I){var E;return E={},E[S[0]]=N,E[S[1]]=x,E[S[2]]=z,E[S[3]]=I,E}}}};case 5:return function(N){return function(x){return function(z){return function(I){return function(E){var _;return _={},_[S[0]]=N,_[S[1]]=x,_[S[2]]=z,_[S[3]]=I,_[S[4]]=E,_}}}}};default:return d(function(){for(var N=[],x=0;x<arguments.length;x++)N[x]=arguments[x];for(var z={},I=0;I<C;I++)z[S[I]]=N[I];return z},C-1,[])}}function B(S){return function(C){for(var N=Object.keys(C),x=N.length,z=L(N),I=S.map(C[N[0]],z),E=1;E<x;E++)I=S.ap(I,C[N[E]]);return I}}e.sequenceS=B}}),fi=Ke({"node_modules/fp-ts/lib/Chain.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bind=e.tap=e.chainFirst=void 0;function r(a){var u=n(a);return function(o){return function(s){return u(s,o)}}}e.chainFirst=r;function n(a){return function(u,o){return a.chain(u,function(s){return a.map(o(s),function(){return s})})}}e.tap=n;function i(a){return function(u,o){return function(s){return a.chain(s,function(c){return a.map(o(c),function(l){var f;return Object.assign({},c,(f={},f[u]=l,f))})})}}}e.bind=i}}),Wc=Ke({"node_modules/fp-ts/lib/FromEither.js"(e){var r=e&&e.__createBinding||(Object.create?function(B,S,C,N){N===void 0&&(N=C);var x=Object.getOwnPropertyDescriptor(S,C);(!x||("get"in x?!S.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(B,N,x)}:function(B,S,C,N){N===void 0&&(N=C),B[N]=S[C]}),n=e&&e.__setModuleDefault||(Object.create?function(B,S){Object.defineProperty(B,"default",{enumerable:!0,value:S})}:function(B,S){B.default=S}),i=e&&e.__importStar||function(B){if(B&&B.__esModule)return B;var S={};if(B!=null)for(var C in B)C!=="default"&&Object.prototype.hasOwnProperty.call(B,C)&&r(S,B,C);return n(S,B),S};Object.defineProperty(e,"__esModule",{value:!0}),e.tapEither=e.filterOrElse=e.chainFirstEitherK=e.chainEitherK=e.fromEitherK=e.chainOptionK=e.fromOptionK=e.fromPredicate=e.fromOption=void 0;var a=fi(),u=Nt(),o=i(Wr());function s(B){return function(S){return function(C){return B.fromEither(o.isNone(C)?o.left(S()):o.right(C.value))}}}e.fromOption=s;function c(B){return function(S,C){return function(N){return B.fromEither(S(N)?o.right(N):o.left(C(N)))}}}e.fromPredicate=c;function l(B){var S=s(B);return function(C){var N=S(C);return function(x){return(0,u.flow)(x,N)}}}e.fromOptionK=l;function f(B,S){var C=l(B);return function(N){var x=C(N);return function(z){return function(I){return S.chain(I,x(z))}}}}e.chainOptionK=f;function d(B){return function(S){return(0,u.flow)(S,B.fromEither)}}e.fromEitherK=d;function v(B,S){var C=d(B);return function(N){return function(x){return S.chain(x,C(N))}}}e.chainEitherK=v;function g(B,S){var C=L(B,S);return function(N){return function(x){return C(x,N)}}}e.chainFirstEitherK=g;function P(B,S){return function(C,N){return function(x){return S.chain(x,function(z){return B.fromEither(C(z)?o.right(z):o.left(N(z)))})}}}e.filterOrElse=P;function L(B,S){var C=d(B),N=(0,a.tap)(S);return function(x,z){return N(x,C(z))}}e.tapEither=L}}),di=Ke({"node_modules/fp-ts/lib/Functor.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asUnit=e.as=e.getFunctorComposition=e.let=e.bindTo=e.flap=e.map=void 0;var r=Nt();function n(l,f){return function(d){return function(v){return l.map(v,function(g){return f.map(g,d)})}}}e.map=n;function i(l){return function(f){return function(d){return l.map(d,function(v){return v(f)})}}}e.flap=i;function a(l){return function(f){return function(d){return l.map(d,function(v){var g;return g={},g[f]=v,g})}}}e.bindTo=a;function u(l){return function(f,d){return function(v){return l.map(v,function(g){var P;return Object.assign({},g,(P={},P[f]=d(g),P))})}}}e.let=u;function o(l,f){var d=n(l,f);return{map:function(v,g){return(0,r.pipe)(v,d(g))}}}e.getFunctorComposition=o;function s(l){return function(f,d){return l.map(f,function(){return d})}}e.as=s;function c(l){var f=s(l);return function(d){return f(d,void 0)}}e.asUnit=c}}),fo=Ke({"node_modules/fp-ts/lib/Eq.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.eqDate=e.eqNumber=e.eqString=e.eqBoolean=e.eq=e.strictEqual=e.getStructEq=e.getTupleEq=e.Contravariant=e.getMonoid=e.getSemigroup=e.eqStrict=e.URI=e.contramap=e.tuple=e.struct=e.fromEquals=void 0;var r=Nt(),n=function(f){return{equals:function(d,v){return d===v||f(d,v)}}};e.fromEquals=n;var i=function(f){return(0,e.fromEquals)(function(d,v){for(var g in f)if(!f[g].equals(d[g],v[g]))return!1;return!0})};e.struct=i;var a=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return(0,e.fromEquals)(function(v,g){return f.every(function(P,L){return P.equals(v[L],g[L])})})};e.tuple=a;var u=function(f,d){return(0,r.pipe)(f,(0,e.contramap)(d))},o=function(f){return function(d){return(0,e.fromEquals)(function(v,g){return d.equals(f(v),f(g))})}};e.contramap=o,e.URI="Eq",e.eqStrict={equals:function(f,d){return f===d}};var s={equals:function(){return!0}},c=function(){return{concat:function(f,d){return(0,e.fromEquals)(function(v,g){return f.equals(v,g)&&d.equals(v,g)})}}};e.getSemigroup=c;var l=function(){return{concat:(0,e.getSemigroup)().concat,empty:s}};e.getMonoid=l,e.Contravariant={URI:e.URI,contramap:u},e.getTupleEq=e.tuple,e.getStructEq=e.struct,e.strictEqual=e.eqStrict.equals,e.eq=e.Contravariant,e.eqBoolean=e.eqStrict,e.eqString=e.eqStrict,e.eqNumber=e.eqStrict,e.eqDate={equals:function(f,d){return f.valueOf()===d.valueOf()}}}}),hi=Ke({"node_modules/fp-ts/lib/Ord.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ordDate=e.ordNumber=e.ordString=e.ordBoolean=e.ord=e.getDualOrd=e.getTupleOrd=e.between=e.clamp=e.max=e.min=e.geq=e.leq=e.gt=e.lt=e.equals=e.trivial=e.Contravariant=e.getMonoid=e.getSemigroup=e.URI=e.contramap=e.reverse=e.tuple=e.fromCompare=e.equalsDefault=void 0;var r=fo(),n=Nt(),i=function(I){return function(E,_){return E===_||I(E,_)===0}};e.equalsDefault=i;var a=function(I){return{equals:(0,e.equalsDefault)(I),compare:function(E,_){return E===_?0:I(E,_)}}};e.fromCompare=a;var u=function(){for(var I=[],E=0;E<arguments.length;E++)I[E]=arguments[E];return(0,e.fromCompare)(function(_,V){for(var q=0;q<I.length-1;q++){var X=I[q].compare(_[q],V[q]);if(X!==0)return X}return I[q].compare(_[q],V[q])})};e.tuple=u;var o=function(I){return(0,e.fromCompare)(function(E,_){return I.compare(_,E)})};e.reverse=o;var s=function(I,E){return(0,n.pipe)(I,(0,e.contramap)(E))},c=function(I){return function(E){return(0,e.fromCompare)(function(_,V){return E.compare(I(_),I(V))})}};e.contramap=c,e.URI="Ord";var l=function(){return{concat:function(I,E){return(0,e.fromCompare)(function(_,V){var q=I.compare(_,V);return q!==0?q:E.compare(_,V)})}}};e.getSemigroup=l;var f=function(){return{concat:(0,e.getSemigroup)().concat,empty:(0,e.fromCompare)(function(){return 0})}};e.getMonoid=f,e.Contravariant={URI:e.URI,contramap:s},e.trivial={equals:n.constTrue,compare:(0,n.constant)(0)};var d=function(I){return function(E){return function(_){return _===E||I.compare(_,E)===0}}};e.equals=d;var v=function(I){return function(E,_){return I.compare(E,_)===-1}};e.lt=v;var g=function(I){return function(E,_){return I.compare(E,_)===1}};e.gt=g;var P=function(I){return function(E,_){return I.compare(E,_)!==1}};e.leq=P;var L=function(I){return function(E,_){return I.compare(E,_)!==-1}};e.geq=L;var B=function(I){return function(E,_){return E===_||I.compare(E,_)<1?E:_}};e.min=B;var S=function(I){return function(E,_){return E===_||I.compare(E,_)>-1?E:_}};e.max=S;var C=function(I){var E=(0,e.min)(I),_=(0,e.max)(I);return function(V,q){return function(X){return _(E(X,q),V)}}};e.clamp=C;var N=function(I){var E=(0,e.lt)(I),_=(0,e.gt)(I);return function(V,q){return function(X){return!(E(X,V)||_(X,q))}}};e.between=N,e.getTupleOrd=e.tuple,e.getDualOrd=e.reverse,e.ord=e.Contravariant;function x(I,E){return I<E?-1:I>E?1:0}var z={equals:r.eqStrict.equals,compare:x};e.ordBoolean=z,e.ordString=z,e.ordNumber=z,e.ordDate=(0,n.pipe)(e.ordNumber,(0,e.contramap)(function(I){return I.valueOf()}))}}),hm=Ke({"node_modules/fp-ts/lib/Magma.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=e.endo=e.filterSecond=e.filterFirst=e.reverse=void 0;var r=function(o){return{concat:function(s,c){return o.concat(c,s)}}};e.reverse=r;var n=function(o){return function(s){return{concat:function(c,l){return o(c)?s.concat(c,l):l}}}};e.filterFirst=n;var i=function(o){return function(s){return{concat:function(c,l){return o(l)?s.concat(c,l):c}}}};e.filterSecond=i;var a=function(o){return function(s){return{concat:function(c,l){return s.concat(o(c),o(l))}}}};e.endo=a;var u=function(o){return function(s){return function(c){return c.reduce(function(l,f){return o.concat(l,f)},s)}}};e.concatAll=u}}),vm=Ke({"node_modules/fp-ts/lib/Semigroup.js"(e){var r=e&&e.__createBinding||(Object.create?function(C,N,x,z){z===void 0&&(z=x);var I=Object.getOwnPropertyDescriptor(N,x);(!I||("get"in I?!N.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return N[x]}}),Object.defineProperty(C,z,I)}:function(C,N,x,z){z===void 0&&(z=x),C[z]=N[x]}),n=e&&e.__setModuleDefault||(Object.create?function(C,N){Object.defineProperty(C,"default",{enumerable:!0,value:N})}:function(C,N){C.default=N}),i=e&&e.__importStar||function(C){if(C&&C.__esModule)return C;var N={};if(C!=null)for(var x in C)x!=="default"&&Object.prototype.hasOwnProperty.call(C,x)&&r(N,C,x);return n(N,C),N};Object.defineProperty(e,"__esModule",{value:!0}),e.semigroupProduct=e.semigroupSum=e.semigroupString=e.getFunctionSemigroup=e.semigroupAny=e.semigroupAll=e.fold=e.getIntercalateSemigroup=e.getMeetSemigroup=e.getJoinSemigroup=e.getDualSemigroup=e.getStructSemigroup=e.getTupleSemigroup=e.getFirstSemigroup=e.getLastSemigroup=e.getObjectSemigroup=e.semigroupVoid=e.concatAll=e.last=e.first=e.intercalate=e.tuple=e.struct=e.reverse=e.constant=e.max=e.min=void 0;var a=Nt(),u=i(Wr()),o=i(hm()),s=i(hi()),c=function(C){return{concat:s.min(C)}};e.min=c;var l=function(C){return{concat:s.max(C)}};e.max=l;var f=function(C){return{concat:function(){return C}}};e.constant=f,e.reverse=o.reverse;var d=function(C){return{concat:function(N,x){var z={};for(var I in C)u.has.call(C,I)&&(z[I]=C[I].concat(N[I],x[I]));return z}}};e.struct=d;var v=function(){for(var C=[],N=0;N<arguments.length;N++)C[N]=arguments[N];return{concat:function(x,z){return C.map(function(I,E){return I.concat(x[E],z[E])})}}};e.tuple=v;var g=function(C){return function(N){return{concat:function(x,z){return N.concat(x,N.concat(C,z))}}}};e.intercalate=g;var P=function(){return{concat:a.identity}};e.first=P;var L=function(){return{concat:function(C,N){return N}}};e.last=L,e.concatAll=o.concatAll,e.semigroupVoid=(0,e.constant)(void 0);var B=function(){return{concat:function(C,N){return Object.assign({},C,N)}}};e.getObjectSemigroup=B,e.getLastSemigroup=e.last,e.getFirstSemigroup=e.first,e.getTupleSemigroup=e.tuple,e.getStructSemigroup=e.struct,e.getDualSemigroup=e.reverse,e.getJoinSemigroup=e.max,e.getMeetSemigroup=e.min,e.getIntercalateSemigroup=e.intercalate;function S(C){var N=(0,e.concatAll)(C);return function(x,z){return z===void 0?N(x):N(x)(z)}}e.fold=S,e.semigroupAll={concat:function(C,N){return C&&N}},e.semigroupAny={concat:function(C,N){return C||N}},e.getFunctionSemigroup=a.getSemigroup,e.semigroupString={concat:function(C,N){return C+N}},e.semigroupSum={concat:function(C,N){return C+N}},e.semigroupProduct={concat:function(C,N){return C*N}}}}),ho=Ke({"node_modules/fp-ts/lib/ReadonlyNonEmptyArray.js"(e){var r=e&&e.__createBinding||(Object.create?function(D,F,O,j){j===void 0&&(j=O);var te=Object.getOwnPropertyDescriptor(F,O);(!te||("get"in te?!F.__esModule:te.writable||te.configurable))&&(te={enumerable:!0,get:function(){return F[O]}}),Object.defineProperty(D,j,te)}:function(D,F,O,j){j===void 0&&(j=O),D[j]=F[O]}),n=e&&e.__setModuleDefault||(Object.create?function(D,F){Object.defineProperty(D,"default",{enumerable:!0,value:F})}:function(D,F){D.default=F}),i=e&&e.__importStar||function(D){if(D&&D.__esModule)return D;var F={};if(D!=null)for(var O in D)O!=="default"&&Object.prototype.hasOwnProperty.call(D,O)&&r(F,D,O);return n(F,D),F},a=e&&e.__spreadArray||function(D,F,O){if(O||arguments.length===2)for(var j=0,te=F.length,le;j<te;j++)(le||!(j in F))&&(le||(le=Array.prototype.slice.call(F,0,j)),le[j]=F[j]);return D.concat(le||Array.prototype.slice.call(F))};Object.defineProperty(e,"__esModule",{value:!0}),e.reduceRight=e.foldMap=e.reduce=e.mapWithIndex=e.map=e.flatten=e.duplicate=e.extend=e.flatMap=e.ap=e.alt=e.altW=e.of=e.chunksOf=e.splitAt=e.chop=e.chainWithIndex=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.modifyAt=e.updateAt=e.sort=e.groupBy=e.group=e.reverse=e.concat=e.concatW=e.fromArray=e.unappend=e.unprepend=e.range=e.replicate=e.makeBy=e.fromReadonlyArray=e.rotate=e.union=e.sortBy=e.uniq=e.unsafeUpdateAt=e.unsafeInsertAt=e.append=e.appendW=e.prepend=e.prependW=e.isOutOfBound=e.isNonEmpty=e.empty=void 0,e.groupSort=e.chain=e.intercalate=e.updateLast=e.modifyLast=e.updateHead=e.modifyHead=e.matchRight=e.matchLeft=e.concatAll=e.max=e.min=e.init=e.last=e.tail=e.head=e.apS=e.bind=e.let=e.bindTo=e.Do=e.Comonad=e.Alt=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getUnionSemigroup=e.getEq=e.getSemigroup=e.getShow=e.URI=e.extract=e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.foldMapWithIndex=e.reduceWithIndex=void 0,e.readonlyNonEmptyArray=e.fold=e.prependToAll=e.insertAt=e.snoc=e.cons=e.unsnoc=e.uncons=e.filterWithIndex=e.filter=void 0;var u=ha(),o=fi(),s=fo(),c=Nt(),l=di(),f=i(Wr()),d=hi(),v=i(vm());e.empty=f.emptyReadonlyArray,e.isNonEmpty=f.isNonEmpty;var g=function(D,F){return D<0||D>=F.length};e.isOutOfBound=g;var P=function(D){return function(F){return a([D],F,!0)}};e.prependW=P,e.prepend=e.prependW;var L=function(D){return function(F){return a(a([],F,!0),[D],!1)}};e.appendW=L,e.append=e.appendW;var B=function(D,F,O){if((0,e.isNonEmpty)(O)){var j=f.fromReadonlyNonEmptyArray(O);return j.splice(D,0,F),j}return[F]};e.unsafeInsertAt=B;var S=function(D,F,O){if(O[D]===F)return O;var j=f.fromReadonlyNonEmptyArray(O);return j[D]=F,j};e.unsafeUpdateAt=S;var C=function(D){return function(F){if(F.length===1)return F;for(var O=[(0,e.head)(F)],j=(0,e.tail)(F),te=function(nr){O.every(function(ge){return!D.equals(ge,nr)})&&O.push(nr)},le=0,Ie=j;le<Ie.length;le++){var At=Ie[le];te(At)}return O}};e.uniq=C;var N=function(D){if((0,e.isNonEmpty)(D)){var F=(0,d.getMonoid)();return(0,e.sort)(D.reduce(F.concat,F.empty))}return c.identity};e.sortBy=N;var x=function(D){var F=(0,e.uniq)(D);return function(O){return function(j){return F((0,c.pipe)(j,de(O)))}}};e.union=x;var z=function(D){return function(F){var O=F.length,j=Math.round(D)%O;if((0,e.isOutOfBound)(Math.abs(j),F)||j===0)return F;if(j<0){var te=(0,e.splitAt)(-j)(F),le=te[0],Ie=te[1];return(0,c.pipe)(Ie,de(le))}else return(0,e.rotate)(j-O)(F)}};e.rotate=z;var I=function(D){return(0,e.isNonEmpty)(D)?f.some(D):f.none};e.fromReadonlyArray=I;var E=function(D){return function(F){for(var O=Math.max(0,Math.floor(F)),j=[D(0)],te=1;te<O;te++)j.push(D(te));return j}};e.makeBy=E;var _=function(D){return(0,e.makeBy)(function(){return D})};e.replicate=_;var V=function(D,F){return D<=F?(0,e.makeBy)(function(O){return D+O})(F-D+1):[D]};e.range=V;var q=function(D){return[(0,e.head)(D),(0,e.tail)(D)]};e.unprepend=q;var X=function(D){return[(0,e.init)(D),(0,e.last)(D)]};e.unappend=X;var ne=function(D){return(0,e.fromReadonlyArray)(D.slice())};e.fromArray=ne;function ye(D){return function(F){return F.concat(D)}}e.concatW=ye;function de(D,F){return F?D.concat(F):function(O){return O.concat(D)}}e.concat=de;var je=function(D){return D.length===1?D:a([(0,e.last)(D)],D.slice(0,-1).reverse(),!0)};e.reverse=je;function yt(D){return function(F){var O=F.length;if(O===0)return e.empty;for(var j=[],te=F[0],le=[te],Ie=1;Ie<O;Ie++){var At=F[Ie];D.equals(At,te)?le.push(At):(j.push(le),te=At,le=[te])}return j.push(le),j}}e.group=yt;var mt=function(D){return function(F){for(var O={},j=0,te=F;j<te.length;j++){var le=te[j],Ie=D(le);f.has.call(O,Ie)?O[Ie].push(le):O[Ie]=[le]}return O}};e.groupBy=mt;var Qt=function(D){return function(F){return F.length===1?F:F.slice().sort(D.compare)}};e.sort=Qt;var fr=function(D,F){return(0,e.modifyAt)(D,function(){return F})};e.updateAt=fr;var dr=function(D,F){return function(O){return(0,e.isOutOfBound)(D,O)?f.none:f.some((0,e.unsafeUpdateAt)(D,F(O[D]),O))}};e.modifyAt=dr;var hr=function(D,F,O){for(var j=[O(D[0],F[0])],te=Math.min(D.length,F.length),le=1;le<te;le++)j[le]=O(D[le],F[le]);return j};e.zipWith=hr;function er(D,F){return F===void 0?function(O){return er(O,D)}:(0,e.zipWith)(D,F,function(O,j){return[O,j]})}e.zip=er;var xt=function(D){for(var F=[D[0][0]],O=[D[0][1]],j=1;j<D.length;j++)F[j]=D[j][0],O[j]=D[j][1];return[F,O]};e.unzip=xt;var vr=function(D){return function(F){for(var O=[D,F[0]],j=1;j<F.length;j++)O.push(D,F[j]);return O}};e.prependAll=vr;var tr=function(D){return function(F){var O=(0,e.tail)(F);return(0,e.isNonEmpty)(O)?(0,c.pipe)(O,(0,e.prependAll)(D),(0,e.prepend)((0,e.head)(F))):F}};e.intersperse=tr;var rr=function(D){return function(F){for(var O=f.fromReadonlyNonEmptyArray(D(0,(0,e.head)(F))),j=1;j<F.length;j++)O.push.apply(O,D(j,F[j]));return O}};e.chainWithIndex=rr;var yr=function(D){return function(F){for(var O=D(F),j=O[0],te=O[1],le=[j],Ie=te;(0,e.isNonEmpty)(Ie);){var At=D(Ie),nr=At[0],ge=At[1];le.push(nr),Ie=ge}return le}};e.chop=yr;var mr=function(D){return function(F){var O=Math.max(1,D);return O>=F.length?[F,e.empty]:[(0,c.pipe)(F.slice(1,O),(0,e.prepend)((0,e.head)(F))),F.slice(O)]}};e.splitAt=mr;var gr=function(D){return(0,e.chop)((0,e.splitAt)(D))};e.chunksOf=gr;var qe=function(D,F){return(0,c.pipe)(D,(0,e.map)(F))},he=function(D,F){return(0,c.pipe)(D,(0,e.mapWithIndex)(F))},rt=function(D,F){return(0,c.pipe)(D,(0,e.ap)(F))},De=function(D,F){return(0,c.pipe)(D,(0,e.extend)(F))},Ne=function(D,F,O){return(0,c.pipe)(D,(0,e.reduce)(F,O))},Ve=function(D){var F=(0,e.foldMap)(D);return function(O,j){return(0,c.pipe)(O,F(j))}},_e=function(D,F,O){return(0,c.pipe)(D,(0,e.reduceRight)(F,O))},Se=function(D){var F=(0,e.traverse)(D);return function(O,j){return(0,c.pipe)(O,F(j))}},be=function(D,F){return(0,c.pipe)(D,(0,e.alt)(F))},gt=function(D,F,O){return(0,c.pipe)(D,(0,e.reduceWithIndex)(F,O))},nt=function(D){var F=(0,e.foldMapWithIndex)(D);return function(O,j){return(0,c.pipe)(O,F(j))}},Ct=function(D,F,O){return(0,c.pipe)(D,(0,e.reduceRightWithIndex)(F,O))},pt=function(D){var F=(0,e.traverseWithIndex)(D);return function(O,j){return(0,c.pipe)(O,F(j))}};e.of=f.singleton;var se=function(D){return function(F){return(0,c.pipe)(F,ye(D()))}};e.altW=se,e.alt=e.altW;var oe=function(D){return(0,e.flatMap)(function(F){return(0,c.pipe)(D,(0,e.map)(F))})};e.ap=oe,e.flatMap=(0,c.dual)(2,function(D,F){return(0,c.pipe)(D,(0,e.chainWithIndex)(function(O,j){return F(j,O)}))});var St=function(D){return function(F){for(var O=(0,e.tail)(F),j=[D(F)];(0,e.isNonEmpty)(O);)j.push(D(O)),O=(0,e.tail)(O);return j}};e.extend=St,e.duplicate=(0,e.extend)(c.identity),e.flatten=(0,e.flatMap)(c.identity);var it=function(D){return(0,e.mapWithIndex)(function(F,O){return D(O)})};e.map=it;var ce=function(D){return function(F){for(var O=[D(0,(0,e.head)(F))],j=1;j<F.length;j++)O.push(D(j,F[j]));return O}};e.mapWithIndex=ce;var wt=function(D,F){return(0,e.reduceWithIndex)(D,function(O,j,te){return F(j,te)})};e.reduce=wt;var Je=function(D){return function(F){return function(O){return O.slice(1).reduce(function(j,te){return D.concat(j,F(te))},F(O[0]))}}};e.foldMap=Je;var $=function(D,F){return(0,e.reduceRightWithIndex)(D,function(O,j,te){return F(j,te)})};e.reduceRight=$;var Ft=function(D,F){return function(O){return O.reduce(function(j,te,le){return F(le,j,te)},D)}};e.reduceWithIndex=Ft;var ve=function(D){return function(F){return function(O){return O.slice(1).reduce(function(j,te,le){return D.concat(j,F(le+1,te))},F(0,O[0]))}}};e.foldMapWithIndex=ve;var Xe=function(D,F){return function(O){return O.reduceRight(function(j,te,le){return F(le,te,j)},D)}};e.reduceRightWithIndex=Xe;var Bt=function(D){var F=(0,e.traverseWithIndex)(D);return function(O){return F(function(j,te){return O(te)})}};e.traverse=Bt;var kt=function(D){return(0,e.traverseWithIndex)(D)(c.SK)};e.sequence=kt;var bt=function(D){return function(F){return function(O){for(var j=D.map(F(0,(0,e.head)(O)),e.of),te=1;te<O.length;te++)j=D.ap(D.map(j,function(le){return function(Ie){return(0,c.pipe)(le,(0,e.append)(Ie))}}),F(te,O[te]));return j}}};e.traverseWithIndex=bt,e.extract=f.head,e.URI="ReadonlyNonEmptyArray";var zt=function(D){return{show:function(F){return"[".concat(F.map(D.show).join(", "),"]")}}};e.getShow=zt;var Et=function(){return{concat:de}};e.getSemigroup=Et;var ot=function(D){return(0,s.fromEquals)(function(F,O){return F.length===O.length&&F.every(function(j,te){return D.equals(j,O[te])})})};e.getEq=ot;var ie=function(D){var F=(0,e.union)(D);return{concat:function(O,j){return F(j)(O)}}};e.getUnionSemigroup=ie,e.Functor={URI:e.URI,map:qe},e.flap=(0,l.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:qe,mapWithIndex:he},e.Apply={URI:e.URI,map:qe,ap:rt},e.apFirst=(0,u.apFirst)(e.Apply),e.apSecond=(0,u.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:qe,ap:rt,of:e.of},e.Chain={URI:e.URI,map:qe,ap:rt,chain:e.flatMap},e.chainFirst=(0,o.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:qe,ap:rt,of:e.of,chain:e.flatMap},e.Foldable={URI:e.URI,reduce:Ne,foldMap:Ve,reduceRight:_e},e.FoldableWithIndex={URI:e.URI,reduce:Ne,foldMap:Ve,reduceRight:_e,reduceWithIndex:gt,foldMapWithIndex:nt,reduceRightWithIndex:Ct},e.Traversable={URI:e.URI,map:qe,reduce:Ne,foldMap:Ve,reduceRight:_e,traverse:Se,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:qe,mapWithIndex:he,reduce:Ne,foldMap:Ve,reduceRight:_e,traverse:Se,sequence:e.sequence,reduceWithIndex:gt,foldMapWithIndex:nt,reduceRightWithIndex:Ct,traverseWithIndex:pt},e.Alt={URI:e.URI,map:qe,alt:be},e.Comonad={URI:e.URI,map:qe,extend:De,extract:e.extract},e.Do=(0,e.of)(f.emptyRecord),e.bindTo=(0,l.bindTo)(e.Functor);var Be=(0,l.let)(e.Functor);e.let=Be,e.bind=(0,o.bind)(e.Chain),e.apS=(0,u.apS)(e.Apply),e.head=e.extract,e.tail=f.tail;var Oe=function(D){return D[D.length-1]};e.last=Oe;var Dt=function(D){return D.slice(0,-1)};e.init=Dt;var ft=function(D){var F=v.min(D);return function(O){return O.reduce(F.concat)}};e.min=ft;var at=function(D){var F=v.max(D);return function(O){return O.reduce(F.concat)}};e.max=at;var Mt=function(D){return function(F){return F.reduce(D.concat)}};e.concatAll=Mt;var Ut=function(D){return function(F){return D((0,e.head)(F),(0,e.tail)(F))}};e.matchLeft=Ut;var Vt=function(D){return function(F){return D((0,e.init)(F),(0,e.last)(F))}};e.matchRight=Vt;var M=function(D){return function(F){return a([D((0,e.head)(F))],(0,e.tail)(F),!0)}};e.modifyHead=M;var h=function(D){return(0,e.modifyHead)(function(){return D})};e.updateHead=h;var w=function(D){return function(F){return(0,c.pipe)((0,e.init)(F),(0,e.append)(D((0,e.last)(F))))}};e.modifyLast=w;var k=function(D){return(0,e.modifyLast)(function(){return D})};e.updateLast=k;var H=function(D){var F=(0,e.concatAll)(D);return function(O){return(0,c.flow)((0,e.intersperse)(O),F)}};e.intercalate=H,e.chain=e.flatMap;function K(D){var F=(0,e.sort)(D),O=yt(D);return function(j){return(0,e.isNonEmpty)(j)?O(F(j)):e.empty}}e.groupSort=K;function Q(D){return(0,e.filterWithIndex)(function(F,O){return D(O)})}e.filter=Q;var ue=function(D){return function(F){return(0,e.fromReadonlyArray)(F.filter(function(O,j){return D(j,O)}))}};e.filterWithIndex=ue,e.uncons=e.unprepend,e.unsnoc=e.unappend;function Ae(D,F){return F===void 0?(0,e.prepend)(D):(0,c.pipe)(F,(0,e.prepend)(D))}e.cons=Ae;var we=function(D,F){return(0,c.pipe)(D,de([F]))};e.snoc=we;var st=function(D,F){return function(O){return D<0||D>O.length?f.none:f.some((0,e.unsafeInsertAt)(D,F,O))}};e.insertAt=st,e.prependToAll=e.prependAll,e.fold=e.concatAll,e.readonlyNonEmptyArray={URI:e.URI,of:e.of,map:qe,mapWithIndex:he,ap:rt,chain:e.flatMap,extend:De,extract:e.extract,reduce:Ne,foldMap:Ve,reduceRight:_e,traverse:Se,sequence:e.sequence,reduceWithIndex:gt,foldMapWithIndex:nt,reduceRightWithIndex:Ct,traverseWithIndex:pt,alt:be}}}),ym=Ke({"node_modules/fp-ts/lib/NonEmptyArray.js"(e){var r=e&&e.__createBinding||(Object.create?function(M,h,w,k){k===void 0&&(k=w);var H=Object.getOwnPropertyDescriptor(h,w);(!H||("get"in H?!h.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return h[w]}}),Object.defineProperty(M,k,H)}:function(M,h,w,k){k===void 0&&(k=w),M[k]=h[w]}),n=e&&e.__setModuleDefault||(Object.create?function(M,h){Object.defineProperty(M,"default",{enumerable:!0,value:h})}:function(M,h){M.default=h}),i=e&&e.__importStar||function(M){if(M&&M.__esModule)return M;var h={};if(M!=null)for(var w in M)w!=="default"&&Object.prototype.hasOwnProperty.call(M,w)&&r(h,M,w);return n(h,M),h},a=e&&e.__spreadArray||function(M,h,w){if(w||arguments.length===2)for(var k=0,H=h.length,K;k<H;k++)(K||!(k in h))&&(K||(K=Array.prototype.slice.call(h,0,k)),K[k]=h[k]);return M.concat(K||Array.prototype.slice.call(h))};Object.defineProperty(e,"__esModule",{value:!0}),e.mapWithIndex=e.map=e.flatten=e.duplicate=e.extend=e.flatMap=e.ap=e.alt=e.altW=e.chunksOf=e.splitAt=e.chop=e.chainWithIndex=e.foldMap=e.foldMapWithIndex=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.of=e.copy=e.modifyAt=e.updateAt=e.insertAt=e.sort=e.groupBy=e.group=e.reverse=e.concat=e.concatW=e.unappend=e.unprepend=e.range=e.replicate=e.makeBy=e.fromArray=e.fromReadonlyNonEmptyArray=e.rotate=e.union=e.sortBy=e.uniq=e.unsafeUpdateAt=e.unsafeInsertAt=e.append=e.appendW=e.prepend=e.prependW=e.isOutOfBound=e.isNonEmpty=void 0,e.chain=e.intercalate=e.updateLast=e.modifyLast=e.updateHead=e.modifyHead=e.matchRight=e.matchLeft=e.concatAll=e.max=e.min=e.init=e.last=e.tail=e.head=e.apS=e.bind=e.let=e.bindTo=e.Do=e.Comonad=e.Alt=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getUnionSemigroup=e.getEq=e.getSemigroup=e.getShow=e.URI=e.extract=e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.reduce=void 0,e.nonEmptyArray=e.fold=e.prependToAll=e.snoc=e.cons=e.unsnoc=e.uncons=e.filterWithIndex=e.filter=e.groupSort=void 0;var u=ha(),o=fi(),s=Nt(),c=di(),l=i(Wr()),f=hi(),d=i(ho()),v=function(M){return M.length>0};e.isNonEmpty=v;var g=function(M,h){return M<0||M>=h.length};e.isOutOfBound=g;var P=function(M){return function(h){return a([M],h,!0)}};e.prependW=P,e.prepend=e.prependW;var L=function(M){return function(h){return a(a([],h,!0),[M],!1)}};e.appendW=L,e.append=e.appendW;var B=function(M,h,w){if((0,e.isNonEmpty)(w)){var k=(0,e.fromReadonlyNonEmptyArray)(w);return k.splice(M,0,h),k}return[h]};e.unsafeInsertAt=B;var S=function(M,h,w){var k=(0,e.fromReadonlyNonEmptyArray)(w);return k[M]=h,k};e.unsafeUpdateAt=S;var C=function(M){return function(h){if(h.length===1)return(0,e.copy)(h);for(var w=[(0,e.head)(h)],k=(0,e.tail)(h),H=function(Ae){w.every(function(we){return!M.equals(we,Ae)})&&w.push(Ae)},K=0,Q=k;K<Q.length;K++){var ue=Q[K];H(ue)}return w}};e.uniq=C;var N=function(M){if((0,e.isNonEmpty)(M)){var h=(0,f.getMonoid)();return(0,e.sort)(M.reduce(h.concat,h.empty))}return e.copy};e.sortBy=N;var x=function(M){var h=(0,e.uniq)(M);return function(w){return function(k){return h((0,s.pipe)(k,ye(w)))}}};e.union=x;var z=function(M){return function(h){var w=h.length,k=Math.round(M)%w;if((0,e.isOutOfBound)(Math.abs(k),h)||k===0)return(0,e.copy)(h);if(k<0){var H=(0,e.splitAt)(-k)(h),K=H[0],Q=H[1];return(0,s.pipe)(Q,ye(K))}else return(0,e.rotate)(k-w)(h)}};e.rotate=z,e.fromReadonlyNonEmptyArray=l.fromReadonlyNonEmptyArray;var I=function(M){return(0,e.isNonEmpty)(M)?l.some(M):l.none};e.fromArray=I;var E=function(M){return function(h){for(var w=Math.max(0,Math.floor(h)),k=[M(0)],H=1;H<w;H++)k.push(M(H));return k}};e.makeBy=E;var _=function(M){return(0,e.makeBy)(function(){return M})};e.replicate=_;var V=function(M,h){return M<=h?(0,e.makeBy)(function(w){return M+w})(h-M+1):[M]};e.range=V;var q=function(M){return[(0,e.head)(M),(0,e.tail)(M)]};e.unprepend=q;var X=function(M){return[(0,e.init)(M),(0,e.last)(M)]};e.unappend=X;function ne(M){return function(h){return h.concat(M)}}e.concatW=ne;function ye(M,h){return h?M.concat(h):function(w){return w.concat(M)}}e.concat=ye;var de=function(M){return a([(0,e.last)(M)],M.slice(0,-1).reverse(),!0)};e.reverse=de;function je(M){return function(h){var w=h.length;if(w===0)return[];for(var k=[],H=h[0],K=[H],Q=1;Q<w;Q++){var ue=h[Q];M.equals(ue,H)?K.push(ue):(k.push(K),H=ue,K=[H])}return k.push(K),k}}e.group=je;var yt=function(M){return function(h){for(var w={},k=0,H=h;k<H.length;k++){var K=H[k],Q=M(K);l.has.call(w,Q)?w[Q].push(K):w[Q]=[K]}return w}};e.groupBy=yt;var mt=function(M){return function(h){return h.slice().sort(M.compare)}};e.sort=mt;var Qt=function(M,h){return function(w){return M<0||M>w.length?l.none:l.some((0,e.unsafeInsertAt)(M,h,w))}};e.insertAt=Qt;var fr=function(M,h){return(0,e.modifyAt)(M,function(){return h})};e.updateAt=fr;var dr=function(M,h){return function(w){return(0,e.isOutOfBound)(M,w)?l.none:l.some((0,e.unsafeUpdateAt)(M,h(w[M]),w))}};e.modifyAt=dr,e.copy=e.fromReadonlyNonEmptyArray;var hr=function(M){return[M]};e.of=hr;var er=function(M,h,w){for(var k=[w(M[0],h[0])],H=Math.min(M.length,h.length),K=1;K<H;K++)k[K]=w(M[K],h[K]);return k};e.zipWith=er;function xt(M,h){return h===void 0?function(w){return xt(w,M)}:(0,e.zipWith)(M,h,function(w,k){return[w,k]})}e.zip=xt;var vr=function(M){for(var h=[M[0][0]],w=[M[0][1]],k=1;k<M.length;k++)h[k]=M[k][0],w[k]=M[k][1];return[h,w]};e.unzip=vr;var tr=function(M){return function(h){for(var w=[M,h[0]],k=1;k<h.length;k++)w.push(M,h[k]);return w}};e.prependAll=tr;var rr=function(M){return function(h){var w=(0,e.tail)(h);return(0,e.isNonEmpty)(w)?(0,s.pipe)(w,(0,e.prependAll)(M),(0,e.prepend)((0,e.head)(h))):(0,e.copy)(h)}};e.intersperse=rr,e.foldMapWithIndex=d.foldMapWithIndex,e.foldMap=d.foldMap;var yr=function(M){return function(h){for(var w=(0,e.fromReadonlyNonEmptyArray)(M(0,(0,e.head)(h))),k=1;k<h.length;k++)w.push.apply(w,M(k,h[k]));return w}};e.chainWithIndex=yr;var mr=function(M){return function(h){for(var w=M(h),k=w[0],H=w[1],K=[k],Q=H;(0,e.isNonEmpty)(Q);){var ue=M(Q),Ae=ue[0],we=ue[1];K.push(Ae),Q=we}return K}};e.chop=mr;var gr=function(M){return function(h){var w=Math.max(1,M);return w>=h.length?[(0,e.copy)(h),[]]:[(0,s.pipe)(h.slice(1,w),(0,e.prepend)((0,e.head)(h))),h.slice(w)]}};e.splitAt=gr;var qe=function(M){return(0,e.chop)((0,e.splitAt)(M))};e.chunksOf=qe;var he=function(M,h){return(0,s.pipe)(M,(0,e.map)(h))},rt=function(M,h){return(0,s.pipe)(M,(0,e.mapWithIndex)(h))},De=function(M,h){return(0,s.pipe)(M,(0,e.ap)(h))},Ne=function(M,h){return(0,s.pipe)(M,(0,e.extend)(h))},Ve=function(M,h,w){return(0,s.pipe)(M,(0,e.reduce)(h,w))},_e=function(M){var h=(0,e.foldMap)(M);return function(w,k){return(0,s.pipe)(w,h(k))}},Se=function(M,h,w){return(0,s.pipe)(M,(0,e.reduceRight)(h,w))},be=function(M){var h=(0,e.traverse)(M);return function(w,k){return(0,s.pipe)(w,h(k))}},gt=function(M,h){return(0,s.pipe)(M,(0,e.alt)(h))},nt=function(M,h,w){return(0,s.pipe)(M,(0,e.reduceWithIndex)(h,w))},Ct=function(M){var h=(0,e.foldMapWithIndex)(M);return function(w,k){return(0,s.pipe)(w,h(k))}},pt=function(M,h,w){return(0,s.pipe)(M,(0,e.reduceRightWithIndex)(h,w))},se=function(M){var h=(0,e.traverseWithIndex)(M);return function(w,k){return(0,s.pipe)(w,h(k))}},oe=function(M){return function(h){return(0,s.pipe)(h,ne(M()))}};e.altW=oe,e.alt=e.altW;var St=function(M){return(0,e.flatMap)(function(h){return(0,s.pipe)(M,(0,e.map)(h))})};e.ap=St,e.flatMap=(0,s.dual)(2,function(M,h){return(0,s.pipe)(M,(0,e.chainWithIndex)(function(w,k){return h(k,w)}))});var it=function(M){return function(h){for(var w=(0,e.tail)(h),k=[M(h)];(0,e.isNonEmpty)(w);)k.push(M(w)),w=(0,e.tail)(w);return k}};e.extend=it,e.duplicate=(0,e.extend)(s.identity),e.flatten=(0,e.flatMap)(s.identity);var ce=function(M){return(0,e.mapWithIndex)(function(h,w){return M(w)})};e.map=ce;var wt=function(M){return function(h){for(var w=[M(0,(0,e.head)(h))],k=1;k<h.length;k++)w.push(M(k,h[k]));return w}};e.mapWithIndex=wt,e.reduce=d.reduce,e.reduceWithIndex=d.reduceWithIndex,e.reduceRight=d.reduceRight,e.reduceRightWithIndex=d.reduceRightWithIndex;var Je=function(M){var h=(0,e.traverseWithIndex)(M);return function(w){return h(function(k,H){return w(H)})}};e.traverse=Je;var $=function(M){return(0,e.traverseWithIndex)(M)(function(h,w){return w})};e.sequence=$;var Ft=function(M){return function(h){return function(w){for(var k=M.map(h(0,(0,e.head)(w)),e.of),H=1;H<w.length;H++)k=M.ap(M.map(k,function(K){return function(Q){return(0,s.pipe)(K,(0,e.append)(Q))}}),h(H,w[H]));return k}}};e.traverseWithIndex=Ft,e.extract=d.head,e.URI="NonEmptyArray",e.getShow=d.getShow;var ve=function(){return{concat:ye}};e.getSemigroup=ve,e.getEq=d.getEq;var Xe=function(M){var h=(0,e.union)(M);return{concat:function(w,k){return h(k)(w)}}};e.getUnionSemigroup=Xe,e.Functor={URI:e.URI,map:he},e.flap=(0,c.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:he,mapWithIndex:rt},e.Apply={URI:e.URI,map:he,ap:De},e.apFirst=(0,u.apFirst)(e.Apply),e.apSecond=(0,u.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:he,ap:De,of:e.of},e.Chain={URI:e.URI,map:he,ap:De,chain:e.flatMap},e.chainFirst=(0,o.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:he,ap:De,of:e.of,chain:e.flatMap},e.Foldable={URI:e.URI,reduce:Ve,foldMap:_e,reduceRight:Se},e.FoldableWithIndex={URI:e.URI,reduce:Ve,foldMap:_e,reduceRight:Se,reduceWithIndex:nt,foldMapWithIndex:Ct,reduceRightWithIndex:pt},e.Traversable={URI:e.URI,map:he,reduce:Ve,foldMap:_e,reduceRight:Se,traverse:be,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:he,mapWithIndex:rt,reduce:Ve,foldMap:_e,reduceRight:Se,traverse:be,sequence:e.sequence,reduceWithIndex:nt,foldMapWithIndex:Ct,reduceRightWithIndex:pt,traverseWithIndex:se},e.Alt={URI:e.URI,map:he,alt:gt},e.Comonad={URI:e.URI,map:he,extend:Ne,extract:e.extract},e.Do=(0,e.of)(l.emptyRecord),e.bindTo=(0,c.bindTo)(e.Functor);var Bt=(0,c.let)(e.Functor);e.let=Bt,e.bind=(0,o.bind)(e.Chain),e.apS=(0,u.apS)(e.Apply),e.head=d.head;var kt=function(M){return M.slice(1)};e.tail=kt,e.last=d.last;var bt=function(M){return M.slice(0,-1)};e.init=bt,e.min=d.min,e.max=d.max;var zt=function(M){return function(h){return h.reduce(M.concat)}};e.concatAll=zt;var Et=function(M){return function(h){return M((0,e.head)(h),(0,e.tail)(h))}};e.matchLeft=Et;var ot=function(M){return function(h){return M((0,e.init)(h),(0,e.last)(h))}};e.matchRight=ot;var ie=function(M){return function(h){return a([M((0,e.head)(h))],(0,e.tail)(h),!0)}};e.modifyHead=ie;var Be=function(M){return(0,e.modifyHead)(function(){return M})};e.updateHead=Be;var Oe=function(M){return function(h){return(0,s.pipe)((0,e.init)(h),(0,e.append)(M((0,e.last)(h))))}};e.modifyLast=Oe;var Dt=function(M){return(0,e.modifyLast)(function(){return M})};e.updateLast=Dt,e.intercalate=d.intercalate,e.chain=e.flatMap;function ft(M){var h=(0,e.sort)(M),w=je(M);return function(k){return(0,e.isNonEmpty)(k)?w(h(k)):[]}}e.groupSort=ft;function at(M){return(0,e.filterWithIndex)(function(h,w){return M(w)})}e.filter=at;var Mt=function(M){return function(h){return(0,e.fromArray)(h.filter(function(w,k){return M(k,w)}))}};e.filterWithIndex=Mt,e.uncons=e.unprepend,e.unsnoc=e.unappend;function Ut(M,h){return h===void 0?(0,e.prepend)(M):(0,s.pipe)(h,(0,e.prepend)(M))}e.cons=Ut;var Vt=function(M,h){return(0,s.pipe)(M,(0,e.append)(h))};e.snoc=Vt,e.prependToAll=e.prependAll,e.fold=d.concatAll,e.nonEmptyArray={URI:e.URI,of:e.of,map:he,mapWithIndex:rt,ap:De,chain:e.flatMap,extend:Ne,extract:e.extract,reduce:Ve,foldMap:_e,reduceRight:Se,traverse:be,sequence:e.sequence,reduceWithIndex:nt,foldMapWithIndex:Ct,reduceRightWithIndex:pt,traverseWithIndex:se,alt:gt}}}),Lc=Ke({"node_modules/fp-ts/lib/number.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Field=e.MonoidProduct=e.MonoidSum=e.SemigroupProduct=e.SemigroupSum=e.MagmaSub=e.Show=e.Bounded=e.Ord=e.Eq=e.isNumber=void 0;var r=function(n){return typeof n=="number"};e.isNumber=r,e.Eq={equals:function(n,i){return n===i}},e.Ord={equals:e.Eq.equals,compare:function(n,i){return n<i?-1:n>i?1:0}},e.Bounded={equals:e.Eq.equals,compare:e.Ord.compare,top:1/0,bottom:-1/0},e.Show={show:function(n){return JSON.stringify(n)}},e.MagmaSub={concat:function(n,i){return n-i}},e.SemigroupSum={concat:function(n,i){return n+i}},e.SemigroupProduct={concat:function(n,i){return n*i}},e.MonoidSum={concat:e.SemigroupSum.concat,empty:0},e.MonoidProduct={concat:e.SemigroupProduct.concat,empty:1},e.Field={add:e.SemigroupSum.concat,zero:0,mul:e.SemigroupProduct.concat,one:1,sub:e.MagmaSub.concat,degree:function(n){return 1},div:function(n,i){return n/i},mod:function(n,i){return n%i}}}}),$c=Ke({"node_modules/fp-ts/lib/Separated.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.right=e.left=e.flap=e.Functor=e.Bifunctor=e.URI=e.bimap=e.mapLeft=e.map=e.separated=void 0;var r=Nt(),n=di(),i=function(v,g){return{left:v,right:g}};e.separated=i;var a=function(v,g){return(0,r.pipe)(v,(0,e.map)(g))},u=function(v,g){return(0,r.pipe)(v,(0,e.mapLeft)(g))},o=function(v,g,P){return(0,r.pipe)(v,(0,e.bimap)(g,P))},s=function(v){return function(g){return(0,e.separated)((0,e.left)(g),v((0,e.right)(g)))}};e.map=s;var c=function(v){return function(g){return(0,e.separated)(v((0,e.left)(g)),(0,e.right)(g))}};e.mapLeft=c;var l=function(v,g){return function(P){return(0,e.separated)(v((0,e.left)(P)),g((0,e.right)(P)))}};e.bimap=l,e.URI="Separated",e.Bifunctor={URI:e.URI,mapLeft:u,bimap:o},e.Functor={URI:e.URI,map:a},e.flap=(0,n.flap)(e.Functor);var f=function(v){return v.left};e.left=f;var d=function(v){return v.right};e.right=d}}),jc=Ke({"node_modules/fp-ts/lib/Witherable.js"(e){var r=e&&e.__createBinding||(Object.create?function(c,l,f,d){d===void 0&&(d=f);var v=Object.getOwnPropertyDescriptor(l,f);(!v||("get"in v?!l.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(c,d,v)}:function(c,l,f,d){d===void 0&&(d=f),c[d]=l[f]}),n=e&&e.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),i=e&&e.__importStar||function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&r(l,c,f);return n(l,c),l};Object.defineProperty(e,"__esModule",{value:!0}),e.filterE=e.witherDefault=e.wiltDefault=void 0;var a=i(Wr());function u(c,l){return function(f){var d=c.traverse(f);return function(v,g){return f.map(d(v,g),l.separate)}}}e.wiltDefault=u;function o(c,l){return function(f){var d=c.traverse(f);return function(v,g){return f.map(d(v,g),l.compact)}}}e.witherDefault=o;function s(c){return function(l){var f=c.wither(l);return function(d){return function(v){return f(v,function(g){return l.map(d(g),function(P){return P?a.some(g):a.none})})}}}}e.filterE=s}}),qc=Ke({"node_modules/fp-ts/lib/Zero.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.guard=void 0;function r(n,i){return function(a){return a?i.of(void 0):n.zero()}}e.guard=r}}),mm=Ke({"node_modules/fp-ts/lib/ReadonlyArray.js"(e){var r=e&&e.__createBinding||(Object.create?function(y,m,b,T){T===void 0&&(T=b);var Y=Object.getOwnPropertyDescriptor(m,b);(!Y||("get"in Y?!m.__esModule:Y.writable||Y.configurable))&&(Y={enumerable:!0,get:function(){return m[b]}}),Object.defineProperty(y,T,Y)}:function(y,m,b,T){T===void 0&&(T=b),y[T]=m[b]}),n=e&&e.__setModuleDefault||(Object.create?function(y,m){Object.defineProperty(y,"default",{enumerable:!0,value:m})}:function(y,m){y.default=m}),i=e&&e.__importStar||function(y){if(y&&y.__esModule)return y;var m={};if(y!=null)for(var b in y)b!=="default"&&Object.prototype.hasOwnProperty.call(y,b)&&r(m,y,b);return n(m,y),m},a=e&&e.__spreadArray||function(y,m,b){if(b||arguments.length===2)for(var T=0,Y=m.length,Z;T<Y;T++)(Z||!(T in m))&&(Z||(Z=Array.prototype.slice.call(m,0,T)),Z[T]=m[T]);return y.concat(Z||Array.prototype.slice.call(m))};Object.defineProperty(e,"__esModule",{value:!0}),e.sort=e.lefts=e.rights=e.reverse=e.modifyAt=e.deleteAt=e.updateAt=e.insertAt=e.findLastIndex=e.findLastMap=e.findLast=e.findFirstMap=e.findFirst=e.findIndex=e.dropLeftWhile=e.dropRight=e.dropLeft=e.spanLeft=e.takeLeftWhile=e.takeRight=e.takeLeft=e.init=e.tail=e.last=e.head=e.lookup=e.isOutOfBound=e.size=e.scanRight=e.scanLeft=e.chainWithIndex=e.foldRight=e.matchRight=e.matchRightW=e.foldLeft=e.matchLeft=e.matchLeftW=e.match=e.matchW=e.fromEither=e.fromOption=e.fromPredicate=e.replicate=e.makeBy=e.appendW=e.append=e.prependW=e.prepend=e.isNonEmpty=e.isEmpty=void 0,e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.foldMap=e.reduce=e.foldMapWithIndex=e.duplicate=e.extend=e.filterWithIndex=e.partitionMapWithIndex=e.partitionMap=e.partitionWithIndex=e.partition=e.compact=e.filterMap=e.filterMapWithIndex=e.filter=e.separate=e.mapWithIndex=e.map=e.flatten=e.flatMap=e.ap=e.alt=e.altW=e.zero=e.of=e._chainRecBreadthFirst=e._chainRecDepthFirst=e.difference=e.intersection=e.union=e.concat=e.concatW=e.comprehension=e.fromOptionK=e.chunksOf=e.splitAt=e.chop=e.sortBy=e.uniq=e.elem=e.rotate=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=void 0,e.toArray=e.unsafeDeleteAt=e.unsafeUpdateAt=e.unsafeInsertAt=e.fromEitherK=e.FromEither=e.filterE=e.Witherable=e.ChainRecBreadthFirst=e.chainRecBreadthFirst=e.ChainRecDepthFirst=e.chainRecDepthFirst=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.guard=e.Zero=e.Alt=e.Unfoldable=e.chainFirst=e.Monad=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.getOrd=e.getEq=e.getMonoid=e.getSemigroup=e.getShow=e.URI=e.unfold=e.wilt=e.wither=e.traverseWithIndex=void 0,e.readonlyArray=e.prependToAll=e.snoc=e.cons=e.range=e.chain=e.apS=e.bind=e.let=e.bindTo=e.Do=e.intercalate=e.exists=e.some=e.every=e.empty=e.fromArray=void 0;var u=ha(),o=fi(),s=fo(),c=Wc(),l=Nt(),f=di(),d=i(Wr()),v=i(Lc()),g=hi(),P=i(ho()),L=$c(),B=jc(),S=qc(),C=function(y){return y.length===0};e.isEmpty=C,e.isNonEmpty=P.isNonEmpty,e.prepend=P.prepend,e.prependW=P.prependW,e.append=P.append,e.appendW=P.appendW;var N=function(y,m){return y<=0?e.empty:P.makeBy(m)(y)};e.makeBy=N;var x=function(y,m){return(0,e.makeBy)(y,function(){return m})};e.replicate=x;function z(y){return function(m){return y(m)?[m]:e.empty}}e.fromPredicate=z;var I=function(y){return d.isNone(y)?e.empty:[y.value]};e.fromOption=I;var E=function(y){return d.isLeft(y)?e.empty:[y.right]};e.fromEither=E;var _=function(y,m){return function(b){return(0,e.isNonEmpty)(b)?m(b):y()}};e.matchW=_,e.match=e.matchW;var V=function(y,m){return function(b){return(0,e.isNonEmpty)(b)?m(P.head(b),P.tail(b)):y()}};e.matchLeftW=V,e.matchLeft=e.matchLeftW,e.foldLeft=e.matchLeft;var q=function(y,m){return function(b){return(0,e.isNonEmpty)(b)?m(P.init(b),P.last(b)):y()}};e.matchRightW=q,e.matchRight=e.matchRightW,e.foldRight=e.matchRight;var X=function(y){return function(m){if((0,e.isEmpty)(m))return e.empty;for(var b=[],T=0;T<m.length;T++)b.push.apply(b,y(T,m[T]));return b}};e.chainWithIndex=X;var ne=function(y,m){return function(b){var T=b.length,Y=new Array(T+1);Y[0]=y;for(var Z=0;Z<T;Z++)Y[Z+1]=m(Y[Z],b[Z]);return Y}};e.scanLeft=ne;var ye=function(y,m){return function(b){var T=b.length,Y=new Array(T+1);Y[T]=y;for(var Z=T-1;Z>=0;Z--)Y[Z]=m(b[Z],Y[Z+1]);return Y}};e.scanRight=ye;var de=function(y){return y.length};e.size=de,e.isOutOfBound=P.isOutOfBound;function je(y,m){return m===void 0?function(b){return je(y,b)}:(0,e.isOutOfBound)(y,m)?d.none:d.some(m[y])}e.lookup=je;var yt=function(y){return(0,e.isNonEmpty)(y)?d.some(P.head(y)):d.none};e.head=yt;var mt=function(y){return(0,e.isNonEmpty)(y)?d.some(P.last(y)):d.none};e.last=mt;var Qt=function(y){return(0,e.isNonEmpty)(y)?d.some(P.tail(y)):d.none};e.tail=Qt;var fr=function(y){return(0,e.isNonEmpty)(y)?d.some(P.init(y)):d.none};e.init=fr;var dr=function(y){return function(m){return(0,e.isOutOfBound)(y,m)?m:y===0?e.empty:m.slice(0,y)}};e.takeLeft=dr;var hr=function(y){return function(m){return(0,e.isOutOfBound)(y,m)?m:y===0?e.empty:m.slice(-y)}};e.takeRight=hr;function er(y){return function(m){for(var b=[],T=0,Y=m;T<Y.length;T++){var Z=Y[T];if(!y(Z))break;b.push(Z)}var Ue=b.length;return Ue===m.length?m:Ue===0?e.empty:b}}e.takeLeftWhile=er;var xt=function(y,m){for(var b=y.length,T=0;T<b&&m(y[T]);T++);return T};function vr(y){return function(m){var b=(0,e.splitAt)(xt(m,y))(m),T=b[0],Y=b[1];return{init:T,rest:Y}}}e.spanLeft=vr;var tr=function(y){return function(m){return y<=0||(0,e.isEmpty)(m)?m:y>=m.length?e.empty:m.slice(y,m.length)}};e.dropLeft=tr;var rr=function(y){return function(m){return y<=0||(0,e.isEmpty)(m)?m:y>=m.length?e.empty:m.slice(0,m.length-y)}};e.dropRight=rr;function yr(y){return function(m){var b=xt(m,y);return b===0?m:b===m.length?e.empty:m.slice(b)}}e.dropLeftWhile=yr;var mr=function(y){return function(m){for(var b=0;b<m.length;b++)if(y(m[b]))return d.some(b);return d.none}};e.findIndex=mr;function gr(y){return function(m){for(var b=0;b<m.length;b++)if(y(m[b]))return d.some(m[b]);return d.none}}e.findFirst=gr;var qe=function(y){return function(m){for(var b=0;b<m.length;b++){var T=y(m[b]);if(d.isSome(T))return T}return d.none}};e.findFirstMap=qe;function he(y){return function(m){for(var b=m.length-1;b>=0;b--)if(y(m[b]))return d.some(m[b]);return d.none}}e.findLast=he;var rt=function(y){return function(m){for(var b=m.length-1;b>=0;b--){var T=y(m[b]);if(d.isSome(T))return T}return d.none}};e.findLastMap=rt;var De=function(y){return function(m){for(var b=m.length-1;b>=0;b--)if(y(m[b]))return d.some(b);return d.none}};e.findLastIndex=De;var Ne=function(y,m){return function(b){return y<0||y>b.length?d.none:d.some(P.unsafeInsertAt(y,m,b))}};e.insertAt=Ne;var Ve=function(y,m){return(0,e.modifyAt)(y,function(){return m})};e.updateAt=Ve;var _e=function(y){return function(m){return(0,e.isOutOfBound)(y,m)?d.none:d.some((0,e.unsafeDeleteAt)(y,m))}};e.deleteAt=_e;var Se=function(y,m){return function(b){return(0,e.isOutOfBound)(y,b)?d.none:d.some((0,e.unsafeUpdateAt)(y,m(b[y]),b))}};e.modifyAt=Se;var be=function(y){return y.length<=1?y:y.slice().reverse()};e.reverse=be;var gt=function(y){for(var m=[],b=0;b<y.length;b++){var T=y[b];T._tag==="Right"&&m.push(T.right)}return m};e.rights=gt;var nt=function(y){for(var m=[],b=0;b<y.length;b++){var T=y[b];T._tag==="Left"&&m.push(T.left)}return m};e.lefts=nt;var Ct=function(y){return function(m){return m.length<=1?m:m.slice().sort(y.compare)}};e.sort=Ct;var pt=function(y,m,b){for(var T=[],Y=Math.min(y.length,m.length),Z=0;Z<Y;Z++)T[Z]=b(y[Z],m[Z]);return T};e.zipWith=pt;function se(y,m){return m===void 0?function(b){return se(b,y)}:(0,e.zipWith)(y,m,function(b,T){return[b,T]})}e.zip=se;var oe=function(y){for(var m=[],b=[],T=0;T<y.length;T++)m[T]=y[T][0],b[T]=y[T][1];return[m,b]};e.unzip=oe;var St=function(y){var m=P.prependAll(y);return function(b){return(0,e.isNonEmpty)(b)?m(b):b}};e.prependAll=St;var it=function(y){var m=P.intersperse(y);return function(b){return(0,e.isNonEmpty)(b)?m(b):b}};e.intersperse=it;var ce=function(y){var m=P.rotate(y);return function(b){return(0,e.isNonEmpty)(b)?m(b):b}};e.rotate=ce;function wt(y){return function(m,b){if(b===void 0){var T=wt(y);return function(Ue){return T(m,Ue)}}for(var Y=function(Ue){return y.equals(Ue,m)},Z=0;Z<b.length;Z++)if(Y(b[Z]))return!0;return!1}}e.elem=wt;var Je=function(y){var m=P.uniq(y);return function(b){return(0,e.isNonEmpty)(b)?m(b):b}};e.uniq=Je;var $=function(y){var m=P.sortBy(y);return function(b){return(0,e.isNonEmpty)(b)?m(b):b}};e.sortBy=$;var Ft=function(y){var m=P.chop(y);return function(b){return(0,e.isNonEmpty)(b)?m(b):e.empty}};e.chop=Ft;var ve=function(y){return function(m){return y>=1&&(0,e.isNonEmpty)(m)?P.splitAt(y)(m):(0,e.isEmpty)(m)?[m,e.empty]:[e.empty,m]}};e.splitAt=ve;var Xe=function(y){var m=P.chunksOf(y);return function(b){return(0,e.isNonEmpty)(b)?m(b):e.empty}};e.chunksOf=Xe;var Bt=function(y){return function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];return(0,e.fromOption)(y.apply(void 0,m))}};e.fromOptionK=Bt;function kt(y,m,b){b===void 0&&(b=function(){return!0});var T=function(Y,Z){return(0,e.isNonEmpty)(Z)?(0,e.flatMap)(P.head(Z),function(Ue){return T((0,l.pipe)(Y,(0,e.append)(Ue)),P.tail(Z))}):b.apply(void 0,Y)?[m.apply(void 0,Y)]:e.empty};return T(e.empty,y)}e.comprehension=kt;var bt=function(y){return function(m){return(0,e.isEmpty)(m)?y:(0,e.isEmpty)(y)?m:m.concat(y)}};e.concatW=bt,e.concat=e.concatW;function zt(y){var m=P.union(y);return function(b,T){if(T===void 0){var Y=zt(y);return function(Z){return Y(Z,b)}}return(0,e.isNonEmpty)(b)&&(0,e.isNonEmpty)(T)?m(T)(b):(0,e.isNonEmpty)(b)?b:T}}e.union=zt;function Et(y){var m=wt(y);return function(b,T){if(T===void 0){var Y=Et(y);return function(Z){return Y(Z,b)}}return b.filter(function(Z){return m(Z,T)})}}e.intersection=Et;function ot(y){var m=wt(y);return function(b,T){if(T===void 0){var Y=ot(y);return function(Z){return Y(Z,b)}}return b.filter(function(Z){return!m(Z,T)})}}e.difference=ot;var ie=function(y,m){return(0,l.pipe)(y,(0,e.map)(m))},Be=function(y,m){return(0,l.pipe)(y,(0,e.mapWithIndex)(m))},Oe=function(y,m){return(0,l.pipe)(y,(0,e.ap)(m))},Dt=function(y,m){return(0,l.pipe)(y,(0,e.filter)(m))},ft=function(y,m){return(0,l.pipe)(y,(0,e.filterMap)(m))},at=function(y,m){return(0,l.pipe)(y,(0,e.partition)(m))},Mt=function(y,m){return(0,l.pipe)(y,(0,e.partitionMap)(m))},Ut=function(y,m){return(0,l.pipe)(y,(0,e.partitionWithIndex)(m))},Vt=function(y,m){return(0,l.pipe)(y,(0,e.partitionMapWithIndex)(m))},M=function(y,m){return(0,l.pipe)(y,(0,e.alt)(m))},h=function(y,m,b){return(0,l.pipe)(y,(0,e.reduce)(m,b))},w=function(y){var m=(0,e.foldMap)(y);return function(b,T){return(0,l.pipe)(b,m(T))}},k=function(y,m,b){return(0,l.pipe)(y,(0,e.reduceRight)(m,b))},H=function(y,m,b){return(0,l.pipe)(y,(0,e.reduceWithIndex)(m,b))},K=function(y){var m=(0,e.foldMapWithIndex)(y);return function(b,T){return(0,l.pipe)(b,m(T))}},Q=function(y,m,b){return(0,l.pipe)(y,(0,e.reduceRightWithIndex)(m,b))},ue=function(y,m){return(0,l.pipe)(y,(0,e.filterMapWithIndex)(m))},Ae=function(y,m){return(0,l.pipe)(y,(0,e.filterWithIndex)(m))},we=function(y,m){return(0,l.pipe)(y,(0,e.extend)(m))},st=function(y){var m=(0,e.traverse)(y);return function(b,T){return(0,l.pipe)(b,m(T))}},D=function(y){var m=(0,e.traverseWithIndex)(y);return function(b,T){return(0,l.pipe)(b,m(T))}},F=function(y,m){return(0,l.pipe)(y,(0,e.chainRecDepthFirst)(m))};e._chainRecDepthFirst=F;var O=function(y,m){return(0,l.pipe)(y,(0,e.chainRecBreadthFirst)(m))};e._chainRecBreadthFirst=O,e.of=P.of;var j=function(){return e.empty};e.zero=j;var te=function(y){return function(m){return m.concat(y())}};e.altW=te,e.alt=e.altW;var le=function(y){return(0,e.flatMap)(function(m){return(0,l.pipe)(y,(0,e.map)(m))})};e.ap=le,e.flatMap=(0,l.dual)(2,function(y,m){return(0,l.pipe)(y,(0,e.chainWithIndex)(function(b,T){return m(T,b)}))}),e.flatten=(0,e.flatMap)(l.identity);var Ie=function(y){return function(m){return m.map(function(b){return y(b)})}};e.map=Ie;var At=function(y){return function(m){return m.map(function(b,T){return y(T,b)})}};e.mapWithIndex=At;var nr=function(y){for(var m=[],b=[],T=0,Y=y;T<Y.length;T++){var Z=Y[T];Z._tag==="Left"?m.push(Z.left):b.push(Z.right)}return(0,L.separated)(m,b)};e.separate=nr;var ge=function(y){return function(m){return m.filter(y)}};e.filter=ge;var He=function(y){return function(m){for(var b=[],T=0;T<m.length;T++){var Y=y(T,m[T]);d.isSome(Y)&&b.push(Y.value)}return b}};e.filterMapWithIndex=He;var fe=function(y){return(0,e.filterMapWithIndex)(function(m,b){return y(b)})};e.filterMap=fe,e.compact=(0,e.filterMap)(l.identity);var xe=function(y){return(0,e.partitionWithIndex)(function(m,b){return y(b)})};e.partition=xe;var dt=function(y){return function(m){for(var b=[],T=[],Y=0;Y<m.length;Y++){var Z=m[Y];y(Y,Z)?T.push(Z):b.push(Z)}return(0,L.separated)(b,T)}};e.partitionWithIndex=dt;var Ge=function(y){return(0,e.partitionMapWithIndex)(function(m,b){return y(b)})};e.partitionMap=Ge;var Ht=function(y){return function(m){for(var b=[],T=[],Y=0;Y<m.length;Y++){var Z=y(Y,m[Y]);Z._tag==="Left"?b.push(Z.left):T.push(Z.right)}return(0,L.separated)(b,T)}};e.partitionMapWithIndex=Ht;var _t=function(y){return function(m){return m.filter(function(b,T){return y(T,b)})}};e.filterWithIndex=_t;var Ot=function(y){return function(m){return m.map(function(b,T){return y(m.slice(T))})}};e.extend=Ot,e.duplicate=(0,e.extend)(l.identity);var Gt=function(y){return function(m){return function(b){return b.reduce(function(T,Y,Z){return y.concat(T,m(Z,Y))},y.empty)}}};e.foldMapWithIndex=Gt;var Rr=function(y,m){return(0,e.reduceWithIndex)(y,function(b,T,Y){return m(T,Y)})};e.reduce=Rr;var Vr=function(y){var m=(0,e.foldMapWithIndex)(y);return function(b){return m(function(T,Y){return b(Y)})}};e.foldMap=Vr;var $n=function(y,m){return function(b){for(var T=b.length,Y=y,Z=0;Z<T;Z++)Y=m(Z,Y,b[Z]);return Y}};e.reduceWithIndex=$n;var nu=function(y,m){return(0,e.reduceRightWithIndex)(y,function(b,T,Y){return m(T,Y)})};e.reduceRight=nu;var iu=function(y,m){return function(b){return b.reduceRight(function(T,Y,Z){return m(Z,Y,T)},y)}};e.reduceRightWithIndex=iu;var au=function(y){var m=(0,e.traverseWithIndex)(y);return function(b){return m(function(T,Y){return b(Y)})}};e.traverse=au;var uu=function(y){return function(m){return h(m,y.of((0,e.zero)()),function(b,T){return y.ap(y.map(b,function(Y){return function(Z){return(0,l.pipe)(Y,(0,e.append)(Z))}}),T)})}};e.sequence=uu;var p=function(y){return function(m){return(0,e.reduceWithIndex)(y.of((0,e.zero)()),function(b,T,Y){return y.ap(y.map(T,function(Z){return function(Ue){return(0,l.pipe)(Z,(0,e.append)(Ue))}}),m(b,Y))})}};e.traverseWithIndex=p;var A=function(y){var m=su(y);return function(b){return function(T){return m(T,b)}}};e.wither=A;var R=function(y){var m=cu(y);return function(b){return function(T){return m(T,b)}}};e.wilt=R;var U=function(y,m){for(var b=[],T=y;;){var Y=m(T);if(d.isSome(Y)){var Z=Y.value,Ue=Z[0],Gr=Z[1];b.push(Ue),T=Gr}else break}return b};e.unfold=U,e.URI="ReadonlyArray";var re=function(y){return{show:function(m){return"[".concat(m.map(y.show).join(", "),"]")}}};e.getShow=re;var ae=function(){return{concat:function(y,m){return(0,e.isEmpty)(y)?m:(0,e.isEmpty)(m)?y:y.concat(m)}}};e.getSemigroup=ae;var Hr=function(){return{concat:(0,e.getSemigroup)().concat,empty:e.empty}};e.getMonoid=Hr;var ou=function(y){return(0,s.fromEquals)(function(m,b){return m.length===b.length&&m.every(function(T,Y){return y.equals(T,b[Y])})})};e.getEq=ou;var Vy=function(y){return(0,g.fromCompare)(function(m,b){for(var T=m.length,Y=b.length,Z=Math.min(T,Y),Ue=0;Ue<Z;Ue++){var Gr=y.compare(m[Ue],b[Ue]);if(Gr!==0)return Gr}return v.Ord.compare(T,Y)})};e.getOrd=Vy;var Hy=function(y){var m=zt(y);return{concat:function(b,T){return m(T)(b)}}};e.getUnionSemigroup=Hy;var Gy=function(y){return{concat:(0,e.getUnionSemigroup)(y).concat,empty:e.empty}};e.getUnionMonoid=Gy;var Ky=function(y){var m=Et(y);return{concat:function(b,T){return m(T)(b)}}};e.getIntersectionSemigroup=Ky;var Jy=function(y){var m=ot(y);return{concat:function(b,T){return m(T)(b)}}};e.getDifferenceMagma=Jy,e.Functor={URI:e.URI,map:ie},e.flap=(0,f.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:ie,mapWithIndex:Be},e.Apply={URI:e.URI,map:ie,ap:Oe},e.apFirst=(0,u.apFirst)(e.Apply),e.apSecond=(0,u.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:ie,ap:Oe,of:e.of},e.Chain={URI:e.URI,map:ie,ap:Oe,chain:e.flatMap},e.Monad={URI:e.URI,map:ie,ap:Oe,of:e.of,chain:e.flatMap},e.chainFirst=(0,o.chainFirst)(e.Chain),e.Unfoldable={URI:e.URI,unfold:e.unfold},e.Alt={URI:e.URI,map:ie,alt:M},e.Zero={URI:e.URI,zero:e.zero},e.guard=(0,S.guard)(e.Zero,e.Pointed),e.Alternative={URI:e.URI,map:ie,ap:Oe,of:e.of,alt:M,zero:e.zero},e.Extend={URI:e.URI,map:ie,extend:we},e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:ie,compact:e.compact,separate:e.separate,filter:Dt,filterMap:ft,partition:at,partitionMap:Mt},e.FilterableWithIndex={URI:e.URI,map:ie,mapWithIndex:Be,compact:e.compact,separate:e.separate,filter:Dt,filterMap:ft,partition:at,partitionMap:Mt,partitionMapWithIndex:Vt,partitionWithIndex:Ut,filterMapWithIndex:ue,filterWithIndex:Ae},e.Foldable={URI:e.URI,reduce:h,foldMap:w,reduceRight:k},e.FoldableWithIndex={URI:e.URI,reduce:h,foldMap:w,reduceRight:k,reduceWithIndex:H,foldMapWithIndex:K,reduceRightWithIndex:Q},e.Traversable={URI:e.URI,map:ie,reduce:h,foldMap:w,reduceRight:k,traverse:st,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:ie,mapWithIndex:Be,reduce:h,foldMap:w,reduceRight:k,reduceWithIndex:H,foldMapWithIndex:K,reduceRightWithIndex:Q,traverse:st,sequence:e.sequence,traverseWithIndex:D};var Yy=function(y){return function(m){for(var b=a([],y(m),!0),T=[];b.length>0;){var Y=b.shift();d.isLeft(Y)?b.unshift.apply(b,y(Y.left)):T.push(Y.right)}return T}};e.chainRecDepthFirst=Yy,e.ChainRecDepthFirst={URI:e.URI,map:ie,ap:Oe,chain:e.flatMap,chainRec:e._chainRecDepthFirst};var Xy=function(y){return function(m){var b=y(m),T=[],Y=[];function Z(lu){d.isLeft(lu)?y(lu.left).forEach(function(om){return T.push(om)}):Y.push(lu.right)}for(var Ue=0,Gr=b;Ue<Gr.length;Ue++){var um=Gr[Ue];Z(um)}for(;T.length>0;)Z(T.shift());return Y}};e.chainRecBreadthFirst=Xy,e.ChainRecBreadthFirst={URI:e.URI,map:ie,ap:Oe,chain:e.flatMap,chainRec:e._chainRecBreadthFirst};var su=(0,B.witherDefault)(e.Traversable,e.Compactable),cu=(0,B.wiltDefault)(e.Traversable,e.Compactable);e.Witherable={URI:e.URI,map:ie,compact:e.compact,separate:e.separate,filter:Dt,filterMap:ft,partition:at,partitionMap:Mt,reduce:h,foldMap:w,reduceRight:k,traverse:st,sequence:e.sequence,wither:su,wilt:cu},e.filterE=(0,B.filterE)(e.Witherable),e.FromEither={URI:e.URI,fromEither:e.fromEither},e.fromEitherK=(0,c.fromEitherK)(e.FromEither),e.unsafeInsertAt=P.unsafeInsertAt;var Zy=function(y,m,b){return(0,e.isNonEmpty)(b)?P.unsafeUpdateAt(y,m,b):b};e.unsafeUpdateAt=Zy;var Qy=function(y,m){var b=m.slice();return b.splice(y,1),b};e.unsafeDeleteAt=Qy;var em=function(y){return y.slice()};e.toArray=em;var tm=function(y){return(0,e.isEmpty)(y)?e.empty:y.slice()};e.fromArray=tm,e.empty=P.empty;function rm(y){return function(m){return m.every(y)}}e.every=rm;var nm=function(y){return function(m){return m.some(y)}};e.some=nm,e.exists=e.some;var im=function(y){var m=P.intercalate(y);return function(b){return(0,e.match)(function(){return y.empty},m(b))}};e.intercalate=im,e.Do=(0,e.of)(d.emptyRecord),e.bindTo=(0,f.bindTo)(e.Functor);var am=(0,f.let)(e.Functor);e.let=am,e.bind=(0,o.bind)(e.Chain),e.apS=(0,u.apS)(e.Apply),e.chain=e.flatMap,e.range=P.range,e.cons=P.cons,e.snoc=P.snoc,e.prependToAll=e.prependAll,e.readonlyArray={URI:e.URI,compact:e.compact,separate:e.separate,map:ie,ap:Oe,of:e.of,chain:e.flatMap,filter:Dt,filterMap:ft,partition:at,partitionMap:Mt,mapWithIndex:Be,partitionMapWithIndex:Vt,partitionWithIndex:Ut,filterMapWithIndex:ue,filterWithIndex:Ae,alt:M,zero:e.zero,unfold:e.unfold,reduce:h,foldMap:w,reduceRight:k,traverse:st,sequence:e.sequence,reduceWithIndex:H,foldMapWithIndex:K,reduceRightWithIndex:Q,traverseWithIndex:D,extend:we,wither:su,wilt:cu}}}),gm=Ke({"node_modules/fp-ts/lib/Array.js"(e){var r=e&&e.__createBinding||(Object.create?function(p,A,R,U){U===void 0&&(U=R);var re=Object.getOwnPropertyDescriptor(A,R);(!re||("get"in re?!A.__esModule:re.writable||re.configurable))&&(re={enumerable:!0,get:function(){return A[R]}}),Object.defineProperty(p,U,re)}:function(p,A,R,U){U===void 0&&(U=R),p[U]=A[R]}),n=e&&e.__setModuleDefault||(Object.create?function(p,A){Object.defineProperty(p,"default",{enumerable:!0,value:A})}:function(p,A){p.default=A}),i=e&&e.__importStar||function(p){if(p&&p.__esModule)return p;var A={};if(p!=null)for(var R in p)R!=="default"&&Object.prototype.hasOwnProperty.call(p,R)&&r(A,p,R);return n(A,p),A};Object.defineProperty(e,"__esModule",{value:!0}),e.lefts=e.rights=e.reverse=e.modifyAt=e.deleteAt=e.updateAt=e.insertAt=e.copy=e.findLastIndex=e.findLastMap=e.findLast=e.findFirstMap=e.findFirst=e.findIndex=e.dropLeftWhile=e.dropRight=e.dropLeft=e.spanLeft=e.takeLeftWhile=e.takeRight=e.takeLeft=e.init=e.tail=e.last=e.head=e.lookup=e.isOutOfBound=e.size=e.scanRight=e.scanLeft=e.chainWithIndex=e.foldRight=e.matchRight=e.matchRightW=e.foldLeft=e.matchLeft=e.matchLeftW=e.match=e.matchW=e.fromEither=e.fromOption=e.fromPredicate=e.replicate=e.makeBy=e.appendW=e.append=e.prependW=e.prepend=e.isNonEmpty=e.isEmpty=void 0,e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.reduce=e.foldMapWithIndex=e.foldMap=e.duplicate=e.extend=e.filterWithIndex=e.alt=e.altW=e.partitionMapWithIndex=e.partitionMap=e.partitionWithIndex=e.partition=e.filter=e.separate=e.compact=e.filterMap=e.filterMapWithIndex=e.mapWithIndex=e.flatten=e.flatMap=e.ap=e.map=e.zero=e.of=e.difference=e.intersection=e.union=e.concat=e.concatW=e.comprehension=e.fromOptionK=e.chunksOf=e.splitAt=e.chop=e.sortBy=e.uniq=e.elem=e.rotate=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.sort=void 0,e.some=e.every=e.unsafeDeleteAt=e.unsafeUpdateAt=e.unsafeInsertAt=e.fromEitherK=e.FromEither=e.filterE=e.ChainRecBreadthFirst=e.chainRecBreadthFirst=e.ChainRecDepthFirst=e.chainRecDepthFirst=e.Witherable=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.guard=e.Zero=e.Alt=e.Unfoldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.getOrd=e.getEq=e.getMonoid=e.getSemigroup=e.getShow=e.URI=e.unfold=e.wilt=e.wither=void 0,e.array=e.prependToAll=e.snoc=e.cons=e.empty=e.range=e.chain=e.apS=e.bind=e.let=e.bindTo=e.Do=e.intercalate=e.exists=void 0;var a=ha(),u=fi(),o=Wc(),s=Nt(),c=di(),l=i(Wr()),f=i(ym()),d=i(mm()),v=$c(),g=jc(),P=qc(),L=function(p){return p.length===0};e.isEmpty=L,e.isNonEmpty=f.isNonEmpty,e.prepend=f.prepend,e.prependW=f.prependW,e.append=f.append,e.appendW=f.appendW;var B=function(p,A){return p<=0?[]:f.makeBy(A)(p)};e.makeBy=B;var S=function(p,A){return(0,e.makeBy)(p,function(){return A})};e.replicate=S;function C(p){return function(A){return p(A)?[A]:[]}}e.fromPredicate=C;var N=function(p){return l.isNone(p)?[]:[p.value]};e.fromOption=N;var x=function(p){return l.isLeft(p)?[]:[p.right]};e.fromEither=x;var z=function(p,A){return function(R){return(0,e.isNonEmpty)(R)?A(R):p()}};e.matchW=z,e.match=e.matchW;var I=function(p,A){return function(R){return(0,e.isNonEmpty)(R)?A(f.head(R),f.tail(R)):p()}};e.matchLeftW=I,e.matchLeft=e.matchLeftW,e.foldLeft=e.matchLeft;var E=function(p,A){return function(R){return(0,e.isNonEmpty)(R)?A(f.init(R),f.last(R)):p()}};e.matchRightW=E,e.matchRight=e.matchRightW,e.foldRight=e.matchRight;var _=function(p){return function(A){for(var R=[],U=0;U<A.length;U++)R.push.apply(R,p(U,A[U]));return R}};e.chainWithIndex=_;var V=function(p,A){return function(R){var U=R.length,re=new Array(U+1);re[0]=p;for(var ae=0;ae<U;ae++)re[ae+1]=A(re[ae],R[ae]);return re}};e.scanLeft=V;var q=function(p,A){return function(R){var U=R.length,re=new Array(U+1);re[U]=p;for(var ae=U-1;ae>=0;ae--)re[ae]=A(R[ae],re[ae+1]);return re}};e.scanRight=q;var X=function(p){return p.length};e.size=X,e.isOutOfBound=f.isOutOfBound,e.lookup=d.lookup,e.head=d.head,e.last=d.last;var ne=function(p){return(0,e.isNonEmpty)(p)?l.some(f.tail(p)):l.none};e.tail=ne;var ye=function(p){return(0,e.isNonEmpty)(p)?l.some(f.init(p)):l.none};e.init=ye;var de=function(p){return function(A){return(0,e.isOutOfBound)(p,A)?(0,e.copy)(A):A.slice(0,p)}};e.takeLeft=de;var je=function(p){return function(A){return(0,e.isOutOfBound)(p,A)?(0,e.copy)(A):p===0?[]:A.slice(-p)}};e.takeRight=je;function yt(p){return function(A){for(var R=[],U=0,re=A;U<re.length;U++){var ae=re[U];if(!p(ae))break;R.push(ae)}return R}}e.takeLeftWhile=yt;var mt=function(p,A){for(var R=p.length,U=0;U<R&&A(p[U]);U++);return U};function Qt(p){return function(A){var R=(0,e.splitAt)(mt(A,p))(A),U=R[0],re=R[1];return{init:U,rest:re}}}e.spanLeft=Qt;var fr=function(p){return function(A){return p<=0||(0,e.isEmpty)(A)?(0,e.copy)(A):p>=A.length?[]:A.slice(p,A.length)}};e.dropLeft=fr;var dr=function(p){return function(A){return p<=0||(0,e.isEmpty)(A)?(0,e.copy)(A):p>=A.length?[]:A.slice(0,A.length-p)}};e.dropRight=dr;function hr(p){return function(A){return A.slice(mt(A,p))}}e.dropLeftWhile=hr,e.findIndex=d.findIndex;function er(p){return d.findFirst(p)}e.findFirst=er,e.findFirstMap=d.findFirstMap;function xt(p){return d.findLast(p)}e.findLast=xt,e.findLastMap=d.findLastMap,e.findLastIndex=d.findLastIndex;var vr=function(p){return p.slice()};e.copy=vr;var tr=function(p,A){return function(R){return p<0||p>R.length?l.none:l.some((0,e.unsafeInsertAt)(p,A,R))}};e.insertAt=tr;var rr=function(p,A){return(0,e.modifyAt)(p,function(){return A})};e.updateAt=rr;var yr=function(p){return function(A){return(0,e.isOutOfBound)(p,A)?l.none:l.some((0,e.unsafeDeleteAt)(p,A))}};e.deleteAt=yr;var mr=function(p,A){return function(R){return(0,e.isOutOfBound)(p,R)?l.none:l.some((0,e.unsafeUpdateAt)(p,A(R[p]),R))}};e.modifyAt=mr;var gr=function(p){return(0,e.isEmpty)(p)?[]:p.slice().reverse()};e.reverse=gr;var qe=function(p){for(var A=[],R=0;R<p.length;R++){var U=p[R];U._tag==="Right"&&A.push(U.right)}return A};e.rights=qe;var he=function(p){for(var A=[],R=0;R<p.length;R++){var U=p[R];U._tag==="Left"&&A.push(U.left)}return A};e.lefts=he;var rt=function(p){return function(A){return A.length<=1?(0,e.copy)(A):A.slice().sort(p.compare)}};e.sort=rt;var De=function(p,A,R){for(var U=[],re=Math.min(p.length,A.length),ae=0;ae<re;ae++)U[ae]=R(p[ae],A[ae]);return U};e.zipWith=De;function Ne(p,A){return A===void 0?function(R){return Ne(R,p)}:(0,e.zipWith)(p,A,function(R,U){return[R,U]})}e.zip=Ne;var Ve=function(p){for(var A=[],R=[],U=0;U<p.length;U++)A[U]=p[U][0],R[U]=p[U][1];return[A,R]};e.unzip=Ve;var _e=function(p){var A=f.prependAll(p);return function(R){return(0,e.isNonEmpty)(R)?A(R):[]}};e.prependAll=_e;var Se=function(p){var A=f.intersperse(p);return function(R){return(0,e.isNonEmpty)(R)?A(R):(0,e.copy)(R)}};e.intersperse=Se;var be=function(p){var A=f.rotate(p);return function(R){return(0,e.isNonEmpty)(R)?A(R):(0,e.copy)(R)}};e.rotate=be,e.elem=d.elem;var gt=function(p){var A=f.uniq(p);return function(R){return(0,e.isNonEmpty)(R)?A(R):(0,e.copy)(R)}};e.uniq=gt;var nt=function(p){var A=f.sortBy(p);return function(R){return(0,e.isNonEmpty)(R)?A(R):(0,e.copy)(R)}};e.sortBy=nt;var Ct=function(p){var A=f.chop(p);return function(R){return(0,e.isNonEmpty)(R)?A(R):[]}};e.chop=Ct;var pt=function(p){return function(A){return p>=1&&(0,e.isNonEmpty)(A)?f.splitAt(p)(A):(0,e.isEmpty)(A)?[(0,e.copy)(A),[]]:[[],(0,e.copy)(A)]}};e.splitAt=pt;var se=function(p){var A=f.chunksOf(p);return function(R){return(0,e.isNonEmpty)(R)?A(R):[]}};e.chunksOf=se;var oe=function(p){return function(){for(var A=[],R=0;R<arguments.length;R++)A[R]=arguments[R];return(0,e.fromOption)(p.apply(void 0,A))}};e.fromOptionK=oe;function St(p,A,R){R===void 0&&(R=function(){return!0});var U=function(re,ae){return(0,e.isNonEmpty)(ae)?(0,e.flatMap)(f.head(ae),function(Hr){return U((0,s.pipe)(re,(0,e.append)(Hr)),f.tail(ae))}):R.apply(void 0,re)?[A.apply(void 0,re)]:[]};return U([],p)}e.comprehension=St;var it=function(p){return function(A){return(0,e.isEmpty)(A)?(0,e.copy)(p):(0,e.isEmpty)(p)?(0,e.copy)(A):A.concat(p)}};e.concatW=it,e.concat=e.concatW;function ce(p){var A=f.union(p);return function(R,U){if(U===void 0){var re=ce(p);return function(ae){return re(ae,R)}}return(0,e.isNonEmpty)(R)&&(0,e.isNonEmpty)(U)?A(U)(R):(0,e.isNonEmpty)(R)?(0,e.copy)(R):(0,e.copy)(U)}}e.union=ce;function wt(p){var A=(0,e.elem)(p);return function(R,U){if(U===void 0){var re=wt(p);return function(ae){return re(ae,R)}}return R.filter(function(ae){return A(ae,U)})}}e.intersection=wt;function Je(p){var A=(0,e.elem)(p);return function(R,U){if(U===void 0){var re=Je(p);return function(ae){return re(ae,R)}}return R.filter(function(ae){return!A(ae,U)})}}e.difference=Je;var $=function(p,A){return(0,s.pipe)(p,(0,e.map)(A))},Ft=function(p,A){return(0,s.pipe)(p,(0,e.mapWithIndex)(A))},ve=function(p,A){return(0,s.pipe)(p,(0,e.ap)(A))},Xe=function(p,A){return(0,s.pipe)(p,(0,e.filter)(A))},Bt=function(p,A){return(0,s.pipe)(p,(0,e.filterMap)(A))},kt=function(p,A){return(0,s.pipe)(p,(0,e.partition)(A))},bt=function(p,A){return(0,s.pipe)(p,(0,e.partitionMap)(A))},zt=function(p,A){return(0,s.pipe)(p,(0,e.partitionWithIndex)(A))},Et=function(p,A){return(0,s.pipe)(p,(0,e.partitionMapWithIndex)(A))},ot=function(p,A){return(0,s.pipe)(p,(0,e.alt)(A))},ie=function(p,A,R){return(0,s.pipe)(p,(0,e.reduce)(A,R))},Be=function(p){var A=(0,e.foldMap)(p);return function(R,U){return(0,s.pipe)(R,A(U))}},Oe=function(p,A,R){return(0,s.pipe)(p,(0,e.reduceRight)(A,R))},Dt=function(p,A,R){return(0,s.pipe)(p,(0,e.reduceWithIndex)(A,R))},ft=function(p){var A=(0,e.foldMapWithIndex)(p);return function(R,U){return(0,s.pipe)(R,A(U))}},at=function(p,A,R){return(0,s.pipe)(p,(0,e.reduceRightWithIndex)(A,R))},Mt=function(p,A){return(0,s.pipe)(p,(0,e.filterMapWithIndex)(A))},Ut=function(p,A){return(0,s.pipe)(p,(0,e.filterWithIndex)(A))},Vt=function(p,A){return(0,s.pipe)(p,(0,e.extend)(A))},M=function(p){var A=(0,e.traverse)(p);return function(R,U){return(0,s.pipe)(R,A(U))}},h=function(p){var A=(0,e.traverseWithIndex)(p);return function(R,U){return(0,s.pipe)(R,A(U))}},w=d._chainRecDepthFirst,k=d._chainRecBreadthFirst;e.of=f.of;var H=function(){return[]};e.zero=H;var K=function(p){return function(A){return A.map(function(R){return p(R)})}};e.map=K;var Q=function(p){return(0,e.flatMap)(function(A){return(0,s.pipe)(p,(0,e.map)(A))})};e.ap=Q,e.flatMap=(0,s.dual)(2,function(p,A){return(0,s.pipe)(p,(0,e.chainWithIndex)(function(R,U){return A(U,R)}))}),e.flatten=(0,e.flatMap)(s.identity);var ue=function(p){return function(A){return A.map(function(R,U){return p(U,R)})}};e.mapWithIndex=ue;var Ae=function(p){return function(A){for(var R=[],U=0;U<A.length;U++){var re=p(U,A[U]);l.isSome(re)&&R.push(re.value)}return R}};e.filterMapWithIndex=Ae;var we=function(p){return(0,e.filterMapWithIndex)(function(A,R){return p(R)})};e.filterMap=we,e.compact=(0,e.filterMap)(s.identity);var st=function(p){for(var A=[],R=[],U=0,re=p;U<re.length;U++){var ae=re[U];ae._tag==="Left"?A.push(ae.left):R.push(ae.right)}return(0,v.separated)(A,R)};e.separate=st;var D=function(p){return function(A){return A.filter(p)}};e.filter=D;var F=function(p){return(0,e.partitionWithIndex)(function(A,R){return p(R)})};e.partition=F;var O=function(p){return function(A){for(var R=[],U=[],re=0;re<A.length;re++){var ae=A[re];p(re,ae)?U.push(ae):R.push(ae)}return(0,v.separated)(R,U)}};e.partitionWithIndex=O;var j=function(p){return(0,e.partitionMapWithIndex)(function(A,R){return p(R)})};e.partitionMap=j;var te=function(p){return function(A){for(var R=[],U=[],re=0;re<A.length;re++){var ae=p(re,A[re]);ae._tag==="Left"?R.push(ae.left):U.push(ae.right)}return(0,v.separated)(R,U)}};e.partitionMapWithIndex=te;var le=function(p){return function(A){return A.concat(p())}};e.altW=le,e.alt=e.altW;var Ie=function(p){return function(A){return A.filter(function(R,U){return p(U,R)})}};e.filterWithIndex=Ie;var At=function(p){return function(A){return A.map(function(R,U){return p(A.slice(U))})}};e.extend=At,e.duplicate=(0,e.extend)(s.identity),e.foldMap=d.foldMap,e.foldMapWithIndex=d.foldMapWithIndex,e.reduce=d.reduce,e.reduceWithIndex=d.reduceWithIndex,e.reduceRight=d.reduceRight,e.reduceRightWithIndex=d.reduceRightWithIndex;var nr=function(p){var A=(0,e.traverseWithIndex)(p);return function(R){return A(function(U,re){return R(re)})}};e.traverse=nr;var ge=function(p){return function(A){return ie(A,p.of((0,e.zero)()),function(R,U){return p.ap(p.map(R,function(re){return function(ae){return(0,s.pipe)(re,(0,e.append)(ae))}}),U)})}};e.sequence=ge;var He=function(p){return function(A){return(0,e.reduceWithIndex)(p.of((0,e.zero)()),function(R,U,re){return p.ap(p.map(U,function(ae){return function(Hr){return(0,s.pipe)(ae,(0,e.append)(Hr))}}),A(R,re))})}};e.traverseWithIndex=He;var fe=function(p){var A=Vr(p);return function(R){return function(U){return A(U,R)}}};e.wither=fe;var xe=function(p){var A=$n(p);return function(R){return function(U){return A(U,R)}}};e.wilt=xe;var dt=function(p,A){for(var R=[],U=p;;){var re=A(U);if(l.isSome(re)){var ae=re.value,Hr=ae[0],ou=ae[1];R.push(Hr),U=ou}else break}return R};e.unfold=dt,e.URI="Array",e.getShow=d.getShow;var Ge=function(){return{concat:function(p,A){return p.concat(A)}}};e.getSemigroup=Ge;var Ht=function(){return{concat:(0,e.getSemigroup)().concat,empty:[]}};e.getMonoid=Ht,e.getEq=d.getEq,e.getOrd=d.getOrd;var _t=function(p){var A=ce(p);return{concat:function(R,U){return A(U)(R)}}};e.getUnionSemigroup=_t;var Ot=function(p){return{concat:(0,e.getUnionSemigroup)(p).concat,empty:[]}};e.getUnionMonoid=Ot;var Gt=function(p){var A=wt(p);return{concat:function(R,U){return A(U)(R)}}};e.getIntersectionSemigroup=Gt;var Rr=function(p){var A=Je(p);return{concat:function(R,U){return A(U)(R)}}};e.getDifferenceMagma=Rr,e.Functor={URI:e.URI,map:$},e.flap=(0,c.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:$,mapWithIndex:Ft},e.Apply={URI:e.URI,map:$,ap:ve},e.apFirst=(0,a.apFirst)(e.Apply),e.apSecond=(0,a.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:$,ap:ve,of:e.of},e.Chain={URI:e.URI,map:$,ap:ve,chain:e.flatMap},e.chainFirst=(0,u.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:$,ap:ve,of:e.of,chain:e.flatMap},e.Unfoldable={URI:e.URI,unfold:e.unfold},e.Alt={URI:e.URI,map:$,alt:ot},e.Zero={URI:e.URI,zero:e.zero},e.guard=(0,P.guard)(e.Zero,e.Pointed),e.Alternative={URI:e.URI,map:$,ap:ve,of:e.of,alt:ot,zero:e.zero},e.Extend={URI:e.URI,map:$,extend:Vt},e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:$,compact:e.compact,separate:e.separate,filter:Xe,filterMap:Bt,partition:kt,partitionMap:bt},e.FilterableWithIndex={URI:e.URI,map:$,mapWithIndex:Ft,compact:e.compact,separate:e.separate,filter:Xe,filterMap:Bt,partition:kt,partitionMap:bt,partitionMapWithIndex:Et,partitionWithIndex:zt,filterMapWithIndex:Mt,filterWithIndex:Ut},e.Foldable={URI:e.URI,reduce:ie,foldMap:Be,reduceRight:Oe},e.FoldableWithIndex={URI:e.URI,reduce:ie,foldMap:Be,reduceRight:Oe,reduceWithIndex:Dt,foldMapWithIndex:ft,reduceRightWithIndex:at},e.Traversable={URI:e.URI,map:$,reduce:ie,foldMap:Be,reduceRight:Oe,traverse:M,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:$,mapWithIndex:Ft,reduce:ie,foldMap:Be,reduceRight:Oe,reduceWithIndex:Dt,foldMapWithIndex:ft,reduceRightWithIndex:at,traverse:M,sequence:e.sequence,traverseWithIndex:h};var Vr=(0,g.witherDefault)(e.Traversable,e.Compactable),$n=(0,g.wiltDefault)(e.Traversable,e.Compactable);e.Witherable={URI:e.URI,map:$,compact:e.compact,separate:e.separate,filter:Xe,filterMap:Bt,partition:kt,partitionMap:bt,reduce:ie,foldMap:Be,reduceRight:Oe,traverse:M,sequence:e.sequence,wither:Vr,wilt:$n},e.chainRecDepthFirst=d.chainRecDepthFirst,e.ChainRecDepthFirst={URI:e.URI,map:$,ap:ve,chain:e.flatMap,chainRec:w},e.chainRecBreadthFirst=d.chainRecBreadthFirst,e.ChainRecBreadthFirst={URI:e.URI,map:$,ap:ve,chain:e.flatMap,chainRec:k},e.filterE=(0,g.filterE)(e.Witherable),e.FromEither={URI:e.URI,fromEither:e.fromEither},e.fromEitherK=(0,o.fromEitherK)(e.FromEither),e.unsafeInsertAt=f.unsafeInsertAt;var nu=function(p,A,R){return(0,e.isNonEmpty)(R)?f.unsafeUpdateAt(p,A,R):[]};e.unsafeUpdateAt=nu;var iu=function(p,A){var R=A.slice();return R.splice(p,1),R};e.unsafeDeleteAt=iu,e.every=d.every;var au=function(p){return function(A){return A.some(p)}};e.some=au,e.exists=e.some,e.intercalate=d.intercalate,e.Do=(0,e.of)(l.emptyRecord),e.bindTo=(0,c.bindTo)(e.Functor);var uu=(0,c.let)(e.Functor);e.let=uu,e.bind=(0,u.bind)(e.Chain),e.apS=(0,a.apS)(e.Apply),e.chain=e.flatMap,e.range=f.range,e.empty=[],e.cons=f.cons,e.snoc=f.snoc,e.prependToAll=e.prependAll,e.array={URI:e.URI,compact:e.compact,separate:e.separate,map:$,ap:ve,of:e.of,chain:e.flatMap,filter:Xe,filterMap:Bt,partition:kt,partitionMap:bt,mapWithIndex:Ft,partitionMapWithIndex:Et,partitionWithIndex:zt,filterMapWithIndex:Mt,filterWithIndex:Ut,alt:ot,zero:e.zero,unfold:e.unfold,reduce:ie,foldMap:Be,reduceRight:Oe,traverse:M,sequence:e.sequence,reduceWithIndex:Dt,foldMapWithIndex:ft,reduceRightWithIndex:at,traverseWithIndex:h,extend:Vt,wither:Vr,wilt:$n}}}),pm=Ke({"node_modules/fp-ts/lib/string.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.endsWith=e.startsWith=e.includes=e.split=e.size=e.isEmpty=e.slice=e.trimRight=e.trimLeft=e.trim=e.replace=e.toLowerCase=e.toUpperCase=e.isString=e.Show=e.Ord=e.Monoid=e.empty=e.Semigroup=e.Eq=void 0;var r=ho();e.Eq={equals:function(B,S){return B===S}},e.Semigroup={concat:function(B,S){return B+S}},e.empty="",e.Monoid={concat:e.Semigroup.concat,empty:e.empty},e.Ord={equals:e.Eq.equals,compare:function(B,S){return B<S?-1:B>S?1:0}},e.Show={show:function(B){return JSON.stringify(B)}};var n=function(B){return typeof B=="string"};e.isString=n;var i=function(B){return B.toUpperCase()};e.toUpperCase=i;var a=function(B){return B.toLowerCase()};e.toLowerCase=a;var u=function(B,S){return function(C){return C.replace(B,S)}};e.replace=u;var o=function(B){return B.trim()};e.trim=o;var s=function(B){return B.trimLeft()};e.trimLeft=s;var c=function(B){return B.trimRight()};e.trimRight=c;var l=function(B,S){return function(C){return C.slice(B,S)}};e.slice=l;var f=function(B){return B.length===0};e.isEmpty=f;var d=function(B){return B.length};e.size=d;var v=function(B){return function(S){var C=S.split(B);return(0,r.isNonEmpty)(C)?C:[S]}};e.split=v;var g=function(B,S){return function(C){return C.includes(B,S)}};e.includes=g;var P=function(B,S){return function(C){return C.startsWith(B,S)}};e.startsWith=P;var L=function(B,S){return function(C){return C.endsWith(B,S)}};e.endsWith=L}}),xc=Ke({"node_modules/json5/dist/index.js"(e,r){(function(n,i){typeof e=="object"&&typeof r<"u"?r.exports=i():typeof define=="function"&&define.amd?define(i):n.JSON5=i()})(e,function(){function n(h,w){return w={exports:{}},h(w,w.exports),w.exports}var i=n(function(h){var w=h.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=w)}),a=n(function(h){var w=h.exports={version:"2.6.5"};typeof __e=="number"&&(__e=w)});a.version;var u=function(h){return typeof h=="object"?h!==null:typeof h=="function"},o=function(h){if(!u(h))throw TypeError(h+" is not an object!");return h},s=function(h){try{return!!h()}catch{return!0}},c=!s(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),l=i.document,f=u(l)&&u(l.createElement),d=function(h){return f?l.createElement(h):{}},v=!c&&!s(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7}),g=function(h,w){if(!u(h))return h;var k,H;if(w&&typeof(k=h.toString)=="function"&&!u(H=k.call(h))||typeof(k=h.valueOf)=="function"&&!u(H=k.call(h))||!w&&typeof(k=h.toString)=="function"&&!u(H=k.call(h)))return H;throw TypeError("Can't convert object to primitive value")},P=Object.defineProperty,L=c?Object.defineProperty:function(w,k,H){if(o(w),k=g(k,!0),o(H),v)try{return P(w,k,H)}catch{}if("get"in H||"set"in H)throw TypeError("Accessors not supported!");return"value"in H&&(w[k]=H.value),w},B={f:L},S=function(h,w){return{enumerable:!(h&1),configurable:!(h&2),writable:!(h&4),value:w}},C=c?function(h,w,k){return B.f(h,w,S(1,k))}:function(h,w,k){return h[w]=k,h},N={}.hasOwnProperty,x=function(h,w){return N.call(h,w)},z=0,I=Math.random(),E=function(h){return"Symbol(".concat(h===void 0?"":h,")_",(++z+I).toString(36))},_=n(function(h){var w="__core-js_shared__",k=i[w]||(i[w]={});(h.exports=function(H,K){return k[H]||(k[H]=K!==void 0?K:{})})("versions",[]).push({version:a.version,mode:"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),V=_("native-function-to-string",Function.toString),q=n(function(h){var w=E("src"),k="toString",H=(""+V).split(k);a.inspectSource=function(K){return V.call(K)},(h.exports=function(K,Q,ue,Ae){var we=typeof ue=="function";we&&(x(ue,"name")||C(ue,"name",Q)),K[Q]!==ue&&(we&&(x(ue,w)||C(ue,w,K[Q]?""+K[Q]:H.join(String(Q)))),K===i?K[Q]=ue:Ae?K[Q]?K[Q]=ue:C(K,Q,ue):(delete K[Q],C(K,Q,ue)))})(Function.prototype,k,function(){return typeof this=="function"&&this[w]||V.call(this)})}),X=function(h){if(typeof h!="function")throw TypeError(h+" is not a function!");return h},ne=function(h,w,k){if(X(h),w===void 0)return h;switch(k){case 1:return function(H){return h.call(w,H)};case 2:return function(H,K){return h.call(w,H,K)};case 3:return function(H,K,Q){return h.call(w,H,K,Q)}}return function(){return h.apply(w,arguments)}},ye="prototype",de=function(h,w,k){var H=h&de.F,K=h&de.G,Q=h&de.S,ue=h&de.P,Ae=h&de.B,we=K?i:Q?i[w]||(i[w]={}):(i[w]||{})[ye],st=K?a:a[w]||(a[w]={}),D=st[ye]||(st[ye]={}),F,O,j,te;K&&(k=w);for(F in k)O=!H&&we&&we[F]!==void 0,j=(O?we:k)[F],te=Ae&&O?ne(j,i):ue&&typeof j=="function"?ne(Function.call,j):j,we&&q(we,F,j,h&de.U),st[F]!=j&&C(st,F,te),ue&&D[F]!=j&&(D[F]=j)};i.core=a,de.F=1,de.G=2,de.S=4,de.P=8,de.B=16,de.W=32,de.U=64,de.R=128;var je=de,yt=Math.ceil,mt=Math.floor,Qt=function(h){return isNaN(h=+h)?0:(h>0?mt:yt)(h)},fr=function(h){if(h==null)throw TypeError("Can't call method on  "+h);return h},dr=function(h){return function(w,k){var H=String(fr(w)),K=Qt(k),Q=H.length,ue,Ae;return K<0||K>=Q?h?"":void 0:(ue=H.charCodeAt(K),ue<55296||ue>56319||K+1===Q||(Ae=H.charCodeAt(K+1))<56320||Ae>57343?h?H.charAt(K):ue:h?H.slice(K,K+2):(ue-55296<<10)+(Ae-56320)+65536)}},hr=dr(!1);je(je.P,"String",{codePointAt:function(w){return hr(this,w)}}),a.String.codePointAt;var er=Math.max,xt=Math.min,vr=function(h,w){return h=Qt(h),h<0?er(h+w,0):xt(h,w)},tr=String.fromCharCode,rr=String.fromCodePoint;je(je.S+je.F*(!!rr&&rr.length!=1),"String",{fromCodePoint:function(w){for(var k=arguments,H=[],K=arguments.length,Q=0,ue;K>Q;){if(ue=+k[Q++],vr(ue,1114111)!==ue)throw RangeError(ue+" is not a valid code point");H.push(ue<65536?tr(ue):tr(((ue-=65536)>>10)+55296,ue%1024+56320))}return H.join("")}}),a.String.fromCodePoint;var yr=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,mr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,gr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,qe={Space_Separator:yr,ID_Start:mr,ID_Continue:gr},he={isSpaceSeparator:function(w){return typeof w=="string"&&qe.Space_Separator.test(w)},isIdStartChar:function(w){return typeof w=="string"&&(w>="a"&&w<="z"||w>="A"&&w<="Z"||w==="$"||w==="_"||qe.ID_Start.test(w))},isIdContinueChar:function(w){return typeof w=="string"&&(w>="a"&&w<="z"||w>="A"&&w<="Z"||w>="0"&&w<="9"||w==="$"||w==="_"||w==="\u200C"||w==="\u200D"||qe.ID_Continue.test(w))},isDigit:function(w){return typeof w=="string"&&/[0-9]/.test(w)},isHexDigit:function(w){return typeof w=="string"&&/[0-9A-Fa-f]/.test(w)}},rt,De,Ne,Ve,_e,Se,be,gt,nt,Ct=function(w,k){rt=String(w),De="start",Ne=[],Ve=0,_e=1,Se=0,be=void 0,gt=void 0,nt=void 0;do be=wt(),zt[De]();while(be.type!=="eof");return typeof k=="function"?pt({"":nt},"",k):nt};function pt(h,w,k){var H=h[w];if(H!=null&&typeof H=="object")if(Array.isArray(H))for(var K=0;K<H.length;K++){var Q=String(K),ue=pt(H,Q,k);ue===void 0?delete H[Q]:Object.defineProperty(H,Q,{value:ue,writable:!0,enumerable:!0,configurable:!0})}else for(var Ae in H){var we=pt(H,Ae,k);we===void 0?delete H[Ae]:Object.defineProperty(H,Ae,{value:we,writable:!0,enumerable:!0,configurable:!0})}return k.call(h,w,H)}var se,oe,St,it,ce;function wt(){for(se="default",oe="",St=!1,it=1;;){ce=Je();var h=Ft[se]();if(h)return h}}function Je(){if(rt[Ve])return String.fromCodePoint(rt.codePointAt(Ve))}function $(){var h=Je();return h===`
`?(_e++,Se=0):h?Se+=h.length:Se++,h&&(Ve+=h.length),h}var Ft={default:function(){switch(ce){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":$();return;case"/":$(),se="comment";return;case void 0:return $(),ve("eof")}if(he.isSpaceSeparator(ce)){$();return}return Ft[De]()},comment:function(){switch(ce){case"*":$(),se="multiLineComment";return;case"/":$(),se="singleLineComment";return}throw ie($())},multiLineComment:function(){switch(ce){case"*":$(),se="multiLineCommentAsterisk";return;case void 0:throw ie($())}$()},multiLineCommentAsterisk:function(){switch(ce){case"*":$();return;case"/":$(),se="default";return;case void 0:throw ie($())}$(),se="multiLineComment"},singleLineComment:function(){switch(ce){case`
`:case"\r":case"\u2028":case"\u2029":$(),se="default";return;case void 0:return $(),ve("eof")}$()},value:function(){switch(ce){case"{":case"[":return ve("punctuator",$());case"n":return $(),Xe("ull"),ve("null",null);case"t":return $(),Xe("rue"),ve("boolean",!0);case"f":return $(),Xe("alse"),ve("boolean",!1);case"-":case"+":$()==="-"&&(it=-1),se="sign";return;case".":oe=$(),se="decimalPointLeading";return;case"0":oe=$(),se="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":oe=$(),se="decimalInteger";return;case"I":return $(),Xe("nfinity"),ve("numeric",1/0);case"N":return $(),Xe("aN"),ve("numeric",NaN);case'"':case"'":St=$()==='"',oe="",se="string";return}throw ie($())},identifierNameStartEscape:function(){if(ce!=="u")throw ie($());$();var w=bt();switch(w){case"$":case"_":break;default:if(!he.isIdStartChar(w))throw Oe();break}oe+=w,se="identifierName"},identifierName:function(){switch(ce){case"$":case"_":case"\u200C":case"\u200D":oe+=$();return;case"\\":$(),se="identifierNameEscape";return}if(he.isIdContinueChar(ce)){oe+=$();return}return ve("identifier",oe)},identifierNameEscape:function(){if(ce!=="u")throw ie($());$();var w=bt();switch(w){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!he.isIdContinueChar(w))throw Oe();break}oe+=w,se="identifierName"},sign:function(){switch(ce){case".":oe=$(),se="decimalPointLeading";return;case"0":oe=$(),se="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":oe=$(),se="decimalInteger";return;case"I":return $(),Xe("nfinity"),ve("numeric",it*(1/0));case"N":return $(),Xe("aN"),ve("numeric",NaN)}throw ie($())},zero:function(){switch(ce){case".":oe+=$(),se="decimalPoint";return;case"e":case"E":oe+=$(),se="decimalExponent";return;case"x":case"X":oe+=$(),se="hexadecimal";return}return ve("numeric",it*0)},decimalInteger:function(){switch(ce){case".":oe+=$(),se="decimalPoint";return;case"e":case"E":oe+=$(),se="decimalExponent";return}if(he.isDigit(ce)){oe+=$();return}return ve("numeric",it*Number(oe))},decimalPointLeading:function(){if(he.isDigit(ce)){oe+=$(),se="decimalFraction";return}throw ie($())},decimalPoint:function(){switch(ce){case"e":case"E":oe+=$(),se="decimalExponent";return}if(he.isDigit(ce)){oe+=$(),se="decimalFraction";return}return ve("numeric",it*Number(oe))},decimalFraction:function(){switch(ce){case"e":case"E":oe+=$(),se="decimalExponent";return}if(he.isDigit(ce)){oe+=$();return}return ve("numeric",it*Number(oe))},decimalExponent:function(){switch(ce){case"+":case"-":oe+=$(),se="decimalExponentSign";return}if(he.isDigit(ce)){oe+=$(),se="decimalExponentInteger";return}throw ie($())},decimalExponentSign:function(){if(he.isDigit(ce)){oe+=$(),se="decimalExponentInteger";return}throw ie($())},decimalExponentInteger:function(){if(he.isDigit(ce)){oe+=$();return}return ve("numeric",it*Number(oe))},hexadecimal:function(){if(he.isHexDigit(ce)){oe+=$(),se="hexadecimalInteger";return}throw ie($())},hexadecimalInteger:function(){if(he.isHexDigit(ce)){oe+=$();return}return ve("numeric",it*Number(oe))},string:function(){switch(ce){case"\\":$(),oe+=Bt();return;case'"':if(St)return $(),ve("string",oe);oe+=$();return;case"'":if(!St)return $(),ve("string",oe);oe+=$();return;case`
`:case"\r":throw ie($());case"\u2028":case"\u2029":Dt(ce);break;case void 0:throw ie($())}oe+=$()},start:function(){switch(ce){case"{":case"[":return ve("punctuator",$())}se="value"},beforePropertyName:function(){switch(ce){case"$":case"_":oe=$(),se="identifierName";return;case"\\":$(),se="identifierNameStartEscape";return;case"}":return ve("punctuator",$());case'"':case"'":St=$()==='"',se="string";return}if(he.isIdStartChar(ce)){oe+=$(),se="identifierName";return}throw ie($())},afterPropertyName:function(){if(ce===":")return ve("punctuator",$());throw ie($())},beforePropertyValue:function(){se="value"},afterPropertyValue:function(){switch(ce){case",":case"}":return ve("punctuator",$())}throw ie($())},beforeArrayValue:function(){if(ce==="]")return ve("punctuator",$());se="value"},afterArrayValue:function(){switch(ce){case",":case"]":return ve("punctuator",$())}throw ie($())},end:function(){throw ie($())}};function ve(h,w){return{type:h,value:w,line:_e,column:Se}}function Xe(h){for(var w=0,k=h;w<k.length;w+=1){var H=k[w],K=Je();if(K!==H)throw ie($());$()}}function Bt(){var h=Je();switch(h){case"b":return $(),"\b";case"f":return $(),"\f";case"n":return $(),`
`;case"r":return $(),"\r";case"t":return $(),"	";case"v":return $(),"\v";case"0":if($(),he.isDigit(Je()))throw ie($());return"\0";case"x":return $(),kt();case"u":return $(),bt();case`
`:case"\u2028":case"\u2029":return $(),"";case"\r":return $(),Je()===`
`&&$(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw ie($());case void 0:throw ie($())}return $()}function kt(){var h="",w=Je();if(!he.isHexDigit(w)||(h+=$(),w=Je(),!he.isHexDigit(w)))throw ie($());return h+=$(),String.fromCodePoint(parseInt(h,16))}function bt(){for(var h="",w=4;w-- >0;){var k=Je();if(!he.isHexDigit(k))throw ie($());h+=$()}return String.fromCodePoint(parseInt(h,16))}var zt={start:function(){if(be.type==="eof")throw Be();Et()},beforePropertyName:function(){switch(be.type){case"identifier":case"string":gt=be.value,De="afterPropertyName";return;case"punctuator":ot();return;case"eof":throw Be()}},afterPropertyName:function(){if(be.type==="eof")throw Be();De="beforePropertyValue"},beforePropertyValue:function(){if(be.type==="eof")throw Be();Et()},beforeArrayValue:function(){if(be.type==="eof")throw Be();if(be.type==="punctuator"&&be.value==="]"){ot();return}Et()},afterPropertyValue:function(){if(be.type==="eof")throw Be();switch(be.value){case",":De="beforePropertyName";return;case"}":ot()}},afterArrayValue:function(){if(be.type==="eof")throw Be();switch(be.value){case",":De="beforeArrayValue";return;case"]":ot()}},end:function(){}};function Et(){var h;switch(be.type){case"punctuator":switch(be.value){case"{":h={};break;case"[":h=[];break}break;case"null":case"boolean":case"numeric":case"string":h=be.value;break}if(nt===void 0)nt=h;else{var w=Ne[Ne.length-1];Array.isArray(w)?w.push(h):Object.defineProperty(w,gt,{value:h,writable:!0,enumerable:!0,configurable:!0})}if(h!==null&&typeof h=="object")Ne.push(h),Array.isArray(h)?De="beforeArrayValue":De="beforePropertyName";else{var k=Ne[Ne.length-1];k==null?De="end":Array.isArray(k)?De="afterArrayValue":De="afterPropertyValue"}}function ot(){Ne.pop();var h=Ne[Ne.length-1];h==null?De="end":Array.isArray(h)?De="afterArrayValue":De="afterPropertyValue"}function ie(h){return at(h===void 0?"JSON5: invalid end of input at "+_e+":"+Se:"JSON5: invalid character '"+ft(h)+"' at "+_e+":"+Se)}function Be(){return at("JSON5: invalid end of input at "+_e+":"+Se)}function Oe(){return Se-=5,at("JSON5: invalid identifier character at "+_e+":"+Se)}function Dt(h){console.warn("JSON5: '"+ft(h)+"' in strings is not valid ECMAScript; consider escaping")}function ft(h){var w={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(w[h])return w[h];if(h<" "){var k=h.charCodeAt(0).toString(16);return"\\x"+("00"+k).substring(k.length)}return h}function at(h){var w=new SyntaxError(h);return w.lineNumber=_e,w.columnNumber=Se,w}var Mt=function(w,k,H){var K=[],Q="",ue,Ae,we="",st;if(k!=null&&typeof k=="object"&&!Array.isArray(k)&&(H=k.space,st=k.quote,k=k.replacer),typeof k=="function")Ae=k;else if(Array.isArray(k)){ue=[];for(var D=0,F=k;D<F.length;D+=1){var O=F[D],j=void 0;typeof O=="string"?j=O:(typeof O=="number"||O instanceof String||O instanceof Number)&&(j=String(O)),j!==void 0&&ue.indexOf(j)<0&&ue.push(j)}}return H instanceof Number?H=Number(H):H instanceof String&&(H=String(H)),typeof H=="number"?H>0&&(H=Math.min(10,Math.floor(H)),we="          ".substr(0,H)):typeof H=="string"&&(we=H.substr(0,10)),te("",{"":w});function te(ge,He){var fe=He[ge];switch(fe!=null&&(typeof fe.toJSON5=="function"?fe=fe.toJSON5(ge):typeof fe.toJSON=="function"&&(fe=fe.toJSON(ge))),Ae&&(fe=Ae.call(He,ge,fe)),fe instanceof Number?fe=Number(fe):fe instanceof String?fe=String(fe):fe instanceof Boolean&&(fe=fe.valueOf()),fe){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof fe=="string")return le(fe);if(typeof fe=="number")return String(fe);if(typeof fe=="object")return Array.isArray(fe)?nr(fe):Ie(fe)}function le(ge){for(var He={"'":.1,'"':.2},fe={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},xe="",dt=0;dt<ge.length;dt++){var Ge=ge[dt];switch(Ge){case"'":case'"':He[Ge]++,xe+=Ge;continue;case"\0":if(he.isDigit(ge[dt+1])){xe+="\\x00";continue}}if(fe[Ge]){xe+=fe[Ge];continue}if(Ge<" "){var Ht=Ge.charCodeAt(0).toString(16);xe+="\\x"+("00"+Ht).substring(Ht.length);continue}xe+=Ge}var _t=st||Object.keys(He).reduce(function(Ot,Gt){return He[Ot]<He[Gt]?Ot:Gt});return xe=xe.replace(new RegExp(_t,"g"),fe[_t]),_t+xe+_t}function Ie(ge){if(K.indexOf(ge)>=0)throw TypeError("Converting circular structure to JSON5");K.push(ge);var He=Q;Q=Q+we;for(var fe=ue||Object.keys(ge),xe=[],dt=0,Ge=fe;dt<Ge.length;dt+=1){var Ht=Ge[dt],_t=te(Ht,ge);if(_t!==void 0){var Ot=At(Ht)+":";we!==""&&(Ot+=" "),Ot+=_t,xe.push(Ot)}}var Gt;if(xe.length===0)Gt="{}";else{var Rr;if(we==="")Rr=xe.join(","),Gt="{"+Rr+"}";else{var Vr=`,
`+Q;Rr=xe.join(Vr),Gt=`{
`+Q+Rr+`,
`+He+"}"}}return K.pop(),Q=He,Gt}function At(ge){if(ge.length===0)return le(ge);var He=String.fromCodePoint(ge.codePointAt(0));if(!he.isIdStartChar(He))return le(ge);for(var fe=He.length;fe<ge.length;fe++)if(!he.isIdContinueChar(String.fromCodePoint(ge.codePointAt(fe))))return le(ge);return ge}function nr(ge){if(K.indexOf(ge)>=0)throw TypeError("Converting circular structure to JSON5");K.push(ge);var He=Q;Q=Q+we;for(var fe=[],xe=0;xe<ge.length;xe++){var dt=te(String(xe),ge);fe.push(dt!==void 0?dt:"null")}var Ge;if(fe.length===0)Ge="[]";else if(we===""){var Ht=fe.join(",");Ge="["+Ht+"]"}else{var _t=`,
`+Q,Ot=fe.join(_t);Ge=`[
`+Q+Ot+`,
`+He+"]"}return K.pop(),Q=He,Ge}},Ut={parse:Ct,stringify:Mt},Vt=Ut,M=Vt;return M})}}),wm={};G(wm,{afterMatch:()=>Uy,between:()=>lM,betweenChomp:()=>jy,countCharsFromStart:()=>vM,htmlEntities:()=>mM,indexOfCharCode:()=>si,lineSpan:()=>dM,omitChars:()=>ci,random:()=>Zs,splitByLength:()=>qy,splitRanges:()=>hM,startsEnds:()=>yM,untilMatch:()=>xy,unwrap:()=>fM});var Ce=(e,r="",n="?")=>{if(e===null)return[!1,`Parameter ${n} is null`];if(typeof e>"u")return[!1,`Parameter ${n} is undefined`];if(Number.isNaN(e))return[!1,`Parameter '${n}' is NaN`];if(typeof e!="number")return[!1,`Parameter '${n}' is not a number (${JSON.stringify(e)})`];switch(r){case"positive":{if(e<0)return[!1,`Parameter '${n}' must be at least zero (${e})`];break}case"negative":{if(e>0)return[!1,`Parameter '${n}' must be zero or lower (${e})`];break}case"aboveZero":{if(e<=0)return[!1,`Parameter '${n}' must be above zero (${e})`];break}case"belowZero":{if(e>=0)return[!1,`Parameter '${n}' must be below zero (${e})`];break}case"percentage":{if(e>1||e<0)return[!1,`Parameter '${n}' must be in percentage range (0 to 1). (${e})`];break}case"nonZero":{if(e===0)return[!1,`Parameter '${n}' must non-zero. (${e})`];break}case"bipolar":{if(e>1||e<-1)return[!1,`Parameter '${n}' must be in bipolar percentage range (-1 to 1). (${e})`];break}}return[!0]},ee=(e,r="",n="?")=>{Ee(Ce(e,r,n))},Ee=e=>{if(e[0])return!1;throw new Error(e[1])},bm=(e,r="?")=>Ce(e,"percentage",r),Em=(e,r="?")=>{Ee(bm(e,r))},Or=(e,r="",n="?")=>{const i=Ce(e,r,n);return i[0]?Number.isInteger(e)?[!0]:[!1,`Parameter ${n} is not an integer`]:i},Le=(e,r="",n="?")=>{Ee(Or(e,r,n))},Dm=(e,r="",n=Number.NaN)=>{if(e===void 0||e===null)return n;try{const i=Number.parseInt(e);return Or(i,r,"parsed")[0]?i:n}catch{return n}return Number.parseInt(e)},Am=(e,r="?")=>Array.isArray(e)?[!0]:[!1,`Parameter '${r}' is expected to be an array'`],Cm=(e,r="?")=>{Ee(Am(e,r))},Sm={};G(Sm,{arrayElement:()=>tu,arrayIndex:()=>Js,defaultRandom:()=>tt,float:()=>Ty,floatSource:()=>Xs,gaussian:()=>uM,gaussianSource:()=>zy,hue:()=>jo,integer:()=>Oy,integerSource:()=>Ys,integerUniqueGen:()=>$y,minutesMs:()=>sM,minutesMsSource:()=>Wy,secondsMs:()=>cM,secondsMsSource:()=>Ly,shortGuid:()=>oM,string:()=>Zs,weighted:()=>iM,weightedInteger:()=>aM,weightedIntegerSource:()=>ky,weightedSource:()=>By});var $t={};G($t,{additionalValues:()=>lo,average:()=>qs,averageWeighted:()=>js,chunks:()=>X2,compareValues:()=>Ny,compareValuesEqual:()=>rM,contains:()=>nM,containsDuplicateValues:()=>tM,dotProduct:()=>qF,ensureLength:()=>U2,filterAB:()=>eM,filterBetween:()=>Iy,flatten:()=>q2,groupBy:()=>J2,guardArray:()=>Ln,guardIndex:()=>fa,interleave:()=>x2,intersection:()=>j2,max:()=>fy,maxFast:()=>hy,maxIndex:()=>xF,mergeByKey:()=>Z2,min:()=>cy,minFast:()=>xs,minIndex:()=>ly,minMaxAvg:()=>eu,randomElement:()=>tu,randomIndex:()=>Js,randomPluck:()=>V2,reducePairwise:()=>Q2,remove:()=>K2,sample:()=>Y2,shuffle:()=>da,sortByNumericProperty:()=>Py,total:()=>dy,totalFast:()=>vy,unique:()=>Ry,until:()=>G2,validNumbers:()=>Nn,valuesEqual:()=>Ks,weight:()=>sy,without:()=>ru,withoutUndefined:()=>H2,zip:()=>_y});var Fm={};G(Fm,{Debug:()=>M0,IterableAsync:()=>nn,comparerInverse:()=>$2,defaultComparer:()=>Si,defaultKeyer:()=>Fi,getFieldByPath:()=>Gs,getFieldPaths:()=>Ay,ifNaN:()=>co,isFunction:()=>B2,isMap:()=>T2,isPowerOfTwo:()=>Dy,isSet:()=>W2,jsComparer:()=>My,mapObject:()=>k2,numericComparer:()=>Fy,relativeDifference:()=>z2,roundUpToMultiple:()=>Cy,runningiOS:()=>L2,toStringDefault:()=>fn});var nn={};G(nn,{chunks:()=>d2,concat:()=>h2,dropWhile:()=>v2,equals:()=>y2,every:()=>m2,fill:()=>g2,filter:()=>p2,find:()=>w2,flatten:()=>b2,forEach:()=>E2,fromArray:()=>l2,fromIterable:()=>f2,map:()=>D2,max:()=>A2,min:()=>C2,range:()=>S2,reduce:()=>F2,slice:()=>M2,some:()=>_2,takeWhile:()=>I2,toArray:()=>P2,unique:()=>R2,zip:()=>N2});var Qs=e=>typeof e=="string"?e:JSON.stringify(e),ze=(e,r)=>e===r,Mm=(e,r)=>e===r?!0:Qs(e)===Qs(r),_m={};G(_m,{Elapsed:()=>Ar,StateMachine:()=>hs,TaskQueue:()=>s2,continuously:()=>Vs,debounce:()=>i2,delay:()=>LC,delayLoop:()=>Ms,everyNth:()=>u2,forEach:()=>by,forEachAsync:()=>Ey,frequencyTimer:()=>Pr,frequencyTimerSource:()=>cv,hasElapsedMs:()=>sv,interval:()=>xa,intervalToMs:()=>ke,isInterval:()=>Xh,msElapsedTimer:()=>lr,relativeTimer:()=>Ci,repeat:()=>Hs,repeatReduce:()=>c2,retry:()=>ws,runOnce:()=>o2,sleep:()=>ht,throttle:()=>a2,ticksElapsedTimer:()=>Ps,timeout:()=>py,updateOutdated:()=>r2,waitFor:()=>As});var Ar={};G(Ar,{infinity:()=>e2,once:()=>QF,progress:()=>t2,since:()=>gy,toString:()=>Us});var Im={};G(Im,{applyToValues:()=>HF,average:()=>UF,averageWeighted:()=>VF,filter:()=>XF,isApproximately:()=>ZF,isValid:()=>yy,linearSpace:()=>my,max:()=>KF,min:()=>GF,quantiseEvery:()=>so,round:()=>sn,total:()=>JF,tracker:()=>YF});var vo={};G(vo,{crossfade:()=>OF,fromCubicBezier:()=>zF,functions:()=>$s,gaussian:()=>oy,get:()=>Qa,getEasings:()=>TF,mix:()=>uy,tick:()=>kF,time:()=>BF,weightedAverage:()=>jF});var Pm={};G(Pm,{Bipolar:()=>Hh,Chains:()=>Av,Correlate:()=>Zv,FrequencyMutable:()=>bv,Graphs:()=>kv,IntervalTracker:()=>Dv,Normalise:()=>Uc,NumberTracker:()=>Es,Pipes:()=>Yh,PointTracker:()=>_s,Pool:()=>ey,Signals:()=>Me,Table:()=>Os,TrackedPointMap:()=>iv,TrackedValueMap:()=>L0,TrackerBase:()=>bs,clamp:()=>Wt,clampIndex:()=>Su,flip:()=>$i,frequencyMutable:()=>BS,interpolate:()=>Za,interpolateAngle:()=>iy,intervalTracker:()=>WS,movingAverage:()=>zS,movingAverageLight:()=>Ev,movingAverageTimed:()=>kS,noiseFilter:()=>TS,numberTracker:()=>Xn,piPi:()=>oo,pointTracker:()=>rS,pointsTracker:()=>av,scale:()=>ur,scaleClamped:()=>Rm,scalePercent:()=>Bm,scalePercentages:()=>Nm,scaler:()=>yo,scalerPercent:()=>Vc,wrap:()=>la,wrapInteger:()=>Xv,wrapRange:()=>IF});var Uc={};G(Uc,{array:()=>zm,stream:()=>km});var Wt=(e,r=0,n=1)=>{if(Number.isNaN(e))throw new Error("'value' parameter is NaN");if(Number.isNaN(r))throw new Error("'min' parameter is NaN");if(Number.isNaN(n))throw new Error("'max' parameter is NaN");return e<r?r:e>n?n:e},Su=(e,r)=>{if(!Number.isInteger(e))throw new TypeError(`v parameter must be an integer (${e})`);const n=Array.isArray(r)?r.length:r;if(!Number.isInteger(n))throw new TypeError(`length parameter must be an integer (${n}, ${typeof n})`);return e=Math.round(e),e<0?0:e>=n?n-1:e},ur=(e,r,n,i,a,u)=>yo(r,n,i,a,u)(e),yo=(e,r,n,i,a)=>{const u=i??1,o=n??0;return s=>{if(e===r)return u;let c=(s-e)/(r-e);return a!==void 0&&(c=a(c)),c*(u-o)+o}},Rm=(e,r,n,i,a,u)=>{if(a===void 0&&(a=1),i===void 0&&(i=0),r===n)return a;const o=ur(e,r,n,i,a,u);return Wt(o,i,a)},Nm=(e,r,n=1)=>(Ee(Ce(e,"percentage","v")),Ee(Ce(r,"percentage","outMin")),Ee(Ce(n,"percentage","outMax")),ur(e,0,1,r,n)),Bm=(e,r,n)=>Vc(r,n)(e),Vc=(e,r)=>n=>(Ee(Ce(n,"percentage","v")),ur(n,0,1,e,r)),km=(e,r)=>{let n=e??Number.MAX_SAFE_INTEGER,i=r??Number.MIN_SAFE_INTEGER;return ee(e),ee(r),a=>(ee(a),n=Math.min(n,a),i=Math.max(i,a),ur(a,n,i))},zm=(e,r,n)=>{if(!Array.isArray(e))throw new Error("values param should be an array");const i=eu(e),a=r??i.min,u=n??i.max;return e.map(o=>Wt(ur(o,a,u)))},Om={};G(Om,{SimpleEventEmitter:()=>sr});var Tm=(e,r,n=ze)=>{for(const i of e.entries()){const a=i[1];for(const u of a)if(n(u,r))return i}},Wm=class{map;groupBy;valueEq;constructor(e=Fi,r=ze,n=[]){this.groupBy=e,this.valueEq=r,this.map=new Map(n)}*entriesFlat(){for(const e of this.map.keys())for(const r of this.map.get(e))yield[e,r]}*entries(){for(const[e,r]of this.map.entries())yield[e,[...r]]}firstKeyByValue(e,r=ze){const n=Tm(this,e,r);if(n)return n[0]}*get(e){const r=this.map.get(e);!r||(yield*r.values())}*keys(){yield*this.map.keys()}*valuesFlat(){for(const e of this.map)yield*e[1]}*keysAndCounts(){for(const e of this.map)yield[e[0],e[1].length]}has(e){return this.map.has(e)}hasKeyValue(e,r){const n=this.map.get(e);if(!n)return!1;for(const i of n)if(this.valueEq(i,r))return!0;return!1}debugString(){let e="";return Array.from(this.map.keys()).every(n=>{const i=this.map.get(n);i!==void 0&&(e+=n+` (${i.length}) = ${JSON.stringify(i)}\r
`)}),e}get isEmpty(){return this.map.size===0}count(e){const r=this.map.get(e);return r?r.length:0}},Hc=class extends Wm{addKeyedValues(e,...r){const n=this.map.get(e);n===void 0?this.map.set(e,r):this.map.set(e,[...n,...r])}addValue(...e){for(const r of e){const n=this.groupBy(r);this.addKeyedValues(n,r)}}deleteKeyValue(e,r){const n=this.map.get(e);if(n===void 0)return!1;const i=n.filter(a=>!this.valueEq(a,r));return this.map.set(e,i),i.length<n.length}deleteByValue(e){let r=!1;const n=[...this.map.entries()];for(const i of n)for(const a of i[1])this.valueEq(a,e)&&(r=!0,this.deleteKeyValue(i[0],e));return r}delete(e){const r=this.map.get(e);return!r||r.length===0?!1:(this.map.delete(e),!0)}clear(){this.map.clear()}},Gc=(e=Fi,r=ze)=>new Hc(e,r),sr=class{#e=Gc();fireEvent(e,r){const n=this.#e.get(e);for(const i of n)i(r,this)}addEventListener(e,r){this.#e.addKeyedValues(e,r)}removeEventListener(e,r){this.#e.deleteKeyValue(e,r)}clearEventListeners(){this.#e.clear()}},Kc={};G(Kc,{byValueString:()=>Jc,getSorter:()=>Yc,isPrimitive:()=>Lm,minMaxAvg:()=>xm,sortByKey:()=>Fu,sortByValueNumber:()=>Mu,sortByValueString:()=>qm});var mo=cn(gm(),1),go=cn(Nt(),1),ji=cn(pm(),1),ec=cn(Lc(),1),Sn=cn(hi(),1);function Lm(e){return typeof e=="number"||typeof e=="string"||typeof e=="bigint"||typeof e=="boolean"}var $m=(e=!1)=>(0,go.pipe)(e?(0,Sn.reverse)(ji.Ord):ji.Ord,(0,Sn.contramap)(r=>r[0])),Jc=(e=!1)=>(0,go.pipe)(e?(0,Sn.reverse)(ji.Ord):ji.Ord,(0,Sn.contramap)(r=>r[1])),jm=(e=!1)=>(0,go.pipe)(e?(0,Sn.reverse)(ec.Ord):ec.Ord,(0,Sn.contramap)(r=>r[1])),Fu=(e=!1)=>(0,mo.sort)($m(e)),qm=(e=!1)=>(0,mo.sort)(Jc(e)),Mu=(e=!1)=>(0,mo.sort)(jm(e)),Yc=e=>{switch(e){case"value":return Mu(!1);case"valueReverse":return Mu(!0);case"key":return Fu(!1);case"keyReverse":return Fu(!0);default:throw new Error(`Unknown sorting value '${e}'. Expecting: value, valueReverse, key or keyReverse`)}},xm=(e,r)=>{const n=r??(a=>a[1]),i=e.map(a=>n(a));return eu(i)},Um={};G(Um,{Arcs:()=>po,Beziers:()=>yi,Circles:()=>Rt,Compound:()=>No,Convolve2d:()=>pd,Ellipses:()=>zo,Grids:()=>ko,Layouts:()=>md,Lines:()=>Ze,Paths:()=>mn,Points:()=>W,Polar:()=>Ye,QuadTree:()=>fl,Rects:()=>me,Scaler:()=>Zi,Shapes:()=>va,Spheres:()=>Rb,SurfacePoints:()=>S0,Triangles:()=>en,Vectors:()=>Yi,Waypoints:()=>vd,degreeToRadian:()=>zr,radianToDegree:()=>Ua,radiansFromAxisX:()=>F0});var po={};G(po,{bbox:()=>_f,distanceCenter:()=>iw,fromDegrees:()=>rw,guard:()=>Fo,interpolate:()=>Mo,isArc:()=>Sf,isEqual:()=>aw,isPositioned:()=>br,length:()=>Mf,point:()=>Vi,toLine:()=>Ff,toPath:()=>nw,toSvg:()=>If});var W={};G(W,{Empty:()=>Fn,Placeholder:()=>hf,abs:()=>Bp,angle:()=>gn,apply:()=>Lp,bbox:()=>kp,centroid:()=>yf,clamp:()=>ew,clampMagnitude:()=>Cf,compare:()=>Vp,compareByX:()=>Df,convexHull:()=>Up,distance:()=>Lt,distanceToCenter:()=>Np,distanceToExterior:()=>Rp,divide:()=>Ef,divider:()=>qp,dotProduct:()=>df,findMinimum:()=>Jr,from:()=>Wp,fromNumbers:()=>gf,getPointParameter:()=>lt,guard:()=>pe,guardNonZeroPoint:()=>vf,interpolate:()=>Tp,invert:()=>Zp,isEmpty:()=>zi,isEqual:()=>Jn,isNaN:()=>_p,isNull:()=>Mp,isPlaceholder:()=>Oi,isPoint:()=>Fe,isPoint3d:()=>Mn,leftmost:()=>Ip,multiply:()=>Ea,multiplyScalar:()=>jp,normalise:()=>Af,normaliseByRect:()=>Jp,pipeline:()=>pf,pipelineApply:()=>$p,progressBetween:()=>tw,project:()=>Lu,quantiseEvery:()=>xp,random:()=>Yp,reduce:()=>wf,relation:()=>Ti,rightmost:()=>Pp,rotate:()=>Xr,rotatePointArray:()=>Hp,round:()=>Kp,subtract:()=>$r,sum:()=>bf,toArray:()=>zp,toIntegerValues:()=>Qp,toString:()=>mf,withinRange:()=>Op,wrap:()=>Xp});var Ze={};G(Ze,{Empty:()=>vp,Placeholder:()=>yp,angleRadian:()=>pp,apply:()=>Gl,asPoints:()=>Cp,bbox:()=>lf,distance:()=>af,divide:()=>Jl,extendFromA:()=>Dp,fromFlatArray:()=>Sp,fromNumbers:()=>Ui,fromPoints:()=>ba,fromPointsToPath:()=>Fp,getPointParameter:()=>wa,guard:()=>pa,interpolate:()=>Tr,isEmpty:()=>mp,isEqual:()=>Hl,isLine:()=>Lr,isPlaceholder:()=>gp,isPolyLine:()=>Vl,joinPointsToLines:()=>cf,length:()=>Cr,midpoint:()=>Ql,multiply:()=>Kl,nearest:()=>Co,normaliseByRect:()=>wp,parallel:()=>nf,perpendicularPoint:()=>rf,pointAtX:()=>Ep,pointsOf:()=>Ap,rotate:()=>ff,scaleFromMidpoint:()=>bp,slope:()=>So,subtract:()=>Xl,sum:()=>Yl,toFlatArray:()=>of,toPath:()=>wr,toString:()=>uf,toSvgString:()=>sf,withinRange:()=>Zl});var Vm={};G(Vm,{Arrays:()=>$t,Iterables:()=>Dl,Maps:()=>Pl,QueueImmutable:()=>_l,QueueMutable:()=>Xt,Queues:()=>Do,SetStringImmutable:()=>Ml,SetStringMutable:()=>Fl,Sets:()=>Cl,StackImmutable:()=>xi,StackMutable:()=>vi,Stacks:()=>Al,Trees:()=>Qc,circularArray:()=>Zc});var Hm=class Xc extends Array{#e;#t;constructor(r=0){super();Le(r,"positive","capacity"),this.#e=r,this.#t=0}add(r){const n=Xc.from(this);return n[this.#t]=r,n.#e=this.#e,this.#e>0?n.#t=this.#t+1===this.#e?0:this.#t+1:n.#t=this.#t+1,n}get pointer(){return this.#t}get isFull(){return this.#e===0?!1:this.length===this.#e}},Zc=e=>new Hm(e),Qc={};G(Qc,{TreeNodeMutable:()=>ml,breadthFirst:()=>xg,couldAddChild:()=>Pu,depthFirst:()=>qg,directChildren:()=>Bn,getByPath:()=>wl,getLengthChildren:()=>jg,hasAnyChild:()=>qi,hasAnyParent:()=>El,hasChild:()=>ma,hasParent:()=>Eo,isTreeNode:()=>bo,prettyPrint:()=>pl,traceByPath:()=>bl,treeNodeMutable:()=>$g});var Gm=(e,r,n)=>{const i=r.length+n.length,a=e.capacity??i,u=i-a,o=e.discardPolicy??"additions";switch(o){case"additions":return r.length===0?n.slice(0,n.length-u):r.length===e.capacity?r:[...r,...n.slice(0,u-1)];case"newer":{if(u>=r.length)return r.length===0?[...n.slice(0,a-1),n.at(-1)]:n.slice(Math.max(0,n.length-a),Math.min(n.length,a)+1);{const s=Math.max(1,n.length-r.length),c=n.slice(n.length-s,n.length);return[...r.slice(0,Math.min(r.length,a-1)),...c]}}case"older":return[...r,...n].slice(u);default:throw new Error(`Unknown overflow policy ${o}`)}},el=(e,r,...n)=>{if(e===void 0)throw new Error("opts parameter undefined");const i=r.length+n.length,a=e.capacity&&i>e.capacity,u=a?Gm(e,r,n):[...r,...n];if(e.capacity&&u.length!==e.capacity&&a)throw new Error(`Bug! Expected return to be at capacity. Return len: ${u.length} capacity: ${e.capacity} opts: ${JSON.stringify(e)}`);if(!e.capacity&&u.length!==i)throw new Error(`Bug! Return length not expected. Return len: ${u.length} expected: ${i} opts: ${JSON.stringify(e)}`);return u},tl=(e,r)=>{if(r.length===0)throw new Error("Queue is empty");return r.slice(1)},_u=(e,r)=>r[0],rl=(e,r)=>r.length===0,nl=(e,r)=>e.capacity?r.length>=e.capacity:!1,Xt=class{opts;data;eq;constructor(e={},r=[]){if(e===void 0)throw new Error("opts parameter undefined");this.opts=e,this.data=r,this.eq=e.eq??ze}enqueue(...e){return this.data=el(this.opts,this.data,...e),this.data.length}dequeue(){const e=_u(this.opts,this.data);if(e!==void 0)return this.data=tl(this.opts,this.data),e}remove(e,r){const n=this.data.length;return this.data=ru(this.data,e,r??this.eq),this.data.length!==n}get isEmpty(){return rl(this.opts,this.data)}get isFull(){return nl(this.opts,this.data)}get length(){return this.data.length}get peek(){return _u(this.opts,this.data)}};function Km(e={},...r){return new Xt({...e},[...r])}var Jm=(e,r,n)=>{const i=r.length+n.length,a=e.discardPolicy??"additions",u=e.capacity??i,o=i-u;switch(e.debug&&console.log(`Stack.push: stackLen: ${r.length} potentialLen: ${i} toRemove: ${o} policy: ${a}`),a){case"additions":return e.debug&&console.log(`Stack.push:DiscardAdditions: stackLen: ${r.length} slice: ${i-u} toAddLen: ${n.length}`),r.length===e.capacity?r:[...r,...n.slice(0,n.length-o)];case"newer":return o>=r.length?n.slice(Math.max(0,n.length-u),Math.min(n.length,u)+1):(e.debug&&console.log(` from orig: ${r.slice(0,r.length-o)}`),[...r.slice(0,r.length-o),...n.slice(0,Math.min(n.length,u-o+1))]);case"older":return[...r,...n].slice(o);default:throw new Error(`Unknown discard policy ${a}`)}},il=(e,r,...n)=>{const i=r.length+n.length;return e.capacity&&i>e.capacity?Jm(e,r,n):[...r,...n]},al=(e,r)=>{if(r.length===0)throw new Error("Stack is empty");return r.slice(0,r.length-1)},Iu=(e,r)=>r[r.length-1],ul=(e,r)=>r.length===0,ol=(e,r)=>e.capacity?r.length>=e.capacity:!1,vi=class{opts;data;constructor(e={},r=[]){this.opts=e,this.data=r}push(...e){return this.data=il(this.opts,this.data,...e),this.data.length}forEach(e){this.data.forEach(e)}forEachFromTop(e){[...this.data].reverse().forEach(e)}pop(){const e=Iu(this.opts,this.data);return this.data=al(this.opts,this.data),e}get isEmpty(){return ul(this.opts,this.data)}get isFull(){return ol(this.opts,this.data)}get peek(){return Iu(this.opts,this.data)}get length(){return this.data.length}},Ym=(e={},...r)=>new vi({...e},[...r]),wo={};G(wo,{chunks:()=>eg,chunksOverlapping:()=>Qm,concat:()=>tg,dropWhile:()=>rg,equals:()=>ng,every:()=>ig,fill:()=>ag,filter:()=>og,find:()=>sg,first:()=>Zm,flatten:()=>cg,forEach:()=>ug,last:()=>sl,map:()=>lg,max:()=>fg,min:()=>dg,range:()=>cl,reduce:()=>hg,slice:()=>ll,some:()=>vg,takeWhile:()=>yg,unique:()=>mg,yieldNumber:()=>Xm,zip:()=>gg});function Xm(e,r){return()=>{const n=e.next().value;return n===void 0?r:n}}function Zm(e){for(const r of e)return r}function sl(e){let r;for(const n of e)r=n;return r}function*Qm(e,r){if(r<=1)throw new Error("Size should be at least 2");let n=[];for(const i of e)n.push(i),n.length===r&&(yield n,n=[n.at(-1)]);n.length<=1||n.length>0&&(yield n)}function*eg(e,r){let n=[];for(const i of e)n.push(i),n.length===r&&(yield n,n=[]);n.length>0&&(yield n)}function*tg(...e){for(const r of e)yield*r}function*rg(e,r){for(const n of e)if(!r(n)){yield n;break}yield*e}function ng(e,r,n){for(;;){const i=e.next(),a=r.next();if(n!==void 0){if(!n(i.value,a.value))return!1}else if(i.value!==a.value)return!1;if(i.done??a.done)return i.done&&a.done}}function ig(e,r){let n=!0;for(const i of e)n=n&&r(i);return n}function*ag(e,r){for(const n of e)yield r}function ug(e,r){for(const n of e)r(n)}function*og(e,r){for(const n of e)!r(n)||(yield n)}function sg(e,r){for(const n of e)if(r(n))return n}function*cg(e){for(const r of e)Symbol.iterator in r?yield*r:yield r}function*lg(e,r){for(const n of e)yield r(n)}function fg(e,r=(n,i)=>n>i){let n;for(const i of e){if(!n){n=i;continue}n=r(n,i)?n:i}return n}function dg(e,r=(n,i)=>n>i){let n;for(const i of e){if(!n){n=i;continue}n=r(n,i)?i:n}return n}function*cl(e,r){for(let n=0;n<r;n++)yield e++}function hg(e,r,n){for(const i of e)n=r(n,i);return n}function*ll(e,r=0,n=Number.POSITIVE_INFINITY){const i=e[Symbol.iterator]();for(;r>0;r--,n--)i.next();for(const a of e)if(n-- >0)yield a;else break}function vg(e,r){for(const n of e)if(r(n))return!0;return!1}function*yg(e,r){for(const n of e){if(!r(n))return;yield n}}function*mg(e,r=fn){const n=[];let i=[];i=Array.isArray(e)?e:[e];for(const a of i)for(const u of a){const o=r(u);n.includes(o)||(n.push(o),yield u)}}function*gg(...e){const r=e.map(n=>n[Symbol.iterator]());for(;;){const n=r.map(i=>i.next());if(n.some(i=>i.done))return;yield n.map(i=>i.value)}}var fl={};G(fl,{Direction:()=>vl,QuadTreeNode:()=>Lg});var va={};G(va,{arrow:()=>Wg,center:()=>Og,isIntersecting:()=>zg,randomPoint:()=>hl,starburst:()=>Tg});var Ye={};G(Ye,{clampMagnitude:()=>Ng,divide:()=>Rg,dotProduct:()=>Ag,fromCartesian:()=>wg,guard:()=>Pt,invert:()=>Cg,isAntiParallel:()=>Mg,isCoord:()=>dl,isOpposite:()=>Sg,isParallel:()=>Fg,multiply:()=>Pg,normalise:()=>Dg,rotate:()=>Eg,rotateDegrees:()=>_g,spiral:()=>bg,spiralRaw:()=>Ig,toCartesian:()=>ki,toPoint:()=>kg,toString:()=>Bg});var pg=Object.freeze({x:0,y:0}),dl=e=>!(e.distance===void 0||e.angleRadian===void 0),wg=(e,r)=>{e=$r(e,r);const n=Math.atan2(e.y,e.x);return Object.freeze({...e,angleRadian:n,distance:Math.sqrt(e.x*e.x+e.y*e.y)})},ki=(e,r,n)=>{if(dl(e)){if(r===void 0&&(r=Fn),Fe(r))return tc(e.distance,e.angleRadian,r);throw new Error("Expecting (Coord, Point). Second parameter is not a point")}else{if(typeof e=="object")throw new Error(`First param is an object, but not a Coord: ${JSON.stringify(e)}`);if(typeof e=="number"&&typeof r=="number"){if(n===void 0&&(n=Fn),!Fe(n))throw new Error("Expecting (number, number, Point). Point param wrong type");return tc(e,r,n)}else throw new Error(`Expecting parameters of (number, number). Got: (${typeof e}, ${typeof r}, ${typeof n}). a: ${JSON.stringify(e)}`)}};function*bg(e,r){let n=0;for(;;){const i=e*n++;yield{distance:r*i,angleRadian:i,step:n}}}var Eg=(e,r)=>Object.freeze({...e,angleRadian:e.angleRadian+r}),Dg=e=>{if(e.distance===0)throw new Error("Cannot normalise vector of length 0");return Object.freeze({...e,distance:1})},Pt=(e,r="Point")=>{if(e===void 0)throw new Error(`'${r}' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e===null)throw new Error(`'${r}' is null. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e.angleRadian===void 0)throw new Error(`'${r}.angleRadian' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e.distance===void 0)throw new Error(`'${r}.distance' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(typeof e.angleRadian!="number")throw new Error(`'${r}.angleRadian' must be a number. Got ${e.angleRadian}`);if(typeof e.distance!="number")throw new Error(`'${r}.distance' must be a number. Got ${e.distance}`);if(e.angleRadian===null)throw new Error(`'${r}.angleRadian' is null`);if(e.distance===null)throw new Error(`'${r}.distance' is null`);if(Number.isNaN(e.angleRadian))throw new Error(`'${r}.angleRadian' is NaN`);if(Number.isNaN(e.distance))throw new Error(`'${r}.distance' is NaN`)},Ag=(e,r)=>(Pt(e,"a"),Pt(r,"b"),e.distance*r.distance*Math.cos(r.angleRadian-e.angleRadian)),Cg=e=>(Pt(e,"c"),Object.freeze({...e,angleRadian:e.angleRadian-Math.PI})),Sg=(e,r)=>(Pt(e,"a"),Pt(r,"b"),e.distance!==r.distance?!1:e.angleRadian===-r.angleRadian),Fg=(e,r)=>(Pt(e,"a"),Pt(r,"b"),e.angleRadian===r.angleRadian),Mg=(e,r)=>(Pt(e,"a"),Pt(r,"b"),e.angleRadian===-r.angleRadian),_g=(e,r)=>Object.freeze({...e,angleRadian:e.angleRadian+zr(r)}),Ig=(e,r,n)=>{const i=r*e;return Object.freeze({distance:n*i,angleRadian:i})},Pg=(e,r)=>(Pt(e),ee(r,"","amt"),Object.freeze({...e,distance:e.distance*r})),Rg=(e,r)=>(Pt(e),ee(r,"","amt"),Object.freeze({...e,distance:e.distance/r})),Ng=(e,r=1,n=0)=>{let i=e.distance;return i>r&&(i=r),i<n&&(i=n),Object.freeze({...e,distance:i})},tc=(e,r,n=Fn)=>(pe(n),Object.freeze({x:n.x+e*Math.cos(r),y:n.y+e*Math.sin(r)})),Bg=(e,r)=>{if(e===void 0)return"(undefined)";if(e===null)return"(null)";const n=Ua(e.angleRadian),i=r?e.distance.toFixed(r):e.distance,a=r?n.toFixed(r):n;return`(${i},${a})`},kg=(e,r=pg)=>(Pt(e,"v"),Object.freeze({x:r.x+e.distance*Math.cos(e.angleRadian),y:r.y+e.distance*Math.sin(e.angleRadian)})),zg=(e,r)=>{if(Rt.isCirclePositioned(e))return Rt.isIntersecting(e,r);if(me.isRectPositioned(e))return me.isIntersecting(e,r);throw new Error(`a or b are unknown shapes. a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`)},hl=(e,r={})=>{if(Rt.isCirclePositioned(e))return Rt.randomPoint(e,r);if(me.isRectPositioned(e))return me.randomPoint(e,r);throw new Error("Cannot create random point for unknown shape")},Og=e=>{if(e===void 0)return Object.freeze({x:.5,y:.5});if(me.isRect(e))return me.center(e);if(en.isTriangle(e))return en.centroid(e);if(Rt.isCircle(e))return Rt.center(e);throw new Error(`Unknown shape: ${JSON.stringify(e)}`)},Tg=(e,r=5,n,i={x:0,y:0},a)=>{Le(r,"positive","points");const u=Math.PI*2/r,o=u/2,s=a?.initialAngleRadian??-Math.PI/2;n===void 0&&(n=e/2);let c=s;const l=[];for(let f=0;f<r;f++){const d=ki(e,c,i),v=ki(n,c-o,i),g=ki(n,c+o,i);l.push(v,d),f+1<r&&l.push(g),c+=u}return l},Wg=(e,r,n={})=>{const i=n.tailLength??10,a=n.tailThickness??Math.max(i/5,5),u=n.angleRadian??0,o=n.arrowSize??Math.max(i/5,15),s=Math.PI/2;let c,l;if(r==="tip")c=en.equilateralFromVertex(e,o,s),l=me.corners(me.fromTopLeft({x:c.a.x-i,y:e.y-a/2},i,a));else if(r==="middle"){const d=i+o/2,v=a/2;c=en.equilateralFromVertex({x:e.x+o*1.2,y:e.y},o,s),l=me.corners(me.fromTopLeft({x:e.x-d,y:e.y-v},i+o,a))}else l=me.corners(me.fromTopLeft({x:e.x,y:e.y-a/2},i,a)),c=en.equilateralFromVertex({x:e.x+i+o*.7,y:e.y},o,s);return W.rotate([l[0],l[1],c.a,c.b,c.c,l[2],l[3]],u,e)},vl=(e=>(e[e.Nw=0]="Nw",e[e.Ne=1]="Ne",e[e.Sw=2]="Sw",e[e.Se=3]="Se",e))(vl||{}),Lg=class yl{constructor(r,n,i,a){this.boundary=n,this.level=i,this.opts=a,this.#r=r}#e=[];#t=[];#r;getLengthChildren(){return this.#t.length}*parents(){let r=this;for(;r.#r!==void 0;)yield r.#r,r=r.#r}*children(){for(const r of this.#t)yield r}direction(r){return this.#t[r]}add(r){return va.isIntersecting(this.boundary,r)?this.#t.length?(this.#t.forEach(n=>n.add(r)),!0):(this.#e.push(r),this.#e.length>this.opts.maxItems&&this.level<this.opts.maxLevels&&(this.#t.length||this.#n(),this.#e.forEach(n=>{this.#t.forEach(i=>i.add(n))}),this.#e=[]),!0):!1}couldHold(r){return me.intersectsPoint(this.boundary,r)}#n(){const r=this.boundary.width/2,n=this.boundary.height/2,i=this.boundary.x,a=this.boundary.y,o=W.fromNumbers(i+r,a,i,a,i,a+n,i+r,a+n).map(s=>me.fromTopLeft(s,r,n));this.#t=o.map(s=>new yl(this,s,this.level+1,this.opts))}},ml=class gl{value;label;#e;#t;constructor(r,n){this.value=r,this.label=n,this.#e=[]}getLengthChildren(){return this.#e.length}hasChild=r=>ma(this,r);hasAnyChild=r=>qi(this,r);hasParent=r=>Eo(this,r);hasAnyParent=r=>El(this,r);getByPath=(r,n={})=>{const i=wl(r,this,n);if(!!i[1])return i[1]};addValueByPath(r,n,i={}){const a=i.separator??".",u=n.split(a);u.at(-1);let o=this;for(const s of u){const c=o?.findChild(s);if(!c&&o){const l=new gl(void 0,s);o.add(l),o=l}else c&&(o=c)}o&&(o.value=r)}add(r){Pu(this,r),this.#e=[...this.#e,r],r.#t&&r.#t.remove(r),r.#t=this}remove(r){if(r.#t!==this)throw new Error("child.parent doesn't match");const n=ru(this.#e,r);if(n.length===this.#e.length)throw new Error("child not found in descendants");this.#e=n}setDescendants(r){for(const n of this.#e)n.#t=void 0;for(const n of r)Pu(this,n),n.#t=this;this.#e=r}prettyPrint(r=0){const n=`${"  ".repeat(r)} + label: ${this.label} value: ${this.value?JSON.stringify(this.value):"-"}`;return this.#e.length?n+`
`+this.#e.map(i=>i.prettyPrint(r+1)).join(`
`):n}*parents(){let r=this;for(;r.#t!==void 0;)yield r.#t,r=r.#t}*children(){for(const r of this.#e)yield r}findChild(r){if(r===void 0)throw new Error("label param cannot be undefined");for(const n of this.#e)if(n.label===r)return n}get isRoot(){return this.#t===void 0}get isEmpty(){return this.#e.length===0}},$g=(e,r)=>new ml(e,r);function bo(e){return!(e.children===void 0||e.parents===void 0)}var jg=e=>bo(e)&&typeof e.getLengthChildren<"u"?e.getLengthChildren():[...Bn(e)].length,pl=(e,r=0,n="root")=>{const i=ya(e,n),a=`${"  ".repeat(r)} + label: ${i[0]} value: ${JSON.stringify(i[1])}`,u=[...Bn(e,n)];return u.length>0?a+`
`+u.map(o=>pl(o[1],r+1,o[0])).join(`
`):a};function*Bn(e,r){if(Array.isArray(e)){r||(r="array");for(const[n,i]of e.entries())yield[r+"["+n.toString()+"]",i]}else if(bo(e))for(const n of e.children())yield ya(n);else typeof e=="object"&&("entries"in e&&(yield*e.entries()),yield*Object.entries(e))}function rc(e,r){for(const n of Bn(r))if(n[0]===e)return n}function wl(e,r,n={}){const i=sl(bl(e,r,n));if(!i)throw new Error(`Could not trace path: ${e}`);return i}function*bl(e,r,n={}){const i=n.separator??".",a=n.allowArrayIndexes??!0,u=e.split(i);for(const o of u){let s=rc(o,r);if(a){const[c,l]=jy(o,"[","]"),f=Dm(l,"positive",-1);f>=0&&(s=rc(c,r),s&&Array.isArray(s[1])&&(s=[o,s[1][f]]))}if(!s){yield[o,void 0];return}r=s[1],yield s}}function ya(e,r=""){return"label"in e?[e.label,e]:[r,e]}function*qg(e){if(!e)return;const r=new vi;r.push(ya(e,"root"));let n=r.pop();for(;n&&(yield n,n&&r.push(...Bn(n[1],n[0])),!r.isEmpty);)n=r.pop()}function*xg(e){if(!e)return;const r=new Xt;r.enqueue(ya(e,"root"));let n=r.dequeue();for(;n&&(yield n,n&&r.enqueue(...Bn(n[1],n[0])),!r.isEmpty);)n=r.dequeue()}var qi=(e,r,n=ze)=>ma(e,r,Number.MAX_SAFE_INTEGER,n),ma=(e,r,n=0,i=ze)=>{if(n<0)return!1;for(const a of e.children())if(i(a,r)||ma(a,r,n-1))return!0;return!1},Eo=(e,r,n=0,i=ze)=>{for(const a of e.parents()){if(i(a,r))return!0;if(n--,n<0)break}return!1},El=(e,r,n=ze)=>Eo(e,r,Number.MAX_SAFE_INTEGER,n),Pu=(e,r,n=ze)=>{if(n(e,r))throw new Error("Child equals parent");if(qi(e,r,n))throw new Error("Circular. Parent already has child");if(qi(r,e,n))throw new Error("Prospective child has parent as child relation")},Dl={};G(Dl,{max:()=>Ru,min:()=>Nu});var Ru=(e,r)=>{let n,i=Number.MIN_SAFE_INTEGER;for(const a of e){const u=r(a);u>=i&&(i=u,n=a)}return n},Nu=(e,r)=>{let n,i=Number.MAX_SAFE_INTEGER;for(const a of e){const u=r(a);u<=i&&(i=u,n=a)}return n},Al={};G(Al,{immutable:()=>Ug,mutable:()=>Ym});var xi=class Bu{opts;data;constructor(r={},n=[]){this.opts=r,this.data=n}push(...r){return new Bu(this.opts,il(this.opts,this.data,...r))}pop(){return new Bu(this.opts,al(this.opts,this.data))}forEach(r){this.data.forEach(r)}forEachFromTop(r){[...this.data].reverse().forEach(r)}get isEmpty(){return ul(this.opts,this.data)}get isFull(){return ol(this.opts,this.data)}get peek(){return Iu(this.opts,this.data)}get length(){return this.data.length}},Ug=(e={},...r)=>new xi({...e},[...r]),Cl={};G(Cl,{immutable:()=>Vg,mutable:()=>Sl});var Sl=e=>new Fl(e),Fl=class extends sr{store=new Map;keyString;constructor(e){super();this.keyString=e??Fi}get size(){return this.store.size}add(...e){let r=!1;for(const n of e){const i=this.has(n);this.store.set(this.keyString(n),n),super.fireEvent("add",{value:n,updated:i}),i||(r=!0)}return r}values(){return this.store.values()}clear(){this.store.clear(),super.fireEvent("clear",!0)}delete(e){const r=this.store.delete(this.keyString(e));return r&&super.fireEvent("delete",e),r}has(e){return this.store.has(this.keyString(e))}toArray(){return Array.from(this.store.values())}},Ml=class ku{store;keyString;constructor(r,n){this.store=n??new Map,this.keyString=r??Fi}get size(){return this.store.size}add(...r){const n=new Map(this.store);for(const i of r){const a=this.keyString(i);n.set(a,i)}return new ku(this.keyString,n)}delete(r){const n=new Map(this.store),i=this.keyString(r);return n.delete(i)?new ku(this.keyString,n):this}has(r){const n=this.keyString(r);return this.store.has(n)}toArray(){return[...this.store.values()]}*values(){yield*this.store.values()}},Vg=(e=fn)=>new Ml(e),Do={};G(Do,{immutable:()=>Hg,mutable:()=>Km,priority:()=>Gg});var _l=class zu{opts;data;constructor(r={},n=[]){if(r===void 0)throw new Error("opts parameter undefined");this.opts=r,this.data=n}forEach(r){for(let n=this.data.length-1;n>=0;n--)r(this.data[n])}forEachFromFront(r){this.data.forEach(r)}enqueue(...r){return new zu(this.opts,el(this.opts,this.data,...r))}dequeue(){return new zu(this.opts,tl(this.opts,this.data))}get isEmpty(){return rl(this.opts,this.data)}get isFull(){return nl(this.opts,this.data)}get length(){return this.data.length}get peek(){return _u(this.opts,this.data)}},Hg=(e={},...r)=>(e={...e},new _l(e,[...r])),Il=class extends Xt{constructor(e={}){e.eq===void 0&&(e={...e,eq:(r,n)=>ze(r.item,n.item)});super(e)}enqueueWithPriority(e,r){super.enqueue({item:e,priority:r})}changePriority(e,r,n=!1,i){if(e===void 0)throw new Error("Item cannot be undefined");let a;for(const u of this.data)if(i){if(i(u.item,e)){a=u;break}}else if(this.eq(u,{item:e,priority:0})){a=u;break}if(a===void 0&&!n)throw new Error(`Item not found in priority queue. Item: ${JSON.stringify(e)}`);a!==void 0&&this.remove(a),this.enqueueWithPriority(e,r)}dequeueMax(){const e=Ru(this.data,r=>r.priority);if(e!==void 0)return this.remove(e),e.item}dequeueMin(){const e=Nu(this.data,r=>r.priority);if(e!==void 0)return this.remove(e),e.item}peekMax(){const e=Ru(this.data,r=>r.priority);if(e!==void 0)return e.item}peekMin(){const e=Nu(this.data,r=>r.priority);if(e!==void 0)return e.item}};function Gg(e={}){return new Il(e)}var Pl={};G(Pl,{ExpiringMap:()=>$l,MapOfMutableImpl:()=>ga,MapOfSimpleMutable:()=>Hc,NumberMap:()=>Rl,addKeepingExisting:()=>kl,addObject:()=>Tu,deleteByValue:()=>Yg,expiringMap:()=>up,filter:()=>Tl,find:()=>Ll,firstEntryByIterablePredicate:()=>Xg,firstEntryByIterableValue:()=>Zg,fromIterable:()=>Wl,fromObject:()=>ep,getClosestIntegerKey:()=>Kg,getOrGenerate:()=>Nl,getOrGenerateSync:()=>Bl,hasAnyValue:()=>Ol,hasKeyValue:()=>Jg,immutable:()=>Kt,mapOfSimpleMutable:()=>Gc,mapToArray:()=>ip,mapToObjTransform:()=>tp,mergeByKey:()=>ap,mutable:()=>lp,ofArrayMutable:()=>Ul,ofCircularMutable:()=>xl,ofSetMutable:()=>fp,sortByValue:()=>Qg,sortByValueProperty:()=>zl,toArray:()=>Ou,toObject:()=>np,transformMap:()=>rp,zipKeyValue:()=>Ao});var Rl=class extends Map{defaultValue;constructor(e=0){super();this.defaultValue=e}get(e){const r=super.get(e);return r===void 0?this.defaultValue:r}reset(e){return super.set(e,this.defaultValue),this.defaultValue}multiply(e,r){let i=super.get(e)??this.defaultValue;return i*=r,super.set(e,i),i}add(e,r=1){let i=super.get(e)??this.defaultValue;return i+=r,super.set(e,i),i}subtract(e,r=1){let i=super.get(e)??this.defaultValue;return i-=r,super.set(e,i),i}},Kg=(e,r)=>{if(r=Math.round(r),e.has(r))return r;{let n=1;for(;n<1e3;){if(e.has(r-n))return r-n;if(e.has(r+n))return r+n;n++}throw new Error(`Could not find target ${r}`)}},Jg=(e,r,n,i)=>e.has(r)?Array.from(e.values()).some(u=>i(u,n)):!1,Yg=(e,r,n=ze)=>{for(const i of Object.entries(e))n(i[1],r)&&e.delete(i[0])},Nl=(e,r)=>async(n,i)=>{let a=e.get(n);if(a!==void 0)return Promise.resolve(a);if(a=await r(n,i),a===void 0)throw new Error("fn returned undefined");return e.set(n,a),a},Xg=(e,r)=>{for(const n of e.entries())if(r(n[1],n[0]))return n},Zg=(e,r,n=ze)=>{for(const i of e.entries())if(n(i[1],r))return i},Bl=(e,r)=>(n,i)=>{let a=e.get(n);return a!==void 0||(a=r(n,i),e.set(n,a)),a},kl=(e,r,...n)=>{const i=e===void 0?new Map:new Map(e);return n.forEach(a=>{const u=r(a);i.has(u)||i.set(u,a)}),i},Qg=(e,r)=>{const n=r??Si;[...e.entries()].sort((i,a)=>n(i[1],a[1]))},zl=(e,r,n)=>{const i=typeof n>"u"?Si:n;return[...e.entries()].sort((a,u)=>{const o=a[1],s=u[1];return i(o[r],s[r])})},Ol=(e,r,n)=>Array.from(e.entries()).some(a=>n(a[1],r));function*Tl(e,r){for(const n of e.values())r(n)&&(yield n)}var Ou=e=>Array.from(e.values()),Wl=(e,r=fn,n=!1)=>{const i=new Map;for(const a of e){const u=r(a);if(i.has(u)&&!n)throw new Error(`id ${u} is already used and new data will overwrite it. `);i.set(u,a)}return i},ep=e=>{const r=new Map;return Array.isArray(e)?e.forEach(n=>Tu(r,n)):Tu(r,e),r},Tu=(e,r)=>{const n=Object.entries(r);for(const[i,a]of n)e.set(i,a)},Ll=(e,r)=>Array.from(e.values()).find(r),tp=(e,r)=>Array.from(e).reduce((n,[i,a])=>{const u=r(a);return n[i]=u,n},{}),Ao=(e,r)=>{if(e.length!==r.length)throw new Error("Keys and values arrays should be same length");return Object.fromEntries(e.map((n,i)=>[n,r[i]]))},rp=(e,r)=>new Map(Array.from(e,n=>[n[0],r(n[1],n[0])])),np=e=>Array.from(e).reduce((r,[n,i])=>(r[n]=i,r),{}),ip=(e,r)=>Array.from(e.entries()).map(n=>r(n[0],n[1])),ap=(e,...r)=>{const n=new Map;for(const i of r)for(const[a,u]of i){let o=n.get(a);o?o=e(o,u):o=u,n.set(a,o)}return n},up=(e={})=>new $l(e),$l=class extends sr{capacity;store;keyCount;evictPolicy;autoDeleteElapsedMs;autoDeletePolicy;constructor(e={}){super();if(this.capacity=e.capacity??-1,Le(this.capacity,"nonZero","capacity"),this.store=new Map,this.keyCount=0,e.evictPolicy&&this.capacity<=0)throw new Error("evictPolicy is set, but no capacity limit is set");this.evictPolicy=e.evictPolicy??"none",this.autoDeleteElapsedMs=e.autoDeleteElapsedMs??-1,this.autoDeletePolicy=e.autoDeletePolicy??"none",this.autoDeleteElapsedMs>0&&setInterval(()=>this.#e(),Math.max(1e3,this.autoDeleteElapsedMs*2))}get keyLength(){return this.keyCount}*entries(){for(const e of this.store.entries())yield[e[0],e[1].value]}*values(){for(const e of this.store.values())yield e.value}*keys(){yield*this.store.keys()}elapsedSet(e){const r=this.store.get(e);return r&&Date.now()-r.lastSet}elapsedGet(e){const r=this.store.get(e);return r&&Date.now()-r.lastGet}has(e){return this.store.has(e)}get(e){const r=this.store.get(e);if(r)return r.value}delete(e){const r=this.store.get(e);if(!r)return!1;const n=this.store.delete(e);return this.keyCount=this.keyCount-1,this.fireEvent("removed",{key:e,value:r.value}),n}touch(e){const r=this.store.get(e);return r?(this.store.set(e,{...r,lastSet:Date.now(),lastGet:Date.now()}),!0):!1}findEvicteeKey(){if(this.evictPolicy==="none")return null;let e="";if(this.evictPolicy==="oldestGet")e="lastGet";else if(this.evictPolicy==="oldestSet")e="lastSet";else throw Error(`Unknown eviction policy ${this.evictPolicy}`);return zl(this.store,e)[0][0]}#e(){this.autoDeletePolicy!=="none"&&this.deleteWithElapsed(this.autoDeleteElapsedMs,this.autoDeletePolicy)}deleteWithElapsed(e,r){const n=[...this.store.entries()],i=[],a=Date.now();for(const u of n){const o=a-u[1].lastGet,s=a-u[1].lastSet;(r==="get"?o:r==="set"?s:Math.max(o,s))>=e&&i.push([u[0],u[1].value])}for(const u of i){this.store.delete(u[0]),this.keyCount=this.keyCount-1;const o={key:u[0],value:u[1]};this.fireEvent("expired",o),this.fireEvent("removed",o)}return i}set(e,r){const n=this.store.get(e);if(n){this.store.set(e,{...n,lastSet:performance.now()});return}if(this.keyCount===this.capacity&&this.capacity>0){const i=this.findEvicteeKey();if(!i)throw new Error(`ExpiringMap full (capacity: ${this.capacity})`);const a=this.store.get(i);if(this.store.delete(i),this.keyCount=this.keyCount-1,a){const u={key:i,value:a.value};this.fireEvent("expired",u),this.fireEvent("removed",u)}}this.keyCount++,this.store.set(e,{lastGet:0,lastSet:Date.now(),value:r}),this.fireEvent("newKey",{key:e,value:r})}},op=(e,r)=>{const n=new Map(e.entries());return r.forEach(i=>{if(i[0]===void 0)throw new Error("key cannot be undefined");if(i[1]===void 0)throw new Error("value cannot be undefined");n.set(i[0],i[1])}),n},sp=(e,r)=>{const n=new Map(e.entries());return r.forEach(i=>{if(i.key===void 0)throw new Error("key cannot be undefined");if(i.value===void 0)throw new Error("value cannot be undefined");n.set(i.key,i.value)}),n},cp=(e,r)=>e.has(r),Kn=(e,...r)=>{if(e===void 0)throw new Error("map parameter is undefined");if(r===void 0)throw new Error("data parameter i.s undefined");if(r.length===0)return e;const n=r[0];return typeof n.key<"u"&&typeof n.value<"u"?sp(e,r):op(e,r)},jl=(e,r,n)=>{const i=new Map(e.entries());return i.set(r,n),i},ql=(e,r)=>{const n=new Map(e.entries());return n.delete(r),n},Kt=e=>{if(e===void 0)return Kt([]);if(Array.isArray(e))return Kt(Kn(new Map,...e));const r=e;return{add:(...n)=>{const i=Kn(r,...n);return Kt(i)},set:(n,i)=>{const a=jl(r,n,i);return Kt(a)},get:n=>r.get(n),delete:n=>Kt(ql(r,n)),clear:()=>Kt(),has:n=>r.has(n),entries:()=>r.entries(),values:()=>r.values(),isEmpty:()=>r.size===0}},lp=(...e)=>{let r=Kn(new Map,...e);return{add:(...n)=>{r=Kn(r,...n)},delete:n=>{r=ql(r,n)},clear:()=>{r=Kn(new Map)},set:(n,i)=>{r=jl(r,n,i)},get:n=>r.get(n),entries:()=>r.entries(),values:()=>r.values(),isEmpty:()=>r.size===0,has:n=>cp(r,n)}},ga=class extends sr{#e=new Map;groupBy;type;constructor(e,r={}){super();this.type=e,this.groupBy=r.groupBy??fn}get typeName(){return this.type.name}get lengthMax(){let e=0;for(const r of this.#e.values())e=Math.max(e,this.type.count(r));return e}debugString(){const e=[...this.#e.keys()];let r=`Keys: ${e.join(", ")}\r
`;for(const n of e){const i=this.#e.get(n);if(i===void 0)r+=` - ${n} (undefined)\r
`;else{const a=this.type.toArray(i);a!==void 0&&(r+=` - ${n} (${this.type.count(i)}) = ${JSON.stringify(a)}\r
`)}}return r}get isEmpty(){return this.#e.size===0}clear(){this.#e.clear(),super.fireEvent("clear",!0)}addKeyedValues(e,...r){const n=this.#e.get(e);n===void 0?(this.#e.set(e,this.type.add(void 0,r)),super.fireEvent("addedKey",{key:e}),super.fireEvent("addedValues",{values:r})):(this.#e.set(e,this.type.add(n,r)),super.fireEvent("addedValues",{values:r}))}set(e,r){return this.addKeyedValues(e,...r),this}addValue(...e){for(const r of e)this.addKeyedValues(this.groupBy(r),r)}hasKeyValue(e,r,n){const i=this.#e.get(e);return i===void 0?!1:this.type.has(i,r,n)}has(e){return this.#e.has(e)}deleteKeyValue(e,r){const n=this.#e.get(e);return n===void 0?!1:this.deleteKeyValueFromMap(n,e,r)}deleteKeyValueFromMap(e,r,n){const i=this.type.count(e),a=this.type.without(e,n),u=a.length;return this.#e.set(r,this.type.add(void 0,a)),i>u}deleteByValue(e){let r=!1;return[...this.#e.keys()].filter(n=>{const i=this.#e.get(n);if(!i)throw new Error("Bug: map could not be accessed");this.deleteKeyValueFromMap(i,n,e)&&(r=!0,this.count(n)===0&&this.delete(n))}),r}delete(e){return this.#e.get(e)===void 0?!1:(this.#e.delete(e),this.fireEvent("deleteKey",{key:e}),!0)}firstKeyByValue(e,r=ze){return[...this.#e.keys()].find(a=>{const u=this.#e.get(a);if(u===void 0)throw new Error("Bug: map could not be accessed");return this.type.has(u,e,r)})}count(e){const r=this.#e.get(e);return r===void 0?0:this.type.count(r)}*get(e){const r=this.#e.get(e);r!==void 0&&(yield*this.type.iterable(r))}*valuesFor(e){const r=this.#e.get(e);r!==void 0&&(yield*this.type.iterable(r))}getSource(e){return this.#e.get(e)}*keys(){yield*this.#e.keys()}*entriesFlat(){for(const e of this.#e.entries())for(const r of this.type.iterable(e[1]))yield[e[0],r]}*valuesFlat(){for(const e of this.#e.entries())yield*this.type.iterable(e[1])}*entries(){for(const[e,r]of this.#e.entries()){const n=[...this.type.iterable(r)];yield[e,n]}}*keysAndCounts(){for(const e of this.keys())yield[e,this.count(e)]}merge(e){for(const r of e.keys()){const n=e.get(r);this.addKeyedValues(r,...n)}}get size(){return this.#e.size}get[Symbol.toStringTag](){return this.#e[Symbol.toStringTag]}},fp=e=>{const r=e?.hash??fn,n=(u,o)=>r(u)===r(o),i={get name(){return"set"},iterable:u=>u.values(),add:(u,o)=>kl(u,r,...o),count:u=>u.size,find:(u,o)=>Ll(u,o),filter:(u,o)=>Tl(u,o),toArray:u=>Ou(u),has:(u,o)=>Ol(u,o,n),without:(u,o)=>ru(Ou(u),o,n)};return new ga(i,e)},xl=e=>{const r=ze,n={get name(){return"circular"},add:(i,a)=>{i===void 0&&(i=Zc(e.capacity));for(const u of a)i=i.add(u);return i},count:i=>i.length,find:(i,a)=>i.find(a),filter:(i,a)=>i.filter(a),toArray:i=>i,iterable:i=>i.values(),has:(i,a)=>i.find(u=>r(u,a))!==void 0,without:(i,a)=>i.filter(u=>!r(u,a))};return new ga(n,e)},Ul=(e={})=>{const r=e.convertToString,n=typeof r>"u"?ze:(o,s)=>r(o)===r(s),i=e.comparer??n,a={get name(){return"array"},add:(o,s)=>o===void 0?[...s]:[...o,...s],iterable:o=>o.values(),count:o=>o.length,find:(o,s)=>o.find(c=>s(c)),filter:(o,s)=>o.filter(c=>s(c)),toArray:o=>o,has:(o,s)=>o.some(c=>i(c,s)),without:(o,s)=>o.filter(c=>!i(c,s))};return new ga(a,e)},mn={};G(mn,{getEnd:()=>hp,getStart:()=>dp});var dp=function(e){if(yi.isQuadraticBezier(e))return e.a;if(Ze.isLine(e))return e.a;throw new Error(`Unknown path type ${JSON.stringify(e)}`)},hp=function(e){if(yi.isQuadraticBezier(e))return e.b;if(Ze.isLine(e))return e.b;throw new Error(`Unknown path type ${JSON.stringify(e)}`)},vp=Object.freeze({a:Object.freeze({x:0,y:0}),b:Object.freeze({x:0,y:0})}),yp=Object.freeze({a:Object.freeze({x:Number.NaN,y:Number.NaN}),b:Object.freeze({x:Number.NaN,y:Number.NaN})}),mp=e=>W.isEmpty(e.a)&&W.isEmpty(e.b),gp=e=>W.isPlaceholder(e.a)&&W.isPlaceholder(e.b),Lr=e=>!(e===void 0||e.a===void 0||e.b===void 0||!W.isPoint(e.a)||!W.isPoint(e.b)),Vl=e=>Array.isArray(e)?!e.some(n=>!Lr(n)):!1,Hl=(e,r)=>W.isEqual(e.a,r.a)&&W.isEqual(e.b,r.b),Gl=(e,r)=>Object.freeze({...e,a:r(e.a),b:r(e.b)}),pa=(e,r="line")=>{if(e===void 0)throw new Error(`${r} undefined`);if(e.a===void 0)throw new Error(`${r}.a undefined. Expected {a:Point, b:Point}. Got: ${JSON.stringify(e)}`);if(e.b===void 0)throw new Error(`${r}.b undefined. Expected {a:Point, b:Point} Got: ${JSON.stringify(e)}`)},pp=(e,r)=>{let n;if(Lr(e))n=e.a,r=e.b;else if(n=e,r===void 0)throw new Error("b point must be provided");return Math.atan2(r.y-n.y,r.x-n.x)},Kl=(e,r)=>Object.freeze({...e,a:W.multiply(e.a,r),b:W.multiply(e.b,r)}),Jl=(e,r)=>Object.freeze({...e,a:W.divide(e.a,r),b:W.divide(e.b,r)}),Yl=(e,r)=>Object.freeze({...e,a:W.sum(e.a,r),b:W.sum(e.b,r)}),Xl=(e,r)=>Object.freeze({...e,a:W.subtract(e.a,r),b:W.subtract(e.b,r)}),wp=(e,r,n)=>Object.freeze({...e,a:W.normaliseByRect(e.a,r,n),b:W.normaliseByRect(e.b,r,n)}),Zl=(e,r,n)=>af(e,r)<=n;function Cr(e,r){if(Vl(e))return e.reduce((s,c)=>Cr(c)+s,0);if(e===void 0)throw new TypeError("Parameter 'aOrLine' is undefined");const[n,i]=wa(e,r),a=i.x-n.x,u=i.y-n.y;if(n.z!==void 0&&i.z!==void 0){const o=i.z-n.z;return Math.hypot(a,u,o)}else return Math.hypot(a,u)}var Ql=(e,r)=>{const[n,i]=wa(e,r);return Tr(.5,n,i)},wa=(e,r)=>{let n;if(Lr(e))r=e.b,n=e.a;else if(n=e,r===void 0)throw new Error(`Since first parameter is not a line, two points are expected. Got a: ${JSON.stringify(n)} b: ${JSON.stringify(r)}`);return pe(n,"a"),pe(n,"b"),[n,r]},Co=(e,r)=>{const n=i=>{const{a,b:u}=i,o={x:u.x-a.x,y:u.y-a.y},s={x:r.x-a.x,y:r.y-a.y},c=o.x*o.x+o.y*o.y;let l=s.x*o.x+s.y*o.y;const f=Math.min(1,Math.max(0,l/c));return l=(u.x-a.x)*(r.y-a.y)-(u.y-a.y)*(r.x-a.x),{x:a.x+o.x*f,y:a.y+o.y*f}};if(Array.isArray(e)){const i=e.map(u=>n(u)),a=i.map(u=>W.distance(u,r));return Object.freeze(i[$t.minIndex(...a)])}else return Object.freeze(n(e))},So=(e,r)=>{let n;if(Lr(e))n=e.a,r=e.b;else if(n=e,r===void 0)throw new Error("b parameter required");if(r===void 0)throw new TypeError("Second point missing");return(r.y-n.y)/(r.x-n.x)},ef=e=>({x:e.b.x-e.a.x,y:e.b.y-e.a.y}),tf=e=>{const r=Cr(e),n=ef(e);return{x:n.x/r,y:n.y/r}},rf=(e,r,n=0)=>{const i=Tr(n,e),a=tf(e);return{x:i.x-a.y*r,y:i.y+a.x*r}},nf=(e,r)=>{const n=ef(e),i=tf(e),a={x:e.a.x-i.y*r,y:e.a.y+i.x*r};return{a,b:{x:a.x+n.x,y:a.y+n.y}}},bp=(e,r)=>{const n=Tr(r/2,e),i=Tr(.5+r/2,e);return{a:n,b:i}},Ep=(e,r)=>{const n=e.a.y+(r-e.a.x)*So(e);return Object.freeze({x:r,y:n})},Dp=(e,r)=>{const n=Cr(e);return Object.freeze({...e,a:e.a,b:Object.freeze({x:e.b.x+(e.b.x-e.a.x)/n*r,y:e.b.y+(e.b.y-e.a.y)/n*r})})};function*Ap(e){const{a:r,b:n}=e;let i=Math.floor(r.x),a=Math.floor(r.y);const u=Math.floor(n.x),o=Math.floor(n.y),s=Math.abs(u-i),c=-Math.abs(o-a),l=i<u?1:-1,f=a<o?1:-1;let d=s+c;for(;yield{x:i,y:a},!(i===u&&a===o);){const v=2*d;v>=c&&(d+=c,i+=l),v<=s&&(d+=s,a+=f)}}var af=(e,r)=>{if(Array.isArray(e)){const n=e.map(i=>Wu(i,r));return xs(n)}else return Wu(e,r)},Wu=(e,r)=>{if(pa(e,"line"),pe(r,"point"),Cr(e)===0)return Cr(e.a,r);const n=Co(e,r);return Cr(n,r)};function Tr(e,r,n,i){typeof n=="boolean"&&(i=n,n=void 0),i?ee(e,"","amount"):Em(e,"amount");const[a,u]=wa(r,n),o=Cr(a,u),s=o*(1-e);if(o===0&&s===0)return Object.freeze({...u});const c=u.x-s*(u.x-a.x)/o,l=u.y-s*(u.y-a.y)/o;return Object.freeze({...u,x:c,y:l})}function uf(e,r){if(Lr(e))pa(e,"a"),r=e.b,e=e.a;else if(r===void 0)throw new Error("Expect second point if first is a point");return W.toString(e)+"-"+W.toString(r)}var Ui=(e,r,n,i)=>{if(Number.isNaN(e))throw new Error("x1 is NaN");if(Number.isNaN(n))throw new Error("x2 is NaN");if(Number.isNaN(r))throw new Error("y1 is NaN");if(Number.isNaN(i))throw new Error("y2 is NaN");return ba({x:e,y:r},{x:n,y:i})},of=(e,r)=>{if(Lr(e))return[e.a.x,e.a.y,e.b.x,e.b.y];if(W.isPoint(e)&&W.isPoint(r))return[e.x,e.y,r.x,r.y];throw new Error("Expected single line parameter, or a and b points")};function*Cp(e){for(const r of e)yield r.a,yield r.b}var sf=(e,r)=>[`M${e.x} ${e.y} L ${r.x} ${r.y}`],Sp=e=>{if(!Array.isArray(e))throw new Error("arr parameter is not an array");if(e.length!==4)throw new Error("array is expected to have length four");return Ui(e[0],e[1],e[2],e[3])},ba=(e,r)=>(pe(e,"a"),pe(r,"b"),e=Object.freeze({...e}),r=Object.freeze({...r}),Object.freeze({a:e,b:r})),cf=(...e)=>{const r=[];let n=e[0];for(let i=1;i<e.length;i++)r.push(ba(n,e[i])),n=e[i];return r},Fp=(e,r)=>wr(ba(e,r)),lf=e=>W.bbox(e.a,e.b),wr=e=>{const{a:r,b:n}=e;return Object.freeze({...e,length:()=>Cr(r,n),interpolate:i=>Tr(i,r,n),bbox:()=>lf(e),toString:()=>uf(r,n),toFlatArray:()=>of(r,n),toSvgString:()=>sf(r,n),toPoints:()=>[r,n],rotate:(i,a)=>wr(ff(e,i,a)),nearest:i=>Co(e,i),sum:i=>wr(Yl(e,i)),divide:i=>wr(Jl(e,i)),multiply:i=>wr(Kl(e,i)),subtract:i=>wr(Xl(e,i)),midpoint:()=>Ql(r,n),distance:i=>Wu(e,i),parallel:i=>nf(e,i),perpendicularPoint:(i,a)=>rf(e,i,a),slope:()=>So(e),withinRange:(i,a)=>Zl(e,i,a),isEqual:i=>Hl(e,i),apply:i=>wr(Gl(e,i)),kind:"line"})},ff=(e,r,n)=>r===void 0||r===0?e:(n===void 0&&(n=.5),typeof n=="number"&&(n=Tr(n,e.a,e.b)),Object.freeze({...e,a:W.rotate(e.a,r,n),b:W.rotate(e.b,r,n)}));function lt(e,r,n){if(e===void 0)return{x:0,y:0};if(Array.isArray(e)){if(e.length===0)return Object.freeze({x:0,y:0});if(e.length===1)return Object.freeze({x:e[0],y:0});if(e.length===2)return Object.freeze({x:e[0],y:e[1]});if(e.length===3)return Object.freeze({x:e[0],y:e[1],z:e[2]});throw new Error(`Expected array to be 1-3 elements in length. Got ${e.length}.`)}if(W.isPoint(e))return e;if(typeof e!="number"||typeof r!="number")throw new TypeError(`Expected point or x,y as parameters. Got: a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`);return Object.freeze(typeof n=="number"?{x:e,y:r,z:n}:{x:e,y:r})}var df=(...e)=>{const r=e.map(n=>W.toArray(n));return $t.dotProduct(r)},Fn=Object.freeze({x:0,y:0}),hf=Object.freeze({x:Number.NaN,y:Number.NaN}),zi=e=>e.x===0&&e.y===0,Oi=e=>Number.isNaN(e.x)&&Number.isNaN(e.y),Mp=e=>e.x===null&&e.y===null,_p=e=>Number.isNaN(e.x)||Number.isNaN(e.y),Jr=(e,...r)=>{if(r.length===0)throw new Error("No points provided");let n=r[0];for(const i of r)n=e(n,i);return n},Ip=(...e)=>Jr((r,n)=>r.x<=n.x?r:n,...e),Pp=(...e)=>Jr((r,n)=>r.x>=n.x?r:n,...e);function Lt(e,r,n,i){const a=lt(r,n,i);return pe(a),Mn(a)&&Mn(e)?Math.hypot(a.x-e.x,a.y-e.y,a.z-e.z):Math.hypot(a.x-e.x,a.y-e.y)}var Rp=(e,r)=>{if(me.isRectPositioned(r))return me.distanceFromExterior(r,e);if(Rt.isCirclePositioned(r))return Rt.distanceFromExterior(r,e);if(Fe(r))return Lt(e,r);throw new Error("Unknown shape")},Np=(e,r)=>{if(me.isRectPositioned(r))return me.distanceFromExterior(r,e);if(Rt.isCirclePositioned(r))return Rt.distanceFromExterior(r,e);if(Fe(r))return Lt(e,r);throw new Error("Unknown shape")};function pe(e,r="Point"){if(e===void 0)throw new Error(`'${r}' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(e===null)throw new Error(`'${r}' is null. Expected {x,y} got ${JSON.stringify(e)}`);if(e.x===void 0)throw new Error(`'${r}.x' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(e.y===void 0)throw new Error(`'${r}.y' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(typeof e.x!="number")throw new TypeError(`'${r}.x' must be a number. Got ${e.x}`);if(typeof e.y!="number")throw new TypeError(`'${r}.y' must be a number. Got ${e.y}`);if(e.x===null)throw new Error(`'${r}.x' is null`);if(e.y===null)throw new Error(`'${r}.y' is null`);if(Number.isNaN(e.x))throw new Error(`'${r}.x' is NaN`);if(Number.isNaN(e.y))throw new Error(`'${r}.y' is NaN`)}var vf=(e,r="pt")=>(pe(e,r),ee(e.x,"nonZero",`${r}.x`),ee(e.y,"nonZero",`${r}.y`),typeof e.z<"u"&&ee(e.z,"nonZero",`${r}.z`),!0),Bp=e=>({...e,x:Math.abs(e.x),y:Math.abs(e.y)}),gn=(e,r,n)=>r===void 0?Math.atan2(e.y,e.x):n!==void 0?Math.atan2(r.y-e.y,r.x-e.x)-Math.atan2(n.y-e.y,n.x-e.x):Math.atan2(r.y-e.y,r.x-e.x),yf=(...e)=>{if(!Array.isArray(e))throw new Error("Expected list of points");const r=e.reduce((n,i)=>{if(i===void 0)return n;if(Array.isArray(i))throw new TypeError("'points' list contains an array. Did you mean: centroid(...myPoints)?");if(!Fe(i))throw new Error(`'points' contains something which is not a point: ${JSON.stringify(i)}`);return{x:n.x+i.x,y:n.y+i.y}},{x:0,y:0});return Object.freeze({x:r.x/e.length,y:r.y/e.length})},kp=(...e)=>{const r=Jr((l,f)=>l.x<f.x?l:f,...e),n=Jr((l,f)=>l.x>f.x?l:f,...e),i=Jr((l,f)=>l.y<f.y?l:f,...e),a=Jr((l,f)=>l.y>f.y?l:f,...e),u={x:r.x,y:i.y},o={x:n.x,y:i.y},s={x:n.x,y:a.y},c={x:r.x,y:a.y};return me.maxFromCorners(u,o,s,c)};function Fe(e){return!(e===void 0||e===null||e.x===void 0||e.y===void 0)}var Mn=e=>!(e===void 0||e===null||e.x===void 0||e.y===void 0||e.z===void 0),zp=e=>[e.x,e.y];function mf(e,r){if(e===void 0)return"(undefined)";if(e===null)return"(null)";const n=r?e.x.toFixed(r):e.x,i=r?e.y.toFixed(r):e.y;if(e.z===void 0)return`(${n},${i})`;{const a=r?e.z.toFixed(r):e.z;return`(${n},${i},${a})`}}var Jn=(...e)=>{if(e===void 0)throw new Error("parameter 'p' is undefined");if(e.length<2)return!0;for(let r=1;r<e.length;r++)if(e[r].x!==e[0].x||e[r].y!==e[0].y)return!1;return!0},Op=(e,r,n)=>{pe(e,"a"),pe(r,"b"),typeof n=="number"?(ee(n,"positive","maxRange"),n={x:n,y:n}):pe(n,"maxRange");const i=Math.abs(r.x-e.x),a=Math.abs(r.y-e.y);return i<=n.x&&a<=n.y},Tp=(e,r,n,i=!1)=>Tr(e,r,n,i),Wp=(e,r)=>{if(Array.isArray(e)){if(e.length!==2)throw new Error("Expected array of length two, got "+e.length);return Object.freeze({x:e[0],y:e[1]})}else{if(e===void 0)e=0;else if(Number.isNaN(e))throw new Error("x is NaN");if(r===void 0)r=0;else if(Number.isNaN(r))throw new Error("y is NaN");return Object.freeze({x:e,y:r})}},gf=(...e)=>{const r=[];if(Array.isArray(e[0]))for(const n of e){if(n.length%2!==0)throw new Error("coords array should be even-numbered");r.push(Object.freeze({x:n[0],y:n[1]}))}else{if(e.length%2!==0)throw new Error("Expected even number of elements: [x,y,x,y...]");for(let n=0;n<e.length;n+=2)r.push(Object.freeze({x:e[n],y:e[n+1]}))}return r};function $r(e,r,n,i){if(Fe(e))return pe(e,"a"),Fe(r)?(pe(r,"b"),Object.freeze({...e,x:e.x-r.x,y:e.y-r.y})):(n===void 0&&(n=r),Object.freeze({...e,x:e.x-r,y:e.y-n}));if(ee(e,"","a"),typeof r!="number")throw new TypeError("Second parameter is expected to by y value");if(ee(r,"","b"),Number.isNaN(n))throw new Error("Third parameter is NaN");if(Number.isNaN(i))throw new Error("Fourth parameter is NaN");return n===void 0&&(n=0),i===void 0&&(i=0),Object.freeze({x:e-n,y:r-i})}var Lp=(e,r)=>Object.freeze({...e,x:r(e.x,"x"),y:r(e.y,"y")}),$p=(e,...r)=>pf(...r)(e),pf=(...e)=>r=>e.reduce((n,i)=>i(n),r),wf=(e,r,n)=>{n===void 0&&(n={x:0,y:0});let i=n;for(const a of e)i=r(a,i);return i},bf=function(e,r,n,i){if(e===void 0)throw new TypeError("a missing");let a,u;if(Fe(e))if(a=e,r===void 0&&(r=Fn),Fe(r))u=r;else{if(r===void 0)throw new Error("Expects x coordinate");u={x:r,y:n??r}}else if(!Fe(r)){if(r===void 0)throw new Error("Expected number as second param");if(a={x:e,y:r},n===void 0)throw new Error("Expects x coordiante");u={x:n,y:i??0}}if(a===void 0)throw new Error(`ptA missing. a: ${JSON.stringify(e)}`);if(u===void 0)throw new Error(`ptB missing. b: ${JSON.stringify(r)}`);return pe(a,"a"),pe(u,"b"),Object.freeze({x:a.x+u.x,y:a.y+u.y})};function Ea(e,r,n){if(pe(e,"a"),typeof r=="number")return typeof n>"u"&&(n=r),ee(n,"","y"),ee(r,"","x"),Object.freeze({x:e.x*r,y:e.y*n});if(Fe(r))return pe(r,"b"),Object.freeze({x:e.x*r.x,y:e.y*r.y});if(me.isRect(r))return me.guard(r,"rect"),Object.freeze({x:e.x*r.width,y:e.y*r.height});throw new Error(`Invalid arguments. a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`)}var jp=(e,r)=>Mn(e)?Object.freeze({...e,x:e.x*r,y:e.y*r,z:e.z*r}):Object.freeze({...e,x:e.x*r,y:e.y*r});function Ef(e,r,n,i){if(Fe(e))return pe(e,"a"),Fe(r)?Object.freeze({x:e.x/r.x,y:e.y/r.y}):me.isRect(r)?(me.guard(r,"rect"),Object.freeze({x:e.x/r.width,y:e.y/r.height})):(n===void 0&&(n=r),pe(e),ee(r,"nonZero","x"),ee(n,"nonZero","y"),Object.freeze({x:e.x/r,y:e.y/n}));if(typeof r!="number")throw new TypeError("expected second parameter to be y1 coord");return ee(e,"positive","x1"),ee(r,"positive","y1"),n===void 0&&(n=1),i===void 0&&(i=n),ee(n,"nonZero","x2"),ee(i,"nonZero","y2"),Object.freeze({x:e/n,y:r/i})}function qp(e,r,n){const i=lt(e,r,n);return vf(i,"divisor"),(a,u,o)=>{const s=lt(a,u,o);return typeof s.z>"u"?Object.freeze({x:s.x/i.x,y:s.y/i.y}):Object.freeze({x:s.x/i.x,y:s.y/i.y,z:s.z/(i.z??1)})}}var xp=(e,r,n=!0)=>Object.freeze({x:so(e.x,r.x,n),y:so(e.y,r.y,n)}),Up=(...e)=>{const r=[...e].sort(Df);if(r.length===1)return r;const n=u=>{const o=[];for(const s of u){for(;o.length>=2;){const c=o.at(-1),l=o.at(-2);if((c.x-l.x)*(s.y-l.y)>=(c.y-l.y)*(s.x-l.x))o.pop();else break}o.push(s)}return o.pop(),o},i=n(r),a=n(r.reverse());return i.length===1&&a.length===1&&Jn(a[0],i[0])?i:[...i,...a]},Vp=(e,r)=>e.x<r.x&&e.y<r.y?-2:e.x>r.x&&e.y>r.y?2:e.x<r.x||e.y<r.y?-1:e.x>r.x||e.y>r.y?1:e.x===r.x&&e.x===r.y?0:Number.NaN,Df=(e,r)=>e.x-r.x||e.y-r.y,Lu=(e,r,n)=>{const i=Math.cos(n)*r+e.x,a=Math.sin(n)*r+e.y;return{x:i,y:a}};function Xr(e,r,n){n===void 0&&(n={x:0,y:0}),pe(n,"origin"),ee(r,"","amountRadian");const i=Array.isArray(e);if(r===0)return e;i||(e=[e]);const a=e;for(const[c,l]of a.entries())pe(l,`pt[${c}]`);const s=a.map(c=>Ye.fromCartesian(c,n)).map(c=>Ye.rotate(c,r)).map(c=>Ye.toCartesian(c,n));return i?s:s[0]}var Hp=(e,r)=>{const n=[[Math.cos(r),-Math.sin(r)],[Math.sin(r),Math.cos(r)]],i=[];for(const[a,u]of e.entries())i[a]=[n[0][0]*u[0]+n[0][1]*u[1],n[1][0]*u[0]+n[1][1]*u[1]];return i},Gp=(e,r)=>{if(Fe(e)&&(r=e.y,e=e.x),r===void 0)throw new Error("Expected y");return Math.hypot(e,r)},Af=(e,r)=>{const n=lt(e,r),i=Gp(n);return i===0?W.Empty:Object.freeze({...n,x:n.x/i,y:n.y/i})},Kp=(e,r,n)=>{const i=lt(e,r);return n=n??r,n=n??2,Object.freeze({...i,x:sn(n,i.x),y:sn(n,i.y)})};function Jp(e,r,n,i){if(Fe(e)){if(typeof r=="number"&&n!==void 0)ee(r,"positive","width"),ee(n,"positive","height");else{if(!me.isRect(r))throw new Error("Expected second parameter to be a rect");n=r.height,r=r.width}return Object.freeze({x:e.x/r,y:e.y/n})}else{if(ee(e,"positive","x"),typeof r!="number")throw new TypeError("Expecting second parameter to be a number (width)");if(typeof n!="number")throw new TypeError("Expecting third parameter to be a number (height)");if(ee(r,"positive","y"),ee(n,"positive","width"),i===void 0)throw new Error("Expected height parameter");return ee(i,"positive","height"),Object.freeze({x:e/n,y:r/i})}}var Yp=e=>(e===void 0&&(e=tt),Object.freeze({x:e(),y:e()})),Xp=(e,r,n)=>(r===void 0&&(r={x:1,y:1}),n===void 0&&(n={x:0,y:0}),pe(e,"pt"),pe(r,"ptMax"),pe(n,"ptMin"),Object.freeze({x:la(e.x,n.x,r.x),y:la(e.y,n.y,r.y)})),Zp=(e,r="both")=>{switch(r){case"both":return Mn(e)?Object.freeze({...e,x:e.x*-1,y:e.y*-1,z:e.z*-1}):Object.freeze({...e,x:e.x*-1,y:e.y*-1});case"x":return Object.freeze({...e,x:e.x*-1});case"y":return Object.freeze({...e,y:e.y*-1});case"z":{if(Mn(e))return Object.freeze({...e,z:e.z*-1});throw new Error("pt parameter is missing z")}default:throw new Error("Unknown what parameter. Expecting 'both', 'x' or 'y'")}},Qp=(e,r=Math.round)=>(pe(e,"pt"),Object.freeze({x:r(e.x),y:r(e.y)})),Cf=(e,r=1,n=0)=>{const i=Lt(e);let a=1;return i>r?a=r/i:i<n&&(a=n/i),a===1?e:Ea(e,a,a)};function ew(e,r,n,i){if(Fe(e))return r===void 0&&(r=0),n===void 0&&(n=1),ee(r,"","min"),ee(n,"","max"),Object.freeze({x:Wt(e.x,r,n),y:Wt(e.y,r,n)});if(r===void 0)throw new Error("Expected y coordinate");return n===void 0&&(n=0),i===void 0&&(i=1),ee(e,"","x"),ee(r,"","y"),ee(n,"","min"),ee(i,"","max"),Object.freeze({x:Wt(e,n,i),y:Wt(r,n,i)})}var Ti=(e,r)=>{const n=lt(e,r);let i=0,a=0,u=0,o=performance.now(),s=n;return(l,f)=>{const d=lt(l,f);i+=d.x,a+=d.y,u++;const v=Lt(d,n),g=Lt(d,s),P=performance.now(),L=g/(P-o);return o=P,s=d,Object.freeze({angle:gn(d,n),distanceFromStart:v,distanceFromLast:g,speed:L,centroid:yf(d,n),average:{x:i/u,y:a/u}})}},tw=(e,r,n)=>{const i=W.subtract(e,r),a=W.subtract(n,r);return W.isPoint3d(i)&&W.isPoint3d(a)?(i.x*a.x+i.y*a.y+i.z*a.z)/(a.x*a.x+a.y*a.y+a.z*a.z):(i.x*a.x+i.y*a.y)/(a.x*a.x+a.y*a.y)},Sf=e=>e.startRadian!==void 0&&e.endRadian!==void 0,br=e=>e.x!==void 0&&e.y!==void 0,nc=Math.PI*2;function rw(e,r,n,i){const a={radius:e,startRadian:zr(r),endRadian:zr(n)};if(Fe(i)){pe(i);const u={...a,x:i.x,y:i.y};return Object.freeze(u)}else return Object.freeze(a)}var Ff=e=>Ze.fromPoints(Vi(e,e.startRadian),Vi(e,e.endRadian)),Vi=(e,r,n)=>{if(r>e.endRadian)throw new Error("angleRadian beyond end angle of arc");if(r<e.startRadian)throw new Error("angleRadian beyond start angle of arc");return n===void 0&&(br(e)?n=e:n={x:0,y:0}),{x:Math.cos(r)*e.radius+n.x,y:Math.sin(r)*e.radius+n.y}},Fo=e=>{if(e===void 0)throw new Error("Arc is undefined");if(br(e)&&pe(e,"arc"),e.radius===void 0)throw new Error(`Arc radius is undefined (${JSON.stringify(e)})`);if(typeof e.radius!="number")throw new Error("Radius must be a number");if(Number.isNaN(e.radius))throw new Error("Radius is NaN");if(e.radius<=0)throw new Error("Radius must be greater than zero");if(e.startRadian===void 0)throw new Error("Arc is missing 'startRadian' field");if(e.endRadian===void 0)throw new Error("Arc is missing 'startRadian' field");if(Number.isNaN(e.endRadian))throw new Error("Arc endRadian is NaN");if(Number.isNaN(e.startRadian))throw new Error("Arc endRadian is NaN");if(e.startRadian>=e.endRadian)throw new Error("startRadian is expected to be les than endRadian")},Mo=(e,r,n)=>(Fo(r),Vi(r,r.startRadian+(r.endRadian-r.startRadian)*e,n)),nw=e=>(Fo(e),Object.freeze({...e,nearest:r=>{throw new Error("not implemented")},interpolate:r=>Mo(r,e),bbox:()=>_f(e),length:()=>Mf(e),toSvgString:()=>If(e),kind:"arc"})),Mf=e=>nc*e.radius*((e.startRadian-e.endRadian)/nc),_f=e=>{if(br(e)){const r=Mo(.5,e),n=Ff(e);return W.bbox(r,n.a,n.b)}else return{width:e.radius*2,height:e.radius*2}},If=(e,r,n,i,a)=>{if(Sf(e))return br(e)?Mi(e,e.radius,e.startRadian,e.endRadian,r):Fe(r)?Mi(r,e.radius,e.startRadian,e.endRadian,n):Mi({x:0,y:0},e.radius,e.startRadian,e.endRadian);if(n===void 0)throw new Error("startAngle undefined");if(i===void 0)throw new Error("endAngle undefined");if(Fe(e)){if(typeof r=="number"&&typeof n=="number"&&typeof i=="number")return Mi(e,r,n,i,a);throw new Error("Expected (point, number, number, number). Missing a number param.")}else throw new Error("Expected (point, number, number, number). Missing first point.")},Mi=(e,r,n,i,a)=>{(a===void 0||typeof a!="object")&&(a={});const u=i-n===360,o=Ye.toCartesian(r,i-.01,e),s=Ye.toCartesian(r,n,e),{largeArc:c=!1,sweep:l=!1}=a,f=[`
    M ${o.x} ${o.y}
    A ${r} ${r} 0 ${c?"1":"0"} ${l?"1":"0"} ${s.x} ${s.y},
  `];return u&&f.push("z"),f},iw=(e,r)=>W.distance(e,r),aw=(e,r)=>e.radius!==r.radius?!1:br(e)&&br(r)?!(e.x!==r.x||e.y!==r.y||e.z!==r.z):!(!(!br(e)&&!br(r))||e.endRadian!==r.endRadian||e.startRadian!==r.startRadian),yi={};G(yi,{computeQuadraticSimple:()=>vw,cubic:()=>yw,isCubicBezier:()=>_o,isQuadraticBezier:()=>Aa,quadratic:()=>Bf,quadraticBend:()=>hw,quadraticSimple:()=>pn,quadraticToSvgString:()=>Nf,toPath:()=>Wi});var{abs:jn,cos:pr,sin:dn,acos:uw,atan2:qn,sqrt:Nr,pow:Tt}=Math;function xn(e){return e<0?-Tt(-e,1/3):Tt(e,1/3)}var Pf=Math.PI,_i=2*Pf,Br=Pf/2,ow=1e-6,fu=Number.MAX_SAFE_INTEGER||9007199254740991,du=Number.MIN_SAFE_INTEGER||-9007199254740991,sw={x:0,y:0,z:0},J={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,r){const n=r(e);let i=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(i+=n.z*n.z),Nr(i)},compute:function(e,r,n){if(e===0)return r[0].t=0,r[0];const i=r.length-1;if(e===1)return r[i].t=1,r[i];const a=1-e;let u=r;if(i===0)return r[0].t=e,r[0];if(i===1){const s={x:a*u[0].x+e*u[1].x,y:a*u[0].y+e*u[1].y,t:e};return n&&(s.z=a*u[0].z+e*u[1].z),s}if(i<4){let s=a*a,c=e*e,l,f,d,v=0;i===2?(u=[u[0],u[1],u[2],sw],l=s,f=a*e*2,d=c):i===3&&(l=s*a,f=s*e*3,d=a*c*3,v=e*c);const g={x:l*u[0].x+f*u[1].x+d*u[2].x+v*u[3].x,y:l*u[0].y+f*u[1].y+d*u[2].y+v*u[3].y,t:e};return n&&(g.z=l*u[0].z+f*u[1].z+d*u[2].z+v*u[3].z),g}const o=JSON.parse(JSON.stringify(r));for(;o.length>1;){for(let s=0;s<o.length-1;s++)o[s]={x:o[s].x+(o[s+1].x-o[s].x)*e,y:o[s].y+(o[s+1].y-o[s].y)*e},typeof o[s].z<"u"&&(o[s].z=o[s].z+(o[s+1].z-o[s].z)*e);o.splice(o.length-1,1)}return o[0].t=e,o[0]},computeWithRatios:function(e,r,n,i){const a=1-e,u=n,o=r;let s=u[0],c=u[1],l=u[2],f=u[3],d;if(s*=a,c*=e,o.length===2)return d=s+c,{x:(s*o[0].x+c*o[1].x)/d,y:(s*o[0].y+c*o[1].y)/d,z:i?(s*o[0].z+c*o[1].z)/d:!1,t:e};if(s*=a,c*=2*a,l*=e*e,o.length===3)return d=s+c+l,{x:(s*o[0].x+c*o[1].x+l*o[2].x)/d,y:(s*o[0].y+c*o[1].y+l*o[2].y)/d,z:i?(s*o[0].z+c*o[1].z+l*o[2].z)/d:!1,t:e};if(s*=a,c*=1.5*a,l*=3*a,f*=e*e*e,o.length===4)return d=s+c+l+f,{x:(s*o[0].x+c*o[1].x+l*o[2].x+f*o[3].x)/d,y:(s*o[0].y+c*o[1].y+l*o[2].y+f*o[3].y)/d,z:i?(s*o[0].z+c*o[1].z+l*o[2].z+f*o[3].z)/d:!1,t:e}},derive:function(e,r){const n=[];for(let i=e,a=i.length,u=a-1;a>1;a--,u--){const o=[];for(let s=0,c;s<u;s++)c={x:u*(i[s+1].x-i[s].x),y:u*(i[s+1].y-i[s].y)},r&&(c.z=u*(i[s+1].z-i[s].z)),o.push(c);n.push(o),i=o}return n},between:function(e,r,n){return r<=e&&e<=n||J.approximately(e,r)||J.approximately(e,n)},approximately:function(e,r,n){return jn(e-r)<=(n||ow)},length:function(e){const n=J.Tvalues.length;let i=0;for(let a=0,u;a<n;a++)u=.5*J.Tvalues[a]+.5,i+=J.Cvalues[a]*J.arcfn(u,e);return .5*i},map:function(e,r,n,i,a){const u=n-r,o=a-i,s=e-r,c=s/u;return i+o*c},lerp:function(e,r,n){const i={x:r.x+e*(n.x-r.x),y:r.y+e*(n.y-r.y)};return r.z!==void 0&&n.z!==void 0&&(i.z=r.z+e*(n.z-r.z)),i},pointToString:function(e){let r=e.x+"/"+e.y;return typeof e.z<"u"&&(r+="/"+e.z),r},pointsToString:function(e){return"["+e.map(J.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,r,n){const i=r.x-e.x,a=r.y-e.y,u=n.x-e.x,o=n.y-e.y,s=i*o-a*u,c=i*u+a*o;return qn(s,c)},round:function(e,r){const n=""+e,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+r))},dist:function(e,r){const n=e.x-r.x,i=e.y-r.y;return Nr(n*n+i*i)},closest:function(e,r){let n=Tt(2,63),i,a;return e.forEach(function(u,o){a=J.dist(r,u),a<n&&(n=a,i=o)}),{mdist:n,mpos:i}},abcratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const n=Tt(e,r)+Tt(1-e,r),i=n-1;return jn(i/n)},projectionratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const n=Tt(1-e,r),i=Tt(e,r)+n;return n/i},lli8:function(e,r,n,i,a,u,o,s){const c=(e*i-r*n)*(a-o)-(e-n)*(a*s-u*o),l=(e*i-r*n)*(u-s)-(r-i)*(a*s-u*o),f=(e-n)*(u-s)-(r-i)*(a-o);return f==0?!1:{x:c/f,y:l/f}},lli4:function(e,r,n,i){const a=e.x,u=e.y,o=r.x,s=r.y,c=n.x,l=n.y,f=i.x,d=i.y;return J.lli8(a,u,o,s,c,l,f,d)},lli:function(e,r){return J.lli4(e,e.c,r,r.c)},makeline:function(e,r){return new Da(e.x,e.y,(e.x+r.x)/2,(e.y+r.y)/2,r.x,r.y)},findbbox:function(e){let r=fu,n=fu,i=du,a=du;return e.forEach(function(u){const o=u.bbox();r>o.x.min&&(r=o.x.min),n>o.y.min&&(n=o.y.min),i<o.x.max&&(i=o.x.max),a<o.y.max&&(a=o.y.max)}),{x:{min:r,mid:(r+i)/2,max:i,size:i-r},y:{min:n,mid:(n+a)/2,max:a,size:a-n}}},shapeintersections:function(e,r,n,i,a){if(!J.bboxoverlap(r,i))return[];const u=[],o=[e.startcap,e.forward,e.back,e.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return o.forEach(function(c){c.virtual||s.forEach(function(l){if(l.virtual)return;const f=c.intersects(l,a);f.length>0&&(f.c1=c,f.c2=l,f.s1=e,f.s2=n,u.push(f))})}),u},makeshape:function(e,r,n){const i=r.points.length,a=e.points.length,u=J.makeline(r.points[i-1],e.points[0]),o=J.makeline(e.points[a-1],r.points[0]),s={startcap:u,forward:e,back:r,endcap:o,bbox:J.findbbox([u,e,r,o])};return s.intersections=function(c){return J.shapeintersections(s,s.bbox,c,c.bbox,n)},s},getminmax:function(e,r,n){if(!n)return{min:0,max:0};let i=fu,a=du,u,o;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let s=0,c=n.length;s<c;s++)u=n[s],o=e.get(u),o[r]<i&&(i=o[r]),o[r]>a&&(a=o[r]);return{min:i,mid:(i+a)/2,max:a,size:a-i}},align:function(e,r){const n=r.p1.x,i=r.p1.y,a=-qn(r.p2.y-i,r.p2.x-n),u=function(o){return{x:(o.x-n)*pr(a)-(o.y-i)*dn(a),y:(o.x-n)*dn(a)+(o.y-i)*pr(a)}};return e.map(u)},roots:function(e,r){r=r||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=e.length-1,i=J.align(e,r),a=function(E){return 0<=E&&E<=1};if(n===2){const E=i[0].y,_=i[1].y,V=i[2].y,q=E-2*_+V;if(q!==0){const X=-Nr(_*_-E*V),ne=-E+_,ye=-(X+ne)/q,de=-(-X+ne)/q;return[ye,de].filter(a)}else if(_!==V&&q===0)return[(2*_-V)/(2*_-2*V)].filter(a);return[]}const u=i[0].y,o=i[1].y,s=i[2].y,c=i[3].y;let l=-u+3*o-3*s+c,f=3*u-6*o+3*s,d=-3*u+3*o,v=u;if(J.approximately(l,0)){if(J.approximately(f,0))return J.approximately(d,0)?[]:[-v/d].filter(a);const E=Nr(d*d-4*f*v),_=2*f;return[(E-d)/_,(-d-E)/_].filter(a)}f/=l,d/=l,v/=l;const g=(3*d-f*f)/3,P=g/3,L=(2*f*f*f-9*f*d+27*v)/27,B=L/2,S=B*B+P*P*P;let C,N,x,z,I;if(S<0){const E=-g/3,_=E*E*E,V=Nr(_),q=-L/(2*V),X=q<-1?-1:q>1?1:q,ne=uw(X),ye=xn(V),de=2*ye;return x=de*pr(ne/3)-f/3,z=de*pr((ne+_i)/3)-f/3,I=de*pr((ne+2*_i)/3)-f/3,[x,z,I].filter(a)}else{if(S===0)return C=B<0?xn(-B):-xn(B),x=2*C-f/3,z=-C-f/3,[x,z].filter(a);{const E=Nr(S);return C=xn(-B+E),N=xn(B+E),[C-N-f/3].filter(a)}}},droots:function(e){if(e.length===3){const r=e[0],n=e[1],i=e[2],a=r-2*n+i;if(a!==0){const u=-Nr(n*n-r*i),o=-r+n,s=-(u+o)/a,c=-(-u+o)/a;return[s,c]}else if(n!==i&&a===0)return[(2*n-i)/(2*(n-i))];return[]}if(e.length===2){const r=e[0],n=e[1];return r!==n?[r/(r-n)]:[]}return[]},curvature:function(e,r,n,i,a){let u,o,s,c,l=0,f=0;const d=J.compute(e,r),v=J.compute(e,n),g=d.x*d.x+d.y*d.y;if(i?(u=Nr(Tt(d.y*v.z-v.y*d.z,2)+Tt(d.z*v.x-v.z*d.x,2)+Tt(d.x*v.y-v.x*d.y,2)),o=Tt(g+d.z*d.z,3/2)):(u=d.x*v.y-d.y*v.x,o=Tt(g,3/2)),u===0||o===0)return{k:0,r:0};if(l=u/o,f=o/u,!a){const P=J.curvature(e-.001,r,n,i,!0).k,L=J.curvature(e+.001,r,n,i,!0).k;c=(L-l+(l-P))/2,s=(jn(L-l)+jn(l-P))/2}return{k:l,r:f,dk:c,adk:s}},inflections:function(e){if(e.length<4)return[];const r=J.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=r[2].x*r[1].y,i=r[3].x*r[1].y,a=r[1].x*r[2].y,u=r[3].x*r[2].y,o=18*(-3*n+2*i+3*a-u),s=18*(3*n-i-3*a),c=18*(a-n);if(J.approximately(o,0)){if(!J.approximately(s,0)){let v=-c/s;if(0<=v&&v<=1)return[v]}return[]}const l=2*o;if(J.approximately(l,0))return[];const f=s*s-4*o*c;if(f<0)return[];const d=Math.sqrt(f);return[(d-s)/l,-(s+d)/l].filter(function(v){return 0<=v&&v<=1})},bboxoverlap:function(e,r){const n=["x","y"],i=n.length;for(let a=0,u,o,s,c;a<i;a++)if(u=n[a],o=e[u].mid,s=r[u].mid,c=(e[u].size+r[u].size)/2,jn(o-s)>=c)return!1;return!0},expandbox:function(e,r){r.x.min<e.x.min&&(e.x.min=r.x.min),r.y.min<e.y.min&&(e.y.min=r.y.min),r.z&&r.z.min<e.z.min&&(e.z.min=r.z.min),r.x.max>e.x.max&&(e.x.max=r.x.max),r.y.max>e.y.max&&(e.y.max=r.y.max),r.z&&r.z.max>e.z.max&&(e.z.max=r.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,r,n){const i=e.bbox(),a=r.bbox(),u=1e5,o=n||.5;if(i.x.size+i.y.size<o&&a.x.size+a.y.size<o)return[(u*(e._t1+e._t2)/2|0)/u+"/"+(u*(r._t1+r._t2)/2|0)/u];let s=e.split(.5),c=r.split(.5),l=[{left:s.left,right:c.left},{left:s.left,right:c.right},{left:s.right,right:c.right},{left:s.right,right:c.left}];l=l.filter(function(d){return J.bboxoverlap(d.left.bbox(),d.right.bbox())});let f=[];return l.length===0||(l.forEach(function(d){f=f.concat(J.pairiteration(d.left,d.right,o))}),f=f.filter(function(d,v){return f.indexOf(d)===v})),f},getccenter:function(e,r,n){const i=r.x-e.x,a=r.y-e.y,u=n.x-r.x,o=n.y-r.y,s=i*pr(Br)-a*dn(Br),c=i*dn(Br)+a*pr(Br),l=u*pr(Br)-o*dn(Br),f=u*dn(Br)+o*pr(Br),d=(e.x+r.x)/2,v=(e.y+r.y)/2,g=(r.x+n.x)/2,P=(r.y+n.y)/2,L=d+s,B=v+c,S=g+l,C=P+f,N=J.lli8(d,v,L,B,g,P,S,C),x=J.dist(N,e);let z=qn(e.y-N.y,e.x-N.x),I=qn(r.y-N.y,r.x-N.x),E=qn(n.y-N.y,n.x-N.x),_;return z<E?((z>I||I>E)&&(z+=_i),z>E&&(_=E,E=z,z=_)):E<I&&I<z?(_=E,E=z,z=_):E+=_i,N.s=z,N.e=E,N.r=x,N},numberSort:function(e,r){return e-r}},hu=class Rf{constructor(r){this.curves=[],this._3d=!1,r&&(this.curves=r,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(r){return J.pointsToString(r.points)}).join(", ")+"]"}addCurve(r){this.curves.push(r),this._3d=this._3d||r._3d}length(){return this.curves.map(function(r){return r.length()}).reduce(function(r,n){return r+n})}curve(r){return this.curves[r]}bbox(){const r=this.curves;for(var n=r[0].bbox(),i=1;i<r.length;i++)J.expandbox(n,r[i].bbox());return n}offset(r){const n=[];return this.curves.forEach(function(i){n.push(...i.offset(r))}),new Rf(n)}},{abs:Un,min:ic,max:ac,cos:cw,sin:lw,acos:fw,sqrt:Vn}=Math,dw=Math.PI,Da=class Te{constructor(r){let n=r&&r.forEach?r:Array.from(arguments).slice(),i=!1;if(typeof n[0]=="object"){i=n.length;const g=[];n.forEach(function(P){["x","y","z"].forEach(function(L){typeof P[L]<"u"&&g.push(P[L])})}),n=g}let a=!1;const u=n.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(u!==6&&u!==8&&u!==9&&u!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!a&&(u===9||u===12)||r&&r[0]&&typeof r[0].z<"u",s=this.points=[];for(let g=0,P=o?3:2;g<u;g+=P){var c={x:n[g],y:n[g+1]};o&&(c.z=n[g+2]),s.push(c)}const l=this.order=s.length-1,f=this.dims=["x","y"];o&&f.push("z"),this.dimlen=f.length;const d=J.align(s,{p1:s[0],p2:s[l]}),v=J.dist(s[0],s[l]);this._linear=d.reduce((g,P)=>g+Un(P.y),0)<v/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(r,n,i,a){if(typeof a>"u"&&(a=.5),a===0)return new Te(n,n,i);if(a===1)return new Te(r,n,n);const u=Te.getABC(2,r,n,i,a);return new Te(r,u.A,i)}static cubicFromPoints(r,n,i,a,u){typeof a>"u"&&(a=.5);const o=Te.getABC(3,r,n,i,a);typeof u>"u"&&(u=J.dist(n,o.C));const s=u*(1-a)/a,c=J.dist(r,i),l=(i.x-r.x)/c,f=(i.y-r.y)/c,d=u*l,v=u*f,g=s*l,P=s*f,L={x:n.x-d,y:n.y-v},B={x:n.x+g,y:n.y+P},S=o.A,C={x:S.x+(L.x-S.x)/(1-a),y:S.y+(L.y-S.y)/(1-a)},N={x:S.x+(B.x-S.x)/a,y:S.y+(B.y-S.y)/a},x={x:r.x+(C.x-r.x)/a,y:r.y+(C.y-r.y)/a},z={x:i.x+(N.x-i.x)/(1-a),y:i.y+(N.y-i.y)/(1-a)};return new Te(r,x,z,i)}static getUtils(){return J}getUtils(){return Te.getUtils()}static get PolyBezier(){return hu}valueOf(){return this.toString()}toString(){return J.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const r=this.points,n=r[0].x,i=r[0].y,a=["M",n,i,this.order===2?"Q":"C"];for(let u=1,o=r.length;u<o;u++)a.push(r[u].x),a.push(r[u].y);return a.join(" ")}setRatios(r){if(r.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=r,this._lut=[]}verify(){const r=this.coordDigest();r!==this._print&&(this._print=r,this.update())}coordDigest(){return this.points.map(function(r,n){return""+n+r.x+r.y+(r.z?r.z:0)}).join("")}update(){this._lut=[],this.dpoints=J.derive(this.points,this._3d),this.computedirection()}computedirection(){const r=this.points,n=J.angle(r[0],r[this.order],r[1]);this.clockwise=n>0}length(){return J.length(this.derivative.bind(this))}static getABC(r=2,n,i,a,u=.5){const o=J.projectionratio(u,r),s=1-o,c={x:o*n.x+s*a.x,y:o*n.y+s*a.y},l=J.abcratio(u,r);return{A:{x:i.x+(i.x-c.x)/l,y:i.y+(i.y-c.y)/l},B:i,C:c,S:n,E:a}}getABC(r,n){n=n||this.get(r);let i=this.points[0],a=this.points[this.order];return Te.getABC(this.order,i,n,a,r)}getLUT(r){if(this.verify(),r=r||100,this._lut.length===r+1)return this._lut;this._lut=[],r++,this._lut=[];for(let n=0,i,a;n<r;n++)a=n/(r-1),i=this.compute(a),i.t=a,this._lut.push(i);return this._lut}on(r,n){n=n||5;const i=this.getLUT(),a=[];for(let u=0,o,s=0;u<i.length;u++)o=i[u],J.dist(o,r)<n&&(a.push(o),s+=u/i.length);return a.length?t/=a.length:!1}project(r){const n=this.getLUT(),i=n.length-1,a=J.closest(n,r),u=a.mpos,o=(u-1)/i,s=(u+1)/i,c=.1/i;let l=a.mdist,f=o,d=f,v;l+=1;for(let g;f<s+c;f+=c)v=this.compute(f),g=J.dist(r,v),g<l&&(l=g,d=f);return d=d<0?0:d>1?1:d,v=this.compute(d),v.t=d,v.d=l,v}get(r){return this.compute(r)}point(r){return this.points[r]}compute(r){return this.ratios?J.computeWithRatios(r,this.points,this.ratios,this._3d):J.compute(r,this.points,this._3d,this.ratios)}raise(){const r=this.points,n=[r[0]],i=r.length;for(let a=1,u,o;a<i;a++)u=r[a],o=r[a-1],n[a]={x:(i-a)/i*u.x+a/i*o.x,y:(i-a)/i*u.y+a/i*o.y};return n[i]=r[i-1],new Te(n)}derivative(r){return J.compute(r,this.dpoints[0],this._3d)}dderivative(r){return J.compute(r,this.dpoints[1],this._3d)}align(){let r=this.points;return new Te(J.align(r,{p1:r[0],p2:r[r.length-1]}))}curvature(r){return J.curvature(r,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return J.inflections(this.points)}normal(r){return this._3d?this.__normal3(r):this.__normal2(r)}__normal2(r){const n=this.derivative(r),i=Vn(n.x*n.x+n.y*n.y);return{t:r,x:-n.y/i,y:n.x/i}}__normal3(r){const n=this.derivative(r),i=this.derivative(r+.01),a=Vn(n.x*n.x+n.y*n.y+n.z*n.z),u=Vn(i.x*i.x+i.y*i.y+i.z*i.z);n.x/=a,n.y/=a,n.z/=a,i.x/=u,i.y/=u,i.z/=u;const o={x:i.y*n.z-i.z*n.y,y:i.z*n.x-i.x*n.z,z:i.x*n.y-i.y*n.x},s=Vn(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=s,o.y/=s,o.z/=s;const c=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:r,x:c[0]*n.x+c[1]*n.y+c[2]*n.z,y:c[3]*n.x+c[4]*n.y+c[5]*n.z,z:c[6]*n.x+c[7]*n.y+c[8]*n.z}}hull(r){let n=this.points,i=[],a=[],u=0;for(a[u++]=n[0],a[u++]=n[1],a[u++]=n[2],this.order===3&&(a[u++]=n[3]);n.length>1;){i=[];for(let o=0,s,c=n.length-1;o<c;o++)s=J.lerp(r,n[o],n[o+1]),a[u++]=s,i.push(s);n=i}return a}split(r,n){if(r===0&&!!n)return this.split(n).left;if(n===1)return this.split(r).right;const i=this.hull(r),a={left:this.order===2?new Te([i[0],i[3],i[5]]):new Te([i[0],i[4],i[7],i[9]]),right:this.order===2?new Te([i[5],i[4],i[2]]):new Te([i[9],i[8],i[6],i[3]]),span:i};return a.left._t1=J.map(0,0,1,this._t1,this._t2),a.left._t2=J.map(r,0,1,this._t1,this._t2),a.right._t1=J.map(r,0,1,this._t1,this._t2),a.right._t2=J.map(1,0,1,this._t1,this._t2),n?(n=J.map(n,r,1,0,1),a.right.split(n).left):a}extrema(){const r={};let n=[];return this.dims.forEach(function(i){let a=function(o){return o[i]},u=this.dpoints[0].map(a);r[i]=J.droots(u),this.order===3&&(u=this.dpoints[1].map(a),r[i]=r[i].concat(J.droots(u))),r[i]=r[i].filter(function(o){return o>=0&&o<=1}),n=n.concat(r[i].sort(J.numberSort))}.bind(this)),r.values=n.sort(J.numberSort).filter(function(i,a){return n.indexOf(i)===a}),r}bbox(){const r=this.extrema(),n={};return this.dims.forEach(function(i){n[i]=J.getminmax(this,i,r[i])}.bind(this)),n}overlaps(r){const n=this.bbox(),i=r.bbox();return J.bboxoverlap(n,i)}offset(r,n){if(typeof n<"u"){const i=this.get(r),a=this.normal(r),u={c:i,n:a,x:i.x+a.x*n,y:i.y+a.y*n};return this._3d&&(u.z=i.z+a.z*n),u}if(this._linear){const i=this.normal(0),a=this.points.map(function(u){const o={x:u.x+r*i.x,y:u.y+r*i.y};return u.z&&i.z&&(o.z=u.z+r*i.z),o});return[new Te(a)]}return this.reduce().map(function(i){return i._linear?i.offset(r)[0]:i.scale(r)})}simple(){if(this.order===3){const a=J.angle(this.points[0],this.points[3],this.points[1]),u=J.angle(this.points[0],this.points[3],this.points[2]);if(a>0&&u<0||a<0&&u>0)return!1}const r=this.normal(0),n=this.normal(1);let i=r.x*n.x+r.y*n.y;return this._3d&&(i+=r.z*n.z),Un(fw(i))<dw/3}reduce(){let r,n=0,i=0,a=.01,u,o=[],s=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),n=c[0],r=1;r<c.length;r++)i=c[r],u=this.split(n,i),u._t1=n,u._t2=i,o.push(u),n=i;return o.forEach(function(l){for(n=0,i=0;i<=1;)for(i=n+a;i<=1+a;i+=a)if(u=l.split(n,i),!u.simple()){if(i-=a,Un(n-i)<a)return[];u=l.split(n,i),u._t1=J.map(n,0,1,l._t1,l._t2),u._t2=J.map(i,0,1,l._t1,l._t2),s.push(u),n=i;break}n<1&&(u=l.split(n,1),u._t1=J.map(n,0,1,l._t1,l._t2),u._t2=l._t2,s.push(u))}),s}translate(r,n,i){i=typeof i=="number"?i:n;const a=this.order;let u=this.points.map((o,s)=>(1-s/a)*n+s/a*i);return new Te(this.points.map((o,s)=>({x:o.x+r.x*u[s],y:o.y+r.y*u[s]})))}scale(r){const n=this.order;let i=!1;if(typeof r=="function"&&(i=r),i&&n===2)return this.raise().scale(i);const a=this.clockwise,u=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):r,i?i(1):r);const o=i?i(0):r,s=i?i(1):r,c=[this.offset(0,10),this.offset(1,10)],l=[],f=J.lli4(c[0],c[0].c,c[1],c[1].c);if(!f)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(d){const v=l[d*n]=J.copy(u[d*n]);v.x+=(d?s:o)*c[d].n.x,v.y+=(d?s:o)*c[d].n.y}),i?([0,1].forEach(function(d){if(!(n===2&&!!d)){var v=u[d+1],g={x:v.x-f.x,y:v.y-f.y},P=i?i((d+1)/n):r;i&&!a&&(P=-P);var L=Vn(g.x*g.x+g.y*g.y);g.x/=L,g.y/=L,l[d+1]={x:v.x+P*g.x,y:v.y+P*g.y}}}),new Te(l)):([0,1].forEach(d=>{if(n===2&&!!d)return;const v=l[d*n],g=this.derivative(d),P={x:v.x+g.x,y:v.y+g.y};l[d+1]=J.lli4(v,P,f,u[d+1])}),new Te(l))}outline(r,n,i,a){if(n=n===void 0?r:n,this._linear){const z=this.normal(0),I=this.points[0],E=this.points[this.points.length-1];let _,V,q;i===void 0&&(i=r,a=n),_={x:I.x+z.x*r,y:I.y+z.y*r},q={x:E.x+z.x*i,y:E.y+z.y*i},V={x:(_.x+q.x)/2,y:(_.y+q.y)/2};const X=[_,V,q];_={x:I.x-z.x*n,y:I.y-z.y*n},q={x:E.x-z.x*a,y:E.y-z.y*a},V={x:(_.x+q.x)/2,y:(_.y+q.y)/2};const ne=[q,V,_],ye=J.makeline(ne[2],X[0]),de=J.makeline(X[2],ne[0]),je=[ye,new Te(X),de,new Te(ne)];return new hu(je)}const u=this.reduce(),o=u.length,s=[];let c=[],l,f=0,d=this.length();const v=typeof i<"u"&&typeof a<"u";function g(z,I,E,_,V){return function(q){const X=_/E,ne=(_+V)/E,ye=I-z;return J.map(q,0,1,z+X*ye,z+ne*ye)}}u.forEach(function(z){const I=z.length();v?(s.push(z.scale(g(r,i,d,f,I))),c.push(z.scale(g(-n,-a,d,f,I)))):(s.push(z.scale(r)),c.push(z.scale(-n))),f+=I}),c=c.map(function(z){return l=z.points,l[3]?z.points=[l[3],l[2],l[1],l[0]]:z.points=[l[2],l[1],l[0]],z}).reverse();const P=s[0].points[0],L=s[o-1].points[s[o-1].points.length-1],B=c[o-1].points[c[o-1].points.length-1],S=c[0].points[0],C=J.makeline(B,P),N=J.makeline(L,S),x=[C].concat(s).concat([N]).concat(c);return new hu(x)}outlineshapes(r,n,i){n=n||r;const a=this.outline(r,n).curves,u=[];for(let o=1,s=a.length;o<s/2;o++){const c=J.makeshape(a[o],a[s-o],i);c.startcap.virtual=o>1,c.endcap.virtual=o<s/2-1,u.push(c)}return u}intersects(r,n){return r?r.p1&&r.p2?this.lineIntersects(r):(r instanceof Te&&(r=r.reduce()),this.curveintersects(this.reduce(),r,n)):this.selfintersects(n)}lineIntersects(r){const n=ic(r.p1.x,r.p2.x),i=ic(r.p1.y,r.p2.y),a=ac(r.p1.x,r.p2.x),u=ac(r.p1.y,r.p2.y);return J.roots(this.points,r).filter(o=>{var s=this.get(o);return J.between(s.x,n,a)&&J.between(s.y,i,u)})}selfintersects(r){const n=this.reduce(),i=n.length-2,a=[];for(let u=0,o,s,c;u<i;u++)s=n.slice(u,u+1),c=n.slice(u+2),o=this.curveintersects(s,c,r),a.push(...o);return a}curveintersects(r,n,i){const a=[];r.forEach(function(o){n.forEach(function(s){o.overlaps(s)&&a.push({left:o,right:s})})});let u=[];return a.forEach(function(o){const s=J.pairiteration(o.left,o.right,i);s.length>0&&(u=u.concat(s))}),u}arcs(r){return r=r||.5,this._iterate(r,[])}_error(r,n,i,a){const u=(a-i)/4,o=this.get(i+u),s=this.get(a-u),c=J.dist(r,n),l=J.dist(r,o),f=J.dist(r,s);return Un(l-c)+Un(f-c)}_iterate(r,n){let i=0,a=1,u;do{u=0,a=1;let o=this.get(i),s,c,l,f,d=!1,v=!1,g,P=a,L=1;do if(v=d,f=l,P=(i+a)/2,s=this.get(P),c=this.get(a),l=J.getccenter(o,s,c),l.interval={start:i,end:a},d=this._error(l,o,i,a)<=r,g=v&&!d,g||(L=a),d){if(a>=1){if(l.interval.end=L=1,f=l,a>1){let S={x:l.x+l.r*cw(l.e),y:l.y+l.r*lw(l.e)};l.e+=J.angle({x:l.x,y:l.y},S,this.get(1))}break}a=a+(a-i)/2}else a=P;while(!g&&u++<100);if(u>=100)break;f=f||l,n.push(f),i=L}while(a<1);return n}},Aa=e=>e.quadratic!==void 0,_o=e=>e.cubic1!==void 0&&e.cubic2!==void 0,hw=(e,r,n=0)=>pn(e,r,n),pn=(e,r,n=0)=>{if(isNaN(n))throw Error("bend is NaN");if(n<-1||n>1)throw Error("Expects bend range of -1 to 1");const i=Ze.interpolate(.5,e,r);let a=i;r.y<e.y?a=n>0?{x:Math.min(e.x,r.x),y:Math.min(e.y,r.y)}:{x:Math.max(e.x,r.x),y:Math.max(e.y,r.y)}:a=n>0?{x:Math.max(e.x,r.x),y:Math.min(e.y,r.y)}:{x:Math.min(e.x,r.x),y:Math.max(e.y,r.y)};const u=Ze.interpolate(Math.abs(n),i,a);return Bf(e,r,u)},vw=(e,r,n,i)=>{const a=pn(e,r,n);return new Da(a.a,a.quadratic,a.b).compute(i)},Nf=(e,r,n)=>[`M ${e.x} ${e.y} Q ${n.x} ${n.y} ${r.x} ${r.y}`],Wi=e=>{if(_o(e))return mw(e);if(Aa(e))return gw(e);throw new Error("Unknown bezier type")},yw=(e,r,n,i)=>({a:Object.freeze(e),b:Object.freeze(r),cubic1:Object.freeze(n),cubic2:Object.freeze(i)}),mw=e=>{const{a:r,cubic1:n,cubic2:i,b:a}=e,u=new Da(r,n,i,a);return Object.freeze({...e,length:()=>u.length(),interpolate:o=>u.compute(o),nearest:o=>{throw new Error("not implemented")},bbox:()=>{const{x:o,y:s}=u.bbox(),c=o.size,l=s.size;if(c===void 0)throw new Error("x.size not present on calculated bbox");if(l===void 0)throw new Error("x.size not present on calculated bbox");return me.fromTopLeft({x:o.min,y:s.min},c,l)},toString:()=>u.toString(),toSvgString:()=>["brrup"],kind:"bezier/cubic"})},Bf=(e,r,n)=>({a:Object.freeze(e),b:Object.freeze(r),quadratic:Object.freeze(n)}),gw=e=>{const{a:r,b:n,quadratic:i}=e,a=new Da(r,i,n);return Object.freeze({...e,length:()=>a.length(),interpolate:u=>a.compute(u),nearest:u=>{throw new Error("not implemented")},bbox:()=>{const{x:u,y:o}=a.bbox(),s=u.size,c=o.size;if(s===void 0)throw new Error("x.size not present on calculated bbox");if(c===void 0)throw new Error("x.size not present on calculated bbox");return me.fromTopLeft({x:u.min,y:o.min},s,c)},toString:()=>a.toString(),toSvgString:()=>Nf(r,n,i),kind:"bezier/quadratic"})},Rt={};G(Rt,{area:()=>$w,bbox:()=>Hf,center:()=>Lw,circumference:()=>Vf,distanceCenter:()=>Po,distanceFromExterior:()=>Uw,interpolate:()=>xf,intersectionLine:()=>Hw,intersections:()=>Jf,isCircle:()=>mi,isCirclePositioned:()=>Ca,isContainedBy:()=>Gf,isEqual:()=>Yf,isIntersecting:()=>Kf,isNaN:()=>jw,isPositioned:()=>ct,length:()=>Uf,multiplyScalar:()=>xw,nearest:()=>Zf,point:()=>qf,randomPoint:()=>qw,toPath:()=>Vw,toPositioned:()=>Ro,toSvg:()=>Xf});var me={};G(me,{area:()=>zw,cardinal:()=>Ki,center:()=>Lf,clamp:()=>Tf,corners:()=>Io,distanceFromCenter:()=>Mw,distanceFromExterior:()=>Fw,edges:()=>$f,empty:()=>kf,emptyPositioned:()=>zf,fromCenter:()=>Sw,fromElement:()=>ww,fromNumbers:()=>bw,fromTopLeft:()=>Iw,getEdgeX:()=>$u,getEdgeY:()=>ju,guard:()=>cr,intersectsPoint:()=>Zn,isEmpty:()=>pw,isEqual:()=>Dw,isEqualSize:()=>Of,isIntersecting:()=>Ow,isPlaceholder:()=>wn,isPositioned:()=>It,isRect:()=>kr,isRectPositioned:()=>Gi,lengths:()=>Bw,maxFromCorners:()=>_w,multiply:()=>Rw,multiplyScalar:()=>Nw,normaliseByRect:()=>Pw,perimeter:()=>kw,placeholder:()=>Hi,placeholderPositioned:()=>Yn,random:()=>Tw,randomPoint:()=>Ww,subtract:()=>Aw,sum:()=>Cw,toArray:()=>Ew});var kf=Object.freeze({width:0,height:0}),zf=Object.freeze({x:0,y:0,width:0,height:0}),Hi=Object.freeze({width:Number.NaN,height:Number.NaN}),Yn=Object.freeze({x:Number.NaN,y:Number.NaN,width:Number.NaN,height:Number.NaN}),pw=e=>e.width===0&&e.height===0,wn=e=>Number.isNaN(e.width)&&Number.isNaN(e.height),It=e=>e.x!==void 0&&e.y!==void 0,kr=e=>!(e===void 0||e.width===void 0||e.height===void 0),Gi=e=>kr(e)&&It(e),ww=e=>({width:e.clientWidth,height:e.clientHeight}),Of=(e,r)=>{if(e===void 0)throw new Error("a undefined");if(r===void 0)throw new Error("b undefined");return e.width===r.width&&e.height===r.height};function bw(e,r,n,i){if(n===void 0||i===void 0){if(typeof e!="number")throw new Error("width is not an number");if(typeof r!="number")throw new TypeError("height is not an number");return Object.freeze({width:e,height:r})}if(typeof e!="number")throw new Error("x is not an number");if(typeof r!="number")throw new Error("y is not an number");if(typeof n!="number")throw new Error("width is not an number");if(typeof i!="number")throw new Error("height is not an number");return Object.freeze({x:e,y:r,width:n,height:i})}function Ew(e){if(It(e))return[e.x,e.y,e.width,e.height];if(kr(e))return[e.width,e.height];throw new Error(`rect param is not a rectangle. Got: ${JSON.stringify(e)}`)}var Dw=(e,r)=>It(e)&&It(r)?W.isEqual(e,r)?e.width===r.width&&e.height===r.height:!1:!It(e)&&!It(r)?e.width===r.width&&e.height===r.height:!1;function Aw(e,r,n){if(e===void 0)throw new Error("First parameter undefined");if(typeof r=="number"){const i=n??0;return Object.freeze({...e,width:e.width-r,height:e.height-i})}else return Object.freeze({...e,width:e.width-r.width,height:e.height-r.height})}function Cw(e,r,n){if(e===void 0)throw new Error("First parameter undefined");if(typeof r=="number"){const i=n??0;return Object.freeze({...e,width:e.width+r,height:e.height+i})}else return Object.freeze({...e,width:e.width+r.width,height:e.height+r.height})}function Zn(e,r,n){cr(e,"rect");let i=0,a=0;if(typeof r=="number"){if(n===void 0)throw new Error("x and y coordinate needed");i=r,a=n}else i=r.x,a=r.y;if(It(e)){if(i-e.x>e.width||i<e.x||a-e.y>e.height||a<e.y)return!1}else if(i>e.width||i<0||a>e.height||a<0)return!1;return!0}var Sw=(e,r,n)=>{W.guard(e,"origin"),_n(r,"width"),_n(n,"height");const i=r/2,a=n/2;return{x:e.x-i,y:e.y-a,width:r,height:n}},Fw=(e,r)=>{if(Wf(e,"rect"),W.guard(r,"pt"),Zn(e,r))return 0;const n=Math.max(e.x-r.x,0,r.x-e.x+e.width),i=Math.max(e.y-r.y,0,r.y-e.y+e.height);return Math.hypot(n,i)},Mw=(e,r)=>W.distance(Lf(e),r),_w=(e,r,n,i)=>{if(e.y>n.y)throw new Error("topLeft.y greater than bottomRight.y");if(e.y>i.y)throw new Error("topLeft.y greater than bottomLeft.y");const a=r.x-e.x,u=n.x-i.x,o=Math.abs(i.y-e.y),s=Math.abs(n.y-r.y);return{x:Math.min(e.x,i.x),y:Math.min(r.y,e.y),width:Math.max(a,u),height:Math.max(o,s)}},_n=(e,r="Dimension")=>{if(e===void 0)throw new Error(`${r} is undefined`);if(Number.isNaN(e))throw new Error(`${r} is NaN`);if(e<0)throw new Error(`${r} cannot be negative`)},cr=(e,r="rect")=>{if(e===void 0)throw new Error("{$name} undefined");It(e)&&W.guard(e,r),_n(e.width,r+".width"),_n(e.height,r+".height")},Tf=(e,r)=>Object.freeze({...e,width:Math.min(e.width,r.width),height:Math.min(e.height,r.height)}),Wf=(e,r="rect")=>{if(!It(e))throw new Error(`Expected ${r} to have x,y`);cr(e,r)},Iw=(e,r,n)=>(_n(r,"width"),_n(n,"height"),W.guard(e,"origin"),{x:e.x,y:e.y,width:r,height:n}),Io=(e,r)=>{if(cr(e),r===void 0&&W.isPoint(e))r=e;else if(r===void 0)throw new Error("Unpositioned rect needs origin param");return[{x:r.x,y:r.y},{x:r.x+e.width,y:r.y},{x:r.x+e.width,y:r.y+e.height},{x:r.x,y:r.y+e.height}]},Ki=(e,r)=>{const{x:n,y:i,width:a,height:u}=e;switch(r){case"nw":return Object.freeze({x:n,y:i});case"n":return Object.freeze({x:n+a/2,y:i});case"ne":return Object.freeze({x:n+a,y:i});case"sw":return Object.freeze({x:n,y:i+u});case"s":return Object.freeze({x:n+a/2,y:i+u});case"se":return Object.freeze({x:n+a,y:i+u});case"w":return Object.freeze({x:n,y:i+u/2});case"e":return Object.freeze({x:n+a,y:i+u/2});case"center":return Object.freeze({x:n+a/2,y:i+u/2});default:throw new Error(`Unknown direction: ${r}`)}},$u=(e,r)=>{switch(cr(e),r){case"top":return W.isPoint(e)?e.x:0;case"bottom":return W.isPoint(e)?e.x:0;case"left":return W.isPoint(e)?e.y:0;case"right":return W.isPoint(e)?e.x+e.width:e.width}},ju=(e,r)=>{switch(cr(e),r){case"top":return W.isPoint(e)?e.y:0;case"bottom":return W.isPoint(e)?e.y+e.height:e.height;case"left":return W.isPoint(e)?e.y:0;case"right":return W.isPoint(e)?e.y:0}},Pw=(e,r,n)=>{let i;if(n===void 0)if(kr(r))n=r.height,i=r.width;else throw new Error("Expects rectangle or width and height parameters for normaliseBy");else if(typeof r=="number")i=r;else throw new TypeError("Expects rectangle or width and height parameters for normaliseBy");return It(e)?Object.freeze({x:e.x/i,y:e.y/n,width:e.width/i,height:e.height/n}):Object.freeze({width:e.width/i,height:e.height/n})};function Rw(e,r,n){if(cr(e,"a"),kr(r))return Gi(e)?Object.freeze({...e,x:e.x*r.width,y:e.y*r.height,width:e.width*r.width,height:e.height*r.height}):Object.freeze({...e,width:e.width*r.width,height:e.height*r.height});if(typeof r!="number")throw new TypeError(`Expected second parameter of type Rect or number. Got ${JSON.stringify(r)}`);return n===void 0&&(n=r),Gi(e)?Object.freeze({...e,x:e.x*r,y:e.y*n,width:e.width*r,height:e.height*n}):Object.freeze({...e,width:e.width*r,height:e.height*n})}function Nw(e,r){return It(e)?Object.freeze({...e,x:e.x*r,y:e.y*r,width:e.width*r,height:e.height*r}):Object.freeze({...e,width:e.width*r,height:e.height*r})}var Lf=(e,r)=>(cr(e),r===void 0&&W.isPoint(e)?r=e:r===void 0&&(r={x:0,y:0}),Object.freeze({x:r.x+e.width/2,y:r.y+e.height/2})),Bw=e=>(Wf(e,"rect"),$f(e).map(r=>Ze.length(r))),$f=(e,r)=>{const n=Io(e,r);return Ze.joinPointsToLines(...n,n[0])},kw=e=>(cr(e),e.height+e.height+e.width+e.width),zw=e=>(cr(e),e.height*e.width),Ow=(e,r)=>{if(!Gi(e))throw new Error("a parameter should be RectPositioned");if(Ca(r))return jf(r,e);if(W.isPoint(r))return Zn(e,r);throw new Error(`Unknown shape for b: ${JSON.stringify(r)}`)},Tw=e=>(e===void 0&&(e=tt),Object.freeze({x:e(),y:e(),width:e(),height:e()})),Ww=(e,r={})=>{const n=r.randomSource??tt,i=r.margin??{x:0,y:0},a=n()*(e.width-i.x-i.x),u=n()*(e.height-i.y-i.y),o={x:a+i.x,y:u+i.y};return It(e)?W.sum(o,e):Object.freeze(o)},jf=(e,r)=>{const n=e.x-Math.max(r.x,Math.min(e.x,r.x+r.width)),i=e.y-Math.max(r.y,Math.min(e.y,r.y+r.height));return n*n+i*i<e.radius*e.radius},uc=(e,r)=>Jf(e,r).length===2,Ji=Math.PI*2,ct=e=>e.x!==void 0&&e.y!==void 0,mi=e=>e.radius!==void 0,Ca=e=>mi(e)&&ct(e),qf=(e,r,n)=>(n===void 0&&(ct(e)?n=e:n={x:0,y:0}),{x:Math.cos(-r)*e.radius+n.x,y:Math.sin(-r)*e.radius+n.y}),Sa=(e,r="circle")=>{if(ct(e)&&pe(e,"circle"),Number.isNaN(e.radius))throw new Error(`${r}.radius is NaN`);if(e.radius<=0)throw new Error(`${r}.radius must be greater than zero`)},qu=(e,r="circle")=>{if(!ct(e))throw new Error("Expected a positioned circle with x,y");return Sa(e,r)},Lw=e=>ct(e)?Object.freeze({x:e.x,y:e.y}):Object.freeze({x:e.radius,y:e.radius}),xf=(e,r)=>qf(e,r*Ji),Uf=e=>Vf(e),Vf=e=>(Sa(e),Ji*e.radius),$w=e=>(Sa(e),Math.PI*e.radius*e.radius),Hf=e=>ct(e)?me.fromCenter(e,e.radius*2,e.radius*2):{width:e.radius*2,height:e.radius*2},Gf=(e,r,n)=>{const i=Po(e,r);if(mi(r))return i<Math.abs(e.radius-r.radius);if(W.isPoint(r))return n!==void 0?i<Math.abs(e.radius-n):i<=e.radius;throw new Error("b parameter is expected to be CirclePositioned or Point")},jw=e=>!!(Number.isNaN(e.radius)||ct(e)&&(Number.isNaN(e.x)||Number.isNaN(e.y))),Kf=(e,r,n)=>W.isEqual(e,r)||Gf(e,r,n)?!0:mi(r)?uc(e,r):me.isRectPositioned(r)?jf(e,r):W.isPoint(r)&&n!==void 0?uc(e,{...r,radius:n}):!1,Jf=(e,r)=>{const n=W.subtract(r,e),i=Math.sqrt(n.y*n.y+n.x*n.x);if(i>e.radius+r.radius)return[];if(i<Math.abs(e.radius-r.radius))return[];if(Yf(e,r))return[];const a=(e.radius*e.radius-r.radius*r.radius+i*i)/(2*i),u={x:e.x+n.x*a/i,y:e.y+n.y*a/i},o=Math.sqrt(e.radius*e.radius-a*a),s={x:-n.y*(o/i),y:n.x*(o/i)};return[W.sum(u,s),W.subtract(u,s)]},Yf=(e,r)=>e.radius!==r.radius?!1:ct(e)&&ct(r)?!(e.x!==r.x||e.y!==r.y||e.z!==r.z):(!ct(e)&&!ct(r),!1),qw=(e,r={})=>{const n=ct(e)?e:{x:0,y:0},i=r.strategy??"uniform",a=r.randomSource??tt;switch(i){case"naive":return W.sum(n,Ye.toCartesian(a()*e.radius,a()*Ji));case"uniform":return W.sum(n,Ye.toCartesian(Math.sqrt(a())*e.radius,a()*Ji));default:throw new Error(`Unknown strategy ${i}`)}};function xw(e,r){if(ct(e)){const n=W.multiplyScalar(e,r);return Object.freeze({...e,...n,radius:e.radius*r})}else return Object.freeze({...e,radius:e.radius*r})}var Po=(e,r)=>(qu(e,"a"),Ca(r)&&qu(r,"b"),W.distance(e,r)),Uw=(e,r)=>{if(qu(e,"a"),Ca(r))return Math.max(0,Po(e,r)-e.radius-r.radius);if(W.isPoint(r)){const n=W.distance(e,r);return n<e.radius?0:n}else throw new Error("Second parameter invalid type")},Xf=(e,r,n)=>{if(mi(e)){if(n!==void 0)return vu(e.radius,n,r);if(ct(e))return vu(e.radius,e,r);throw new Error("origin parameter needed for non-positioned circle")}else{if(n!==void 0)return vu(e,n,r);throw new Error("origin parameter needed")}},vu=(e,r,n)=>{const{x:i,y:a}=r,u=n?"1":"0";return`
    M ${i}, ${a}
    m -${e}, 0
    a ${e},${e} 0 1,${u} ${e*2},0
    a ${e},${e} 0 1,${u} -${e*2},0
  `.split(`
`)},Zf=(e,r)=>{const n=i=>{const a=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),u=i.x+i.radius*((r.x-i.x)/a),o=i.y+i.radius*((r.y-i.y)/a);return{x:u,y:o}};if(Array.isArray(e)){const i=e.map(u=>n(u)),a=i.map(u=>W.distance(u,r));return Object.freeze(i[$t.minIndex(...a)])}else return Object.freeze(n(e))},Ro=(e,r,n)=>{if(ct(e))return e;const i=W.getPointParameter(r,n);return Object.freeze({...e,...i})},Vw=e=>(Sa(e),Object.freeze({...e,nearest:r=>Zf(e,r),interpolate:r=>xf(e,r),bbox:()=>Hf(e),length:()=>Uf(e),toSvgString:(r=!0)=>Xf(e,r),kind:"circular"})),Hw=(e,r)=>{const n={x:r.b.x-r.a.x,y:r.b.y-r.a.y},i={x:r.a.x-e.x,y:r.a.y-e.y},a=(n.x*i.x+n.y*i.y)*-2,u=2*(n.x*n.x+n.y*n.y),o=Math.sqrt(a*a-2*u*(i.x*i.x+i.y*i.y-e.radius*e.radius));if(Number.isNaN(o))return[];const s=(a-o)/u,c=(a+o)/u,l=[];return s<=1&&s>=0&&l.push({x:r.a.x+n.x*s,y:r.a.y+n.y*s}),c<=1&&c>=0&&l.push({x:r.a.x+n.x*c,y:r.a.y+n.y*c}),l},No={};G(No,{bbox:()=>ed,computeDimensions:()=>Bo,fromPaths:()=>id,guardContinuous:()=>rd,interpolate:()=>Qf,setSegment:()=>Gw,toString:()=>td,toSvgString:()=>nd});var Gw=(e,r,n)=>{const i=[...e.segments];return i[r]=n,id(...i)},Qf=(e,r,n,i)=>{i===void 0&&(i=Bo(e));const a=r*(n?i.totalWidth:i.totalLength);let u=0;const o=n?i.widths:i.lengths;for(let s=0;s<o.length;s++)if(u+o[s]>=a){let l=(a-u)/o[s];return l>1&&(l=1),e[s].interpolate(l)}else u+=o[s];return{x:0,y:0}},Bo=e=>{const r=e.map(u=>u.bbox().width),n=e.map(u=>u.length());let i=0,a=0;for(let u=0;u<n.length;u++)i+=n[u];for(let u=0;u<r.length;u++)a+=r[u];return{totalLength:i,totalWidth:a,widths:r,lengths:n}},ed=e=>{const n=e.map(i=>i.bbox()).map(i=>me.corners(i)).flat();return W.bbox(...n)},td=e=>e.map(r=>r.toString()).join(", "),rd=e=>{let r=mn.getEnd(e[0]);for(let n=1;n<e.length;n++){const i=mn.getStart(e[n]);if(!W.isEqual(i,r))throw new Error("Path index "+n+" does not start at prior path end. Start: "+i.x+","+i.y+" expected: "+r.x+","+r.y);r=mn.getEnd(e[n])}},nd=e=>e.flatMap(r=>r.toSvgString()),id=(...e)=>{rd(e);const r=Bo(e);return Object.freeze({segments:e,length:()=>r.totalLength,nearest:n=>{throw new Error("not implemented")},interpolate:(n,i=!1)=>Qf(e,n,i,r),bbox:()=>ed(e),toString:()=>td(e),toSvgString:()=>nd(e),kind:"compound"})},ko={};G(ko,{access1dArray:()=>hb,allDirections:()=>Fa,array2dUpdater:()=>vb,asRectangles:()=>Xw,cellAtPoint:()=>cd,cellEquals:()=>ud,cellFromIndex:()=>mb,cellKeyString:()=>ad,cellMiddle:()=>eb,cells:()=>zn,crossDirections:()=>ld,getLine:()=>tb,getVectorFromCardinal:()=>Ma,guardCell:()=>or,indexFromCell:()=>_a,inside:()=>od,isEqual:()=>Yw,neighbours:()=>fd,offset:()=>kn,offsetCardinals:()=>rb,rectangleForCell:()=>sd,rows:()=>db,simpleLine:()=>nb,toArray:()=>Zw,visitArray:()=>yb,visitFor:()=>lb,visitNeigbours:()=>Qw,visitor:()=>ln,visitorBreadth:()=>ub,visitorColumn:()=>fb,visitorDepth:()=>ab,visitorRandom:()=>sb,visitorRandomContiguous:()=>ob,visitorRow:()=>cb});var Kw=e=>e===void 0?!1:"x"in e&&"y"in e,Jw=e=>!(e===void 0||e[1]===void 0),Yw=(e,r)=>{if(r===void 0||e===void 0)return!1;if("rows"in e&&"cols"in e)if("rows"in r&&"cols"in r){if(e.rows!==r.rows||e.cols!==r.cols)return!1}else return!1;if("size"in e)if("size"in r){if(e.size!==r.size)return!1}else return!1;return!0},ad=e=>`Cell{${e.x},${e.y}}`,ud=(e,r)=>r===void 0||e===void 0?!1:e.x===r.x&&e.y===r.y,or=(e,r="Param",n)=>{if(e===void 0)throw new Error(r+" is undefined. Expecting {x,y}");if(e.x===void 0)throw new Error(r+".x is undefined");if(e.y===void 0)throw new Error(r+".y is undefined");if(Number.isNaN(e.x))throw new Error(r+".x is NaN");if(Number.isNaN(e.y))throw new Error(r+".y is NaN");if(!Number.isInteger(e.x))throw new TypeError(r+".x is non-integer");if(!Number.isInteger(e.y))throw new TypeError(r+".y is non-integer");if(n!==void 0&&!od(n,e))throw new Error(`${r} is outside of grid. Cell: ${e.x},${e.y} Grid: ${n.cols}, ${n.rows}`)},gi=(e,r="Param")=>{if(e===void 0)throw new Error(`${r} is undefined. Expecting grid.`);if(!("rows"in e))throw new Error(`${r}.rows is undefined`);if(!("cols"in e))throw new Error(`${r}.cols is undefined`);if(!Number.isInteger(e.rows))throw new TypeError(`${r}.rows is not an integer`);if(!Number.isInteger(e.cols))throw new TypeError(`${r}.cols is not an integer`)},od=(e,r)=>!(r.x<0||r.y<0||r.x>=e.cols||r.y>=e.rows),sd=(e,r)=>{or(r);const n=e.size,i=r.x*n,a=r.y*n;return me.fromTopLeft({x:i,y:a},n,n)};function*Xw(e){for(const r of zn(e))yield sd(e,r)}var Zw=(e,r)=>{const n=[];for(let i=0;i<e.rows;i++)if(n[i]=new Array(e.cols),r)for(let a=0;a<e.cols;a++)n[i][a]=r;return n},cd=(e,r)=>{const n=e.size;if(ee(n,"positive","grid.size"),r.x<0||r.y<0)return;const i=Math.floor(r.x/n),a=Math.floor(r.y/n);if(!(i>=e.cols)&&!(a>=e.rows))return{x:i,y:a}},Fa=Object.freeze(["n","ne","nw","e","s","se","sw","w"]),ld=Object.freeze(["n","e","s","w"]),fd=(e,r,n="undefined",i)=>{const a=i??Fa,u=a.map(o=>kn(e,r,Ma(o),n));return Ao(a,u)};function*Qw(e,r,n="undefined",i){const u=(i??Fa).map(o=>kn(e,r,Ma(o),n));for(const o of u)o!==void 0&&(yield o)}var eb=(e,r)=>{or(r);const n=e.size,i=r.x*n,a=r.y*n;return Object.freeze({x:i+n/2,y:a+n/2})},tb=(e,r)=>{or(e),or(r);let n=e.x,i=e.y;const a=Math.abs(r.x-n),u=Math.abs(r.y-i),o=n<r.x?1:-1,s=i<r.y?1:-1;let c=a-u;const l=[];for(;l.push(Object.freeze({x:n,y:i})),!(n===r.x&&i===r.y);){const f=2*c;f>-u&&(c-=u,n+=o),f<a&&(c+=a,i+=s)}return l},rb=(e,r,n,i="stop")=>{gi(e,"grid"),or(r,"start"),Le(n,"aboveZero","steps");const a=Fa,u=a.map(s=>Ma(s,n)),o=a.map((s,c)=>kn(e,r,u[c],i));return Ao(a,o)},Ma=(e,r=1)=>{let n;switch(e){case"n":{n={x:0,y:-1*r};break}case"ne":{n={x:1*r,y:-1*r};break}case"e":{n={x:1*r,y:0};break}case"se":{n={x:1*r,y:1*r};break}case"s":{n={x:0,y:1*r};break}case"sw":{n={x:-1*r,y:1*r};break}case"w":{n={x:-1*r,y:0};break}case"nw":{n={x:-1*r,y:-1*r};break}default:n={x:0,y:0}}return Object.freeze(n)},nb=function(e,r,n=!1){const i=[];if(e.x===r.x){const a=n?r.y+1:r.y;for(let u=e.y;u<a;u++)i.push({x:e.x,y:u})}else if(e.y===r.y){const a=n?r.x+1:r.x;for(let u=e.x;u<a;u++)i.push({x:u,y:e.y})}else throw new Error(`Only does vertical and horizontal: ${e.x},${e.y} - ${r.x},${r.y}`);return i},kn=function(e,r,n,i="undefined"){or(r,"start",e),or(n),gi(e,"grid");let a=r.x,u=r.y;switch(i){case"wrap":{a+=n.x%e.cols,u+=n.y%e.rows,a<0?a=e.cols+a:a>=e.cols&&(a-=e.cols),u<0?u=e.rows+u:u>=e.rows&&(u-=e.rows);break}case"stop":{a+=n.x,u+=n.y,a=Su(a,e.cols),u=Su(u,e.rows);break}case"undefined":{if(a+=n.x,u+=n.y,a<0||u<0||a>=e.cols||u>=e.rows)return;break}case"unbounded":{a+=n.x,u+=n.y;break}default:throw new Error(`Unknown BoundsLogic case ${i}`)}return Object.freeze({x:a,y:u})},ib=(e,r,n,i)=>{const a=fd(e,r,i,n);return Object.entries(a).filter(Jw)},ln=function*(e,r,n,i={}){gi(r,"grid"),or(n,"start",r);const a=i.visited??Sl(ad),u=e.options?e.options:(l,f)=>ib(l,f,ld,"undefined");if(!Kw(n))throw new Error("'start' parameter is undefined or not a cell");let o=[n],s=[],c=null;for(;o.length>0;){if(c===null){const l=o.pop();if(l===void 0)break;c=l}if(!a.has(c)){a.add(c),yield c;const l=u(r,c).filter(f=>!a.has(f[1]));l.length===0?c!==null&&(o=o.filter(f=>ud(f,c))):s.push(...l)}if(s=s.filter(l=>!a.has(l[1])),s.length===0)c=null;else{const l=e.select(s);l!==void 0&&(o.push(l[1]),c=l[1])}}},ab=(e,r,n={})=>ln({select:i=>i[i.length-1]},e,r,n),ub=(e,r,n={})=>ln({select:i=>i[0]},e,r,n),dd=e=>tu(e),ob=(e,r,n={})=>ln({select:dd},e,r,n),sb=(e,r,n={})=>ln({options:(i,a)=>{const u=[];for(const o of zn(i,a))u.push(["n",o]);return u},select:dd},e,r,n),cb=(e,r={x:0,y:0},n={})=>{const{reversed:i=!1}=n;return ln({select:s=>s.find(c=>c[0]===(i?"w":"e")),options:(s,c)=>(i?c.x>0?c={x:c.x-1,y:c.y}:c.y>0?c={x:s.cols-1,y:c.y-1}:c={x:s.cols-1,y:s.rows-1}:c.x<s.rows-1?c={x:c.x+1,y:c.y}:c.y<s.rows-1?c={x:0,y:c.y+1}:c={x:0,y:0},[[i?"w":"e",c]])},e,r,n)},lb=(e,r,n,i)=>{Le(n,"","steps");const a={reversed:n<0};n=Math.abs(n);let u=r,o=i(e,r,a);o.next();let s=0;for(;s<n;){s++;const{value:c}=o.next();if(c)u=c,a.debug&&console.log(`stepsMade: ${s} cell: ${u.x}, ${u.y} reverse: ${a.reversed}`);else if(n>=e.cols*e.rows)n-=e.cols*e.rows,s=0,o=i(e,r,a),o.next(),u=r,a.debug&&console.log(`resetting visitor to ${n}`);else throw new Error("Value not received by visitor")}return u},fb=(e,r,n={})=>{const{reversed:i=!1}=n;return ln({select:u=>u.find(o=>o[0]===(i?"n":"s")),options:(u,o)=>(i?o.y>0?o={x:o.x,y:o.y-1}:o.x===0?o={x:u.cols-1,y:u.rows-1}:o={x:o.x-1,y:u.rows-1}:o.y<u.rows-1?o={x:o.x,y:o.y+1}:o.x<u.cols-1?o={x:o.x+1,y:0}:o={x:0,y:0},[[i?"n":"s",o]])},e,r,n)},db=function*(e,r={x:0,y:0}){let n=r.y,i=[];for(const a of zn(e,r))a.y!==n?(yield i,i=[a],n=a.y):i.push(a);i.length>0&&(yield i)},zn=function*(e,r={x:0,y:0}){gi(e,"grid"),or(r,"start",e);let{x:n,y:i}=r,a=!0;do yield{x:n,y:i},n++,n===e.cols&&(i++,n=0),i===e.rows&&(i=0,n=0),n===r.x&&i===r.y&&(a=!1);while(a)},hb=(e,r)=>{const n={cols:r,rows:Math.ceil(e.length/r)};return(a,u)=>{const o=_a(n,a,u);if(o!==void 0)return e[o]}},vb=(e,r)=>(i,a)=>{const u=cd(e,a);if(u===void 0)throw new Error(`Position does not exist. Pos: ${JSON.stringify(a)} Grid: ${JSON.stringify(e)}`);r[u.y][u.x]=i};function*yb(e,r,n,i){if(typeof e>"u")throw Error("First parameter is undefined, expected an array");if(e===null)throw Error("First parameter is null, expected an array");if(!Array.isArray(e))throw Error("First parameter should be an array");if(Le(r,"aboveZero","cols"),e.length===0)return;const a=i?.boundsWrap??"stop",u=Math.ceil(e.length/r),o={cols:r,rows:u};n===void 0&&(n=zn);const s=n(o,{x:0,y:0},i);for(const c of s){const l=_a(o,c,a);if(l===void 0)return;yield[e[l],l]}}var _a=(e,r,n)=>{if(gi(e,"grid"),r.x<0)switch(n){case"stop":{r={...r,x:0};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r=kn(e,{x:0,y:r.y},{x:r.x,y:0},"wrap");break}}if(r.y<0)switch(n){case"stop":{r={...r,y:0};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r={...r,y:e.rows+r.y};break}}if(r.x>=e.cols)switch(n){case"stop":{r={...r,x:e.cols-1};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r={...r,x:r.x%e.cols};break}}if(r.y>=e.rows)switch(n){case"stop":{r={...r,y:e.rows-1};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r={...r,y:r.y%e.rows};break}}return r.y*e.cols+r.x},mb=(e,r)=>{let n=0;return typeof e=="number"?n=e:n=e.cols,Le(n,"aboveZero","colsOrGrid"),{x:r%n,y:Math.floor(r/n)}},zo={};G(zo,{fromDegrees:()=>gb});var gb=(e,r,n=0,i=0,a=360)=>({radiusX:e,radiusY:r,rotation:zr(n),startAngle:zr(i),endAngle:zr(a)}),Yi={};G(Yi,{clampMagnitude:()=>Sb,divide:()=>Ib,dotProduct:()=>Cb,fromLineCartesian:()=>wb,fromLinePolar:()=>bb,fromPointPolar:()=>hd,multiply:()=>_b,normalise:()=>Eb,quadrantOffsetAngle:()=>Db,subtract:()=>Mb,sum:()=>Fb,toCartesian:()=>Fr,toPolar:()=>pi,toString:()=>Ab});var pb=Object.freeze({x:0,y:0}),Li=Math.PI*2,Xi=Math.PI,hd=(e,r="",n=pb)=>{e=$r(e,n);let i=Math.atan2(e.y,e.x);return r==="unipolar"&&i<0?i+=Li:r==="bipolar"&&(i>Xi?i-=Li:i<=-Xi&&(i+=Li)),Object.freeze({distance:Lt(e),angleRadian:i})},wb=e=>$r(e.b,e.a),bb=e=>{pa(e,"line");const r=$r(e.b,e.a);return hd(r)},Zt=e=>!!Ye.isCoord(e),an=e=>!!Fe(e),Eb=e=>{if(Zt(e))return Ye.normalise(e);if(an(e))return Af(e);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},Db=e=>e.x>=0&&e.y>=0?0:e.x<0&&e.y>=0||e.x<0&&e.y<0?Xi:Li,pi=(e,r=Fn)=>{if(Zt(e))return e;if(an(e))return Ye.fromCartesian(e,r);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},Fr=e=>{if(Zt(e))return Ye.toPoint(e);if(an(e))return e;throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},Ab=(e,r)=>{if(Zt(e))return Ye.toString(e,r);if(an(e))return mf(e,r);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},Cb=(e,r)=>{if(Zt(e)&&Zt(r))return Ye.dotProduct(e,r);if(an(e)&&an(r))return df(e,r);throw new Error("Expected two polar/Cartesian vectors.")},Sb=(e,r=1,n=0)=>{if(Zt(e))return Ye.clampMagnitude(e,r,n);if(an(e))return Cf(e,r,n);throw new Error("Expected either polar or Cartesian vector")},Fb=(e,r)=>{const n=Zt(e);e=Fr(e),r=Fr(r);const i=bf(e,r);return n?pi(i):i},Mb=(e,r)=>{const n=Zt(e);e=Fr(e),r=Fr(r);const i=$r(e,r);return n?pi(i):i},_b=(e,r)=>{const n=Zt(e);e=Fr(e),r=Fr(r);const i=Ea(e,r);return n?pi(i):i},Ib=(e,r)=>{const n=Zt(e);e=Fr(e),r=Fr(r);const i=Ef(e,r);return n?pi(i):i},vd={};G(vd,{fromPoints:()=>Pb,init:()=>yd});var Pb=(e,r={})=>{const n=cf(...e);return yd(n.map(i=>wr(i)),r)},yd=(e,r={})=>{const n=r.maxDistanceFromLine??.1;return a=>{const o=e.map((c,l)=>{const f=c.nearest(a),d=Lt(a,f);return{path:c,index:l,nearest:f,distance:d}}).filter(c=>c.distance<=n);return $t.sortByNumericProperty(o,"distance")}},Rb={},md={};G(md,{CirclePacking:()=>gd});var gd={};G(gd,{random:()=>Nb});var Nb=(e,r,n={})=>{const i=n.attempts??2e3,a=Py(e,"radius"),u=[],o=(s,c)=>u.some(l=>Kf(l,s,c));for(;a.length;){const s=a.pop();if(!s)break;const c={...n,margin:{x:s.radius,y:s.radius}};for(let l=0;l<i;l++){const f=hl(r,c);if(!o(f,s.radius)){u.push(Object.freeze({...s,...f}));break}}}return u},Zi={};G(Zi,{scaler:()=>Bb});var Bb=(e="both",r)=>{const n=r??Hi;let i=1,a=1,u={x:1,y:1};const o=()=>{switch(e){case"height":return{x:a,y:a};case"width":return{x:i,y:i};case"min":return{x:Math.min(i,a),y:Math.min(i,a)};case"max":return{x:Math.max(i,a),y:Math.max(i,a)};default:return{x:i,y:a}}},s=(d,v,g,P)=>{let L=Number.NaN,B=Number.NaN,S=n.width,C=n.height;if(typeof d=="number")if(L=d,typeof v=="number"){if(B=v,g===void 0)return[L,B,S,C];if(kr(g))S=g.width,C=g.height;else if(typeof g=="number")if(S=g,typeof P=="number")C=P;else throw new Error("Missing final height value");else throw new Error("Missing valid output range")}else if(kr(v))S=v.width,C=v.height;else throw new Error("Expected input y or output Rect to follow first number parameter");else if(Fe(d)){if(L=d.x,B=d.y,v===void 0)return[L,B,S,C];if(kr(v))S=v.width,C=v.height;else if(typeof v=="number")if(S=v,typeof g=="number")C=g;else throw new Error("Expected height as third parameter after Point and output width");else throw new Error("Expected Rect or width as second parameter when first parameter is a Point")}else throw new Error("Expected input Point or x value as first parameter");return[L,B,S,C]},c=(d,v,g,P)=>{const L=s(d,v,g,P);return f(!0,...L)},l=(d,v,g,P)=>{const L=s(d,v,g,P);return f(!1,...L)},f=(d,v,g,P,L)=>{if(Number.isNaN(P))throw new Error("Output width range missing");if(Number.isNaN(L))throw new Error("Output height range missing");return(P!==i||L!==a)&&(i=P,a=L,u=o()),d?{x:v*u.x,y:g*u.y}:{x:v/u.x,y:g/u.y}};return{rel:l,abs:c}},pd={};G(pd,{boxBlurKernel:()=>iC,convolve:()=>D0,convolveCell:()=>E0,convolveImage:()=>eC,edgeDetectionKernel:()=>rC,gaussianBlur3Kernel:()=>aC,gaussianBlur5Kernel:()=>uC,identityKernel:()=>tC,kernel2dToArray:()=>A0,multiply:()=>Ai,rgbReducer:()=>C0,sharpenKernel:()=>nC,unsharpMasking5Kernel:()=>oC});var wi={};G(wi,{getCssVariable:()=>zd,goldenAngleColour:()=>kd,interpolate:()=>v1,opacity:()=>ri,randomHue:()=>jo,scale:()=>y1,toHex:()=>h1,toHsl:()=>f1,toRgb:()=>d1});function On(e,r,n){e.prototype=r.prototype=n,n.constructor=e}function bi(e,r){var n=Object.create(e.prototype);for(var i in r)n[i]=r[i];return n}function jr(){}var un=.7,In=1/un,bn="\\s*([+-]?\\d+)\\s*",Qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kb=/^#([0-9a-f]{3,8})$/,zb=new RegExp(`^rgb\\(${bn},${bn},${bn}\\)$`),Ob=new RegExp(`^rgb\\(${ir},${ir},${ir}\\)$`),Tb=new RegExp(`^rgba\\(${bn},${bn},${bn},${Qn}\\)$`),Wb=new RegExp(`^rgba\\(${ir},${ir},${ir},${Qn}\\)$`),Lb=new RegExp(`^hsl\\(${Qn},${ir},${ir}\\)$`),$b=new RegExp(`^hsla\\(${Qn},${ir},${ir},${Qn}\\)$`),oc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};On(jr,Pn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sc,formatHex:sc,formatHex8:jb,formatHsl:qb,formatRgb:cc,toString:cc});function sc(){return this.rgb().formatHex()}function jb(){return this.rgb().formatHex8()}function qb(){return wd(this).formatHsl()}function cc(){return this.rgb().formatRgb()}function Pn(e){var r,n;return e=(e+"").trim().toLowerCase(),(r=kb.exec(e))?(n=r[1].length,r=parseInt(r[1],16),n===6?lc(r):n===3?new Qe(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?Ii(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?Ii(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=zb.exec(e))?new Qe(r[1],r[2],r[3],1):(r=Ob.exec(e))?new Qe(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Tb.exec(e))?Ii(r[1],r[2],r[3],r[4]):(r=Wb.exec(e))?Ii(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Lb.exec(e))?hc(r[1],r[2]/100,r[3]/100,1):(r=$b.exec(e))?hc(r[1],r[2]/100,r[3]/100,r[4]):oc.hasOwnProperty(e)?lc(oc[e]):e==="transparent"?new Qe(NaN,NaN,NaN,0):null}function lc(e){return new Qe(e>>16&255,e>>8&255,e&255,1)}function Ii(e,r,n,i){return i<=0&&(e=r=n=NaN),new Qe(e,r,n,i)}function Oo(e){return e instanceof jr||(e=Pn(e)),e?(e=e.rgb(),new Qe(e.r,e.g,e.b,e.opacity)):new Qe}function Qi(e,r,n,i){return arguments.length===1?Oo(e):new Qe(e,r,n,i??1)}function Qe(e,r,n,i){this.r=+e,this.g=+r,this.b=+n,this.opacity=+i}On(Qe,Qi,bi(jr,{brighter(e){return e=e==null?In:Math.pow(In,e),new Qe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?un:Math.pow(un,e),new Qe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qe(Zr(this.r),Zr(this.g),Zr(this.b),ea(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fc,formatHex:fc,formatHex8:xb,formatRgb:dc,toString:dc}));function fc(){return`#${Yr(this.r)}${Yr(this.g)}${Yr(this.b)}`}function xb(){return`#${Yr(this.r)}${Yr(this.g)}${Yr(this.b)}${Yr((isNaN(this.opacity)?1:this.opacity)*255)}`}function dc(){const e=ea(this.opacity);return`${e===1?"rgb(":"rgba("}${Zr(this.r)}, ${Zr(this.g)}, ${Zr(this.b)}${e===1?")":`, ${e})`}`}function ea(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yr(e){return e=Zr(e),(e<16?"0":"")+e.toString(16)}function hc(e,r,n,i){return i<=0?e=r=n=NaN:n<=0||n>=1?e=r=NaN:r<=0&&(e=NaN),new Jt(e,r,n,i)}function wd(e){if(e instanceof Jt)return new Jt(e.h,e.s,e.l,e.opacity);if(e instanceof jr||(e=Pn(e)),!e)return new Jt;if(e instanceof Jt)return e;e=e.rgb();var r=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(r,n,i),u=Math.max(r,n,i),o=NaN,s=u-a,c=(u+a)/2;return s?(r===u?o=(n-i)/s+(n<i)*6:n===u?o=(i-r)/s+2:o=(r-n)/s+4,s/=c<.5?u+a:2-u-a,o*=60):s=c>0&&c<1?0:o,new Jt(o,s,c,e.opacity)}function ei(e,r,n,i){return arguments.length===1?wd(e):new Jt(e,r,n,i??1)}function Jt(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}On(Jt,ei,bi(jr,{brighter(e){return e=e==null?In:Math.pow(In,e),new Jt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?un:Math.pow(un,e),new Jt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,a=2*n-i;return new Qe(yu(e>=240?e-240:e+120,a,i),yu(e,a,i),yu(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Jt(vc(this.h),Pi(this.s),Pi(this.l),ea(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ea(this.opacity);return`${e===1?"hsl(":"hsla("}${vc(this.h)}, ${Pi(this.s)*100}%, ${Pi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vc(e){return e=(e||0)%360,e<0?e+360:e}function Pi(e){return Math.max(0,Math.min(1,e||0))}function yu(e,r,n){return(e<60?r+(n-r)*e/60:e<180?n:e<240?r+(n-r)*(240-e)/60:r)*255}var bd=Math.PI/180,Ed=180/Math.PI,ta=18,Dd=.96422,Ad=1,Cd=.82521,Sd=4/29,En=6/29,Fd=3*En*En,Ub=En*En*En;function Md(e){if(e instanceof ar)return new ar(e.l,e.a,e.b,e.opacity);if(e instanceof Er)return _d(e);e instanceof Qe||(e=Oo(e));var r=wu(e.r),n=wu(e.g),i=wu(e.b),a=mu((.2225045*r+.7168786*n+.0606169*i)/Ad),u,o;return r===n&&n===i?u=o=a:(u=mu((.4360747*r+.3850649*n+.1430804*i)/Dd),o=mu((.0139322*r+.0971045*n+.7141733*i)/Cd)),new ar(116*a-16,500*(u-a),200*(a-o),e.opacity)}function xu(e,r,n,i){return arguments.length===1?Md(e):new ar(e,r,n,i??1)}function ar(e,r,n,i){this.l=+e,this.a=+r,this.b=+n,this.opacity=+i}On(ar,xu,bi(jr,{brighter(e){return new ar(this.l+ta*(e??1),this.a,this.b,this.opacity)},darker(e){return new ar(this.l-ta*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,r=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return r=Dd*gu(r),e=Ad*gu(e),n=Cd*gu(n),new Qe(pu(3.1338561*r-1.6168667*e-.4906146*n),pu(-.9787684*r+1.9161415*e+.033454*n),pu(.0719453*r-.2289914*e+1.4052427*n),this.opacity)}}));function mu(e){return e>Ub?Math.pow(e,1/3):e/Fd+Sd}function gu(e){return e>En?e*e*e:Fd*(e-Sd)}function pu(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function wu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Vb(e){if(e instanceof Er)return new Er(e.h,e.c,e.l,e.opacity);if(e instanceof ar||(e=Md(e)),e.a===0&&e.b===0)return new Er(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var r=Math.atan2(e.b,e.a)*Ed;return new Er(r<0?r+360:r,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Uu(e,r,n,i){return arguments.length===1?Vb(e):new Er(e,r,n,i??1)}function Er(e,r,n,i){this.h=+e,this.c=+r,this.l=+n,this.opacity=+i}function _d(e){if(isNaN(e.h))return new ar(e.l,0,0,e.opacity);var r=e.h*bd;return new ar(e.l,Math.cos(r)*e.c,Math.sin(r)*e.c,e.opacity)}On(Er,Uu,bi(jr,{brighter(e){return new Er(this.h,this.c,this.l+ta*(e??1),this.opacity)},darker(e){return new Er(this.h,this.c,this.l-ta*(e??1),this.opacity)},rgb(){return _d(this).rgb()}}));var Id=-.14861,To=1.78277,Wo=-.29227,Ia=-.90649,ti=1.97294,yc=ti*Ia,mc=ti*To,gc=To*Wo-Ia*Id;function Hb(e){if(e instanceof Qr)return new Qr(e.h,e.s,e.l,e.opacity);e instanceof Qe||(e=Oo(e));var r=e.r/255,n=e.g/255,i=e.b/255,a=(gc*i+yc*r-mc*n)/(gc+yc-mc),u=i-a,o=(ti*(n-a)-Wo*u)/Ia,s=Math.sqrt(o*o+u*u)/(ti*a*(1-a)),c=s?Math.atan2(o,u)*Ed-120:NaN;return new Qr(c<0?c+360:c,s,a,e.opacity)}function Vu(e,r,n,i){return arguments.length===1?Hb(e):new Qr(e,r,n,i??1)}function Qr(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}On(Qr,Vu,bi(jr,{brighter(e){return e=e==null?In:Math.pow(In,e),new Qr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?un:Math.pow(un,e),new Qr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*bd,r=+this.l,n=isNaN(this.s)?0:this.s*r*(1-r),i=Math.cos(e),a=Math.sin(e);return new Qe(255*(r+n*(Id*i+To*a)),255*(r+n*(Wo*i+Ia*a)),255*(r+n*(ti*i)),this.opacity)}}));var Pa=e=>()=>e;function Pd(e,r){return function(n){return e+n*r}}function Gb(e,r,n){return e=Math.pow(e,n),r=Math.pow(r,n)-e,n=1/n,function(i){return Math.pow(e+i*r,n)}}function Lo(e,r){var n=r-e;return n?Pd(e,n>180||n<-180?n-360*Math.round(n/360):n):Pa(isNaN(e)?r:e)}function Kb(e){return(e=+e)==1?et:function(r,n){return n-r?Gb(r,n,e):Pa(isNaN(r)?n:r)}}function et(e,r){var n=r-e;return n?Pd(e,n):Pa(isNaN(e)?r:e)}var ra=function e(r){var n=Kb(r);function i(a,u){var o=n((a=Qi(a)).r,(u=Qi(u)).r),s=n(a.g,u.g),c=n(a.b,u.b),l=et(a.opacity,u.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=c(f),a.opacity=l(f),a+""}}return i.gamma=e,i}(1);function Jb(e,r){r||(r=[]);var n=e?Math.min(r.length,e.length):0,i=r.slice(),a;return function(u){for(a=0;a<n;++a)i[a]=e[a]*(1-u)+r[a]*u;return i}}function Yb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xb(e,r){var n=r?r.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),u=new Array(n),o;for(o=0;o<i;++o)a[o]=$o(e[o],r[o]);for(;o<n;++o)u[o]=r[o];return function(s){for(o=0;o<i;++o)u[o]=a[o](s);return u}}function Zb(e,r){var n=new Date;return e=+e,r=+r,function(i){return n.setTime(e*(1-i)+r*i),n}}function Hu(e,r){return e=+e,r=+r,function(n){return e*(1-n)+r*n}}function Qb(e,r){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(a in r)a in e?n[a]=$o(e[a],r[a]):i[a]=r[a];return function(u){for(a in n)i[a]=n[a](u);return i}}var Gu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bu=new RegExp(Gu.source,"g");function e1(e){return function(){return e}}function t1(e){return function(r){return e(r)+""}}function r1(e,r){var n=Gu.lastIndex=bu.lastIndex=0,i,a,u,o=-1,s=[],c=[];for(e=e+"",r=r+"";(i=Gu.exec(e))&&(a=bu.exec(r));)(u=a.index)>n&&(u=r.slice(n,u),s[o]?s[o]+=u:s[++o]=u),(i=i[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,c.push({i:o,x:Hu(i,a)})),n=bu.lastIndex;return n<r.length&&(u=r.slice(n),s[o]?s[o]+=u:s[++o]=u),s.length<2?c[0]?t1(c[0].x):e1(r):(r=c.length,function(l){for(var f=0,d;f<r;++f)s[(d=c[f]).i]=d.x(l);return s.join("")})}function $o(e,r){var n=typeof r,i;return r==null||n==="boolean"?Pa(r):(n==="number"?Hu:n==="string"?(i=Pn(r))?(r=i,ra):r1:r instanceof Pn?ra:r instanceof Date?Zb:Yb(r)?Jb:Array.isArray(r)?Xb:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Qb:Hu)(e,r)}function Rd(e){return function(r,n){var i=e((r=ei(r)).h,(n=ei(n)).h),a=et(r.s,n.s),u=et(r.l,n.l),o=et(r.opacity,n.opacity);return function(s){return r.h=i(s),r.s=a(s),r.l=u(s),r.opacity=o(s),r+""}}}var n1=Rd(Lo),i1=Rd(et);function a1(e,r){var n=et((e=xu(e)).l,(r=xu(r)).l),i=et(e.a,r.a),a=et(e.b,r.b),u=et(e.opacity,r.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=a(o),e.opacity=u(o),e+""}}function Nd(e){return function(r,n){var i=e((r=Uu(r)).h,(n=Uu(n)).h),a=et(r.c,n.c),u=et(r.l,n.l),o=et(r.opacity,n.opacity);return function(s){return r.h=i(s),r.c=a(s),r.l=u(s),r.opacity=o(s),r+""}}}var u1=Nd(Lo),o1=Nd(et);function Bd(e){return function r(n){n=+n;function i(a,u){var o=e((a=Vu(a)).h,(u=Vu(u)).h),s=et(a.s,u.s),c=et(a.l,u.l),l=et(a.opacity,u.opacity);return function(f){return a.h=o(f),a.s=s(f),a.l=c(Math.pow(f,n)),a.opacity=l(f),a+""}}return i.gamma=r,i}(1)}var s1=Bd(Lo),c1=Bd(et);function l1(e,r){r===void 0&&(r=e,e=$o);for(var n=0,i=r.length-1,a=r[0],u=new Array(i<0?0:i);n<i;)u[n]=e(a,a=r[++n]);return function(o){var s=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return u[s](o-s)}}var f1=e=>{const r=Ra(e);if(r===null)throw new Error(`Could not resolve colour ${e}`);if(Td(r))return r;if(Wd(r)){const n=ei(r);return r.opacity?{...n,opacity:r.opacity}:n}throw new Error(`Could not resolve colour ${e}`)},kd=(e,r=.5,n=.75,i=1)=>{ee(e,"positive","index"),ee(r,"percentage","saturation"),ee(n,"percentage","lightness"),ee(i,"percentage","alpha");const a=e*137.508;return i===1?`hsl(${a},${r*100}%,${n*100}%)`:`hsl(${a},${r*100}%,${n*100}%,${i*100}%)`},jo=(e=tt)=>e()*360,d1=e=>{const r=Ra(e),n=r.rgb();return r.opacity<1?{r:n.r,g:n.g,b:n.b,opacity:r.opacity}:{r:n.r,g:n.g,b:n.b}},Ra=e=>{if(typeof e=="string"){const r=Pn(e);if(r!==null)return r;throw e.startsWith("hsl")&&e.indexOf("%")<=0?new Error(`Could not resolve CSS colour ${e}. HSL values should be in the form: hsl(0, 50%, 50%)`):new Error(`Could not resolve CSS colour ${e}`)}else{if(Td(e))return ei(e.h,e.s,e.l);if(Wd(e))return Qi(e.r,e.g,e.b)}throw new Error(`Could not resolve colour ${JSON.stringify(e)}`)},h1=e=>Ra(e).formatHex(),ri=(e,r)=>{const n=Ra(e);return n.opacity*=r,n.toString()},zd=(e,r="black",n)=>{n===void 0&&(n=document.body);const i=getComputedStyle(n).getPropertyValue(`--${e}`).trim();return i===void 0||i.length===0?r:i},v1=(e,r,n,i)=>{if(ee(e,"percentage","amount"),typeof r!="string")throw new Error("Expected string for 'from' param");if(typeof n!="string")throw new Error("Expected string for 'to' param");let a;typeof i>"u"?a={}:typeof i=="string"?a={space:i}:a=i;const u=Od(a,[r,n]);if(u===void 0)throw new Error("Could not handle colour/space");return u(e)},Od=(e,r)=>{if(!Array.isArray(r))throw new Error("Expected one or more colours as parameters");let n;if(typeof e>"u"?n={}:typeof e=="string"?n={space:e}:n=e,!Array.isArray(r))throw new Error("Expected array for colours parameter");if(r.length<2)throw new Error("Interpolation expects at least two colours");const{space:i="rgb",long:a=!1}=n;let u;switch(i){case"lab":u=a1;break;case"hsl":u=a?i1:n1;break;case"hcl":u=a?o1:u1;break;case"cubehelix":u=a?c1:s1;break;case"rgb":u=ra;default:u=ra}return n.gamma&&(i==="rgb"||i==="cubehelix")&&(u=u.gamma(n.gamma)),r.length>2?l1(u,r):u(r[0],r[1])},y1=(e,r,...n)=>{if(ee(e,"aboveZero","steps"),!Array.isArray(n))throw new Error("Expected one or more colours as parameters");const i=Od(r,n);if(i===void 0)throw new Error("Could not handle colour/space");const a=1/(e-1),u=[];let o=0;for(let s=0;s<e;s++)u.push(i(o)),o+=a,o>1&&(o=1);return u},Td=e=>!(e.h===void 0||e.s===void 0||e.l===void 0),Wd=e=>!(e.r===void 0||e.g===void 0||e.b===void 0),m1={};G(m1,{BipolarView:()=>Vh,Colour:()=>wi,Drawing:()=>Ei,ImageDataGrid:()=>is,Palette:()=>rs,Plot:()=>Jh,Plot2:()=>ts,PlotOld:()=>y0,SceneGraph:()=>An,Svg:()=>Zo,Video:()=>ns,scaleCanvas:()=>b0});var Ei={};G(Ei,{arc:()=>hh,bezier:()=>mh,circle:()=>vh,connectedPoints:()=>La,copyToImg:()=>OD,dot:()=>Yt,drawingStack:()=>yn,ellipse:()=>kD,getContext:()=>dh,line:()=>Xo,lineThroughPoints:()=>BD,makeHelper:()=>PD,paths:()=>yh,pointLabels:()=>$a,rect:()=>ph,textBlock:()=>wh,textBlockAligned:()=>$D,textHeight:()=>LD,textRect:()=>ja,textWidth:()=>ua,translatePoint:()=>zD,triangle:()=>WD});var en={};G(en,{Empty:()=>X1,Equilateral:()=>Ld,Isosceles:()=>jd,Placeholder:()=>Z1,Right:()=>$d,angles:()=>Di,anglesDegrees:()=>iE,apply:()=>tE,area:()=>Hd,barycentricCoord:()=>Kd,barycentricToCartestian:()=>gE,bbox:()=>Gd,centroid:()=>Oa,corners:()=>Ku,edges:()=>za,equilateralFromVertex:()=>vE,fromFlatArray:()=>mE,fromPoints:()=>xo,fromRadius:()=>dE,guard:()=>qt,innerCircle:()=>lE,intersectsPoint:()=>pE,isAcute:()=>sE,isEmpty:()=>Q1,isEqual:()=>nE,isEquilateral:()=>aE,isIsosceles:()=>uE,isOblique:()=>oE,isObtuse:()=>cE,isPlaceholder:()=>eE,isRightAngle:()=>Ud,isTriangle:()=>rE,lengths:()=>qo,outerCircle:()=>fE,perimeter:()=>Vd,rotate:()=>wE,rotateByVertex:()=>hE,toFlatArray:()=>yE});var Ld={};G(Ld,{area:()=>A1,centerFromA:()=>p1,centerFromB:()=>w1,centerFromC:()=>b1,circumcircle:()=>C1,fromCenter:()=>g1,height:()=>E1,incircle:()=>Na,perimeter:()=>D1});var pc=Math.PI*4/3,wc=Math.PI*2/3,qr=e=>typeof e=="number"?e:e.length,g1=(e,r={x:0,y:0},n)=>{const i=qr(e)/Math.sqrt(3),a=n??Math.PI*1.5,u={x:i*Math.cos(a)+r.x,y:i*Math.sin(a)+r.y},o={x:i*Math.cos(a+pc)+r.x,y:i*Math.sin(a+pc)+r.y},s={x:i*Math.cos(a+wc)+r.x,y:i*Math.sin(a+wc)+r.y};return Object.freeze({a:o,b:u,c:s})},p1=(e,r={x:0,y:0})=>{const n=qr(e),{radius:i}=Na(e);return{x:r.x+n/2,y:r.y-i}},w1=(e,r={x:0,y:0})=>{const{radius:n}=Na(e);return{x:r.x,y:r.y+n*2}},b1=(e,r={x:0,y:0})=>{const n=qr(e),{radius:i}=Na(e);return{x:r.x-n/2,y:r.y-i}},E1=e=>Math.sqrt(3)/2*qr(e),D1=e=>qr(e)*3,A1=e=>Math.pow(qr(e),2)*Math.sqrt(3)/4,C1=e=>({radius:Math.sqrt(3)/3*qr(e)}),Na=e=>({radius:Math.sqrt(3)/6*qr(e)}),$d={};G($d,{adjacentFromHypotenuse:()=>T1,adjacentFromOpposite:()=>W1,angleAtPointA:()=>P1,angleAtPointB:()=>R1,area:()=>I1,circumcircle:()=>B1,fromA:()=>S1,fromB:()=>F1,fromC:()=>M1,height:()=>Ba,hypotenuseFromAdjacent:()=>$1,hypotenuseFromOpposite:()=>L1,hypotenuseSegments:()=>ka,incircle:()=>k1,medians:()=>N1,oppositeFromAdjacent:()=>z1,oppositeFromHypotenuse:()=>O1,perimeter:()=>_1,resolveLengths:()=>jt});var S1=(e,r={x:0,y:0})=>{const n=jt(e),i=ka(e),a=Ba(e),u={x:r.x,y:r.y},o={x:r.x+n.hypotenuse,y:r.y},s={x:r.x+i[1],y:r.y-a};return{a:u,b:o,c:s}},F1=(e,r={x:0,y:0})=>{const n=jt(e),i=ka(e),a=Ba(e),u={x:r.x,y:r.y},o={x:r.x-n.hypotenuse,y:r.y},s={x:r.x-i[0],y:r.y-a};return{a:o,b:u,c:s}},M1=(e,r={x:0,y:0})=>{const n=ka(e),i=Ba(e),a={x:r.x,y:r.y},u={x:r.x-n[1],y:r.y+i},o={x:r.x+n[0],y:r.y+i};return{a:u,b:o,c:a}},jt=e=>{const r=e.adjacent,n=e.opposite,i=e.hypotenuse;if(r!==void 0&&n!==void 0)return{...e,adjacent:r,opposite:n,hypotenuse:Math.sqrt(r*r+n*n)};if(r&&i)return{...e,adjacent:r,hypotenuse:i,opposite:i*i-r*r};if(n&&i)return{...e,hypotenuse:i,opposite:n,adjacent:i*i-n*n};if(e.opposite&&e.hypotenuse&&e.adjacent)return e;throw new Error("Missing at least two edges")},Ba=e=>{const r=jt(e),n=r.opposite*r.opposite/r.hypotenuse,i=r.adjacent*r.adjacent/r.hypotenuse;return Math.sqrt(n*i)},ka=e=>{const r=jt(e),n=r.opposite*r.opposite/r.hypotenuse,i=r.adjacent*r.adjacent/r.hypotenuse;return[n,i]},_1=e=>{const r=jt(e);return r.adjacent+r.hypotenuse+r.opposite},I1=e=>{const r=jt(e);return r.opposite*r.adjacent/2},P1=e=>{const r=jt(e);return Math.acos((r.adjacent*r.adjacent+r.hypotenuse*r.hypotenuse-r.opposite*r.opposite)/(2*r.adjacent*r.hypotenuse))},R1=e=>{const r=jt(e);return Math.acos((r.opposite*r.opposite+r.hypotenuse*r.hypotenuse-r.adjacent*r.adjacent)/(2*r.opposite*r.hypotenuse))},N1=e=>{const r=jt(e),n=r.adjacent*r.adjacent,i=r.hypotenuse*r.hypotenuse,a=r.opposite*r.opposite;return[Math.sqrt(2*(n+i)-a)/2,Math.sqrt(2*(i+a)-n)/2,Math.sqrt(2*(a+n)-i)/2]},B1=e=>({radius:jt(e).hypotenuse/2}),k1=e=>{const r=jt(e);return{radius:(r.adjacent+r.opposite-r.hypotenuse)/2}},z1=(e,r)=>Math.tan(e)*r,O1=(e,r)=>Math.sin(e)*r,T1=(e,r)=>Math.cos(e)*r,W1=(e,r)=>r/Math.tan(e),L1=(e,r)=>r/Math.sin(e),$1=(e,r)=>r/Math.cos(e),jd={};G(jd,{apexAngle:()=>j1,area:()=>U1,baseAngle:()=>qd,circumcircle:()=>V1,fromA:()=>K1,fromB:()=>J1,fromC:()=>Y1,fromCenter:()=>G1,height:()=>xr,incircle:()=>xd,legHeights:()=>q1,medians:()=>H1,perimeter:()=>x1});var qd=e=>Math.acos(e.base/(2*e.legs)),j1=e=>{const r=e.legs*e.legs,n=e.base*e.base;return Math.acos((2*r-n)/(2*r))},xr=e=>{const r=e.legs*e.legs,n=e.base*e.base;return Math.sqrt((4*r-n)/4)},q1=e=>{const r=qd(e);return e.base*Math.sin(r)},x1=e=>2*e.legs+e.base,U1=e=>xr(e)*e.base/2,V1=e=>{const r=xr(e),n=r*r,i=e.base*e.base;return{radius:(4*n+i)/(8*r)}},xd=e=>{const r=xr(e);return{radius:e.base*r/(2*e.legs+e.base)}},H1=e=>{const r=e.legs*e.legs,n=e.base*e.base,i=Math.sqrt(r+2*n)/2,a=Math.sqrt(4*r-n)/2;return[i,i,a]},G1=(e,r={x:0,y:0})=>{const n=xr(e),i=xd(e).radius,a=n-i,u={x:r.x-e.base/2,y:r.y+i},o={x:r.x+e.base/2,y:r.y+i},s={x:r.x,y:r.y-a};return{a:u,b:o,c:s}},K1=(e,r={x:0,y:0})=>{const n=xr(e),i={x:r.x,y:r.y},a={x:r.x+e.base,y:r.y},u={x:r.x+e.base/2,y:r.y-n};return{a:i,b:a,c:u}},J1=(e,r={x:0,y:0})=>{const n=xr(e),i={x:r.x,y:r.y},a={x:r.x-e.base,y:r.y},u={x:r.x-e.base/2,y:r.y-n};return{a,b:i,c:u}},Y1=(e,r={x:0,y:0})=>{const n=xr(e),i={x:r.x,y:r.y},a={x:r.x-e.base/2,y:r.y+n},u={x:r.x+e.base/2,y:r.y+n};return{a,b:u,c:i}},bc=Math.PI*2,X1=Object.freeze({a:{x:0,y:0},b:{x:0,y:0},c:{x:0,y:0}}),Z1=Object.freeze({a:{x:NaN,y:NaN},b:{x:NaN,y:NaN},c:{x:NaN,y:NaN}}),Q1=e=>zi(e.a)&&zi(e.b)&&zi(e.c),eE=e=>Oi(e.a)&&Oi(e.b)&&Oi(e.c),tE=(e,r)=>Object.freeze({...e,a:r(e.a,"a"),b:r(e.b,"b"),c:r(e.c,"c")}),qt=(e,r="t")=>{if(e===void 0)throw Error("{$name} undefined");pe(e.a,r+".a"),pe(e.b,r+".b"),pe(e.c,r+".c")},rE=e=>{if(e===void 0)return!1;const r=e;return!(!Fe(r.a)||!Fe(r.b)||!Fe(r.c))},nE=(e,r)=>Jn(e.a,r.a)&&Jn(e.b,r.b)&&Jn(e.c,r.c),Ku=e=>(qt(e),[e.a,e.b,e.c]),za=e=>(qt(e),Ze.joinPointsToLines(e.a,e.b,e.c,e.a)),qo=e=>(qt(e),[Lt(e.a,e.b),Lt(e.b,e.c),Lt(e.c,e.a)]),Di=e=>(qt(e),[gn(e.a,e.b),gn(e.b,e.c),gn(e.c,e.a)]),iE=e=>(qt(e),Ua(Di(e))),aE=e=>{qt(e);const[r,n,i]=qo(e);return r===n&&n===i},uE=e=>{const[r,n,i]=qo(e);return r===n||n===i||i===r},Ud=e=>Di(e).some(r=>r===Math.PI/2),oE=e=>!Ud(e),sE=e=>!Di(e).some(r=>r>=Math.PI/2),cE=e=>Di(e).some(r=>r>Math.PI/2),Oa=e=>{qt(e);const r=wf([e.a,e.b,e.c],(i,a)=>({x:i.x+a.x,y:i.y+a.y}));return{x:r.x/3,y:r.y/3}},Vd=e=>(qt(e),za(e).reduce((r,n)=>r+Ze.length(n),0)),Hd=e=>{qt(e,"t");const r=za(e).map(i=>Ze.length(i)),n=(r[0]+r[1]+r[2])/2;return Math.sqrt(n*(n-r[0])*(n-r[1])*(n-r[2]))},lE=e=>{const r=Oa(e),n=Vd(e)/2;return{radius:Hd(e)/n,...r}},fE=e=>{const[r,n,i]=za(e).map(o=>Ze.length(o)),a=Oa(e);return{radius:r*n*i/Math.sqrt((r+n+i)*(-r+n+i)*(r-n+i)*(r+n-i)),...a}},dE=(e,r,n={})=>{ee(r,"positive","radius"),pe(e,"origin");const i=n.initialAngleRadian??0,u=[i,i+bc*1/3,i+bc*2/3].map(o=>Ye.toCartesian(r,o,e));return xo(u)},hE=(e,r,n="b")=>{const i=n==="a"?e.a:n==="b"?e.b:e.c;return Object.freeze({a:Xr(e.a,r,i),b:Xr(e.b,r,i),c:Xr(e.c,r,i)})},vE=(e={x:0,y:0},r=10,n=Math.PI/2)=>{const i=Lu(e,r,Math.PI- -n/2),a=Lu(e,r,Math.PI-n/2);return{a:i,b:e,c:a}},yE=e=>(qt(e),[e.a.x,e.a.y,e.b.x,e.b.y,e.c.x,e.c.y]),mE=e=>{if(!Array.isArray(e))throw new Error("coords expected as array");if(e.length!==6)throw new Error(`coords array expected with 6 elements. Got ${e.length}`);return xo(gf(...e))},xo=e=>{if(!Array.isArray(e))throw new Error("points expected as array");if(e.length!==3)throw new Error(`points array expected with 3 elements. Got ${e.length}`);return{a:e[0],b:e[1],c:e[2]}},Gd=(e,r=0)=>{const{a:n,b:i,c:a}=e,u=Math.min(n.x,i.x,a.x)-r,o=Math.max(n.x,i.x,a.x)+r,s=Math.min(n.y,i.y,a.y)-r,c=Math.max(n.y,i.y,a.y)+r;return{x:u,y:s,width:o-u,height:c-s}},Kd=(e,r,n)=>{const i=lt(r,n),a=(c,l,f,d)=>(f.y-d.y)*c+(d.x-f.x)*l+f.x*d.y-d.x*f.y,u=a(i.x,i.y,e.b,e.c)/a(e.a.x,e.a.y,e.b,e.c),o=a(i.x,i.y,e.c,e.a)/a(e.b.x,e.b.y,e.c,e.a),s=a(i.x,i.y,e.a,e.b)/a(e.c.x,e.c.y,e.a,e.b);return{a:u,b:o,c:s}},gE=(e,r)=>{qt(e);const{a:n,b:i,c:a}=e,u=n.x*r.a+i.x*r.b+a.x*r.c,o=n.y*r.a+i.y*r.b+a.y*r.c;if(n.z&&i.z&&a.z){const s=n.z*r.a+i.z*r.b+a.z*r.c;return Object.freeze({x:u,y:o,z:s})}else return Object.freeze({x:u,y:o})},pE=(e,r,n)=>{const i=Gd(e),a=lt(r,n);if(!me.intersectsPoint(i,a))return!1;const u=Kd(e,a);return 0<=u.a&&u.a<=1&&0<=u.b&&u.b<=1&&0<=u.c&&u.c<=1},wE=(e,r,n)=>r===void 0||r===0?e:(n===void 0&&(n=Oa(e)),Object.freeze({...e,a:Xr(e.a,r,n),b:Xr(e.b,r,n),c:Xr(e.c,r,n)})),Ju=function(e,r){return Ju=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},Ju(e,r)};function Tn(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Ju(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}function bE(e,r,n,i){function a(u){return u instanceof n?u:new n(function(o){o(u)})}return new(n||(n=Promise))(function(u,o){function s(f){try{l(i.next(f))}catch(d){o(d)}}function c(f){try{l(i.throw(f))}catch(d){o(d)}}function l(f){f.done?u(f.value):a(f.value).then(s,c)}l((i=i.apply(e,r||[])).next())})}function Jd(e,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(f){return c([l,f])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,a&&(u=l[0]&2?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[l[0]&2,u.value]),l[0]){case 0:case 1:u=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!u||l[1]>u[0]&&l[1]<u[3])){n.label=l[1];break}if(l[0]===6&&n.label<u[1]){n.label=u[1],u=l;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(l);break}u[2]&&n.ops.pop(),n.trys.pop();continue}l=r.call(e,n)}catch(f){l=[6,f],a=0}finally{i=u=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ni(e){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&e[r],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rn(e,r){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),a,u=[],o;try{for(;(r===void 0||r-- >0)&&!(a=i.next()).done;)u.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function ii(e,r,n){if(n||arguments.length===2)for(var i=0,a=r.length,u;i<a;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return e.concat(u||Array.prototype.slice.call(r))}function Dn(e){return this instanceof Dn?(this.v=e,this):new Dn(e)}function EE(e,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,r||[]),a,u=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(v){i[v]&&(a[v]=function(g){return new Promise(function(P,L){u.push([v,g,P,L])>1||s(v,g)})})}function s(v,g){try{c(i[v](g))}catch(P){d(u[0][3],P)}}function c(v){v.value instanceof Dn?Promise.resolve(v.value.v).then(l,f):d(u[0][2],v)}function l(v){s("next",v)}function f(v){s("throw",v)}function d(v,g){v(g),u.shift(),u.length&&s(u[0][0],u[0][1])}}function DE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],n;return r?r.call(e):(e=typeof ni=="function"?ni(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(u){n[u]=e[u]&&function(o){return new Promise(function(s,c){o=e[u](o),a(s,c,o.done,o.value)})}}function a(u,o,s,c){Promise.resolve(c).then(function(l){u({value:l,done:s})},o)}}function Pe(e){return typeof e=="function"}function AE(e){var r=function(i){Error.call(i),i.stack=new Error().stack},n=e(r);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Eu=AE(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(i,a){return a+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Yu(e,r){if(e){var n=e.indexOf(r);0<=n&&e.splice(n,1)}}var Ta=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,n,i,a,u;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=ni(o),c=s.next();!c.done;c=s.next()){var l=c.value;l.remove(this)}}catch(L){r={error:L}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}else o.remove(this);var f=this.initialTeardown;if(Pe(f))try{f()}catch(L){u=L instanceof Eu?L.errors:[L]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var v=ni(d),g=v.next();!g.done;g=v.next()){var P=g.value;try{Ec(P)}catch(L){u=u??[],L instanceof Eu?u=ii(ii([],Rn(u)),Rn(L.errors)):u.push(L)}}}catch(L){i={error:L}}finally{try{g&&!g.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}}if(u)throw new Eu(u)}},e.prototype.add=function(r){var n;if(r&&r!==this)if(this.closed)Ec(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(r)}},e.prototype._hasParent=function(r){var n=this._parentage;return n===r||Array.isArray(n)&&n.includes(r)},e.prototype._addParent=function(r){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(r),n):n?[n,r]:r},e.prototype._removeParent=function(r){var n=this._parentage;n===r?this._parentage=null:Array.isArray(n)&&Yu(n,r)},e.prototype.remove=function(r){var n=this._finalizers;n&&Yu(n,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();Ta.EMPTY;function Yd(e){return e instanceof Ta||e&&"closed"in e&&Pe(e.remove)&&Pe(e.add)&&Pe(e.unsubscribe)}function Ec(e){Pe(e)?e():e.unsubscribe()}var Xd={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},CE={setTimeout:function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,ii([e,r],Rn(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function Zd(e){CE.setTimeout(function(){throw e})}function Dc(){}function SE(e){e()}var Uo=function(e){Tn(r,e);function r(n){var i=e.call(this)||this;return i.isStopped=!1,n?(i.destination=n,Yd(n)&&n.add(i)):i.destination=IE,i}return r.create=function(n,i,a){return new Xu(n,i,a)},r.prototype.next=function(n){this.isStopped||this._next(n)},r.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(n){this.destination.next(n)},r.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(Ta),FE=Function.prototype.bind;function Du(e,r){return FE.call(e,r)}var ME=function(){function e(r){this.partialObserver=r}return e.prototype.next=function(r){var n=this.partialObserver;if(n.next)try{n.next(r)}catch(i){Ri(i)}},e.prototype.error=function(r){var n=this.partialObserver;if(n.error)try{n.error(r)}catch(i){Ri(i)}else Ri(r)},e.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(n){Ri(n)}},e}(),Xu=function(e){Tn(r,e);function r(n,i,a){var u=e.call(this)||this,o;if(Pe(n)||!n)o={next:n??void 0,error:i??void 0,complete:a??void 0};else{var s;u&&Xd.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=function(){return u.unsubscribe()},o={next:n.next&&Du(n.next,s),error:n.error&&Du(n.error,s),complete:n.complete&&Du(n.complete,s)}):o=n}return u.destination=new ME(o),u}return r}(Uo);function Ri(e){Zd(e)}function _E(e){throw e}var IE={closed:!0,next:Dc,error:_E,complete:Dc},Vo=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function PE(e){return e}function RE(e){return e.length===0?PE:e.length===1?e[0]:function(n){return e.reduce(function(i,a){return a(i)},n)}}var _r=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var n=new e;return n.source=this,n.operator=r,n},e.prototype.subscribe=function(r,n,i){var a=this,u=BE(r)?r:new Xu(r,n,i);return SE(function(){var o=a,s=o.operator,c=o.source;u.add(s?s.call(u,c):c?a._subscribe(u):a._trySubscribe(u))}),u},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(n){r.error(n)}},e.prototype.forEach=function(r,n){var i=this;return n=Ac(n),new n(function(a,u){var o=new Xu({next:function(s){try{r(s)}catch(c){u(c),o.unsubscribe()}},error:u,complete:a});i.subscribe(o)})},e.prototype._subscribe=function(r){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(r)},e.prototype[Vo]=function(){return this},e.prototype.pipe=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return RE(r)(this)},e.prototype.toPromise=function(r){var n=this;return r=Ac(r),new r(function(i,a){var u;n.subscribe(function(o){return u=o},function(o){return a(o)},function(){return i(u)})})},e.create=function(r){return new e(r)},e}();function Ac(e){var r;return(r=e??Xd.Promise)!==null&&r!==void 0?r:Promise}function NE(e){return e&&Pe(e.next)&&Pe(e.error)&&Pe(e.complete)}function BE(e){return e&&e instanceof Uo||NE(e)&&Yd(e)}function kE(e){return Pe(e?.lift)}function Ho(e){return function(r){if(kE(r))return r.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function na(e,r,n,i,a){return new zE(e,r,n,i,a)}var zE=function(e){Tn(r,e);function r(n,i,a,u,o,s){var c=e.call(this,n)||this;return c.onFinalize=o,c.shouldUnsubscribe=s,c._next=i?function(l){try{i(l)}catch(f){n.error(f)}}:e.prototype._next,c._error=u?function(l){try{u(l)}catch(f){n.error(f)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=a?function(){try{a()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,c}return r.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},r}(Uo),OE={now:function(){return Date.now()},delegate:void 0},TE=function(e){Tn(r,e);function r(n,i){return e.call(this)||this}return r.prototype.schedule=function(n,i){return this},r}(Ta),Cc={setInterval:function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,ii([e,r],Rn(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},WE=function(e){Tn(r,e);function r(n,i){var a=e.call(this,n,i)||this;return a.scheduler=n,a.work=i,a.pending=!1,a}return r.prototype.schedule=function(n,i){var a;if(i===void 0&&(i=0),this.closed)return this;this.state=n;var u=this.id,o=this.scheduler;return u!=null&&(this.id=this.recycleAsyncId(o,u,i)),this.pending=!0,this.delay=i,this.id=(a=this.id)!==null&&a!==void 0?a:this.requestAsyncId(o,this.id,i),this},r.prototype.requestAsyncId=function(n,i,a){return a===void 0&&(a=0),Cc.setInterval(n.flush.bind(n,this),a)},r.prototype.recycleAsyncId=function(n,i,a){if(a===void 0&&(a=0),a!=null&&this.delay===a&&this.pending===!1)return i;i!=null&&Cc.clearInterval(i)},r.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(n,i);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(n,i){var a=!1,u;try{this.work(n)}catch(o){a=!0,u=o||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),u},r.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,a=n.scheduler,u=a.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Yu(u,this),i!=null&&(this.id=this.recycleAsyncId(a,i,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(TE),Sc=function(){function e(r,n){n===void 0&&(n=e.now),this.schedulerActionCtor=r,this.now=n}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,r).schedule(i,n)},e.now=OE.now,e}(),LE=function(e){Tn(r,e);function r(n,i){i===void 0&&(i=Sc.now);var a=e.call(this,n,i)||this;return a.actions=[],a._active=!1,a}return r.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var a;this._active=!0;do if(a=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,a){for(;n=i.shift();)n.unsubscribe();throw a}},r}(Sc),$E=new LE(WE),Qd=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function jE(e){return Pe(e?.then)}function qE(e){return Pe(e[Vo])}function xE(e){return Symbol.asyncIterator&&Pe(e?.[Symbol.asyncIterator])}function UE(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function VE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var HE=VE();function GE(e){return Pe(e?.[HE])}function KE(e){return EE(this,arguments,function(){var n,i,a,u;return Jd(this,function(o){switch(o.label){case 0:n=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Dn(n.read())];case 3:return i=o.sent(),a=i.value,u=i.done,u?[4,Dn(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Dn(a)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function JE(e){return Pe(e?.getReader)}function Go(e){if(e instanceof _r)return e;if(e!=null){if(qE(e))return YE(e);if(Qd(e))return XE(e);if(jE(e))return ZE(e);if(xE(e))return eh(e);if(GE(e))return QE(e);if(JE(e))return eD(e)}throw UE(e)}function YE(e){return new _r(function(r){var n=e[Vo]();if(Pe(n.subscribe))return n.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function XE(e){return new _r(function(r){for(var n=0;n<e.length&&!r.closed;n++)r.next(e[n]);r.complete()})}function ZE(e){return new _r(function(r){e.then(function(n){r.closed||(r.next(n),r.complete())},function(n){return r.error(n)}).then(null,Zd)})}function QE(e){return new _r(function(r){var n,i;try{for(var a=ni(e),u=a.next();!u.done;u=a.next()){var o=u.value;if(r.next(o),r.closed)return}}catch(s){n={error:s}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}r.complete()})}function eh(e){return new _r(function(r){tD(e,r).catch(function(n){return r.error(n)})})}function eD(e){return eh(KE(e))}function tD(e,r){var n,i,a,u;return bE(this,void 0,void 0,function(){var o,s;return Jd(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=DE(e),c.label=1;case 1:return[4,n.next()];case 2:if(i=c.sent(),!!i.done)return[3,4];if(o=i.value,r.next(o),r.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),a={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),i&&!i.done&&(u=n.return)?[4,u.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}function rD(e,r,n,i,a){i===void 0&&(i=0),a===void 0&&(a=!1);var u=r.schedule(function(){n(),a?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(u),!a)return u}function ia(e,r){return Ho(function(n,i){var a=0;n.subscribe(na(i,function(u){i.next(e.call(r,u,a++))}))})}var nD=Array.isArray;function iD(e,r){return nD(r)?e.apply(void 0,ii([],Rn(r))):e(r)}function aD(e){return ia(function(r){return iD(e,r)})}function uD(e,r,n,i,a,u,o,s){var c=[],l=0,f=0,d=!1,v=function(){d&&!c.length&&!l&&r.complete()},g=function(L){return l<i?P(L):c.push(L)},P=function(L){u&&r.next(L),l++;var B=!1;Go(n(L,f++)).subscribe(na(r,function(S){a?.(S),u?g(S):r.next(S)},function(){B=!0},void 0,function(){if(B)try{l--;for(var S=function(){var C=c.shift();o?rD(r,o,function(){return P(C)}):P(C)};c.length&&l<i;)S();v()}catch(C){r.error(C)}}))};return e.subscribe(na(r,g,function(){d=!0,v()})),function(){s?.()}}function th(e,r,n){return n===void 0&&(n=1/0),Pe(r)?th(function(i,a){return ia(function(u,o){return r(i,u,a,o)})(Go(e(i,a)))},n):(typeof r=="number"&&(n=r),Ho(function(i,a){return uD(i,a,e,n)}))}var oD=["addListener","removeListener"],sD=["addEventListener","removeEventListener"],cD=["on","off"];function aa(e,r,n,i){if(Pe(n)&&(i=n,n=void 0),i)return aa(e,r,n).pipe(aD(i));var a=Rn(dD(e)?sD.map(function(s){return function(c){return e[s](r,c,n)}}):lD(e)?oD.map(Fc(e,r)):fD(e)?cD.map(Fc(e,r)):[],2),u=a[0],o=a[1];if(!u&&Qd(e))return th(function(s){return aa(s,r,n)})(Go(e));if(!u)throw new TypeError("Invalid event target");return new _r(function(s){var c=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];return s.next(1<l.length?l:l[0])};return u(c),function(){return o(c)}})}function Fc(e,r){return function(n){return function(i){return e[n](r,i)}}}function lD(e){return Pe(e.addListener)&&Pe(e.removeListener)}function fD(e){return Pe(e.on)&&Pe(e.off)}function dD(e){return Pe(e.addEventListener)&&Pe(e.removeEventListener)}function rh(e,r){return r===void 0&&(r=$E),Ho(function(n,i){var a=null,u=null,o=null,s=function(){if(a){a.unsubscribe(),a=null;var l=u;u=null,i.next(l)}};function c(){var l=o+e,f=r.now();if(f<l){a=this.schedule(void 0,l-f),i.add(a);return}s()}n.subscribe(na(i,function(l){u=l,o=r.now(),a||(a=r.schedule(c,e),i.add(a))},function(){s(),i.complete()},void 0,function(){u=a=null}))})}var hD=cn(xc(),1),nh=(e="viewport")=>{if(e==="viewport")return(r,n)=>{const i=lt(r,n);return Object.freeze({x:i.x/window.innerWidth,y:i.y/window.innerHeight})};if(e==="screen")return(r,n)=>{const i=lt(r,n);return Object.freeze({x:i.x/screen.width,y:i.y/screen.height})};if(e==="document")return(r,n)=>{const i=lt(r,n);return Object.freeze({x:i.x/document.body.scrollWidth,y:i.y/document.body.scrollHeight})};throw new Error(`Unknown 'reference' parameter: ${JSON.stringify(e)}`)},ih=(e,r={})=>{const n=r.target??"viewport",i=r.relative??!1,a=r.anchor??"nw",u=$e(e),o=ah(n);if(i){const s=nh(n);return()=>s(o(Ki(u.getBoundingClientRect(),a)))}else return()=>o(Ki(u.getBoundingClientRect(),a))},vD=(e,r="nw")=>{const n=$e(e);return Ki(n.getBoundingClientRect(),r)},yD=(e,r="viewport")=>ih(e,{relative:!0,target:r})(),ah=(e="viewport")=>{switch(e){case"screen":return(r,n)=>{const i=lt(r,n);return Object.freeze({x:i.x+window.screenX,y:i.y+window.screenY})};case"document":return(r,n)=>{const i=lt(r,n);return Object.freeze({x:i.x+window.scrollX,y:i.y+window.scrollY})};case"viewport":return(r,n)=>{const i=lt(r,n);return Object.freeze({x:i.x,y:i.y})};default:throw new Error(`Unexpected target coordinate space: ${e}. Expected: viewport, document or screen`)}},mD=(e,r,n="window")=>{if(!e)throw new Error("domQueryOrEl is null or undefined");const i=$e(e),a=Ea(r,window.innerWidth,window.innerHeight),u=i.getBoundingClientRect(),o=$r(a,u.width/2,u.height/2);i.style.transform=`translate(${o.x}px, ${o.y}px)`},uh=(e,r)=>{const n=$e(e),i=Wa(),a=()=>{const u=window.innerWidth,o=window.innerHeight;if(n.setAttribute("width",u.toString()),n.setAttribute("height",o.toString()),r!==void 0){const s={min:Math.min(u,o),max:Math.max(u,o),width:u,height:o,center:{x:u/2,y:o/2}};r({el:n,bounds:s})}};return i.subscribe(a),a(),i},gD=(e,r)=>{if(!e)throw new Error("domQueryOrEl is null or undefined");const n=$e(e);if(n.nodeName!=="CANVAS")throw new Error(`Expected CANVAS HTML element. Got: ${n.nodeName}`);const i=r.fullSize??!0,a=Math.round(window.devicePixelRatio)||1,u=r.scaleBy??"both";let o=Zi.scaler("both");const s=f=>{o=Zi.scaler(u,f);const d=me.multiply(f,a,a);n.width=d.width,n.height=d.height,n.style.width=f.width+"px",n.style.height=f.height+"px"},c=()=>{const f={width:window.innerWidth,height:window.innerHeight};s(f)},l=()=>{const f=n.getContext("2d");if(f===null)throw new Error("Could not create drawing context");f.scale(a,a)};return i&&Wa().subscribe(c),{abs:o.abs,rel:o.rel,getContext:l}},pD=(e,r,n=!1)=>{if(e==null)throw new Error("domQueryOrEl is null or undefined");const i=$e(e);if(i.nodeName!=="CANVAS")throw new Error(`Expected HTML element with node name CANVAS, not ${i.nodeName}`);const a=i.getContext("2d");if(a===null)throw new Error("Could not create drawing context");const u=()=>{const s=window.innerWidth,c=window.innerHeight;if(i.width=s,i.height=c,r!==void 0){const l={min:Math.min(s,c),max:Math.max(s,c),width:s,height:c,center:{x:s/2,y:c/2}};r({ctx:a,el:i,bounds:l})}};n||(i.style.top="0",i.style.left="0",i.style.zIndex="-100",i.style.position="fixed");const o=Wa();return o.subscribe(u),u(),o},wD=(e,r)=>{if(!(e===null||!e)){if(!Array.isArray(r))throw new Error("List should be an array of strings");for(let n=0;n<r.length;n++)if(e.classList.contains(r[n])){e.classList.remove(r[n]),n+1<r.length?e.classList.add(r[n+1]):e.classList.add(r[0]);return}e.classList.add(r[0])}},bD=(e,r,n=100)=>{const i=$e(e),a=i.parentElement;if(a===null)throw new Error("Element has no parent");return Jo(a,n).subscribe(o=>{const s=o.find(f=>f.target===a);if(s===void 0)return;const c=s.contentRect.width,l=s.contentRect.height;if(i.setAttribute("width",c+"px"),i.setAttribute("height",l+"px"),r!==void 0){const f={min:Math.min(c,l),max:Math.max(c,l),width:c,height:l,center:{x:c/2,y:l/2}};r({el:i,bounds:f})}})},ED=e=>{const r=$e(e),i=window.getComputedStyle(r).transform;if(i==="none"||typeof i>"u")return{x:0,y:0,z:0};const a=i.includes("3d")?"3d":"2d",u=i.match(/matrix.*\((.+)\)/)[1].split(", ");return a==="2d"?{x:parseFloat(u[4]),y:parseFloat(u[5]),z:0}:a==="3d"?{x:parseFloat(u[12]),y:parseFloat(u[13]),z:parseFloat(u[14])}:{x:0,y:0,z:0}},Ko=(e,r,n=100)=>{const i=$e(e);if(i.nodeName!=="CANVAS")throw new Error(`Expected HTML element with node name CANVAS, not ${i.nodeName}`);const a=i.parentElement;if(a===null)throw new Error("Element has no parent");const u=i.getContext("2d");if(u===null)throw new Error("Could not create drawing context");return i.style.width="100%",i.style.height="100%",Jo(a,n).subscribe(s=>{const c=s.find(d=>d.target===a);if(c===void 0)return;const l=c.contentRect.width,f=c.contentRect.height;if(i.setAttribute("width",i.offsetWidth+"px"),i.setAttribute("height",i.offsetHeight+"px"),r!==void 0){const d={min:Math.min(l,f),max:Math.max(l,f),width:l,height:f,center:{x:l/2,y:f/2}};r({ctx:u,el:i,bounds:d})}})},Wa=(e=100)=>aa(window,"resize").pipe(rh(e)),$e=e=>{if(typeof e=="string"){const n=document.querySelector(e);if(n===null)throw e.startsWith("#")?new Error(`Query '${e}' did not match anything. Try '#id', 'div', or '.class'`):new Error(`Query '${e}' did not match anything. Did you mean '#${e}?`);e=n}else{if(e===null)throw new Error(`domQueryOrEl ${e} is null`);if(e===void 0)throw new Error(`domQueryOrEl ${e} is undefined`)}return e},DD=(e,r)=>{const n=document.createElement(r);return e.parentElement?.insertBefore(n,e.nextSibling),n},AD=(e,r)=>{const n=document.createElement(r);return e.appendChild(n),n},CD=e=>{let r=e.lastElementChild;for(;r;)e.removeChild(r),r=e.lastElementChild},SD=()=>new _r(r=>{const n=new MutationObserver(a=>{r.next(a)}),i={attributeFilter:["class"],attributes:!0};return n.observe(document.documentElement,i),function(){n.disconnect()}}),Jo=(e,r=1e3)=>{if(e===null)throw new Error("elem parameter is null. Expected element to observe");if(e===void 0)throw new Error("elem parameter is undefined. Expected element to observe");return new _r(i=>{const a=new ResizeObserver(u=>{i.next(u)});return a.observe(e),function(){a.unobserve(e)}}).pipe(rh(r))},FD=e=>new Promise((n,i)=>{const a=hD.default.stringify(e);navigator.clipboard.writeText(JSON.stringify(a)).then(()=>{n(!0)},u=>{console.warn("Could not copy to clipboard"),console.log(a),i(u)})}),MD=(e,r,n)=>{if(e===null)throw new Error("parentEl is null");if(e===void 0)throw new Error("parentEl is undefined");const i=new Set;for(const[u,o]of r){const s=`c-${u}`,c=e.querySelector(`#${s}`),l=n(o,c);c!==l&&(l.id=s,e.append(l)),i.add(s)}const a=[];for(let u=0;u<e.children.length;u++){const o=e.children[u];i.has(o.id)||a.push(o)}a.forEach(u=>u.remove())},oh=(e,r,n)=>{const i=Array.from(document.querySelectorAll(e));if(!!i)for(const a of i)r?a.classList.add(n):a.classList.remove(n)},sh=(e,r)=>{const n=Array.from(document.querySelectorAll(e));if(!!n)for(const i of n)i.style.display=r},_D=e=>document.getElementById(e),ch=(e,r)=>{const n=Array.from(document.querySelectorAll(e));if(!!n){typeof r=="number"&&(r=r.toString());for(const i of n)i.innerHTML=r}},lh=(e,r)=>{const n=Array.from(document.querySelectorAll(e));if(!!n){typeof r=="number"&&(r=r.toString());for(const i of n)i.textContent=r}},ID=e=>({text:r=>lh(e,r),html:r=>ch(e,r),cssDisplay:r=>sh(e,r),cssClass:(r,n)=>oh(e,r,n)}),fh=Math.PI*2,dh=e=>{if(e===null)throw Error("canvasElCtxOrQuery null. Must be a 2d drawing context or Canvas element");if(e===void 0)throw Error("canvasElCtxOrQuery undefined. Must be a 2d drawing context or Canvas element");const r=e instanceof CanvasRenderingContext2D?e:e instanceof HTMLCanvasElement?e.getContext("2d"):typeof e=="string"?$e(e).getContext("2d"):e;if(r===null)throw new Error("Could not create 2d context for canvas");return r},PD=(e,r)=>{const n=dh(e);return{paths(i,a){yh(n,i,a)},line(i,a){Xo(n,i,a)},rect(i,a){ph(n,i,a)},bezier(i,a){mh(n,i,a)},connectedPoints(i,a){La(n,i,a)},pointLabels(i,a){$a(n,i,a)},dot(i,a){Yt(n,i,a)},circle(i,a){vh(n,i,a)},arc(i,a){hh(n,i,a)},textBlock(i,a){a.bounds===void 0&&r!==void 0&&(a={...a,bounds:{...r,x:0,y:0}}),wh(n,i,a)}}},Yo=e=>RD(e.strokeStyle,e.fillStyle),vt=(e,r={},...n)=>{if(e===void 0)throw Error("ctx undefined");const i=yn(e).push(Yo(r),...n);return i.apply(),i},hh=(e,r,n={})=>{vt(e,n);const i=a=>{e.beginPath(),e.arc(a.x,a.y,a.radius,a.startRadian,a.endRadian),e.stroke()};Array.isArray(r)?r.forEach(i):i(r)},RD=(e,r)=>i=>{r&&(i.fillStyle=r),e&&(i.strokeStyle=e)},ND=(e,r,n)=>a=>{e&&(a.lineWidth=e),r&&(a.lineJoin=r),n&&(a.lineCap=n)},yn=(e,r)=>(r===void 0&&(r=new xi),{push:(...u)=>{r===void 0&&(r=new xi);const o=r.push(...u);return u.forEach(s=>s(e)),yn(e,o)},pop:()=>{const u=r?.pop();return yn(e,u)},apply:()=>r===void 0?yn(e):(r.forEach(u=>u(e)),yn(e,r))}),BD=(e,r,n)=>{vt(e,n),e.moveTo(r[0].x,r[0].y),r.forEach((i,a)=>{if(a+2>=r.length)return;const u=r[a+1],o={x:(i.x+u.x)/2,y:(i.y+u.y)/2},s=(o.x+i.x)/2,c=(o.x+u.x)/2;e.quadraticCurveTo(s,u.y,o.x,o.y),e.quadraticCurveTo(c,u.y,u.x,u.y)})},vh=(e,r,n={})=>{vt(e,n);const i=a=>{e.beginPath(),e.arc(a.x,a.y,a.radius,0,fh),n.strokeStyle&&e.stroke(),n.fillStyle&&e.fill()};Array.isArray(r)?r.forEach(i):i(r)},kD=(e,r,n={})=>{vt(e,n);const i=a=>{e.beginPath();const u=a.rotation??0,o=a.startAngle??0,s=a.endAngle??fh;e.ellipse(a.x,a.y,a.radiusX,a.radiusY,u,o,s),n.strokeStyle&&e.stroke(),n.fillStyle&&e.fill()};Array.isArray(r)?r.forEach(i):i(r)},yh=(e,r,n={})=>{vt(e,n);const i=a=>{if(Aa(a))gh(e,a,n);else if(Lr(a))Xo(e,a,n);else throw new Error(`Unknown path type ${JSON.stringify(a)}`)};Array.isArray(r)?r.forEach(i):i(r)},La=(e,r,n={})=>{const i=n.loop??!1;Cm(r),r.length!==0&&(r.forEach((a,u)=>pe(a,`Index ${u}`)),vt(e,n),e.beginPath(),e.moveTo(r[0].x,r[0].y),r.forEach(a=>e.lineTo(a.x,a.y)),i&&e.lineTo(r[0].x,r[0].y),(n.strokeStyle||n.strokeStyle===void 0&&n.fillStyle===void 0)&&e.stroke(),n.fillStyle&&e.fill())},$a=(e,r,n={},i)=>{r.length!==0&&(r.forEach((a,u)=>pe(a,`Index ${u}`)),vt(e,n),r.forEach((a,u)=>{const o=i!==void 0&&u<i.length?i[u]:u.toString();e.fillText(o.toString(),a.x,a.y)}))},zD=(e,r)=>{const n=e.getTransform();return{x:r.x*n.a+r.y*n.c+n.e,y:r.x*n.b+r.y*n.d+n.f}},OD=e=>{const r=document.createElement("img");return r.src=e.toDataURL("image/jpeg"),r},Yt=(e,r,n)=>{n===void 0&&(n={});const i=n.radius??10;if(vt(e,n),e.beginPath(),Array.isArray(r))r.forEach(a=>{e.arc(a.x,a.y,i,0,2*Math.PI)});else{const a=r;e.arc(a.x,a.y,i,0,2*Math.PI)}(n.filled||!n.outlined)&&e.fill(),n.outlined&&e.stroke()},mh=(e,r,n)=>{Aa(r)?gh(e,r,n):_o(r)&&TD(e,r,n)},TD=(e,r,n={})=>{let i=vt(e,n);const{a,b:u,cubic1:o,cubic2:s}=r,c=n.debug??!1;e.beginPath(),e.moveTo(a.x,a.y),e.bezierCurveTo(o.x,o.y,s.x,s.y,u.x,u.y),e.stroke(),c&&(i=i.push(Yo({...n,strokeStyle:ri(n.strokeStyle??"silver",.6),fillStyle:ri(n.fillStyle??"yellow",.4)})),i.apply(),e.moveTo(a.x,a.y),e.lineTo(o.x,o.y),e.stroke(),e.moveTo(u.x,u.y),e.lineTo(s.x,s.y),e.stroke(),e.fillText("a",a.x+5,a.y),e.fillText("b",u.x+5,u.y),e.fillText("c1",o.x+5,o.y),e.fillText("c2",s.x+5,s.y),Yt(e,o,{radius:3}),Yt(e,s,{radius:3}),Yt(e,a,{radius:3}),Yt(e,u,{radius:3}),i=i.pop(),i.apply())},gh=(e,r,n={})=>{const{a:i,b:a,quadratic:u}=r,o=n.debug??!1;let s=vt(e,n);e.beginPath(),e.moveTo(i.x,i.y),e.quadraticCurveTo(u.x,u.y,a.x,a.y),e.stroke(),o&&(s=s.push(Yo({...n,strokeStyle:ri(n.strokeStyle??"silver",.6),fillStyle:ri(n.fillStyle??"yellow",.4)})),La(e,[i,u,a]),e.fillText("a",i.x+5,i.y),e.fillText("b",a.x+5,a.y),e.fillText("h",u.x+5,u.y),Yt(e,u,{radius:3}),Yt(e,i,{radius:3}),Yt(e,a,{radius:3}),s=s.pop(),s.apply())},Xo=(e,r,n={})=>{const i=n.debug??!1,a=ND(n.lineWidth,n.lineJoin,n.lineCap);vt(e,n,a);const u=o=>{const{a:s,b:c}=o;e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(c.x,c.y),i&&(e.fillText("a",s.x,s.y),e.fillText("b",c.x,c.y),Yt(e,s,{radius:5,strokeStyle:"black"}),Yt(e,c,{radius:5,strokeStyle:"black"})),e.stroke()};Array.isArray(r)?r.forEach(u):u(r)},WD=(e,r,n={})=>{vt(e,n);const i=a=>{La(e,Ku(a),{...n,loop:!0}),n.debug&&$a(e,Ku(a),void 0,["a","b","c"])};Array.isArray(r)?r.forEach(i):i(r)},ph=(e,r,n={})=>{vt(e,n);const i=a=>{n.filled&&e.fillRect(a.x,a.y,a.width,a.height),(n.stroked??!0)&&e.strokeRect(a.x,a.y,a.width,a.height),n.debug&&$a(e,Io(a),void 0,["NW","NE","SE","SW"])};Array.isArray(r)?r.forEach(i):i(r)},ua=(e,r,n=0,i)=>ja(e,r,n,i).width,ja=(e,r,n=0,i)=>{if(r==null||r.length===0)return kf;const a=e.measureText(r);return{width:i?Cy(a.width,i)+n:a.width+n,height:a.actualBoundingBoxAscent+a.actualBoundingBoxDescent+n+n}},LD=(e,r,n=0)=>ja(e,r,n).height,wh=(e,r,n)=>{vt(e,n);const i=n.anchorPadding??0,a=n.anchor,u=n.bounds??{x:0,y:0,width:1e6,height:1e6},o=r.map(g=>e.measureText(g)),s=o.map(g=>g.width),c=o.map(g=>g.actualBoundingBoxAscent+g.actualBoundingBoxDescent),l=Math.max(...s),f=c.reduce((g,P)=>g+P,0);let{x:d,y:v}=a;a.x+l>u.width?d=u.width-(l+i):d-=i,d<u.x&&(d=u.x+i),a.y+f>u.height?v=u.height-(f+i):v-=i,v<u.y&&(v=u.y+i),r.forEach((g,P)=>{e.fillText(g,d,v),v+=c[P]})},$D=(e,r,n)=>{const{bounds:i}=n,{horiz:a="left",vert:u="top"}=n;let o;typeof r=="string"?o=[r]:o=r,vt(e,n),e.save(),e.translate(i.x,i.y),e.textAlign="left",e.textBaseline="top";const s=i.width/2,c=i.height/2,l=o.map(g=>e.measureText(g)),f=l.map(g=>g.actualBoundingBoxAscent+g.actualBoundingBoxDescent),d=f.reduce((g,P)=>g+P,0);let v=0;u==="center"?v=c-d/2:u==="bottom"&&(v=i.height-d),o.forEach((g,P)=>{let L=0;a==="center"?L=s-l[P].width/2:a==="right"&&(L=i.width-l[P].width),e.fillText(o[P],L,v),v+=f[P]}),e.restore()},Zo={};G(Zo,{Elements:()=>oa,applyOpts:()=>Ir,applyPathOpts:()=>es,applyStrokeOpts:()=>Ur,clear:()=>xD,createEl:()=>qa,createOrResolve:()=>Mr,getBounds:()=>UD,makeHelper:()=>HD,remove:()=>Ph,setBounds:()=>VD});var jD=(e,r,n)=>{const i=qa("marker",e);if(r.markerWidth&&i.setAttribute("markerWidth",r.markerWidth?.toString()),r.markerHeight&&i.setAttribute("markerHeight",r.markerHeight?.toString()),r.orient?i.setAttribute("orient",r.orient.toString()):i.setAttribute("orient","auto-start-reverse"),r.viewBox&&i.setAttribute("viewBox",r.viewBox.toString()),r.refX&&i.setAttribute("refX",r.refX.toString()),r.refY&&i.setAttribute("refY",r.refY.toString()),n){const a=n();i.appendChild(a)}return i},Au=(e,r,n)=>{if(e===null)return"(elem null)";const i=e.ownerSVGElement;if(i===null)throw new Error("parent for elem is null");const a=Mr(i,"defs","defs");let u=a.querySelector(`#${r.id}`);if(u!==null)return`url(#${r.id})`;if(r.id==="triangle")r={...r,strokeStyle:"transparent"},r.markerHeight||(r={...r,markerHeight:6}),r.markerWidth||(r={...r,markerWidth:6}),r.refX||(r={...r,refX:r.markerWidth}),r.refY||(r={...r,refY:r.markerHeight}),(!r.fillStyle||r.fillStyle==="none")&&(r={...r,fillStyle:"black"}),r.viewBox||(r={...r,viewBox:"0 0 10 10"}),u=jD(r.id,r,()=>{const o=qa("path");return o.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),r&&Ir(o,r),o});else throw new Error(`Do not know how to make ${r.id}`);return u.id=r.id,a.appendChild(u),`url(#${r.id})`},oa={};G(oa,{circle:()=>Ah,circleUpdate:()=>Dh,grid:()=>Ih,group:()=>qD,groupUpdate:()=>Ch,line:()=>sa,lineUpdate:()=>Sh,path:()=>bh,pathUpdate:()=>Eh,text:()=>_h,textPath:()=>Mh,textPathUpdate:()=>Fh,textUpdate:()=>Qo});var Mc=e=>e>=0&&e<=1?e*100+"%":e.toString(),bh=(e,r,n,i)=>{const a=Mr(r,"path",i),u=typeof e=="string"?e:e.join(`
`);return a.setAttributeNS(null,"d",u),r.appendChild(a),Eh(a,n)},Eh=(e,r)=>(r&&Ir(e,r),r&&Ur(e,r),e),Dh=(e,r,n)=>(e.setAttributeNS(null,"cx",r.x.toString()),e.setAttributeNS(null,"cy",r.y.toString()),e.setAttributeNS(null,"r",r.radius.toString()),n&&Ir(e,n),n&&Ur(e,n),e),Ah=(e,r,n,i)=>{const a=Mr(r,"circle",i);return Dh(a,e,n)},qD=(e,r,n)=>{const i=Mr(r,"g",n);return Ch(i,e)},Ch=(e,r)=>{for(const n of r)n.parentNode!==e&&e.appendChild(n);return e},sa=(e,r,n,i)=>{const a=Mr(r,"line",i);return Sh(a,e,n)},Sh=(e,r,n)=>(e.setAttributeNS(null,"x1",r.a.x.toString()),e.setAttributeNS(null,"y1",r.a.y.toString()),e.setAttributeNS(null,"x2",r.b.x.toString()),e.setAttributeNS(null,"y2",r.b.y.toString()),n&&Ir(e,n),n&&es(e,n),n&&Ur(e,n),e),Fh=(e,r,n)=>(n?.method&&e.setAttributeNS(null,"method",n.method),n?.side&&e.setAttributeNS(null,"side",n.side),n?.spacing&&e.setAttributeNS(null,"spacing",n.spacing),n?.startOffset&&e.setAttributeNS(null,"startOffset",Mc(n.startOffset)),n?.textLength&&e.setAttributeNS(null,"textLength",Mc(n.textLength)),r&&(e.textContent=r),n&&Ir(e,n),n&&Ur(e,n),e),Mh=(e,r,n,i,a)=>{const u=Mr(n,"text",a+"-text");Qo(u,void 0,void 0,i);const o=Mr(u,"textPath",a);return o.setAttributeNS(null,"href",e),Fh(o,r,i)},Qo=(e,r,n,i)=>(r&&(e.setAttributeNS(null,"x",r.x.toString()),e.setAttributeNS(null,"y",r.y.toString())),n&&(e.textContent=n),i&&(Ir(e,i),i&&Ur(e,i),i.anchor&&e.setAttributeNS(null,"text-anchor",i.anchor),i.align&&e.setAttributeNS(null,"alignment-baseline",i.align),(i.userSelect??!0)||(e.style.userSelect="none",e.style.webkitUserSelect="none")),e),_h=(e,r,n,i,a)=>{const u=Mr(r,"text",a);return Qo(u,n,e,i)},Ih=(e,r,n,i,a,u={})=>{u.strokeStyle||(u={...u,strokeStyle:zd("bg-dim","silver")}),u.strokeWidth||(u={...u,strokeWidth:1});const o=qa("g");Ir(o,u),es(o,u),Ur(o,u);let s=0;for(;s<a;){const l=Ui(0,s,i,s);sa(l,o),s+=n}let c=0;for(;c<i;){const l=Ui(c,0,c,a);sa(l,o),c+=n}return e.appendChild(o),o},Mr=(e,r,n)=>{let i=null;if(n!==void 0&&(typeof n=="string"?i=e.querySelector(n):i=n),i===null){const a=document.createElementNS("http://www.w3.org/2000/svg",r);return e.appendChild(a),n&&typeof n=="string"&&n.startsWith("#")&&(a.id=n.substring(1)),a}return i},Ph=(e,r)=>{if(typeof r=="string"){const n=e.querySelector(r);if(n===null)return;n.remove()}else r.remove()},xD=e=>{let r=e.lastElementChild;for(;r;)e.removeChild(r),r=e.lastElementChild},qa=(e,r)=>{const n=document.createElementNS("http://www.w3.org/2000/svg",e);return r&&(n.id=r),n},es=(e,r)=>{r.markerEnd&&e.setAttribute("marker-end",Au(e,r.markerEnd)),r.markerStart&&e.setAttribute("marker-start",Au(e,r.markerStart)),r.markerMid&&e.setAttribute("marker-mid",Au(e,r.markerMid))},Ir=(e,r)=>{r.fillStyle&&e.setAttributeNS(null,"fill",r.fillStyle),r.opacity&&e.setAttributeNS(null,"opacity",r.opacity.toString())},Ur=(e,r)=>{r.strokeStyle&&e.setAttributeNS(null,"stroke",r.strokeStyle),r.strokeWidth&&e.setAttributeNS(null,"stroke-width",r.strokeWidth.toString()),r.strokeDash&&e.setAttribute("stroke-dasharray",r.strokeDash),r.strokeLineCap&&e.setAttribute("stroke-linecap",r.strokeLineCap)},UD=e=>{const r=e.getAttributeNS(null,"width"),n=r===null?0:parseFloat(r),i=e.getAttributeNS(null,"height"),a=i===null?0:parseFloat(i);return{width:n,height:a}},VD=(e,r)=>{e.setAttributeNS(null,"width",r.width.toString()),e.setAttributeNS(null,"height",r.height.toString())},HD=(e,r)=>(r&&(Ir(e,r),Ur(e,r)),{remove:i=>Ph(e,i),text:(i,a,u,o)=>_h(i,e,a,u,o),textPath:(i,a,u,o)=>Mh(i,a,e,u,o),line:(i,a,u)=>sa(i,e,a,u),circle:(i,a,u)=>Ah(i,e,a,u),path:(i,a,u)=>bh(i,e,a,u),grid:(i,a,u,o,s)=>Ih(e,i,a,u,o,s),query:i=>e.querySelector(i),get width(){const i=e.getAttributeNS(null,"width");return i===null?0:parseFloat(i)},set width(i){e.setAttributeNS(null,"width",i.toString())},get parent(){return e},get height(){const i=e.getAttributeNS(null,"height");return i===null?0:parseFloat(i)},set height(i){e.setAttributeNS(null,"height",i.toString())},clear:()=>{for(;e.firstChild;)e.removeChild(e.lastChild)}}),ts={};G(ts,{AxisX:()=>qh,AxisY:()=>xh,Legend:()=>jh,Plot:()=>QD,PlotArea:()=>$h,Series:()=>Lh});var An={};G(An,{Box:()=>kh,CanvasBox:()=>Wn,CanvasLayoutState:()=>Oh,CanvasMeasureState:()=>zh,LayoutState:()=>Bh,MeasureState:()=>Nh,boxRectFromPx:()=>GD,boxRectFromRectPx:()=>KD,boxUnitFromPx:()=>Dr});var Dr=e=>({type:"px",value:e}),GD=(e,r,n,i)=>({x:Dr(e),y:Dr(r),width:Dr(n),height:Dr(i)}),KD=e=>({x:Dr(e.x),y:Dr(e.y),width:Dr(e.width),height:Dr(e.height)}),Ni=(e,r)=>e.type==="px"&&r.type==="px"?e.value===r.value:!1,JD=(e,r)=>e===void 0&&r===void 0?!0:!(e===void 0||r===void 0||e.x&&r.x&&!Ni(e.x,r.x)||e.y&&r.y&&!Ni(e.y,r.y)||e.width&&r.width&&!Ni(e.width,r.width)||e.height&&r.height&&!Ni(e.height,r.height)),Rh=class{bounds;pass;constructor(e){this.bounds=e,this.pass=0}resolveToPx(e,r,n){if(e===void 0&&n!==void 0)return n;if(e!==void 0){if(e.type===void 0)throw new TypeError("Expected 'type' and 'value' fields. Type is missing");if(e.value===void 0)throw new TypeError("Expected 'type' and 'value' fields. Value is missing");if(e.type==="px")return e.value;if(e.type==="pc")return e.value*r;throw new Error(`Unknown unit type: ${e.type}`)}}resolveBox(e){if(e===void 0)return;const r=this.resolveToPx(e.x,this.bounds.width),n=this.resolveToPx(e.y,this.bounds.height),i=this.resolveToPx(e.width,this.bounds.width),a=this.resolveToPx(e.height,this.bounds.height);if(!i||!a)throw new TypeError("Expected width and height");if(r===void 0&&n===void 0)return Object.freeze({width:i,height:a});if(!r||!n)throw new TypeError("Expected x and y");return Object.freeze({x:r,y:n,width:i,height:a})}},Nh=class extends Rh{measurements;constructor(e){super(e);this.measurements=new Map}getActualSize(e){const r=this.measurements.get(e);if(r!==void 0&&!wn(r.actual))return r.actual}whatIsMeasured(){return[...this.measurements.keys()]}},Bh=class extends Rh{layouts;constructor(e){super(e);this.layouts=new Map}},kh=class{canvasRegion=Yn;_desiredRect;_measuredSize;_layoutPosition;children=[];_parent;_idMap=new Map;debugLayout=!1;_visible=!0;_ready=!0;takesSpaceWhenInvisible=!1;_needsMeasuring=!0;_needsLayoutX=!0;_needsDrawing=!0;debugHue=jo();id;constructor(e,r){this.id=r,this._parent=e,e?.onChildAdded(this)}hasChild(e){const r=this.children.find(i=>i===e),n=this.children.find(i=>i.id===e.id);return r!==void 0||n!==void 0}notify(e,r){this.onNotify(e,r);for(const n of this.children)n.notify(e,r)}*getChildren(){return this.children.entries()}onNotify(e,r){}onChildAdded(e){if(e.hasChild(this))throw new Error("Recursive");if(e===this)throw new Error("Cannot add self as child");if(this.hasChild(e))throw new Error("Child already present");this.children.push(e),this._idMap.set(e.id,e),this.layoutInvalidated("Box.onChildAdded")}setReady(e,r=!1){if(this._ready=e,r)for(const n of this.children)n.setReady(e,r)}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.layoutInvalidated("Box.set visible"))}get desiredRegion(){return this._desiredRect}set desiredRegion(e){JD(e,this._desiredRect)||(this._desiredRect=e,this.layoutInvalidated("set desiredRegion"))}layoutInvalidated(e){if(e===void 0)debugger;this._needsMeasuring=!0,this._needsLayoutX=!0,this._needsDrawing=!0,this.notifyChildLayoutNeeded()}drawingInvalidated(e){this._needsDrawing=!0}notifyChildLayoutNeeded(){this._needsDrawing=!0,this._needsLayoutX=!0,this._needsMeasuring=!0,this._parent!==void 0&&this._parent.notifyChildLayoutNeeded()}get root(){return this._parent===void 0?this:this._parent.root}measurePreflight(){}measureApply(e){this._needsMeasuring=!1;const r=this._measuredSize===void 0?!0:!Of(e.actual,this._measuredSize);r&&(this._needsLayoutX=!0),this._measuredSize={width:e.actual.width,height:e.actual.height};for(const n of e.children)n!==void 0&&n.ref.measureApply(n);return r&&this.root.notify("measureApplied",this),r}layoutApply(e){this._needsLayoutX=!1;const r=this._layoutPosition===void 0?!0:!W.isEqual(e.actual,this._layoutPosition);this._layoutPosition={x:e.actual.x,y:e.actual.y};for(const n of e.children)n!==void 0&&n.ref.layoutApply(n);return r&&this.root.notify("layoutApplied",this),r}debugLog(e){!this.debugLayout||console.log(this.id,e)}layoutStart(e,r,n,i){const a={ref:this,actual:W.Empty,children:[]};r.layouts.set(this.id,a);const u=this.layoutSelf(e,r,i);if(this.root.notify("laidout",this),u!==void 0&&(a.actual=u,a.children=this.children.map(o=>o.layoutStart(e,r,n,a)),!($t.withoutUndefined(a.children).length<this.children.length)))return a}layoutSelf(e,r,n){const i=r.resolveBox(this._desiredRect),a=i===void 0?0:"x"in i?i.x:0,u=i===void 0?0:"y"in i?i.y:0;if(a===void 0)debugger;if(u===void 0)debugger;return{x:a,y:u}}measureStart(e,r,n){this.measurePreflight();const i={ref:this,actual:Hi,children:[]};if(e.measurements.set(this.id,i),!this._visible&&!this.takesSpaceWhenInvisible)i.actual=zf;else{let a=this._measuredSize;if((this._needsMeasuring||this._measuredSize===void 0)&&(a=this.measureSelf(e,n),this.root.notify("measured",this)),typeof a=="string")return;if(a===void 0)return;i.actual=a}if(i.children=this.children.map(a=>a.measureStart(e,r,i)),!($t.withoutUndefined(i.children).length<this.children.length))return i}measureSelf(e,r){let n=Hi;const i=r?r.actual:e.bounds,a=e.resolveBox(this._desiredRect);return n=a?Tf(a,i):i,wn(n)?"Box.measureSelf - No size for box?":n}update(e,r=!1){if(e===void 0)throw new Error("context is undefined");if(!this._needsMeasuring&&!this._needsLayoutX&&!r)return;const[n,i]=this.updateBegin(e);let a=5,u=!1,o=!1;if(this._needsMeasuring||r){for(;a--;){const s=this.measureStart(n,r);if(s!==void 0){if(this.measureApply(s),!this._ready)return;u=!0}}u||this.debugLog("Ran out of measurement attempts")}if(this._needsLayoutX||r){const s=this.layoutStart(n,i,r);s===void 0?this.debugLog("Warning: could not layout"):(this.layoutApply(s),o=!0)}this.updateComplete(u,o)}},zh=class extends Nh{ctx;constructor(e,r){super(e);if(this.ctx=r,r===void 0)throw new Error("ctx is undefined")}},Oh=class extends Bh{ctx;constructor(e,r){super(e);if(this.ctx=r,r===void 0)throw new Error("ctx is undefined")}},Wn=class Th extends kh{bounds;constructor(r,n,i){super(r,n);this.bounds=i}static fromCanvas(r){return new Th(void 0,"canvas-box",r.getBoundingClientRect())}addEventHandlers(r){r.addEventListener("pointermove",n=>{const i={x:n.offsetX,y:n.offsetY};this.notifyPointerMove(i)}),r.addEventListener("pointerleave",n=>{this.notifyPointerLeave()}),r.addEventListener("click",n=>{const i={x:n.offsetX,y:n.offsetY};this.notifyClick(i)})}onClick(r){}notifyClick(r){if(!wn(this.canvasRegion)&&Zn(this.canvasRegion,r)){const n=W.subtract(r,this.canvasRegion.x,this.canvasRegion.y);this.onClick(n);for(const i of this.children)i.notifyClick(n)}}notifyPointerLeave(){this.onPointerLeave();for(const r of this.children)r.notifyPointerLeave()}notifyPointerMove(r){if(!wn(this.canvasRegion)&&Zn(this.canvasRegion,r)){const n=W.subtract(r,this.canvasRegion.x,this.canvasRegion.y);this.onPointerMove(n);for(const i of this.children)i.notifyPointerMove(n)}}onPointerLeave(){}onPointerMove(r){}update(r,n=!1){super.update(r,n),this.draw(r,n)}getBounds(){return this.bounds===void 0&&this._parent?this._parent.bounds:this.bounds}updateBegin(r){if(r===void 0)throw new Error("Context is undefined");let n=this.getBounds();return n===void 0&&(this.debugLog("No bounds for element or parent, using canvas bounds"),n={x:0,y:0,width:r.canvas.width,height:r.canvas.height}),[new zh(n,r),new Oh(n,r)]}updateComplete(r,n){this.canvasRegion=Yn}measureApply(r){const n=super.measureApply(r);return n&&(this.canvasRegion=Yn),n}layoutApply(r){const n=super.layoutApply(r);return n&&(this.canvasRegion=Yn),n}draw(r,n=!1){if(this._needsDrawing||n){if(wn(this.canvasRegion)){if(this._layoutPosition===void 0||this._measuredSize===void 0)return;this.canvasRegion={x:this._layoutPosition.x,y:this._layoutPosition.y,width:this._measuredSize.width,height:this._measuredSize.height}}this._needsLayoutX||this._needsMeasuring,r.save();const i=this.canvasRegion;r.translate(i.x,i.y),this.debugLayout&&(r.lineWidth=1,r.strokeStyle=`hsl(${this.debugHue}, 100%, 50%)`,r.strokeRect(0,0,i.width,i.height),r.fillStyle=r.strokeStyle,r.fillText(this.id,10,10,i.width),r.beginPath(),r.moveTo(0,0),r.lineTo(i.width,i.height),r.stroke()),this.drawSelf(r),this._needsDrawing=!1,r.restore()}for(const i of this.children)i.draw(r,n)}drawSelf(r){}},Wh=class{data;series;dirty=!1;type="array";_range;constructor(e){this.series=e,this.data=[],this.dirty=!0}clear(){this.set([]),this._range=void 0}set(e){this.data=e,this.dirty=!0}get length(){return this.data.length}get range(){if(!this.dirty&&this._range!==void 0)return this._range;this.dirty=!1;const e=$t.minMaxAvg(this.data);return this._range===void 0||e.max!==this._range.max||e.min!==this._range.min?(this._range=e,{...this._range,changed:!0}):{...this._range,changed:!1}}add(e){this.data=[...this.data,e],this.dirty=!0}},YD=class extends Wh{desiredDataPointMinWidth=5;add(e){const r=this.series.lastPxPerPt;if(r>-1&&r<this.desiredDataPointMinWidth){const n=Math.floor(this.desiredDataPointMinWidth/r),i=[...this.data.slice(n),e];super.set(i)}else super.add(e)}},Lh=class{constructor(e,r,n,i){if(this.plot=n,this.name=e,this.drawingStyle=i.drawingStyle??"line",this.colour=i.colour,this.width=i.width??3,this.axisRange=i.axisRange??{min:Number.NaN,max:Number.NaN},this._visualRange={...this.axisRange},this._visualRangeStretch=i.visualRangeStretch??!0,r==="array")this.source=new Wh(this);else if(r==="stream")this.source=new YD(this);else throw new Error("Unknown sourceType. Expected array|stream")}name;colour;source;drawingStyle;width=3;dataHitPoint;tooltip;precision=2;axisRange;lastPxPerPt=-1;_visualRange;_visualRangeStretch;formatValue(e){return e.toFixed(this.precision)}get visualRange(){let e=this._visualRange;const r=this.source.range;let n=!1;if(r.changed)if(this._visualRangeStretch){const i=Math.min(co(e.min,r.min),r.min),a=Math.max(co(e.max,r.max),r.max);(i!==e.min||a!==e.max)&&(e={min:i,max:a},n=!0)}else XD(r,e)||(e=r,n=!0);return this._visualRange=e,{...e,changed:n}}scaleValue(e){if(this.source===void 0)return e;const r=this.visualRange;return r.changed&&this.plot.notify("range-change",this.plot.plotArea),r.min==r.max?.5:ur(e,r.min,r.max)}add(e){ee(e,"","value"),this.source.add(e),this.plot.plotArea.drawingInvalidated("Series.add")}clear(){this.source.clear(),this._visualRange={...this.axisRange},this.plot.plotArea.layoutInvalidated("Series.clear")}},$h=class extends Wn{constructor(e,r){super(e,"PlotArea",r);this.plot=e}paddingPx=5;piPi=Math.PI*2;pointerDistanceThreshold=20;lastRangeChange=0;pointer;clear(){this.lastRangeChange=0,this.pointer=void 0}measureSelf(e,r){const n=e.getActualSize("AxisY"),i=this.paddingPx,a=e.getActualSize("Legend"),u=a?.height??0,o=e.getActualSize("AxisX"),s=o?.height??0;return n?a?o?{width:e.bounds.width-n.width-this.paddingPx,height:e.bounds.height-u-s-i}:"No AxisX":"No Legend":`No AxisY. Measured: ${e.whatIsMeasured().join(", ")}`}layoutSelf(e,r,n){const i=e.getActualSize("AxisY"),a=this.paddingPx;return{x:i?.width??0,y:a}}onNotify(e,r){e==="measureApplied"&&r===this.plot.axisY&&this.layoutInvalidated("PlotArea.onNotify measureApplied to axisY"),e==="laidout"&&r===this.plot.legend&&this.layoutInvalidated("PlotArea.onNotify laidout to legend")}onPointerLeave(){for(const e of this.plot.series.values())e.tooltip=void 0;this.pointer=void 0,this.plot.legend.drawingInvalidated("PlotArea.onPointerLeave")}onPointerMove(e){this.pointer=e,this.plot.legend.drawingInvalidated("PlotArea.onPointerMove")}measurePreflight(){this.updateTooltip()}updateTooltip(){const e=this.pointer;if(e!==void 0){for(const r of this.plot.series.values()){if(e===void 0){r.tooltip=void 0;return}if(r.dataHitPoint===void 0)return;const n=r.dataHitPoint(e);if(n[0]===void 0||n[1]>this.pointerDistanceThreshold)return;r.tooltip=r.formatValue(n[0].value)}this.plot.legend.drawingInvalidated("PlotArea.updateTooltip")}}drawSelf(e){if(this.plot.frozen)return;const r=this.plot.seriesArray();e.clearRect(0,-1,this.canvasRegion.width,this.canvasRegion.height);for(const n of r)if(n.source.type==="array"||n.source.type==="stream"){const i=n.source;if(i.data===void 0)return;const a=[...i.data];this.drawDataSet(n,a,e)}else console.warn(`Unknown data source type ${n.source.type}`)}computeY(e,r){const n=e.scaleValue(r);return $i(n)*this.canvasRegion.height+this.paddingPx}drawDataSet(e,r,n){const i=this.paddingPx+e.width,a=me.subtract(this.canvasRegion,i*2,i*3.5),u=a.width/r.length;e.lastPxPerPt=u;let o=i;n.strokeStyle=e.colour,n.lineWidth=e.width;const s=[];if(e.dataHitPoint=c=>{const l=s.map(v=>W.distanceToExterior(c,v)),f=ly(...l);return[s[f],l[f]]},e.drawingStyle==="line"){let c=0;n.beginPath();for(let l=0;l<r.length;l++){const f=Wt(e.scaleValue(r[l]));c=i+this.paddingPx+a.height*$i(f),s.push({x:o,y:c,index:l,value:r[l]}),l==0?n.moveTo(o+u/2,c):n.lineTo(o+u/2,c),c>this.canvasRegion.height&&console.warn(`${c} h: ${this.canvasRegion.height}`),o+=u}n.strokeStyle=e.colour,n.stroke()}else if(e.drawingStyle==="dotted"){let c=0;n.fillStyle=e.colour;for(let l=0;l<r.length;l++){const f=e.scaleValue(r[l]);c=i+a.height*$i(f),n.beginPath(),n.arc(o+u/2,c,e.width,0,this.piPi),n.fill(),s.push({radius:e.width,x:o,y:c,index:l,value:r[l]}),o+=u}}else if(e.drawingStyle==="bar"){n.fillStyle=e.colour;const c=Math.ceil(u*.1);for(let l=0;l<r.length;l++){const f=e.scaleValue(r[l]),d=a.height*f,v={x:o+c,y:a.height-d+i,width:u-c,height:d,index:l,value:r[l]};n.fillRect(v.x,v.y,v.width,v.height),s.push(v),o+=u}}}},jh=class extends Wn{constructor(e,r){super(e,"Legend",r);this.plot=e}sampleSize={width:10,height:10};padding=3;widthSnapping=20;labelMeasurements=new Map;clear(){}layoutSelf(e,r,n){const a=e.getActualSize("AxisY")?.width??0,u=this._measuredSize?.height??0;return{x:a,y:r.bounds.height-u}}measureSelf(e,r){const n=this.plot.seriesArray(),i=this.sampleSize,a=this.padding,u=this.widthSnapping,o=e.ctx,c=e.measurements.get("AxisY")?.actual.width??0;let l=a,f=a;const d=e.bounds.width-c-a;let v=0;for(const g of n){const P=l;l+=i.width+a,o.textBaseline="middle";const L=ja(o,g.name,a,u);l+=ua(o,g.name,a,u),g.tooltip&&(l+=ua(o,g.tooltip,a,u));const B={width:10,height:10,x:P,y:f};this.labelMeasurements.set(g.name,B),v=Math.min(i.height+a+a,L.height+a+a),l+=a,l>d&&(l=a,f+=v)}return{width:d,height:f+v}}drawSelf(e){const r=this.plot.seriesArray(),n=this.sampleSize,i=this.padding;this.debugLog("drawSelf"),e.clearRect(0,0,this.canvasRegion.width,this.canvasRegion.height);for(const a of r){const u=this.labelMeasurements.get(a.name);if(u===void 0)continue;let o=u.x;e.fillStyle=a.colour,e.fillRect(o,u.y,n.width,n.height),o+=n.width+i,e.textBaseline="middle",e.fillStyle=this.plot.legendTextColour,e.fillText(a.name,o,u.y+n.height/2),a.tooltip&&(e.fillStyle=this.plot.legendTextColour,e.fillText(a.tooltip,u.x,u.y+n.height/2))}}onNotify(e,r){this.debugLog(`onNotify ${e} source: ${r.id}`),e==="measureApplied"&&r===this._parent.axisY&&this.layoutInvalidated("Legend.onNotify measureApplied to axisY")}},qh=class extends Wn{constructor(e,r){super(e,"AxisX",r);this.plot=e}paddingPx=2;colour;clear(){}onNotify(e,r){e==="measureApplied"&&r===this.plot.axisY&&this.layoutInvalidated("AxisX.onNotify measureApplied to axisY")}drawSelf(e){const r=this.plot,n=this.canvasRegion,i=r.axisStrokeWidth,a=this.colour??r.axisStrokeColour;e.strokeStyle=a,e.clearRect(0,0,n.width,n.height),e.beginPath(),e.lineWidth=i,e.moveTo(0,i/2),e.lineTo(n.width,i/2),e.stroke()}measureSelf(e,r){const n=this.plot,i=this.paddingPx,u=e.measurements.get("AxisY")?.actual.width??0,o=0,s=n.axisStrokeWidth+o+i+i;return{width:e.bounds.width-u-i,height:s}}layoutSelf(e,r,n){const i=e.measurements.get("AxisY"),u=e.getActualSize("Legend")?.height??0,o=i?.actual.width??0,s=this._measuredSize?.height??0;return{x:o,y:e.bounds.height-s-u}}},XD=(e,r)=>e.max===r.max&&e.min===r.min,ZD=e=>e.max===e.min,xh=class extends Wn{constructor(e,r){super(e,"AxisY",r);this.plot=e,this.lastRange={min:0,max:0}}_maxDigits=1;seriesToShow;paddingPx=2;colour;lastRange;lastPlotAreaHeight=0;clear(){this.lastRange={min:0,max:0},this.lastPlotAreaHeight=0}measurePreflight(){}onNotify(e,r){const n=this.plot.plotArea;if(e==="range-change"){this.drawingInvalidated("range-change");return}e==="measureApplied"&&r===n&&n.canvasRegion.height!==this.lastPlotAreaHeight&&(this.lastPlotAreaHeight=n.canvasRegion.height,this.drawingInvalidated("AxisY.onNotify height change"))}measureSelf(e){if(e.ctx===void 0)throw new Error("opts.ctx is undefined");const r=this.paddingPx;let n=this.plot.axisStrokeWidth+r;const i=this.getSeries();if(i!==void 0){const u=i.visualRange;this._maxDigits=Math.ceil(u.max).toString().length+i.precision+1;const o="9".repeat(this._maxDigits);n+=ua(e.ctx,o,r*2)}return{width:e.resolveToPx(this.desiredRegion?.width,n,n),height:e.bounds.height}}layoutSelf(e,r,n){return{x:0,y:0}}drawSelf(e){const r=this.getSeries();if(r===void 0){if(this.seriesToShow===void 0)return;console.warn(`Plot AxisY series '${this.seriesToShow}' is missing.`)}else this.seriesAxis(r,e)}getSeries(){return this.seriesToShow===void 0?this.plot.seriesArray()[0]:this.plot.series.get(this.seriesToShow)}seriesAxis(e,r){const n=this.plot,i=n.plotArea,a=this.canvasRegion,u=this.paddingPx,o=e.visualRange,s=n.axisStrokeWidth,c=this.colour??n.axisStrokeColour;if(r.strokeStyle=c,r.fillStyle=c,Number.isNaN(o.min)&&Number.isNaN(o.max))return;this.lastRange=o,r.clearRect(0,0,a.width,a.height),r.beginPath(),r.lineWidth=s;const l=a.width-s/2;r.moveTo(l,i.paddingPx+s),r.lineTo(l,i.canvasRegion.height+u+s+s),r.stroke(),r.textBaseline="top";const f=a.width-u*4;r.fillStyle=n.axisTextColour,ZD(o)?(this.debugLog("rangeSinglePoint"),Cu(r,e.formatValue(o.max),d=>[f-d.width,i.computeY(e,o.max)-u*4])):(Cu(r,e.formatValue(o.max),d=>[f-d.width,i.computeY(e,o.max)+s/2]),Cu(r,e.formatValue(o.min),d=>[f-d.width,i.computeY(e,o.min)-5]))}},Cu=(e,r,n)=>{if(e===void 0)throw new Error("ctx is undefined");const i=e.measureText(r),a=n(i);e.fillText(r,a[0],a[1])},QD=class extends Wn{plotArea;legend;axisX;axisY;axisStrokeColour;axisTextColour;legendTextColour;axisStrokeWidth;series;_frozen=!1;_canvasEl;_ctx;defaultSeriesOpts;constructor(e,r={}){const{ctx:n,element:i,bounds:a}=b0(e);super(void 0,"Plot",a);this._canvasEl=i,this._ctx=n,r.autoSize&&Ko(i,u=>{this.drawingInvalidated("resize"),this.update(u.ctx,!0)}),this.axisStrokeColour=r.axisStrokeColour??"black",this.axisTextColour=r.axisTextColour??"black",this.legendTextColour=r.legendTextColour??"black",this.axisStrokeWidth=r.axisStrokeWidth??3,this.series=new Map,this.plotArea=new $h(this,a),this.legend=new jh(this,a),this.axisX=new qh(this,a),this.axisY=new xh(this,a)}update(e,r=!1){e===void 0&&(e=this._ctx),super.update(e,r)}clearSeries(){for(const e of this.series.values())e.clear();this.update()}clear(){this.series=new Map,this.plotArea.clear(),this.legend.clear(),this.axisX.clear(),this.axisY.clear(),this.layoutInvalidated("Plot.clear"),this.drawingInvalidated("Plot.clear"),this.update()}get frozen(){return this._frozen}set frozen(e){this._frozen=e,e?(this._canvasEl.classList.add("frozen"),this._canvasEl.title="Plot frozen. Tap to unfreeze"):(this._canvasEl.title="",this._canvasEl.classList.remove("frozen"))}seriesArray(){return[...this.series.values()]}get seriesLength(){return this.series.size}plot(e){const r=Ay(e);let n=!1;for(const i of r){let a=this.series.get(i);a===void 0&&(a=this.createSeries(i,"stream"),a.drawingStyle="line",n=!0),a.add(Gs(e,i))}n&&this.legend.layoutInvalidated("new series"),this.update()}createSeriesFromObject(e,r=""){const n=Object.keys(e),i=a=>{const u=e[a];return typeof u=="object"?this.createSeriesFromObject(u,`${r}${a}.`):typeof u=="number"?[this.createSeries(a,"stream")]:[]};return n.flatMap(a=>i(a))}createSeries(e,r="array",n){const i=this.seriesLength;if(e===void 0&&(e=`series-${i}`),this.series.has(e))throw new Error(`Series name '${e}' already in use`);let a={colour:`hsl(${i*25%360}, 70%,50%)`,...n};this.defaultSeriesOpts&&(a={...this.defaultSeriesOpts,...a});const u=new Lh(e,r,this,a);return this.series.set(e,u),this.setReady(!0,!0),this.plotArea.drawingInvalidated("Plot.createSeries"),u}},rs={};G(rs,{create:()=>eA});var eA=e=>new tA(e),tA=class{#e=new Map;#t=new Map;fallbacks;#r=0;#n;constructor(e){e!==void 0?this.fallbacks=e:this.fallbacks=["red","blue","green","orange"],this.#n=document.body}setElementBase(e){this.#n=e}add(e,r){this.#e.set(e,r)}alias(e,r){this.#t.set(e,r)}get(e,r){const n=this.#t.get(e);n!==void 0&&(e=n);const i=this.#e.get(e);if(i!==void 0)return i;const a="--"+e;let u=getComputedStyle(this.#n).getPropertyValue(a).trim();if(u===void 0||u.length===0){if(r!==void 0)return r;u=this.fallbacks[this.#r],this.#r++,this.#r===this.fallbacks.length&&(this.#r=0)}return u}getOrAdd(e,r){if(this.has(e))return this.get(e);const n=this.get(e,r);return this.add(e,n),n}has(e){return this.#e.has(e)}},ns={};G(ns,{capture:()=>nA,frames:()=>rA,manualCapture:()=>Uh});async function*rA(e,r={}){const n=r.maxIntervalMs??0,i=r.showCanvas??!1;let a=r.canvasEl,u,o;u=o=0,a===void 0&&(a=document.createElement("CANVAS"),a.classList.add("ixfx-frames"),i||(a.style.display="none"),document.body.appendChild(a));const s=()=>{a!==void 0&&(u=e.videoWidth,o=e.videoHeight,a.width=u,a.height=o)};let c=null;const l=Ms(n);for await(const f of l){if((u===0||o===0)&&s(),u===0||o===0)continue;if(c===null&&(c=a.getContext("2d")),c===null)return;c.drawImage(e,0,0,u,o),yield c.getImageData(0,0,u,o)}}var nA=(e,r={})=>{const n=r.maxIntervalMs??0,i=r.showCanvas??!1,a=r.onFrame,u=e.videoWidth,o=e.videoHeight,s=document.createElement("CANVAS");s.classList.add("ixfx-capture"),i||(s.style.display="none"),s.width=u,s.height=o;let c=null,l;r.workerScript&&(l=new Worker(r.workerScript));const f=l||a;!f&&!i&&console.warn("Video will be captured to hidden element without any processing. Is this what you want?");const d=Vs(()=>{if(c===null&&(c=s.getContext("2d")),c===null)return;c.drawImage(e,0,0,u,o);let v;if(f&&(v=c.getImageData(0,0,u,o)),l&&l.postMessage({pixels:v.data.buffer,width:u,height:o,channels:4},[v.data.buffer]),a)try{a(v)}catch(g){console.error(g)}},n);return{start:()=>d.start(),cancel:()=>d.cancel(),canvasEl:s}},Uh=(e,r={})=>{const n=r.showCanvas??!1,i=e.videoWidth,a=e.videoHeight,u=r.canvasEl!==void 0;let o=r.canvasEl;return o||(o=document.createElement("CANVAS"),o.classList.add("ixfx-capture"),document.body.append(o),n||(o.style.display="none")),o.width=i,o.height=a,{canvasEl:o,capture:()=>{let f;if(f||(f=o?.getContext("2d",{willReadFrequently:!0})),!f)throw new Error("Could not create graphics context");f.drawImage(e,0,0,i,a);const d=f.getImageData(0,0,i,a);return d.currentTime=e.currentTime,r.postCaptureDraw&&r.postCaptureDraw(f,i,a),d},dispose:()=>{if(!u)try{o?.remove()}catch{}}}},is={};G(is,{accessor:()=>iA});var iA=e=>{const r={rows:e.width,cols:e.height},n=e.data;return(a,u)=>{const o=_a(r,a,u);if(o===void 0)return;const s=o*4;return{r:n[s],g:n[s+1],b:n[s+2],opacity:n[s+3]}}},Vh={};G(Vh,{init:()=>oA});var Hh={};G(Hh,{clamp:()=>tn,fromScalar:()=>aA,immutable:()=>hn,scale:()=>uA,toScalar:()=>Gh,towardZero:()=>Kh});var hn=(e=0)=>{const r=typeof e=="number"?e:e.value;if(r>1)throw new Error("Cannot be larger than 1");if(r<-1)throw new Error("Cannot be smaller than -1");if(Number.isNaN(r))throw new Error("startingValue is NaN");const n=r;return{[Symbol.toPrimitive](i){return i==="number"?n:i==="string"?n.toString():!0},value:n,towardZero:i=>hn(Kh(n,i)),add:i=>hn(tn(n+i)),multiply:i=>hn(tn(n*i)),inverse:()=>hn(-n),interpolate:(i,a)=>hn(tn(Za(i,n,a))),asScalar:()=>Gh(n)}},Gh=e=>{if(typeof e!="number")throw new Error(`Expected v to be a number. Got: ${typeof e}`);if(Number.isNaN(e))throw new Error("Parameter is NaN");return(e+1)/2},aA=e=>(ee(e,"percentage","v"),e*2-1),uA=(e,r,n)=>tn(yo(r,n,-1,1)(e)),tn=e=>{if(typeof e!="number")throw new Error(`Parameter must be a number. Got: ${typeof e}`);if(Number.isNaN(e))throw new Error("v parameter is NaN");return e>1?1:e<-1?-1:e},Kh=(e,r)=>{if(typeof e!="number")throw new Error(`Parameter 'v' must be a number. Got: ${typeof e}`);if(typeof r!="number")throw new Error(`Parameter 'amt' must be a number. Got: ${typeof r}`);if(r<0)throw new Error("Parameter 'amt' must be positive");return e<0?(e+=r,e>0&&(e=0)):e>0&&(e-=r,e<0&&(e=0)),e};function _c(e,r,n){const i=e.getAttribute(r);return i===null?n:Number.parseInt(i)}var oA=(e,r={})=>{const n=document.querySelector(e);if(!n)throw new Error(`Element query could not be found (${e})`);const i=r.labels??["x","y"],a=r.labelPrecision??2,u=r.asPercentages??!1,o=r.showWhiskers??!0,s=r.showDot??!0,c=r.showLabels??!0,l=r.axisColour??"silver",f=r.bgColour??"white",d=r.whiskerColour??"black",v=r.dotColour??d,g=r.labelColour??l,P=r.axisWidth??1*window.devicePixelRatio,L=r.dotRadius??5*window.devicePixelRatio,B=r.padding??10*window.devicePixelRatio,S=r.whiskerSize??5*window.devicePixelRatio,C=r.width??_c(n,"width",200)*window.devicePixelRatio,N=r.height??_c(n,"height",200)*window.devicePixelRatio;n.width=C,n.height=N,n.style.width=C/window.devicePixelRatio+"px",n.style.height=N/window.devicePixelRatio+"px";const x=N/2,z=C/2,I=n.getContext("2d");if(!I)throw new Error("Could not create drawing context");window.devicePixelRatio>=2&&(I.font="20px sans-serif");const V=u?X=>Math.round(X*100)+"%":X=>X.toFixed(a);c?(i[0]=i[0]+":",i[1]=i[1]+":"):(i[0]="",i[1]="");const q=r.renderBackground??((X,ne,ye)=>{X.fillStyle=f,X.fillRect(0,0,ne,ye)});return(X,ne)=>{X=tn(X),ne=tn(ne),q(I,C,N),I.fillStyle=g,I.textBaseline="top",I.save(),I.translate(z,x),I.rotate(-Math.PI/2),I.fillText((i[1]+" "+V(ne)).trim(),-z+B,1),I.restore(),I.fillText((i[0]+" "+V(X)).trim(),B,z+2),I.strokeStyle=l,I.lineWidth=P,I.beginPath(),I.moveTo(B,x),I.lineTo(C-B,x),I.moveTo(z,B),I.lineTo(z,N-B),I.stroke(),I.closePath();const ye=(N-B-B)/2*-ne,de=(C-B-B)/2*X;I.save(),I.translate(z,x),s&&Ei.circle(I,{radius:L,x:de,y:ye},{fillStyle:v}),o&&(I.strokeStyle=d,I.beginPath(),I.moveTo(0,ye-S),I.lineTo(0,ye+S),I.moveTo(de-S,0),I.lineTo(de+S,0),I.stroke(),I.closePath()),I.restore()}},Jh={};G(Jh,{scalarCanvasPlot:()=>UA,scalarPlotData:()=>v0});var Yh={};G(Yh,{As:()=>e0,Feed:()=>a0,Fns:()=>c0,From:()=>i0,LogSink:()=>qA,NullSink:()=>ai,Ops:()=>n0,Signals:()=>Me,bidi:()=>Re,compose:()=>h0,isFinitePipe:()=>as,rxWindow:()=>xA});function ke(e,r){if(Xh(e)){if(typeof e=="number")return e;let n=e.millis??0;return n+=(e.hours??0)*60*60*1e3,n+=(e.mins??0)*60*1e3,n+=(e.secs??0)*1e3,n}else{if(typeof r<"u")return r;throw new Error(`Not a valid interval: ${e}`)}}function Xh(e){if(e===void 0||e===null)return!1;if(typeof e=="number")return!(Number.isNaN(e)||!Number.isFinite(e));if(typeof e!="object")return!1;const r="millis"in e,n="secs"in e,i="mins"in e,a="hours"in e;return r&&!Ce(e.millis)[0]||n&&!Ce(e.secs)[0]||i&&!Ce(e.mins)[0]||a&&!Ce(e.hours)[0]?!1:!!(r||n||a||i)}var xa=async function*(e,r={}){let n=!1;const i=typeof r=="number"?{fixed:r}:r,a=i.signal,u=i.delay??"before";let o=ke(i.fixed)??ke(i.minimum,0),s=performance.now();const c=i.minimum?ke(i.minimum):void 0,l=async()=>{const d=performance.now()-s;if(typeof c<"u"&&(o=Math.max(0,c-d)),o&&await ht({millis:o,signal:a}),s=performance.now(),a?.aborted)throw new Error(`Signal aborted ${a.reason}`)};Array.isArray(e)&&(e=e.values());const f=typeof e=="object"&&"next"in e&&typeof e.next=="function";try{for(;!n;){if(u==="before"&&await l(),typeof e=="function"){const d=await e();if(typeof d>"u")return;yield d}else if(f){const d=await e.next();if(d.done)return;yield d.value}else throw new Error("produce param does not seem to return a value/Promise and is not a generator?");u==="after"&&await l()}}finally{n=!0}},Me={};G(Me,{close:()=>sA,emptyInOut:()=>lA,error:()=>cA,isClosed:()=>Qh,isEmpty:()=>hA,isError:()=>dA,isSignal:()=>Zh,isValue:()=>fA});var sA=e=>[void 0,{type:"closed",source:e}],cA=(e,r,n)=>[void 0,{type:"error",message:e,source:r,stack:n}],lA=[void 0,void 0];function Zh(e){return!(e[0]!==void 0||e[1]===void 0)}function fA(e){return!(e[0]===void 0||e[1]!==void 0)}function dA(e){const[r,n]=e;return n===void 0?!1:n.type==="error"}function Qh(e){const[r,n]=e;return n===void 0||r!==void 0?!1:n.type==="closed"}function hA(e){return e[0]===void 0&&e[1]===void 0}var e0={};G(e0,{asArray:()=>vA,asAsyncIterable:()=>t0,asPromise:()=>Zu,basic:()=>r0,basicBidi:()=>yA});function as(e){return"isClosed"in e}async function Zu(e){if(as(e)&&e.isClosed())throw new Error("Finite pipe has closed");let r;const i=(()=>new Promise((u,o)=>{r=u}))();return e.setOutlet(a=>{r(a[0])}),i}async function*t0(e){let r=Zu(e);for(;;){const n=await r;if(n===void 0||(yield n,as(e)&&e.isClosed()))return;r=Zu(e)}}var vA=async(e,r={})=>{const n=[],i=r.maximumValues??Number.MAX_SAFE_INTEGER;for await(const a of t0(e)){if(n.length>=i)break;n.push(a)}return n},r0=(e,r=!1)=>({get value(){return e.last()},on(i){if(e.setOutlet(a=>{i(a[0],a[1])}),r){const a=e.last();if(a===void 0)return;i(a)}}}),yA=e=>({get value(){return e.last()},set value(n){e.inlet([n,void 0])},on(n){e.setOutlet(i=>{n(i[0],i[1])})}}),n0={};G(n0,{chunk:()=>BA,emit:()=>f0,filter:()=>RA,filterAB:()=>zA,filterTap:()=>OA,isOnePipeOp:()=>l0,mergeValues:()=>jA,minMaxAvgTotal:()=>WA,monitor:()=>PA,reduce:()=>TA,split:()=>LA,synchronise:()=>$A,take:()=>IA,throttle:()=>d0,transform:()=>NA,window:()=>kA});var i0={};G(i0,{array:()=>EA,callback:()=>DA,event:()=>s0,number:()=>us,pipes:()=>CA,trigger:()=>AA});var a0={};G(a0,{feedGenerator:()=>wA,feedIterable:()=>u0,feedPipes:()=>o0,feedTrigger:()=>bA});var mA="feedIterable",gA="feedGenerator",pA="feedPipes",u0=(e,r,n={})=>{const i=ke(n.interval,0),a=n.keepOpen??!1,u=n.maximumValues??Number.MAX_SAFE_INTEGER;let o=0;const s=()=>{a||e.inlet(Me.close(mA))},c=()=>{if(o>=u){s();return}const l=r.next();if(l.done){s();return}else e.inlet([l.value,void 0]),o++;setTimeout(c,i)};setTimeout(c,i)},wA=async(e,r,n={})=>{const i=n.keepOpen??!1;let a=n.maximumValues??Number.MAX_SAFE_INTEGER;const u=ke(n.interval,0);if(u===0){for(const o of r)if(e.inlet([o,void 0]),--a<=0)break}else for await(const o of xa(r,u))if(e.inlet([o,void 0]),--a<=0)break;i||e.inlet(Me.close(gA))},bA=e=>n=>{e.inlet(n)},o0=(e,r,n={})=>{const i=n.close??"all";r=[...r];let a=0;const u=()=>{for(const o of r)o.setOutlet(ai);e.inlet(Me.close(pA))};for(const o of r)o.setOutlet(s=>{if(Me.isClosed(s))switch(i){case"all":{a++,o.setOutlet(ai),a>=r.length&&u();return}case"any":{u();return}case"never":return}e.inlet(s)})},EA=(e,r={})=>{const n=Re();return u0(n,e.values(),r),n},DA=e=>{const r=Re();return[r,i=>{r.inlet([e(i),void 0])}]},AA=(e,r={})=>{const n=Re(r),i=()=>{typeof e=="function"?n.inlet(e()):n.inlet([e,void 0])};return r.primeOutlet&&i(),[n,i]},us=e=>typeof e=="number"?Re({initialValue:e,primeOutlet:!0}):e,s0=(e,r)=>{let n=!1;const i=Re({signalHandler:u=>u.type==="dispose"&&!n?(e.removeEventListener(r,a),n=!0,!0):!1}),a=u=>{i.inlet([u,void 0])};if("addEventListener"in e)e.addEventListener(r,a);else throw new Error("eventObject does not have 'addEventListener' as expected");return i},CA=(...e)=>{const r=Re();return o0(r,e,{close:"all"}),r},c0={};G(c0,{inlet:()=>os,insert:()=>SA,signal:()=>FA});var SA=(e,r)=>{const n=e.getOutlet();e.setOutlet(r),n&&r.setOutlet(n)},os=(e,...r)=>{for(const n of r)n.inlet(e)},FA=(e,r)=>{e.inlet([void 0,r])};function l0(e){return"_type"in e&&e._type==="One"}var MA="take",_A="synchronise",IA=e=>{let r=0;const n=e.length,i=e.keepOpen??!1,a=u=>{const o=Re();return u.setOutlet(s=>{if(r>=n){if(u.setOutlet(ai),i)return;o.inlet(Me.close(MA));return}o.inlet(s),Me.isValue(s)&&r++}),o};return a._type="One",a},PA=(e,r)=>{const n=i=>{const a=Re();let u=r;return i.setOutlet(o=>{u=e(o,u),a.inlet(o)}),a};return n._type="One",n},RA=e=>{const r=n=>{const i=Re();return n.setOutlet(a=>{Me.isValue(a)?e(a[0])&&i.inlet(a):i.inlet(a)}),i};return r._type="One",r},NA=e=>{const r=n=>{const i=Re();return n.setOutlet(a=>{Me.isValue(a)?i.inlet([e(a[0]),void 0]):i.inlet([void 0,a[1]])}),i};return r._type="One",r},BA=(e,r=!0)=>{const n=i=>{const a=Re();let u=[];const o=us(e);return i.setOutlet(s=>{Me.isValue(s)?(u.push(s[0]),u.length>=(o.last()??0)&&(a.inlet([u,void 0]),u=[])):(Me.isClosed(s)&&u.length>0&&r&&a.inlet([u,void 0]),a.inlet([void 0,s[1]]))}),a};return n._type="One",n},kA=e=>{const r=n=>{const i=Re();let a=[];const u=us(e);return n.setOutlet(o=>{Me.isValue(o)?(a.push(o[0]),a.length>(u.last()??0)&&(a=a.slice(1)),i.inlet([a,void 0])):i.inlet([void 0,o[1]])}),i};return r._type="One",r},f0=(e,r)=>{const n=r.when,i=r.passIfNotHandled??!0,a=u=>{const o=Re();return u.setOutlet(s=>{switch(n){case"any":{o.inlet([e(),void 0]);return}case"signal":{if(Me.isSignal(s)){o.inlet([e(),void 0]);return}break}case"emit-signal":{if(Me.isSignal(s)&&s[1].type==="emit"){o.inlet([e(),void 0]);return}break}}i&&o.inlet([s[0],s[1]])}),o};return a._type="One",a},zA=e=>{const r=n=>{const i=Re(),a=Re();return n.setOutlet(u=>{Me.isValue(u)?e(u[0])?i.inlet(u):a.inlet(u):os(u,i,a)}),[i,a]};return r._type="OneToMany",r},OA=e=>{const r=n=>{const i=Re(),a=Re();return n.setOutlet(u=>{Me.isValue(u)&&e(u[0])&&i.inlet(u),a.inlet(u)}),[i,a]};return r._type="OneToMany",r},TA=e=>{const r=n=>{const i=Re();return n.setOutlet(a=>{Me.isValue(a)?i.inlet([e(a[0]),void 0]):i.inlet([void 0,a[1]])}),i};return r._type="One",r},WA=()=>{const e=r=>{const n=Re();let i=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,u=Number.NaN,o=0,s=1;return r.setOutlet(c=>{if(Me.isValue(c)){const l=c[0];l>a&&(a=l),l<i&&(i=l),o+=l,s++,u=o/s,n.inlet([{min:i,max:a,avg:u,total:o},void 0])}else n.inlet([void 0,c[1]])}),n};return e._type="One",e},LA=(e={})=>{const r=e.copies??2,n=e.filterSignals??!1,i=a=>{const u=[...Hs(r,()=>Re())],o=s=>{n&&Me.isSignal(s)||os(s,...u)};return a.setOutlet(o),u};return i._type="OneToMany",i},$A=e=>{const r=e.overwritePolicy??"latest",n=e.loop??!0,i=a=>{let u=[];const o=Re(),s=()=>{u=[];for(const[f]of a.entries())u[f]=void 0},c=()=>{u.includes(void 0)||(o.inlet([u,void 0]),n?s():l())},l=()=>{for(const f of a)f.setOutlet(ai);o.inlet(Me.close(_A))};s();for(const[f,d]of a.entries())d.setOutlet(v=>{if(!Me.isValue(v))return;const g=v[0];switch(r){case"first":{u[f]!==void 0&&(u[f]=g);break}case"latest":u[f]=g}c()});return o};return i._type="ManyToOne",i},d0=e=>{const r=ke(e,0),n=i=>{const a=Re();let u=0,o=0,s;const c=()=>{const l=performance.now()-u;if(l>r){u=performance.now(),s!==void 0&&a.inlet([s,void 0]),clearTimeout(o);return}clearTimeout(o),o=setTimeout(c,r-l)};return i.setOutlet(l=>{Me.isValue(l)?(s=l[0],c()):a.inlet(l)}),a};return n._type="One",n},jA=(e,r)=>{const n=i=>{const a=Re(),u=[],o=r.allowUndefinedValues??!1;let s=!0;const c=()=>{if(s&&(u.includes(void 0)||(s=!1)),!o&&s)return;const l=e(...u);a.inlet([l,void 0])};for(const[l]of i.entries())u[l]=void 0;for(const[l,f]of i.entries())f.setOutlet(d=>{Me.isValue(d)&&(u[l]=d[0],c())});return a};return n._type="ManyToOne",n},ai=e=>{},qA=(e,r)=>{console.log(r?`Pipes.LogSink value: ${JSON.stringify(e)} signal: ${JSON.stringify(r)}`:`Pipes.LogSink value: ${JSON.stringify(e)}`)},Re=(e={})=>{const r=e.primeOutlet??!1,n=e.signalHandler;let i,a=[e.initialValue,void 0],u=!1;return{signal:f=>{n&&n(f)||(i?i([void 0,f]):console.warn("signal called on a pipe with no outlet"))},getOutlet:()=>i,inlet:f=>{Zh(f)?Qh(f)&&(u=!0):a=f,i&&i(f)},setOutlet:(f,d={})=>{if(u)throw new Error("Pipe is closed");i=typeof f=="function"?f:f.inlet,a[0]&&(r||d.primeOutlet)&&i(a)},last:()=>a[0],isClosed:()=>u}},h0=(...e)=>{let r,n;for(const a of e)if(r===void 0&&(r=a),n===void 0)n=a;else{const u=a;if(l0(u))r=u(r);else throw console.log(a),new Error("Unknown pipe")}if(r===void 0)throw new Error("No pipes");return{getOutlet(){return n?.getOutlet},inlet(a){if(n===void 0)throw new Error("No first pipe");"inlet"in n?n.inlet(a):a[1]!==void 0&&n.signal(a[1])},last(){if(r===void 0)throw new Error("No pipes");return r.last()},setOutlet(a,u){if(r===void 0)throw new Error("No pipes");r.setOutlet(a,u)},signal(a){if(n===void 0)throw new Error("No first pipe");n.signal(a)}}},xA=(e={})=>{const r=ke(e.throttle,500),n=h0(s0(window,"resize"),d0(r),f0(()=>({width:window.innerWidth,height:window.innerHeight}),{when:"emit-signal"}));n.signal({source:"rx",type:"emit"});const i=()=>{n.signal({source:"rx",type:"dispose"})};return{size:r0(n,!0),dispose:i}},UA=(e,r)=>{const n=new An.CanvasBox(void 0,"scalarPlot"),i=typeof r.height=="number"?An.boxRectFromRectPx(r):r;n.desiredRegion=i,n.debugLayout=!0;const a=v0(),u=new An.CanvasBox(n,"axis-y");return u.desiredRegion={...i,width:{type:"px",value:10}},u.debugLayout=!0,{...a,draw:(o,s)=>{n.update(o,!1),n.draw(o,s)}}},v0=()=>({}),y0={};G(y0,{add:()=>m0,calcScale:()=>ss,defaultAxis:()=>Qu,draw:()=>Cn,drawValue:()=>g0,plot:()=>QA});var VA=Math.PI*2,Qu=e=>({endWith:"none",lineWidth:1,namePosition:"none",name:e,showLabels:e==="y",showLine:!0,textSize:e==="y"?20:10}),ss=(e,r,n)=>{const i=[];for(const a of e.keys()){const u=[...e.get(a)];if(u.length===0)break;let{min:o,max:s}=eu(u),c=s-o,l;n!==void 0&&(l=n[a]),l==null&&(r.defaultSeriesVariable?l=wi.getCssVariable("accent",r.defaultSeriesColour):l=r.defaultSeriesColour),c===0&&(c=o,o=o-c/2,s=s+c/2),i.push({min:o,max:s,range:c,name:a,colour:l})}return i},m0=(e,r,n="")=>{e.addKeyedValues(n,r)},g0=(e,r,n)=>{const i={...n,translucentPlot:!0,leadingEdgeDot:!1};Cn(r,i),n={...n,highlightIndex:e,leadingEdgeDot:!0,translucentPlot:!1,style:"none",clearCanvas:!1},Cn(r,n)},HA=(e,r,n)=>ss(e,n,n.seriesColours).map(i=>({...i,range:r[1]-r[0],min:r[0],max:r[1]})),Cn=(e,r)=>{const{x:n,y:i,ctx:a,canvasSize:u}=r,o=r.margin,s=r.y.scaleRange?HA(e,r.y.scaleRange,r):ss(e,r,r.seriesColours);r.clearCanvas&&a.clearRect(0,0,u.width,u.height),r.debug&&(a.strokeStyle="orange",a.strokeRect(0,0,u.width,u.height)),a.translate(o,o);const c=r.plotSize??w0(u,r),l={height:c.height+o+o,width:c.width};if((i.showLabels||i.showLine)&&(s.forEach(d=>{i.allowedSeries!==void 0&&!i.allowedSeries.includes(d.name)||GA(d,l,r)}),s.length>0&&i.showLine&&KA(l,s[0],r)),(n.showLabels||n.showLine)&&s.length>0){const d=i.labelRange?i.labelRange[0]:s[0].min;YA(c.width,rn(d,s[0],c.height)+o+n.lineWidth,r)}const f={...r,plotSize:c};Ei.translatePoint(a,r.pointer),s.forEach(d=>{const v=e.getSource(d.name);if(v===void 0)return;let g=e.typeName==="circular"?v.pointer-1:v.length-1;r.highlightIndex!==void 0&&(g=r.highlightIndex),a.save(),a.translate(0,o+o),XA(d,v,c,f,g),a.restore()}),r.showLegend&&(a.save(),a.translate(0,c.height+o+o+o),c.width,r.x.textSize+o+o,JA(s,r),a.restore()),a.resetTransform()},GA=(e,r,n)=>{const{ctx:i,y:a,digitsPrecision:u,margin:o}=n,{height:s}=r;n.debug&&(i.strokeStyle="purple",i.strokeRect(0,0,a.textSize,s+o)),i.fillStyle=e.colour.length>0?e.colour:"white",a.colour&&(i.fillStyle=a.colour);const c=a.labelRange?a.labelRange[0]:e.min,l=a.labelRange?a.labelRange[1]:e.max,f=a.labelRange?l-c:e.range,d=c+f/2,v=n.textHeight/2;i.textBaseline="top",i.fillText(c.toFixed(u),0,rn(c,e,s)-v),i.fillText(d.toFixed(u),0,rn(d,e,s)-v),i.fillText(l.toFixed(u),0,rn(l,e,s)-o),i.translate(a.textSize+o,0)},KA=(e,r,n)=>{if(r===void 0)throw new Error("series undefined");const{ctx:i,y:a}=n,{height:u}=e,o=a.labelRange?a.labelRange[0]:r.min,s=a.labelRange?a.labelRange[1]:r.max,c=rn(o,r,u),l=rn(s,r,u);i.translate(a.lineWidth,0),i.lineWidth=a.lineWidth,i.beginPath(),i.moveTo(0,c),i.lineTo(0,l),i.strokeStyle=r.colour,a.colour&&(i.strokeStyle=a.colour),i.stroke(),i.translate(a.lineWidth,0)},JA=(e,r,n)=>{const{ctx:i}=r,a=10;let u=0;const o=r.margin*3,s=r.margin;i.lineWidth=r.lineWidth,e.forEach(c=>{i.moveTo(u,o),i.strokeStyle=c.colour,i.lineTo(u+a,o),i.stroke(),u+=a+r.margin;let l=c.name;c.lastValue&&(l+=" "+c.lastValue.toFixed(r.digitsPrecision));const f=i.measureText(l);i.fillStyle=c.colour,i.fillText(l,u,s),u+=f.width})},YA=(e,r,n)=>{const{ctx:i,x:a,y:u}=n;!a.showLine||(a.colour&&(i.strokeStyle=a.colour),i.lineWidth=a.lineWidth,i.beginPath(),i.moveTo(0,r),i.lineTo(e,r),i.stroke())},XA=(e,r,n,i,a)=>{const{ctx:u,lineWidth:o,translucentPlot:s=!1,margin:c,x:l}=i,f=i.style??"connected",d=n.height-c;let v=1;if(l.scaleRange){const S=l.scaleRange[1]-l.scaleRange[0];v=n.width/S}else i.capacity===0?v=n.width/r.length:v=n.width/i.capacity;const g=i.coalesce&&v<0?Math.floor(1/v):1;let P=0,L;i.debug&&(u.strokeStyle="green",u.strokeRect(0,0,n.width,n.height));const B=S=>s?wi.opacity(S,.2):S;f==="dots"?u.fillStyle=B(e.colour):f==="none"||(u.beginPath(),u.lineWidth=o,u.strokeStyle=B(e.colour));for(let S=0;S<r.length;S+=g){let C=rn(r[S],e,d)-1;f==="dots"?(u.beginPath(),u.arc(P,C,o,0,VA),u.fill()):f==="none"||(S==0&&u.moveTo(P,C),u.lineTo(P,C)),S===a&&(L={x:P,y:C},e.lastValue=r[S]),P+=v}f==="connected"&&u.stroke(),L!==void 0&&i.leadingEdgeDot&&(u.beginPath(),u.fillStyle=B(e.colour),u.arc(L.x,L.y,3,0,2*Math.PI),u.fill())},rn=(e,r,n)=>(1-(e-r.min)/r.range)*n,p0=(e,r,n,i)=>{let a=e;n.showLabels&&(a+=n.textSize),n.showLine&&(a+=n.lineWidth),(n.showLabels||n.showLine)&&(a+=e+e);let u=e,o=e+e,s=e+e;return r.showLabels?s+=r.textSize:s+=e,r.showLine&&(s+=r.lineWidth),(r.showLabels||r.showLine)&&(s+=e),i&&(s+=r.textSize),{left:a,right:u,top:o,bottom:s}},w0=(e,r)=>{const{width:n,height:i}=e,a=p0(r.margin,r.x,r.y,r.showLegend);return{width:n-a.left-a.right,height:i-a.top-a.bottom}},ZA=(e,r)=>{const{width:n,height:i}=e,a=p0(r.margin,r.x,r.y,r.showLegend);return{width:n+a.left+a.right,height:i+a.top+a.bottom}},QA=(e,r)=>{if(e===null)throw new Error("parentElOrQuery is null. Expected string or element");const n=$e(e);let i,a=!0,u=r.plotSize,o;n.nodeName==="CANVAS"?(i=n,a=!1,o={width:i.width,height:i.height}):(i=document.createElement("CANVAS"),n.append(i),u=r.plotSize,o={width:i.width,height:i.height});const s={x:0,y:0},c=S=>{s.x=S.offsetX,s.y=S.offsetY};i.addEventListener("pointermove",c);const l=i.getContext("2d"),f=r.capacity??10,d=f>0?xl({capacity:f}):Ul(),v=l.measureText("Xy"),g=r.coalesce??!0;if(l===null)throw new Error("Drawing context not available");let P=Qu("x");r.x&&(P={...P,...r.x});let L=Qu("y");r.y&&(L={...L,...r.y});let B={...r,y:L,x:P,pointer:s,capacity:f,coalesce:g,plotSize:u,canvasSize:o,ctx:l,textHeight:r.textHeight??v.actualBoundingBoxAscent+v.actualBoundingBoxDescent,style:r.style??"connected",defaultSeriesColour:r.defaultSeriesColour??"yellow",margin:3,clearCanvas:!0,leadingEdgeDot:!0,debug:r.debug??!1,digitsPrecision:r.digitsPrecision??2,lineWidth:r.lineWidth??2,showLegend:r.showLegend??!1};if(u){const S=ZA(u,B);i.width=S.width,i.height=S.height,B.canvasSize=S}return r.autoSizeCanvas&&Ko(i,S=>{const C=S.bounds;B={...B,plotSize:w0(C,B),canvasSize:C},Cn(d,B)}),{drawValue:S=>{g0(S,d,B)},dispose:()=>{i.removeEventListener("pointermove",c),a&&i.remove()},add:(S,C="",N=!1)=>{m0(d,S,C),!N&&Cn(d,B)},draw:()=>{Cn(d,B)},clear:()=>{d.clear()}}};try{typeof window<"u"&&(window.ixfx={...window.ixfx,Visuals:{SceneGraph:An,Plot2:ts,Drawing:Ei,Svg:Zo,Palette:rs,Colour:wi,Video:ns}})}catch{}var b0=e=>{const r=$e(e),n=window.devicePixelRatio;return r.style.width=r.width+"px",r.style.height=r.height+"px",r.width*=devicePixelRatio,r.height*=devicePixelRatio,{ctx:(()=>{const a=r.getContext("2d");if(a===null)throw new Error("Could not get drawing context");return a.save(),a.scale(n,n),a})(),element:r,bounds:r.getBoundingClientRect()}},Ai=(e,r)=>{const n=e.length,i=e[0].length,a=[];for(let u=0;u<n;u++){a[u]=[];for(let o=0;o<i;o++)a[u][o]=e[u][o]*r}return a};function E0(e,r,n,i,a){const u=r.map(o=>{const s=kn(n,e,o[0],"stop");return s?[o[1],i(s,"undefined")]:[o[1],void 0]});return a(u)}function*eC(e,r){const n={rows:r.width,cols:r.height},i=is.accessor(r);yield*D0(e,n,i,zn(n),C0)}function*D0(e,r,n,i,a,u){if(!u){const s=e.length,c=e[0].length;u={x:Math.floor(s/2),y:Math.floor(c/2)}}const o=A0(e,u);for(const s of i){const c=E0(s,o,r,n,a);yield[s,c]}}var A0=(e,r)=>{const n=[],i=e.length,a=e[0].length;r||(r={x:Math.floor(i/2),y:Math.floor(a/2)});for(let u=0;u<i;u++)for(let o=0;o<a;o++)n.push([{x:u-r.x,y:o-r.y},e[u][o]]);return n},C0=e=>{let r=0,n=0,i=0;for(let u=0;u<e.length;u++){const o=e[u][1],s=e[u][0];o!==void 0&&o.opacity!==0&&s!==0&&(r+=o.r*s,n+=o.g*s,i+=o.b*s)}return{r,g:n,b:i,opacity:255}},tC=[[0,0,0],[0,1,0],[0,0,0]],rC=[[0,-1,0],[-1,4,-1],[0,-1,0]],nC=[[0,-1,0],[-1,5,-1],[0,-1,0]],iC=Ai([[1,1,1],[1,1,1],[1,1,1]],1/9),aC=Ai([[1,2,1],[2,4,2],[1,2,1]],1/16),uC=Ai([[1,4,6,4,1],[4,16,24,16,4],[6,24,36,24,6],[4,16,24,16,4],[1,4,6,4,1]],1/256),oC=Ai([[1,4,6,4,1],[4,16,24,16,4],[6,24,-476,24,6],[4,16,24,16,4],[1,4,6,4,1]],-1/256),S0={};G(S0,{circleRings:()=>vC,circleVogelSpiral:()=>hC,sphereFibonacci:()=>yC});var cs=Math.cos,ls=Math.sin,sC=Math.asin,fs=Math.sqrt,cC=Math.pow,ds=Math.PI,lC=Math.PI*2,fC=ds*(3-fs(5)),dC=(1+fs(5))/2;function*hC(e,r={}){const n=r.maxPoints??5e3,i=r.density??.95,a=r.rotation??0,u=Ro(e??{radius:1,x:0,y:0}),o=u.radius;let s=u.radius*ur(i,0,1,.3,.01);r.spacing&&(s=r.spacing);let c=0,l=0,f=0;for(;l<n&&c<o;)c=s*l**.5,f=a+l*2*ds/dC,yield Object.freeze({x:u.x+c*cs(f),y:u.y+c*ls(f)}),l++}function*vC(e,r={}){const n=r.rings??5,i=Ro(e??{radius:1,x:0,y:0}),a=1/n,u=r.rotation??0;let o=1;yield Object.freeze({x:i.x,y:i.y});for(let s=a;s<=1;s+=a){const c=Math.round(ds/sC(1/(2*o)));for(const l of my(0,lC,c+1))yield Object.freeze({x:i.x+s*cs(l+u)*i.radius,y:i.y+s*ls(l+u)*i.radius});o++}}function*yC(e=100,r=0,n){const i=2/e,a=n??{x:0,y:0,z:0,radius:1};for(let u=0;u<e;u++){const o=u*i-1+i/2,s=fs(1-cC(o,2)),c=(u+1)%e*fC+r,l=cs(c)*s,f=ls(c)*s;yield Object.freeze({x:a.x+l*a.radius,y:a.y+o*a.radius,z:a.z+f*a.radius})}}function zr(e){return Array.isArray(e)?e.map(r=>r*(Math.PI/180)):e*(Math.PI/180)}function Ua(e){return Array.isArray(e)?e.map(r=>r*180/Math.PI):e*180/Math.PI}var F0=e=>Math.atan2(e.x,e.y);try{typeof window<"u"&&(window.ixfx={...window.ixfx,Geometry:{Circles:Rt,Arcs:po,Lines:Ze,Rects:me,Points:W,Paths:mn,Grids:ko,Beziers:yi,Compound:No,Ellipses:zo,Polar:Ye,Shapes:va,radiansFromAxisX:F0,radianToDegree:Ua,degreeToRadian:zr}})}catch{}var mC={};G(mC,{AudioAnalysers:()=>T0,AudioVisualisers:()=>W0,Bluetooth:()=>z0,Camera:()=>H0,Codec:()=>ms,Espruino:()=>j0,FrameProcessor:()=>TC,Serial:()=>q0,StringReceiveBuffer:()=>gs,StringWriteBuffer:()=>ps,VideoFile:()=>K0,genericStateTransitionsInstance:()=>Ss});var hs={};G(hs,{WithEvents:()=>Ga,bidirectionalFromList:()=>AC,cloneState:()=>eo,done:()=>ro,driver:()=>bC,fromList:()=>DC,init:()=>Va,isValidTransition:()=>k0,next:()=>B0,normaliseTargets:()=>R0,possible:()=>ui,possibleTargets:()=>ys,reset:()=>to,to:()=>oi,validateMachine:()=>P0,validateTransition:()=>Ha});var gC=async(e,r={},n)=>{const i=[],a=r.rank??Si;let u=Array.isArray(e)?e:[e];r.shuffle&&(u=da(u));for(let o=0;o<u.length;o++){const s=u[o];let c;if(typeof s=="function"?c=await s(n):c=s,c!==void 0&&(i.push(c),i.sort(a)),typeof r.stop<"u"&&r.stop(c,i))break}return r.filter?i.filter(r.filter):i},M0={};G(M0,{getErrorMessage:()=>I0,logSet:()=>_0,logger:()=>vn,resolveLogOption:()=>vs});var vs=(e,r={})=>{if(e===void 0||typeof e=="boolean"&&!e)return a=>{};const n=r.category??"",i=r.kind??void 0;return typeof e=="boolean"?a=>{const u=typeof a=="string"?{msg:a}:a,o=u.kind??i,s=u.category??n;let c=u.msg;switch(s&&(c=`[${s}] ${c}`),o){case"error":{console.error(c);break}case"warn":{console.warn(c);break}case"info":{console.info(c);break}default:console.log(c)}}:e},pC=0,wC=Bl(new Map,()=>kd(++pC)),_0=(e,r=!0,n)=>r?{log:vn(e,"log",n),warn:vn(e,"warn",n),error:vn(e,"error",n)}:{log:i=>{},warn:vn(e,"warn",n),error:vn(e,"error",n)},vn=(e,r="log",n)=>i=>{i===void 0?i="(undefined)":typeof i=="object"&&(i=JSON.stringify(i));const a=n??e;switch(r){case"log":{console.log(`%c${e} ${i}`,`color: ${wC(a)}`);break}case"warn":{console.warn(e,i);break}case"error":{console.error(e,i);break}}},I0=e=>typeof e=="string"?e:e instanceof Error?e.message:e;async function bC(e,r){const n=Array.isArray(r)?{handlers:r}:r,i=vs(n.debug,{category:"StateMachineDriver"}),a=new Map;for(const c of n.handlers)(Array.isArray(c.if)?c.if:[c.if]).forEach(f=>{if(typeof f!="string")throw new Error(`Expected single or array of strings for the 'if' field. Got: '${typeof f}'.`);if(a.has(f))throw new Error(`Multiple handlers defined for state '${f}'. There should be at most one.`);a.set(f,c)});const u={rank:(c,l)=>Si(c.score??0,l.score??0),shuffle:n.shuffleHandlers??!1};let o=Va(e);for(const[c]of a)if(typeof o.machine[c]>"u"&&c!=="__fallback")throw new Error(`StateMachineDriver handler references a state ('${c}') which is not defined on the machine. Therefore this handler will never run.'`);return{reset:()=>{o=to(o)},getValue:()=>o.value,run:async()=>{i(`Run. State: ${o.value}`);const c=o.value;let l=a.get(c);if(l===void 0&&(i(`  No handler for state '${c}', trying __fallback`),l=a.get("__fallback")),l===void 0){i("  No __fallback handler");return}const f=l.resultChoice==="first"?{...u,stop:g=>g?"reset"in g||"next"in g&&g.next!==void 0:!1}:u,d=await gC(l.then,f,o);i(`  In state '${o.value}' results: ${d.length}. Choice: ${l.resultChoice}`);let v;switch(l.resultChoice??"highest"){case"highest":v=d.at(-1);break;case"first":v=d[0];break;case"lowest":v=d.at(0);break;case"random":v=tu(d);break;default:throw new Error(`Unknown 'resultChoice' option: ${l.resultChoice}. Expected highest, first, lowest or random`)}return i(`  Chosen result: ${JSON.stringify(v)}`),v&&v.reset?o=to(o):v&&v.next&&(typeof v.next=="boolean"?o=B0(o):(i(JSON.stringify(d)),o=oi(o,v.next))),o},to:c=>(o=oi(o,c),o)}}var eo=e=>Object.freeze({value:e.value,visited:[...e.visited],machine:e.machine}),Va=(e,r)=>{const[n,i]=P0(e);if(!n)throw new Error(i);const a=r??Object.keys(n.states)[0];if(typeof n.states[a]>"u")throw new Error("Initial state not found");const u=EC(n.states);if(u===void 0)throw new Error("Could not normalise transitions");return Object.freeze({value:a,visited:[],machine:Object.fromEntries(u)})},to=e=>Va(e.machine),P0=e=>typeof e>"u"?[void 0,"Parameter undefined"]:e===null?[void 0,"Parameter null"]:"states"in e?[e,""]:typeof e=="object"?[{states:e},""]:[void 0,`Unexpected type: ${typeof e}. Expected object`],ro=e=>ui(e).length===0,ys=e=>{N0(e);const r=e.machine[e.value];return r.length===1&&r[0].state===null?[]:r},ui=e=>ys(e).map(n=>n.state),R0=e=>{const r=n=>{if(n===null)return{state:null};if(typeof n=="string")return{state:n};if(typeof n=="object"&&"state"in n){const i=n.state;if(typeof i!="string")throw new Error(`Target 'state' field is not a string. Got: ${typeof i}`);return"preconditions"in n?{state:i,preconditions:n.preconditions}:{state:i}}else throw new Error(`Unexpected type: ${typeof n}. Expected string or object with 'state' field.`)};if(Array.isArray(e)){let n=!1;const i=e.map(a=>{const u=r(a);if(!u)throw new Error("Invalid target");return n=n||u.state===null,u});if(n&&i.length>1)throw new Error("Cannot have null as an possible state");return i}else{const n=r(e);return n?[n]:void 0}},EC=e=>{const r=new Map;for(const[n,i]of Object.entries(e)){if(typeof n>"u")throw new Error("Top-level undefined state");if(typeof i>"u")throw new Error(`Undefined target state for ${n}`);if(r.has(n))throw new Error(`State defined twice: ${n}`);if(n.includes(" "))throw new Error("State names cannot contain spaces");r.set(n,[])}for(const[n,i]of Object.entries(e)){const a=R0(i);if(a===void 0)throw new Error("Could not normalise target");if(a!==null){const u=new Set;for(const o of a){if(u.has(o.state))throw new Error(`Target state '${o.state}' already exists for '${n}'`);if(u.add(o.state),o.state!==null&&!r.has(o.state))throw new Error(`Target state '${o.state}' is not defined as a top-level state. Defined under: '${n}'`)}r.set(n,a)}}return r},N0=e=>{if(typeof e>"u")throw new Error("Parameter 'state' is undefined");if(typeof e.value!="string")throw new Error("Existing state is not a string")},oi=(e,r)=>(N0(e),Ha(e,r),Object.freeze({value:r,machine:e.machine,visited:Ry([e.visited,[e.value]])})),B0=e=>{const r=ys(e).at(0);if(!r||r.state===null)throw new Error(`Not possible to move to a next state from '${e.value}`);return oi(e,r.state)},k0=(e,r)=>{try{return Ha(e,r),!0}catch{return!1}},Ha=(e,r)=>{if(r===null)throw new Error("Cannot transition to null state");if(r===void 0)throw new Error("Cannot transition to undefined state");if(typeof r!="string")throw new Error(`Parameter 'toState' should be a string. Got: ${typeof r}`);const n=ui(e);if(n.length===0)throw new Error("Machine is in terminal state");if(!n.includes(r))throw new Error(`Target state '${r}' not available at current state '${e.value}'. Possible states: ${n.join(", ")}`)},DC=(...e)=>{const r={};if(!Array.isArray(e))throw new Error("Expected array of strings");if(e.length<=2)throw new Error("Expects at least two states");for(let n=0;n<e.length;n++){const i=e[n];if(typeof i!="string")throw new Error(`Expected array of strings. Got type '${typeof i}' at index ${n}`);n===e.length-1?r[i]=null:r[i]=e[n+1]}return r},AC=(...e)=>{const r={};if(!Array.isArray(e))throw new Error("Expected array of strings");if(e.length<2)throw new Error("Expects at least two states");for(let n=0;n<e.length;n++){const i=e[n];if(typeof i!="string")throw new Error(`Expected array of strings. Got type '${typeof i}' at index ${n}`);r[i]=[]}for(let n=0;n<e.length;n++){const i=r[e[n]];n===e.length-1?e.length>1?i.push(e[n-1]):r[e[n]]=null:(i.push(e[n+1]),n>0&&i.push(e[n-1]))}return r},Ga=class extends sr{#e;#t;#r;#n=!1;#i=!1;#a=Ar.infinity();constructor(e,r={}){super();this.#r=r.debug??!1,this.#e=Va(e,r.initial),this.#t=eo(this.#e)}#u(e){this.#i!==e&&(this.#i=e,e?(this.#n=!0,setTimeout(()=>{!this.#n||(this.#n=!1,this.fireEvent("stop",{state:this.#e.value}))},2)):this.#n=!1)}get statesPossible(){return ui(this.#e)}get statesDefined(){return Object.keys(this.#e.machine)}next(){const e=ui(this.#e);return e.length===0?null:(this.state=e[0],e[0])}get isDone(){return ro(this.#e)}reset(){this.#u(!1),this.#e=eo(this.#t),this.#a=Ar.since()}validateTransition(e){Ha(this.#e,e)}isValid(e){return k0(this.#e,e)}set state(e){const r=this.#e.value;e!==this.#e.value&&(this.#e=oi(this.#e,e),this.#r&&console.log(`StateMachine: ${r} -> ${e}`),this.#a=Ar.since(),setTimeout(()=>{this.fireEvent("change",{newState:e,priorState:r})},1),ro(this.#e)&&this.#u(!0))}get state(){return this.#e.value}get changedAt(){return this.#a()}get elapsed(){return this.#a()}},z0={};G(z0,{NordicBleDevice:()=>O0,defaultOpts:()=>Ka});var ms=class{enc=new TextEncoder;dec=new TextDecoder("utf-8");toBuffer(e){return this.enc.encode(e)}fromBuffer(e){return this.dec.decode(e)}},gs=class{constructor(e,r=`
`){this.onData=e,this.separator=r}buffer="";stream;async close(){const e=this.stream;!e||(await e.abort(),await e.close())}clear(){this.buffer=""}writable(){return this.stream===void 0&&(this.stream=this.createWritable()),this.stream}createWritable(){const e=this;return new WritableStream({write(r){e.add(r)},close(){e.clear()}})}addImpl(e){const r=e.indexOf(this.separator);if(r<0)return this.buffer+=e,"";const n=e.substring(0,r);try{this.onData(this.buffer+n),e=e.substring(n.length+this.separator.length)}catch(i){console.warn(i)}return this.buffer="",e}add(e){for(;e.length>0;)e=this.addImpl(e)}},ps=class{constructor(e,r={}){this.dataHandler=e,this.chunkSize=r.chunkSize??-1,this.writer=Vs(this.onWrite,r.interval??10)}paused=!1;queue=new Xt;writer;stream;closed=!1;chunkSize;async close(){if(this.closed)return;const e=this.stream?.getWriter();e?.releaseLock(),await e?.close(),this.closed=!0}clear(){if(this.closed)throw new Error("Buffer closed");this.queue=new Xt}writable(){if(this.closed)throw new Error("Buffer closed");return this.stream===void 0&&(this.stream=this.createWritable()),this.stream}createWritable(){const e=this;return new WritableStream({write(r){e.add(r)},close(){e.clear()}})}async onWrite(){if(this.queue.isEmpty)return!1;if(this.paused)return console.warn("WriteBuffer.onWrite: paused..."),!0;const e=this.queue.dequeue();return e===void 0?!1:(await this.dataHandler(e),!0)}get isClosed(){return this.closed}add(e){if(this.closed)throw new Error("Buffer closed");this.chunkSize>0?this.queue.enqueue(...qy(e,this.chunkSize)):this.queue.enqueue(e),this.writer.start()}},ws=async(e,r)=>{const n=r.abort,i=vs(r.log),a=r.power??1.1,u=r.predelayMs??0,o=gy();let s=r.startMs??1e3;const c=r.count;let l=0;if(Le(c,"aboveZero","count"),s<=0)throw new Error("startMs must be above zero");if(u>0&&await ht({millis:u,signal:n}),n?.aborted)return{success:!1,attempts:l,value:r.defaultValue,elapsed:o(),message:"Aborted during predelay"};for(;l<c;){l++;const f=await e();if(f!==void 0)return{value:f,success:!0,attempts:l,elapsed:o()};if(i({msg:`retry attempts: ${l} t: ${Us(s)}`}),l>=c)break;try{await ht({millis:s,signal:n})}catch(d){return{success:!1,attempts:l,value:r.defaultValue,message:I0(d),elapsed:o()}}s=Math.floor(Math.pow(s,a))}return{message:`Giving up after ${l} attempts.`,success:!1,attempts:l,value:r.defaultValue,elapsed:o()}},CC=class extends sr{constructor(e,r){super();this.device=e,this.config=r,this.verboseLogging=r.debug,this.txBuffer=new ps(async n=>{await this.writeInternal(n)},r),this.rxBuffer=new gs(n=>{this.fireEvent("data",{data:n})}),this.codec=new ms,this.states=new Ga(Ss,{initial:"ready"}),this.states.addEventListener("change",n=>{this.fireEvent("change",n),this.verbose(`${n.priorState} -> ${n.newState}`),n.priorState==="connected"&&(this.rxBuffer.clear(),this.txBuffer.clear())}),e.addEventListener("gattserverdisconnected",()=>{this.isClosed||(this.verbose("GATT server disconnected"),this.states.state="closed")}),this.verbose(`ctor ${e.name} ${e.id}`)}states;codec;rx;tx;gatt;verboseLogging=!1;rxBuffer;txBuffer;get isConnected(){return this.states.state==="connected"}get isClosed(){return this.states.state==="closed"}write(e){if(this.states.state!=="connected")throw new Error(`Cannot write while state is ${this.states.state}`);this.txBuffer.add(e)}async writeInternal(e){this.verbose(`writeInternal ${e}`);const r=this.tx;if(r===void 0)throw new Error("Unexpectedly without tx characteristic");try{await r.writeValue(this.codec.toBuffer(e))}catch(n){this.warn(n)}}disconnect(){this.states.state==="connected"&&this.gatt?.disconnect()}async connect(){const e=this.config.connectAttempts??3;this.states.state="connecting",this.verbose("connect");const r=this.device.gatt;if(r===void 0)throw new Error("Gatt not available on device");await ws(async()=>{const n=await r.connect();this.verbose("Getting primary service");const i=await n.getPrimaryService(this.config.service);this.verbose("Getting characteristics");const a=await i.getCharacteristic(this.config.rxGattCharacteristic),u=await i.getCharacteristic(this.config.txGattCharacteristic);return a.addEventListener("characteristicvaluechanged",o=>this.onRx(o)),this.rx=a,this.tx=u,this.gatt=r,this.states.state="connected",await a.startNotifications(),!0},{count:e,startMs:200})}onRx(e){if(this.rx===void 0)return;const n=e.target.value;if(n===void 0)return;let i=this.codec.fromBuffer(n.buffer);const a=si(i,19),u=si(i,17);u&&a<u&&(this.verbose("Tx plz start"),i=ci(i,u,1),this.txBuffer.paused=!1),a&&a>u&&(this.verbose("Tx plz stop"),i=ci(i,a,1),this.txBuffer.paused=!0),this.rxBuffer.add(i)}verbose(e){this.verboseLogging&&console.info(`${this.config.name} `,e)}log(e){console.log(`${this.config.name} `,e)}warn(e){console.warn(`${this.config.name} `,e)}},Ka={chunkSize:20,service:"6e400001-b5a3-f393-e0a9-e50e24dcca9e",txGattCharacteristic:"6e400002-b5a3-f393-e0a9-e50e24dcca9e",rxGattCharacteristic:"6e400003-b5a3-f393-e0a9-e50e24dcca9e",name:"NordicDevice",connectAttempts:5,debug:!1},O0=class extends CC{constructor(e,r={}){super(e,{...Ka,...r})}},T0={};G(T0,{AudioAnalyser:()=>Ja,basic:()=>FC,freq:()=>MC,peakLevel:()=>_C});var W0={};G(W0,{default:()=>$0});var L0=class{store;gog;constructor(e){this.store=new Map,this.gog=Nl(this.store,e)}get size(){return this.store.size}has(e){return this.store.has(e)}async seen(e,...r){return(await this.getTrackedValue(e,...r)).seen(...r)}async getTrackedValue(e,...r){if(e===null)throw new Error("id parameter cannot be null");if(e===void 0)throw new Error("id parameter cannot be undefined");return await this.gog(e,r[0])}delete(e){this.store.delete(e)}reset(){this.store=new Map}*ids(){yield*this.store.keys()}*tracked(){yield*this.store.values()}*trackedByAge(){const e=[...this.store.values()];e.sort((r,n)=>{const i=r.elapsed,a=n.elapsed;return i===a?0:i>a?-1:1});for(const r of e)yield r}*valuesByAge(){for(const e of this.trackedByAge())yield e.last}*last(){for(const e of this.store.values())yield e.last}*initialValues(){for(const e of this.store.values())yield e.initial}get(e){return this.store.get(e)}},bs=class{seenCount;storeIntermediate;resetAfterSamples;sampleLimit;id;constructor(e={}){this.id=e.id??"tracker",this.sampleLimit=e.sampleLimit??-1,this.resetAfterSamples=e.resetAfterSamples??-1,this.storeIntermediate=e.storeIntermediate??(this.sampleLimit>-1||this.resetAfterSamples>-1),this.seenCount=0}reset(){this.seenCount=0,this.onReset()}seen(...e){this.resetAfterSamples>0&&this.seenCount>this.resetAfterSamples?this.reset():this.sampleLimit>0&&this.seenCount>this.sampleLimit*2&&(this.seenCount=this.trimStore(this.sampleLimit),this.onTrimmed()),this.seenCount+=e.length;const r=this.filterData(e);return this.computeResults(r)}},SC=class extends bs{values;timestamps;constructor(e){super(e);this.values=[],this.timestamps=[]}trimStore(e){return e>=this.values.length?this.values.length:(this.values=this.values.slice(-e),this.timestamps=this.timestamps.slice(-e),this.values.length)}onTrimmed(){}get last(){return this.values.at(-1)}get initial(){return this.values.at(0)}get size(){return this.values.length}get elapsed(){if(this.values.length<0)throw new Error("No values seen yet");return Date.now()-this.timestamps[0]}onReset(){this.values=[],this.timestamps=[]}filterData(e){const n={value:e.at(-1),at:performance.now()},i=e.map(a=>({at:performance.now(),value:a}));if(this.storeIntermediate)this.values.push(...e),this.timestamps.push(...i.map(a=>a.at));else switch(this.values.length){case 0:{this.values.push(n.value),this.timestamps.push(n.at);break}case 2:{this.values[1]=n.value,this.timestamps[1]=n.at;break}case 1:{this.values.push(n.value),this.timestamps.push(n.at);break}}return i}},Es=class extends SC{total=0;min=Number.MAX_SAFE_INTEGER;max=Number.MIN_SAFE_INTEGER;get avg(){return this.total/this.seenCount}difference(){if(this.last!==void 0&&this.initial!==void 0)return this.last-this.initial}relativeDifference(){if(this.last!==void 0&&this.initial!==void 0)return this.last/this.initial}onReset(){this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER,this.total=0,super.onReset()}onTrimmed(){this.min=xs(this.values),this.max=hy(this.values),this.total=vy(this.values)}computeResults(e){if(e.some(i=>Number.isNaN(i)))throw new Error("Cannot add NaN");const r=e.map(i=>i.value);return this.total=r.reduce((i,a)=>i+a,this.total),this.min=Math.min(...r,this.min),this.max=Math.max(...r,this.max),{max:this.max,min:this.min,total:this.total,avg:this.avg}}getMinMaxAvg(){return{min:this.min,max:this.max,avg:this.avg}}},Xn=(e={})=>new Es(e),$0=class{freqMaxRange=200;audio;parent;lastPointer={x:0,y:0};pointerDown=!1;pointerClicking=!1;pointerClickDelayMs=100;pointerDelaying=!1;waveTracker;freqTracker;el;constructor(e,r){this.audio=r,this.parent=e,this.waveTracker=Xn(),this.freqTracker=Xn(),e.innerHTML=`
    <section>
      <button id="rendererComponentToggle">\u{1F53C}</button>
      <div>
        <h1>Visualiser</h1>
        <div style="display:flex; flex-wrap: wrap">
          <div class="visPanel">
            <h2>Frequency distribution</h2>
            <br />
            <canvas id="rendererComponentFreqData" height="200" width="400"></canvas>
          </div>
          <div class="visPanel">
            <h2>Waveform</h2>
            <button id="rendererComponentWaveReset">Reset</button>
            <div>
              Press and hold on wave to measure
            </div>
            <br />
            <canvas id="rendererComponentWaveData" height="200" width="400"></canvas>
          </div>
        </div>
      </div>
    </section>
    `,this.el=e.children[0],document.getElementById("rendererComponentToggle")?.addEventListener("click",()=>{this.setExpanded(!this.isExpanded())}),this.el.addEventListener("pointermove",n=>this.onPointer(n)),this.el.addEventListener("pointerup",()=>{this.pointerDelaying=!1,this.pointerDown=!1}),this.el.addEventListener("pointerdown",()=>{this.pointerDelaying=!0,setTimeout(()=>{this.pointerDelaying&&(this.pointerDelaying=!1,this.pointerDown=!0)},this.pointerClickDelayMs)}),this.el.addEventListener("pointerleave",()=>{this.pointerDelaying=!1,this.pointerDown=!1}),document.getElementById("rendererComponentWaveReset")?.addEventListener("click",()=>{this.clear()})}renderFreq(e){if(!this.isExpanded()||!e)return;const r=document.getElementById("rendererComponentFreqData");if(r===null)throw new Error("Cannot find canvas element");const n=r.getContext("2d");if(n===null)throw new Error("Cannot create drawing context");const i=e.length,a=r.clientWidth,u=r.clientHeight;n.clearRect(0,0,a,u);const o=this.getPointerRelativeTo(r),s=a/i,c=$t.minMaxAvg(e);for(let l=0;l<i;l++){if(!Number.isFinite(e[l]))continue;const d=(e[l]-c.min)/this.freqMaxRange,v=Math.abs(u*d),g=u-v,P=l/i*360,L=l*s;if(n.fillStyle="hsl("+P+", 100%, 50%)",o.y>0&&o.y<=u&&o.x>=L&&o.x<=L+s){this.freqTracker.id!==l.toString()&&(this.freqTracker=Xn({id:l.toString()})),this.freqTracker.seen(e[l]);const B=this.freqTracker.getMinMaxAvg();n.fillStyle="black",this.audio&&n.fillText(`Frequency (${l}) at pointer: ${this.audio.getFrequencyAtIndex(l).toLocaleString("en")} - ${this.audio.getFrequencyAtIndex(l+1).toLocaleString("en")}`,2,10),n.fillText(`Raw value: ${e[l].toFixed(2)}`,2,20),n.fillText(`Min: ${B.min.toFixed(2)}`,2,40),n.fillText(`Max: ${B.max.toFixed(2)}`,60,40),n.fillText(`Avg: ${B.avg.toFixed(2)}`,120,40)}n.fillRect(L,g,s,v)}}isExpanded(){const e=this.el.querySelector("div");if(e===null)throw new Error("contents div not found");return e.style.display===""}setExpanded(e){const r=this.el.querySelector("div"),n=this.el.querySelector("button");if(n===null)throw new Error("Button element not found");if(r===null)throw new Error("Contents element not found");e?(r.style.display="",n.innerText="\u{1F53C}"):(r.style.display="none",n.innerText="\u{1F53D}")}clear(){this.clearCanvas(document.getElementById("rendererComponentFreqData")),this.clearCanvas(document.getElementById("rendererComponentWaveData"))}clearCanvas(e){if(e===null)throw new Error("Canvas is null");const r=e.getContext("2d");if(r===null)throw new Error("Cannot create drawing context");r.fillStyle="white",r.fillRect(0,0,e.clientWidth,e.clientHeight)}renderWave(e,r=!0){if(!this.isExpanded()||!e)return;const n=document.getElementById("rendererComponentWaveData");if(n===null)throw new Error("Cannot find wave canvas");const i=n.getContext("2d");if(i===null)throw new Error("Cannot create drawing context for wave");const a=n.clientWidth,u=n.clientHeight,o=this.getPointerRelativeTo(n),s=20,c=60,l=e.length;i.fillStyle="white",i.fillRect(0,0,c,s);const f=a/l;i.fillStyle="rgba(255, 255, 255, 0.03)",i.fillRect(0,20,a,u),i.fillStyle="red",r?i.fillRect(0,u/2,a,1):i.fillRect(0,u-1,a,1),i.lineWidth=1,i.strokeStyle="black",i.beginPath();let d=0;for(let v=0;v<l;v++){const g=e[v]*u,P=r?u/2-g:u-g;v===0?i.moveTo(d,P):i.lineTo(d,P),d+=f,this.pointerDown&&this.waveTracker.seen(e[v])}if(i.lineTo(a,r?u/2:u),i.stroke(),this.pointerDown){const v=this.waveTracker.getMinMaxAvg();i.fillStyle="rgba(255,255,0,1)",i.fillRect(c,0,150,20),i.fillStyle="black",i.fillText("Min: "+v.min.toFixed(2),60,10),i.fillText("Max: "+v.max.toFixed(2),110,10),i.fillText("Avg: "+v.avg.toFixed(2),160,10)}else this.waveTracker.reset();o.y>0&&o.y<=u&&o.x>=0&&o.x<=a&&(i.fillStyle="black",i.fillText("Level: "+(1-o.y/u).toFixed(2),2,10))}getPointerRelativeTo(e){const r=e.getBoundingClientRect();return{x:this.lastPointer.x-r.left-window.scrollX,y:this.lastPointer.y-r.top-window.scrollY}}onPointer(e){this.lastPointer={x:e.pageX,y:e.pageY},e.preventDefault()}},FC=(e,r={})=>new Ja((n,i)=>{const a=new Float32Array(n.frequencyBinCount),u=new Float32Array(n.fftSize);n.getFloatFrequencyData(a),n.getFloatTimeDomainData(u),e(a,u,i)},r),MC=(e,r={})=>new Ja((n,i)=>{const a=new Float32Array(n.frequencyBinCount);n.getFloatFrequencyData(a),e(a,i)},r),_C=(e,r={})=>new Ja((n,i)=>{const a=new Float32Array(n.fftSize);n.getFloatTimeDomainData(a),e($t.maxFast(a),i)},r),Ja=class{showVis;fftSize;smoothingTimeConstant;#e=!1;debug;#t=!1;visualiser;audioCtx;analyserNode;analyse;constructor(e,r={}){if(this.showVis=r.showVis??!1,this.fftSize=r.fftSize??1024,this.debug=r.debug??!1,this.smoothingTimeConstant=r.smoothingTimeConstant??.8,Le(this.fftSize,"positive","opts.fftSize"),ee(this.smoothingTimeConstant,"percentage","opts.smoothingTimeConstant"),!Dy(this.fftSize))throw new Error(`fftSize must be a power of two from 32 to 32768 (${this.fftSize})`);if(this.fftSize<32)throw new Error("fftSize must be at least 32");if(this.fftSize>32768)throw new Error("fftSize must be no greater than 32768");this.analyse=e,this.paused=!1,this.init();const n=document.getElementById("audio-visualiser");if(n){const i=new $0(n,this);i.setExpanded(this.showVis),this.visualiser=i}}init(){if(this.#t){this.debug&&console.debug("Init already in progress");return}this.#t=!0,navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{this.onMicSuccess(e)}).catch(e=>{this.#t=!1,console.error(e)})}get paused(){return this.#e}set paused(e){e!==this.#e&&(this.#e=e,e?this.debug&&console.log("Paused"):(this.debug&&console.log("Unpaused"),window.requestAnimationFrame(this.analyseLoop.bind(this))))}setup(e,r){const n=e.createAnalyser();return n.fftSize=this.fftSize,n.smoothingTimeConstant=this.smoothingTimeConstant,e.createMediaStreamSource(r).connect(n),n}onMicSuccess(e){try{const r=new AudioContext;r.addEventListener("statechange",()=>{this.debug&&console.log(`Audio context state: ${r.state}`)}),this.audioCtx=r,this.analyserNode=this.setup(r,e),window.requestAnimationFrame(this.analyseLoop.bind(this))}catch(r){this.#t=!1,console.error(r)}}analyseLoop(){if(this.paused){this.debug&&console.log("Paused");return}const e=this.analyserNode;if(e===void 0){console.warn("Analyser undefined");return}try{this.analyse(e,this)}catch(r){console.error(r)}window.requestAnimationFrame(this.analyseLoop.bind(this))}getFrequencyRangeMax(e,r,n){const i=this.sliceByFrequency(e,r,n);return $t.max(i)}sliceByFrequency(e,r,n){const i=this.getIndexForFrequency(e),a=this.getIndexForFrequency(r);return n.slice(i,a)}getFrequencyAtIndex(e){const r=this.analyserNode,n=this.audioCtx;if(r===void 0)throw new Error("Analyser not available");if(n===void 0)throw new Error("Audio context not available");if(Le(e,"positive","index"),e>r.frequencyBinCount)throw new Error(`Index ${e} exceeds frequency bin count ${r.frequencyBinCount}`);return e*n.sampleRate/(r.frequencyBinCount*2)}getIndexForFrequency(e){const r=this.analyserNode;if(r===void 0)throw new Error("Analyser not available");const n=r.context.sampleRate/2,i=Math.round(e/n*r.frequencyBinCount);return i<0?0:i>=r.frequencyBinCount?r.frequencyBinCount-1:i}},j0={};G(j0,{EspruinoBleDevice:()=>Ds,EspruinoSerialDevice:()=>U0,connectBle:()=>NC,deviceEval:()=>Cs,puck:()=>PC,serial:()=>RC});var Ds=class extends O0{evalTimeoutMs;evalReplyBluetooth=!0;constructor(e,r={}){super(e,r);this.evalTimeoutMs=r.evalTimeoutMs??5*1e3}async writeScript(e){this.write(`reset();
`),this.write(`${e}
`)}async eval(e,r={},n){const i=r.debug??!1;return Cs(e,r,this,"Bluetooth.println",i,n??(u=>this.warn(u)))}},As=(e,r,n)=>{let i=!1;const a=o=>{u!==0&&(window.clearTimeout(u),u=0),o?r(o):i=!0,n!==void 0&&n(i)};let u=window.setTimeout(()=>{u=0;try{r(`Timeout after ${e}ms`)}finally{n!==void 0&&n(i)}},e);return a},q0={};G(q0,{Device:()=>x0});var IC=class extends sr{states;codec;verboseLogging=!1;name;connectAttempts;chunkSize;rxBuffer;txBuffer;constructor(e={}){super();this.verboseLogging=e.debug??!1,this.chunkSize=e.chunkSize??1024,this.connectAttempts=e.connectAttempts??3,this.name=e.name??"JsonDevice",this.txBuffer=new ps(async r=>{await this.writeInternal(r)},e),this.rxBuffer=new gs(r=>{this.fireEvent("data",{data:r})}),this.codec=new ms,this.states=new Ga(Ss,{initial:"ready"}),this.states.addEventListener("change",r=>{this.fireEvent("change",r),this.verbose(`${r.priorState} -> ${r.newState}`),r.priorState==="connected"&&(this.rxBuffer.clear(),this.txBuffer.clear())})}get isConnected(){return this.states.state==="connected"}get isClosed(){return this.states.state==="closed"}write(e){if(this.states.state!=="connected")throw new Error(`Cannot write while state is ${this.states.state}`);this.txBuffer.add(e)}async close(){this.states.state==="connected"&&this.onClosed()}async connect(){const e=this.connectAttempts;this.states.state="connecting",await this.onPreConnect(),await ws(async()=>(await this.onConnectAttempt(),this.states.state="connected",!0),{count:e,startMs:200})}onRx(e){const r=e.target.value;if(r===void 0)return;let n=this.codec.fromBuffer(r.buffer);const i=si(n,19),a=si(n,17);a&&i<a&&(this.verbose("Tx plz start"),n=ci(n,a,1),this.txBuffer.paused=!1),i&&i>a&&(this.verbose("Tx plz stop"),n=ci(n,i,1),this.txBuffer.paused=!0),this.rxBuffer.add(n)}verbose(e){this.verboseLogging&&console.info(`${this.name} `,e)}log(e){console.log(`${this.name} `,e)}warn(e){console.warn(`${this.name} `,e)}},x0=class extends IC{constructor(e={}){super(e);this.config=e,this.abort=new AbortController;const r=e.eol??`\r
`;this.baudRate=e.baudRate??9600,e.name===void 0&&(super.name="Serial.Device"),this.rxBuffer.separator=r}port;tx;abort;baudRate;async writeInternal(e){if(this.tx===void 0)throw new Error("tx not ready");try{this.tx.write(e)}catch(r){this.warn(r)}}onClosed(){this.tx?.releaseLock(),this.abort.abort("closing port"),this.states.state="closed"}onPreConnect(){return Promise.resolve()}async onConnectAttempt(){let e={};const r={baudRate:this.baudRate};this.config.filters&&(e={filters:[...this.config.filters]}),this.port=await navigator.serial.requestPort(e),this.port.addEventListener("disconnect",o=>{this.close()}),await this.port.open(r);const n=this.port.writable,i=new TextEncoderStream;n!==null&&(i.readable.pipeTo(n,{signal:this.abort.signal}).catch(o=>{console.log("Serial.onConnectAttempt txText pipe:"),console.log(o)}),this.tx=i.writable.getWriter());const a=this.port.readable,u=new TextDecoderStream;a!==null&&(a.pipeTo(u.writable,{signal:this.abort.signal}).catch(o=>{console.log("Serial.onConnectAttempt rxR pipe:"),console.log(o)}),u.readable.pipeTo(this.rxBuffer.writable(),{signal:this.abort.signal}).catch(o=>{console.log("Serial.onConnectAttempt rxText pipe:"),console.log(o);try{this.port?.close()}catch(s){console.log(s)}}))}},U0=class extends x0{evalTimeoutMs;evalReplyBluetooth=!1;constructor(e){super(e);e===void 0&&(e={}),this.evalTimeoutMs=e.evalTimeoutMs??5*1e3}async disconnect(){return super.close()}async writeScript(e){this.write(`reset();
`),this.write(`${e}
`)}async eval(e,r={},n){const i=r.debug??!1;return Cs(e,r,this,"USB.println",i,n??(u=>this.warn(u)))}},PC=async(e={})=>{const r=e.name??"Puck",n=e.debug??!1,i=await navigator.bluetooth.requestDevice({filters:V0(e),optionalServices:[Ka.service]});console.log(i.name);const a=new Ds(i,{name:r,debug:n});return await a.connect(),a},RC=async(e={})=>{const r=new U0(e);return await r.connect(),r},V0=e=>{const r=[];return e.filters?r.push(...e.filters):e.name?(r.push({name:e.name}),console.info(`Filtering Bluetooth devices by name '${e.name}'`)):r.push({namePrefix:"Puck.js"}),r},NC=async(e={})=>{const r=await navigator.bluetooth.requestDevice({filters:V0(e),optionalServices:[Ka.service]}),n=new Ds(r,{name:"Espruino"});return await n.connect(),n},Cs=async(e,r={},n,i,a,u)=>{const o=r.timeoutMs??n.evalTimeoutMs,s=r.assumeExclusive??!0;if(typeof e!="string")throw new Error("code parameter should be a string");return new Promise((c,l)=>{const f=Zs(5),d=L=>{try{let B=L.data;B.startsWith(">{")&&B.endsWith("}")&&(B=B.substring(1));const S=JSON.parse(B);"reply"in S?S.reply===f?(g(),"result"in S&&c(S.result)):u(`Expected reply ${f}, got ${S.reply}`):u(`Expected packet, missing 'reply' field. Got: ${L.data}`)}catch(B){s?g(L.data):u(B)}},v=L=>{L.newState!=="connected"&&g(`State changed to '${L.newState}', aborting`)};n.addEventListener("data",d),n.addEventListener("change",v);const g=As(o,L=>{l(L)},()=>{n.removeEventListener("data",d),n.removeEventListener("change",v)}),P=`${i}(JSON.stringify({reply:"${f}", result:JSON.stringify(${e})}))
`;a&&u(P),n.write(P)})},H0={};G(H0,{dumpDevices:()=>kC,start:()=>G0});var BC=1e4,kC=async(e="videoinput")=>{(await navigator.mediaDevices.enumerateDevices()).forEach(n=>{n.kind===e&&(console.log(n.label),console.log(` Kind: ${n.kind}`),console.log(` Device id: ${n.deviceId}`))})},G0=async(e={})=>{const r=document.createElement("VIDEO");r.style.display="none",r.playsInline=!0,r.muted=!0,r.classList.add("ixfx-camera"),document.body.appendChild(r);let n=()=>{};const i=()=>{try{n()}catch{}r.remove()};try{return n=(await zC(r,e)).dispose,{videoEl:r,dispose:i}}catch(a){throw console.error(a),i(),a}},zC=async(e,r={})=>{if(e===void 0)throw new Error("videoEl undefined");if(e===null)throw new Error("videoEl null");const n=r.max,i=r.min,a=r.ideal,u={audio:!1,video:{width:{},height:{}}};r.facingMode==="front"&&(r={...r,facingMode:"user"}),r.facingMode==="back"&&(r={...r,facingMode:"environment"}),r.facingMode&&(u.video.facingMode=r.facingMode),r.deviceId&&(u.video.deviceId=r.deviceId),a&&(u.video.width={...u.video.width,ideal:a.width},u.video.height={...u.video.height,ideal:a.height}),n&&(u.video.width={...u.video.width,max:n.width},u.video.height={...u.video.height,max:n.height}),i&&(u.video.width={...u.video.width,min:i.width},u.video.height={...u.video.height,min:i.height});const o=As(r.startTimeoutMs??BC,s=>{throw new Error(`Camera getUserMedia failed: ${s}`)});try{const s=await navigator.mediaDevices.getUserMedia(u),c=()=>{e.pause(),s.getTracks().forEach(v=>v.stop())};e.srcObject=s,o();const l={videoEl:e,dispose:c};return new Promise((d,v)=>{e.addEventListener("loadedmetadata",()=>{e.play().then(()=>{d(l)}).catch(g=>{v(g)})})})}catch(s){throw o(s.toString()),s}},K0={};G(K0,{start:()=>J0});var J0=async e=>{const r=document.createElement("VIDEO");r.style.display="none",r.playsInline=!0,r.muted=!0,r.classList.add("ixfx-video"),document.body.appendChild(r);let n=()=>{};const i=()=>{try{n()}catch{}r.remove()};try{return n=(await OC(r,e)).dispose,{videoEl:r,dispose:i}}catch(a){throw console.error(a),i(),a}},OC=async(e,r)=>{if(e===void 0)throw new Error("videoEl undefined");if(e===null)throw new Error("videoEl null");const n=URL.createObjectURL(r);e.src=n,e.loop=!0;const a={videoEl:e,dispose:()=>{e.pause()}};return new Promise((o,s)=>{e.addEventListener("loadedmetadata",()=>{e.play().then(()=>{o(a)}).catch(c=>{s(c)})})})},TC=class{_source;_state;_teardownNeeded=!1;_cameraConstraints;_cameraStartResult;_videoSourceCapture;_videoFile;_videoStartResult;_showCanvas;_showPreview;_postCaptureDraw;_timer;_captureCanvasEl;constructor(e={}){this._state="ready",this._source="",this._timer=performance.now(),this._showCanvas=e.showCanvas??!1,this._showPreview=e.showPreview??!1,this._cameraConstraints=e.cameraConstraints??void 0,this._captureCanvasEl=e.captureCanvasEl??void 0,this._postCaptureDraw=e.postCaptureDraw}showPreview(e){if(this._state==="disposed")throw new Error("Disposed");let r;switch(this._source){case"camera":r=this._cameraStartResult?.videoEl,r!==void 0&&(r.style.display=e?"block":"none");break}this._showPreview=e}showCanvas(e){if(this._state==="disposed")throw new Error("Disposed");let r;if(this._source==="camera"||this._source==="video")r=this._videoSourceCapture?.canvasEl,r!==void 0&&(r.style.display=e?"block":"none");else throw new Error(`Source not implemented: ${this._source}`);this._showCanvas=e}getCapturer(){if(this._state==="disposed")throw new Error("Disposed");if(this._source==="camera"||this._source==="video")return this._videoSourceCapture;throw new Error(`Source kind not supported ${this._source}`)}async useCamera(e){if(this._state==="disposed")throw new Error("Disposed");this._source="camera",this._teardownNeeded&&this.teardown(),e&&this._cameraConstraints,await this.init()}async useVideo(e){if(this._state==="disposed")throw new Error("Disposed");this._source="video",this._teardownNeeded&&this.teardown(),this._videoFile=e,await this.init()}async initCamera(){const e=await G0(this._cameraConstraints);if(e===void 0)throw new Error("Could not start camera");this._cameraStartResult=e,this.postInit(e)}async initVideo(){if(!this._videoFile)throw new Error("Video file not defined");const e=await J0(this._videoFile);this._videoStartResult=e,this.postInit(e)}async postInit(e){this._showPreview&&(e.videoEl.style.display="block"),this._videoSourceCapture=Uh(e.videoEl,{postCaptureDraw:this._postCaptureDraw,showCanvas:this._showCanvas,canvasEl:this._captureCanvasEl}),this._teardownNeeded=!0,this._cameraStartResult=e}dispose(){this._state!=="disposed"&&(this.teardown(),this._state="disposed")}async init(){switch(this._timer=performance.now(),this._source){case"camera":await this.initCamera();break;case"video":await this.initVideo();break}this._state="initialised"}teardown(){if(!!this._teardownNeeded){switch((this._source==="camera"||this._source==="video")&&this._videoSourceCapture?.dispose(),this._source){case"camera":this._cameraStartResult?.dispose();break;case"video":this._videoStartResult?.dispose();break}this._teardownNeeded=!1}}getFrame(){if(this._state==="disposed")throw new Error("Disposed");switch(this._source){case"camera":return this.getFrameCamera();case"video":return this.getFrameCamera();default:throw new Error(`source type unhandled ${this._source}`)}}getTimestamp(){return performance.now()-this._timer}getFrameCamera(){return this._videoSourceCapture?.capture()}},Ss=Object.freeze({ready:"connecting",connecting:["connected","closed"],connected:["closed"],closed:"connecting"}),WC={};G(WC,{Async:()=>nn,Sync:()=>wo,count:()=>qC,delayLoop:()=>Ms,interval:()=>xa,numericPercent:()=>xC,numericRange:()=>X0,numericRangeRaw:()=>jC,pingPong:()=>Fs,pingPongPercent:()=>Y0,randomUniqueInteger:()=>$y});var Y0=function(e=.1,r,n,i,a){return r===void 0&&(r=0),n===void 0&&(n=1),i===void 0&&(i=r),ee(e,"bipolar","interval"),ee(n,"bipolar","end"),ee(i,"bipolar","offset"),ee(r,"bipolar","start"),Fs(e,r,n,i,a)},Fs=function*(e,r,n,i,a){if(r===void 0)throw new Error("Parameter 'lower' is undefined");if(e===void 0)throw new Error("Parameter 'interval' is undefined");if(n===void 0)throw new Error("Parameter 'upper' is undefined");if(a===void 0&&e<=1&&e>=0?a=10/e:a===void 0&&(a=1234),Number.isNaN(e))throw new Error("interval parameter is NaN");if(Number.isNaN(r))throw new Error("lower parameter is NaN");if(Number.isNaN(n))throw new Error("upper parameter is NaN");if(Number.isNaN(i))throw new Error("upper parameter is NaN");if(r>=n)throw new Error("lower must be less than upper");if(e===0)throw new Error("Interval cannot be zero");const u=n-r;if(Math.abs(e)>=u)throw new Error(`Interval should be between -${u} and ${u}`);let o=e>0;if(n=Math.floor(n*a),r=Math.floor(r*a),e=Math.floor(Math.abs(e*a)),e===0)throw new Error(`Interval is zero (rounding: ${a})`);if(i===void 0?i=r:i=Math.floor(i*a),i>n||i<r)throw new Error(`Start (${i/a}) must be within lower (${r/a}) and upper (${n/a})`);let s=i;yield s/a;let c=!0;for(;;)s=s+(o?e:-e),o&&s>=n?(o=!1,s=n,s===n&&c&&(s=r,o=!0)):!o&&s<=r&&(o=!0,s=r,s===r&&c&&(s=n,o=!1)),yield s/a,c=!1},LC=async(e,r)=>{const n=typeof r=="number"?{millis:r}:r,i=n.delay??"before";(i==="before"||i==="both")&&await ht(n);const a=Promise.resolve(await e());return(i==="after"||i==="both")&&await ht(n),a};async function*$C(){let e,r=new Promise(a=>e=a),n=0;const i=()=>{e(),r=new Promise(a=>e=a)};try{for(;;)n=window.requestAnimationFrame(i),yield await r}finally{e(),window.cancelAnimationFrame(n)}}async function*Ms(e){const r=ke(e);if(typeof r>"u")throw new Error("timeout is undefined");if(r<0)throw new Error("Timeout is less than zero");if(r===0)return yield*$C();let n,i=new Promise(o=>n=o),a=0;const u=()=>{n(),i=new Promise(o=>n=o)};try{for(;;)a=window.setTimeout(u,r),yield await i}finally{n(),window.clearTimeout(a)}}var jC=function*(e,r=0,n,i=!1){if(e<=0)throw new Error("Interval is expected to be above zero");n===void 0&&(n=Number.MAX_SAFE_INTEGER);let a=r;do for(;a<n;)yield a,a+=e;while(i)},X0=function*(e,r=0,n,i=!1,a){ee(e,"nonZero");const u=e<0;if(n!==void 0){if(u&&r<n)throw new Error(`Interval of ${e} will never go from ${r} to ${n}`);if(!u&&r>n)throw new Error(`Interval of ${e} will never go from ${r} to ${n}`)}a=a??1e3,n===void 0?n=Number.MAX_SAFE_INTEGER:n*=a,e=e*a;do{let o=r*a;for(;!u&&o<=n||u&&o>=n;)yield o/a,o+=e}while(i)},qC=function*(e,r=0){if(Le(e,"","amount"),Le(r,"","offset"),e===0)return;let n=0;do yield e<0?-n+r:n+r;while(n++<Math.abs(e)-1)},xC=function(e=.01,r=!1,n=0,i=1){return ee(e,"percentage","interval"),ee(n,"percentage","start"),ee(i,"percentage","end"),X0(e,n,i,r)},UC={};G(UC,{DataDisplay:()=>JC,DataTable:()=>Q0,DragDrop:()=>uv,Forms:()=>nv,byId:()=>_D,canvasHelper:()=>gD,cardinalPosition:()=>vD,clear:()=>CD,copyToClipboard:()=>FD,createAfter:()=>DD,createIn:()=>AD,cycleCssClass:()=>wD,defaultErrorHandler:()=>iS,el:()=>ID,fullSizeCanvas:()=>pD,fullSizeElement:()=>uh,getTranslation:()=>ED,inlineConsole:()=>uS,log:()=>Z0,parentSize:()=>bD,parentSizeCanvas:()=>Ko,pointScaler:()=>nh,pointerVisualise:()=>nS,positionFn:()=>ih,positionFromMiddle:()=>mD,positionRelative:()=>yD,reconcileChildren:()=>MD,resizeObservable:()=>Jo,resolveEl:()=>$e,rx:()=>HC,setCssClass:()=>oh,setCssDisplay:()=>sh,setHtml:()=>ch,setText:()=>lh,themeChangeObservable:()=>SD,viewportToSpace:()=>ah,windowResize:()=>Wa});var VC=(e,r)=>{const n=document.createElement("style");n.textContent=r;let i;return e.shadowRoot?(i=e.shadowRoot,i.innerHTML=""):i=e.attachShadow({mode:"open"}),i.appendChild(n),i},Z0=(e,r={})=>{const{capacity:n=0,monospaced:i=!0,timestamp:a=!1,collapseDuplicates:u=!0,css:o=""}=r;let s=0,c,l=0;const f=$e(e),v=VC(f,`
  .log {
    font-family: ${i?'Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", Monaco, "Courier New", Courier, monospace':"normal"};
    background-color: var(--code-background-color);
    padding: var(--padding1, 0.2em);
    overflow-y: auto;
    height:100%;
  }
  .timestamp {
    margin-right: 0.5em;
    opacity: 0.5;
    font-size: 70%;
    align-self: center;
  }
  .line {
    display: flex;
    padding-bottom: 0.1em;
    padding-top: 0.1em;
  }
  .line:hover {
  
  }
  .error {
    color: red;
  }
  .badge {
    border: 1px solid currentColor;
    align-self: center;
    font-size: 70%;
    padding-left: 0.2em;
    padding-right: 0.2em;
    border-radius: 1em;
    margin-left: 0.5em;
    margin-right: 0.5em;
  }
  .msg {
    flex: 1;
    word-break: break-word;
  }
  ${o}
  `),g=document.createElement("div");g.className="log",v.append(g);const P=z=>{const I=document.createElement("div");if(typeof z=="string")I.innerHTML=z;else if(z instanceof Error){const E=z.stack;I.innerHTML=E===void 0?z.toString():E.toString()}else I.innerHTML=z;I.classList.add("error"),C(I),c=void 0,l=0};let L=0;const B=(z="")=>{const I=S(z);return I&&(I.classList.add("warning"),I)},S=(z="")=>{let I;const E=window.performance.now()-L;if(!(r.minIntervalMs&&E<r.minIntervalMs))if(L=window.performance.now(),typeof z=="object"?I=JSON.stringify(z):z===void 0?I="(undefined)":z===null?I="(null)":typeof z=="number"?(Number.isNaN(I)&&(I="(NaN)"),I=z.toString()):I=z,I.length===0){const _=document.createElement("hr");c=void 0,C(_)}else if(I===c&&u){const _=g.firstElementChild;let V=_.querySelector(".badge");return V===null&&(V=document.createElement("div"),V.className="badge",_.insertAdjacentElement("beforeend",V)),_!==null&&(V.textContent=(++l).toString()),_}else{const _=document.createElement("div");return _.textContent=I,C(_),c=I,_}},C=z=>{if(a){const I=document.createElement("div"),E=document.createElement("div");E.className="timestamp",E.textContent=new Date().toLocaleTimeString(),I.append(E,z),z.classList.add("msg"),I.classList.add("line"),z=I}else z.classList.add("line","msg");if(r.reverse?g.append(z):g.insertBefore(z,g.firstChild),n>0&&++s>n*2)for(;s>n;)g.lastChild?.remove(),s--;r.reverse&&(g.scrollTop=g.scrollHeight),l=0};return{error:P,log:S,warn:B,append:C,clear:()=>{g.innerHTML="",c=void 0,l=0,s=0},dispose:()=>{g.remove()},get isEmpty(){return s===0}}},HC=(e,r,n)=>{const i=$e(e),a=aa(i,r),u={},o=()=>{Object.keys(u).forEach(l=>{delete u[l]})},s=c=>(c.subscribe({next:l=>{Object.assign(u,l)}}),{value:u,clear:o});return n===void 0?s(a):n.pluck?s(a.pipe(ia(c=>c[n.pluck]))):n.transform?s(a.pipe(ia(c=>n.transform(c)))):s(a)},Q0={};G(Q0,{fromList:()=>KC,fromObject:()=>rv});var ev=cn(xc(),1),GC=(e,r)=>{if(e===null)return"(null)";if(e===void 0)return"(undefined)";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return`"${e}"`;if(typeof e=="number"){let n=e;return r.roundNumbers!==void 0&&(n=sn(r.roundNumbers,e)),r.precision!==void 0?n.toFixed(r.precision):n.toString()}return typeof e=="object"?tv(e,r):ev.default.stringify(e)},tv=(e,r)=>{let n='<div style="display:grid; grid-template-columns: repeat(2, 1fr)">';for(const i of Object.entries(e)){const a=GC(i[1],r);n+=`<div class="label" style="display:table-cell">${i[0]}</div>
      <div class="data" style="display:table-cell">${a}</div>`}return n+="</div>",n},KC=(e,r)=>{const n=$e(e);let i=document.createElement("DIV");n.append(i);const a=()=>i?(i.remove(),i=void 0,!0):!1,u=o=>{const s=new Set;for(const[l,f]of o){const d=`table-${l}`;s.add(d);let v=n.querySelector(`#${d}`);if(v===null){if(v=document.createElement("table"),!v)throw new Error("Could not create table element");v.id=d,n.append(v)}no(v,f)}const c=Array.from(n.querySelectorAll("table"));for(const l of c)s.has(l.id)||l.remove()};return r&&u(r),{update:u,remove:a}},no=(e,r,n={})=>{const i=n.precision??2,a=n.idPrefix??"",u=n.objectsAsTables??!1;if(r===void 0){e.innerHTML="";return}const o=new Set;for(const[c,l]of Object.entries(r)){const f=`${a}-row-${c}`;o.add(f);let d=e.querySelector(`tr[data-key='${f}']`);if(d===null){d=document.createElement("tr"),e.append(d),d.setAttribute("data-key",f);const P=document.createElement("td");P.textContent=c,P.classList.add("label"),d.append(P)}let v=d.querySelector(`td[data-key='${f}-val']`);v===null&&(v=document.createElement("td"),v.classList.add("data"),v.setAttribute("data-key",`${f}-val`),d.append(v));let g;n.formatter&&(g=n.formatter(l,c)),g===void 0&&(typeof l=="object"?g=u?tv(l,n):ev.default.stringify(l):typeof l=="number"?g=n.roundNumbers?Math.round(l).toString():l.toFixed(i):typeof l=="boolean"?g=l?"true":"false":g="JSON"+JSON.stringify(l)),v.innerHTML=g}const s=Array.from(e.querySelectorAll("tr"));for(const c of s){const l=c.getAttribute("data-key");o.has(l)||c.remove()}},rv=(e,r,n)=>{const i=$e(e),a=n?.idPrefix??Math.floor(Math.random()*1e3).toString();let u=document.createElement("table");i.append(u);const o=()=>u?(u.remove(),u=void 0,!0):!1;return r&&no(u,r,n),{remove:o,update:c=>{if(!u)throw new Error("Table disposed");no(u,c,{...n,idPrefix:a})}}},JC=class{dataTable;constructor(e=!1){if(document.querySelector("#ixfx-data-display")!==null)throw new Error("DataDisplay already loaded on this page");const n=document.createElement("div");n.id="ixfx-data-display",e&&n.classList.add("dark");const i=document.createElement("style");i.textContent=`
    #ixfx-data-display {
      background: white;
      color: black;
      border: 2px solid hsl(0deg 0.61% 90%);
      border-radius: 4px;
      z-index: 1000;
      opacity: 40%;
      padding: 1em;
      font-family: monospace;
      position: fixed;
      right: 1em;
      top: 1em;
    }
    #ixfx-data-display.dark {
      background: black;
      color: white;
      border: 2px solid hsl(0deg 0.61% 10%);
    }
    #ixfx-data-display:hover {
      opacity: 100%;
    }
    #ixfx-data-display table {
      border-collapse: collapse;
    }
    #ixfx-data-display tr:not(:last-child) {
      border-bottom: 2px solid hsl(0deg 0.61% 90%);
    }
    #ixfx-data-display.dark tr:not(:last-child) {
      border-bottom: 2px solid hsl(0deg 0.61% 10%);
    }
    #ixfx-data-display td {
      padding-bottom: 0.4em;
      padding-top: 0.4em;
    }
    #ixfx-data-display .label {
      color: hsl(0deg 0.61% 60%);
      text-align: right;
      padding-right: 0.5em;
    }
    #ixfx-data-display.dark .label {
      color: gray;
    }
    `,n.style.display="inline-block",document.body.append(i),document.body.append(n),this.dataTable=rv(n,void 0,{objectsAsTables:!0,roundNumbers:2})}update(e){this.dataTable.update(e)}},nv={};G(nv,{button:()=>QC,checkbox:()=>XC,numeric:()=>ZC,select:()=>eS,textAreaKeyboard:()=>YC});var YC=e=>{e.addEventListener("keydown",r=>{const n=e.value,i=e.selectionStart,a=e.selectionEnd;if(r.key==="Tab"&&r.shiftKey)return e.value.substring(i-2,i)==="  "&&(e.value=n.substring(0,i-2)+n.substring(a)),e.selectionStart=e.selectionEnd=i-2,r.preventDefault(),!1;if(r.key==="Tab")return e.value=n.substring(0,i)+"  "+n.substring(a),e.selectionStart=e.selectionEnd=i+2,r.preventDefault(),!1})},XC=(e,r)=>{const n=$e(e);return r&&n.addEventListener("change",()=>{r(n.checked)}),{get checked(){return n.checked},set checked(i){n.checked=i}}},ZC=(e,r,n)=>{const i=$e(e),a=n?"change":"input";return r&&i.addEventListener(a,()=>{r(parseInt(i.value))}),{get value(){return parseInt(i.value)},set value(u){i.value=u.toString()}}},QC=(e,r)=>{const n=$e(e);return r&&n.addEventListener("click",i=>{r()}),{click(){r&&r()},set disabled(i){n.disabled=i}}},eS=(e,r,n={})=>{const i=$e(e),{placeholderOpt:a,shouldAddChoosePlaceholder:u=!1,autoSelectAfterChoice:o=-1}=n,s=()=>{r!==void 0&&r(i.value),o>=0&&(i.selectedIndex=o)};return r&&i.addEventListener("change",c=>{s()}),{set disabled(c){i.disabled=c},get value(){return i.value},get index(){return i.selectedIndex},get isSelectedPlaceholder(){return(u||n.placeholderOpt!==void 0)&&i.selectedIndex===0},setOpts(c,l){i.options.length=0,u?c=["-- Choose --",...c]:a!==void 0&&(c=[a,...c]);let f=0;c.forEach((d,v)=>{const g=document.createElement("option");g.value=d,g.innerHTML=d,l!==void 0&&d===l&&(f=v),i.options.add(g)}),i.selectedIndex=f},select(c=0,l=!1){i.selectedIndex=c,l&&r&&s()}}},tS=class extends bs{values;constructor(e={}){super(e);this.values=[]}onTrimmed(){}trimStore(e){return e>=this.values.length?this.values.length:(this.values=this.values.slice(-e),this.values.length)}onReset(){this.values=[]}filterData(e){const r=e.map(i=>"at"in i?i:{...i,at:Date.now()}),n=r.at(-1);if(this.storeIntermediate)this.values.push(...r);else switch(this.values.length){case 0:{this.values.push(n);break}case 1:{this.values.push(n);break}case 2:{this.values[1]=n;break}}return r}get last(){return this.values.length===1?this.values[0]:this.values.at(-1)}get initial(){return this.values.at(0)}get size(){return this.values.length}get elapsed(){return Date.now()-this.values[0].at}},_s=class extends tS{initialRelation;lastResult;constructor(e={}){super(e)}onTrimmed(){this.initialRelation=void 0}get x(){return this.last.x}get y(){return this.last.y}onReset(){super.onReset(),this.lastResult=void 0,this.initialRelation=void 0}seenEvent(e){if("getCoalescedEvents"in e){const n=e.getCoalescedEvents().map(i=>({x:i.clientX,y:i.clientY}));return this.seen(...n)}else return this.seen({x:e.clientX,y:e.clientY})}computeResults(e){const r=this.last,n=this.values.at(-2);if(this.initialRelation===void 0&&this.initial)this.initialRelation=Ti(this.initial);else if(this.initialRelation===void 0)throw new Error("Bug: No initialRelation, and this.inital is undefined?");const i=Ti(n===void 0?r:n),a=this.initialRelation(r),u=n===void 0?0:Ze.length(n,r)/(r.at-n.at),o={...i(r),speed:u},s={fromInitial:a,fromLast:o,values:[...this.values]};return this.lastResult=s,s}get line(){return this.values.length===1?[]:Ze.joinPointsToLines(...this.values)}get vectorPolar(){return Yi.fromLinePolar(this.lineStartEnd)}get vectorCartesian(){return Yi.fromLineCartesian(this.lineStartEnd)}get lineStartEnd(){const e=this.initial;return this.values.length<2||!e?Ze.Empty:{a:e,b:this.last}}distanceFromStart(){const e=this.initial;return this.values.length>=2&&e!==void 0?Lt(e,this.last):0}difference(){const e=this.initial;return this.values.length>=2&&e!==void 0?$r(this.last,e):hf}angleFromStart(){const e=this.initial;if(e!==void 0&&this.values.length>2)return gn(e,this.last)}get length(){if(this.values.length===1)return 0;const e=this.line;return Ze.length(e)}},iv=class extends L0{constructor(e={}){super((r,n)=>{if(n===void 0)throw new Error("Requires start point");const i=new _s({...e,id:r});return i.seen(n),i})}seenEvent(e){if("getCoalescedEvents"in e){const n=e.getCoalescedEvents().map(i=>super.seen(i.pointerId.toString(),i));return Promise.all(n)}else return Promise.all([super.seen(e.pointerId.toString(),e)])}},av=(e={})=>new iv(e),rS=(e={})=>new _s(e),nS=(e,r={})=>{const n=r.touchRadius??45,i=r.touchRadius??20,a=r.trace??!1,u=r.hue??100,o=`hsla(${u}, 100%, 10%, 10%)`;let s=u;const c=$e(e),l=av({storeIntermediate:a}),f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.id="pointerVis",f.style.zIndex="-1000",f.style.position="fixed",f.style.top="0",f.style.left="0",f.style.width="100%",f.style.height="100%",f.style.boxSizing="border-box",f.style.border="3px solid red",f.style.pointerEvents="none",f.style.touchAction="none",uh(f);let d=0;const v=P=>{const L=P.pointerId.toString();l.delete(L),s=u,f.querySelector(`#pv-start-${L}`)?.remove();for(let B=0;B<d+10;B++)f.querySelector(`#pv-progress-${L}-${B}`)?.remove();d=0},g=async P=>{const L=P.pointerId.toString(),B={x:P.x,y:P.y},S=P.pointerType;if(P.type==="pointermove"&&!l.has(L))return;const C=await l.seen(P.pointerId.toString(),{x:P.clientX,y:P.clientY});if(C.values.length===1){const z=oa.circle({...C.values[0],radius:S==="touch"?n:i},f,{fillStyle:o},`#pv-start-${L}`);z.style.pointerEvents="none",z.style.touchAction="none"}const N=`hsla(${s}, 100%, 50%, 50%)`,x=oa.circle({...B,radius:S==="touch"?n:i},f,{fillStyle:N},`#pv-progress-${L}-${C.values.length}`);x.style.pointerEvents="none",x.style.touchAction="none",s+=1,d=C.values.length};document.body.append(f),c.addEventListener("pointerdown",g),c.addEventListener("pointermove",g),c.addEventListener("pointerup",v),c.addEventListener("pointerleave",v),c.addEventListener("contextmenu",P=>{P.preventDefault()})},iS=()=>{let e=!0;const r=document.createElement("div");r.style.color="black",r.style.border="2px solid red",r.style.backgroundColor="hsl(0, 80%, 90%)",r.style.padding="1em",r.style.display="none",r.style.top="1em",r.style.left="1em",r.style.position="absolute",r.style.fontFamily="monospace";const n=document.createElement("div");n.style.maxWidth="50vw",n.style.maxHeight="50vh",n.style.overflowY="scroll",r.innerHTML="<h1>Error</h1>",r.append(n);const i=c=>{c.style.padding="0.3em",c.style.marginTop="1em"},a=document.createElement("button");a.textContent="Close",a.addEventListener("click",()=>{s()});const u=document.createElement("button");u.textContent="Stop displaying errors",u.addEventListener("click",()=>{e=!1,s()}),i(a),i(u),r.append(a),r.append(u),document.body.append(r);const o=c=>{r.style.display="inline",n.innerHTML+=c.stack?`<pre>${c.stack}</pre>`:`<p>${c.toString()}</p>`},s=()=>{r.style.display="none"};return window.onerror=(c,l,f,d,v)=>{e&&(v?(console.log(v),o(v)):(console.log(c),o(c)))},window.addEventListener("unhandledrejection",c=>{console.log(c.reason),e&&o(c.reason)}),{show:o,hide:s}},uv={};G(uv,{draggable:()=>aS});var aS=(e,r)=>{let n=W.Placeholder,i;const a=()=>{e.classList.contains("drag-sel")&&e.classList.remove("drag-sel")},u=d=>{e.classList.contains("drag-sel")?e.classList.remove("drag-sel"):e.classList.add("drag-sel"),d.stopPropagation()};e.ownerDocument.addEventListener("click",a),e.addEventListener("click",u);const o=()=>{e.classList.remove("drag-progress"),e.ownerDocument.removeEventListener("pointermove",c),e.ownerDocument.removeEventListener("pointerup",l),e.ownerDocument.removeEventListener("pointercancel",f)},s=()=>{console.log("drag dispose"),e.classList.contains("drag-progress")?f(null,"dispose"):o(),e.ownerDocument.removeEventListener("click",a),e.removeEventListener("click",u)},c=d=>{d.preventDefault(),d.stopPropagation();const g={delta:W.isPlaceholder(n)?{x:d.offsetX,y:d.offsetY}:{x:d.x-n.x,y:d.y-n.y},initial:n,token:i};typeof r.progress<"u"&&!r.progress(g)&&f(null,"discontinued")},l=d=>{o();const v={x:d.x-n.x,y:d.y-n.y},g={initial:n,token:i,delta:v};typeof r.success<"u"&&r.success(g)},f=(d,v="pointercancel")=>{o();const g={token:i,initial:n,delta:{x:-1,y:-1}};typeof r.abort<"u"&&r.abort(v,g)};return e.addEventListener("pointerdown",d=>{if(!e.classList.contains("drag-sel"))return;n={x:d.x,y:d.y};const g=typeof r.start<"u"?r.start():{allow:!0,token:i};!g.allow||(i=g.token,e.classList.add("drag-progress"),e.ownerDocument.addEventListener("pointermove",c),e.ownerDocument.addEventListener("pointerup",l),e.ownerDocument.addEventListener("pointercancel",f))}),s},uS=(e={})=>{const r={log:console.log,error:console.error,warn:console.warn},n=document.createElement("DIV");n.id="ixfx-log",n.style.position="fixed",n.style.left="0px",n.style.top="0px",n.style.pointerEvents="none",n.style.display="none",document.body.prepend(n);const i=Z0(n,e),a=u=>{n.style.display=u?"block":"none"};console.error=(u,...o)=>{i.error(u),o.length>0&&i.error(o),r.error(u,...o),a(!0)},console.warn=(u,...o)=>{i.warn(u),o.length>0&&i.warn(o),a(!0)},console.log=(u,...o)=>{i.log(u),o.length>0&&i.log(o),r.log(u,...o),a(!0)},window.onerror=(u,o,s,c,l)=>{const f=o===void 0?"":Uy(o,"/",{fromEnd:!0}),d=typeof u=="string"?u:u.toString();i.error(d+` (${f}:${s})`),a(!0)}},oS={};G(oS,{Easings:()=>vo,Envelopes:()=>Is,Forces:()=>Ns,Oscillators:()=>zs,adsr:()=>Rs,adsrIterable:()=>fv,defaultAdsrOpts:()=>lv,jitter:()=>wv,perSecond:()=>NS,pingPong:()=>Fs,pingPongPercent:()=>Y0});var Is={};G(Is,{adsr:()=>Rs,adsrIterable:()=>fv,defaultAdsrOpts:()=>lv});var ov={};G(ov,{frequencyTimer:()=>Pr,frequencyTimerSource:()=>cv,hasElapsedMs:()=>sv,msElapsedTimer:()=>lr,relativeTimer:()=>Ci,ticksElapsedTimer:()=>Ps});function sv(e){const r=Ci(e,{timer:lr()});return()=>r.isDone}var cv=e=>()=>Pr(e,{timer:lr()}),Ci=(e,r={})=>{const n=r.timer??lr(),i=r.clampValue??!1,a=r.wrapValue??!1;if(i&&a)throw new Error("clampValue and wrapValue cannot both be enabled");let u=!1,o=1;return{mod(s){o=s},get isDone(){return u},reset:()=>{u=!1,n.reset()},get elapsed(){let s=n.elapsed/(e*o);return i?s=Wt(s):a?s>=1&&(s=s%1):s>=1&&(u=!0),s}}},Pr=(e,r={})=>{const n=r.timer??lr(),i=e/1e3;let a=1;return{mod:u=>{a=u},reset:()=>{n.reset()},get elapsed(){const u=n.elapsed*(i*a),o=u-Math.floor(u);if(o<0)throw new Error(`Unexpected cycle fraction less than 0. Elapsed: ${u} f: ${o}`);if(o>1)throw new Error(`Unexpected cycle fraction more than 1. Elapsed: ${u} f: ${o}`);return o}}},lr=()=>{let e=performance.now();return{reset:()=>{e=performance.now()},get elapsed(){return performance.now()-e}}},Ps=()=>{let e=0;return{reset:()=>{e=0},get elapsed(){return++e}}},lv=()=>({attackBend:-1,decayBend:-.3,releaseBend:-.3,peakLevel:1,initialLevel:0,sustainLevel:.6,releaseLevel:0,attackDuration:600,decayDuration:200,releaseDuration:800,shouldLoop:!1}),sS=Object.freeze({attack:["decay","release"],decay:["sustain","release"],sustain:["release"],release:["complete"],complete:null}),cS=class extends sr{#e;#t;#r;#n;#i;attackDuration;decayDuration;releaseDuration;decayDurationTotal;shouldLoop;constructor(e){super();this.attackDuration=e.attackDuration??300,this.decayDuration=e.decayDuration??500,this.releaseDuration=e.releaseDuration??1e3,this.shouldLoop=e.shouldLoop??!1,this.#e=new Ga(sS,{initial:"attack"}),this.#e.addEventListener("change",r=>{r.newState==="release"&&this.#i&&this.#r?.reset(),super.fireEvent("change",r)}),this.#e.addEventListener("stop",r=>{super.fireEvent("complete",r)}),this.#t=lr,this.#n=this.#i=!1,this.decayDurationTotal=this.attackDuration+this.decayDuration}switchState(){if(this.#r===void 0)return!1;let e=this.#r.elapsed;const r=this.#i&&!this.#n;let n=!1;do switch(n=!1,this.#e.state){case"attack":{(e>this.attackDuration||r)&&(this.#e.next(),n=!0);break}case"decay":{(e>this.decayDurationTotal||r)&&(this.#e.next(),n=!0);break}case"sustain":{(!this.#n||r)&&(e=0,this.#e.next(),this.#r.reset(),n=!0);break}case"release":{e>this.releaseDuration&&(this.#e.next(),n=!0);break}case"complete":this.shouldLoop&&this.trigger(this.#i)}while(n);return n}computeRaw(e=!0){if(this.#r===void 0)return[void 0,0,this.#e.state];e&&this.switchState();const r=this.#e.state,n=this.#r.elapsed;let i=0;const a=this.#e.state;switch(a){case"attack":{i=n/this.attackDuration;break}case"decay":{i=(n-this.attackDuration)/this.decayDuration;break}case"sustain":{i=1;break}case"release":{i=Math.min(n/this.releaseDuration,1);break}case"complete":return[void 0,1,r];default:throw new Error(`State machine in unknown state: ${a}`)}return[a,i,r]}get isDone(){return this.#e.isDone}onTrigger(){}trigger(e=!1){this.onTrigger(),this.#e.reset(),this.#r=this.#t(),this.#n=e,this.#i=e}compute(){}release(){this.isDone||!this.#i||(this.#n=!1,this.compute())}},lS=class extends cS{attackPath;decayPath;releasePath;initialLevel;peakLevel;releaseLevel;sustainLevel;attackBend;decayBend;releaseBend;initialLevelOverride;retrigger;releasedAt;constructor(e){super(e);this.initialLevel=e.initialLevel??0,this.peakLevel=e.peakLevel??1,this.releaseLevel=e.releaseLevel??0,this.sustainLevel=e.sustainLevel??.75,this.retrigger=e.retrigger??!0,this.attackBend=e.attackBend??0,this.releaseBend=e.releaseBend??0,this.decayBend=e.decayBend??0;const r=1;this.attackPath=Wi(pn({x:0,y:this.initialLevel},{x:r,y:this.peakLevel},-this.attackBend)),this.decayPath=Wi(pn({x:0,y:this.peakLevel},{x:r,y:this.sustainLevel},-this.decayBend)),this.releasePath=Wi(pn({x:0,y:this.sustainLevel},{x:r,y:this.releaseLevel},-this.releaseBend))}onTrigger(){if(this.initialLevelOverride=void 0,!this.retrigger){const[e,r,n]=this.compute();!Number.isNaN(r)&&r>0&&(this.initialLevelOverride=r)}}get value(){return this.compute(!0)[1]}compute(e=!0){const[r,n]=super.computeRaw(e);if(r===void 0)return[void 0,Number.NaN,Number.NaN];let i;switch(r){case"attack":{i=this.attackPath.interpolate(n).y,this.initialLevelOverride!==void 0&&(i=ur(i,0,1,this.initialLevelOverride,1)),this.releasedAt=i;break}case"decay":{i=this.decayPath.interpolate(n).y,this.releasedAt=i;break}case"sustain":{i=this.sustainLevel,this.releasedAt=i;break}case"release":{i=this.releasePath.interpolate(n).y,this.releasedAt!==void 0&&(i=ur(i,0,this.sustainLevel,0,this.releasedAt));break}case"complete":{i=this.releaseLevel,this.releasedAt=void 0;break}default:throw new Error(`Unknown state: ${r}`)}return[r,i,n]}},Rs=e=>new lS(e);async function*fv(e){const r=Rs(e.env),n=e.sampleRateMs??100;r.trigger();for await(const i of xa(()=>{if(!r.isDone)return r.value},{fixed:n,signal:e.signal}))yield i}var Ns={};G(Ns,{accelerationForce:()=>mS,angleFromAccelerationForce:()=>vv,angleFromVelocityForce:()=>yv,angularForce:()=>hv,apply:()=>yS,attractionForce:()=>hS,computeAccelerationToTarget:()=>mv,computeAttractionForce:()=>dv,computePositionFromAngle:()=>gv,computePositionFromVelocity:()=>ks,computeVelocity:()=>Bs,constrainBounce:()=>dS,guard:()=>fS,magnitudeForce:()=>gS,nullForce:()=>pS,orientationForce:()=>CS,pendulumForce:()=>ES,springForce:()=>bS,targetForce:()=>vS,velocityForce:()=>wS});var fS=(e,r="t")=>{if(e===void 0)throw new Error(`Parameter ${r} is undefined. Expected ForceAffected`);if(e===null)throw new Error(`Parameter ${r} is null. Expected ForceAffected`);if(typeof e!="object")throw new Error(`Parameter ${r} is type ${typeof e}. Expected object of shape ForceAffected`)},dS=(e={width:1,height:1},r=1)=>{const n=$u(e,"left"),i=$u(e,"right"),a=ju(e,"top"),u=ju(e,"bottom");return o=>{const s=ks(o.position??W.Empty,o.velocity??W.Empty);let c=o.velocity??W.Empty,{x:l,y:f}=s;return l>i?(l=i,c=W.invert(W.multiply(c,r),"x")):l<n&&(l=n,c=W.invert(W.multiply(c,r),"x")),f>u?(f=u,c=W.multiply(W.invert(c,"y"),r)):s.y<a&&(f=a,c=W.invert(W.multiply(c,r),"y")),Object.freeze({...o,position:{x:l,y:f},velocity:c})}},hS=(e,r,n={})=>i=>{let a=i.acceleration??W.Empty;return e.forEach(u=>{if(u===i)return;const o=dv(u,i,r,n);a=W.sum(a,o)}),{...i,acceleration:a}},dv=(e,r,n,i={})=>{if(e.position===void 0)throw new Error("attractor.position not set");if(r.position===void 0)throw new Error("attractee.position not set");const a=i.min??.01,u=i.max??.7,o=W.normalise(W.subtract(e.position,r.position)),s=Wt(W.distance(o),a,u);return W.multiply(o,n*(e.mass??1)*(r.mass??1)/(s*s))},vS=(e,r={})=>i=>{const a=mv(e,i.position??{x:.5,y:.5},r);return{...i,acceleration:W.sum(i.acceleration??W.Empty,a)}},yS=(e,...r)=>{if(e===void 0)throw new Error("t parameter is undefined");r.forEach(u=>{u!=null&&(typeof u=="function"?e=u(e):e={...e,acceleration:W.sum(e.acceleration??W.Empty,u)})});const n=Bs(e.acceleration??W.Empty,e.velocity??W.Empty),i=ks(e.position??W.Empty,n);return{...e,position:i,velocity:n,acceleration:W.Empty}},mS=(e,r="ignored")=>n=>Object.freeze({...n,acceleration:Ya(e,n,r)}),Ya=(e,r,n="ignored")=>{let i;if(n==="dampen")i=a=>W.divide(e,a,a);else if(n==="multiply")i=a=>W.multiply(e,a,a);else if(n==="ignored")i=a=>e;else throw new Error(`Unknown 'mass' parameter '${n}. Expected 'dampen', 'multiply' or 'ignored'`);return W.sum(r.acceleration??W.Empty,i(r.mass??1))},gS=(e,r="ignored")=>n=>{if(n.velocity===void 0)return n;const i=W.distance(W.normalise(n.velocity)),a=e*i*i,u=W.multiply(W.invert(n.velocity),a);return Object.freeze({...n,acceleration:Ya(u,n,r)})},pS=e=>e,wS=(e,r)=>{const n=W.pipeline(W.invert,i=>W.multiply(i,e));return i=>{if(i.velocity===void 0)return i;const a=n(i.velocity);return Object.freeze({...i,acceleration:Ya(a,i,r)})}},hv=()=>e=>{const r=e.angularAcceleration??0,n=e.angularVelocity??0,i=e.angle??0,a=n+r,u=i+a;return Object.freeze({...e,angle:u,angularVelocity:a,angularAcceleration:0})},vv=(e=20)=>r=>{const n=r.acceleration??W.Empty;return Object.freeze({...r,angularAcceleration:n.x*e})},yv=(e=1)=>r=>{const n=W.angle(r.velocity??W.Empty);return Object.freeze({...r,angle:e<1?iy(e,r.angle??0,n):n})},bS=(e,r=.5,n=2e-4,i=.999)=>a=>{const u=W.subtract(a.position??W.Empty,e),o=W.distance(u),s=Math.abs(r-o),c=W.pipelineApply(u,W.normalise,v=>W.multiply(v,-n*s)),l=Ya(c,a,"dampen"),f=Bs(l??W.Empty,a.velocity??W.Empty),d=W.multiply(f,i,i);return{...a,velocity:d,acceleration:W.Empty}},ES=(e={x:.5,y:0},r={})=>n=>{const i=r.length??W.distance(e,n.position??W.Empty),a=r.speed??.001,u=r.damping??.995;let o=n.angle;o===void 0&&(n.position?o=W.angle(e,n.position)-Math.PI/2:o=0);const s=-1*a/i*Math.sin(o),c=(n.angularVelocity??0)+s;return o+=c,Object.freeze({angularVelocity:c*u,angle:o,position:gv(i,o+Math.PI/2,e)})},Bs=(e,r,n)=>{const i=W.sum(r,e);return n!==void 0?W.clampMagnitude(i,n):i},mv=(e,r,n={})=>{const i=n.diminishBy??.001,a=W.subtract(e,r);return n.range&&W.compare(W.abs(a),n.range)===-2?W.Empty:W.multiply(a,i)},ks=(e,r)=>W.sum(e,r),gv=(e,r,n)=>Ye.toCartesian(e,r,n),DS=hv(),AS=vv(),CS=(e=.5)=>{const r=yv(e);return n=>(n=DS(n),n=AS(n),n=r(n),n)},zs={};G(zs,{saw:()=>PS,sine:()=>MS,sineBipolar:()=>_S,spring:()=>FS,square:()=>RS,triangle:()=>IS});var pv=Math.PI*2,SS=(e={},r=0,n=1)=>{const i=e.mass??1,a=e.stiffness??100,u=e.soft??!1,o=e.damping??10,s=e.velocity??.1,c=n-r;if(u||1<=o/(2*Math.sqrt(a*i))){const l=-Math.sqrt(a/i),f=-l*c-s;return d=>n-(c+d*f)*Math.E**(d*l)}else{const l=Math.sqrt(4*i*a-o**2),f=(o*c-2*i*s)/l,d=.5*l/i,v=-(.5*o)/i;return g=>n-(Math.cos(g*d)*c+Math.sin(g*d)*f)*Math.E**(g*v)}};function*FS(e={},r){r===void 0?r=lr():typeof r=="number"&&(r=Pr(r));const n=SS(e,0,1);let i=e.countdown??10;for(;i>0;){const a=n(r.elapsed/1e3);yield a,a===1?i--:i=100}}function*MS(e){if(e===void 0)throw new TypeError("Parameter 'timerOrFreq' is undefined");for(typeof e=="number"&&(e=Pr(e));;)yield(Math.sin(e.elapsed*pv)+1)/2}function*_S(e){if(e===void 0)throw new TypeError("Parameter 'timerOrFreq' is undefined");for(typeof e=="number"&&(e=Pr(e));;)yield Math.sin(e.elapsed*pv)}function*IS(e){for(typeof e=="number"&&(e=Pr(e));;){let r=e.elapsed;r<.5?r*=2:r=2-r*2,yield r}}function*PS(e){if(e===void 0)throw new TypeError("Parameter 'timerOrFreq' is undefined");for(typeof e=="number"&&(e=Pr(e));;)yield e.elapsed}function*RS(e){for(typeof e=="number"&&(e=Pr(e));;)yield e.elapsed<.5?0:1}var wv=(e={})=>{const r=e.clamped??!0;let n=a=>0;if(typeof e.absolute<"u"){ee(e.absolute,r?"percentage":"bipolar","opts.absolute");const a=Xs({min:-e.absolute,max:e.absolute,source:e.source});n=u=>u+a()}else if(typeof e.relative<"u")ee(e.relative,r?"percentage":"bipolar","opts.relative"),n=a=>a+Ty({min:-e.relative*a,max:e.relative*a,source:e.source});else throw new Error("Either absolute or relative jitter amount is required.");return a=>{ee(a,r?"percentage":"bipolar","value");let u=n(a);return r&&(u=Wt(u)),u}},NS=e=>{const r=e/1e3;let n=performance.now();return()=>{const i=performance.now()-n;return n=performance.now(),r*i}};try{typeof window<"u"&&(window.ixfx={...window.ixfx,Modulation:{Forces:Ns,jitter:wv,Envelopes:Is,Oscillators:zs,Easings:vo}})}catch{}var bv=class extends sr{#e;#t;constructor(e=void 0){super();this.#e=new Map,e===void 0&&(e=r=>{if(r===void 0)throw new Error("Cannot create key for undefined");return typeof r=="string"?r:JSON.stringify(r)}),this.#t=e}clear(){this.#e.clear(),this.fireEvent("change",void 0)}keys(){return this.#e.keys()}values(){return this.#e.values()}toArray(){return Array.from(this.#e.entries())}debugString(){let e="";for(const[r,n]of this.#e.entries())e+=`${r}: ${n}, `;return e.endsWith(", ")?e.substring(0,e.length-2):e}frequencyOf(e){if(typeof e=="string")return this.#e.get(e);const r=this.#t(e);return this.#e.get(r)}relativeFrequencyOf(e){let r;if(typeof e=="string")r=this.#e.get(e);else{const i=this.#t(e);r=this.#e.get(i)}if(r===void 0)return;const n=this.minMaxAvg();return r/n.total}entries(){return Array.from(this.#e.entries())}minMaxAvg(){return Kc.minMaxAvg(this.entries())}entriesSorted(e="value"){return Yc(e)(this.entries())}add(...e){if(e===void 0)throw new Error("value parameter is undefined");e.map(this.#t).forEach(n=>{const i=this.#e.get(n)??0;this.#e.set(n,i+1)}),this.fireEvent("change",void 0)}},BS=e=>new bv(e),Ev=(e=3)=>{ee(e,"aboveZero","scaling");let r=0,n=0,i=!1;return{dispose(){i=!0},get isDisposed(){return i},add(u){if(i)throw new Error("MovingAverage disposed, cannot add");return n++,r=r+(u-r)/Math.min(n,e),r},clear(){if(i)throw new Error("MovingAverage disposed, cannot clear");r=0,n=0},compute(){return r}}},kS=(e=200,r=0,n=3)=>{ee(n,"aboveZero","scaling"),ee(e,"aboveZero","decayRateMs");const i=Ev(n);let a=0;const u=()=>{a!==0&&clearTimeout(a),a=setTimeout(o,e)},o=()=>{i.add(r),i.isDisposed||setTimeout(o,e)};return{add(c){return u(),i.add(c)},dispose(){i.dispose()},clear:function(){i.clear()},compute:function(){return i.compute()},isDisposed:!1}},zS=(e=100,r)=>{let n=!1,i=new Xt({capacity:e,discardPolicy:"older"});const a=()=>{i=new Xt({capacity:e,discardPolicy:"older"})},u=()=>r===void 0?qs(i.data):js(i.data,r);return{add:c=>(i.enqueue(c),u()),compute:u,clear:a,dispose:()=>{n=!0},isDisposed:n}},OS=Math.PI*2,Ic=(e,r)=>{const n=OS*r*e;return n/(n+1)},Pc=(e,r,n)=>e*r+(1-e)*n,TS=(e=1,r=0,n=1)=>{let i=0,a=0,u=0;return(s,c)=>{c===void 0&&(c=performance.now());const l=c-u,f=Ic(l,n),d=(s-i)/l,v=Pc(f,d,a),g=e+r*Math.abs(v),P=Ic(l,g),L=Pc(P,s,i);return i=L,a=v,u=c,L}},Dv=class extends Es{lastMark=0;mark(){this.lastMark>0&&this.seen(window.performance.now()-this.lastMark),this.lastMark=window.performance.now()}},WS=e=>new Dv(e),$i=e=>(typeof e=="function"&&(e=e()),ee(e,"percentage","v"),1-e),Av={};G(Av,{addToArray:()=>XS,asArray:()=>YS,asCallback:()=>JS,asPromise:()=>GS,asValue:()=>KS,average:()=>Pv,chain:()=>aF,chunk:()=>Nv,debounce:()=>US,delay:()=>qS,drop:()=>iF,duration:()=>VS,filter:()=>Bv,flatten:()=>QS,fromFunction:()=>Sv,lazy:()=>xS,max:()=>Iv,mergeAsArray:()=>rF,mergeFlat:()=>tF,min:()=>_v,single:()=>ZS,synchronise:()=>nF,take:()=>Fv,tally:()=>Mv,tick:()=>HS,total:()=>Rv,transform:()=>eF});var LS=e=>Symbol.asyncIterator in new Object(e);function*$S(e){yield e}async function*jS(e){yield e,await ht(1)}function Cv(e){if(e!==void 0)return Array.isArray(e)?nn.fromArray(e):typeof e=="number"||typeof e=="boolean"||typeof e=="string"?jS(e):typeof e=="function"?e():LS(e)?e:nn.fromIterable(e)}function ut(e){if(Array.isArray(e)){const r=e.values();return r._name="arrayInput",r}else{if(typeof e=="number"||typeof e=="boolean"||typeof e=="string")return $S(e);if(typeof e=="function")return e()}return e}function qS(e){const r=ke(e.before,0),n=ke(e.after,0);async function*i(a){a=ut(a);for await(const u of a)r>0&&await ht(r),yield u,n>0&&await ht(n)}return i._name="delay",i}function Rc(e){return"_allowNoInput"in e}function xS(){const e=[];let r;const n=a=>{a===void 0&&(a=r);let u=Cv(a);for(const o of e)if(u===void 0)if(Rc(o))u=o();else throw new Error(`Function '${Nc(o)}' requires input. Provide it to the function, or call 'input' earlier.`);else u=o(u);return u},i={asGenerator:n,fromFunction:a=>(e.push(Sv(a)),i),take:a=>(e.push(Fv(a)),i),chunk:(a,u=!0)=>(e.push(Nv(a,u)),i),filter:a=>(e.push(Bv(a)),i),min:()=>(e.push(_v()),i),max:()=>(e.push(Iv()),i),average:()=>(e.push(Pv()),i),total:()=>(e.push(Rv()),i),tally:()=>(e.push(Mv()),i),input(a){return r=a,i},asAsync(a){let u=a??r;for(const o of e)if(u===void 0&&Rc(o))u=o();else{if(u===void 0)throw new Error(`Function '${Nc(o)}' needs input. Pass in data calling 'asAsync', or call 'input' earlier`);u=o(u)}return i},asArray:async a=>{const u=n(a);return await nn.toArray(u)},firstOutput:async a=>(await n(a).next()).value,lastOutput:async a=>{const u=n(a);let o;for await(const s of u)o=s;return o}};return i}function US(e){const r=ke(e,0);async function*n(i){i=ut(i);let a=Ar.since();for await(const u of i)a()<r||(yield u,a=Ar.since())}return n._name="debounce",n}function VS(e){const r=ke(e,0);async function*n(i){i=ut(i);const a=Ar.since();for await(const u of i){if(a()>r)break;yield u}}return n._name="duration",n}function HS(e){const r=ke(e.interval,0),n=e.asClockTime??!1,i=e.loops??Number.MAX_SAFE_INTEGER;let a=0;const u=ke(e.elapsed,Number.MAX_SAFE_INTEGER);async function*o(){const s=Ar.since();for(;a<i&&s()<u;){yield n?Date.now():s();const c=a*r-s();await ht(Math.max(0,r+c)),a++}}return o._name="timestamp",o}function Sv(e){async function*r(){for(;;){const n=await e();if(n===void 0)break;yield n}}return r._name="fromFunction",r}function GS(e){let r;const n=typeof e=="function"?e():e;async function i(){const a=await n.next();if(!a.done)return r=a.value,r}return i}function KS(e,r){let n=r,i=!1;const a=typeof e=="function"?e():e;function u(){return i||(i=!0,a.next().then(o=>{n=o.value,i=!1}).catch(o=>{throw i=!1,o})),n}return u}async function JS(e,r,n){const i=typeof e=="function"?e():e;for await(const a of i)r(a);n&&n()}async function YS(e){const r=typeof e=="function"?e():e;return nn.toArray(r)}async function XS(e,r){const n=typeof r=="function"?r():r;for await(const i of n)e.push(i)}async function ZS(e,r){return(await e([r]).next()).value}function QS(e){async function*r(n){n=ut(n);for await(const i of n)yield e(i)}return r._name="flatten",r}function eF(e){async function*r(n){n=ut(n);for await(const i of n)yield e(i)}return r._name="transform",r}async function*tF(...e){const r=e.map(s=>Cv(s)),n=Do.mutable();let i=0;const a=async s=>{if(s===void 0){i++;return}const c=await s.next();c.done?i++:(n.enqueue(c.value),setTimeout(()=>a(s),1))};for(const s of r)setTimeout(()=>a(s),1);const u=10;let o=1;for(;i<r.length;){const s=n.dequeue();s===void 0?o=Math.min(o+1,10):(yield s,o=1),await ht(u*o)}}async function*rF(...e){const r=e.map(i=>ut(i));let n=!0;for(;n;){let i=[];for(let a=0;a<r.length;a++)i[a]=null;n=!1;for(const[a,u]of r.entries()){const o=await u.next();o.done||(i[a]=o.value,n=!0)}n&&(yield i,i=[])}}async function*nF(...e){const r=e.map(i=>ut(i));let n=!1;for(;!n;){let i=[];for(let a=0;a<r.length;a++)i[a]=null;n=!1;for(const[a,u]of r.entries()){const o=await u.next();if(o.done){n=!0;break}else i[a]=o.value}if(n)break;yield i,i=[]}}function Fv(e){async function*r(n){n=ut(n);let i=0;for await(const a of n){if(++i>e)break;yield a}}return r._name="take",r}var Nc=e=>"_name"in e?e._name:e.name;function Mv(){async function*e(r){r=ut(r);let n=0;for await(const i of r)yield++n}return e._name="tally",e}function _v(){async function*e(r){r=ut(r);let n=Number.MAX_SAFE_INTEGER;for await(const i of r){if(typeof i!="number")break;n=Math.min(i,n),yield n}}return e._name="min",e}function Iv(){async function*e(r){r=ut(r);let n=Number.MIN_SAFE_INTEGER;for await(const i of r){if(typeof i!="number")break;n=Math.max(i,n),yield n}}return e._name="max",e}function Pv(){async function*e(r){r=ut(r);let n=0,i=0;for await(const a of r){if(typeof a!="number")break;i++,n+=a,yield n/i}}return e._name="average",e}function Rv(){async function*e(r){r=ut(r);let n=0;for await(const i of r){if(typeof i!="number")break;n+=i,yield n}}return e._name="average",e}function Nv(e,r=!0){Le(e,"aboveZero","size");async function*n(i){i=ut(i);let a=[];for await(const u of i)a.push(u),a.length>=e&&(yield a,a=[]);r&&a.length>0&&(yield a)}return n._name="chunk",n}function Bv(e){async function*r(n){n=ut(n);for await(const i of n)e(i)&&(yield i)}return r._name="filter",r}function iF(e){async function*r(n){n=ut(n);for await(const i of n)e(i)||(yield i)}return r._name="drop",r}async function*aF(...e){let r;for(const n of e)typeof n=="function"?r=n(r??[]):r=ut(n);if(r!==void 0)for await(const n of r)yield n}var kv={};G(kv,{Directed:()=>zv,Undirected:()=>Vv});var zv={};G(zv,{adjacentVertices:()=>Ws,areAdjacent:()=>yF,bfs:()=>mF,clone:()=>pF,connect:()=>$v,connectTo:()=>ao,createVertex:()=>Ov,dfs:()=>jv,disconnect:()=>Lv,distance:()=>Tv,distanceDefault:()=>hF,dumpGraph:()=>oF,edges:()=>Wv,getCycles:()=>xv,getOrCreate:()=>io,getOrFail:()=>dF,graph:()=>wF,graphFromVertices:()=>qv,hasNoOuts:()=>lF,hasOnlyOuts:()=>fF,hasOut:()=>on,isAcyclic:()=>bF,pathDijkstra:()=>gF,toAdjacencyMatrix:()=>uF,topologicalSort:()=>EF,transitiveReduction:()=>Uv,updateGraphVertex:()=>Xa,vertexHasOut:()=>cF,vertices:()=>Ts});var Os=class{rows=[];rowLabels=[];colLabels=[];labelColumns(...e){this.colLabels=e}labelColumn(e,r){this.colLabels[e]=r}getColumnLabelIndex(e){for(const[r,n]of this.colLabels.entries())if(n===e)return r}print(){console.table([...this.rowsWithLabelsObject()])}*rowsWithLabelsArray(){for(let e=0;e<this.rows.length;e++)yield this.getRowWithLabelsArray(e)}asArray(){const e=[];for(const r of this.rows)r===void 0?e.push([]):e.push([...r]);return e}get rowCount(){return this.rows.length}get columnCount(){const e=this.rows.map(r=>r.length);return Math.max(...e)}*rowsWithLabelsObject(){for(let e=0;e<this.rows.length;e++)yield this.getRowWithLabelsObject(e)}labelRows(...e){this.rowLabels=e}appendRow(...e){this.rows.push(e)}getRowWithLabelsArray(e){const r=this.rows.at(e);if(r!==void 0)return r.map((n,i)=>[this.colLabels.at(i),n])}getRowWithLabelsObject(e){const r=this.rows.at(e);if(r===void 0)return;const n={};for(let i=0;i<this.colLabels.length;i++){const a=this.colLabels.at(i)??i.toString();n[a]=r[i]}return n}getOrCreateRow(e){let r=this.rows.at(e);return r===void 0&&(r=[],this.rows[e]=r),r}row(e){return this.rows.at(e)}set(e,r,n){const i=this.getOrCreateRow(e);i[r]=n}get(e,r){const n=this.getOrCreateRow(e),i=typeof r=="number"?r:this.getColumnLabelIndex(r);if(i===void 0)throw new Error(`Column not found: ${r}`);return n[i]}setRow(e,r,n){const i=this.getOrCreateRow(e);for(let a=0;a<r;a++)i[a]=n}},Ov=e=>({id:e,out:[]});function uF(e){const r=[...e.vertices.values()],n=new Os;n.labelColumns(...r.map(i=>i.id)),n.labelRows(...r.map(i=>i.id));for(let i=0;i<r.length;i++){n.setRow(i,r.length,!1);const a=r[i];for(const[u,o]of r.entries())a.out.some(s=>s.id===o.id)&&n.set(i,u,!0)}return n}var oF=e=>sF(e).join(`
`),sF=e=>{const r=[],n="vertices"in e?e.vertices.values():e;for(const i of n){const a=vF(i);r.push(...a.map(u=>` ${u}`))}return r},Tv=(e,r)=>r.weight!==void 0?r.weight:1;function*Wv(e){const r=[...e.vertices.values()];for(const n of r)for(const i of n.out)yield i}function*Ts(e){const r=[...e.vertices.values()];for(const n of r)yield n}function*Ws(e,r){if(r===void 0)return;const n=typeof r=="string"?e.vertices.get(r):r;if(n===void 0)throw new Error(`Vertex not found ${JSON.stringify(r)}`);for(const i of n.out){const a=e.vertices.get(i.id);if(a===void 0)throw new Error(`Could not find vertex: ${i.id}`);yield a}}var cF=(e,r)=>{if(e===void 0)return!1;const n=typeof r=="string"?r:r.id;return e.out.some(i=>i.id===n)},lF=(e,r)=>{const n=typeof r=="string"?e.vertices.get(r):r;return n===void 0?!1:n.out.length===0},fF=(e,r,...n)=>{const i=Sr(e,r),a=n.map(u=>Sr(e,u));if(a.length!==i.out.length)return!1;for(const u of a)if(!on(e,i,u))return!1;return!0},on=(e,r,n)=>{const i=Sr(e,r),a=typeof n=="string"?n:n.id;return i.out.some(u=>u.id===a)},io=(e,r)=>{const n=e.vertices.get(r);if(n!==void 0)return{graph:e,vertex:n};const i=Ov(r);return{graph:Xa(e,i),vertex:i}},dF=(e,r)=>{const n=e.vertices.get(r);if(n===void 0)throw new Error(`Vertex '${r}' not found in graph`);return n},Xa=(e,r)=>({...e,vertices:e.vertices.set(r.id,r)}),hF=(e,r)=>r.weight!==void 0?r.weight:1;function Lv(e,r,n){const i=Sr(e,r),a=Sr(e,n);return on(e,i,a)?Xa(e,{...i,out:i.out.filter(u=>u.id!==a.id)}):e}function ao(e,r,n,i){const a=io(e,r);e=a.graph;const u=io(e,n);e=u.graph;const o={id:n,weight:i};return on(e,a.vertex,u.vertex)||(e=Xa(e,{...a.vertex,out:[...a.vertex.out,o]})),{graph:e,edge:o}}function $v(e,r){const{to:n,weight:i,from:a}=r,u=r.bidi??!1,o=Array.isArray(n)?n:[n];for(const s of o)e=ao(e,a,s,i).graph;if(!u)return e;for(const s of o)e=ao(e,s,a,i).graph;return e}var vF=e=>{const r=[`${e.id}`],n=i=>i.weight===void 0?i.id:`${i.id} (${i.weight})`;for(const i of e.out)r.push(` -> ${n(i)}`);return r};function yF(e,r,n){if(on(e,r,n.id)||on(e,n,r.id))return!0}function Sr(e,r){const n=typeof r=="string"?e.vertices.get(r):r;if(n===void 0)throw new Error(`Id not found ${r}`);return n}function*mF(e,r,n){const i=Sr(e,r),a=n===void 0?void 0:Sr(e,n),u=new Xt,o=new Set;for(u.enqueue(i);!u.isEmpty;){const s=u.dequeue();if(yield s,a!==void 0&&a===s)return;for(const c of Ws(e,s))o.has(c.id)||(o.add(c.id),u.enqueue(Sr(e,c.id)))}}function*jv(e,r){const n=Sr(e,r),i=new vi,a=new Set;for(i.push(n);!i.isEmpty;){const u=i.pop();if(u!==void 0&&!a.has(u.id)){a.add(u.id),yield u;for(const o of u.out){const s=e.vertices.get(o.id);s&&i.push(s)}}}}var gF=(e,r)=>{const n=typeof r=="string"?e.vertices.get(r):r;if(n===void 0)throw new Error("source vertex not found");const i=new Map,a=new Map;i.set(n.id,0);const u=new Il,o=[...e.vertices.values()];for(const c of o)c.id!==n.id&&(i.set(c.id,Number.MAX_SAFE_INTEGER),a.set(c.id,null)),u.enqueueWithPriority(c.id,Number.MAX_SAFE_INTEGER);for(;!u.isEmpty;){const c=u.dequeueMin();if(c===void 0)throw new Error("Bug. Queue unexpectedly empty");const l=e.vertices.get(c);for(const f of l.out){const d=i.get(c)+Tv(e,f);d<i.get(f.id)&&(i.set(f.id,d),a.set(f.id,l),u.changePriority(f.id,d,!0))}}return{distances:i,previous:a,pathTo:c=>{const l=[];for(;c!==n.id;){const f=a.get(c);if(f==null)throw new Error(`Id not present: ${c}`);l.push({id:c,weight:i.get(c)}),c=f.id}return l}}},pF=e=>({vertices:Kt([...e.vertices.entries()])}),wF=(...e)=>{let r={vertices:Kt()};for(const n of e)r=$v(r,n);return r};function bF(e){return xv(e).length===0}function EF(e){const r=new Rl(0);for(const u of Wv(e))r.add(u.id,1);const n=new Xt;let i=0;for(const u of Ts(e))r.get(u.id)===0&&n.enqueue(u),i++;const a=[];for(;!n.isEmpty;){const u=n.dequeue();a.push(u);for(const o of u.out)r.subtract(o.id,1)===0&&n.enqueue(e.vertices.get(o.id))}if(a.length!==i)throw new Error("Graph contains cycles");return qv(a)}function qv(e){const r=wo.map(e,i=>[i.id,i]);return{vertices:Kt([...r])}}function xv(e){let r=0;const n=new vi,i=new Map,a=[];for(const o of e.vertices.values())i.set(o.id,{...o,lowlink:Number.NaN,index:Number.NaN,onStack:!1});const u=o=>{o.index=r,o.lowlink=r,r++,n.push(o),o.onStack=!0;for(const s of o.out){const c=i.get(s.id);Number.isNaN(c.index)?(u(c),o.lowlink=Math.min(o.lowlink,c.lowlink)):c.onStack&&(o.lowlink=Math.min(o.lowlink,c.lowlink))}if(o.lowlink===o.index){const s=[];let c;for(;o!==c;)c=n.pop(),c.onStack=!1,s.push({id:c.id,out:c.out});s.length>1&&a.push(s)}};for(const o of i.values())Number.isNaN(o.index)&&u(o);return a}function Uv(e){for(const r of Ts(e))for(const n of Ws(e,r))for(const i of jv(e,n))if(n.id!==i.id&&on(e,r,i)){const a=Lv(e,r,i);return Uv(a)}return e}var Vv={};G(Vv,{adjacentVertices:()=>MF,connect:()=>Yv,connectTo:()=>Jv,createVertex:()=>Hv,dumpGraph:()=>CF,edgesForVertex:()=>_F,getConnection:()=>Ls,getOrCreate:()=>uo,graph:()=>DF,hasConnection:()=>Kv,toAdjacencyMatrix:()=>AF,updateGraphVertex:()=>Gv});var Hv=e=>({id:e}),Gv=(e,r)=>({...e,vertices:e.vertices.set(r.id,r)}),uo=(e,r)=>{const n=e.vertices.get(r);if(n!==void 0)return{graph:e,vertex:n};const i=Hv(r);return{graph:Gv(e,i),vertex:i}};function ca(e,r){const n=typeof r=="string"?e.vertices.get(r):r;if(n===void 0)throw new Error(`Id not found ${r}`);return n}var Kv=(e,r,n)=>Ls(e,r,n)!==void 0,Ls=(e,r,n)=>{const i=ca(e,r),a=ca(e,n);for(const u of e.edges)if(u.a==i.id&&u.b===a.id||u.a==a.id&&u.b===i.id)return u};function Jv(e,r,n,i){e=uo(e,r).graph,e=uo(e,n).graph;let o=Ls(e,r,n);return o!==void 0?{graph:e,edge:o}:(o={a:r,b:n,weight:i},{graph:{...e,edges:[...e.edges,o]},edge:o})}function Yv(e,r){const{a:n,weight:i,b:a}=r,u=Array.isArray(a)?a:[a];for(const o of u)e=Jv(e,n,o,i).graph;return e}var DF=(...e)=>{let r={vertices:Kt(),edges:[]};for(const n of e)r=Yv(r,n);return r};function AF(e){const r=[...e.vertices.values()],n=new Os;n.labelColumns(...r.map(i=>i.id)),n.labelRows(...r.map(i=>i.id));for(let i=0;i<r.length;i++){n.setRow(i,r.length,!1);const a=r[i];for(const[u,o]of r.entries())Kv(e,a,o)&&n.set(i,u,!0)}return n}var CF=e=>SF(e).join(`
`),SF=e=>{const r=[];r.push(`Vertices: ${[...e.vertices.values()].map(n=>n.id).join(", ")}`),r.push("Edges:");for(const n of e.edges)r.push(FF(n));return r},FF=e=>{const r=e.weight?` (${e.weight})`:"";return`${e.a} <-> ${e.b}${r}`};function*MF(e,r){if(r===void 0)return;if((typeof r=="string"?e.vertices.get(r):r)===void 0)throw new Error(`Vertex not found ${JSON.stringify(r)}`);for(const i of e.edges)i.a===r?yield ca(e,i.b):i.b===r&&(yield ca(e,i.a))}function*_F(e,r){if(r===void 0)return;if((typeof r=="string"?e.vertices.get(r):r)===void 0)throw new Error(`Vertex not found ${JSON.stringify(r)}`);for(const i of e.edges)i.a===r?yield i:i.b===r&&(yield i)}var Xv=(e,r=0,n=360)=>(Le(e,void 0,"v"),Le(r,void 0,"min"),Le(n,void 0,"max"),e===r||e===n?r:(e>0&&e<r&&(e+=r),e-=r,n-=r,e=e%n,e<0&&(e=n-Math.abs(e)+r),e+r)),la=(e,r=0,n=1)=>{if(ee(e,"","min"),ee(r,"","min"),ee(n,"","max"),e===r||e===n)return r;for(;(e<=r||e>=n)&&!(e===n||e===r);)e>n?e=r+(e-n):e<r&&(e=n-(r-e));return e},IF=(e,r,n,i,a)=>{let u=0;const o=Math.abs(a-i),s=Math.abs(r-i+a),c=Math.abs(i+(360-a)),l=Math.min(o,s,c);return l===c?u=i-n(l):l===s?u=i+n(l):i>a?u=i-n(l):u=i+n(l),Xv(u,e,r)},Zv={};G(Zv,{align:()=>Qv,alignById:()=>RF});var PF=(e,r)=>e.score>r.score?-1:e.score<r.score?1:0,Qv=(e,r,n,i={})=>{const a=i.matchThreshold??0,u=i.debug??!1,o=new Map,s=[],c=new Map;r?.forEach((l,f)=>{if(l===void 0)throw new Error(`'lastData' contains undefined (index: ${f})`);c.set(l.id,l)});for(let l=0;l<n.length;l++){const f=n[l];if(!r||r.length===0){u&&console.debug(`Correlate.align() new id: ${f.id}`),s.push(f);continue}const d=Array.from(c.values()).map(g=>({id:g.id,score:g===null?-1:e(g,f),last:g}));if(d.length===0){u&&console.debug(`Correlate.align() no valid last values id: ${f.id}`),s.push(f);continue}d.sort(PF);const v=d[0];if(v.score<a){u&&console.debug(`Correlate.align() new item does not reach threshold. Top score: ${v.score} id: ${f.id}`),s.push(f);continue}u&&v.id!==f.id&&console.log(`Correlate.align() Remapped ${f.id} -> ${v.id} (score: ${v.score})`),o.set(v.id,{...f,id:v.id}),c.delete(v.id)}return s.forEach(l=>o.set(l.id,l)),Array.from(o.values())},RF=(e,r={})=>{let n=[];return a=>(n=Qv(e,n,a,r),[...n])},ey={};G(ey,{Pool:()=>ny,PoolUser:()=>ty,Resource:()=>ry,create:()=>NF});var ty=class extends sr{constructor(e,r){super();this.key=e,this.resource=r,this._lastUpdate=performance.now(),this._pool=r.pool,this._userExpireAfterMs=this._pool.userExpireAfterMs,this._state="idle",this._pool.log.log(`PoolUser ctor key: ${this.key}`)}_lastUpdate;_pool;_state;_userExpireAfterMs;toString(){return this.isDisposed?"PoolUser. State: disposed":`PoolUser. State: ${this._state} Elapsed: ${performance.now()-this._lastUpdate} Data: ${JSON.stringify(this.resource.data)}`}keepAlive(){if(this._state==="disposed")throw new Error("PoolItem disposed");this._lastUpdate=performance.now()}_dispose(e){if(this._state==="disposed")return;const r=this.resource,n=r.data;this._state="disposed",r._release(this),this._pool.log.log(`PoolUser dispose key: ${this.key} reason: ${e}`),this.fireEvent("disposed",{data:n,reason:e}),super.clearEventListeners()}release(e){if(this.isDisposed)throw new Error("User disposed");const n=this.resource.data;this._pool.log.log(`PoolUser release key: ${this.key} reason: ${e}`),this.fireEvent("released",{data:n,reason:e}),this._dispose(`release-${e}`)}get data(){if(this.isDisposed)throw new Error("User disposed");return this.resource.data}get isExpired(){return this._userExpireAfterMs>0?performance.now()>this._lastUpdate+this._userExpireAfterMs:!1}get elapsed(){return performance.now()-this._lastUpdate}get isDisposed(){return this._state==="disposed"}get isValid(){return!(this.isDisposed||this.isExpired||this.resource.isDisposed)}},ry=class{constructor(e,r){this.pool=e,this._data=r,this.lastUsersChange=0,this.resourcesWithoutUserExpireAfterMs=e.resourcesWithoutUserExpireAfterMs,this.capacityPerResource=e.capacityPerResource,this.users=[],this.state="idle"}state;_data;users;capacityPerResource;resourcesWithoutUserExpireAfterMs;lastUsersChange;get data(){if(this.state==="disposed")throw new Error("Resource disposed");return this._data}toString(){return`Resource (expired: ${this.isExpiredFromUsers} users: ${this.users.length}, state: ${this.state}) data: ${JSON.stringify(this.data)}`}_assign(e){if(this.users.find(n=>n===e||n.key===e.key))throw new Error("User instance already assigned to resource");this.users.push(e),this.lastUsersChange=performance.now()}_release(e){this.users=this.users.filter(r=>r!==e),this.pool._release(e),this.lastUsersChange=performance.now()}get hasUserCapacity(){return this.usersCount<this.capacityPerResource}get usersCount(){return this.users.length}get isExpiredFromUsers(){return this.resourcesWithoutUserExpireAfterMs<=0||this.users.length>0?!1:performance.now()>this.resourcesWithoutUserExpireAfterMs+this.lastUsersChange}get isDisposed(){return this.state==="disposed"}dispose(e){if(this.state==="disposed")return;const r=this._data;this.state="disposed",this.pool.log.log(`Resource disposed (${e})`);for(const n of this.users)n._dispose(`resource-${e}`);this.users=[],this.lastUsersChange=performance.now(),this.pool._releaseResource(this,e),this.pool.freeResource&&this.pool.freeResource(r)}},ny=class{_resources;_users;capacity;userExpireAfterMs;resourcesWithoutUserExpireAfterMs;capacityPerResource;fullPolicy;generateResource;freeResource;log;constructor(e={}){this.capacity=e.capacity??-1,this.fullPolicy=e.fullPolicy??"error",this.capacityPerResource=e.capacityPerResource??1,this.userExpireAfterMs=e.userExpireAfterMs??-1,this.resourcesWithoutUserExpireAfterMs=e.resourcesWithoutUserExpireAfterMs??-1,this.generateResource=e.generate,this.freeResource=e.free,this._users=new Map,this._resources=[],this.log=_0("Pool",e.debug??!1);const r=Math.max(this.userExpireAfterMs,this.resourcesWithoutUserExpireAfterMs);r>0&&setInterval(()=>{this.maintain()},r*1.1)}dumpToString(){let e=`Pool
    capacity: ${this.capacity} userExpireAfterMs: ${this.userExpireAfterMs} capacityPerResource: ${this.capacityPerResource}
    resources count: ${this._resources.length}`;const r=this._resources.map(n=>n.toString()).join(`\r
	`);e+=`\r
Resources:\r
	`+r,e+=`\r
Users: \r
`;for(const[n,i]of this._users.entries())e+=`	k: ${n} v: ${i.toString()}\r
`;return e}getUsersByLongestElapsed(){return[...this._users.values()].sort((e,r)=>{const n=e.elapsed,i=r.elapsed;return n===i?0:n<i?1:-1})}getResourcesSortedByUse(){return[...this._resources].sort((e,r)=>e.usersCount===r.usersCount?0:e.usersCount<r.usersCount?-1:1)}addResource(e){if(e===void 0)throw new Error("Cannot add undefined resource");if(e===null)throw new Error("Cannot add null resource");if(this.capacity>0&&this._resources.length===this.capacity)throw new Error(`Capacity limit (${this.capacity}) reached. Cannot add more.`);this.log.log(`Adding resource: ${JSON.stringify(e)}`);const r=new ry(this,e);return this._resources.push(r),r}maintain(){let e=!1;const r=[];for(const i of this._resources)i.isDisposed?(this.log.log(`Maintain, disposed resource: ${JSON.stringify(i.data)}`),r.push(i)):i.isExpiredFromUsers&&(this.log.log(`Maintain, expired resource: ${JSON.stringify(i.data)}`),r.push(i));if(r.length>0){for(const i of r)i.dispose("diposed/expired");e=!0}const n=[];for(const[i,a]of this._users.entries())a.isValid||(this.log.log(`Maintain. Invalid user: ${a.key} (Disposed: ${a.isDisposed} Expired: ${a.isExpired} Resource disposed: ${a.resource.isDisposed})`),n.push(i),a._dispose("invalid"));for(const i of n)this._users.delete(i),e=!0;e&&this.log.log(`End: resource len: ${this._resources.length} users: ${this.usersLength}`)}*resources(){const e=[...this._resources];for(const r of e)yield r}*values(){const e=[...this._resources];for(const r of e)yield r.data}release(e,r){const n=this._users.get(e);!n||n.release(r??"Pool.release")}_release(e){this._users.delete(e.key)}_releaseResource(e,r){this._resources=this._resources.filter(n=>n!==e)}hasResource(e){return this._resources.find(n=>n.data===e)!==void 0}hasUser(e){return this._users.has(e)}_assign(e,r){const n=new ty(e,r);return this._users.set(e,n),r._assign(n),n}_findUser(e){const r=this.getResourcesSortedByUse();if(r.length>0&&r[0].hasUserCapacity)return this.log.log(`resource has capacity: ${r[0].data}`),this._assign(e,r[0]);if(this.generateResource&&(this.capacity<0||this._resources.length<this.capacity)){this.log.log(`capacity: ${this.capacity} resources: ${this._resources.length}`);const n=this.addResource(this.generateResource());return this._assign(e,n)}}get usersLength(){return[...this._users.values()].length}useValue(e){return this.use(e).resource.data}use(e){const r=this._users.get(e);if(r)return r.keepAlive(),r;this.maintain();const n=this._findUser(e);if(n)return n;if(this.fullPolicy==="error")throw console.log(this.dumpToString()),new Error(`Pool is fully used (fullPolicy: ${this.fullPolicy}, capacity: ${this.capacity})`);if(this.fullPolicy==="evictOldestUser"){const i=this.getUsersByLongestElapsed();if(i.length>0){this.release(i[0].key,"evictedOldestUser");const a=this._findUser(e);if(a)return a}}throw new Error(`Pool is fully used (${this.fullPolicy})`)}},NF=(e={})=>new ny(e),oo=Math.PI*2,Za=(e,r,n)=>(1-e)*r+e*n,iy=(e,r,n)=>{const i=la(n-r,0,oo);return Za(e,r,r+(i>Math.PI?i-oo:i))},Gn=Math.sqrt,We=Math.pow,Bc=Math.cos,Kr=Math.PI,Hn=Math.sin,BF=function(e,r){return ay(e,r,lr)},kF=function(e,r){return ay(e,r,Ps)},ay=function(e,r,n){const i=typeof e=="function"?e:Qa(e);if(i===void 0)throw typeof e=="string"?new Error(`Easing function not found: ${e}`):new Error("Easing function not found");const a=Ci(r,{timer:n(),clampValue:!0});return{get isDone(){return a.isDone},compute:()=>{const u=a.elapsed;return i(u)},reset:()=>{a.reset()}}},zF=(e,r)=>n=>{const i=1-n,a=i*i,u=n*n,o=u*n;return 3*e*a*n+3*r*i*u+o},uy=(e,r,n,i)=>Za(r,n(e),i(e)),OF=(e,r,n)=>uy(e,e,r,n),Qa=function(e){if(e===null)throw new Error("easingName is null");if(e===void 0)throw new Error("easingName is undefined");const r=e.toLocaleLowerCase(),n=Object.entries($s).find(([i,a])=>i.toLocaleLowerCase()===r);return n===void 0?n:n[1]};function*TF(){yield*Object.keys($s)}var oy=(e=.4)=>{const r=1/Gn(2*Kr),n=.5;return i=>{const a=r/e;let u=-2.5,o=(i-n)/e;o*=o,u*=o;const s=a*We(Math.E,u);return s>1?1:s<0?0:s}},Bi=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},WF=e=>e*e*e*e*e,LF=e=>1-We(1-e,5),$F=e=>e*(1-e)*4,jF=(e,r,n)=>(e*(n-1)+r)/n,$s={smoothstep:e=>e*e*(3-2*e),smootherstep:e=>(e*(e*6-15)+10)*e*e*e,arch:$F,bell:oy(),sineIn:e=>1-Bc(e*Kr/2),sineOut:e=>Hn(e*Kr/2),quadIn:e=>e*e,quadOut:e=>1-(1-e)*(1-e),sineInOut:e=>-(Bc(Kr*e)-1)/2,quadInOut:e=>e<.5?2*e*e:1-We(-2*e+2,2)/2,cubicIn:e=>e*e*e,cubicOut:e=>1-We(1-e,3),quartIn:e=>e*e*e*e,quartOut:e=>1-We(1-e,4),quintIn:WF,quintOut:LF,expoIn:e=>e===0?0:We(2,10*e-10),expoOut:e=>e===1?1:1-We(2,-10*e),quintInOut:e=>e<.5?16*e*e*e*e*e:1-We(-2*e+2,5)/2,expoInOut:e=>e===0?0:e===1?1:e<.5?We(2,20*e-10)/2:(2-We(2,-20*e+10))/2,circIn:e=>1-Gn(1-We(e,2)),circOut:e=>Gn(1-We(e-1,2)),backIn:e=>2.70158*e*e*e-1.70158*e*e,backOut:e=>1+2.70158*We(e-1,3)+1.70158*We(e-1,2),circInOut:e=>e<.5?(1-Gn(1-We(2*e,2)))/2:(Gn(1-We(-2*e+2,2))+1)/2,backInOut:e=>{const n=2.5949095;return e<.5?We(2*e,2)*((n+1)*2*e-n)/2:(We(2*e-2,2)*((n+1)*(e*2-2)+n)+2)/2},elasticIn:e=>{const r=2*Kr/3;return e===0?0:e===1?1:-We(2,10*e-10)*Hn((e*10-10.75)*r)},elasticOut:e=>{const r=2*Kr/3;return e===0?0:e===1?1:We(2,-10*e)*Hn((e*10-.75)*r)+1},bounceIn:e=>1-Bi(1-e),bounceOut:Bi,elasticInOut:e=>{const r=2*Kr/4.5;return e===0?0:e===1?1:e<.5?-(We(2,20*e-10)*Hn((20*e-11.125)*r))/2:We(2,-20*e+10)*Hn((20*e-11.125)*r)/2+1},bounceInOut:e=>e<.5?(1-Bi(1-2*e))/2:(1+Bi(2*e-1))/2},eu=(e,r={})=>{if(e===void 0)throw new Error("'data' is undefined");if(!Array.isArray(e))if("next"in e){(r.startIndex||r.endIndex)&&(e=ll(e,r.startIndex,r.endIndex));let o=0,s=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,l=0;for(const f of e){if(typeof f!="number")throw new Error(`Generator should yield numbers. Got: ${typeof f}`);o+=f,l++,s=Math.min(s,f),c=Math.max(c,f)}return{avg:o/l,total:o,max:c,min:s}}else throw new Error("'data' parameter is neither array or iterable");if(e.length===0)return{total:0,min:0,max:0,avg:0};const n=r.startIndex??0,i=r.endIndex??e.length,a=Iy(e,o=>typeof o=="number"&&!Number.isNaN(o),n,i),u=a.reduce((o,s)=>o+s,0);return{total:u,max:Math.max(...a),min:Math.min(...a),avg:u/a.length}},js=(e,r)=>{typeof r=="function"&&(r=sy(e,r));const n=_y(e,r),[i,a]=n.reduce((u,o)=>[u[0]+o[0]*o[1],u[1]+o[1]],[0,0]);return i/a},sy=(e,r)=>{const n=r===void 0?i=>i:r;return Nn(e).map((i,a)=>i*n(a/(Nn.length-1)))},Nn=e=>e.filter(r=>typeof r=="number"&&!Number.isNaN(r)),qF=e=>{let r=0;const n=e[0].length;for(let i=0;i<n;i++){let a=0;for(let u=0;u<e.length;u++)u===0?a=e[u][i]:a*=e[u][i];r+=a}return r},qs=e=>{if(e===void 0)throw new Error("data parameter is undefined");const r=Nn(e);return r.reduce((i,a)=>i+a,0)/r.length},cy=e=>Math.min(...Nn(e)),xF=e=>e.reduce((r,n,i,a)=>n>a[r]?i:r,0),ly=(...e)=>e.reduce((r,n,i,a)=>n<a[r]?i:r,0),fy=e=>Math.max(...Nn(e)),dy=e=>e.reduce((r,n)=>typeof n!="number"||Number.isNaN(n)||Number.isFinite(n)?r:r+n,0),hy=e=>{let r=Number.MIN_SAFE_INTEGER;for(let n=0;n<e.length;n++)r=Math.max(r,e[n]);return r},vy=e=>{let r=0;for(let n=0;n<e.length;n++)r+=e[n];return r},xs=e=>{let r=Number.MIN_SAFE_INTEGER;for(let n=0;n<e.length;n++)r=Math.min(r,e[n]);return r},UF=(...e)=>qs(e),VF=(e,...r)=>js(r,e),HF=(e,r)=>{const n={...e};for(const[i,a]of Object.entries(e))typeof a=="number"?n[i]=r(a):n[i]=a;return n},GF=(...e)=>cy(e),KF=(...e)=>fy(e),JF=(...e)=>dy(e),yy=e=>!(typeof e!="number"||Number.isNaN(e)),YF=e=>Xn(e);function*XF(e){for(const r of e)yy(r)&&(yield r)}var so=(e,r,n=!0)=>{Ee(Ce(e,"","v")),Ee(Or(r,"","every"));let i=e/r;const a=i%1;return i=Math.floor(i),(a===.5&&n||a>.5)&&i++,r*i};function*my(e,r,n,i){Ee(Ce(e,"","start")),Ee(Ce(r,"","end")),Ee(Ce(n,"","steps"));const a=i?sn(i):o=>o,u=(r-e)/(n-1);if(Ee(Ce(u,"","step")),!Number.isFinite(u))throw new TypeError("Calculated step value is infinite");for(let o=0;o<n;o++){const s=e+u*o;yield a(s)}}function sn(e,r){Ee(Or(e,"positive","decimalPlaces"));let n;if(e===0)n=Math.round;else{const i=Math.pow(10,e);n=a=>Math.floor(a*i)/i}return r===void 0?n:n(r)}function ZF(e,r,n){Ee(Ce(r,"percentage","rangePercent")),Ee(Ce(e,"","baseValue"));const i=e*r,a=u=>{try{Ee(Ce(u,"","v"));let o=Math.abs(u-e);return Math.abs(e)<=2&&(o=sn(5,o)),o<=i}catch{return!1}};return n===void 0?a:a(n)}var gy=()=>{const e=performance.now();return()=>performance.now()-e},QF=()=>{const e=Date.now();let r=0;return()=>(r===0&&(r=Date.now()-e),r)},e2=()=>()=>Number.POSITIVE_INFINITY;function t2(e,r={}){const n=ke(e);if(!n)throw new Error("duration invalid");const i={...r,timer:lr()},a=Ci(n,i);return()=>a.elapsed}var Us=(e,r=2)=>{let n=0;if(typeof e=="function"){const a=e();return Us(a)}else typeof e=="number"?n=e:typeof e=="object"&&(n=ke(n));let i=ke(n);return typeof i>"u"?"(undefined)":i<1e3?`${sn(r,i)}ms`:(i/=1e3,i<120?`${i.toFixed(1)}secs`:(i/=60,i<60?`${i.toFixed(2)}mins`:(i/=60,`${i.toFixed(2)}hrs`)))},py=(e,r)=>{if(e===void 0)throw new Error("callback parameter is undefined");const n=ke(r);Le(n,"aboveZero","interval");let i=0,a=0;const u=async(s=r,c)=>new Promise((f,d)=>{a=performance.now();const v=ke(s),g=Or(v,"aboveZero","altTimeoutMs");if(!g[0]){d(g[1]);return}i!==0&&o(),i=window.setTimeout(async()=>{await e(performance.now()-a,...c),i=0,f(void 0)},v)}),o=()=>{i!==0&&(a=0,window.clearTimeout(i))};return{start:u,cancel:o,get isDone(){return i!==0}}},r2=(e,r,n="slow")=>{let i=0,a,u=r;return()=>new Promise(async(o,s)=>{const c=performance.now()-i;if(a===void 0||c>u)try{i=performance.now(),a=await e(c),u=r}catch(l){n==="fast"?(a=void 0,i=0):n==="backoff"&&(u=Math.floor(u*1.2)),s(l);return}o(a)})},n2=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>window.setTimeout(e,1),Vs=(e,r,n={})=>{let i=ke(r,0);Le(i,"positive","interval");const a=n.fireBeforeWait??!1,u=n.onStartCalled;let o=!1,s=!1,c=0,l=performance.now(),f=r??0,d=0;const v=i===0?n2:C=>window.setTimeout(C,i),g=i===0?C=>{}:C=>window.clearTimeout(C),P=()=>{!s||(s=!1,c=0,d!==0&&g(d),d=0)},L=async()=>{if(!s)return;const C=e(c++,performance.now()-l);let N;if(typeof C=="object"?N=await C:N=C,N!==void 0&&!N){P();return}d=v(L)},B=()=>{if(o)throw new Error("Disposed");if(u!==void 0){const C=u(c,performance.now()-l);if(C==="cancel"){P();return}else if(C==="reset"){S();return}else if(C==="dispose"){o=!0,P();return}}s||(l=performance.now(),s=!0,a?L():d=v(L))},S=()=>{if(o)throw new Error("Disposed");s&&P(),B()};return{start:B,reset:S,cancel:P,get interval(){return f},set interval(C){const N=ke(C,0);Le(N,"positive","interval"),i=N,f=C},get isDone(){return!s},get isDisposed(){return o},get ticks(){return c},get elapsedMs(){return performance.now()-l}}},i2=(e,r)=>{const n=py(e,r);return(...i)=>n.start(void 0,i)},a2=(e,r)=>{let n=0;return async(...i)=>{const a=performance.now()-n;if(a>=r){const u=e(a,...i);typeof u=="object"&&await u,n=performance.now()}}},u2=(e,r)=>{Le(e,"positive","nth");let n=0;return(...i)=>++n===e?(n=0,r&&r(...i),!0):!1},o2=e=>{let r=!1,n=!1;return()=>(r||(r=!0,n=e()),n)},s2=class wy{static instance=new wy;_timer=0;_queue;_startDelayMs;_intervalMs;constructor(r={}){this._startDelayMs=r.startDelayMs??500,this._intervalMs=r.intervalMs??100,this._queue=new Xt}add(r){this._queue.enqueue(r),this._timer===0&&this.schedule(this._startDelayMs)}schedule(r){if(this._queue.length===0){this._timer=0;return}this._timer===0&&(this._timer=setTimeout(()=>{this.processQueue()},r))}async processQueue(){const r=this._queue.dequeue();if(this._timer=0,r!==void 0)try{await r(),this._timer=0,this.schedule(this._intervalMs)}catch(n){console.error(n)}}},by=(e,r)=>{for(const n of e){const i=r(n);if(typeof i=="boolean"&&!i)break}},Ey=async function(e,r,n){if(Array.isArray(e))for(const i of e){const a=await r(i);if(n&&await ht(n),typeof a=="boolean"&&!a)break}else for await(const i of e){const a=await r(i);if(n&&await ht(n),typeof a=="boolean"&&!a)break}};function*Hs(e,r){let n,i;if(n=i=0,typeof e=="number")for(ee(e,"positive","countOrPredicate");e-- >0;){n++;const a=r(n,i);a!==void 0&&(yield a,i++)}else if(typeof e=="function")for(;e(n,i);){n++;const a=r(n,i);a!==void 0&&(yield a,i++)}else throw new TypeError(`countOrPredicate should be a number or function. Got: ${typeof e}`)}var c2=(e,r,n,i)=>{if(typeof e=="number")for(ee(e,"positive","countOrPredicate");e-- >0;){const a=r();a!==void 0&&(n=i(n,a))}else{let a,u;for(a=u=0;e(a,u);){a++;const o=r();o!==void 0&&(n=i(n,o),u++)}}return n};try{typeof window<"u"&&(window.ixfx={...window.ixfx,Flow:{StateMachine:hs,Timer:ov,forEach:by,forEachAsync:Ey,repeat:Hs}})}catch{}(typeof window>"u"||!("requestAnimationFrame"in window))&&typeof window>"u"&&(globalThis.requestAnimationFrame=setImmediate);var ht=e=>{const r=ke(e),n=e.signal,i=e.value;return ee(r,"positive","timeoutMs"),r===0?new Promise(a=>requestAnimationFrame(u=>{a(i)})):new Promise((a,u)=>{n&&n.addEventListener("abort",()=>{u(n.reason)}),setTimeout(()=>{if(n?.aborted){u(n.reason);return}a(i)},r)})};async function*l2(e){for(const r of e)yield r,await ht(1)}async function*f2(e){for(const r of e)yield r,await ht(1)}async function*d2(e,r){let n=[];for await(const i of e)n.push(i),n.length===r&&(yield n,n=[]);n.length>0&&(yield n)}async function*h2(...e){for await(const r of e)yield*r}async function*v2(e,r){for await(const n of e)if(!r(n)){yield n;break}yield*e}async function y2(e,r,n){const i=e[Symbol.asyncIterator](),a=r[Symbol.asyncIterator]();for(;;){const u=await i.next(),o=await a.next();if(n!==void 0){if(!n(u.value,o.value))return!1}else if(u.value!==o.value)return!1;if(u.done??o.done)return u.done&&o.done}}async function m2(e,r){let n=!0;for await(const i of e)n=n&&r(i);return n}async function*g2(e,r){for await(const n of e)yield r}async function*p2(e,r){for await(const n of e)!r(n)||(yield n)}async function w2(e,r){for await(const n of e)if(r(n))return n}async function*b2(e){for await(const r of e)Symbol.asyncIterator in r?yield*r:yield r}async function E2(e,r){for await(const n of e)r(n)}async function*D2(e,r){for await(const n of e)yield r(n)}async function A2(e,r=(n,i)=>n>i){let n;for await(const i of e){if(!n){n=i;continue}n=r(n,i)?n:i}return n}async function C2(e,r=(n,i)=>n>i){let n;for await(const i of e){if(!n){n=i;continue}n=r(n,i)?i:n}return n}async function*S2(e,r){for(let n=0;n<r;n++)yield e++}async function F2(e,r,n){for await(const i of e)n=r(n,i);return n}async function*M2(e,r=0,n=Number.POSITIVE_INFINITY){const i=e[Symbol.asyncIterator]();for(;r>0;r--,n--)await i.next();for await(const a of e)if(n-- >0)yield a;else break}async function _2(e,r){for await(const n of e)if(r(n))return!0;return!1}async function*I2(e,r){for await(const n of e){if(!r(n))return;yield n}}async function P2(e,r=Number.POSITIVE_INFINITY){const n=[],i=e[Symbol.asyncIterator]();for(;n.length<r;){const a=await i.next();if(a.done)break;n.push(a.value)}return n}async function*R2(e,r=n=>n){const n=[];for await(const i of e){const a=r(i);n.includes(a)||(n.push(a),yield i)}}async function*N2(...e){const r=e.map(n=>n[Symbol.asyncIterator]());for(;;){const n=await Promise.all(r.map(i=>i.next()));if(n.some(i=>i.done))return;yield n.map(i=>i.value)}}var B2=e=>e instanceof Function,co=(e,r)=>{if(Number.isNaN(e))return r;if(typeof e!="number")throw new TypeError(`v is not a number. Got: ${typeof e}`);return e},k2=(e,r)=>{const i=Object.entries(e).map(([a,u],o)=>[a,r(u,a,o)]);return Object.fromEntries(i)},Dy=e=>Math.log2(e)%1===0,z2=e=>r=>r/e,Gs=(e,r="")=>{if(e===null)throw new Error("Parameter 'o' is null");if(typeof e!="object")throw new TypeError(`Parameter 'o' is not an object. Got: ${typeof e}`);if(r.length===0)return e;if(r in e)return e[r];{const n=xy(r,".");return n in e?Gs(e[n],r.slice(Math.max(0,n.length+1))):void 0}},Ay=e=>{if(e===null)return[];if(typeof e!="object")throw new TypeError(`Parameter 'o' should be an object. Got: ${typeof e}`);const r=(n,i,a)=>{if(typeof n!="object")return[...i,a];const u=a.length>0?a+".":a;return[...Object.keys(n).map(s=>r(n[s],[],u+s)),i].flat()};return r(e,[],"")},Cy=(e,r)=>(Ee(Ce(e,"nonZero","v")),Ee(Ce(r,"nonZero","multiple")),Math.ceil(e/r)*r),O2=Object.prototype.toString,Sy=e=>O2.call(e),T2=e=>Sy(e)==="[object Map]",W2=e=>Sy(e)==="[object Set]",fn=e=>typeof e=="string"?e:JSON.stringify(e),L2=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,Fy=(e,r)=>e===r?0:e>r?1:-1,My=(e,r)=>{if(e===void 0&&r===void 0)return 0;if(e===void 0)return 1;if(r===void 0)return-1;const n=kc(e),i=kc(r);return n<i?-1:n>i?1:0},Si=(e,r)=>typeof e=="number"&&typeof r=="number"?Fy(e,r):My(e,r),$2=e=>(r,n)=>e(r,n)*-1,Fi=e=>typeof e=="string"?e:JSON.stringify(e),kc=e=>{if(e===null)return"null";if(typeof e=="boolean"||typeof e=="number")return e.toString();if(typeof e=="string")return e;if(typeof e=="symbol")throw new TypeError("Symbol cannot be converted to string");return JSON.stringify(e)},Ln=(e,r="?")=>{if(e===void 0)throw new Error(`Param '${r}' is undefined. Expected array.`);if(e===null)throw new Error(`Param '${r}' is null. Expected array.`);if(!Array.isArray(e))throw new Error(`Param '${r}' not an array as expected`)},fa=(e,r,n="index")=>{if(Ln(e),Le(r,"positive",n),r>e.length-1)throw new Error(`'${n}' ${r} beyond array max of ${e.length-1}`)},Ks=(e,r)=>{if(!Array.isArray(e))throw new Error("Param 'array' is not an array.");if(e.length===0)return!0;const n=r===void 0?Mm:r,i=e[0];return!e.some(u=>!n(i,u))},j2=(e,r,n=ze)=>e.filter(i=>r.some(a=>n(i,a))),q2=e=>Array.prototype.concat.apply([],[...e]),_y=(...e)=>{if(e.some(a=>!Array.isArray(a)))throw new Error("All parameters must be an array");const r=e.map(a=>a.length);if(!Ks(r))throw new Error("Arrays must be of same length");const n=[],i=r[0];for(let a=0;a<i;a++)n.push(e.map(u=>u[a]));return n},x2=(...e)=>{if(e.some(a=>!Array.isArray(a)))throw new Error("All parameters must be an array");const r=e.map(a=>a.length);if(!Ks(r))throw new Error("Arrays must be of same length");const n=[],i=r[0];for(let a=0;a<i;a++)for(let u=0;u<e.length;u++)n.push(e[u][a]);return n},U2=(e,r,n="undefined")=>{if(e===void 0)throw new Error("Data undefined");if(!Array.isArray(e))throw new Error("data is not an array");if(e.length===r)return[...e];if(e.length>r)return e.slice(0,r);const i=[...e],a=r-i.length;for(let u=0;u<a;u++)n==="undefined"?i.push(void 0):n==="repeat"?i.push(e[u%e.length]):n==="first"?i.push(e[0]):n==="last"&&i.push(e[e.length-1]);return i},Iy=(e,r,n,i)=>{Ln(e),typeof n>"u"&&(n=0),typeof i>"u"&&(i=e.length),fa(e,n,"startIndex"),fa(e,i-1,"endIndex");const a=[];for(let u=n;u<i;u++)r(e[u],u,e)&&a.push(e[u]);return a},Js=(e,r=tt)=>Math.floor(r()*e.length),tu=(e,r=tt)=>(Ln(e,"array"),e[Math.floor(r()*e.length)]),V2=(e,r=!1,n=tt)=>{if(e===void 0)throw new Error("array is undefined");if(!Array.isArray(e))throw new Error("'array' param is not an array");if(e.length===0)return{value:void 0,array:[]};const i=Js(e,n);if(r)return{value:e[i],array:e.splice(i,1)};{const a=[...e];return a.splice(i,1),{value:e[i],array:a}}},da=(e,r=tt)=>{const n=[...e];for(let i=n.length-1;i>0;i--){const a=Math.floor(r()*(i+1));[n[i],n[a]]=[n[a],n[i]]}return n},Py=(e,r)=>[...e].sort((n,i)=>{Ln(e,"data");const a=n[r],u=i[r];return a<u?-1:a>u?1:0}),ru=(e,r,n=ze)=>e.filter(i=>!n(i,r)),H2=e=>e.filter(r=>r!==void 0),G2=(e,r,n)=>{const i=[];let a=n;for(let u=0;u<e.length;u++){const[o,s]=r(e[u],a);if(o)break;a=s,i.push(e[u])}return i},K2=(e,r)=>{if(!Array.isArray(e))throw new Error("'data' parameter should be an array");return fa(e,r,"index"),[...e.slice(0,r),...e.slice(r+1)]},J2=(e,r)=>{const n=new Map;for(const i of e){const a=r(i);let u=n.get(a);u||(u=[],n.set(a,u)),u.push(i)}return n},Y2=(e,r)=>{let n=1;if(r<=1){const a=e.length*r;n=Math.round(e.length/a)}else n=r;if(Le(n,"positive","amount"),n>e.length-1)throw new Error("Subsample steps exceeds array length");const i=[];for(let a=n-1;a<e.length;a+=n)i.push(e[a]);return i};function X2(e,r){const n=[];for(let i=0;i<e.length;i+=r)n.push(e.slice(i,i+r));return n}var Z2=(e,r,...n)=>{const i=new Map;for(const a of n)for(const u of a){if(u===void 0)continue;const o=e(u);let s=i.get(o);s?s=r(s,u):s=u,i.set(o,s)}return[...i.values()]},Q2=(e,r,n)=>{if(Ln(e,"arr"),e.length<2)return n;for(let i=0;i<e.length-1;i++)n=r(n,e[i],e[i+1]);return n},eM=(e,r)=>{const n=[],i=[];for(let a=0;a<e.length;a++)r(e[a])?n.push(e[a]):i.push(e[a]);return[n,i]},Ry=(e,r=ze)=>{const n=[];for(let i=0;i<e.length;i++){const a=e[i];if(Array.isArray(a))for(const u of lo(n,a,r))n.push(u);else return[...lo([],e,r)]}return n},tM=(e,r=fn)=>{if(!Array.isArray(e))throw new Error("Parameter needs to be an array");try{const n=Wl(e,r)}catch{return!0}return!1},Ny=(e,r,n=ze)=>{const i=[],a=[],u=[];for(let o=0;o<e.length;o++){let s=!1;for(let c=0;c<r.length;c++)if(n(e[o],r[c])){s=!0;break}s?i.push(e[o]):a.push(e[o])}for(let o=0;o<r.length;o++){let s=!1;for(let c=0;c<e.length;c++)n(r[o],e[c])&&(s=!0);s||u.push(r[o])}return{shared:i,a,b:u}},rM=(e,r,n=ze)=>{const i=Ny(e,r,n);return i.a.length===0&&i.b.length===0},nM=(e,r,n=ze)=>{if(!Array.isArray(e))throw new Error("Expects haystack parameter to be an array");if(!Array.isArray(r))throw new Error("Expects needles parameter to be an array");for(let i=0;i<r.length;i++){let a=!1;for(let u=0;u<e.length;u++)if(n(r[i],e[u])){a=!0;break}if(!a)return!1}return!0};function*lo(e,r,n=ze){const i=[];for(const a of r)e.find(o=>n(o,a))||i.find(s=>n(s,a))||(i.push(a),yield a)}var tt=Math.random,By=(e="quadIn")=>{const r=typeof e=="string"?{easing:e}:e,n=r.source??tt,i=r.easing??"quadIn",a=Qa(i);if(a===void 0)throw new Error(`Easing function '${i}' not found.`);return()=>{const o=n();return a(o)}},iM=(e="quadIn")=>By(e)(),ky=e=>{const r=typeof e=="number"?{max:e}:e,n=r.source??tt,i=r.max,a=r.min??0,u=r.easing??"quadIn";if(typeof i>"u")throw new Error("max field is undefined");if(typeof u!="string")throw new TypeError("easing field expected to be string");Ee(Ce(i));const o=Qa(u);if(o===void 0)throw new Error(`Easing '${u}' not found`);if(Ee(Ce(a)),i<=a)throw new Error("Max should be greater than min");return()=>{const c=Wt(o(n()));return Math.floor(c*(i-a))+a}},aM=e=>ky(e)(),uM=(e=1)=>zy(e)(),zy=(e=1)=>{const i=()=>{const a=zc(),u=zc();let o=Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*u);return o=o/10+.5,o>1||o<0?o=i():(o=Math.pow(o,e),o*=1,o+=0),o};return i},zc=(e=tt)=>{let r=0;for(;r===0;)r=e();return r},Ys=e=>{if(typeof e>"u")throw new TypeError("maxOrOpts is undefined");const r=typeof e=="number"?{max:e}:e;let n=Math.floor(r.max),i=Math.floor(r.min??0);!r.min&&n<0&&(n=1,i=r.max);const a=r.source??tt;if(i>n)throw new Error(`Min value is greater than max (min: ${i} max: ${n})`);if(Ee(Ce(i,"","min")),Ee(Ce(n,"","max")),n===i)throw new Error(`Max and min values cannot be the same (${n})`);const u=Math.abs(n-i);return()=>Math.floor(a()*u)+i},Oy=e=>Ys(e)(),Xs=(e=1)=>{const r=typeof e=="number"?{max:e}:e;let n=r.max,i=r.min??0;const a=r.source??tt;if(Ee(Ce(i,"","min")),Ee(Ce(n,"","max")),!r.min&&n<0&&(i=n,n=0),i>n)throw new Error(`Min is greater than max. Min: ${i} max: ${n}`);return()=>a()*(n-i)+i},Ty=(e=1)=>Xs(e)(),Zs=(e=5)=>((typeof e=="number"?{length:e}:e).source??tt)().toString(36).slice(2,length+2),oM=(e={})=>{const r=e.source??tt,n=Math.trunc(r()*46656),i=Math.trunc(r()*46656),a=`000${n.toString(36)}`.slice(-3),u=`000${i.toString(36)}`.slice(-3);return a+u},Wy=e=>{const r=typeof e=="number"?{max:e}:e,n=(r.min??0)*60*1e3,i=r.max*60*1e3;return Ys({...r,max:i,min:n})},sM=e=>Wy(e)(),Ly=e=>{const r=typeof e=="number"?{max:e}:e,n=(r.min??0)*1e3,i=r.max*1e3;return()=>Oy({...r,max:i,min:n})},cM=e=>Ly(e)();function*$y(e){const r=typeof e=="number"?{max:e}:e,n=r.min??0,i=r.max,a=r.source??tt,u=r.loop??!1;if(Ee(Or(n,"","min")),Ee(Or(i,"","max")),n>i)throw new Error(`Min value is greater than max. Min: ${n} Max: ${i}`);const o=[...cl(n,i-n)];let s=da(o),c=0;for(;;){if(c===s.length)if(u)s=da(o,a);else return;yield s[c++]}}var lM=(e,r,n,i=!0)=>{const a=e.indexOf(r);if(a<0)return;n===void 0&&(n=r);const u=i?e.lastIndexOf(n):e.indexOf(n,a+1);if(!(u<0))return e.slice(a+1,u)},jy=(e,r,n,i=!0)=>{const a=e.indexOf(r);if(a<0)return[e,void 0];n===void 0&&(n=r);const u=i?e.lastIndexOf(n):e.indexOf(n,a+1);if(u<0)return[e,void 0];const o=e.slice(a+1,u);return[e.slice(0,a)+e.slice(u+1),o]},si=(e,r,n=0,i=e.length-1)=>{for(let a=n;a<=i;a++)if(e.codePointAt(a)===r)return a;return-1},ci=(e,r,n)=>e.slice(0,r)+e.slice(r+n),qy=(e,r)=>{if(Ee(Or(r,"aboveZero","length")),e===null)throw new Error("source parameter null");if(typeof e!="string")throw new TypeError("source parameter not a string");const n=Math.ceil(e.length/r),i=[];let a=0;for(let u=0;u<n;u++)i.push(e.slice(a,a+r)),a+=r;return i},xy=(e,r,n={})=>{const i=n.startPos??void 0,u=n.fromEnd??!1?e.lastIndexOf(r,i):e.indexOf(r,i);return u<0?e:e.slice(i??0,u)},Uy=(e,r,n={})=>{if(e===void 0)throw new Error("source is undefined");const i=n.startPos??void 0,u=n.fromEnd??!1?e.lastIndexOf(r,i):e.indexOf(r,i);return u<0?e:e.slice(Math.max(0,u+r.length))},fM=(e,...r)=>{let n=!1;do{n=!1;for(const i of r)e.startsWith(i)&&e.endsWith(i)&&(e=e.slice(i.length,e.length-i.length*2+1),n=!0)}while(n);return e},dM=(e,r,n)=>{let i=-1,a=-1;for(const[u,o]of e.entries())if(i=u,o.text.length!==0&&r<o.end)break;for(let u=i;u<e.length;u++){const o=e[u];if(a=u,n===o.end){a=u+1;break}if(n<o.end)break}return{length:a-i,start:i,end:a}},hM=(e,r)=>{let n=0,i="";const a=[];let u=0;for(let o=0;o<e.length;o++)if(e.indexOf(r,o)===o){const s=o;a.push({text:i,start:n,end:s,index:u}),n=s+1,i="",u++}else i+=e.charAt(o);return n<e.length&&a.push({text:i,start:n,index:u,end:e.length}),a},vM=(e,...r)=>{let n=0;for(let i=0;i<e.length&&r.includes(e.charAt(i));i++)n++;return n},yM=(e,r,n=r)=>e.startsWith(r)&&e.endsWith(n),mM=e=>e.replaceAll(/[&<>\u00A0-\u9999]/g,r=>`&#${r.codePointAt(0)};`);/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/export{Ga as $,$t as A,yi as B,wi as C,Ei as D,vo as E,nv as F,WC as G,Rt as H,Cl as I,zr as J,DD as K,Ze as L,AD as M,Uc as N,zs as O,y0 as P,Do as Q,Al as R,oa as S,gM as T,Yc as U,Yi as V,BS as W,Sm as X,eS as Y,QC as Z,pM as _,Rs as a,rs as b,FD as c,lv as d,i2 as e,Pr as f,Vs as g,_m as h,iM as i,wv as j,uM as k,Z0 as l,Hs as m,zo as n,ko as o,HD as p,W as q,$e as r,Ua as s,SD as t,xy as u,uv as v,aM as w,Ye as x,po as y,Zo as z};
