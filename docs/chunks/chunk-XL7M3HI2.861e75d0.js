var _v=Object.create,ei=Object.defineProperty,uc=Object.getOwnPropertyDescriptor,oc=Object.getOwnPropertyNames,Pv=Object.getPrototypeOf,Rv=Object.prototype.hasOwnProperty,Bv=(e,r,n)=>r in e?ei(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,Ve=(e,r)=>function(){return r||(0,e[oc(e)[0]])((r={exports:{}}).exports,r),r.exports},Z=(e,r)=>{for(var n in r)ei(e,n,{get:r[n],enumerable:!0})},Nv=(e,r,n,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of oc(r))!Rv.call(e,a)&&a!==n&&ei(e,a,{get:()=>r[a],enumerable:!(i=uc(r,a))||i.enumerable});return e},en=(e,r,n)=>(n=e!=null?_v(Pv(e)):{},Nv(r||!e||!e.__esModule?ei(n,"default",{value:e,enumerable:!0}):n,e)),JC=(e,r,n,i)=>{for(var a=i>1?void 0:i?uc(r,n):r,u=e.length-1,o;u>=0;u--)(o=e[u])&&(a=(i?o(r,n,a):o(a))||a);return i&&a&&ei(r,n,a),a},YC=(e,r,n)=>(Bv(e,typeof r!="symbol"?r+"":r,n),n),sc={};Z(sc,{immutable:()=>Wv,mutable:()=>kv});var zv=(e,r,n)=>{const i=r.length+n.length,a=e.capacity??i,u=i-a,o=e.discardPolicy??"additions";switch(o){case"additions":return r.length===0?n.slice(0,n.length-u):r.length===e.capacity?r:[...r,...n.slice(0,u-1)];case"newer":if(u>=r.length)return r.length===0?[...n.slice(0,a-1),n[n.length-1]]:n.slice(Math.max(0,n.length-a),Math.min(n.length,a)+1);{const s=Math.max(1,n.length-r.length),c=n.slice(n.length-s,n.length);return[...r.slice(0,Math.min(r.length,a-1)),...c]}case"older":return[...r,...n].slice(u);default:throw new Error(`Unknown overflow policy ${o}`)}},cc=(e,r,...n)=>{if(e===void 0)throw new Error("opts parameter undefined");const i=r.length+n.length,a=e.capacity&&i>e.capacity,u=a?zv(e,r,n):[...r,...n];if(e.capacity&&u.length!==e.capacity&&a)throw new Error(`Bug! Expected return to be at capacity. Return len: ${u.length} capacity: ${e.capacity} opts: ${JSON.stringify(e)}`);if(!e.capacity&&u.length!==i)throw new Error(`Bug! Return length not expected. Return len: ${u.length} expected: ${i} opts: ${JSON.stringify(e)}`);return u},lc=(e,r)=>{if(r.length===0)throw new Error("Queue is empty");return r.slice(1)},uu=(e,r)=>r[0],fc=(e,r)=>r.length===0,hc=(e,r)=>e.capacity?r.length>=e.capacity:!1,dc=class ou{opts;data;constructor(r={},n=[]){if(r===void 0)throw new Error("opts parameter undefined");this.opts=r,this.data=n}forEach(r){for(let n=this.data.length-1;n>=0;n--)r(this.data[n])}forEachFromFront(r){this.data.forEach(r)}enqueue(...r){return new ou(this.opts,cc(this.opts,this.data,...r))}dequeue(){return new ou(this.opts,lc(this.opts,this.data))}get isEmpty(){return fc(this.opts,this.data)}get isFull(){return hc(this.opts,this.data)}get length(){return this.data.length}get peek(){return uu(this.opts,this.data)}},Wv=(e={},...r)=>(e={...e},new dc(e,[...r])),Ir=class{opts;data;constructor(e={},r=[]){if(e===void 0)throw new Error("opts parameter undefined");this.opts=e,this.data=r}enqueue(...e){return this.data=cc(this.opts,this.data,...e),this.data.length}dequeue(){const e=uu(this.opts,this.data);return this.data=lc(this.opts,this.data),e}get isEmpty(){return fc(this.opts,this.data)}get isFull(){return hc(this.opts,this.data)}get length(){return this.data.length}get peek(){return uu(this.opts,this.data)}};function kv(e={},...r){return new Ir({...e},[...r])}var It=Ve({"node_modules/fp-ts/lib/function.js"(e){var r=e&&e.__spreadArray||function(b,I,V){if(V||arguments.length===2)for(var q=0,Y=I.length,ne;q<Y;q++)(ne||!(q in I))&&(ne||(ne=Array.prototype.slice.call(I,0,q)),ne[q]=I[q]);return b.concat(ne||Array.prototype.slice.call(I))};Object.defineProperty(e,"__esModule",{value:!0}),e.dual=e.getEndomorphismMonoid=e.not=e.SK=e.hole=e.pipe=e.untupled=e.tupled=e.absurd=e.decrement=e.increment=e.tuple=e.flow=e.flip=e.constVoid=e.constUndefined=e.constNull=e.constFalse=e.constTrue=e.constant=e.unsafeCoerce=e.identity=e.apply=e.getRing=e.getSemiring=e.getMonoid=e.getSemigroup=e.getBooleanAlgebra=void 0;var n=function(b){return function(){return{meet:function(I,V){return function(q){return b.meet(I(q),V(q))}},join:function(I,V){return function(q){return b.join(I(q),V(q))}},zero:function(){return b.zero},one:function(){return b.one},implies:function(I,V){return function(q){return b.implies(I(q),V(q))}},not:function(I){return function(V){return b.not(I(V))}}}}};e.getBooleanAlgebra=n;var i=function(b){return function(){return{concat:function(I,V){return function(q){return b.concat(I(q),V(q))}}}}};e.getSemigroup=i;var a=function(b){var I=(0,e.getSemigroup)(b);return function(){return{concat:I().concat,empty:function(){return b.empty}}}};e.getMonoid=a;var u=function(b){return{add:function(I,V){return function(q){return b.add(I(q),V(q))}},zero:function(){return b.zero},mul:function(I,V){return function(q){return b.mul(I(q),V(q))}},one:function(){return b.one}}};e.getSemiring=u;var o=function(b){var I=(0,e.getSemiring)(b);return{add:I.add,mul:I.mul,one:I.one,zero:I.zero,sub:function(V,q){return function(Y){return b.sub(V(Y),q(Y))}}}};e.getRing=o;var s=function(b){return function(I){return I(b)}};e.apply=s;function c(b){return b}e.identity=c,e.unsafeCoerce=c;function l(b){return function(){return b}}e.constant=l,e.constTrue=l(!0),e.constFalse=l(!1),e.constNull=l(null),e.constUndefined=l(void 0),e.constVoid=e.constUndefined;function f(b){return function(){for(var I=[],V=0;V<arguments.length;V++)I[V]=arguments[V];return I.length>1?b(I[1],I[0]):function(q){return b(q)(I[0])}}}e.flip=f;function h(b,I,V,q,Y,ne,ye,he,ke){switch(arguments.length){case 1:return b;case 2:return function(){return I(b.apply(this,arguments))};case 3:return function(){return V(I(b.apply(this,arguments)))};case 4:return function(){return q(V(I(b.apply(this,arguments))))};case 5:return function(){return Y(q(V(I(b.apply(this,arguments)))))};case 6:return function(){return ne(Y(q(V(I(b.apply(this,arguments))))))};case 7:return function(){return ye(ne(Y(q(V(I(b.apply(this,arguments)))))))};case 8:return function(){return he(ye(ne(Y(q(V(I(b.apply(this,arguments))))))))};case 9:return function(){return ke(he(ye(ne(Y(q(V(I(b.apply(this,arguments)))))))))}}}e.flow=h;function v(){for(var b=[],I=0;I<arguments.length;I++)b[I]=arguments[I];return b}e.tuple=v;function E(b){return b+1}e.increment=E;function R(b){return b-1}e.decrement=R;function L(b){throw new Error("Called `absurd` function which should be uncallable")}e.absurd=L;function N(b){return function(I){return b.apply(void 0,I)}}e.tupled=N;function F(b){return function(){for(var I=[],V=0;V<arguments.length;V++)I[V]=arguments[V];return b(I)}}e.untupled=F;function C(b,I,V,q,Y,ne,ye,he,ke){switch(arguments.length){case 1:return b;case 2:return I(b);case 3:return V(I(b));case 4:return q(V(I(b)));case 5:return Y(q(V(I(b))));case 6:return ne(Y(q(V(I(b)))));case 7:return ye(ne(Y(q(V(I(b))))));case 8:return he(ye(ne(Y(q(V(I(b)))))));case 9:return ke(he(ye(ne(Y(q(V(I(b))))))));default:{for(var lt=arguments[0],ft=1;ft<arguments.length;ft++)lt=arguments[ft](lt);return lt}}}e.pipe=C,e.hole=L;var B=function(b,I){return I};e.SK=B;function U(b){return function(I){return!b(I)}}e.not=U;var W=function(){return{concat:function(b,I){return h(b,I)},empty:c}};e.getEndomorphismMonoid=W;var _=function(b,I){var V=typeof b=="number"?function(q){return q.length>=b}:b;return function(){var q=Array.from(arguments);return V(arguments)?I.apply(this,q):function(Y){return I.apply(void 0,r([Y],q,!1))}}};e.dual=_}}),Br=Ve({"node_modules/fp-ts/lib/internal.js"(e){var r=e&&e.__spreadArray||function(b,I,V){if(V||arguments.length===2)for(var q=0,Y=I.length,ne;q<Y;q++)(ne||!(q in I))&&(ne||(ne=Array.prototype.slice.call(I,0,q)),ne[q]=I[q]);return b.concat(ne||Array.prototype.slice.call(I))};Object.defineProperty(e,"__esModule",{value:!0}),e.flatMapReader=e.flatMapTask=e.flatMapIO=e.flatMapEither=e.flatMapOption=e.flatMapNullable=e.liftOption=e.liftNullable=e.fromReadonlyNonEmptyArray=e.has=e.emptyRecord=e.emptyReadonlyArray=e.tail=e.head=e.isNonEmpty=e.singleton=e.right=e.left=e.isRight=e.isLeft=e.some=e.none=e.isSome=e.isNone=void 0;var n=It(),i=function(b){return b._tag==="None"};e.isNone=i;var a=function(b){return b._tag==="Some"};e.isSome=a,e.none={_tag:"None"};var u=function(b){return{_tag:"Some",value:b}};e.some=u;var o=function(b){return b._tag==="Left"};e.isLeft=o;var s=function(b){return b._tag==="Right"};e.isRight=s;var c=function(b){return{_tag:"Left",left:b}};e.left=c;var l=function(b){return{_tag:"Right",right:b}};e.right=l;var f=function(b){return[b]};e.singleton=f;var h=function(b){return b.length>0};e.isNonEmpty=h;var v=function(b){return b[0]};e.head=v;var E=function(b){return b.slice(1)};e.tail=E,e.emptyReadonlyArray=[],e.emptyRecord={},e.has=Object.prototype.hasOwnProperty;var R=function(b){return r([b[0]],b.slice(1),!0)};e.fromReadonlyNonEmptyArray=R;var L=function(b){return function(I,V){return function(){for(var q=[],Y=0;Y<arguments.length;Y++)q[Y]=arguments[Y];var ne=I.apply(void 0,q);return b.fromEither(ne==null?(0,e.left)(V.apply(void 0,q)):(0,e.right)(ne))}}};e.liftNullable=L;var N=function(b){return function(I,V){return function(){for(var q=[],Y=0;Y<arguments.length;Y++)q[Y]=arguments[Y];var ne=I.apply(void 0,q);return b.fromEither((0,e.isNone)(ne)?(0,e.left)(V.apply(void 0,q)):(0,e.right)(ne.value))}}};e.liftOption=N;var F=function(b,I){return(0,n.dual)(3,function(V,q,Y){return I.flatMap(V,(0,e.liftNullable)(b)(q,Y))})};e.flatMapNullable=F;var C=function(b,I){return(0,n.dual)(3,function(V,q,Y){return I.flatMap(V,(0,e.liftOption)(b)(q,Y))})};e.flatMapOption=C;var B=function(b,I){return(0,n.dual)(2,function(V,q){return I.flatMap(V,function(Y){return b.fromEither(q(Y))})})};e.flatMapEither=B;var U=function(b,I){return(0,n.dual)(2,function(V,q){return I.flatMap(V,function(Y){return b.fromIO(q(Y))})})};e.flatMapIO=U;var W=function(b,I){return(0,n.dual)(2,function(V,q){return I.flatMap(V,function(Y){return b.fromTask(q(Y))})})};e.flatMapTask=W;var _=function(b,I){return(0,n.dual)(2,function(V,q){return I.flatMap(V,function(Y){return b.fromReader(q(Y))})})};e.flatMapReader=_}}),Xi=Ve({"node_modules/fp-ts/lib/Apply.js"(e){var r=e&&e.__createBinding||(Object.create?function(F,C,B,U){U===void 0&&(U=B);var W=Object.getOwnPropertyDescriptor(C,B);(!W||("get"in W?!C.__esModule:W.writable||W.configurable))&&(W={enumerable:!0,get:function(){return C[B]}}),Object.defineProperty(F,U,W)}:function(F,C,B,U){U===void 0&&(U=B),F[U]=C[B]}),n=e&&e.__setModuleDefault||(Object.create?function(F,C){Object.defineProperty(F,"default",{enumerable:!0,value:C})}:function(F,C){F.default=C}),i=e&&e.__importStar||function(F){if(F&&F.__esModule)return F;var C={};if(F!=null)for(var B in F)B!=="default"&&Object.prototype.hasOwnProperty.call(F,B)&&r(C,F,B);return n(C,F),C};Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceS=e.sequenceT=e.getApplySemigroup=e.apS=e.apSecond=e.apFirst=e.ap=void 0;var a=It(),u=i(Br());function o(F,C){return function(B){return function(U){return F.ap(F.map(U,function(W){return function(_){return C.ap(W,_)}}),B)}}}e.ap=o;function s(F){return function(C){return function(B){return F.ap(F.map(B,function(U){return function(){return U}}),C)}}}e.apFirst=s;function c(F){return function(C){return function(B){return F.ap(F.map(B,function(){return function(U){return U}}),C)}}}e.apSecond=c;function l(F){return function(C,B){return function(U){return F.ap(F.map(U,function(W){return function(_){var b;return Object.assign({},W,(b={},b[C]=_,b))}}),B)}}}e.apS=l;function f(F){return function(C){return{concat:function(B,U){return F.ap(F.map(B,function(W){return function(_){return C.concat(W,_)}}),U)}}}}e.getApplySemigroup=f;function h(F,C,B){return function(U){for(var W=Array(B.length+1),_=0;_<B.length;_++)W[_]=B[_];return W[B.length]=U,C===0?F.apply(null,W):h(F,C-1,W)}}var v={1:function(F){return[F]},2:function(F){return function(C){return[F,C]}},3:function(F){return function(C){return function(B){return[F,C,B]}}},4:function(F){return function(C){return function(B){return function(U){return[F,C,B,U]}}}},5:function(F){return function(C){return function(B){return function(U){return function(W){return[F,C,B,U,W]}}}}}};function E(F){return u.has.call(v,F)||(v[F]=h(a.tuple,F-1,[])),v[F]}function R(F){return function(){for(var C=[],B=0;B<arguments.length;B++)C[B]=arguments[B];for(var U=C.length,W=E(U),_=F.map(C[0],W),b=1;b<U;b++)_=F.ap(_,C[b]);return _}}e.sequenceT=R;function L(F){var C=F.length;switch(C){case 1:return function(B){var U;return U={},U[F[0]]=B,U};case 2:return function(B){return function(U){var W;return W={},W[F[0]]=B,W[F[1]]=U,W}};case 3:return function(B){return function(U){return function(W){var _;return _={},_[F[0]]=B,_[F[1]]=U,_[F[2]]=W,_}}};case 4:return function(B){return function(U){return function(W){return function(_){var b;return b={},b[F[0]]=B,b[F[1]]=U,b[F[2]]=W,b[F[3]]=_,b}}}};case 5:return function(B){return function(U){return function(W){return function(_){return function(b){var I;return I={},I[F[0]]=B,I[F[1]]=U,I[F[2]]=W,I[F[3]]=_,I[F[4]]=b,I}}}}};default:return h(function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];for(var W={},_=0;_<C;_++)W[F[_]]=B[_];return W},C-1,[])}}function N(F){return function(C){for(var B=Object.keys(C),U=B.length,W=L(B),_=F.map(C[B[0]],W),b=1;b<U;b++)_=F.ap(_,C[B[b]]);return _}}e.sequenceS=N}}),ti=Ve({"node_modules/fp-ts/lib/Chain.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bind=e.tap=e.chainFirst=void 0;function r(a){var u=n(a);return function(o){return function(s){return u(s,o)}}}e.chainFirst=r;function n(a){return function(u,o){return a.chain(u,function(s){return a.map(o(s),function(){return s})})}}e.tap=n;function i(a){return function(u,o){return function(s){return a.chain(s,function(c){return a.map(o(c),function(l){var f;return Object.assign({},c,(f={},f[u]=l,f))})})}}}e.bind=i}}),vc=Ve({"node_modules/fp-ts/lib/FromEither.js"(e){var r=e&&e.__createBinding||(Object.create?function(N,F,C,B){B===void 0&&(B=C);var U=Object.getOwnPropertyDescriptor(F,C);(!U||("get"in U?!F.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return F[C]}}),Object.defineProperty(N,B,U)}:function(N,F,C,B){B===void 0&&(B=C),N[B]=F[C]}),n=e&&e.__setModuleDefault||(Object.create?function(N,F){Object.defineProperty(N,"default",{enumerable:!0,value:F})}:function(N,F){N.default=F}),i=e&&e.__importStar||function(N){if(N&&N.__esModule)return N;var F={};if(N!=null)for(var C in N)C!=="default"&&Object.prototype.hasOwnProperty.call(N,C)&&r(F,N,C);return n(F,N),F};Object.defineProperty(e,"__esModule",{value:!0}),e.tapEither=e.filterOrElse=e.chainFirstEitherK=e.chainEitherK=e.fromEitherK=e.chainOptionK=e.fromOptionK=e.fromPredicate=e.fromOption=void 0;var a=ti(),u=It(),o=i(Br());function s(N){return function(F){return function(C){return N.fromEither(o.isNone(C)?o.left(F()):o.right(C.value))}}}e.fromOption=s;function c(N){return function(F,C){return function(B){return N.fromEither(F(B)?o.right(B):o.left(C(B)))}}}e.fromPredicate=c;function l(N){var F=s(N);return function(C){var B=F(C);return function(U){return(0,u.flow)(U,B)}}}e.fromOptionK=l;function f(N,F){var C=l(N);return function(B){var U=C(B);return function(W){return function(_){return F.chain(_,U(W))}}}}e.chainOptionK=f;function h(N){return function(F){return(0,u.flow)(F,N.fromEither)}}e.fromEitherK=h;function v(N,F){var C=h(N);return function(B){return function(U){return F.chain(U,C(B))}}}e.chainEitherK=v;function E(N,F){var C=L(N,F);return function(B){return function(U){return C(U,B)}}}e.chainFirstEitherK=E;function R(N,F){return function(C,B){return function(U){return F.chain(U,function(W){return N.fromEither(C(W)?o.right(W):o.left(B(W)))})}}}e.filterOrElse=R;function L(N,F){var C=h(N),B=(0,a.tap)(F);return function(U,W){return B(U,C(W))}}e.tapEither=L}}),ri=Ve({"node_modules/fp-ts/lib/Functor.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asUnit=e.as=e.getFunctorComposition=e.let=e.bindTo=e.flap=e.map=void 0;var r=It();function n(l,f){return function(h){return function(v){return l.map(v,function(E){return f.map(E,h)})}}}e.map=n;function i(l){return function(f){return function(h){return l.map(h,function(v){return v(f)})}}}e.flap=i;function a(l){return function(f){return function(h){return l.map(h,function(v){var E;return E={},E[f]=v,E})}}}e.bindTo=a;function u(l){return function(f,h){return function(v){return l.map(v,function(E){var R;return Object.assign({},E,(R={},R[f]=h(E),R))})}}}e.let=u;function o(l,f){var h=n(l,f);return{map:function(v,E){return(0,r.pipe)(v,h(E))}}}e.getFunctorComposition=o;function s(l){return function(f,h){return l.map(f,function(){return h})}}e.as=s;function c(l){var f=s(l);return function(h){return f(h,void 0)}}e.asUnit=c}}),qu=Ve({"node_modules/fp-ts/lib/Eq.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.eqDate=e.eqNumber=e.eqString=e.eqBoolean=e.eq=e.strictEqual=e.getStructEq=e.getTupleEq=e.Contravariant=e.getMonoid=e.getSemigroup=e.eqStrict=e.URI=e.contramap=e.tuple=e.struct=e.fromEquals=void 0;var r=It(),n=function(f){return{equals:function(h,v){return h===v||f(h,v)}}};e.fromEquals=n;var i=function(f){return(0,e.fromEquals)(function(h,v){for(var E in f)if(!f[E].equals(h[E],v[E]))return!1;return!0})};e.struct=i;var a=function(){for(var f=[],h=0;h<arguments.length;h++)f[h]=arguments[h];return(0,e.fromEquals)(function(v,E){return f.every(function(R,L){return R.equals(v[L],E[L])})})};e.tuple=a;var u=function(f,h){return(0,r.pipe)(f,(0,e.contramap)(h))},o=function(f){return function(h){return(0,e.fromEquals)(function(v,E){return h.equals(f(v),f(E))})}};e.contramap=o,e.URI="Eq",e.eqStrict={equals:function(f,h){return f===h}};var s={equals:function(){return!0}},c=function(){return{concat:function(f,h){return(0,e.fromEquals)(function(v,E){return f.equals(v,E)&&h.equals(v,E)})}}};e.getSemigroup=c;var l=function(){return{concat:(0,e.getSemigroup)().concat,empty:s}};e.getMonoid=l,e.Contravariant={URI:e.URI,contramap:u},e.getTupleEq=e.tuple,e.getStructEq=e.struct,e.strictEqual=e.eqStrict.equals,e.eq=e.Contravariant,e.eqBoolean=e.eqStrict,e.eqString=e.eqStrict,e.eqNumber=e.eqStrict,e.eqDate={equals:function(f,h){return f.valueOf()===h.valueOf()}}}}),ni=Ve({"node_modules/fp-ts/lib/Ord.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ordDate=e.ordNumber=e.ordString=e.ordBoolean=e.ord=e.getDualOrd=e.getTupleOrd=e.between=e.clamp=e.max=e.min=e.geq=e.leq=e.gt=e.lt=e.equals=e.trivial=e.Contravariant=e.getMonoid=e.getSemigroup=e.URI=e.contramap=e.reverse=e.tuple=e.fromCompare=e.equalsDefault=void 0;var r=qu(),n=It(),i=function(_){return function(b,I){return b===I||_(b,I)===0}};e.equalsDefault=i;var a=function(_){return{equals:(0,e.equalsDefault)(_),compare:function(b,I){return b===I?0:_(b,I)}}};e.fromCompare=a;var u=function(){for(var _=[],b=0;b<arguments.length;b++)_[b]=arguments[b];return(0,e.fromCompare)(function(I,V){for(var q=0;q<_.length-1;q++){var Y=_[q].compare(I[q],V[q]);if(Y!==0)return Y}return _[q].compare(I[q],V[q])})};e.tuple=u;var o=function(_){return(0,e.fromCompare)(function(b,I){return _.compare(I,b)})};e.reverse=o;var s=function(_,b){return(0,n.pipe)(_,(0,e.contramap)(b))},c=function(_){return function(b){return(0,e.fromCompare)(function(I,V){return b.compare(_(I),_(V))})}};e.contramap=c,e.URI="Ord";var l=function(){return{concat:function(_,b){return(0,e.fromCompare)(function(I,V){var q=_.compare(I,V);return q!==0?q:b.compare(I,V)})}}};e.getSemigroup=l;var f=function(){return{concat:(0,e.getSemigroup)().concat,empty:(0,e.fromCompare)(function(){return 0})}};e.getMonoid=f,e.Contravariant={URI:e.URI,contramap:s},e.trivial={equals:n.constTrue,compare:(0,n.constant)(0)};var h=function(_){return function(b){return function(I){return I===b||_.compare(I,b)===0}}};e.equals=h;var v=function(_){return function(b,I){return _.compare(b,I)===-1}};e.lt=v;var E=function(_){return function(b,I){return _.compare(b,I)===1}};e.gt=E;var R=function(_){return function(b,I){return _.compare(b,I)!==1}};e.leq=R;var L=function(_){return function(b,I){return _.compare(b,I)!==-1}};e.geq=L;var N=function(_){return function(b,I){return b===I||_.compare(b,I)<1?b:I}};e.min=N;var F=function(_){return function(b,I){return b===I||_.compare(b,I)>-1?b:I}};e.max=F;var C=function(_){var b=(0,e.min)(_),I=(0,e.max)(_);return function(V,q){return function(Y){return I(b(Y,q),V)}}};e.clamp=C;var B=function(_){var b=(0,e.lt)(_),I=(0,e.gt)(_);return function(V,q){return function(Y){return!(b(Y,V)||I(Y,q))}}};e.between=B,e.getTupleOrd=e.tuple,e.getDualOrd=e.reverse,e.ord=e.Contravariant;function U(_,b){return _<b?-1:_>b?1:0}var W={equals:r.eqStrict.equals,compare:U};e.ordBoolean=W,e.ordString=W,e.ordNumber=W,e.ordDate=(0,n.pipe)(e.ordNumber,(0,e.contramap)(function(_){return _.valueOf()}))}}),Tv=Ve({"node_modules/fp-ts/lib/Magma.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=e.endo=e.filterSecond=e.filterFirst=e.reverse=void 0;var r=function(o){return{concat:function(s,c){return o.concat(c,s)}}};e.reverse=r;var n=function(o){return function(s){return{concat:function(c,l){return o(c)?s.concat(c,l):l}}}};e.filterFirst=n;var i=function(o){return function(s){return{concat:function(c,l){return o(l)?s.concat(c,l):c}}}};e.filterSecond=i;var a=function(o){return function(s){return{concat:function(c,l){return s.concat(o(c),o(l))}}}};e.endo=a;var u=function(o){return function(s){return function(c){return c.reduce(function(l,f){return o.concat(l,f)},s)}}};e.concatAll=u}}),Ov=Ve({"node_modules/fp-ts/lib/Semigroup.js"(e){var r=e&&e.__createBinding||(Object.create?function(C,B,U,W){W===void 0&&(W=U);var _=Object.getOwnPropertyDescriptor(B,U);(!_||("get"in _?!B.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return B[U]}}),Object.defineProperty(C,W,_)}:function(C,B,U,W){W===void 0&&(W=U),C[W]=B[U]}),n=e&&e.__setModuleDefault||(Object.create?function(C,B){Object.defineProperty(C,"default",{enumerable:!0,value:B})}:function(C,B){C.default=B}),i=e&&e.__importStar||function(C){if(C&&C.__esModule)return C;var B={};if(C!=null)for(var U in C)U!=="default"&&Object.prototype.hasOwnProperty.call(C,U)&&r(B,C,U);return n(B,C),B};Object.defineProperty(e,"__esModule",{value:!0}),e.semigroupProduct=e.semigroupSum=e.semigroupString=e.getFunctionSemigroup=e.semigroupAny=e.semigroupAll=e.fold=e.getIntercalateSemigroup=e.getMeetSemigroup=e.getJoinSemigroup=e.getDualSemigroup=e.getStructSemigroup=e.getTupleSemigroup=e.getFirstSemigroup=e.getLastSemigroup=e.getObjectSemigroup=e.semigroupVoid=e.concatAll=e.last=e.first=e.intercalate=e.tuple=e.struct=e.reverse=e.constant=e.max=e.min=void 0;var a=It(),u=i(Br()),o=i(Tv()),s=i(ni()),c=function(C){return{concat:s.min(C)}};e.min=c;var l=function(C){return{concat:s.max(C)}};e.max=l;var f=function(C){return{concat:function(){return C}}};e.constant=f,e.reverse=o.reverse;var h=function(C){return{concat:function(B,U){var W={};for(var _ in C)u.has.call(C,_)&&(W[_]=C[_].concat(B[_],U[_]));return W}}};e.struct=h;var v=function(){for(var C=[],B=0;B<arguments.length;B++)C[B]=arguments[B];return{concat:function(U,W){return C.map(function(_,b){return _.concat(U[b],W[b])})}}};e.tuple=v;var E=function(C){return function(B){return{concat:function(U,W){return B.concat(U,B.concat(C,W))}}}};e.intercalate=E;var R=function(){return{concat:a.identity}};e.first=R;var L=function(){return{concat:function(C,B){return B}}};e.last=L,e.concatAll=o.concatAll,e.semigroupVoid=(0,e.constant)(void 0);var N=function(){return{concat:function(C,B){return Object.assign({},C,B)}}};e.getObjectSemigroup=N,e.getLastSemigroup=e.last,e.getFirstSemigroup=e.first,e.getTupleSemigroup=e.tuple,e.getStructSemigroup=e.struct,e.getDualSemigroup=e.reverse,e.getJoinSemigroup=e.max,e.getMeetSemigroup=e.min,e.getIntercalateSemigroup=e.intercalate;function F(C){var B=(0,e.concatAll)(C);return function(U,W){return W===void 0?B(U):B(U)(W)}}e.fold=F,e.semigroupAll={concat:function(C,B){return C&&B}},e.semigroupAny={concat:function(C,B){return C||B}},e.getFunctionSemigroup=a.getSemigroup,e.semigroupString={concat:function(C,B){return C+B}},e.semigroupSum={concat:function(C,B){return C+B}},e.semigroupProduct={concat:function(C,B){return C*B}}}}),Uu=Ve({"node_modules/fp-ts/lib/ReadonlyNonEmptyArray.js"(e){var r=e&&e.__createBinding||(Object.create?function(D,S,k,j){j===void 0&&(j=k);var te=Object.getOwnPropertyDescriptor(S,k);(!te||("get"in te?!S.__esModule:te.writable||te.configurable))&&(te={enumerable:!0,get:function(){return S[k]}}),Object.defineProperty(D,j,te)}:function(D,S,k,j){j===void 0&&(j=k),D[j]=S[k]}),n=e&&e.__setModuleDefault||(Object.create?function(D,S){Object.defineProperty(D,"default",{enumerable:!0,value:S})}:function(D,S){D.default=S}),i=e&&e.__importStar||function(D){if(D&&D.__esModule)return D;var S={};if(D!=null)for(var k in D)k!=="default"&&Object.prototype.hasOwnProperty.call(D,k)&&r(S,D,k);return n(S,D),S},a=e&&e.__spreadArray||function(D,S,k){if(k||arguments.length===2)for(var j=0,te=S.length,le;j<te;j++)(le||!(j in S))&&(le||(le=Array.prototype.slice.call(S,0,j)),le[j]=S[j]);return D.concat(le||Array.prototype.slice.call(S))};Object.defineProperty(e,"__esModule",{value:!0}),e.reduceRight=e.foldMap=e.reduce=e.mapWithIndex=e.map=e.flatten=e.duplicate=e.extend=e.flatMap=e.ap=e.alt=e.altW=e.of=e.chunksOf=e.splitAt=e.chop=e.chainWithIndex=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.modifyAt=e.updateAt=e.sort=e.groupBy=e.group=e.reverse=e.concat=e.concatW=e.fromArray=e.unappend=e.unprepend=e.range=e.replicate=e.makeBy=e.fromReadonlyArray=e.rotate=e.union=e.sortBy=e.uniq=e.unsafeUpdateAt=e.unsafeInsertAt=e.append=e.appendW=e.prepend=e.prependW=e.isOutOfBound=e.isNonEmpty=e.empty=void 0,e.groupSort=e.chain=e.intercalate=e.updateLast=e.modifyLast=e.updateHead=e.modifyHead=e.matchRight=e.matchLeft=e.concatAll=e.max=e.min=e.init=e.last=e.tail=e.head=e.apS=e.bind=e.let=e.bindTo=e.Do=e.Comonad=e.Alt=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getUnionSemigroup=e.getEq=e.getSemigroup=e.getShow=e.URI=e.extract=e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.foldMapWithIndex=e.reduceWithIndex=void 0,e.readonlyNonEmptyArray=e.fold=e.prependToAll=e.insertAt=e.snoc=e.cons=e.unsnoc=e.uncons=e.filterWithIndex=e.filter=void 0;var u=Xi(),o=ti(),s=qu(),c=It(),l=ri(),f=i(Br()),h=ni(),v=i(Ov());e.empty=f.emptyReadonlyArray,e.isNonEmpty=f.isNonEmpty;var E=function(D,S){return D<0||D>=S.length};e.isOutOfBound=E;var R=function(D){return function(S){return a([D],S,!0)}};e.prependW=R,e.prepend=e.prependW;var L=function(D){return function(S){return a(a([],S,!0),[D],!1)}};e.appendW=L,e.append=e.appendW;var N=function(D,S,k){if((0,e.isNonEmpty)(k)){var j=f.fromReadonlyNonEmptyArray(k);return j.splice(D,0,S),j}return[S]};e.unsafeInsertAt=N;var F=function(D,S,k){if(k[D]===S)return k;var j=f.fromReadonlyNonEmptyArray(k);return j[D]=S,j};e.unsafeUpdateAt=F;var C=function(D){return function(S){if(S.length===1)return S;for(var k=[(0,e.head)(S)],j=(0,e.tail)(S),te=function(Zt){k.every(function(ge){return!D.equals(ge,Zt)})&&k.push(Zt)},le=0,Ie=j;le<Ie.length;le++){var pt=Ie[le];te(pt)}return k}};e.uniq=C;var B=function(D){if((0,e.isNonEmpty)(D)){var S=(0,h.getMonoid)();return(0,e.sort)(D.reduce(S.concat,S.empty))}return c.identity};e.sortBy=B;var U=function(D){var S=(0,e.uniq)(D);return function(k){return function(j){return S((0,c.pipe)(j,he(k)))}}};e.union=U;var W=function(D){return function(S){var k=S.length,j=Math.round(D)%k;if((0,e.isOutOfBound)(Math.abs(j),S)||j===0)return S;if(j<0){var te=(0,e.splitAt)(-j)(S),le=te[0],Ie=te[1];return(0,c.pipe)(Ie,he(le))}else return(0,e.rotate)(j-k)(S)}};e.rotate=W;var _=function(D){return(0,e.isNonEmpty)(D)?f.some(D):f.none};e.fromReadonlyArray=_;var b=function(D){return function(S){for(var k=Math.max(0,Math.floor(S)),j=[D(0)],te=1;te<k;te++)j.push(D(te));return j}};e.makeBy=b;var I=function(D){return(0,e.makeBy)(function(){return D})};e.replicate=I;var V=function(D,S){return D<=S?(0,e.makeBy)(function(k){return D+k})(S-D+1):[D]};e.range=V;var q=function(D){return[(0,e.head)(D),(0,e.tail)(D)]};e.unprepend=q;var Y=function(D){return[(0,e.init)(D),(0,e.last)(D)]};e.unappend=Y;var ne=function(D){return(0,e.fromReadonlyArray)(D.slice())};e.fromArray=ne;function ye(D){return function(S){return S.concat(D)}}e.concatW=ye;function he(D,S){return S?D.concat(S):function(k){return k.concat(D)}}e.concat=he;var ke=function(D){return D.length===1?D:a([(0,e.last)(D)],D.slice(0,-1).reverse(),!0)};e.reverse=ke;function lt(D){return function(S){var k=S.length;if(k===0)return e.empty;for(var j=[],te=S[0],le=[te],Ie=1;Ie<k;Ie++){var pt=S[Ie];D.equals(pt,te)?le.push(pt):(j.push(le),te=pt,le=[te])}return j.push(le),j}}e.group=lt;var ft=function(D){return function(S){for(var k={},j=0,te=S;j<te.length;j++){var le=te[j],Ie=D(le);f.has.call(k,Ie)?k[Ie].push(le):k[Ie]=[le]}return k}};e.groupBy=ft;var Gt=function(D){return function(S){return S.length===1?S:S.slice().sort(D.compare)}};e.sort=Gt;var ar=function(D,S){return(0,e.modifyAt)(D,function(){return S})};e.updateAt=ar;var ur=function(D,S){return function(k){return(0,e.isOutOfBound)(D,k)?f.none:f.some((0,e.unsafeUpdateAt)(D,S(k[D]),k))}};e.modifyAt=ur;var or=function(D,S,k){for(var j=[k(D[0],S[0])],te=Math.min(D.length,S.length),le=1;le<te;le++)j[le]=k(D[le],S[le]);return j};e.zipWith=or;function Kt(D,S){return S===void 0?function(k){return Kt(k,D)}:(0,e.zipWith)(D,S,function(k,j){return[k,j]})}e.zip=Kt;var Ot=function(D){for(var S=[D[0][0]],k=[D[0][1]],j=1;j<D.length;j++)S[j]=D[j][0],k[j]=D[j][1];return[S,k]};e.unzip=Ot;var sr=function(D){return function(S){for(var k=[D,S[0]],j=1;j<S.length;j++)k.push(D,S[j]);return k}};e.prependAll=sr;var Jt=function(D){return function(S){var k=(0,e.tail)(S);return(0,e.isNonEmpty)(k)?(0,c.pipe)(k,(0,e.prependAll)(D),(0,e.prepend)((0,e.head)(S))):S}};e.intersperse=Jt;var Yt=function(D){return function(S){for(var k=f.fromReadonlyNonEmptyArray(D(0,(0,e.head)(S))),j=1;j<S.length;j++)k.push.apply(k,D(j,S[j]));return k}};e.chainWithIndex=Yt;var cr=function(D){return function(S){for(var k=D(S),j=k[0],te=k[1],le=[j],Ie=te;(0,e.isNonEmpty)(Ie);){var pt=D(Ie),Zt=pt[0],ge=pt[1];le.push(Zt),Ie=ge}return le}};e.chop=cr;var lr=function(D){return function(S){var k=Math.max(1,D);return k>=S.length?[S,e.empty]:[(0,c.pipe)(S.slice(1,k),(0,e.prepend)((0,e.head)(S))),S.slice(k)]}};e.splitAt=lr;var fr=function(D){return(0,e.chop)((0,e.splitAt)(D))};e.chunksOf=fr;var Te=function(D,S){return(0,c.pipe)(D,(0,e.map)(S))},de=function(D,S){return(0,c.pipe)(D,(0,e.mapWithIndex)(S))},Qe=function(D,S){return(0,c.pipe)(D,(0,e.ap)(S))},De=function(D,S){return(0,c.pipe)(D,(0,e.extend)(S))},Pe=function(D,S,k){return(0,c.pipe)(D,(0,e.reduce)(S,k))},qe=function(D){var S=(0,e.foldMap)(D);return function(k,j){return(0,c.pipe)(k,S(j))}},Me=function(D,S,k){return(0,c.pipe)(D,(0,e.reduceRight)(S,k))},Fe=function(D){var S=(0,e.traverse)(D);return function(k,j){return(0,c.pipe)(k,S(j))}},Ee=function(D,S){return(0,c.pipe)(D,(0,e.alt)(S))},ht=function(D,S,k){return(0,c.pipe)(D,(0,e.reduceWithIndex)(S,k))},et=function(D){var S=(0,e.foldMapWithIndex)(D);return function(k,j){return(0,c.pipe)(k,S(j))}},bt=function(D,S,k){return(0,c.pipe)(D,(0,e.reduceRightWithIndex)(S,k))},dt=function(D){var S=(0,e.traverseWithIndex)(D);return function(k,j){return(0,c.pipe)(k,S(j))}};e.of=f.singleton;var se=function(D){return function(S){return(0,c.pipe)(S,ye(D()))}};e.altW=se,e.alt=e.altW;var oe=function(D){return(0,e.flatMap)(function(S){return(0,c.pipe)(D,(0,e.map)(S))})};e.ap=oe,e.flatMap=(0,c.dual)(2,function(D,S){return(0,c.pipe)(D,(0,e.chainWithIndex)(function(k,j){return S(j,k)}))});var Dt=function(D){return function(S){for(var k=(0,e.tail)(S),j=[D(S)];(0,e.isNonEmpty)(k);)j.push(D(k)),k=(0,e.tail)(k);return j}};e.extend=Dt,e.duplicate=(0,e.extend)(c.identity),e.flatten=(0,e.flatMap)(c.identity);var tt=function(D){return(0,e.mapWithIndex)(function(S,k){return D(k)})};e.map=tt;var ce=function(D){return function(S){for(var k=[D(0,(0,e.head)(S))],j=1;j<S.length;j++)k.push(D(j,S[j]));return k}};e.mapWithIndex=ce;var vt=function(D,S){return(0,e.reduceWithIndex)(D,function(k,j,te){return S(j,te)})};e.reduce=vt;var He=function(D){return function(S){return function(k){return k.slice(1).reduce(function(j,te){return D.concat(j,S(te))},S(k[0]))}}};e.foldMap=He;var $=function(D,S){return(0,e.reduceRightWithIndex)(D,function(k,j,te){return S(j,te)})};e.reduceRight=$;var At=function(D,S){return function(k){return k.reduce(function(j,te,le){return S(le,j,te)},D)}};e.reduceWithIndex=At;var ve=function(D){return function(S){return function(k){return k.slice(1).reduce(function(j,te,le){return D.concat(j,S(le+1,te))},S(0,k[0]))}}};e.foldMapWithIndex=ve;var Ke=function(D,S){return function(k){return k.reduceRight(function(j,te,le){return S(le,te,j)},D)}};e.reduceRightWithIndex=Ke;var _t=function(D){var S=(0,e.traverseWithIndex)(D);return function(k){return S(function(j,te){return k(te)})}};e.traverse=_t;var Pt=function(D){return(0,e.traverseWithIndex)(D)(c.SK)};e.sequence=Pt;var yt=function(D){return function(S){return function(k){for(var j=D.map(S(0,(0,e.head)(k)),e.of),te=1;te<k.length;te++)j=D.ap(D.map(j,function(le){return function(Ie){return(0,c.pipe)(le,(0,e.append)(Ie))}}),S(te,k[te]));return j}}};e.traverseWithIndex=yt,e.extract=f.head,e.URI="ReadonlyNonEmptyArray";var Rt=function(D){return{show:function(S){return"[".concat(S.map(D.show).join(", "),"]")}}};e.getShow=Rt;var mt=function(){return{concat:he}};e.getSemigroup=mt;var nt=function(D){return(0,s.fromEquals)(function(S,k){return S.length===k.length&&S.every(function(j,te){return D.equals(j,k[te])})})};e.getEq=nt;var ie=function(D){var S=(0,e.union)(D);return{concat:function(k,j){return S(j)(k)}}};e.getUnionSemigroup=ie,e.Functor={URI:e.URI,map:Te},e.flap=(0,l.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:Te,mapWithIndex:de},e.Apply={URI:e.URI,map:Te,ap:Qe},e.apFirst=(0,u.apFirst)(e.Apply),e.apSecond=(0,u.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:Te,ap:Qe,of:e.of},e.Chain={URI:e.URI,map:Te,ap:Qe,chain:e.flatMap},e.chainFirst=(0,o.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:Te,ap:Qe,of:e.of,chain:e.flatMap},e.Foldable={URI:e.URI,reduce:Pe,foldMap:qe,reduceRight:Me},e.FoldableWithIndex={URI:e.URI,reduce:Pe,foldMap:qe,reduceRight:Me,reduceWithIndex:ht,foldMapWithIndex:et,reduceRightWithIndex:bt},e.Traversable={URI:e.URI,map:Te,reduce:Pe,foldMap:qe,reduceRight:Me,traverse:Fe,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:Te,mapWithIndex:de,reduce:Pe,foldMap:qe,reduceRight:Me,traverse:Fe,sequence:e.sequence,reduceWithIndex:ht,foldMapWithIndex:et,reduceRightWithIndex:bt,traverseWithIndex:dt},e.Alt={URI:e.URI,map:Te,alt:Ee},e.Comonad={URI:e.URI,map:Te,extend:De,extract:e.extract},e.Do=(0,e.of)(f.emptyRecord),e.bindTo=(0,l.bindTo)(e.Functor);var Re=(0,l.let)(e.Functor);e.let=Re,e.bind=(0,o.bind)(e.Chain),e.apS=(0,u.apS)(e.Apply),e.head=e.extract,e.tail=f.tail;var Be=function(D){return D[D.length-1]};e.last=Be;var gt=function(D){return D.slice(0,-1)};e.init=gt;var ut=function(D){var S=v.min(D);return function(k){return k.reduce(S.concat)}};e.min=ut;var rt=function(D){var S=v.max(D);return function(k){return k.reduce(S.concat)}};e.max=rt;var Ct=function(D){return function(S){return S.reduce(D.concat)}};e.concatAll=Ct;var $t=function(D){return function(S){return D((0,e.head)(S),(0,e.tail)(S))}};e.matchLeft=$t;var Lt=function(D){return function(S){return D((0,e.init)(S),(0,e.last)(S))}};e.matchRight=Lt;var M=function(D){return function(S){return a([D((0,e.head)(S))],(0,e.tail)(S),!0)}};e.modifyHead=M;var d=function(D){return(0,e.modifyHead)(function(){return D})};e.updateHead=d;var p=function(D){return function(S){return(0,c.pipe)((0,e.init)(S),(0,e.append)(D((0,e.last)(S))))}};e.modifyLast=p;var z=function(D){return(0,e.modifyLast)(function(){return D})};e.updateLast=z;var H=function(D){var S=(0,e.concatAll)(D);return function(k){return(0,c.flow)((0,e.intersperse)(k),S)}};e.intercalate=H,e.chain=e.flatMap;function G(D){var S=(0,e.sort)(D),k=lt(D);return function(j){return(0,e.isNonEmpty)(j)?k(S(j)):e.empty}}e.groupSort=G;function Q(D){return(0,e.filterWithIndex)(function(S,k){return D(k)})}e.filter=Q;var ue=function(D){return function(S){return(0,e.fromReadonlyArray)(S.filter(function(k,j){return D(j,k)}))}};e.filterWithIndex=ue,e.uncons=e.unprepend,e.unsnoc=e.unappend;function Ae(D,S){return S===void 0?(0,e.prepend)(D):(0,c.pipe)(S,(0,e.prepend)(D))}e.cons=Ae;var we=function(D,S){return(0,c.pipe)(D,he([S]))};e.snoc=we;var it=function(D,S){return function(k){return D<0||D>k.length?f.none:f.some((0,e.unsafeInsertAt)(D,S,k))}};e.insertAt=it,e.prependToAll=e.prependAll,e.fold=e.concatAll,e.readonlyNonEmptyArray={URI:e.URI,of:e.of,map:Te,mapWithIndex:de,ap:Qe,chain:e.flatMap,extend:De,extract:e.extract,reduce:Pe,foldMap:qe,reduceRight:Me,traverse:Fe,sequence:e.sequence,reduceWithIndex:ht,foldMapWithIndex:et,reduceRightWithIndex:bt,traverseWithIndex:dt,alt:Ee}}}),$v=Ve({"node_modules/fp-ts/lib/NonEmptyArray.js"(e){var r=e&&e.__createBinding||(Object.create?function(M,d,p,z){z===void 0&&(z=p);var H=Object.getOwnPropertyDescriptor(d,p);(!H||("get"in H?!d.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return d[p]}}),Object.defineProperty(M,z,H)}:function(M,d,p,z){z===void 0&&(z=p),M[z]=d[p]}),n=e&&e.__setModuleDefault||(Object.create?function(M,d){Object.defineProperty(M,"default",{enumerable:!0,value:d})}:function(M,d){M.default=d}),i=e&&e.__importStar||function(M){if(M&&M.__esModule)return M;var d={};if(M!=null)for(var p in M)p!=="default"&&Object.prototype.hasOwnProperty.call(M,p)&&r(d,M,p);return n(d,M),d},a=e&&e.__spreadArray||function(M,d,p){if(p||arguments.length===2)for(var z=0,H=d.length,G;z<H;z++)(G||!(z in d))&&(G||(G=Array.prototype.slice.call(d,0,z)),G[z]=d[z]);return M.concat(G||Array.prototype.slice.call(d))};Object.defineProperty(e,"__esModule",{value:!0}),e.mapWithIndex=e.map=e.flatten=e.duplicate=e.extend=e.flatMap=e.ap=e.alt=e.altW=e.chunksOf=e.splitAt=e.chop=e.chainWithIndex=e.foldMap=e.foldMapWithIndex=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.of=e.copy=e.modifyAt=e.updateAt=e.insertAt=e.sort=e.groupBy=e.group=e.reverse=e.concat=e.concatW=e.unappend=e.unprepend=e.range=e.replicate=e.makeBy=e.fromArray=e.fromReadonlyNonEmptyArray=e.rotate=e.union=e.sortBy=e.uniq=e.unsafeUpdateAt=e.unsafeInsertAt=e.append=e.appendW=e.prepend=e.prependW=e.isOutOfBound=e.isNonEmpty=void 0,e.chain=e.intercalate=e.updateLast=e.modifyLast=e.updateHead=e.modifyHead=e.matchRight=e.matchLeft=e.concatAll=e.max=e.min=e.init=e.last=e.tail=e.head=e.apS=e.bind=e.let=e.bindTo=e.Do=e.Comonad=e.Alt=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getUnionSemigroup=e.getEq=e.getSemigroup=e.getShow=e.URI=e.extract=e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.reduce=void 0,e.nonEmptyArray=e.fold=e.prependToAll=e.snoc=e.cons=e.unsnoc=e.uncons=e.filterWithIndex=e.filter=e.groupSort=void 0;var u=Xi(),o=ti(),s=It(),c=ri(),l=i(Br()),f=ni(),h=i(Uu()),v=function(M){return M.length>0};e.isNonEmpty=v;var E=function(M,d){return M<0||M>=d.length};e.isOutOfBound=E;var R=function(M){return function(d){return a([M],d,!0)}};e.prependW=R,e.prepend=e.prependW;var L=function(M){return function(d){return a(a([],d,!0),[M],!1)}};e.appendW=L,e.append=e.appendW;var N=function(M,d,p){if((0,e.isNonEmpty)(p)){var z=(0,e.fromReadonlyNonEmptyArray)(p);return z.splice(M,0,d),z}return[d]};e.unsafeInsertAt=N;var F=function(M,d,p){var z=(0,e.fromReadonlyNonEmptyArray)(p);return z[M]=d,z};e.unsafeUpdateAt=F;var C=function(M){return function(d){if(d.length===1)return(0,e.copy)(d);for(var p=[(0,e.head)(d)],z=(0,e.tail)(d),H=function(Ae){p.every(function(we){return!M.equals(we,Ae)})&&p.push(Ae)},G=0,Q=z;G<Q.length;G++){var ue=Q[G];H(ue)}return p}};e.uniq=C;var B=function(M){if((0,e.isNonEmpty)(M)){var d=(0,f.getMonoid)();return(0,e.sort)(M.reduce(d.concat,d.empty))}return e.copy};e.sortBy=B;var U=function(M){var d=(0,e.uniq)(M);return function(p){return function(z){return d((0,s.pipe)(z,ye(p)))}}};e.union=U;var W=function(M){return function(d){var p=d.length,z=Math.round(M)%p;if((0,e.isOutOfBound)(Math.abs(z),d)||z===0)return(0,e.copy)(d);if(z<0){var H=(0,e.splitAt)(-z)(d),G=H[0],Q=H[1];return(0,s.pipe)(Q,ye(G))}else return(0,e.rotate)(z-p)(d)}};e.rotate=W,e.fromReadonlyNonEmptyArray=l.fromReadonlyNonEmptyArray;var _=function(M){return(0,e.isNonEmpty)(M)?l.some(M):l.none};e.fromArray=_;var b=function(M){return function(d){for(var p=Math.max(0,Math.floor(d)),z=[M(0)],H=1;H<p;H++)z.push(M(H));return z}};e.makeBy=b;var I=function(M){return(0,e.makeBy)(function(){return M})};e.replicate=I;var V=function(M,d){return M<=d?(0,e.makeBy)(function(p){return M+p})(d-M+1):[M]};e.range=V;var q=function(M){return[(0,e.head)(M),(0,e.tail)(M)]};e.unprepend=q;var Y=function(M){return[(0,e.init)(M),(0,e.last)(M)]};e.unappend=Y;function ne(M){return function(d){return d.concat(M)}}e.concatW=ne;function ye(M,d){return d?M.concat(d):function(p){return p.concat(M)}}e.concat=ye;var he=function(M){return a([(0,e.last)(M)],M.slice(0,-1).reverse(),!0)};e.reverse=he;function ke(M){return function(d){var p=d.length;if(p===0)return[];for(var z=[],H=d[0],G=[H],Q=1;Q<p;Q++){var ue=d[Q];M.equals(ue,H)?G.push(ue):(z.push(G),H=ue,G=[H])}return z.push(G),z}}e.group=ke;var lt=function(M){return function(d){for(var p={},z=0,H=d;z<H.length;z++){var G=H[z],Q=M(G);l.has.call(p,Q)?p[Q].push(G):p[Q]=[G]}return p}};e.groupBy=lt;var ft=function(M){return function(d){return d.slice().sort(M.compare)}};e.sort=ft;var Gt=function(M,d){return function(p){return M<0||M>p.length?l.none:l.some((0,e.unsafeInsertAt)(M,d,p))}};e.insertAt=Gt;var ar=function(M,d){return(0,e.modifyAt)(M,function(){return d})};e.updateAt=ar;var ur=function(M,d){return function(p){return(0,e.isOutOfBound)(M,p)?l.none:l.some((0,e.unsafeUpdateAt)(M,d(p[M]),p))}};e.modifyAt=ur,e.copy=e.fromReadonlyNonEmptyArray;var or=function(M){return[M]};e.of=or;var Kt=function(M,d,p){for(var z=[p(M[0],d[0])],H=Math.min(M.length,d.length),G=1;G<H;G++)z[G]=p(M[G],d[G]);return z};e.zipWith=Kt;function Ot(M,d){return d===void 0?function(p){return Ot(p,M)}:(0,e.zipWith)(M,d,function(p,z){return[p,z]})}e.zip=Ot;var sr=function(M){for(var d=[M[0][0]],p=[M[0][1]],z=1;z<M.length;z++)d[z]=M[z][0],p[z]=M[z][1];return[d,p]};e.unzip=sr;var Jt=function(M){return function(d){for(var p=[M,d[0]],z=1;z<d.length;z++)p.push(M,d[z]);return p}};e.prependAll=Jt;var Yt=function(M){return function(d){var p=(0,e.tail)(d);return(0,e.isNonEmpty)(p)?(0,s.pipe)(p,(0,e.prependAll)(M),(0,e.prepend)((0,e.head)(d))):(0,e.copy)(d)}};e.intersperse=Yt,e.foldMapWithIndex=h.foldMapWithIndex,e.foldMap=h.foldMap;var cr=function(M){return function(d){for(var p=(0,e.fromReadonlyNonEmptyArray)(M(0,(0,e.head)(d))),z=1;z<d.length;z++)p.push.apply(p,M(z,d[z]));return p}};e.chainWithIndex=cr;var lr=function(M){return function(d){for(var p=M(d),z=p[0],H=p[1],G=[z],Q=H;(0,e.isNonEmpty)(Q);){var ue=M(Q),Ae=ue[0],we=ue[1];G.push(Ae),Q=we}return G}};e.chop=lr;var fr=function(M){return function(d){var p=Math.max(1,M);return p>=d.length?[(0,e.copy)(d),[]]:[(0,s.pipe)(d.slice(1,p),(0,e.prepend)((0,e.head)(d))),d.slice(p)]}};e.splitAt=fr;var Te=function(M){return(0,e.chop)((0,e.splitAt)(M))};e.chunksOf=Te;var de=function(M,d){return(0,s.pipe)(M,(0,e.map)(d))},Qe=function(M,d){return(0,s.pipe)(M,(0,e.mapWithIndex)(d))},De=function(M,d){return(0,s.pipe)(M,(0,e.ap)(d))},Pe=function(M,d){return(0,s.pipe)(M,(0,e.extend)(d))},qe=function(M,d,p){return(0,s.pipe)(M,(0,e.reduce)(d,p))},Me=function(M){var d=(0,e.foldMap)(M);return function(p,z){return(0,s.pipe)(p,d(z))}},Fe=function(M,d,p){return(0,s.pipe)(M,(0,e.reduceRight)(d,p))},Ee=function(M){var d=(0,e.traverse)(M);return function(p,z){return(0,s.pipe)(p,d(z))}},ht=function(M,d){return(0,s.pipe)(M,(0,e.alt)(d))},et=function(M,d,p){return(0,s.pipe)(M,(0,e.reduceWithIndex)(d,p))},bt=function(M){var d=(0,e.foldMapWithIndex)(M);return function(p,z){return(0,s.pipe)(p,d(z))}},dt=function(M,d,p){return(0,s.pipe)(M,(0,e.reduceRightWithIndex)(d,p))},se=function(M){var d=(0,e.traverseWithIndex)(M);return function(p,z){return(0,s.pipe)(p,d(z))}},oe=function(M){return function(d){return(0,s.pipe)(d,ne(M()))}};e.altW=oe,e.alt=e.altW;var Dt=function(M){return(0,e.flatMap)(function(d){return(0,s.pipe)(M,(0,e.map)(d))})};e.ap=Dt,e.flatMap=(0,s.dual)(2,function(M,d){return(0,s.pipe)(M,(0,e.chainWithIndex)(function(p,z){return d(z,p)}))});var tt=function(M){return function(d){for(var p=(0,e.tail)(d),z=[M(d)];(0,e.isNonEmpty)(p);)z.push(M(p)),p=(0,e.tail)(p);return z}};e.extend=tt,e.duplicate=(0,e.extend)(s.identity),e.flatten=(0,e.flatMap)(s.identity);var ce=function(M){return(0,e.mapWithIndex)(function(d,p){return M(p)})};e.map=ce;var vt=function(M){return function(d){for(var p=[M(0,(0,e.head)(d))],z=1;z<d.length;z++)p.push(M(z,d[z]));return p}};e.mapWithIndex=vt,e.reduce=h.reduce,e.reduceWithIndex=h.reduceWithIndex,e.reduceRight=h.reduceRight,e.reduceRightWithIndex=h.reduceRightWithIndex;var He=function(M){var d=(0,e.traverseWithIndex)(M);return function(p){return d(function(z,H){return p(H)})}};e.traverse=He;var $=function(M){return(0,e.traverseWithIndex)(M)(function(d,p){return p})};e.sequence=$;var At=function(M){return function(d){return function(p){for(var z=M.map(d(0,(0,e.head)(p)),e.of),H=1;H<p.length;H++)z=M.ap(M.map(z,function(G){return function(Q){return(0,s.pipe)(G,(0,e.append)(Q))}}),d(H,p[H]));return z}}};e.traverseWithIndex=At,e.extract=h.head,e.URI="NonEmptyArray",e.getShow=h.getShow;var ve=function(){return{concat:ye}};e.getSemigroup=ve,e.getEq=h.getEq;var Ke=function(M){var d=(0,e.union)(M);return{concat:function(p,z){return d(z)(p)}}};e.getUnionSemigroup=Ke,e.Functor={URI:e.URI,map:de},e.flap=(0,c.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:de,mapWithIndex:Qe},e.Apply={URI:e.URI,map:de,ap:De},e.apFirst=(0,u.apFirst)(e.Apply),e.apSecond=(0,u.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:de,ap:De,of:e.of},e.Chain={URI:e.URI,map:de,ap:De,chain:e.flatMap},e.chainFirst=(0,o.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:de,ap:De,of:e.of,chain:e.flatMap},e.Foldable={URI:e.URI,reduce:qe,foldMap:Me,reduceRight:Fe},e.FoldableWithIndex={URI:e.URI,reduce:qe,foldMap:Me,reduceRight:Fe,reduceWithIndex:et,foldMapWithIndex:bt,reduceRightWithIndex:dt},e.Traversable={URI:e.URI,map:de,reduce:qe,foldMap:Me,reduceRight:Fe,traverse:Ee,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:de,mapWithIndex:Qe,reduce:qe,foldMap:Me,reduceRight:Fe,traverse:Ee,sequence:e.sequence,reduceWithIndex:et,foldMapWithIndex:bt,reduceRightWithIndex:dt,traverseWithIndex:se},e.Alt={URI:e.URI,map:de,alt:ht},e.Comonad={URI:e.URI,map:de,extend:Pe,extract:e.extract},e.Do=(0,e.of)(l.emptyRecord),e.bindTo=(0,c.bindTo)(e.Functor);var _t=(0,c.let)(e.Functor);e.let=_t,e.bind=(0,o.bind)(e.Chain),e.apS=(0,u.apS)(e.Apply),e.head=h.head;var Pt=function(M){return M.slice(1)};e.tail=Pt,e.last=h.last;var yt=function(M){return M.slice(0,-1)};e.init=yt,e.min=h.min,e.max=h.max;var Rt=function(M){return function(d){return d.reduce(M.concat)}};e.concatAll=Rt;var mt=function(M){return function(d){return M((0,e.head)(d),(0,e.tail)(d))}};e.matchLeft=mt;var nt=function(M){return function(d){return M((0,e.init)(d),(0,e.last)(d))}};e.matchRight=nt;var ie=function(M){return function(d){return a([M((0,e.head)(d))],(0,e.tail)(d),!0)}};e.modifyHead=ie;var Re=function(M){return(0,e.modifyHead)(function(){return M})};e.updateHead=Re;var Be=function(M){return function(d){return(0,s.pipe)((0,e.init)(d),(0,e.append)(M((0,e.last)(d))))}};e.modifyLast=Be;var gt=function(M){return(0,e.modifyLast)(function(){return M})};e.updateLast=gt,e.intercalate=h.intercalate,e.chain=e.flatMap;function ut(M){var d=(0,e.sort)(M),p=ke(M);return function(z){return(0,e.isNonEmpty)(z)?p(d(z)):[]}}e.groupSort=ut;function rt(M){return(0,e.filterWithIndex)(function(d,p){return M(p)})}e.filter=rt;var Ct=function(M){return function(d){return(0,e.fromArray)(d.filter(function(p,z){return M(z,p)}))}};e.filterWithIndex=Ct,e.uncons=e.unprepend,e.unsnoc=e.unappend;function $t(M,d){return d===void 0?(0,e.prepend)(M):(0,s.pipe)(d,(0,e.prepend)(M))}e.cons=$t;var Lt=function(M,d){return(0,s.pipe)(M,(0,e.append)(d))};e.snoc=Lt,e.prependToAll=e.prependAll,e.fold=h.concatAll,e.nonEmptyArray={URI:e.URI,of:e.of,map:de,mapWithIndex:Qe,ap:De,chain:e.flatMap,extend:Pe,extract:e.extract,reduce:qe,foldMap:Me,reduceRight:Fe,traverse:Ee,sequence:e.sequence,reduceWithIndex:et,foldMapWithIndex:bt,reduceRightWithIndex:dt,traverseWithIndex:se,alt:ht}}}),yc=Ve({"node_modules/fp-ts/lib/number.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Field=e.MonoidProduct=e.MonoidSum=e.SemigroupProduct=e.SemigroupSum=e.MagmaSub=e.Show=e.Bounded=e.Ord=e.Eq=e.isNumber=void 0;var r=function(n){return typeof n=="number"};e.isNumber=r,e.Eq={equals:function(n,i){return n===i}},e.Ord={equals:e.Eq.equals,compare:function(n,i){return n<i?-1:n>i?1:0}},e.Bounded={equals:e.Eq.equals,compare:e.Ord.compare,top:1/0,bottom:-1/0},e.Show={show:function(n){return JSON.stringify(n)}},e.MagmaSub={concat:function(n,i){return n-i}},e.SemigroupSum={concat:function(n,i){return n+i}},e.SemigroupProduct={concat:function(n,i){return n*i}},e.MonoidSum={concat:e.SemigroupSum.concat,empty:0},e.MonoidProduct={concat:e.SemigroupProduct.concat,empty:1},e.Field={add:e.SemigroupSum.concat,zero:0,mul:e.SemigroupProduct.concat,one:1,sub:e.MagmaSub.concat,degree:function(n){return 1},div:function(n,i){return n/i},mod:function(n,i){return n%i}}}}),mc=Ve({"node_modules/fp-ts/lib/Separated.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.right=e.left=e.flap=e.Functor=e.Bifunctor=e.URI=e.bimap=e.mapLeft=e.map=e.separated=void 0;var r=It(),n=ri(),i=function(v,E){return{left:v,right:E}};e.separated=i;var a=function(v,E){return(0,r.pipe)(v,(0,e.map)(E))},u=function(v,E){return(0,r.pipe)(v,(0,e.mapLeft)(E))},o=function(v,E,R){return(0,r.pipe)(v,(0,e.bimap)(E,R))},s=function(v){return function(E){return(0,e.separated)((0,e.left)(E),v((0,e.right)(E)))}};e.map=s;var c=function(v){return function(E){return(0,e.separated)(v((0,e.left)(E)),(0,e.right)(E))}};e.mapLeft=c;var l=function(v,E){return function(R){return(0,e.separated)(v((0,e.left)(R)),E((0,e.right)(R)))}};e.bimap=l,e.URI="Separated",e.Bifunctor={URI:e.URI,mapLeft:u,bimap:o},e.Functor={URI:e.URI,map:a},e.flap=(0,n.flap)(e.Functor);var f=function(v){return v.left};e.left=f;var h=function(v){return v.right};e.right=h}}),gc=Ve({"node_modules/fp-ts/lib/Witherable.js"(e){var r=e&&e.__createBinding||(Object.create?function(c,l,f,h){h===void 0&&(h=f);var v=Object.getOwnPropertyDescriptor(l,f);(!v||("get"in v?!l.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(c,h,v)}:function(c,l,f,h){h===void 0&&(h=f),c[h]=l[f]}),n=e&&e.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),i=e&&e.__importStar||function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&r(l,c,f);return n(l,c),l};Object.defineProperty(e,"__esModule",{value:!0}),e.filterE=e.witherDefault=e.wiltDefault=void 0;var a=i(Br());function u(c,l){return function(f){var h=c.traverse(f);return function(v,E){return f.map(h(v,E),l.separate)}}}e.wiltDefault=u;function o(c,l){return function(f){var h=c.traverse(f);return function(v,E){return f.map(h(v,E),l.compact)}}}e.witherDefault=o;function s(c){return function(l){var f=c.wither(l);return function(h){return function(v){return f(v,function(E){return l.map(h(E),function(R){return R?a.some(E):a.none})})}}}}e.filterE=s}}),pc=Ve({"node_modules/fp-ts/lib/Zero.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.guard=void 0;function r(n,i){return function(a){return a?i.of(void 0):n.zero()}}e.guard=r}}),Lv=Ve({"node_modules/fp-ts/lib/ReadonlyArray.js"(e){var r=e&&e.__createBinding||(Object.create?function(y,m,w,T){T===void 0&&(T=w);var J=Object.getOwnPropertyDescriptor(m,w);(!J||("get"in J?!m.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return m[w]}}),Object.defineProperty(y,T,J)}:function(y,m,w,T){T===void 0&&(T=w),y[T]=m[w]}),n=e&&e.__setModuleDefault||(Object.create?function(y,m){Object.defineProperty(y,"default",{enumerable:!0,value:m})}:function(y,m){y.default=m}),i=e&&e.__importStar||function(y){if(y&&y.__esModule)return y;var m={};if(y!=null)for(var w in y)w!=="default"&&Object.prototype.hasOwnProperty.call(y,w)&&r(m,y,w);return n(m,y),m},a=e&&e.__spreadArray||function(y,m,w){if(w||arguments.length===2)for(var T=0,J=m.length,X;T<J;T++)(X||!(T in m))&&(X||(X=Array.prototype.slice.call(m,0,T)),X[T]=m[T]);return y.concat(X||Array.prototype.slice.call(m))};Object.defineProperty(e,"__esModule",{value:!0}),e.sort=e.lefts=e.rights=e.reverse=e.modifyAt=e.deleteAt=e.updateAt=e.insertAt=e.findLastIndex=e.findLastMap=e.findLast=e.findFirstMap=e.findFirst=e.findIndex=e.dropLeftWhile=e.dropRight=e.dropLeft=e.spanLeft=e.takeLeftWhile=e.takeRight=e.takeLeft=e.init=e.tail=e.last=e.head=e.lookup=e.isOutOfBound=e.size=e.scanRight=e.scanLeft=e.chainWithIndex=e.foldRight=e.matchRight=e.matchRightW=e.foldLeft=e.matchLeft=e.matchLeftW=e.match=e.matchW=e.fromEither=e.fromOption=e.fromPredicate=e.replicate=e.makeBy=e.appendW=e.append=e.prependW=e.prepend=e.isNonEmpty=e.isEmpty=void 0,e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.foldMap=e.reduce=e.foldMapWithIndex=e.duplicate=e.extend=e.filterWithIndex=e.partitionMapWithIndex=e.partitionMap=e.partitionWithIndex=e.partition=e.compact=e.filterMap=e.filterMapWithIndex=e.filter=e.separate=e.mapWithIndex=e.map=e.flatten=e.flatMap=e.ap=e.alt=e.altW=e.zero=e.of=e._chainRecBreadthFirst=e._chainRecDepthFirst=e.difference=e.intersection=e.union=e.concat=e.concatW=e.comprehension=e.fromOptionK=e.chunksOf=e.splitAt=e.chop=e.sortBy=e.uniq=e.elem=e.rotate=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=void 0,e.toArray=e.unsafeDeleteAt=e.unsafeUpdateAt=e.unsafeInsertAt=e.fromEitherK=e.FromEither=e.filterE=e.Witherable=e.ChainRecBreadthFirst=e.chainRecBreadthFirst=e.ChainRecDepthFirst=e.chainRecDepthFirst=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.guard=e.Zero=e.Alt=e.Unfoldable=e.chainFirst=e.Monad=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.getOrd=e.getEq=e.getMonoid=e.getSemigroup=e.getShow=e.URI=e.unfold=e.wilt=e.wither=e.traverseWithIndex=void 0,e.readonlyArray=e.prependToAll=e.snoc=e.cons=e.range=e.chain=e.apS=e.bind=e.let=e.bindTo=e.Do=e.intercalate=e.exists=e.some=e.every=e.empty=e.fromArray=void 0;var u=Xi(),o=ti(),s=qu(),c=vc(),l=It(),f=ri(),h=i(Br()),v=i(yc()),E=ni(),R=i(Uu()),L=mc(),N=gc(),F=pc(),C=function(y){return y.length===0};e.isEmpty=C,e.isNonEmpty=R.isNonEmpty,e.prepend=R.prepend,e.prependW=R.prependW,e.append=R.append,e.appendW=R.appendW;var B=function(y,m){return y<=0?e.empty:R.makeBy(m)(y)};e.makeBy=B;var U=function(y,m){return(0,e.makeBy)(y,function(){return m})};e.replicate=U;function W(y){return function(m){return y(m)?[m]:e.empty}}e.fromPredicate=W;var _=function(y){return h.isNone(y)?e.empty:[y.value]};e.fromOption=_;var b=function(y){return h.isLeft(y)?e.empty:[y.right]};e.fromEither=b;var I=function(y,m){return function(w){return(0,e.isNonEmpty)(w)?m(w):y()}};e.matchW=I,e.match=e.matchW;var V=function(y,m){return function(w){return(0,e.isNonEmpty)(w)?m(R.head(w),R.tail(w)):y()}};e.matchLeftW=V,e.matchLeft=e.matchLeftW,e.foldLeft=e.matchLeft;var q=function(y,m){return function(w){return(0,e.isNonEmpty)(w)?m(R.init(w),R.last(w)):y()}};e.matchRightW=q,e.matchRight=e.matchRightW,e.foldRight=e.matchRight;var Y=function(y){return function(m){if((0,e.isEmpty)(m))return e.empty;for(var w=[],T=0;T<m.length;T++)w.push.apply(w,y(T,m[T]));return w}};e.chainWithIndex=Y;var ne=function(y,m){return function(w){var T=w.length,J=new Array(T+1);J[0]=y;for(var X=0;X<T;X++)J[X+1]=m(J[X],w[X]);return J}};e.scanLeft=ne;var ye=function(y,m){return function(w){var T=w.length,J=new Array(T+1);J[T]=y;for(var X=T-1;X>=0;X--)J[X]=m(w[X],J[X+1]);return J}};e.scanRight=ye;var he=function(y){return y.length};e.size=he,e.isOutOfBound=R.isOutOfBound;function ke(y,m){return m===void 0?function(w){return ke(y,w)}:(0,e.isOutOfBound)(y,m)?h.none:h.some(m[y])}e.lookup=ke;var lt=function(y){return(0,e.isNonEmpty)(y)?h.some(R.head(y)):h.none};e.head=lt;var ft=function(y){return(0,e.isNonEmpty)(y)?h.some(R.last(y)):h.none};e.last=ft;var Gt=function(y){return(0,e.isNonEmpty)(y)?h.some(R.tail(y)):h.none};e.tail=Gt;var ar=function(y){return(0,e.isNonEmpty)(y)?h.some(R.init(y)):h.none};e.init=ar;var ur=function(y){return function(m){return(0,e.isOutOfBound)(y,m)?m:y===0?e.empty:m.slice(0,y)}};e.takeLeft=ur;var or=function(y){return function(m){return(0,e.isOutOfBound)(y,m)?m:y===0?e.empty:m.slice(-y)}};e.takeRight=or;function Kt(y){return function(m){for(var w=[],T=0,J=m;T<J.length;T++){var X=J[T];if(!y(X))break;w.push(X)}var $e=w.length;return $e===m.length?m:$e===0?e.empty:w}}e.takeLeftWhile=Kt;var Ot=function(y,m){for(var w=y.length,T=0;T<w&&m(y[T]);T++);return T};function sr(y){return function(m){var w=(0,e.splitAt)(Ot(m,y))(m),T=w[0],J=w[1];return{init:T,rest:J}}}e.spanLeft=sr;var Jt=function(y){return function(m){return y<=0||(0,e.isEmpty)(m)?m:y>=m.length?e.empty:m.slice(y,m.length)}};e.dropLeft=Jt;var Yt=function(y){return function(m){return y<=0||(0,e.isEmpty)(m)?m:y>=m.length?e.empty:m.slice(0,m.length-y)}};e.dropRight=Yt;function cr(y){return function(m){var w=Ot(m,y);return w===0?m:w===m.length?e.empty:m.slice(w)}}e.dropLeftWhile=cr;var lr=function(y){return function(m){for(var w=0;w<m.length;w++)if(y(m[w]))return h.some(w);return h.none}};e.findIndex=lr;function fr(y){return function(m){for(var w=0;w<m.length;w++)if(y(m[w]))return h.some(m[w]);return h.none}}e.findFirst=fr;var Te=function(y){return function(m){for(var w=0;w<m.length;w++){var T=y(m[w]);if(h.isSome(T))return T}return h.none}};e.findFirstMap=Te;function de(y){return function(m){for(var w=m.length-1;w>=0;w--)if(y(m[w]))return h.some(m[w]);return h.none}}e.findLast=de;var Qe=function(y){return function(m){for(var w=m.length-1;w>=0;w--){var T=y(m[w]);if(h.isSome(T))return T}return h.none}};e.findLastMap=Qe;var De=function(y){return function(m){for(var w=m.length-1;w>=0;w--)if(y(m[w]))return h.some(w);return h.none}};e.findLastIndex=De;var Pe=function(y,m){return function(w){return y<0||y>w.length?h.none:h.some(R.unsafeInsertAt(y,m,w))}};e.insertAt=Pe;var qe=function(y,m){return(0,e.modifyAt)(y,function(){return m})};e.updateAt=qe;var Me=function(y){return function(m){return(0,e.isOutOfBound)(y,m)?h.none:h.some((0,e.unsafeDeleteAt)(y,m))}};e.deleteAt=Me;var Fe=function(y,m){return function(w){return(0,e.isOutOfBound)(y,w)?h.none:h.some((0,e.unsafeUpdateAt)(y,m(w[y]),w))}};e.modifyAt=Fe;var Ee=function(y){return y.length<=1?y:y.slice().reverse()};e.reverse=Ee;var ht=function(y){for(var m=[],w=0;w<y.length;w++){var T=y[w];T._tag==="Right"&&m.push(T.right)}return m};e.rights=ht;var et=function(y){for(var m=[],w=0;w<y.length;w++){var T=y[w];T._tag==="Left"&&m.push(T.left)}return m};e.lefts=et;var bt=function(y){return function(m){return m.length<=1?m:m.slice().sort(y.compare)}};e.sort=bt;var dt=function(y,m,w){for(var T=[],J=Math.min(y.length,m.length),X=0;X<J;X++)T[X]=w(y[X],m[X]);return T};e.zipWith=dt;function se(y,m){return m===void 0?function(w){return se(w,y)}:(0,e.zipWith)(y,m,function(w,T){return[w,T]})}e.zip=se;var oe=function(y){for(var m=[],w=[],T=0;T<y.length;T++)m[T]=y[T][0],w[T]=y[T][1];return[m,w]};e.unzip=oe;var Dt=function(y){var m=R.prependAll(y);return function(w){return(0,e.isNonEmpty)(w)?m(w):w}};e.prependAll=Dt;var tt=function(y){var m=R.intersperse(y);return function(w){return(0,e.isNonEmpty)(w)?m(w):w}};e.intersperse=tt;var ce=function(y){var m=R.rotate(y);return function(w){return(0,e.isNonEmpty)(w)?m(w):w}};e.rotate=ce;function vt(y){return function(m,w){if(w===void 0){var T=vt(y);return function($e){return T(m,$e)}}for(var J=function($e){return y.equals($e,m)},X=0;X<w.length;X++)if(J(w[X]))return!0;return!1}}e.elem=vt;var He=function(y){var m=R.uniq(y);return function(w){return(0,e.isNonEmpty)(w)?m(w):w}};e.uniq=He;var $=function(y){var m=R.sortBy(y);return function(w){return(0,e.isNonEmpty)(w)?m(w):w}};e.sortBy=$;var At=function(y){var m=R.chop(y);return function(w){return(0,e.isNonEmpty)(w)?m(w):e.empty}};e.chop=At;var ve=function(y){return function(m){return y>=1&&(0,e.isNonEmpty)(m)?R.splitAt(y)(m):(0,e.isEmpty)(m)?[m,e.empty]:[e.empty,m]}};e.splitAt=ve;var Ke=function(y){var m=R.chunksOf(y);return function(w){return(0,e.isNonEmpty)(w)?m(w):e.empty}};e.chunksOf=Ke;var _t=function(y){return function(){for(var m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];return(0,e.fromOption)(y.apply(void 0,m))}};e.fromOptionK=_t;function Pt(y,m,w){w===void 0&&(w=function(){return!0});var T=function(J,X){return(0,e.isNonEmpty)(X)?(0,e.flatMap)(R.head(X),function($e){return T((0,l.pipe)(J,(0,e.append)($e)),R.tail(X))}):w.apply(void 0,J)?[m.apply(void 0,J)]:e.empty};return T(e.empty,y)}e.comprehension=Pt;var yt=function(y){return function(m){return(0,e.isEmpty)(m)?y:(0,e.isEmpty)(y)?m:m.concat(y)}};e.concatW=yt,e.concat=e.concatW;function Rt(y){var m=R.union(y);return function(w,T){if(T===void 0){var J=Rt(y);return function(X){return J(X,w)}}return(0,e.isNonEmpty)(w)&&(0,e.isNonEmpty)(T)?m(T)(w):(0,e.isNonEmpty)(w)?w:T}}e.union=Rt;function mt(y){var m=vt(y);return function(w,T){if(T===void 0){var J=mt(y);return function(X){return J(X,w)}}return w.filter(function(X){return m(X,T)})}}e.intersection=mt;function nt(y){var m=vt(y);return function(w,T){if(T===void 0){var J=nt(y);return function(X){return J(X,w)}}return w.filter(function(X){return!m(X,T)})}}e.difference=nt;var ie=function(y,m){return(0,l.pipe)(y,(0,e.map)(m))},Re=function(y,m){return(0,l.pipe)(y,(0,e.mapWithIndex)(m))},Be=function(y,m){return(0,l.pipe)(y,(0,e.ap)(m))},gt=function(y,m){return(0,l.pipe)(y,(0,e.filter)(m))},ut=function(y,m){return(0,l.pipe)(y,(0,e.filterMap)(m))},rt=function(y,m){return(0,l.pipe)(y,(0,e.partition)(m))},Ct=function(y,m){return(0,l.pipe)(y,(0,e.partitionMap)(m))},$t=function(y,m){return(0,l.pipe)(y,(0,e.partitionWithIndex)(m))},Lt=function(y,m){return(0,l.pipe)(y,(0,e.partitionMapWithIndex)(m))},M=function(y,m){return(0,l.pipe)(y,(0,e.alt)(m))},d=function(y,m,w){return(0,l.pipe)(y,(0,e.reduce)(m,w))},p=function(y){var m=(0,e.foldMap)(y);return function(w,T){return(0,l.pipe)(w,m(T))}},z=function(y,m,w){return(0,l.pipe)(y,(0,e.reduceRight)(m,w))},H=function(y,m,w){return(0,l.pipe)(y,(0,e.reduceWithIndex)(m,w))},G=function(y){var m=(0,e.foldMapWithIndex)(y);return function(w,T){return(0,l.pipe)(w,m(T))}},Q=function(y,m,w){return(0,l.pipe)(y,(0,e.reduceRightWithIndex)(m,w))},ue=function(y,m){return(0,l.pipe)(y,(0,e.filterMapWithIndex)(m))},Ae=function(y,m){return(0,l.pipe)(y,(0,e.filterWithIndex)(m))},we=function(y,m){return(0,l.pipe)(y,(0,e.extend)(m))},it=function(y){var m=(0,e.traverse)(y);return function(w,T){return(0,l.pipe)(w,m(T))}},D=function(y){var m=(0,e.traverseWithIndex)(y);return function(w,T){return(0,l.pipe)(w,m(T))}},S=function(y,m){return(0,l.pipe)(y,(0,e.chainRecDepthFirst)(m))};e._chainRecDepthFirst=S;var k=function(y,m){return(0,l.pipe)(y,(0,e.chainRecBreadthFirst)(m))};e._chainRecBreadthFirst=k,e.of=R.of;var j=function(){return e.empty};e.zero=j;var te=function(y){return function(m){return m.concat(y())}};e.altW=te,e.alt=e.altW;var le=function(y){return(0,e.flatMap)(function(m){return(0,l.pipe)(y,(0,e.map)(m))})};e.ap=le,e.flatMap=(0,l.dual)(2,function(y,m){return(0,l.pipe)(y,(0,e.chainWithIndex)(function(w,T){return m(T,w)}))}),e.flatten=(0,e.flatMap)(l.identity);var Ie=function(y){return function(m){return m.map(function(w){return y(w)})}};e.map=Ie;var pt=function(y){return function(m){return m.map(function(w,T){return y(T,w)})}};e.mapWithIndex=pt;var Zt=function(y){for(var m=[],w=[],T=0,J=y;T<J.length;T++){var X=J[T];X._tag==="Left"?m.push(X.left):w.push(X.right)}return(0,L.separated)(m,w)};e.separate=Zt;var ge=function(y){return function(m){return m.filter(y)}};e.filter=ge;var Ue=function(y){return function(m){for(var w=[],T=0;T<m.length;T++){var J=y(T,m[T]);h.isSome(J)&&w.push(J.value)}return w}};e.filterMapWithIndex=Ue;var fe=function(y){return(0,e.filterMapWithIndex)(function(m,w){return y(w)})};e.filterMap=fe,e.compact=(0,e.filterMap)(l.identity);var Oe=function(y){return(0,e.partitionWithIndex)(function(m,w){return y(w)})};e.partition=Oe;var ot=function(y){return function(m){for(var w=[],T=[],J=0;J<m.length;J++){var X=m[J];y(J,X)?T.push(X):w.push(X)}return(0,L.separated)(w,T)}};e.partitionWithIndex=ot;var xe=function(y){return(0,e.partitionMapWithIndex)(function(m,w){return y(w)})};e.partitionMap=xe;var jt=function(y){return function(m){for(var w=[],T=[],J=0;J<m.length;J++){var X=y(J,m[J]);X._tag==="Left"?w.push(X.left):T.push(X.right)}return(0,L.separated)(w,T)}};e.partitionMapWithIndex=jt;var Ft=function(y){return function(m){return m.filter(function(w,T){return y(T,w)})}};e.filterWithIndex=Ft;var Bt=function(y){return function(m){return m.map(function(w,T){return y(m.slice(T))})}};e.extend=Bt,e.duplicate=(0,e.extend)(l.identity);var qt=function(y){return function(m){return function(w){return w.reduce(function(T,J,X){return y.concat(T,m(X,J))},y.empty)}}};e.foldMapWithIndex=qt;var Ar=function(y,m){return(0,e.reduceWithIndex)(y,function(w,T,J){return m(T,J)})};e.reduce=Ar;var $r=function(y){var m=(0,e.foldMapWithIndex)(y);return function(w){return m(function(T,J){return w(J)})}};e.foldMap=$r;var Pn=function(y,m){return function(w){for(var T=w.length,J=y,X=0;X<T;X++)J=m(X,J,w[X]);return J}};e.reduceWithIndex=Pn;var Oa=function(y,m){return(0,e.reduceRightWithIndex)(y,function(w,T,J){return m(T,J)})};e.reduceRight=Oa;var $a=function(y,m){return function(w){return w.reduceRight(function(T,J,X){return m(X,J,T)},y)}};e.reduceRightWithIndex=$a;var La=function(y){var m=(0,e.traverseWithIndex)(y);return function(w){return m(function(T,J){return w(J)})}};e.traverse=La;var ja=function(y){return function(m){return d(m,y.of((0,e.zero)()),function(w,T){return y.ap(y.map(w,function(J){return function(X){return(0,l.pipe)(J,(0,e.append)(X))}}),T)})}};e.sequence=ja;var g=function(y){return function(m){return(0,e.reduceWithIndex)(y.of((0,e.zero)()),function(w,T,J){return y.ap(y.map(T,function(X){return function($e){return(0,l.pipe)(X,(0,e.append)($e))}}),m(w,J))})}};e.traverseWithIndex=g;var A=function(y){var m=Ua(y);return function(w){return function(T){return m(T,w)}}};e.wither=A;var P=function(y){var m=xa(y);return function(w){return function(T){return m(T,w)}}};e.wilt=P;var x=function(y,m){for(var w=[],T=y;;){var J=m(T);if(h.isSome(J)){var X=J.value,$e=X[0],jr=X[1];w.push($e),T=jr}else break}return w};e.unfold=x,e.URI="ReadonlyArray";var re=function(y){return{show:function(m){return"[".concat(m.map(y.show).join(", "),"]")}}};e.getShow=re;var ae=function(){return{concat:function(y,m){return(0,e.isEmpty)(y)?m:(0,e.isEmpty)(m)?y:y.concat(m)}}};e.getSemigroup=ae;var Lr=function(){return{concat:(0,e.getSemigroup)().concat,empty:e.empty}};e.getMonoid=Lr;var qa=function(y){return(0,s.fromEquals)(function(m,w){return m.length===w.length&&m.every(function(T,J){return y.equals(T,w[J])})})};e.getEq=qa;var hv=function(y){return(0,E.fromCompare)(function(m,w){for(var T=m.length,J=w.length,X=Math.min(T,J),$e=0;$e<X;$e++){var jr=y.compare(m[$e],w[$e]);if(jr!==0)return jr}return v.Ord.compare(T,J)})};e.getOrd=hv;var dv=function(y){var m=Rt(y);return{concat:function(w,T){return m(T)(w)}}};e.getUnionSemigroup=dv;var vv=function(y){return{concat:(0,e.getUnionSemigroup)(y).concat,empty:e.empty}};e.getUnionMonoid=vv;var yv=function(y){var m=mt(y);return{concat:function(w,T){return m(T)(w)}}};e.getIntersectionSemigroup=yv;var mv=function(y){var m=nt(y);return{concat:function(w,T){return m(T)(w)}}};e.getDifferenceMagma=mv,e.Functor={URI:e.URI,map:ie},e.flap=(0,f.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:ie,mapWithIndex:Re},e.Apply={URI:e.URI,map:ie,ap:Be},e.apFirst=(0,u.apFirst)(e.Apply),e.apSecond=(0,u.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:ie,ap:Be,of:e.of},e.Chain={URI:e.URI,map:ie,ap:Be,chain:e.flatMap},e.Monad={URI:e.URI,map:ie,ap:Be,of:e.of,chain:e.flatMap},e.chainFirst=(0,o.chainFirst)(e.Chain),e.Unfoldable={URI:e.URI,unfold:e.unfold},e.Alt={URI:e.URI,map:ie,alt:M},e.Zero={URI:e.URI,zero:e.zero},e.guard=(0,F.guard)(e.Zero,e.Pointed),e.Alternative={URI:e.URI,map:ie,ap:Be,of:e.of,alt:M,zero:e.zero},e.Extend={URI:e.URI,map:ie,extend:we},e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:ie,compact:e.compact,separate:e.separate,filter:gt,filterMap:ut,partition:rt,partitionMap:Ct},e.FilterableWithIndex={URI:e.URI,map:ie,mapWithIndex:Re,compact:e.compact,separate:e.separate,filter:gt,filterMap:ut,partition:rt,partitionMap:Ct,partitionMapWithIndex:Lt,partitionWithIndex:$t,filterMapWithIndex:ue,filterWithIndex:Ae},e.Foldable={URI:e.URI,reduce:d,foldMap:p,reduceRight:z},e.FoldableWithIndex={URI:e.URI,reduce:d,foldMap:p,reduceRight:z,reduceWithIndex:H,foldMapWithIndex:G,reduceRightWithIndex:Q},e.Traversable={URI:e.URI,map:ie,reduce:d,foldMap:p,reduceRight:z,traverse:it,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:ie,mapWithIndex:Re,reduce:d,foldMap:p,reduceRight:z,reduceWithIndex:H,foldMapWithIndex:G,reduceRightWithIndex:Q,traverse:it,sequence:e.sequence,traverseWithIndex:D};var gv=function(y){return function(m){for(var w=a([],y(m),!0),T=[];w.length>0;){var J=w.shift();h.isLeft(J)?w.unshift.apply(w,y(J.left)):T.push(J.right)}return T}};e.chainRecDepthFirst=gv,e.ChainRecDepthFirst={URI:e.URI,map:ie,ap:Be,chain:e.flatMap,chainRec:e._chainRecDepthFirst};var pv=function(y){return function(m){var w=y(m),T=[],J=[];function X(Va){h.isLeft(Va)?y(Va.left).forEach(function(Iv){return T.push(Iv)}):J.push(Va.right)}for(var $e=0,jr=w;$e<jr.length;$e++){var Mv=jr[$e];X(Mv)}for(;T.length>0;)X(T.shift());return J}};e.chainRecBreadthFirst=pv,e.ChainRecBreadthFirst={URI:e.URI,map:ie,ap:Be,chain:e.flatMap,chainRec:e._chainRecBreadthFirst};var Ua=(0,N.witherDefault)(e.Traversable,e.Compactable),xa=(0,N.wiltDefault)(e.Traversable,e.Compactable);e.Witherable={URI:e.URI,map:ie,compact:e.compact,separate:e.separate,filter:gt,filterMap:ut,partition:rt,partitionMap:Ct,reduce:d,foldMap:p,reduceRight:z,traverse:it,sequence:e.sequence,wither:Ua,wilt:xa},e.filterE=(0,N.filterE)(e.Witherable),e.FromEither={URI:e.URI,fromEither:e.fromEither},e.fromEitherK=(0,c.fromEitherK)(e.FromEither),e.unsafeInsertAt=R.unsafeInsertAt;var wv=function(y,m,w){return(0,e.isNonEmpty)(w)?R.unsafeUpdateAt(y,m,w):w};e.unsafeUpdateAt=wv;var Ev=function(y,m){var w=m.slice();return w.splice(y,1),w};e.unsafeDeleteAt=Ev;var bv=function(y){return y.slice()};e.toArray=bv;var Dv=function(y){return(0,e.isEmpty)(y)?e.empty:y.slice()};e.fromArray=Dv,e.empty=R.empty;function Av(y){return function(m){return m.every(y)}}e.every=Av;var Cv=function(y){return function(m){return m.some(y)}};e.some=Cv,e.exists=e.some;var Fv=function(y){var m=R.intercalate(y);return function(w){return(0,e.match)(function(){return y.empty},m(w))}};e.intercalate=Fv,e.Do=(0,e.of)(h.emptyRecord),e.bindTo=(0,f.bindTo)(e.Functor);var Sv=(0,f.let)(e.Functor);e.let=Sv,e.bind=(0,o.bind)(e.Chain),e.apS=(0,u.apS)(e.Apply),e.chain=e.flatMap,e.range=R.range,e.cons=R.cons,e.snoc=R.snoc,e.prependToAll=e.prependAll,e.readonlyArray={URI:e.URI,compact:e.compact,separate:e.separate,map:ie,ap:Be,of:e.of,chain:e.flatMap,filter:gt,filterMap:ut,partition:rt,partitionMap:Ct,mapWithIndex:Re,partitionMapWithIndex:Lt,partitionWithIndex:$t,filterMapWithIndex:ue,filterWithIndex:Ae,alt:M,zero:e.zero,unfold:e.unfold,reduce:d,foldMap:p,reduceRight:z,traverse:it,sequence:e.sequence,reduceWithIndex:H,foldMapWithIndex:G,reduceRightWithIndex:Q,traverseWithIndex:D,extend:we,wither:Ua,wilt:xa}}}),jv=Ve({"node_modules/fp-ts/lib/Array.js"(e){var r=e&&e.__createBinding||(Object.create?function(g,A,P,x){x===void 0&&(x=P);var re=Object.getOwnPropertyDescriptor(A,P);(!re||("get"in re?!A.__esModule:re.writable||re.configurable))&&(re={enumerable:!0,get:function(){return A[P]}}),Object.defineProperty(g,x,re)}:function(g,A,P,x){x===void 0&&(x=P),g[x]=A[P]}),n=e&&e.__setModuleDefault||(Object.create?function(g,A){Object.defineProperty(g,"default",{enumerable:!0,value:A})}:function(g,A){g.default=A}),i=e&&e.__importStar||function(g){if(g&&g.__esModule)return g;var A={};if(g!=null)for(var P in g)P!=="default"&&Object.prototype.hasOwnProperty.call(g,P)&&r(A,g,P);return n(A,g),A};Object.defineProperty(e,"__esModule",{value:!0}),e.lefts=e.rights=e.reverse=e.modifyAt=e.deleteAt=e.updateAt=e.insertAt=e.copy=e.findLastIndex=e.findLastMap=e.findLast=e.findFirstMap=e.findFirst=e.findIndex=e.dropLeftWhile=e.dropRight=e.dropLeft=e.spanLeft=e.takeLeftWhile=e.takeRight=e.takeLeft=e.init=e.tail=e.last=e.head=e.lookup=e.isOutOfBound=e.size=e.scanRight=e.scanLeft=e.chainWithIndex=e.foldRight=e.matchRight=e.matchRightW=e.foldLeft=e.matchLeft=e.matchLeftW=e.match=e.matchW=e.fromEither=e.fromOption=e.fromPredicate=e.replicate=e.makeBy=e.appendW=e.append=e.prependW=e.prepend=e.isNonEmpty=e.isEmpty=void 0,e.traverseWithIndex=e.sequence=e.traverse=e.reduceRightWithIndex=e.reduceRight=e.reduceWithIndex=e.reduce=e.foldMapWithIndex=e.foldMap=e.duplicate=e.extend=e.filterWithIndex=e.alt=e.altW=e.partitionMapWithIndex=e.partitionMap=e.partitionWithIndex=e.partition=e.filter=e.separate=e.compact=e.filterMap=e.filterMapWithIndex=e.mapWithIndex=e.flatten=e.flatMap=e.ap=e.map=e.zero=e.of=e.difference=e.intersection=e.union=e.concat=e.concatW=e.comprehension=e.fromOptionK=e.chunksOf=e.splitAt=e.chop=e.sortBy=e.uniq=e.elem=e.rotate=e.intersperse=e.prependAll=e.unzip=e.zip=e.zipWith=e.sort=void 0,e.some=e.every=e.unsafeDeleteAt=e.unsafeUpdateAt=e.unsafeInsertAt=e.fromEitherK=e.FromEither=e.filterE=e.ChainRecBreadthFirst=e.chainRecBreadthFirst=e.ChainRecDepthFirst=e.chainRecDepthFirst=e.Witherable=e.TraversableWithIndex=e.Traversable=e.FoldableWithIndex=e.Foldable=e.FilterableWithIndex=e.Filterable=e.Compactable=e.Extend=e.Alternative=e.guard=e.Zero=e.Alt=e.Unfoldable=e.Monad=e.chainFirst=e.Chain=e.Applicative=e.apSecond=e.apFirst=e.Apply=e.FunctorWithIndex=e.Pointed=e.flap=e.Functor=e.getDifferenceMagma=e.getIntersectionSemigroup=e.getUnionMonoid=e.getUnionSemigroup=e.getOrd=e.getEq=e.getMonoid=e.getSemigroup=e.getShow=e.URI=e.unfold=e.wilt=e.wither=void 0,e.array=e.prependToAll=e.snoc=e.cons=e.empty=e.range=e.chain=e.apS=e.bind=e.let=e.bindTo=e.Do=e.intercalate=e.exists=void 0;var a=Xi(),u=ti(),o=vc(),s=It(),c=ri(),l=i(Br()),f=i($v()),h=i(Lv()),v=mc(),E=gc(),R=pc(),L=function(g){return g.length===0};e.isEmpty=L,e.isNonEmpty=f.isNonEmpty,e.prepend=f.prepend,e.prependW=f.prependW,e.append=f.append,e.appendW=f.appendW;var N=function(g,A){return g<=0?[]:f.makeBy(A)(g)};e.makeBy=N;var F=function(g,A){return(0,e.makeBy)(g,function(){return A})};e.replicate=F;function C(g){return function(A){return g(A)?[A]:[]}}e.fromPredicate=C;var B=function(g){return l.isNone(g)?[]:[g.value]};e.fromOption=B;var U=function(g){return l.isLeft(g)?[]:[g.right]};e.fromEither=U;var W=function(g,A){return function(P){return(0,e.isNonEmpty)(P)?A(P):g()}};e.matchW=W,e.match=e.matchW;var _=function(g,A){return function(P){return(0,e.isNonEmpty)(P)?A(f.head(P),f.tail(P)):g()}};e.matchLeftW=_,e.matchLeft=e.matchLeftW,e.foldLeft=e.matchLeft;var b=function(g,A){return function(P){return(0,e.isNonEmpty)(P)?A(f.init(P),f.last(P)):g()}};e.matchRightW=b,e.matchRight=e.matchRightW,e.foldRight=e.matchRight;var I=function(g){return function(A){for(var P=[],x=0;x<A.length;x++)P.push.apply(P,g(x,A[x]));return P}};e.chainWithIndex=I;var V=function(g,A){return function(P){var x=P.length,re=new Array(x+1);re[0]=g;for(var ae=0;ae<x;ae++)re[ae+1]=A(re[ae],P[ae]);return re}};e.scanLeft=V;var q=function(g,A){return function(P){var x=P.length,re=new Array(x+1);re[x]=g;for(var ae=x-1;ae>=0;ae--)re[ae]=A(P[ae],re[ae+1]);return re}};e.scanRight=q;var Y=function(g){return g.length};e.size=Y,e.isOutOfBound=f.isOutOfBound,e.lookup=h.lookup,e.head=h.head,e.last=h.last;var ne=function(g){return(0,e.isNonEmpty)(g)?l.some(f.tail(g)):l.none};e.tail=ne;var ye=function(g){return(0,e.isNonEmpty)(g)?l.some(f.init(g)):l.none};e.init=ye;var he=function(g){return function(A){return(0,e.isOutOfBound)(g,A)?(0,e.copy)(A):A.slice(0,g)}};e.takeLeft=he;var ke=function(g){return function(A){return(0,e.isOutOfBound)(g,A)?(0,e.copy)(A):g===0?[]:A.slice(-g)}};e.takeRight=ke;function lt(g){return function(A){for(var P=[],x=0,re=A;x<re.length;x++){var ae=re[x];if(!g(ae))break;P.push(ae)}return P}}e.takeLeftWhile=lt;var ft=function(g,A){for(var P=g.length,x=0;x<P&&A(g[x]);x++);return x};function Gt(g){return function(A){var P=(0,e.splitAt)(ft(A,g))(A),x=P[0],re=P[1];return{init:x,rest:re}}}e.spanLeft=Gt;var ar=function(g){return function(A){return g<=0||(0,e.isEmpty)(A)?(0,e.copy)(A):g>=A.length?[]:A.slice(g,A.length)}};e.dropLeft=ar;var ur=function(g){return function(A){return g<=0||(0,e.isEmpty)(A)?(0,e.copy)(A):g>=A.length?[]:A.slice(0,A.length-g)}};e.dropRight=ur;function or(g){return function(A){return A.slice(ft(A,g))}}e.dropLeftWhile=or,e.findIndex=h.findIndex;function Kt(g){return h.findFirst(g)}e.findFirst=Kt,e.findFirstMap=h.findFirstMap;function Ot(g){return h.findLast(g)}e.findLast=Ot,e.findLastMap=h.findLastMap,e.findLastIndex=h.findLastIndex;var sr=function(g){return g.slice()};e.copy=sr;var Jt=function(g,A){return function(P){return g<0||g>P.length?l.none:l.some((0,e.unsafeInsertAt)(g,A,P))}};e.insertAt=Jt;var Yt=function(g,A){return(0,e.modifyAt)(g,function(){return A})};e.updateAt=Yt;var cr=function(g){return function(A){return(0,e.isOutOfBound)(g,A)?l.none:l.some((0,e.unsafeDeleteAt)(g,A))}};e.deleteAt=cr;var lr=function(g,A){return function(P){return(0,e.isOutOfBound)(g,P)?l.none:l.some((0,e.unsafeUpdateAt)(g,A(P[g]),P))}};e.modifyAt=lr;var fr=function(g){return(0,e.isEmpty)(g)?[]:g.slice().reverse()};e.reverse=fr;var Te=function(g){for(var A=[],P=0;P<g.length;P++){var x=g[P];x._tag==="Right"&&A.push(x.right)}return A};e.rights=Te;var de=function(g){for(var A=[],P=0;P<g.length;P++){var x=g[P];x._tag==="Left"&&A.push(x.left)}return A};e.lefts=de;var Qe=function(g){return function(A){return A.length<=1?(0,e.copy)(A):A.slice().sort(g.compare)}};e.sort=Qe;var De=function(g,A,P){for(var x=[],re=Math.min(g.length,A.length),ae=0;ae<re;ae++)x[ae]=P(g[ae],A[ae]);return x};e.zipWith=De;function Pe(g,A){return A===void 0?function(P){return Pe(P,g)}:(0,e.zipWith)(g,A,function(P,x){return[P,x]})}e.zip=Pe;var qe=function(g){for(var A=[],P=[],x=0;x<g.length;x++)A[x]=g[x][0],P[x]=g[x][1];return[A,P]};e.unzip=qe;var Me=function(g){var A=f.prependAll(g);return function(P){return(0,e.isNonEmpty)(P)?A(P):[]}};e.prependAll=Me;var Fe=function(g){var A=f.intersperse(g);return function(P){return(0,e.isNonEmpty)(P)?A(P):(0,e.copy)(P)}};e.intersperse=Fe;var Ee=function(g){var A=f.rotate(g);return function(P){return(0,e.isNonEmpty)(P)?A(P):(0,e.copy)(P)}};e.rotate=Ee,e.elem=h.elem;var ht=function(g){var A=f.uniq(g);return function(P){return(0,e.isNonEmpty)(P)?A(P):(0,e.copy)(P)}};e.uniq=ht;var et=function(g){var A=f.sortBy(g);return function(P){return(0,e.isNonEmpty)(P)?A(P):(0,e.copy)(P)}};e.sortBy=et;var bt=function(g){var A=f.chop(g);return function(P){return(0,e.isNonEmpty)(P)?A(P):[]}};e.chop=bt;var dt=function(g){return function(A){return g>=1&&(0,e.isNonEmpty)(A)?f.splitAt(g)(A):(0,e.isEmpty)(A)?[(0,e.copy)(A),[]]:[[],(0,e.copy)(A)]}};e.splitAt=dt;var se=function(g){var A=f.chunksOf(g);return function(P){return(0,e.isNonEmpty)(P)?A(P):[]}};e.chunksOf=se;var oe=function(g){return function(){for(var A=[],P=0;P<arguments.length;P++)A[P]=arguments[P];return(0,e.fromOption)(g.apply(void 0,A))}};e.fromOptionK=oe;function Dt(g,A,P){P===void 0&&(P=function(){return!0});var x=function(re,ae){return(0,e.isNonEmpty)(ae)?(0,e.flatMap)(f.head(ae),function(Lr){return x((0,s.pipe)(re,(0,e.append)(Lr)),f.tail(ae))}):P.apply(void 0,re)?[A.apply(void 0,re)]:[]};return x([],g)}e.comprehension=Dt;var tt=function(g){return function(A){return(0,e.isEmpty)(A)?(0,e.copy)(g):(0,e.isEmpty)(g)?(0,e.copy)(A):A.concat(g)}};e.concatW=tt,e.concat=e.concatW;function ce(g){var A=f.union(g);return function(P,x){if(x===void 0){var re=ce(g);return function(ae){return re(ae,P)}}return(0,e.isNonEmpty)(P)&&(0,e.isNonEmpty)(x)?A(x)(P):(0,e.isNonEmpty)(P)?(0,e.copy)(P):(0,e.copy)(x)}}e.union=ce;function vt(g){var A=(0,e.elem)(g);return function(P,x){if(x===void 0){var re=vt(g);return function(ae){return re(ae,P)}}return P.filter(function(ae){return A(ae,x)})}}e.intersection=vt;function He(g){var A=(0,e.elem)(g);return function(P,x){if(x===void 0){var re=He(g);return function(ae){return re(ae,P)}}return P.filter(function(ae){return!A(ae,x)})}}e.difference=He;var $=function(g,A){return(0,s.pipe)(g,(0,e.map)(A))},At=function(g,A){return(0,s.pipe)(g,(0,e.mapWithIndex)(A))},ve=function(g,A){return(0,s.pipe)(g,(0,e.ap)(A))},Ke=function(g,A){return(0,s.pipe)(g,(0,e.filter)(A))},_t=function(g,A){return(0,s.pipe)(g,(0,e.filterMap)(A))},Pt=function(g,A){return(0,s.pipe)(g,(0,e.partition)(A))},yt=function(g,A){return(0,s.pipe)(g,(0,e.partitionMap)(A))},Rt=function(g,A){return(0,s.pipe)(g,(0,e.partitionWithIndex)(A))},mt=function(g,A){return(0,s.pipe)(g,(0,e.partitionMapWithIndex)(A))},nt=function(g,A){return(0,s.pipe)(g,(0,e.alt)(A))},ie=function(g,A,P){return(0,s.pipe)(g,(0,e.reduce)(A,P))},Re=function(g){var A=(0,e.foldMap)(g);return function(P,x){return(0,s.pipe)(P,A(x))}},Be=function(g,A,P){return(0,s.pipe)(g,(0,e.reduceRight)(A,P))},gt=function(g,A,P){return(0,s.pipe)(g,(0,e.reduceWithIndex)(A,P))},ut=function(g){var A=(0,e.foldMapWithIndex)(g);return function(P,x){return(0,s.pipe)(P,A(x))}},rt=function(g,A,P){return(0,s.pipe)(g,(0,e.reduceRightWithIndex)(A,P))},Ct=function(g,A){return(0,s.pipe)(g,(0,e.filterMapWithIndex)(A))},$t=function(g,A){return(0,s.pipe)(g,(0,e.filterWithIndex)(A))},Lt=function(g,A){return(0,s.pipe)(g,(0,e.extend)(A))},M=function(g){var A=(0,e.traverse)(g);return function(P,x){return(0,s.pipe)(P,A(x))}},d=function(g){var A=(0,e.traverseWithIndex)(g);return function(P,x){return(0,s.pipe)(P,A(x))}},p=h._chainRecDepthFirst,z=h._chainRecBreadthFirst;e.of=f.of;var H=function(){return[]};e.zero=H;var G=function(g){return function(A){return A.map(function(P){return g(P)})}};e.map=G;var Q=function(g){return(0,e.flatMap)(function(A){return(0,s.pipe)(g,(0,e.map)(A))})};e.ap=Q,e.flatMap=(0,s.dual)(2,function(g,A){return(0,s.pipe)(g,(0,e.chainWithIndex)(function(P,x){return A(x,P)}))}),e.flatten=(0,e.flatMap)(s.identity);var ue=function(g){return function(A){return A.map(function(P,x){return g(x,P)})}};e.mapWithIndex=ue;var Ae=function(g){return function(A){for(var P=[],x=0;x<A.length;x++){var re=g(x,A[x]);l.isSome(re)&&P.push(re.value)}return P}};e.filterMapWithIndex=Ae;var we=function(g){return(0,e.filterMapWithIndex)(function(A,P){return g(P)})};e.filterMap=we,e.compact=(0,e.filterMap)(s.identity);var it=function(g){for(var A=[],P=[],x=0,re=g;x<re.length;x++){var ae=re[x];ae._tag==="Left"?A.push(ae.left):P.push(ae.right)}return(0,v.separated)(A,P)};e.separate=it;var D=function(g){return function(A){return A.filter(g)}};e.filter=D;var S=function(g){return(0,e.partitionWithIndex)(function(A,P){return g(P)})};e.partition=S;var k=function(g){return function(A){for(var P=[],x=[],re=0;re<A.length;re++){var ae=A[re];g(re,ae)?x.push(ae):P.push(ae)}return(0,v.separated)(P,x)}};e.partitionWithIndex=k;var j=function(g){return(0,e.partitionMapWithIndex)(function(A,P){return g(P)})};e.partitionMap=j;var te=function(g){return function(A){for(var P=[],x=[],re=0;re<A.length;re++){var ae=g(re,A[re]);ae._tag==="Left"?P.push(ae.left):x.push(ae.right)}return(0,v.separated)(P,x)}};e.partitionMapWithIndex=te;var le=function(g){return function(A){return A.concat(g())}};e.altW=le,e.alt=e.altW;var Ie=function(g){return function(A){return A.filter(function(P,x){return g(x,P)})}};e.filterWithIndex=Ie;var pt=function(g){return function(A){return A.map(function(P,x){return g(A.slice(x))})}};e.extend=pt,e.duplicate=(0,e.extend)(s.identity),e.foldMap=h.foldMap,e.foldMapWithIndex=h.foldMapWithIndex,e.reduce=h.reduce,e.reduceWithIndex=h.reduceWithIndex,e.reduceRight=h.reduceRight,e.reduceRightWithIndex=h.reduceRightWithIndex;var Zt=function(g){var A=(0,e.traverseWithIndex)(g);return function(P){return A(function(x,re){return P(re)})}};e.traverse=Zt;var ge=function(g){return function(A){return ie(A,g.of((0,e.zero)()),function(P,x){return g.ap(g.map(P,function(re){return function(ae){return(0,s.pipe)(re,(0,e.append)(ae))}}),x)})}};e.sequence=ge;var Ue=function(g){return function(A){return(0,e.reduceWithIndex)(g.of((0,e.zero)()),function(P,x,re){return g.ap(g.map(x,function(ae){return function(Lr){return(0,s.pipe)(ae,(0,e.append)(Lr))}}),A(P,re))})}};e.traverseWithIndex=Ue;var fe=function(g){var A=$r(g);return function(P){return function(x){return A(x,P)}}};e.wither=fe;var Oe=function(g){var A=Pn(g);return function(P){return function(x){return A(x,P)}}};e.wilt=Oe;var ot=function(g,A){for(var P=[],x=g;;){var re=A(x);if(l.isSome(re)){var ae=re.value,Lr=ae[0],qa=ae[1];P.push(Lr),x=qa}else break}return P};e.unfold=ot,e.URI="Array",e.getShow=h.getShow;var xe=function(){return{concat:function(g,A){return g.concat(A)}}};e.getSemigroup=xe;var jt=function(){return{concat:(0,e.getSemigroup)().concat,empty:[]}};e.getMonoid=jt,e.getEq=h.getEq,e.getOrd=h.getOrd;var Ft=function(g){var A=ce(g);return{concat:function(P,x){return A(x)(P)}}};e.getUnionSemigroup=Ft;var Bt=function(g){return{concat:(0,e.getUnionSemigroup)(g).concat,empty:[]}};e.getUnionMonoid=Bt;var qt=function(g){var A=vt(g);return{concat:function(P,x){return A(x)(P)}}};e.getIntersectionSemigroup=qt;var Ar=function(g){var A=He(g);return{concat:function(P,x){return A(x)(P)}}};e.getDifferenceMagma=Ar,e.Functor={URI:e.URI,map:$},e.flap=(0,c.flap)(e.Functor),e.Pointed={URI:e.URI,of:e.of},e.FunctorWithIndex={URI:e.URI,map:$,mapWithIndex:At},e.Apply={URI:e.URI,map:$,ap:ve},e.apFirst=(0,a.apFirst)(e.Apply),e.apSecond=(0,a.apSecond)(e.Apply),e.Applicative={URI:e.URI,map:$,ap:ve,of:e.of},e.Chain={URI:e.URI,map:$,ap:ve,chain:e.flatMap},e.chainFirst=(0,u.chainFirst)(e.Chain),e.Monad={URI:e.URI,map:$,ap:ve,of:e.of,chain:e.flatMap},e.Unfoldable={URI:e.URI,unfold:e.unfold},e.Alt={URI:e.URI,map:$,alt:nt},e.Zero={URI:e.URI,zero:e.zero},e.guard=(0,R.guard)(e.Zero,e.Pointed),e.Alternative={URI:e.URI,map:$,ap:ve,of:e.of,alt:nt,zero:e.zero},e.Extend={URI:e.URI,map:$,extend:Lt},e.Compactable={URI:e.URI,compact:e.compact,separate:e.separate},e.Filterable={URI:e.URI,map:$,compact:e.compact,separate:e.separate,filter:Ke,filterMap:_t,partition:Pt,partitionMap:yt},e.FilterableWithIndex={URI:e.URI,map:$,mapWithIndex:At,compact:e.compact,separate:e.separate,filter:Ke,filterMap:_t,partition:Pt,partitionMap:yt,partitionMapWithIndex:mt,partitionWithIndex:Rt,filterMapWithIndex:Ct,filterWithIndex:$t},e.Foldable={URI:e.URI,reduce:ie,foldMap:Re,reduceRight:Be},e.FoldableWithIndex={URI:e.URI,reduce:ie,foldMap:Re,reduceRight:Be,reduceWithIndex:gt,foldMapWithIndex:ut,reduceRightWithIndex:rt},e.Traversable={URI:e.URI,map:$,reduce:ie,foldMap:Re,reduceRight:Be,traverse:M,sequence:e.sequence},e.TraversableWithIndex={URI:e.URI,map:$,mapWithIndex:At,reduce:ie,foldMap:Re,reduceRight:Be,reduceWithIndex:gt,foldMapWithIndex:ut,reduceRightWithIndex:rt,traverse:M,sequence:e.sequence,traverseWithIndex:d};var $r=(0,E.witherDefault)(e.Traversable,e.Compactable),Pn=(0,E.wiltDefault)(e.Traversable,e.Compactable);e.Witherable={URI:e.URI,map:$,compact:e.compact,separate:e.separate,filter:Ke,filterMap:_t,partition:Pt,partitionMap:yt,reduce:ie,foldMap:Re,reduceRight:Be,traverse:M,sequence:e.sequence,wither:$r,wilt:Pn},e.chainRecDepthFirst=h.chainRecDepthFirst,e.ChainRecDepthFirst={URI:e.URI,map:$,ap:ve,chain:e.flatMap,chainRec:p},e.chainRecBreadthFirst=h.chainRecBreadthFirst,e.ChainRecBreadthFirst={URI:e.URI,map:$,ap:ve,chain:e.flatMap,chainRec:z},e.filterE=(0,E.filterE)(e.Witherable),e.FromEither={URI:e.URI,fromEither:e.fromEither},e.fromEitherK=(0,o.fromEitherK)(e.FromEither),e.unsafeInsertAt=f.unsafeInsertAt;var Oa=function(g,A,P){return(0,e.isNonEmpty)(P)?f.unsafeUpdateAt(g,A,P):[]};e.unsafeUpdateAt=Oa;var $a=function(g,A){var P=A.slice();return P.splice(g,1),P};e.unsafeDeleteAt=$a,e.every=h.every;var La=function(g){return function(A){return A.some(g)}};e.some=La,e.exists=e.some,e.intercalate=h.intercalate,e.Do=(0,e.of)(l.emptyRecord),e.bindTo=(0,c.bindTo)(e.Functor);var ja=(0,c.let)(e.Functor);e.let=ja,e.bind=(0,u.bind)(e.Chain),e.apS=(0,a.apS)(e.Apply),e.chain=e.flatMap,e.range=f.range,e.empty=[],e.cons=f.cons,e.snoc=f.snoc,e.prependToAll=e.prependAll,e.array={URI:e.URI,compact:e.compact,separate:e.separate,map:$,ap:ve,of:e.of,chain:e.flatMap,filter:Ke,filterMap:_t,partition:Pt,partitionMap:yt,mapWithIndex:At,partitionMapWithIndex:mt,partitionWithIndex:Rt,filterMapWithIndex:Ct,filterWithIndex:$t,alt:nt,zero:e.zero,unfold:e.unfold,reduce:ie,foldMap:Re,reduceRight:Be,traverse:M,sequence:e.sequence,reduceWithIndex:gt,foldMapWithIndex:ut,reduceRightWithIndex:rt,traverseWithIndex:d,extend:Lt,wither:$r,wilt:Pn}}}),qv=Ve({"node_modules/fp-ts/lib/string.js"(e){Object.defineProperty(e,"__esModule",{value:!0}),e.endsWith=e.startsWith=e.includes=e.split=e.size=e.isEmpty=e.slice=e.trimRight=e.trimLeft=e.trim=e.replace=e.toLowerCase=e.toUpperCase=e.isString=e.Show=e.Ord=e.Monoid=e.empty=e.Semigroup=e.Eq=void 0;var r=Uu();e.Eq={equals:function(N,F){return N===F}},e.Semigroup={concat:function(N,F){return N+F}},e.empty="",e.Monoid={concat:e.Semigroup.concat,empty:e.empty},e.Ord={equals:e.Eq.equals,compare:function(N,F){return N<F?-1:N>F?1:0}},e.Show={show:function(N){return JSON.stringify(N)}};var n=function(N){return typeof N=="string"};e.isString=n;var i=function(N){return N.toUpperCase()};e.toUpperCase=i;var a=function(N){return N.toLowerCase()};e.toLowerCase=a;var u=function(N,F){return function(C){return C.replace(N,F)}};e.replace=u;var o=function(N){return N.trim()};e.trim=o;var s=function(N){return N.trimLeft()};e.trimLeft=s;var c=function(N){return N.trimRight()};e.trimRight=c;var l=function(N,F){return function(C){return C.slice(N,F)}};e.slice=l;var f=function(N){return N.length===0};e.isEmpty=f;var h=function(N){return N.length};e.size=h;var v=function(N){return function(F){var C=F.split(N);return(0,r.isNonEmpty)(C)?C:[F]}};e.split=v;var E=function(N,F){return function(C){return C.includes(N,F)}};e.includes=E;var R=function(N,F){return function(C){return C.startsWith(N,F)}};e.startsWith=R;var L=function(N,F){return function(C){return C.endsWith(N,F)}};e.endsWith=L}}),wc=Ve({"node_modules/json5/dist/index.js"(e,r){(function(n,i){typeof e=="object"&&typeof r<"u"?r.exports=i():typeof define=="function"&&define.amd?define(i):n.JSON5=i()})(e,function(){function n(d,p){return p={exports:{}},d(p,p.exports),p.exports}var i=n(function(d){var p=d.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=p)}),a=n(function(d){var p=d.exports={version:"2.6.5"};typeof __e=="number"&&(__e=p)});a.version;var u=function(d){return typeof d=="object"?d!==null:typeof d=="function"},o=function(d){if(!u(d))throw TypeError(d+" is not an object!");return d},s=function(d){try{return!!d()}catch{return!0}},c=!s(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),l=i.document,f=u(l)&&u(l.createElement),h=function(d){return f?l.createElement(d):{}},v=!c&&!s(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7}),E=function(d,p){if(!u(d))return d;var z,H;if(p&&typeof(z=d.toString)=="function"&&!u(H=z.call(d))||typeof(z=d.valueOf)=="function"&&!u(H=z.call(d))||!p&&typeof(z=d.toString)=="function"&&!u(H=z.call(d)))return H;throw TypeError("Can't convert object to primitive value")},R=Object.defineProperty,L=c?Object.defineProperty:function(p,z,H){if(o(p),z=E(z,!0),o(H),v)try{return R(p,z,H)}catch{}if("get"in H||"set"in H)throw TypeError("Accessors not supported!");return"value"in H&&(p[z]=H.value),p},N={f:L},F=function(d,p){return{enumerable:!(d&1),configurable:!(d&2),writable:!(d&4),value:p}},C=c?function(d,p,z){return N.f(d,p,F(1,z))}:function(d,p,z){return d[p]=z,d},B={}.hasOwnProperty,U=function(d,p){return B.call(d,p)},W=0,_=Math.random(),b=function(d){return"Symbol(".concat(d===void 0?"":d,")_",(++W+_).toString(36))},I=n(function(d){var p="__core-js_shared__",z=i[p]||(i[p]={});(d.exports=function(H,G){return z[H]||(z[H]=G!==void 0?G:{})})("versions",[]).push({version:a.version,mode:"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),V=I("native-function-to-string",Function.toString),q=n(function(d){var p=b("src"),z="toString",H=(""+V).split(z);a.inspectSource=function(G){return V.call(G)},(d.exports=function(G,Q,ue,Ae){var we=typeof ue=="function";we&&(U(ue,"name")||C(ue,"name",Q)),G[Q]!==ue&&(we&&(U(ue,p)||C(ue,p,G[Q]?""+G[Q]:H.join(String(Q)))),G===i?G[Q]=ue:Ae?G[Q]?G[Q]=ue:C(G,Q,ue):(delete G[Q],C(G,Q,ue)))})(Function.prototype,z,function(){return typeof this=="function"&&this[p]||V.call(this)})}),Y=function(d){if(typeof d!="function")throw TypeError(d+" is not a function!");return d},ne=function(d,p,z){if(Y(d),p===void 0)return d;switch(z){case 1:return function(H){return d.call(p,H)};case 2:return function(H,G){return d.call(p,H,G)};case 3:return function(H,G,Q){return d.call(p,H,G,Q)}}return function(){return d.apply(p,arguments)}},ye="prototype",he=function(d,p,z){var H=d&he.F,G=d&he.G,Q=d&he.S,ue=d&he.P,Ae=d&he.B,we=G?i:Q?i[p]||(i[p]={}):(i[p]||{})[ye],it=G?a:a[p]||(a[p]={}),D=it[ye]||(it[ye]={}),S,k,j,te;G&&(z=p);for(S in z)k=!H&&we&&we[S]!==void 0,j=(k?we:z)[S],te=Ae&&k?ne(j,i):ue&&typeof j=="function"?ne(Function.call,j):j,we&&q(we,S,j,d&he.U),it[S]!=j&&C(it,S,te),ue&&D[S]!=j&&(D[S]=j)};i.core=a,he.F=1,he.G=2,he.S=4,he.P=8,he.B=16,he.W=32,he.U=64,he.R=128;var ke=he,lt=Math.ceil,ft=Math.floor,Gt=function(d){return isNaN(d=+d)?0:(d>0?ft:lt)(d)},ar=function(d){if(d==null)throw TypeError("Can't call method on  "+d);return d},ur=function(d){return function(p,z){var H=String(ar(p)),G=Gt(z),Q=H.length,ue,Ae;return G<0||G>=Q?d?"":void 0:(ue=H.charCodeAt(G),ue<55296||ue>56319||G+1===Q||(Ae=H.charCodeAt(G+1))<56320||Ae>57343?d?H.charAt(G):ue:d?H.slice(G,G+2):(ue-55296<<10)+(Ae-56320)+65536)}},or=ur(!1);ke(ke.P,"String",{codePointAt:function(p){return or(this,p)}}),a.String.codePointAt;var Kt=Math.max,Ot=Math.min,sr=function(d,p){return d=Gt(d),d<0?Kt(d+p,0):Ot(d,p)},Jt=String.fromCharCode,Yt=String.fromCodePoint;ke(ke.S+ke.F*(!!Yt&&Yt.length!=1),"String",{fromCodePoint:function(p){for(var z=arguments,H=[],G=arguments.length,Q=0,ue;G>Q;){if(ue=+z[Q++],sr(ue,1114111)!==ue)throw RangeError(ue+" is not a valid code point");H.push(ue<65536?Jt(ue):Jt(((ue-=65536)>>10)+55296,ue%1024+56320))}return H.join("")}}),a.String.fromCodePoint;var cr=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,lr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,fr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Te={Space_Separator:cr,ID_Start:lr,ID_Continue:fr},de={isSpaceSeparator:function(p){return typeof p=="string"&&Te.Space_Separator.test(p)},isIdStartChar:function(p){return typeof p=="string"&&(p>="a"&&p<="z"||p>="A"&&p<="Z"||p==="$"||p==="_"||Te.ID_Start.test(p))},isIdContinueChar:function(p){return typeof p=="string"&&(p>="a"&&p<="z"||p>="A"&&p<="Z"||p>="0"&&p<="9"||p==="$"||p==="_"||p==="\u200C"||p==="\u200D"||Te.ID_Continue.test(p))},isDigit:function(p){return typeof p=="string"&&/[0-9]/.test(p)},isHexDigit:function(p){return typeof p=="string"&&/[0-9A-Fa-f]/.test(p)}},Qe,De,Pe,qe,Me,Fe,Ee,ht,et,bt=function(p,z){Qe=String(p),De="start",Pe=[],qe=0,Me=1,Fe=0,Ee=void 0,ht=void 0,et=void 0;do Ee=vt(),Rt[De]();while(Ee.type!=="eof");return typeof z=="function"?dt({"":et},"",z):et};function dt(d,p,z){var H=d[p];if(H!=null&&typeof H=="object")if(Array.isArray(H))for(var G=0;G<H.length;G++){var Q=String(G),ue=dt(H,Q,z);ue===void 0?delete H[Q]:Object.defineProperty(H,Q,{value:ue,writable:!0,enumerable:!0,configurable:!0})}else for(var Ae in H){var we=dt(H,Ae,z);we===void 0?delete H[Ae]:Object.defineProperty(H,Ae,{value:we,writable:!0,enumerable:!0,configurable:!0})}return z.call(d,p,H)}var se,oe,Dt,tt,ce;function vt(){for(se="default",oe="",Dt=!1,tt=1;;){ce=He();var d=At[se]();if(d)return d}}function He(){if(Qe[qe])return String.fromCodePoint(Qe.codePointAt(qe))}function $(){var d=He();return d===`
`?(Me++,Fe=0):d?Fe+=d.length:Fe++,d&&(qe+=d.length),d}var At={default:function(){switch(ce){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":$();return;case"/":$(),se="comment";return;case void 0:return $(),ve("eof")}if(de.isSpaceSeparator(ce)){$();return}return At[De]()},comment:function(){switch(ce){case"*":$(),se="multiLineComment";return;case"/":$(),se="singleLineComment";return}throw ie($())},multiLineComment:function(){switch(ce){case"*":$(),se="multiLineCommentAsterisk";return;case void 0:throw ie($())}$()},multiLineCommentAsterisk:function(){switch(ce){case"*":$();return;case"/":$(),se="default";return;case void 0:throw ie($())}$(),se="multiLineComment"},singleLineComment:function(){switch(ce){case`
`:case"\r":case"\u2028":case"\u2029":$(),se="default";return;case void 0:return $(),ve("eof")}$()},value:function(){switch(ce){case"{":case"[":return ve("punctuator",$());case"n":return $(),Ke("ull"),ve("null",null);case"t":return $(),Ke("rue"),ve("boolean",!0);case"f":return $(),Ke("alse"),ve("boolean",!1);case"-":case"+":$()==="-"&&(tt=-1),se="sign";return;case".":oe=$(),se="decimalPointLeading";return;case"0":oe=$(),se="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":oe=$(),se="decimalInteger";return;case"I":return $(),Ke("nfinity"),ve("numeric",1/0);case"N":return $(),Ke("aN"),ve("numeric",NaN);case'"':case"'":Dt=$()==='"',oe="",se="string";return}throw ie($())},identifierNameStartEscape:function(){if(ce!=="u")throw ie($());$();var p=yt();switch(p){case"$":case"_":break;default:if(!de.isIdStartChar(p))throw Be();break}oe+=p,se="identifierName"},identifierName:function(){switch(ce){case"$":case"_":case"\u200C":case"\u200D":oe+=$();return;case"\\":$(),se="identifierNameEscape";return}if(de.isIdContinueChar(ce)){oe+=$();return}return ve("identifier",oe)},identifierNameEscape:function(){if(ce!=="u")throw ie($());$();var p=yt();switch(p){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!de.isIdContinueChar(p))throw Be();break}oe+=p,se="identifierName"},sign:function(){switch(ce){case".":oe=$(),se="decimalPointLeading";return;case"0":oe=$(),se="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":oe=$(),se="decimalInteger";return;case"I":return $(),Ke("nfinity"),ve("numeric",tt*(1/0));case"N":return $(),Ke("aN"),ve("numeric",NaN)}throw ie($())},zero:function(){switch(ce){case".":oe+=$(),se="decimalPoint";return;case"e":case"E":oe+=$(),se="decimalExponent";return;case"x":case"X":oe+=$(),se="hexadecimal";return}return ve("numeric",tt*0)},decimalInteger:function(){switch(ce){case".":oe+=$(),se="decimalPoint";return;case"e":case"E":oe+=$(),se="decimalExponent";return}if(de.isDigit(ce)){oe+=$();return}return ve("numeric",tt*Number(oe))},decimalPointLeading:function(){if(de.isDigit(ce)){oe+=$(),se="decimalFraction";return}throw ie($())},decimalPoint:function(){switch(ce){case"e":case"E":oe+=$(),se="decimalExponent";return}if(de.isDigit(ce)){oe+=$(),se="decimalFraction";return}return ve("numeric",tt*Number(oe))},decimalFraction:function(){switch(ce){case"e":case"E":oe+=$(),se="decimalExponent";return}if(de.isDigit(ce)){oe+=$();return}return ve("numeric",tt*Number(oe))},decimalExponent:function(){switch(ce){case"+":case"-":oe+=$(),se="decimalExponentSign";return}if(de.isDigit(ce)){oe+=$(),se="decimalExponentInteger";return}throw ie($())},decimalExponentSign:function(){if(de.isDigit(ce)){oe+=$(),se="decimalExponentInteger";return}throw ie($())},decimalExponentInteger:function(){if(de.isDigit(ce)){oe+=$();return}return ve("numeric",tt*Number(oe))},hexadecimal:function(){if(de.isHexDigit(ce)){oe+=$(),se="hexadecimalInteger";return}throw ie($())},hexadecimalInteger:function(){if(de.isHexDigit(ce)){oe+=$();return}return ve("numeric",tt*Number(oe))},string:function(){switch(ce){case"\\":$(),oe+=_t();return;case'"':if(Dt)return $(),ve("string",oe);oe+=$();return;case"'":if(!Dt)return $(),ve("string",oe);oe+=$();return;case`
`:case"\r":throw ie($());case"\u2028":case"\u2029":gt(ce);break;case void 0:throw ie($())}oe+=$()},start:function(){switch(ce){case"{":case"[":return ve("punctuator",$())}se="value"},beforePropertyName:function(){switch(ce){case"$":case"_":oe=$(),se="identifierName";return;case"\\":$(),se="identifierNameStartEscape";return;case"}":return ve("punctuator",$());case'"':case"'":Dt=$()==='"',se="string";return}if(de.isIdStartChar(ce)){oe+=$(),se="identifierName";return}throw ie($())},afterPropertyName:function(){if(ce===":")return ve("punctuator",$());throw ie($())},beforePropertyValue:function(){se="value"},afterPropertyValue:function(){switch(ce){case",":case"}":return ve("punctuator",$())}throw ie($())},beforeArrayValue:function(){if(ce==="]")return ve("punctuator",$());se="value"},afterArrayValue:function(){switch(ce){case",":case"]":return ve("punctuator",$())}throw ie($())},end:function(){throw ie($())}};function ve(d,p){return{type:d,value:p,line:Me,column:Fe}}function Ke(d){for(var p=0,z=d;p<z.length;p+=1){var H=z[p],G=He();if(G!==H)throw ie($());$()}}function _t(){var d=He();switch(d){case"b":return $(),"\b";case"f":return $(),"\f";case"n":return $(),`
`;case"r":return $(),"\r";case"t":return $(),"	";case"v":return $(),"\v";case"0":if($(),de.isDigit(He()))throw ie($());return"\0";case"x":return $(),Pt();case"u":return $(),yt();case`
`:case"\u2028":case"\u2029":return $(),"";case"\r":return $(),He()===`
`&&$(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw ie($());case void 0:throw ie($())}return $()}function Pt(){var d="",p=He();if(!de.isHexDigit(p)||(d+=$(),p=He(),!de.isHexDigit(p)))throw ie($());return d+=$(),String.fromCodePoint(parseInt(d,16))}function yt(){for(var d="",p=4;p-- >0;){var z=He();if(!de.isHexDigit(z))throw ie($());d+=$()}return String.fromCodePoint(parseInt(d,16))}var Rt={start:function(){if(Ee.type==="eof")throw Re();mt()},beforePropertyName:function(){switch(Ee.type){case"identifier":case"string":ht=Ee.value,De="afterPropertyName";return;case"punctuator":nt();return;case"eof":throw Re()}},afterPropertyName:function(){if(Ee.type==="eof")throw Re();De="beforePropertyValue"},beforePropertyValue:function(){if(Ee.type==="eof")throw Re();mt()},beforeArrayValue:function(){if(Ee.type==="eof")throw Re();if(Ee.type==="punctuator"&&Ee.value==="]"){nt();return}mt()},afterPropertyValue:function(){if(Ee.type==="eof")throw Re();switch(Ee.value){case",":De="beforePropertyName";return;case"}":nt()}},afterArrayValue:function(){if(Ee.type==="eof")throw Re();switch(Ee.value){case",":De="beforeArrayValue";return;case"]":nt()}},end:function(){}};function mt(){var d;switch(Ee.type){case"punctuator":switch(Ee.value){case"{":d={};break;case"[":d=[];break}break;case"null":case"boolean":case"numeric":case"string":d=Ee.value;break}if(et===void 0)et=d;else{var p=Pe[Pe.length-1];Array.isArray(p)?p.push(d):Object.defineProperty(p,ht,{value:d,writable:!0,enumerable:!0,configurable:!0})}if(d!==null&&typeof d=="object")Pe.push(d),Array.isArray(d)?De="beforeArrayValue":De="beforePropertyName";else{var z=Pe[Pe.length-1];z==null?De="end":Array.isArray(z)?De="afterArrayValue":De="afterPropertyValue"}}function nt(){Pe.pop();var d=Pe[Pe.length-1];d==null?De="end":Array.isArray(d)?De="afterArrayValue":De="afterPropertyValue"}function ie(d){return rt(d===void 0?"JSON5: invalid end of input at "+Me+":"+Fe:"JSON5: invalid character '"+ut(d)+"' at "+Me+":"+Fe)}function Re(){return rt("JSON5: invalid end of input at "+Me+":"+Fe)}function Be(){return Fe-=5,rt("JSON5: invalid identifier character at "+Me+":"+Fe)}function gt(d){console.warn("JSON5: '"+ut(d)+"' in strings is not valid ECMAScript; consider escaping")}function ut(d){var p={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(p[d])return p[d];if(d<" "){var z=d.charCodeAt(0).toString(16);return"\\x"+("00"+z).substring(z.length)}return d}function rt(d){var p=new SyntaxError(d);return p.lineNumber=Me,p.columnNumber=Fe,p}var Ct=function(p,z,H){var G=[],Q="",ue,Ae,we="",it;if(z!=null&&typeof z=="object"&&!Array.isArray(z)&&(H=z.space,it=z.quote,z=z.replacer),typeof z=="function")Ae=z;else if(Array.isArray(z)){ue=[];for(var D=0,S=z;D<S.length;D+=1){var k=S[D],j=void 0;typeof k=="string"?j=k:(typeof k=="number"||k instanceof String||k instanceof Number)&&(j=String(k)),j!==void 0&&ue.indexOf(j)<0&&ue.push(j)}}return H instanceof Number?H=Number(H):H instanceof String&&(H=String(H)),typeof H=="number"?H>0&&(H=Math.min(10,Math.floor(H)),we="          ".substr(0,H)):typeof H=="string"&&(we=H.substr(0,10)),te("",{"":p});function te(ge,Ue){var fe=Ue[ge];switch(fe!=null&&(typeof fe.toJSON5=="function"?fe=fe.toJSON5(ge):typeof fe.toJSON=="function"&&(fe=fe.toJSON(ge))),Ae&&(fe=Ae.call(Ue,ge,fe)),fe instanceof Number?fe=Number(fe):fe instanceof String?fe=String(fe):fe instanceof Boolean&&(fe=fe.valueOf()),fe){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof fe=="string")return le(fe);if(typeof fe=="number")return String(fe);if(typeof fe=="object")return Array.isArray(fe)?Zt(fe):Ie(fe)}function le(ge){for(var Ue={"'":.1,'"':.2},fe={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},Oe="",ot=0;ot<ge.length;ot++){var xe=ge[ot];switch(xe){case"'":case'"':Ue[xe]++,Oe+=xe;continue;case"\0":if(de.isDigit(ge[ot+1])){Oe+="\\x00";continue}}if(fe[xe]){Oe+=fe[xe];continue}if(xe<" "){var jt=xe.charCodeAt(0).toString(16);Oe+="\\x"+("00"+jt).substring(jt.length);continue}Oe+=xe}var Ft=it||Object.keys(Ue).reduce(function(Bt,qt){return Ue[Bt]<Ue[qt]?Bt:qt});return Oe=Oe.replace(new RegExp(Ft,"g"),fe[Ft]),Ft+Oe+Ft}function Ie(ge){if(G.indexOf(ge)>=0)throw TypeError("Converting circular structure to JSON5");G.push(ge);var Ue=Q;Q=Q+we;for(var fe=ue||Object.keys(ge),Oe=[],ot=0,xe=fe;ot<xe.length;ot+=1){var jt=xe[ot],Ft=te(jt,ge);if(Ft!==void 0){var Bt=pt(jt)+":";we!==""&&(Bt+=" "),Bt+=Ft,Oe.push(Bt)}}var qt;if(Oe.length===0)qt="{}";else{var Ar;if(we==="")Ar=Oe.join(","),qt="{"+Ar+"}";else{var $r=`,
`+Q;Ar=Oe.join($r),qt=`{
`+Q+Ar+`,
`+Ue+"}"}}return G.pop(),Q=Ue,qt}function pt(ge){if(ge.length===0)return le(ge);var Ue=String.fromCodePoint(ge.codePointAt(0));if(!de.isIdStartChar(Ue))return le(ge);for(var fe=Ue.length;fe<ge.length;fe++)if(!de.isIdContinueChar(String.fromCodePoint(ge.codePointAt(fe))))return le(ge);return ge}function Zt(ge){if(G.indexOf(ge)>=0)throw TypeError("Converting circular structure to JSON5");G.push(ge);var Ue=Q;Q=Q+we;for(var fe=[],Oe=0;Oe<ge.length;Oe++){var ot=te(String(Oe),ge);fe.push(ot!==void 0?ot:"null")}var xe;if(fe.length===0)xe="[]";else if(we===""){var jt=fe.join(",");xe="["+jt+"]"}else{var Ft=`,
`+Q,Bt=fe.join(Ft);xe=`[
`+Q+Bt+`,
`+Ue+"]"}return G.pop(),Q=Ue,xe}},$t={parse:bt,stringify:Ct},Lt=$t,M=Lt;return M})}}),Uv={};Z(Uv,{afterMatch:()=>fv,between:()=>qC,betweenChomp:()=>sv,countCharsFromStart:()=>HC,htmlEntities:()=>KC,indexOfCharCode:()=>Xn,lineSpan:()=>xC,omitChars:()=>Qn,random:()=>Ms,splitByLength:()=>cv,splitRanges:()=>VC,startsEnds:()=>GC,untilMatch:()=>lv,unwrap:()=>UC});var Ce=(e,r="",n="?")=>{if(e===null)return[!1,`Parameter ${n} is null`];if(typeof e>"u")return[!1,`Parameter ${n} is undefined`];if(Number.isNaN(e))return[!1,`Parameter '${n}' is NaN`];if(typeof e!="number")return[!1,`Parameter '${n}' is not a number (${JSON.stringify(e)})`];switch(r){case"positive":{if(e<0)return[!1,`Parameter '${n}' must be at least zero (${e})`];break}case"negative":{if(e>0)return[!1,`Parameter '${n}' must be zero or lower (${e})`];break}case"aboveZero":{if(e<=0)return[!1,`Parameter '${n}' must be above zero (${e})`];break}case"belowZero":{if(e>=0)return[!1,`Parameter '${n}' must be below zero (${e})`];break}case"percentage":{if(e>1||e<0)return[!1,`Parameter '${n}' must be in percentage range (0 to 1). (${e})`];break}case"nonZero":{if(e===0)return[!1,`Parameter '${n}' must non-zero. (${e})`];break}case"bipolar":{if(e>1||e<-1)return[!1,`Parameter '${n}' must be in bipolar percentage range (-1 to 1). (${e})`];break}}return[!0]},ee=(e,r="",n="?")=>{be(Ce(e,r,n))},be=e=>{if(e[0])return!1;throw new Error(e[1])},xv=(e,r="?")=>Ce(e,"percentage",r),Vv=(e,r="?")=>{be(xv(e,r))},_r=(e,r="",n="?")=>{const i=Ce(e,r,n);return i[0]?Number.isInteger(e)?[!0]:[!1,`Parameter ${n} is not an integer`]:i},Le=(e,r="",n="?")=>{be(_r(e,r,n))},Hv=(e,r="",n=Number.NaN)=>{if(e===void 0||e===null)return n;try{const i=Number.parseInt(e);return _r(i,r,"parsed")[0]?i:n}catch{return n}return Number.parseInt(e)},Gv=(e,r="?")=>Array.isArray(e)?[!0]:[!1,`Parameter '${r}' is expected to be an array'`],Kv=(e,r="?")=>{be(Gv(e,r))},Jv={};Z(Jv,{arrayElement:()=>Ta,arrayIndex:()=>As,defaultRandom:()=>Xe,float:()=>iv,floatSource:()=>Ss,gaussian:()=>OC,gaussianSource:()=>rv,hue:()=>Oo,integer:()=>nv,integerSource:()=>Fs,integerUniqueGen:()=>ov,minutesMs:()=>LC,minutesMsSource:()=>av,secondsMs:()=>jC,secondsMsSource:()=>uv,shortGuid:()=>$C,string:()=>Ms,weighted:()=>kC,weightedInteger:()=>TC,weightedIntegerSource:()=>tv,weightedSource:()=>ev});var Ht={};Z(Ht,{additionalValues:()=>ju,average:()=>us,averageWeighted:()=>as,chunks:()=>_C,compareValues:()=>Q0,compareValuesEqual:()=>zC,contains:()=>WC,containsDuplicateValues:()=>NC,dotProduct:()=>fD,ensureLength:()=>AC,filterAB:()=>BC,filterBetween:()=>Y0,flatten:()=>bC,groupBy:()=>MC,guardArray:()=>_n,guardIndex:()=>Yi,interleave:()=>DC,intersection:()=>EC,max:()=>Ed,maxFast:()=>Dd,maxIndex:()=>hD,mergeByKey:()=>PC,min:()=>pd,minFast:()=>os,minIndex:()=>wd,minMaxAvg:()=>Ma,randomElement:()=>Ta,randomIndex:()=>As,randomPluck:()=>CC,reducePairwise:()=>RC,remove:()=>SC,sample:()=>IC,shuffle:()=>Zi,sortByNumericProperty:()=>Z0,total:()=>bd,totalFast:()=>Ad,unique:()=>X0,until:()=>FC,validNumbers:()=>En,valuesEqual:()=>Ds,weight:()=>gd,without:()=>Cs,zip:()=>J0});var Yv={};Z(Yv,{Debug:()=>Ec,IterableAsync:()=>xu,comparerInverse:()=>wC,defaultComparer:()=>vi,defaultKeyer:()=>yi,getFieldByPath:()=>bs,getFieldPaths:()=>x0,ifNaN:()=>Lu,isEqualDefault:()=>We,isEqualValueDefault:()=>H0,isPowerOfTwo:()=>U0,jsComparer:()=>K0,mapObject:()=>mC,numericComparer:()=>G0,relativeDifference:()=>gC,roundUpToMultiple:()=>V0,runningiOS:()=>pC,toStringDefault:()=>wr});var xu={};Z(xu,{chunks:()=>Zv,concat:()=>Xv,dropWhile:()=>Qv,equals:()=>ey,every:()=>ty,fill:()=>ry,filter:()=>ny,find:()=>iy,flatten:()=>ay,forEach:()=>uy,map:()=>oy,max:()=>sy,min:()=>cy,range:()=>ly,reduce:()=>fy,slice:()=>hy,some:()=>dy,takeWhile:()=>vy,toArray:()=>yy,unique:()=>my,zip:()=>gy});async function*Zv(e,r){let n=[];for await(const i of e)n.push(i),n.length===r&&(yield n,n=[]);n.length>0&&(yield n)}async function*Xv(...e){for await(const r of e)yield*r}async function*Qv(e,r){for await(const n of e)if(!r(n)){yield n;break}yield*e}async function ey(e,r,n){const i=e[Symbol.asyncIterator](),a=r[Symbol.asyncIterator]();for(;;){const u=await i.next(),o=await a.next();if(n!==void 0){if(!n(u.value,o.value))return!1}else if(u.value!==o.value)return!1;if(u.done??o.done)return u.done&&o.done}}async function ty(e,r){let n=!0;for await(const i of e)n=n&&r(i);return n}async function*ry(e,r){for await(const n of e)yield r}async function*ny(e,r){for await(const n of e)!r(n)||(yield n)}async function iy(e,r){for await(const n of e)if(r(n))return n}async function*ay(e){for await(const r of e)Symbol.asyncIterator in r?yield*r:yield r}async function uy(e,r){for await(const n of e)r(n)}async function*oy(e,r){for await(const n of e)yield r(n)}async function sy(e,r=(n,i)=>n>i){let n;for await(const i of e){if(!n){n=i;continue}n=r(n,i)?n:i}return n}async function cy(e,r=(n,i)=>n>i){let n;for await(const i of e){if(!n){n=i;continue}n=r(n,i)?i:n}return n}async function*ly(e,r){for(let n=0;n<r;n++)yield e++}async function fy(e,r,n){for await(const i of e)n=r(n,i);return n}async function*hy(e,r=0,n=Number.POSITIVE_INFINITY){const i=e[Symbol.asyncIterator]();for(;r>0;r--,n--)await i.next();for await(const a of e)if(n-- >0)yield a;else break}async function dy(e,r){for await(const n of e)if(r(n))return!0;return!1}async function*vy(e,r){for await(const n of e){if(!r(n))return;yield n}}async function yy(e,r=Number.POSITIVE_INFINITY){const n=[],i=e[Symbol.asyncIterator]();for(;n.length<r;){const a=await i.next();if(a.done)break;n.push(a.value)}return n}async function*my(e,r=n=>n){const n=[];for await(const i of e){const a=r(i);n.includes(a)||(n.push(a),yield i)}}async function*gy(...e){const r=e.map(n=>n[Symbol.asyncIterator]());for(;;){const n=await Promise.all(r.map(i=>i.next()));if(n.some(i=>i.done))return;yield n.map(i=>i.value)}}var Ec={};Z(Ec,{getErrorMessage:()=>q0,logSet:()=>j0,logger:()=>an,resolveLogOption:()=>Es});var bc={};Z(bc,{ExpiringMap:()=>Bc,MapOfMutableImpl:()=>ka,MapOfSimpleMutable:()=>Dc,addKeepingExisting:()=>Sc,addObject:()=>cu,deleteByValue:()=>Ay,expiringMap:()=>Ny,filter:()=>_c,find:()=>Rc,firstEntryByIterablePredicate:()=>Cy,firstEntryByIterableValue:()=>Fy,fromIterable:()=>Pc,fromObject:()=>My,getClosestIntegerKey:()=>by,getOrGenerate:()=>Cc,getOrGenerateSync:()=>Fc,hasAnyValue:()=>Ic,hasKeyValue:()=>Dy,immutable:()=>Ur,mapOfSimpleMutable:()=>Ac,mapToArray:()=>Ry,mapToObjTransform:()=>Iy,mergeByKey:()=>By,mutable:()=>hC,ofArrayMutable:()=>L0,ofCircularMutable:()=>$0,ofSetMutable:()=>dC,sortByValue:()=>Sy,sortByValueProperty:()=>Mc,toArray:()=>su,toObject:()=>Py,transformMap:()=>_y,zipKeyValue:()=>Vu});var py={};Z(py,{SimpleEventEmitter:()=>rr});var wy=(e,r,n=We)=>{for(const i of e.entries()){const a=i[1];for(const u of a)if(n(u,r))return i}},Ey=class{map;groupBy;valueEq;constructor(e=yi,r=We,n=[]){this.groupBy=e,this.valueEq=r,this.map=new Map(n)}*entriesFlat(){for(const e of this.map.keys())for(const r of this.map.get(e))yield[e,r]}*entries(){for(const[e,r]of this.map.entries())yield[e,[...r]]}firstKeyByValue(e,r=We){const n=wy(this,e,r);if(n)return n[0]}*get(e){const r=this.map.get(e);!r||(yield*r.values())}*keys(){yield*this.map.keys()}*valuesFlat(){for(const e of this.map)yield*e[1]}*keysAndCounts(){for(const e of this.map)yield[e[0],e[1].length]}has(e){return this.map.has(e)}hasKeyValue(e,r){const n=this.map.get(e);if(!n)return!1;for(const i of n)if(this.valueEq(i,r))return!0;return!1}debugString(){let e="";return Array.from(this.map.keys()).every(n=>{const i=this.map.get(n);i!==void 0&&(e+=n+` (${i.length}) = ${JSON.stringify(i)}\r
`)}),e}get isEmpty(){return this.map.size===0}count(e){const r=this.map.get(e);return r?r.length:0}},Dc=class extends Ey{addKeyedValues(e,...r){const n=this.map.get(e);n===void 0?this.map.set(e,r):this.map.set(e,[...n,...r])}addValue(...e){for(const r of e){const n=this.groupBy(r);this.addKeyedValues(n,r)}}deleteKeyValue(e,r){const n=this.map.get(e);if(n===void 0)return!1;const i=n.filter(a=>!this.valueEq(a,r));return this.map.set(e,i),i.length<n.length}deleteByValue(e){let r=!1;for(const n of[...this.map.entries()])for(const i of n[1])this.valueEq(i,e)&&(r=!0,this.deleteKeyValue(n[0],e));return r}delete(e){const r=this.map.get(e);return!r||r.length===0?!1:(this.map.delete(e),!0)}clear(){this.map.clear()}},Ac=(e=yi,r=We)=>new Dc(e,r),rr=class{#e=Ac();fireEvent(e,r){const n=this.#e.get(e);for(const i of n)i(r,this)}addEventListener(e,r){this.#e.addKeyedValues(e,r)}removeEventListener(e,r){this.#e.deleteKeyValue(e,r)}clearEventListeners(){this.#e.clear()}},by=(e,r)=>{if(r=Math.round(r),e.has(r))return r;{let n=1;for(;n<1e3;){if(e.has(r-n))return r-n;if(e.has(r+n))return r+n;n++}throw new Error(`Could not find target ${r}`)}},Dy=(e,r,n,i)=>e.has(r)?Array.from(e.values()).some(u=>i(u,n)):!1,Ay=(e,r,n=We)=>{for(const i of Object.entries(e))n(i[1],r)&&e.delete(i[0])},Cc=(e,r)=>async(n,i)=>{let a=e.get(n);if(a!==void 0)return Promise.resolve(a);if(a=await r(n,i),a===void 0)throw new Error("fn returned undefined");return e.set(n,a),a},Cy=(e,r)=>{for(const n of e.entries())if(r(n[1],n[0]))return n},Fy=(e,r,n=We)=>{for(const i of e.entries())if(n(i[1],r))return i},Fc=(e,r)=>(n,i)=>{let a=e.get(n);return a!==void 0||(a=r(n,i),e.set(n,a)),a},Sc=(e,r,...n)=>{const i=e===void 0?new Map:new Map(e);return n.forEach(a=>{const u=r(a);i.has(u)||i.set(u,a)}),i},Sy=(e,r)=>{const n=r??vi;[...e.entries()].sort((i,a)=>n(i[1],a[1]))},Mc=(e,r,n)=>{const i=typeof n>"u"?vi:n;return[...e.entries()].sort((a,u)=>{const o=a[1],s=u[1];return i(o[r],s[r])})},Ic=(e,r,n)=>Array.from(e.entries()).some(a=>n(a[1],r));function*_c(e,r){for(const n of e.values())r(n)&&(yield n)}var su=e=>Array.from(e.values()),Pc=(e,r=wr,n=!1)=>{const i=new Map;for(const a of e){const u=r(a);if(i.has(u)&&!n)throw new Error(`id ${u} is already used and new data will overwrite it. `);i.set(u,a)}return i},My=e=>{const r=new Map;return Array.isArray(e)?e.forEach(n=>cu(r,n)):cu(r,e),r},cu=(e,r)=>{const n=Object.entries(r);for(const[i,a]of n)e.set(i,a)},Rc=(e,r)=>Array.from(e.values()).find(r),Iy=(e,r)=>Array.from(e).reduce((n,[i,a])=>{const u=r(a);return n[i]=u,n},{}),Vu=(e,r)=>{if(e.length!==r.length)throw new Error("Keys and values arrays should be same length");return Object.fromEntries(e.map((n,i)=>[n,r[i]]))},_y=(e,r)=>new Map(Array.from(e,n=>[n[0],r(n[1],n[0])])),Py=e=>Array.from(e).reduce((r,[n,i])=>(r[n]=i,r),{}),Ry=(e,r)=>Array.from(e.entries()).map(n=>r(n[0],n[1])),By=(e,...r)=>{const n=new Map;for(const i of r)for(const[a,u]of i){let o=n.get(a);o?o=e(o,u):o=u,n.set(a,o)}return n},Ny=(e={})=>new Bc(e),Bc=class extends rr{capacity;store;keyCount;evictPolicy;autoDeleteElapsedMs;autoDeletePolicy;constructor(e={}){super();if(this.capacity=e.capacity??-1,Le(this.capacity,"nonZero","capacity"),this.store=new Map,this.keyCount=0,e.evictPolicy&&this.capacity<=0)throw new Error("evictPolicy is set, but no capacity limit is set");this.evictPolicy=e.evictPolicy??"none",this.autoDeleteElapsedMs=e.autoDeleteElapsedMs??-1,this.autoDeletePolicy=e.autoDeletePolicy??"none",this.autoDeleteElapsedMs>0&&setInterval(()=>this.#e(),Math.max(1e3,this.autoDeleteElapsedMs*2))}get keyLength(){return this.keyCount}*entries(){for(const e of this.store.entries())yield[e[0],e[1].value]}*values(){for(const e of this.store.values())yield e.value}*keys(){yield*this.store.keys()}elapsedSet(e){const r=this.store.get(e);return r&&Date.now()-r.lastSet}elapsedGet(e){const r=this.store.get(e);return r&&Date.now()-r.lastGet}has(e){return this.store.has(e)}get(e){const r=this.store.get(e);if(r)return r.value}delete(e){const r=this.store.get(e);if(!r)return!1;const n=this.store.delete(e);return this.keyCount=this.keyCount-1,this.fireEvent("removed",{key:e,value:r.value}),n}touch(e){const r=this.store.get(e);return r?(this.store.set(e,{...r,lastSet:Date.now(),lastGet:Date.now()}),!0):!1}findEvicteeKey(){if(this.evictPolicy==="none")return null;let e="";if(this.evictPolicy==="oldestGet")e="lastGet";else if(this.evictPolicy==="oldestSet")e="lastSet";else throw Error(`Unknown eviction policy ${this.evictPolicy}`);return Mc(this.store,e)[0][0]}#e(){this.autoDeletePolicy!=="none"&&this.deleteWithElapsed(this.autoDeleteElapsedMs,this.autoDeletePolicy)}deleteWithElapsed(e,r){const n=[...this.store.entries()],i=[],a=Date.now();for(const u of n){const o=a-u[1].lastGet,s=a-u[1].lastSet;(r==="get"?o:r==="set"?s:Math.max(o,s))>=e&&i.push([u[0],u[1].value])}for(const u of i){this.store.delete(u[0]),this.keyCount=this.keyCount-1;const o={key:u[0],value:u[1]};this.fireEvent("expired",o),this.fireEvent("removed",o)}return i}set(e,r){const n=this.store.get(e);if(n){this.store.set(e,{...n,lastSet:performance.now()});return}if(this.keyCount===this.capacity&&this.capacity>0){const i=this.findEvicteeKey();if(!i)throw new Error(`ExpiringMap full (capacity: ${this.capacity})`);const a=this.store.get(i);if(this.store.delete(i),this.keyCount=this.keyCount-1,a){const u={key:i,value:a.value};this.fireEvent("expired",u),this.fireEvent("removed",u)}}this.keyCount++,this.store.set(e,{lastGet:0,lastSet:Date.now(),value:r}),this.fireEvent("newKey",{key:e,value:r})}},zy={};Z(zy,{Arrays:()=>Ht,Maps:()=>bc,QueueImmutable:()=>dc,QueueMutable:()=>Ir,Queues:()=>sc,SetStringImmutable:()=>Oh,SetStringMutable:()=>Th,Sets:()=>Wh,StackImmutable:()=>Li,StackMutable:()=>Hu,Stacks:()=>k0,Trees:()=>Wc,circularArray:()=>zc});var Wy=class Nc extends Array{#e;#t;constructor(r=0){super();Le(r,"positive","capacity"),this.#e=r,this.#t=0}add(r){const n=Nc.from(this);return n[this.#t]=r,n.#e=this.#e,this.#e>0?n.#t=this.#t+1===this.#e?0:this.#t+1:n.#t=this.#t+1,n}get pointer(){return this.#t}get isFull(){return this.#e===0?!1:this.length===this.#e}},zc=e=>new Wy(e),Wc={};Z(Wc,{TreeNodeMutable:()=>P0,breadthFirst:()=>sC,couldAddChild:()=>$u,depthFirst:()=>oC,directChildren:()=>In,getByPath:()=>N0,getLengthChildren:()=>uC,hasAnyChild:()=>Ji,hasAnyParent:()=>W0,hasChild:()=>Wa,hasParent:()=>ws,isTreeNode:()=>ps,prettyPrint:()=>B0,traceByPath:()=>z0,treeNodeMutable:()=>aC});var ky=(e,r,n)=>{const i=r.length+n.length,a=e.discardPolicy??"additions",u=e.capacity??i,o=i-u;switch(e.debug&&console.log(`Stack.push: stackLen: ${r.length} potentialLen: ${i} toRemove: ${o} policy: ${a}`),a){case"additions":return e.debug&&console.log(`Stack.push:DiscardAdditions: stackLen: ${r.length} slice: ${i-u} toAddLen: ${n.length}`),r.length===e.capacity?r:[...r,...n.slice(0,n.length-o)];case"newer":return o>=r.length?n.slice(Math.max(0,n.length-u),Math.min(n.length,u)+1):(e.debug&&console.log(` from orig: ${r.slice(0,r.length-o)}`),[...r.slice(0,r.length-o),...n.slice(0,Math.min(n.length,u-o+1))]);case"older":return[...r,...n].slice(o);default:throw new Error(`Unknown discard policy ${a}`)}},kc=(e,r,...n)=>{const i=r.length+n.length;return e.capacity&&i>e.capacity?ky(e,r,n):[...r,...n]},Tc=(e,r)=>{if(r.length===0)throw new Error("Stack is empty");return r.slice(0,r.length-1)},lu=(e,r)=>r[r.length-1],Oc=(e,r)=>r.length===0,$c=(e,r)=>e.capacity?r.length>=e.capacity:!1,Hu=class{opts;data;constructor(e={},r=[]){this.opts=e,this.data=r}push(...e){return this.data=kc(this.opts,this.data,...e),this.data.length}forEach(e){this.data.forEach(e)}forEachFromTop(e){[...this.data].reverse().forEach(e)}pop(){const e=lu(this.opts,this.data);return this.data=Tc(this.opts,this.data),e}get isEmpty(){return Oc(this.opts,this.data)}get isFull(){return $c(this.opts,this.data)}get peek(){return lu(this.opts,this.data)}get length(){return this.data.length}},Ty=(e={},...r)=>new Hu({...e},[...r]),Lc={};Z(Lc,{Direction:()=>I0,QuadTreeNode:()=>iC});var Oy={};Z(Oy,{Arcs:()=>Gu,Beziers:()=>ai,Circles:()=>St,Compound:()=>hs,Convolve2d:()=>b0,Ellipses:()=>Bo,Grids:()=>rs,Layouts:()=>w0,Lines:()=>Je,Paths:()=>sn,Points:()=>O,Polar:()=>Ge,QuadTree:()=>Lc,Rects:()=>me,Scaler:()=>Ki,Shapes:()=>Ba,Spheres:()=>$A,SurfacePoints:()=>S0,Triangles:()=>Hr,Vectors:()=>Hi,Waypoints:()=>g0,degreeToRadian:()=>Mr,radianToDegree:()=>Na,radiansFromAxisX:()=>M0});var Gu={};Z(Gu,{bbox:()=>u0,distanceCenter:()=>rA,fromDegrees:()=>eA,guard:()=>ls,interpolate:()=>fs,isArc:()=>n0,isEqual:()=>nA,isPositioned:()=>yr,length:()=>a0,point:()=>Vi,toLine:()=>i0,toPath:()=>tA,toSvg:()=>o0});var O={};Z(O,{Empty:()=>bn,Placeholder:()=>Vd,abs:()=>BD,angle:()=>vn,apply:()=>OD,bbox:()=>ND,centroid:()=>Gd,clamp:()=>XD,clampMagnitude:()=>r0,compare:()=>xD,compareByX:()=>e0,convexHull:()=>UD,distance:()=>Wt,distanceToCenter:()=>RD,distanceToExterior:()=>PD,divide:()=>Qd,divideFn:()=>jD,dotProduct:()=>xd,findMinimum:()=>Vr,from:()=>TD,fromNumbers:()=>Jd,getPointParam:()=>st,guard:()=>pe,guardNonZeroPoint:()=>Hd,interpolate:()=>kD,invert:()=>YD,isEmpty:()=>Fi,isEqual:()=>Ln,isNaN:()=>MD,isNull:()=>SD,isPlaceholder:()=>Si,isPoint:()=>Se,isPoint3d:()=>Dn,leftmost:()=>ID,multiply:()=>Ra,multiplyScalar:()=>LD,normalise:()=>t0,normaliseByRect:()=>GD,pipeline:()=>Yd,pipelineApply:()=>$D,progressBetween:()=>QD,project:()=>Tu,quantiseEvery:()=>qD,random:()=>KD,reduce:()=>Zd,relation:()=>Ou,rightmost:()=>_D,rotate:()=>Zr,rotatePointArray:()=>VD,subtract:()=>Or,sum:()=>Xd,toArray:()=>zD,toIntegerValues:()=>ZD,toString:()=>Kd,withinRange:()=>WD,wrap:()=>JD});var Je={};Z(Je,{Empty:()=>dD,Placeholder:()=>vD,angleRadian:()=>gD,apply:()=>Sd,asPoints:()=>AD,bbox:()=>qd,distance:()=>Td,divide:()=>Id,extendFromA:()=>bD,fromFlatArray:()=>CD,fromNumbers:()=>xi,fromPoints:()=>Pa,fromPointsToPath:()=>FD,getPointsParam:()=>_a,guard:()=>Ia,interpolate:()=>Rr,isEmpty:()=>yD,isEqual:()=>Fd,isLine:()=>Tr,isPlaceholder:()=>mD,isPolyLine:()=>Cd,joinPointsToLines:()=>jd,length:()=>mr,midpoint:()=>Bd,multiply:()=>Md,nearest:()=>ss,normaliseByRect:()=>pD,parallel:()=>kd,perpendicularPoint:()=>Wd,pointAtX:()=>ED,pointsOf:()=>DD,rotate:()=>Ud,scaleFromMidpoint:()=>wD,slope:()=>cs,subtract:()=>Pd,sum:()=>_d,toFlatArray:()=>$d,toPath:()=>dr,toString:()=>Od,toSvgString:()=>Ld,withinRange:()=>Rd});var Ku={};Z(Ku,{crossfade:()=>aD,fromCubicBezier:()=>iD,functions:()=>is,gaussian:()=>md,get:()=>Sa,getEasings:()=>uD,mix:()=>yd,tick:()=>nD,time:()=>rD,weightedAverage:()=>lD});var $y={};Z($y,{Bipolar:()=>Kh,Correlate:()=>od,FrequencyMutable:()=>nd,IntervalTracker:()=>ad,Normalise:()=>jc,NumberTracker:()=>so,PointTracker:()=>ns,Pool:()=>cd,TrackedPointMap:()=>ed,TrackedValueMap:()=>ol,TrackerBase:()=>oo,clamp:()=>zt,clampIndex:()=>fu,flip:()=>Ci,frequencyMutable:()=>Kb,interpolate:()=>Fa,interpolateAngle:()=>dd,intervalTracker:()=>Zb,movingAverage:()=>Yb,movingAverageLight:()=>id,movingAverageTimed:()=>Jb,numberTracker:()=>$n,piPi:()=>Wu,pointTracker:()=>Ub,pointsTracker:()=>td,scale:()=>er,scaleClamped:()=>Ly,scalePercent:()=>qy,scalePercentages:()=>jy,scaler:()=>Ju,scalerPercent:()=>qc,wrap:()=>Ui,wrapInteger:()=>ud,wrapRange:()=>Xb});var jc={};Z(jc,{array:()=>xy,stream:()=>Uy});var zt=(e,r=0,n=1)=>{if(Number.isNaN(e))throw new Error("v parameter is NaN");if(Number.isNaN(r))throw new Error("min parameter is NaN");if(Number.isNaN(n))throw new Error("max parameter is NaN");return e<r?r:e>n?n:e},fu=(e,r)=>{if(!Number.isInteger(e))throw new TypeError(`v parameter must be an integer (${e})`);const n=Array.isArray(r)?r.length:r;if(!Number.isInteger(n))throw new TypeError(`length parameter must be an integer (${n}, ${typeof n})`);return e=Math.round(e),e<0?0:e>=n?n-1:e},er=(e,r,n,i,a,u)=>Ju(r,n,i,a,u)(e),Ju=(e,r,n,i,a)=>{const u=i??1,o=n??0;return s=>{if(e===r)return u;let c=(s-e)/(r-e);return a!==void 0&&(c=a(c)),c*(u-o)+o}},Ly=(e,r,n,i,a,u)=>{if(a===void 0&&(a=1),i===void 0&&(i=0),r===n)return a;const o=er(e,r,n,i,a,u);return zt(o,i,a)},jy=(e,r,n=1)=>(be(Ce(e,"percentage","v")),be(Ce(r,"percentage","outMin")),be(Ce(n,"percentage","outMax")),er(e,0,1,r,n)),qy=(e,r,n)=>qc(r,n)(e),qc=(e,r)=>n=>(be(Ce(n,"percentage","v")),er(n,0,1,e,r)),Uy=(e,r)=>{let n=e??Number.MAX_SAFE_INTEGER,i=r??Number.MIN_SAFE_INTEGER;return ee(e),ee(r),a=>(ee(a),n=Math.min(n,a),i=Math.max(i,a),er(a,n,i))},xy=(e,r,n)=>{if(!Array.isArray(e))throw new Error("values param should be an array");const i=Ma(e),a=r??i.min,u=n??i.max;return e.map(o=>zt(er(o,a,u)))},Uc={};Z(Uc,{byValueString:()=>xc,getSorter:()=>Vc,minMaxAvg:()=>Ky,sortByKey:()=>hu,sortByValueNumber:()=>du,sortByValueString:()=>Gy});var Yu=en(jv(),1),Zu=en(It(),1),_i=en(qv(),1),Is=en(yc(),1),yn=en(ni(),1),Vy=(e=!1)=>(0,Zu.pipe)(e?(0,yn.reverse)(_i.Ord):_i.Ord,(0,yn.contramap)(r=>r[0])),xc=(e=!1)=>(0,Zu.pipe)(e?(0,yn.reverse)(_i.Ord):_i.Ord,(0,yn.contramap)(r=>r[1])),Hy=(e=!1)=>(0,Zu.pipe)(e?(0,yn.reverse)(Is.Ord):Is.Ord,(0,yn.contramap)(r=>r[1])),hu=(e=!1)=>(0,Yu.sort)(Vy(e)),Gy=(e=!1)=>(0,Yu.sort)(xc(e)),du=(e=!1)=>(0,Yu.sort)(Hy(e)),Vc=e=>{switch(e){case"value":return du(!1);case"valueReverse":return du(!0);case"key":return hu(!1);case"keyReverse":return hu(!0);default:throw new Error(`Unknown sorting value '${e}'. Expecting: value, valueReverse, key or keyReverse`)}},Ky=(e,r)=>{const n=r??(a=>a[1]),i=e.map(a=>n(a));return Ma(i)},Jy={};Z(Jy,{applyToValues:()=>zg,average:()=>Bg,averageWeighted:()=>Ng,filter:()=>$g,isApproximately:()=>Lg,isValid:()=>Ll,linearSpace:()=>jl,max:()=>kg,min:()=>Wg,quantiseEvery:()=>bu,round:()=>Do,total:()=>Tg,tracker:()=>Og});var Yy={};Z(Yy,{Elapsed:()=>On,StateMachine:()=>eo,TaskQueue:()=>dm,continuously:()=>ro,debounce:()=>om,delay:()=>cm,delayLoop:()=>io,everyNth:()=>fm,forEach:()=>al,forEachAsync:()=>ul,frequencyTimer:()=>Er,frequencyTimerSource:()=>Jc,hasElapsedMs:()=>Kc,interval:()=>Xu,intervalToMs:()=>Et,isInterval:()=>Hc,msElapsedTimer:()=>nr,relativeTimer:()=>ii,repeat:()=>uo,repeatReduce:()=>vm,retry:()=>ao,runOnce:()=>hm,sleep:()=>Pr,throttle:()=>sm,ticksElapsedTimer:()=>Qu,timeout:()=>nl,updateOutdated:()=>am,waitFor:()=>no});var On={};Z(On,{infinity:()=>Xy,once:()=>Zy,progress:()=>Qy,since:()=>Yc,toString:()=>Zc});var Pr=e=>{const r=Et(e),n=e.signal,i=e.value;return ee(r,"positive","timeoutMs"),r===0?new Promise(a=>requestAnimationFrame(u=>{a(i)})):new Promise((a,u)=>{n&&n.addEventListener("abort",()=>{u(n.reason)}),setTimeout(()=>{if(n?.aborted){u(n.reason);return}a(i)},r)})};function Et(e,r){if(Hc(e)){if(typeof e=="number")return e;let n=e.millis??0;return n+=(e.hours??0)*60*60*1e3,n+=(e.mins??0)*60*1e3,n+=(e.secs??0)*1e3,n}else{if(typeof r<"u")return r;throw new Error(`Not a valid interval: ${e}`)}}function Hc(e){if(e===void 0||e===null)return!1;if(typeof e=="number")return!(Number.isNaN(e)||!Number.isFinite(e));if(typeof e!="object")return!1;const r="millis"in e,n="secs"in e,i="mins"in e,a="hours"in e;return r&&!Ce(e.millis)[0]||n&&!Ce(e.secs)[0]||i&&!Ce(e.mins)[0]||a&&!Ce(e.hours)[0]?!1:!!(r||n||a||i)}var Xu=async function*(e,r={}){let n=!1;const i=typeof r=="number"?{fixed:r}:r,a=i.signal,u=i.delay??"before";let o=Et(i.fixed)??Et(i.minimum,0),s=performance.now();const c=i.minimum?Et(i.minimum):void 0,l=async()=>{const h=performance.now()-s;if(typeof c<"u"&&(o=Math.max(0,c-h)),o&&await Pr({millis:o,signal:a}),s=performance.now(),a?.aborted)throw new Error(`Signal aborted ${a?.reason}`)};Array.isArray(e)&&(e=e.values());const f=typeof e=="object"&&"next"in e&&typeof e.next=="function";try{for(;!n;){if(u==="before"&&await l(),n)return;if(typeof e=="function"){const h=await e();if(typeof h>"u")return;yield h}else if(f){const h=await e.next();if(h.done)return;yield h.value}else throw new Error("produce param does not seem to return a value/Promise and is not a generator?");u==="after"&&await l()}}finally{n=!0}},Gc={};Z(Gc,{frequencyTimer:()=>Er,frequencyTimerSource:()=>Jc,hasElapsedMs:()=>Kc,msElapsedTimer:()=>nr,relativeTimer:()=>ii,ticksElapsedTimer:()=>Qu});function Kc(e){const r=ii(e,{timer:nr()});return()=>r.isDone}var Jc=e=>()=>Er(e,{timer:nr()}),ii=(e,r={})=>{const n=r.timer??nr(),i=r.clampValue??!1,a=r.wrapValue??!1;if(i&&a)throw new Error("clampValue and wrapValue cannot both be enabled");let u=!1,o=1;return{mod(s){o=s},get isDone(){return u},reset:()=>{u=!1,n.reset()},get elapsed(){let s=n.elapsed/(e*o);return i?s=zt(s):a?s>=1&&(s=s%1):s>=1&&(u=!0),s}}},Er=(e,r={})=>{const n=r.timer??nr(),i=e/1e3;let a=1;return{mod:u=>{a=u},reset:()=>{n.reset()},get elapsed(){const u=n.elapsed*(i*a),o=u-Math.floor(u);if(o<0)throw new Error(`Unexpected cycle fraction less than 0. Elapsed: ${u} f: ${o}`);if(o>1)throw new Error(`Unexpected cycle fraction more than 1. Elapsed: ${u} f: ${o}`);return o}}},nr=()=>{let e=performance.now();return{reset:()=>{e=performance.now()},get elapsed(){return performance.now()-e}}},Qu=()=>{let e=0;return{reset:()=>{e=0},get elapsed(){return++e}}},Yc=()=>{const e=Date.now();return()=>Date.now()-e},Zy=()=>{const e=Date.now();let r=0;return()=>(r===0&&(r=Date.now()-e),r)},Xy=()=>()=>Number.POSITIVE_INFINITY;function Qy(e,r={}){const n=Et(e);if(!n)throw new Error("duration invalid");const i={...r,timer:nr()},a=ii(n,i);return()=>a.elapsed}var Zc=e=>{let r=0;if(typeof e=="function"){const i=e();r=typeof i=="object"?Et(r):i}else typeof e=="number"?r=e:typeof e=="object"&&(r=Et(r));let n=Et(r);return typeof n>"u"?"(undefined)":n<1e3?`${n}ms`:(n/=1e3,n<120?`${n.toFixed(1)}secs`:(n/=60,n<60?`${n.toFixed(2)}mins`:(n/=60,`${n.toFixed(2)}hrs`)))},eo={};Z(eo,{WithEvents:()=>Qi,bidirectionalFromList:()=>im,cloneState:()=>vu,done:()=>mu,driver:()=>tm,fromList:()=>nm,init:()=>ea,isValidTransition:()=>rl,next:()=>tl,normaliseTargets:()=>Qc,possible:()=>qn,possibleTargets:()=>to,reset:()=>yu,to:()=>Un,validateMachine:()=>Xc,validateTransition:()=>ta});var Qi=class extends rr{#e;#t;#r;#n=!1;#i=!1;#a=On.infinity();constructor(e,r={}){super();this.#r=r.debug??!1,this.#e=ea(e,r.initial),this.#t=vu(this.#e)}#u(e){this.#i!==e&&(this.#i=e,e?(this.#n=!0,setTimeout(()=>{!this.#n||(this.#n=!1,this.fireEvent("stop",{state:this.#e.value}))},2)):this.#n=!1)}get statesPossible(){return qn(this.#e)}get statesDefined(){return Object.keys(this.#e.machine)}next(){const e=qn(this.#e);return e.length===0?null:(this.state=e[0],e[0])}get isDone(){return mu(this.#e)}reset(){this.#u(!1),this.#e=vu(this.#t),this.#a=On.since()}validateTransition(e){ta(this.#e,e)}isValid(e){return rl(this.#e,e)}set state(e){const r=this.#e.value;e!==this.#e.value&&(this.#e=Un(this.#e,e),this.#r&&console.log(`StateMachine: ${r} -> ${e}`),this.#a=On.since(),setTimeout(()=>{this.fireEvent("change",{newState:e,priorState:r})},1),mu(this.#e)&&this.#u(!0))}get state(){return this.#e.value}get changedAt(){return this.#a()}get elapsed(){return this.#a()}},em=async(e,r={},n)=>{const i=[],a=r.rank??vi;let u=Array.isArray(e)?e:[e];r.shuffle&&(u=Zi(u));for(let o=0;o<u.length;o++){const s=u[o];let c;if(typeof s=="function"?c=await s(n):c=s,c!==void 0&&(i.push(c),i.sort(a)),typeof r.stop<"u"&&r.stop(c,i))break}return r.filter?i.filter(r.filter):i};async function tm(e,r){const n=Array.isArray(r)?{handlers:r}:r,i=Es(n.debug,{category:"StateMachineDriver"}),a=new Map;for(const c of n.handlers)(Array.isArray(c.if)?c.if:[c.if]).forEach(f=>{if(typeof f!="string")throw new Error(`Expected single or array of strings for the 'if' field. Got: '${typeof f}'.`);if(a.has(f))throw new Error(`Multiple handlers defined for state '${f}'. There should be at most one.`);a.set(f,c)});const u={rank:(c,l)=>vi(c.score??0,l.score??0),shuffle:n.shuffleHandlers??!1};let o=ea(e);for(const[c]of a)if(typeof o.machine[c]>"u"&&c!=="__fallback")throw new Error(`StateMachineDriver handler references a state ('${c}') which is not defined on the machine. Therefore this handler will never run.'`);return{reset:()=>{o=yu(o)},getValue:()=>o.value,run:async()=>{i(`Run. State: ${o.value}`);const c=o.value;let l=a.get(c);if(l===void 0&&(i(`  No handler for state '${c}', trying __fallback`),l=a.get("__fallback")),l===void 0){i("  No __fallback handler");return}const f=l.resultChoice==="first"?{...u,stop:E=>E?"reset"in E||"next"in E&&E.next!==void 0:!1}:u,h=await em(l.then,f,o);i(`  In state '${o.value}' results: ${h.length}. Choice: ${l.resultChoice}`);let v;switch(l.resultChoice??"highest"){case"highest":v=h.at(-1);break;case"first":v=h[0];break;case"lowest":v=h.at(0);break;case"random":v=Ta(h);break;default:throw new Error(`Unknown 'resultChoice' option: ${l.resultChoice}. Expected highest, first, lowest or random`)}return i(`  Chosen result: ${JSON.stringify(v)}`),v&&v.reset?o=yu(o):v&&v.next&&(typeof v.next=="boolean"?o=tl(o):(i(JSON.stringify(h)),o=Un(o,v.next))),o},to:c=>(o=Un(o,c),o)}}var vu=e=>Object.freeze({value:e.value,visited:[...e.visited],machine:e.machine}),ea=(e,r)=>{const[n,i]=Xc(e);if(!n)throw new Error(i);const a=r??Object.keys(n.states)[0];if(typeof n.states[a]>"u")throw new Error("Initial state not found");const u=rm(n.states);if(u===void 0)throw new Error("Could not normalise transitions");return Object.freeze({value:a,visited:[],machine:Object.fromEntries(u)})},yu=e=>ea(e.machine),Xc=e=>typeof e>"u"?[void 0,"Parameter undefined"]:e===null?[void 0,"Parameter null"]:"states"in e?[e,""]:typeof e=="object"?[{states:e},""]:[void 0,`Unexpected type: ${typeof e}. Expected object`],mu=e=>qn(e).length===0,to=e=>{el(e);const r=e.machine[e.value];return r.length===1&&r[0].state===null?[]:r},qn=e=>to(e).map(n=>n.state),Qc=e=>{const r=n=>{if(n===null)return{state:null};if(typeof n=="string")return{state:n};if(typeof n=="object"&&"state"in n){const i=n.state;if(typeof i!="string")throw new Error(`Target 'state' field is not a string. Got: ${typeof i}`);return"preconditions"in n?{state:i,preconditions:n.preconditions}:{state:i}}else throw new Error(`Unexpected type: ${typeof n}. Expected string or object with 'state' field.`)};if(Array.isArray(e)){let n=!1;const i=e.map(a=>{const u=r(a);if(!u)throw new Error("Invalid target");return n=n||u.state===null,u});if(n&&i.length>1)throw new Error("Cannot have null as an possible state");return i}else{const n=r(e);return n?[n]:void 0}},rm=e=>{const r=new Map;for(const[n,i]of Object.entries(e)){if(typeof n>"u")throw new Error("Top-level undefined state");if(typeof i>"u")throw new Error(`Undefined target state for ${n}`);if(r.has(n))throw new Error(`State defined twice: ${n}`);if(n.includes(" "))throw new Error("State names cannot contain spaces");r.set(n,[])}for(const[n,i]of Object.entries(e)){const a=Qc(i);if(a===void 0)throw new Error("Could not normalise target");if(a!==null){const u=new Set;for(const o of a){if(u.has(o.state))throw new Error(`Target state '${o.state}' already exists for '${n}'`);if(u.add(o.state),o.state!==null&&!r.has(o.state))throw new Error(`Target state '${o.state}' is not defined as a top-level state. Defined under: '${n}'`)}r.set(n,a)}}return r},el=e=>{if(typeof e>"u")throw new Error("Parameter 'state' is undefined");if(typeof e.value!="string")throw new Error("Existing state is not a string")},Un=(e,r)=>(el(e),ta(e,r),Object.freeze({value:r,machine:e.machine,visited:X0([e.visited,[e.value]])})),tl=e=>{const r=to(e).at(0);if(!r||r.state===null)throw new Error(`Not possible to move to a next state from '${e.value}`);return Un(e,r.state)},rl=(e,r)=>{try{return ta(e,r),!0}catch{return!1}},ta=(e,r)=>{if(r===null)throw new Error("Cannot transition to null state");if(r===void 0)throw new Error("Cannot transition to undefined state");if(typeof r!="string")throw new Error(`Parameter 'toState' should be a string. Got: ${typeof r}`);const n=qn(e);if(n.length===0)throw new Error("Machine is in terminal state");if(!n.includes(r))throw new Error(`Target state '${r}' not available at current state '${e.value}'. Possible states: ${n.join(", ")}`)},nm=(...e)=>{const r={};if(!Array.isArray(e))throw new Error("Expected array of strings");if(e.length<=2)throw new Error("Expects at least two states");for(let n=0;n<e.length;n++){const i=e[n];if(typeof i!="string")throw new Error(`Expected array of strings. Got type '${typeof i}' at index ${n}`);n===e.length-1?r[i]=null:r[i]=e[n+1]}return r},im=(...e)=>{const r={};if(!Array.isArray(e))throw new Error("Expected array of strings");if(e.length<2)throw new Error("Expects at least two states");for(let n=0;n<e.length;n++){const i=e[n];if(typeof i!="string")throw new Error(`Expected array of strings. Got type '${typeof i}' at index ${n}`);r[i]=[]}for(let n=0;n<e.length;n++){const i=r[e[n]];n===e.length-1?e.length>1?i.push(e[n-1]):r[e[n]]=null:(i.push(e[n+1]),n>0&&i.push(e[n-1]))}return r},nl=(e,r)=>{if(e===void 0)throw new Error("callback parameter is undefined");const n=Et(r);Le(n,"aboveZero","interval");let i=0,a=0;const u=async(s=r,c)=>new Promise((f,h)=>{a=performance.now();const v=Et(s),E=_r(v,"aboveZero","altTimeoutMs");if(!E[0]){h(E[1]);return}i!==0&&o(),i=window.setTimeout(async()=>{await e(performance.now()-a,...c),i=0,f(void 0)},v)}),o=()=>{i!==0&&(a=0,window.clearTimeout(i))};return{start:u,cancel:o,get isDone(){return i!==0}}},am=(e,r,n="slow")=>{let i=0,a,u=r;return()=>new Promise(async(o,s)=>{const c=performance.now()-i;if(a===void 0||c>u)try{i=performance.now(),a=await e(c),u=r}catch(l){n==="fast"?(a=void 0,i=0):n==="backoff"&&(u=Math.floor(u*1.2)),s(l);return}o(a)})},um=typeof window<"u"?e=>window.requestAnimationFrame(e):e=>window.setTimeout(e,1),ro=(e,r,n={})=>{let i=Et(r,0);Le(i,"positive","interval");const a=n.fireBeforeWait??!1,u=n.onStartCalled;let o=!1,s=!1,c=0,l=performance.now(),f=r??0,h=0;const v=i===0?um:C=>window.setTimeout(C,i),E=i===0?C=>{}:C=>window.clearTimeout(C),R=()=>{!s||(s=!1,c=0,h!==0&&E(h),h=0)},L=async()=>{if(!s)return;const C=e(c++,performance.now()-l);let B;if(typeof C=="object"?B=await C:B=C,B!==void 0&&!B){R();return}h=v(L)},N=()=>{if(o)throw new Error("Disposed");if(u!==void 0){const C=u(c,performance.now()-l);if(C==="cancel"){R();return}else if(C==="reset"){F();return}else if(C==="dispose"){o=!0,R();return}}s||(l=performance.now(),s=!0,a?L():h=v(L))},F=()=>{if(o)throw new Error("Disposed");s&&R(),N()};return{start:N,reset:F,cancel:R,get interval(){return f},set interval(C){const B=Et(C,0);Le(B,"positive","interval"),i=B,f=C},get isDone(){return!s},get isDisposed(){return o},get ticks(){return c},get elapsedMs(){return performance.now()-l}}},om=(e,r)=>{const n=nl(e,r);return(...i)=>n.start(void 0,i)},sm=(e,r)=>{let n=0;return async(...i)=>{const a=performance.now()-n;if(a>=r){const u=e(a,...i);typeof u=="object"&&await u,n=performance.now()}}},no=(e,r,n)=>{let i=!1;const a=o=>{u!==0&&(window.clearTimeout(u),u=0),o?r(o):i=!0,n!==void 0&&n(i)};let u=window.setTimeout(()=>{u=0;try{r(`Timeout after ${e}ms`)}finally{n!==void 0&&n(i)}},e);return a},cm=async(e,r)=>{const n=typeof r=="number"?{millis:r}:r,i=n.delay??"before";(i==="before"||i==="both")&&await Pr(n);const a=Promise.resolve(await e());return(i==="after"||i==="both")&&await Pr(n),a};async function*lm(){let e,r=new Promise(a=>e=a),n=0;const i=()=>{e(),r=new Promise(a=>e=a)};try{for(;;)n=window.requestAnimationFrame(i),yield await r}finally{e(),window.cancelAnimationFrame(n)}}async function*io(e){const r=Et(e);if(typeof r>"u")throw new Error("timeout is undefined");if(r<0)throw new Error("Timeout is less than zero");if(r===0)return yield*lm();let n,i=new Promise(o=>n=o),a=0;const u=()=>{n(),i=new Promise(o=>n=o)};try{for(;;)a=window.setTimeout(u,r),yield await i}finally{n(),window.clearTimeout(a)}}var fm=(e,r)=>{Le(e,"positive","nth");let n=0;return(...i)=>++n===e?(n=0,r&&r(...i),!0):!1},hm=e=>{let r=!1,n=!1;return()=>(r||(r=!0,n=e()),n)},ao=async(e,r)=>{const n=r.abort,i=Es(r.log),a=r.power??1.1,u=r.predelayMs??0,o=Yc();let s=r.startMs??1e3;const c=r.count;let l=0;if(Le(c,"aboveZero","count"),s<=0)throw new Error("startMs must be above zero");if(u>0&&await Pr({millis:u,signal:n}),n?.aborted)return{success:!1,attempts:l,value:r.defaultValue,elapsed:o(),message:"Aborted during predelay"};for(;l<c;){l++;const f=await e();if(f!==void 0)return{value:f,success:!0,attempts:l,elapsed:o()};if(i({msg:`retry attempts: ${l} t: ${Zc(s)}`}),l>=c)break;try{await Pr({millis:s,signal:n})}catch(h){return{success:!1,attempts:l,value:r.defaultValue,message:q0(h),elapsed:o()}}s=Math.floor(Math.pow(s,a))}return{message:`Giving up after ${l} attempts.`,success:!1,attempts:l,value:r.defaultValue,elapsed:o()}},dm=class il{static instance=new il;_timer=0;_queue;_startDelayMs;_intervalMs;constructor(r={}){this._startDelayMs=r.startDelayMs??500,this._intervalMs=r.intervalMs??100,this._queue=new Ir}add(r){this._queue.enqueue(r),this._timer===0&&this.schedule(this._startDelayMs)}schedule(r){if(this._queue.length===0){this._timer=0;return}this._timer===0&&(this._timer=setTimeout(()=>{this.processQueue()},r))}async processQueue(){const r=this._queue.dequeue();if(this._timer=0,r!==void 0)try{await r(),this._timer=0,this.schedule(this._intervalMs)}catch(n){console.error(n)}}},al=(e,r)=>{for(const n of e){const i=r(n);if(typeof i=="boolean"&&!i)break}},ul=async function(e,r,n){if(Array.isArray(e))for(const i of e){const a=await r(i);if(n&&await Pr(n),typeof a=="boolean"&&!a)break}else for await(const i of e){const a=await r(i);if(n&&await Pr(n),typeof a=="boolean"&&!a)break}};function*uo(e,r){let n,i;if(n=i=0,typeof e=="number")for(ee(e,"positive","countOrPredicate");e-- >0;){n++;const a=r(n,i);a!==void 0&&(yield a,i++)}else if(typeof e=="function")for(;e(n,i);){n++;const a=r(n,i);a!==void 0&&(yield a,i++)}else throw new TypeError(`countOrPredicate should be a number or function. Got: ${typeof e}`)}var vm=(e,r,n,i)=>{if(typeof e=="number")for(ee(e,"positive","countOrPredicate");e-- >0;){const a=r();a!==void 0&&(n=i(n,a))}else{let a,u;for(a=u=0;e(a,u);){a++;const o=r();o!==void 0&&(n=i(n,o),u++)}}return n};try{typeof window<"u"&&(window.ixfx={...window.ixfx,Flow:{StateMachine:eo,Timer:Gc,forEach:al,forEachAsync:ul,repeat:uo}})}catch{}var ol=class{store;gog;constructor(e){this.store=new Map,this.gog=Cc(this.store,e)}get size(){return this.store.size}has(e){return this.store.has(e)}async seen(e,...r){return(await this.getTrackedValue(e,...r)).seen(...r)}async getTrackedValue(e,...r){if(e===null)throw new Error("id parameter cannot be null");if(e===void 0)throw new Error("id parameter cannot be undefined");return await this.gog(e,r[0])}delete(e){this.store.delete(e)}reset(){this.store=new Map}*ids(){yield*this.store.keys()}*tracked(){yield*this.store.values()}*trackedByAge(){const e=Array.from(this.store.values());e.sort((r,n)=>{const i=r.elapsed,a=n.elapsed;return i===a?0:i>a?-1:1});for(const r of e)yield r}*valuesByAge(){for(const e of this.trackedByAge())yield e.last}*last(){for(const e of this.store.values())yield e.last}*initialValues(){for(const e of this.store.values())yield e.initial}get(e){return this.store.get(e)}},oo=class{seenCount;storeIntermediate;resetAfterSamples;sampleLimit;id;constructor(e={}){this.id=e.id??"tracker",this.sampleLimit=e.sampleLimit??-1,this.resetAfterSamples=e.resetAfterSamples??-1,this.storeIntermediate=e.storeIntermediate??(this.sampleLimit>-1||this.resetAfterSamples>-1),this.seenCount=0}reset(){this.seenCount=0,this.onReset()}seen(...e){this.resetAfterSamples>0&&this.seenCount>this.resetAfterSamples?this.reset():this.sampleLimit>0&&this.seenCount>this.sampleLimit*2&&(this.seenCount=this.trimStore(this.sampleLimit),this.onTrimmed()),this.seenCount+=e.length;const r=this.seenImpl(e);this.onSeen(r)}onSeen(e){}},ym=class extends oo{values;timestamps;constructor(e){super(e);this.values=[],this.timestamps=[]}trimStore(e){return e>=this.values.length?this.values.length:(this.values=this.values.slice(-e),this.timestamps=this.timestamps.slice(-e),this.values.length)}onTrimmed(){}get last(){return this.values.at(-1)}get initial(){return this.values.at(0)}get size(){return this.values.length}get elapsed(){if(this.values.length<0)throw new Error("No values seen yet");return Date.now()-this.timestamps[0]}onReset(){this.values=[],this.timestamps=[]}seenImpl(e){const r=e.at(-1),n=Date.now();return this.storeIntermediate?(this.values.push(...e),this.timestamps.push(...uo(e.length,()=>n))):this.values.length===0?(this.values.push(r),this.timestamps.push(n)):this.values.length===2?(this.values[1]=r,this.timestamps[1]=n):this.values.length===1&&(this.values.push(r),this.timestamps.push(n)),e}},so=class extends ym{total=0;min=Number.MAX_SAFE_INTEGER;max=Number.MIN_SAFE_INTEGER;get avg(){return this.total/this.seenCount}difference(){if(this.last!==void 0&&this.initial!==void 0)return this.last-this.initial}relativeDifference(){if(this.last!==void 0&&this.initial!==void 0)return this.last/this.initial}onReset(){this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER,this.total=0,super.onReset()}onTrimmed(){this.min=os(this.values),this.max=Dd(this.values),this.total=Ad(this.values)}onSeen(e){if(e.some(r=>Number.isNaN(r)))throw Error("Cannot add NaN");this.total=e.reduce((r,n)=>r+n,this.total),this.min=Math.min(...e,this.min),this.max=Math.max(...e,this.max)}getMinMaxAvg(){return{min:this.min,max:this.max,avg:this.avg}}},$n=(e={})=>new so(e),mm={};Z(mm,{Easings:()=>Ku,Envelopes:()=>co,Forces:()=>ho,Oscillators:()=>Eo,adsr:()=>fo,adsrIterable:()=>dl,defaultAdsrOpts:()=>hl,jitter:()=>Ol,perSecond:()=>Rg,pingPong:()=>bo,pingPongPercent:()=>$l});var co={};Z(co,{adsr:()=>fo,adsrIterable:()=>dl,defaultAdsrOpts:()=>hl});var sn={};Z(sn,{getEnd:()=>pm,getStart:()=>gm});var gm=function(e){if(ai.isQuadraticBezier(e))return e.a;if(Je.isLine(e))return e.a;throw new Error(`Unknown path type ${JSON.stringify(e)}`)},pm=function(e){if(ai.isQuadraticBezier(e))return e.b;if(Je.isLine(e))return e.b;throw new Error(`Unknown path type ${JSON.stringify(e)}`)},ai={};Z(ai,{computeQuadraticSimple:()=>Mm,cubic:()=>Im,isCubicBezier:()=>lo,isQuadraticBezier:()=>na,quadratic:()=>fl,quadraticBend:()=>Sm,quadraticSimple:()=>cn,quadraticToSvgString:()=>ll,toPath:()=>Ai});var{abs:Rn,cos:hr,sin:rn,acos:wm,atan2:Bn,sqrt:Cr,pow:Nt}=Math;function Nn(e){return e<0?-Nt(-e,1/3):Nt(e,1/3)}var sl=Math.PI,mi=2*sl,Fr=sl/2,Em=1e-6,Ha=Number.MAX_SAFE_INTEGER||9007199254740991,Ga=Number.MIN_SAFE_INTEGER||-9007199254740991,bm={x:0,y:0,z:0},K={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,r){const n=r(e);let i=n.x*n.x+n.y*n.y;return typeof n.z<"u"&&(i+=n.z*n.z),Cr(i)},compute:function(e,r,n){if(e===0)return r[0].t=0,r[0];const i=r.length-1;if(e===1)return r[i].t=1,r[i];const a=1-e;let u=r;if(i===0)return r[0].t=e,r[0];if(i===1){const s={x:a*u[0].x+e*u[1].x,y:a*u[0].y+e*u[1].y,t:e};return n&&(s.z=a*u[0].z+e*u[1].z),s}if(i<4){let s=a*a,c=e*e,l,f,h,v=0;i===2?(u=[u[0],u[1],u[2],bm],l=s,f=a*e*2,h=c):i===3&&(l=s*a,f=s*e*3,h=a*c*3,v=e*c);const E={x:l*u[0].x+f*u[1].x+h*u[2].x+v*u[3].x,y:l*u[0].y+f*u[1].y+h*u[2].y+v*u[3].y,t:e};return n&&(E.z=l*u[0].z+f*u[1].z+h*u[2].z+v*u[3].z),E}const o=JSON.parse(JSON.stringify(r));for(;o.length>1;){for(let s=0;s<o.length-1;s++)o[s]={x:o[s].x+(o[s+1].x-o[s].x)*e,y:o[s].y+(o[s+1].y-o[s].y)*e},typeof o[s].z<"u"&&(o[s].z=o[s].z+(o[s+1].z-o[s].z)*e);o.splice(o.length-1,1)}return o[0].t=e,o[0]},computeWithRatios:function(e,r,n,i){const a=1-e,u=n,o=r;let s=u[0],c=u[1],l=u[2],f=u[3],h;if(s*=a,c*=e,o.length===2)return h=s+c,{x:(s*o[0].x+c*o[1].x)/h,y:(s*o[0].y+c*o[1].y)/h,z:i?(s*o[0].z+c*o[1].z)/h:!1,t:e};if(s*=a,c*=2*a,l*=e*e,o.length===3)return h=s+c+l,{x:(s*o[0].x+c*o[1].x+l*o[2].x)/h,y:(s*o[0].y+c*o[1].y+l*o[2].y)/h,z:i?(s*o[0].z+c*o[1].z+l*o[2].z)/h:!1,t:e};if(s*=a,c*=1.5*a,l*=3*a,f*=e*e*e,o.length===4)return h=s+c+l+f,{x:(s*o[0].x+c*o[1].x+l*o[2].x+f*o[3].x)/h,y:(s*o[0].y+c*o[1].y+l*o[2].y+f*o[3].y)/h,z:i?(s*o[0].z+c*o[1].z+l*o[2].z+f*o[3].z)/h:!1,t:e}},derive:function(e,r){const n=[];for(let i=e,a=i.length,u=a-1;a>1;a--,u--){const o=[];for(let s=0,c;s<u;s++)c={x:u*(i[s+1].x-i[s].x),y:u*(i[s+1].y-i[s].y)},r&&(c.z=u*(i[s+1].z-i[s].z)),o.push(c);n.push(o),i=o}return n},between:function(e,r,n){return r<=e&&e<=n||K.approximately(e,r)||K.approximately(e,n)},approximately:function(e,r,n){return Rn(e-r)<=(n||Em)},length:function(e){const n=K.Tvalues.length;let i=0;for(let a=0,u;a<n;a++)u=.5*K.Tvalues[a]+.5,i+=K.Cvalues[a]*K.arcfn(u,e);return .5*i},map:function(e,r,n,i,a){const u=n-r,o=a-i,s=e-r,c=s/u;return i+o*c},lerp:function(e,r,n){const i={x:r.x+e*(n.x-r.x),y:r.y+e*(n.y-r.y)};return r.z!==void 0&&n.z!==void 0&&(i.z=r.z+e*(n.z-r.z)),i},pointToString:function(e){let r=e.x+"/"+e.y;return typeof e.z<"u"&&(r+="/"+e.z),r},pointsToString:function(e){return"["+e.map(K.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,r,n){const i=r.x-e.x,a=r.y-e.y,u=n.x-e.x,o=n.y-e.y,s=i*o-a*u,c=i*u+a*o;return Bn(s,c)},round:function(e,r){const n=""+e,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+r))},dist:function(e,r){const n=e.x-r.x,i=e.y-r.y;return Cr(n*n+i*i)},closest:function(e,r){let n=Nt(2,63),i,a;return e.forEach(function(u,o){a=K.dist(r,u),a<n&&(n=a,i=o)}),{mdist:n,mpos:i}},abcratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const n=Nt(e,r)+Nt(1-e,r),i=n-1;return Rn(i/n)},projectionratio:function(e,r){if(r!==2&&r!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const n=Nt(1-e,r),i=Nt(e,r)+n;return n/i},lli8:function(e,r,n,i,a,u,o,s){const c=(e*i-r*n)*(a-o)-(e-n)*(a*s-u*o),l=(e*i-r*n)*(u-s)-(r-i)*(a*s-u*o),f=(e-n)*(u-s)-(r-i)*(a-o);return f==0?!1:{x:c/f,y:l/f}},lli4:function(e,r,n,i){const a=e.x,u=e.y,o=r.x,s=r.y,c=n.x,l=n.y,f=i.x,h=i.y;return K.lli8(a,u,o,s,c,l,f,h)},lli:function(e,r){return K.lli4(e,e.c,r,r.c)},makeline:function(e,r){return new ra(e.x,e.y,(e.x+r.x)/2,(e.y+r.y)/2,r.x,r.y)},findbbox:function(e){let r=Ha,n=Ha,i=Ga,a=Ga;return e.forEach(function(u){const o=u.bbox();r>o.x.min&&(r=o.x.min),n>o.y.min&&(n=o.y.min),i<o.x.max&&(i=o.x.max),a<o.y.max&&(a=o.y.max)}),{x:{min:r,mid:(r+i)/2,max:i,size:i-r},y:{min:n,mid:(n+a)/2,max:a,size:a-n}}},shapeintersections:function(e,r,n,i,a){if(!K.bboxoverlap(r,i))return[];const u=[],o=[e.startcap,e.forward,e.back,e.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return o.forEach(function(c){c.virtual||s.forEach(function(l){if(l.virtual)return;const f=c.intersects(l,a);f.length>0&&(f.c1=c,f.c2=l,f.s1=e,f.s2=n,u.push(f))})}),u},makeshape:function(e,r,n){const i=r.points.length,a=e.points.length,u=K.makeline(r.points[i-1],e.points[0]),o=K.makeline(e.points[a-1],r.points[0]),s={startcap:u,forward:e,back:r,endcap:o,bbox:K.findbbox([u,e,r,o])};return s.intersections=function(c){return K.shapeintersections(s,s.bbox,c,c.bbox,n)},s},getminmax:function(e,r,n){if(!n)return{min:0,max:0};let i=Ha,a=Ga,u,o;n.indexOf(0)===-1&&(n=[0].concat(n)),n.indexOf(1)===-1&&n.push(1);for(let s=0,c=n.length;s<c;s++)u=n[s],o=e.get(u),o[r]<i&&(i=o[r]),o[r]>a&&(a=o[r]);return{min:i,mid:(i+a)/2,max:a,size:a-i}},align:function(e,r){const n=r.p1.x,i=r.p1.y,a=-Bn(r.p2.y-i,r.p2.x-n),u=function(o){return{x:(o.x-n)*hr(a)-(o.y-i)*rn(a),y:(o.x-n)*rn(a)+(o.y-i)*hr(a)}};return e.map(u)},roots:function(e,r){r=r||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=e.length-1,i=K.align(e,r),a=function(b){return 0<=b&&b<=1};if(n===2){const b=i[0].y,I=i[1].y,V=i[2].y,q=b-2*I+V;if(q!==0){const Y=-Cr(I*I-b*V),ne=-b+I,ye=-(Y+ne)/q,he=-(-Y+ne)/q;return[ye,he].filter(a)}else if(I!==V&&q===0)return[(2*I-V)/(2*I-2*V)].filter(a);return[]}const u=i[0].y,o=i[1].y,s=i[2].y,c=i[3].y;let l=-u+3*o-3*s+c,f=3*u-6*o+3*s,h=-3*u+3*o,v=u;if(K.approximately(l,0)){if(K.approximately(f,0))return K.approximately(h,0)?[]:[-v/h].filter(a);const b=Cr(h*h-4*f*v),I=2*f;return[(b-h)/I,(-h-b)/I].filter(a)}f/=l,h/=l,v/=l;const E=(3*h-f*f)/3,R=E/3,L=(2*f*f*f-9*f*h+27*v)/27,N=L/2,F=N*N+R*R*R;let C,B,U,W,_;if(F<0){const b=-E/3,I=b*b*b,V=Cr(I),q=-L/(2*V),Y=q<-1?-1:q>1?1:q,ne=wm(Y),ye=Nn(V),he=2*ye;return U=he*hr(ne/3)-f/3,W=he*hr((ne+mi)/3)-f/3,_=he*hr((ne+2*mi)/3)-f/3,[U,W,_].filter(a)}else{if(F===0)return C=N<0?Nn(-N):-Nn(N),U=2*C-f/3,W=-C-f/3,[U,W].filter(a);{const b=Cr(F);return C=Nn(-N+b),B=Nn(N+b),[C-B-f/3].filter(a)}}},droots:function(e){if(e.length===3){const r=e[0],n=e[1],i=e[2],a=r-2*n+i;if(a!==0){const u=-Cr(n*n-r*i),o=-r+n,s=-(u+o)/a,c=-(-u+o)/a;return[s,c]}else if(n!==i&&a===0)return[(2*n-i)/(2*(n-i))];return[]}if(e.length===2){const r=e[0],n=e[1];return r!==n?[r/(r-n)]:[]}return[]},curvature:function(e,r,n,i,a){let u,o,s,c,l=0,f=0;const h=K.compute(e,r),v=K.compute(e,n),E=h.x*h.x+h.y*h.y;if(i?(u=Cr(Nt(h.y*v.z-v.y*h.z,2)+Nt(h.z*v.x-v.z*h.x,2)+Nt(h.x*v.y-v.x*h.y,2)),o=Nt(E+h.z*h.z,3/2)):(u=h.x*v.y-h.y*v.x,o=Nt(E,3/2)),u===0||o===0)return{k:0,r:0};if(l=u/o,f=o/u,!a){const R=K.curvature(e-.001,r,n,i,!0).k,L=K.curvature(e+.001,r,n,i,!0).k;c=(L-l+(l-R))/2,s=(Rn(L-l)+Rn(l-R))/2}return{k:l,r:f,dk:c,adk:s}},inflections:function(e){if(e.length<4)return[];const r=K.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=r[2].x*r[1].y,i=r[3].x*r[1].y,a=r[1].x*r[2].y,u=r[3].x*r[2].y,o=18*(-3*n+2*i+3*a-u),s=18*(3*n-i-3*a),c=18*(a-n);if(K.approximately(o,0)){if(!K.approximately(s,0)){let v=-c/s;if(0<=v&&v<=1)return[v]}return[]}const l=2*o;if(K.approximately(l,0))return[];const f=s*s-4*o*c;if(f<0)return[];const h=Math.sqrt(f);return[(h-s)/l,-(s+h)/l].filter(function(v){return 0<=v&&v<=1})},bboxoverlap:function(e,r){const n=["x","y"],i=n.length;for(let a=0,u,o,s,c;a<i;a++)if(u=n[a],o=e[u].mid,s=r[u].mid,c=(e[u].size+r[u].size)/2,Rn(o-s)>=c)return!1;return!0},expandbox:function(e,r){r.x.min<e.x.min&&(e.x.min=r.x.min),r.y.min<e.y.min&&(e.y.min=r.y.min),r.z&&r.z.min<e.z.min&&(e.z.min=r.z.min),r.x.max>e.x.max&&(e.x.max=r.x.max),r.y.max>e.y.max&&(e.y.max=r.y.max),r.z&&r.z.max>e.z.max&&(e.z.max=r.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,r,n){const i=e.bbox(),a=r.bbox(),u=1e5,o=n||.5;if(i.x.size+i.y.size<o&&a.x.size+a.y.size<o)return[(u*(e._t1+e._t2)/2|0)/u+"/"+(u*(r._t1+r._t2)/2|0)/u];let s=e.split(.5),c=r.split(.5),l=[{left:s.left,right:c.left},{left:s.left,right:c.right},{left:s.right,right:c.right},{left:s.right,right:c.left}];l=l.filter(function(h){return K.bboxoverlap(h.left.bbox(),h.right.bbox())});let f=[];return l.length===0||(l.forEach(function(h){f=f.concat(K.pairiteration(h.left,h.right,o))}),f=f.filter(function(h,v){return f.indexOf(h)===v})),f},getccenter:function(e,r,n){const i=r.x-e.x,a=r.y-e.y,u=n.x-r.x,o=n.y-r.y,s=i*hr(Fr)-a*rn(Fr),c=i*rn(Fr)+a*hr(Fr),l=u*hr(Fr)-o*rn(Fr),f=u*rn(Fr)+o*hr(Fr),h=(e.x+r.x)/2,v=(e.y+r.y)/2,E=(r.x+n.x)/2,R=(r.y+n.y)/2,L=h+s,N=v+c,F=E+l,C=R+f,B=K.lli8(h,v,L,N,E,R,F,C),U=K.dist(B,e);let W=Bn(e.y-B.y,e.x-B.x),_=Bn(r.y-B.y,r.x-B.x),b=Bn(n.y-B.y,n.x-B.x),I;return W<b?((W>_||_>b)&&(W+=mi),W>b&&(I=b,b=W,W=I)):b<_&&_<W?(I=b,b=W,W=I):b+=mi,B.s=W,B.e=b,B.r=U,B},numberSort:function(e,r){return e-r}},Ka=class cl{constructor(r){this.curves=[],this._3d=!1,r&&(this.curves=r,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(r){return K.pointsToString(r.points)}).join(", ")+"]"}addCurve(r){this.curves.push(r),this._3d=this._3d||r._3d}length(){return this.curves.map(function(r){return r.length()}).reduce(function(r,n){return r+n})}curve(r){return this.curves[r]}bbox(){const r=this.curves;for(var n=r[0].bbox(),i=1;i<r.length;i++)K.expandbox(n,r[i].bbox());return n}offset(r){const n=[];return this.curves.forEach(function(i){n.push(...i.offset(r))}),new cl(n)}},{abs:zn,min:_s,max:Ps,cos:Dm,sin:Am,acos:Cm,sqrt:Wn}=Math,Fm=Math.PI,ra=class Ne{constructor(r){let n=r&&r.forEach?r:Array.from(arguments).slice(),i=!1;if(typeof n[0]=="object"){i=n.length;const E=[];n.forEach(function(R){["x","y","z"].forEach(function(L){typeof R[L]<"u"&&E.push(R[L])})}),n=E}let a=!1;const u=n.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(u!==6&&u!==8&&u!==9&&u!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!a&&(u===9||u===12)||r&&r[0]&&typeof r[0].z<"u",s=this.points=[];for(let E=0,R=o?3:2;E<u;E+=R){var c={x:n[E],y:n[E+1]};o&&(c.z=n[E+2]),s.push(c)}const l=this.order=s.length-1,f=this.dims=["x","y"];o&&f.push("z"),this.dimlen=f.length;const h=K.align(s,{p1:s[0],p2:s[l]}),v=K.dist(s[0],s[l]);this._linear=h.reduce((E,R)=>E+zn(R.y),0)<v/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(r,n,i,a){if(typeof a>"u"&&(a=.5),a===0)return new Ne(n,n,i);if(a===1)return new Ne(r,n,n);const u=Ne.getABC(2,r,n,i,a);return new Ne(r,u.A,i)}static cubicFromPoints(r,n,i,a,u){typeof a>"u"&&(a=.5);const o=Ne.getABC(3,r,n,i,a);typeof u>"u"&&(u=K.dist(n,o.C));const s=u*(1-a)/a,c=K.dist(r,i),l=(i.x-r.x)/c,f=(i.y-r.y)/c,h=u*l,v=u*f,E=s*l,R=s*f,L={x:n.x-h,y:n.y-v},N={x:n.x+E,y:n.y+R},F=o.A,C={x:F.x+(L.x-F.x)/(1-a),y:F.y+(L.y-F.y)/(1-a)},B={x:F.x+(N.x-F.x)/a,y:F.y+(N.y-F.y)/a},U={x:r.x+(C.x-r.x)/a,y:r.y+(C.y-r.y)/a},W={x:i.x+(B.x-i.x)/(1-a),y:i.y+(B.y-i.y)/(1-a)};return new Ne(r,U,W,i)}static getUtils(){return K}getUtils(){return Ne.getUtils()}static get PolyBezier(){return Ka}valueOf(){return this.toString()}toString(){return K.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const r=this.points,n=r[0].x,i=r[0].y,a=["M",n,i,this.order===2?"Q":"C"];for(let u=1,o=r.length;u<o;u++)a.push(r[u].x),a.push(r[u].y);return a.join(" ")}setRatios(r){if(r.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=r,this._lut=[]}verify(){const r=this.coordDigest();r!==this._print&&(this._print=r,this.update())}coordDigest(){return this.points.map(function(r,n){return""+n+r.x+r.y+(r.z?r.z:0)}).join("")}update(){this._lut=[],this.dpoints=K.derive(this.points,this._3d),this.computedirection()}computedirection(){const r=this.points,n=K.angle(r[0],r[this.order],r[1]);this.clockwise=n>0}length(){return K.length(this.derivative.bind(this))}static getABC(r=2,n,i,a,u=.5){const o=K.projectionratio(u,r),s=1-o,c={x:o*n.x+s*a.x,y:o*n.y+s*a.y},l=K.abcratio(u,r);return{A:{x:i.x+(i.x-c.x)/l,y:i.y+(i.y-c.y)/l},B:i,C:c,S:n,E:a}}getABC(r,n){n=n||this.get(r);let i=this.points[0],a=this.points[this.order];return Ne.getABC(this.order,i,n,a,r)}getLUT(r){if(this.verify(),r=r||100,this._lut.length===r+1)return this._lut;this._lut=[],r++,this._lut=[];for(let n=0,i,a;n<r;n++)a=n/(r-1),i=this.compute(a),i.t=a,this._lut.push(i);return this._lut}on(r,n){n=n||5;const i=this.getLUT(),a=[];for(let u=0,o,s=0;u<i.length;u++)o=i[u],K.dist(o,r)<n&&(a.push(o),s+=u/i.length);return a.length?t/=a.length:!1}project(r){const n=this.getLUT(),i=n.length-1,a=K.closest(n,r),u=a.mpos,o=(u-1)/i,s=(u+1)/i,c=.1/i;let l=a.mdist,f=o,h=f,v;l+=1;for(let E;f<s+c;f+=c)v=this.compute(f),E=K.dist(r,v),E<l&&(l=E,h=f);return h=h<0?0:h>1?1:h,v=this.compute(h),v.t=h,v.d=l,v}get(r){return this.compute(r)}point(r){return this.points[r]}compute(r){return this.ratios?K.computeWithRatios(r,this.points,this.ratios,this._3d):K.compute(r,this.points,this._3d,this.ratios)}raise(){const r=this.points,n=[r[0]],i=r.length;for(let a=1,u,o;a<i;a++)u=r[a],o=r[a-1],n[a]={x:(i-a)/i*u.x+a/i*o.x,y:(i-a)/i*u.y+a/i*o.y};return n[i]=r[i-1],new Ne(n)}derivative(r){return K.compute(r,this.dpoints[0],this._3d)}dderivative(r){return K.compute(r,this.dpoints[1],this._3d)}align(){let r=this.points;return new Ne(K.align(r,{p1:r[0],p2:r[r.length-1]}))}curvature(r){return K.curvature(r,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return K.inflections(this.points)}normal(r){return this._3d?this.__normal3(r):this.__normal2(r)}__normal2(r){const n=this.derivative(r),i=Wn(n.x*n.x+n.y*n.y);return{t:r,x:-n.y/i,y:n.x/i}}__normal3(r){const n=this.derivative(r),i=this.derivative(r+.01),a=Wn(n.x*n.x+n.y*n.y+n.z*n.z),u=Wn(i.x*i.x+i.y*i.y+i.z*i.z);n.x/=a,n.y/=a,n.z/=a,i.x/=u,i.y/=u,i.z/=u;const o={x:i.y*n.z-i.z*n.y,y:i.z*n.x-i.x*n.z,z:i.x*n.y-i.y*n.x},s=Wn(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=s,o.y/=s,o.z/=s;const c=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:r,x:c[0]*n.x+c[1]*n.y+c[2]*n.z,y:c[3]*n.x+c[4]*n.y+c[5]*n.z,z:c[6]*n.x+c[7]*n.y+c[8]*n.z}}hull(r){let n=this.points,i=[],a=[],u=0;for(a[u++]=n[0],a[u++]=n[1],a[u++]=n[2],this.order===3&&(a[u++]=n[3]);n.length>1;){i=[];for(let o=0,s,c=n.length-1;o<c;o++)s=K.lerp(r,n[o],n[o+1]),a[u++]=s,i.push(s);n=i}return a}split(r,n){if(r===0&&!!n)return this.split(n).left;if(n===1)return this.split(r).right;const i=this.hull(r),a={left:this.order===2?new Ne([i[0],i[3],i[5]]):new Ne([i[0],i[4],i[7],i[9]]),right:this.order===2?new Ne([i[5],i[4],i[2]]):new Ne([i[9],i[8],i[6],i[3]]),span:i};return a.left._t1=K.map(0,0,1,this._t1,this._t2),a.left._t2=K.map(r,0,1,this._t1,this._t2),a.right._t1=K.map(r,0,1,this._t1,this._t2),a.right._t2=K.map(1,0,1,this._t1,this._t2),n?(n=K.map(n,r,1,0,1),a.right.split(n).left):a}extrema(){const r={};let n=[];return this.dims.forEach(function(i){let a=function(o){return o[i]},u=this.dpoints[0].map(a);r[i]=K.droots(u),this.order===3&&(u=this.dpoints[1].map(a),r[i]=r[i].concat(K.droots(u))),r[i]=r[i].filter(function(o){return o>=0&&o<=1}),n=n.concat(r[i].sort(K.numberSort))}.bind(this)),r.values=n.sort(K.numberSort).filter(function(i,a){return n.indexOf(i)===a}),r}bbox(){const r=this.extrema(),n={};return this.dims.forEach(function(i){n[i]=K.getminmax(this,i,r[i])}.bind(this)),n}overlaps(r){const n=this.bbox(),i=r.bbox();return K.bboxoverlap(n,i)}offset(r,n){if(typeof n<"u"){const i=this.get(r),a=this.normal(r),u={c:i,n:a,x:i.x+a.x*n,y:i.y+a.y*n};return this._3d&&(u.z=i.z+a.z*n),u}if(this._linear){const i=this.normal(0),a=this.points.map(function(u){const o={x:u.x+r*i.x,y:u.y+r*i.y};return u.z&&i.z&&(o.z=u.z+r*i.z),o});return[new Ne(a)]}return this.reduce().map(function(i){return i._linear?i.offset(r)[0]:i.scale(r)})}simple(){if(this.order===3){const a=K.angle(this.points[0],this.points[3],this.points[1]),u=K.angle(this.points[0],this.points[3],this.points[2]);if(a>0&&u<0||a<0&&u>0)return!1}const r=this.normal(0),n=this.normal(1);let i=r.x*n.x+r.y*n.y;return this._3d&&(i+=r.z*n.z),zn(Cm(i))<Fm/3}reduce(){let r,n=0,i=0,a=.01,u,o=[],s=[],c=this.extrema().values;for(c.indexOf(0)===-1&&(c=[0].concat(c)),c.indexOf(1)===-1&&c.push(1),n=c[0],r=1;r<c.length;r++)i=c[r],u=this.split(n,i),u._t1=n,u._t2=i,o.push(u),n=i;return o.forEach(function(l){for(n=0,i=0;i<=1;)for(i=n+a;i<=1+a;i+=a)if(u=l.split(n,i),!u.simple()){if(i-=a,zn(n-i)<a)return[];u=l.split(n,i),u._t1=K.map(n,0,1,l._t1,l._t2),u._t2=K.map(i,0,1,l._t1,l._t2),s.push(u),n=i;break}n<1&&(u=l.split(n,1),u._t1=K.map(n,0,1,l._t1,l._t2),u._t2=l._t2,s.push(u))}),s}translate(r,n,i){i=typeof i=="number"?i:n;const a=this.order;let u=this.points.map((o,s)=>(1-s/a)*n+s/a*i);return new Ne(this.points.map((o,s)=>({x:o.x+r.x*u[s],y:o.y+r.y*u[s]})))}scale(r){const n=this.order;let i=!1;if(typeof r=="function"&&(i=r),i&&n===2)return this.raise().scale(i);const a=this.clockwise,u=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):r,i?i(1):r);const o=i?i(0):r,s=i?i(1):r,c=[this.offset(0,10),this.offset(1,10)],l=[],f=K.lli4(c[0],c[0].c,c[1],c[1].c);if(!f)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(h){const v=l[h*n]=K.copy(u[h*n]);v.x+=(h?s:o)*c[h].n.x,v.y+=(h?s:o)*c[h].n.y}),i?([0,1].forEach(function(h){if(!(n===2&&!!h)){var v=u[h+1],E={x:v.x-f.x,y:v.y-f.y},R=i?i((h+1)/n):r;i&&!a&&(R=-R);var L=Wn(E.x*E.x+E.y*E.y);E.x/=L,E.y/=L,l[h+1]={x:v.x+R*E.x,y:v.y+R*E.y}}}),new Ne(l)):([0,1].forEach(h=>{if(n===2&&!!h)return;const v=l[h*n],E=this.derivative(h),R={x:v.x+E.x,y:v.y+E.y};l[h+1]=K.lli4(v,R,f,u[h+1])}),new Ne(l))}outline(r,n,i,a){if(n=n===void 0?r:n,this._linear){const W=this.normal(0),_=this.points[0],b=this.points[this.points.length-1];let I,V,q;i===void 0&&(i=r,a=n),I={x:_.x+W.x*r,y:_.y+W.y*r},q={x:b.x+W.x*i,y:b.y+W.y*i},V={x:(I.x+q.x)/2,y:(I.y+q.y)/2};const Y=[I,V,q];I={x:_.x-W.x*n,y:_.y-W.y*n},q={x:b.x-W.x*a,y:b.y-W.y*a},V={x:(I.x+q.x)/2,y:(I.y+q.y)/2};const ne=[q,V,I],ye=K.makeline(ne[2],Y[0]),he=K.makeline(Y[2],ne[0]),ke=[ye,new Ne(Y),he,new Ne(ne)];return new Ka(ke)}const u=this.reduce(),o=u.length,s=[];let c=[],l,f=0,h=this.length();const v=typeof i<"u"&&typeof a<"u";function E(W,_,b,I,V){return function(q){const Y=I/b,ne=(I+V)/b,ye=_-W;return K.map(q,0,1,W+Y*ye,W+ne*ye)}}u.forEach(function(W){const _=W.length();v?(s.push(W.scale(E(r,i,h,f,_))),c.push(W.scale(E(-n,-a,h,f,_)))):(s.push(W.scale(r)),c.push(W.scale(-n))),f+=_}),c=c.map(function(W){return l=W.points,l[3]?W.points=[l[3],l[2],l[1],l[0]]:W.points=[l[2],l[1],l[0]],W}).reverse();const R=s[0].points[0],L=s[o-1].points[s[o-1].points.length-1],N=c[o-1].points[c[o-1].points.length-1],F=c[0].points[0],C=K.makeline(N,R),B=K.makeline(L,F),U=[C].concat(s).concat([B]).concat(c);return new Ka(U)}outlineshapes(r,n,i){n=n||r;const a=this.outline(r,n).curves,u=[];for(let o=1,s=a.length;o<s/2;o++){const c=K.makeshape(a[o],a[s-o],i);c.startcap.virtual=o>1,c.endcap.virtual=o<s/2-1,u.push(c)}return u}intersects(r,n){return r?r.p1&&r.p2?this.lineIntersects(r):(r instanceof Ne&&(r=r.reduce()),this.curveintersects(this.reduce(),r,n)):this.selfintersects(n)}lineIntersects(r){const n=_s(r.p1.x,r.p2.x),i=_s(r.p1.y,r.p2.y),a=Ps(r.p1.x,r.p2.x),u=Ps(r.p1.y,r.p2.y);return K.roots(this.points,r).filter(o=>{var s=this.get(o);return K.between(s.x,n,a)&&K.between(s.y,i,u)})}selfintersects(r){const n=this.reduce(),i=n.length-2,a=[];for(let u=0,o,s,c;u<i;u++)s=n.slice(u,u+1),c=n.slice(u+2),o=this.curveintersects(s,c,r),a.push(...o);return a}curveintersects(r,n,i){const a=[];r.forEach(function(o){n.forEach(function(s){o.overlaps(s)&&a.push({left:o,right:s})})});let u=[];return a.forEach(function(o){const s=K.pairiteration(o.left,o.right,i);s.length>0&&(u=u.concat(s))}),u}arcs(r){return r=r||.5,this._iterate(r,[])}_error(r,n,i,a){const u=(a-i)/4,o=this.get(i+u),s=this.get(a-u),c=K.dist(r,n),l=K.dist(r,o),f=K.dist(r,s);return zn(l-c)+zn(f-c)}_iterate(r,n){let i=0,a=1,u;do{u=0,a=1;let o=this.get(i),s,c,l,f,h=!1,v=!1,E,R=a,L=1;do if(v=h,f=l,R=(i+a)/2,s=this.get(R),c=this.get(a),l=K.getccenter(o,s,c),l.interval={start:i,end:a},h=this._error(l,o,i,a)<=r,E=v&&!h,E||(L=a),h){if(a>=1){if(l.interval.end=L=1,f=l,a>1){let F={x:l.x+l.r*Dm(l.e),y:l.y+l.r*Am(l.e)};l.e+=K.angle({x:l.x,y:l.y},F,this.get(1))}break}a=a+(a-i)/2}else a=R;while(!E&&u++<100);if(u>=100)break;f=f||l,n.push(f),i=L}while(a<1);return n}},na=e=>e.quadratic!==void 0,lo=e=>e.cubic1!==void 0&&e.cubic2!==void 0,Sm=(e,r,n=0)=>cn(e,r,n),cn=(e,r,n=0)=>{if(isNaN(n))throw Error("bend is NaN");if(n<-1||n>1)throw Error("Expects bend range of -1 to 1");const i=Je.interpolate(.5,e,r);let a=i;r.y<e.y?a=n>0?{x:Math.min(e.x,r.x),y:Math.min(e.y,r.y)}:{x:Math.max(e.x,r.x),y:Math.max(e.y,r.y)}:a=n>0?{x:Math.max(e.x,r.x),y:Math.min(e.y,r.y)}:{x:Math.min(e.x,r.x),y:Math.max(e.y,r.y)};const u=Je.interpolate(Math.abs(n),i,a);return fl(e,r,u)},Mm=(e,r,n,i)=>{const a=cn(e,r,n);return new ra(a.a,a.quadratic,a.b).compute(i)},ll=(e,r,n)=>[`M ${e.x} ${e.y} Q ${n.x} ${n.y} ${r.x} ${r.y}`],Ai=e=>{if(lo(e))return _m(e);if(na(e))return Pm(e);throw new Error("Unknown bezier type")},Im=(e,r,n,i)=>({a:Object.freeze(e),b:Object.freeze(r),cubic1:Object.freeze(n),cubic2:Object.freeze(i)}),_m=e=>{const{a:r,cubic1:n,cubic2:i,b:a}=e,u=new ra(r,n,i,a);return Object.freeze({...e,length:()=>u.length(),interpolate:o=>u.compute(o),nearest:o=>{throw new Error("not implemented")},bbox:()=>{const{x:o,y:s}=u.bbox(),c=o.size,l=s.size;if(c===void 0)throw new Error("x.size not present on calculated bbox");if(l===void 0)throw new Error("x.size not present on calculated bbox");return me.fromTopLeft({x:o.min,y:s.min},c,l)},toString:()=>u.toString(),toSvgString:()=>["brrup"],kind:"bezier/cubic"})},fl=(e,r,n)=>({a:Object.freeze(e),b:Object.freeze(r),quadratic:Object.freeze(n)}),Pm=e=>{const{a:r,b:n,quadratic:i}=e,a=new ra(r,i,n);return Object.freeze({...e,length:()=>a.length(),interpolate:u=>a.compute(u),nearest:u=>{throw new Error("not implemented")},bbox:()=>{const{x:u,y:o}=a.bbox(),s=u.size,c=o.size;if(s===void 0)throw new Error("x.size not present on calculated bbox");if(c===void 0)throw new Error("x.size not present on calculated bbox");return me.fromTopLeft({x:u.min,y:o.min},s,c)},toString:()=>a.toString(),toSvgString:()=>ll(r,n,i),kind:"bezier/quadratic"})},hl=()=>({attackBend:-1,decayBend:-.3,releaseBend:-.3,peakLevel:1,initialLevel:0,sustainLevel:.6,releaseLevel:0,attackDuration:600,decayDuration:200,releaseDuration:800,shouldLoop:!1}),Rm=Object.freeze({attack:["decay","release"],decay:["sustain","release"],sustain:["release"],release:["complete"],complete:null}),Bm=class extends rr{#e;#t;#r;#n;#i;attackDuration;decayDuration;releaseDuration;decayDurationTotal;shouldLoop;constructor(e){super();this.attackDuration=e.attackDuration??300,this.decayDuration=e.decayDuration??500,this.releaseDuration=e.releaseDuration??1e3,this.shouldLoop=e.shouldLoop??!1,this.#e=new Qi(Rm,{initial:"attack"}),this.#e.addEventListener("change",r=>{r.newState==="release"&&this.#i&&this.#r?.reset(),super.fireEvent("change",r)}),this.#e.addEventListener("stop",r=>{super.fireEvent("complete",r)}),this.#t=nr,this.#n=this.#i=!1,this.decayDurationTotal=this.attackDuration+this.decayDuration}switchState(){if(this.#r===void 0)return!1;let e=this.#r.elapsed;const r=this.#i&&!this.#n;let n=!1;do switch(n=!1,this.#e.state){case"attack":(e>this.attackDuration||r)&&(this.#e.next(),n=!0);break;case"decay":(e>this.decayDurationTotal||r)&&(this.#e.next(),n=!0);break;case"sustain":(!this.#n||r)&&(e=0,this.#e.next(),this.#r?.reset(),n=!0);break;case"release":e>this.releaseDuration&&(this.#e.next(),n=!0);break;case"complete":this.shouldLoop&&this.trigger(this.#i)}while(n);return n}computeRaw(e=!0){if(this.#r===void 0)return[void 0,0,this.#e.state];e&&this.switchState();const r=this.#e.state,n=this.#r.elapsed;let i=0;const a=this.#e.state;switch(a){case"attack":i=n/this.attackDuration;break;case"decay":i=(n-this.attackDuration)/this.decayDuration;break;case"sustain":i=1;break;case"release":i=Math.min(n/this.releaseDuration,1);break;case"complete":return[void 0,1,r];default:throw new Error(`State machine in unknown state: ${a}`)}return[a,i,r]}get isDone(){return this.#e.isDone}onTrigger(){}trigger(e=!1){this.onTrigger(),this.#e.reset(),this.#r=this.#t(),this.#n=e,this.#i=e}compute(){}release(){this.isDone||!this.#i||(this.#n=!1,this.compute())}},Nm=class extends Bm{attackPath;decayPath;releasePath;initialLevel;peakLevel;releaseLevel;sustainLevel;attackBend;decayBend;releaseBend;initialLevelOverride;retrigger;releasedAt;constructor(e){super(e);this.initialLevel=e.initialLevel??0,this.peakLevel=e.peakLevel??1,this.releaseLevel=e.releaseLevel??0,this.sustainLevel=e.sustainLevel??.75,this.retrigger=e.retrigger??!0,this.attackBend=e.attackBend??0,this.releaseBend=e.releaseBend??0,this.decayBend=e.decayBend??0;const r=1;this.attackPath=Ai(cn({x:0,y:this.initialLevel},{x:r,y:this.peakLevel},-this.attackBend)),this.decayPath=Ai(cn({x:0,y:this.peakLevel},{x:r,y:this.sustainLevel},-this.decayBend)),this.releasePath=Ai(cn({x:0,y:this.sustainLevel},{x:r,y:this.releaseLevel},-this.releaseBend))}onTrigger(){if(this.initialLevelOverride=void 0,!this.retrigger){const[e,r,n]=this.compute();!Number.isNaN(r)&&r>0&&(this.initialLevelOverride=r)}}get value(){return this.compute(!0)[1]}compute(e=!0){const[r,n]=super.computeRaw(e);if(r===void 0)return[void 0,NaN,NaN];let i;switch(r){case"attack":i=this.attackPath.interpolate(n).y,this.initialLevelOverride!==void 0&&(i=er(i,0,1,this.initialLevelOverride,1)),this.releasedAt=i;break;case"decay":i=this.decayPath.interpolate(n).y,this.releasedAt=i;break;case"sustain":i=this.sustainLevel,this.releasedAt=i;break;case"release":i=this.releasePath.interpolate(n).y,this.releasedAt!==void 0&&(i=er(i,0,this.sustainLevel,0,this.releasedAt));break;case"complete":i=this.releaseLevel,this.releasedAt=void 0;break;default:throw new Error(`Unknown state: ${r}`)}return[r,i,n]}},fo=e=>new Nm(e);async function*dl(e){const r=fo(e.env),n=e.sampleRateMs??100;r.trigger();for await(const i of Xu(()=>{if(!r.isDone)return r.value},{fixed:n,signal:e.signal}))yield i}var ho={};Z(ho,{accelerationForce:()=>yg,angleFromAccelerationForce:()=>Nl,angleFromVelocityForce:()=>zl,angularForce:()=>Bl,apply:()=>vg,attractionForce:()=>hg,computeAccelerationToTarget:()=>Wl,computeAttractionForce:()=>Rl,computePositionFromAngle:()=>kl,computePositionFromVelocity:()=>wo,computeVelocity:()=>po,constrainBounce:()=>fg,guard:()=>lg,magnitudeForce:()=>mg,nullForce:()=>gg,orientationForce:()=>Ag,pendulumForce:()=>Eg,springForce:()=>wg,targetForce:()=>dg,velocityForce:()=>pg});var me={};Z(me,{area:()=>ug,cardinal:()=>Bi,center:()=>_l,corners:()=>go,distanceFromCenter:()=>Xm,distanceFromExterior:()=>Zm,edges:()=>Pl,empty:()=>qm,emptyPositioned:()=>Sl,fromCenter:()=>Ym,fromElement:()=>xm,fromNumbers:()=>Hm,fromTopLeft:()=>eg,getEdgeX:()=>wu,getEdgeY:()=>Eu,guard:()=>ir,intersectsPoint:()=>Vn,isEmpty:()=>Um,isEqual:()=>Ml,isEqualSize:()=>Vm,isIntersecting:()=>og,isPlaceholder:()=>xn,isPositioned:()=>wt,isRect:()=>Sr,isRectPositioned:()=>Ri,lengths:()=>ig,maxFromCorners:()=>Qm,multiply:()=>rg,multiplyScalar:()=>ng,normaliseByRect:()=>tg,perimeter:()=>ag,placeholder:()=>mo,placeholderPositioned:()=>pu,random:()=>sg,randomPoint:()=>cg,subtract:()=>Km,sum:()=>Jm,toArray:()=>Gm});var St={};Z(St,{area:()=>Wm,bbox:()=>wl,center:()=>zm,circumference:()=>pl,distanceCenter:()=>vo,distanceFromExterior:()=>$m,interpolate:()=>ml,intersectionLine:()=>jm,intersections:()=>Dl,isCircle:()=>ui,isCirclePositioned:()=>ia,isContainedBy:()=>El,isEqual:()=>Al,isIntersecting:()=>bl,isNaN:()=>km,isPositioned:()=>at,length:()=>gl,multiplyScalar:()=>Om,nearest:()=>Fl,point:()=>yl,randomPoint:()=>Tm,toPath:()=>Lm,toPositioned:()=>yo,toSvg:()=>Cl});var vl=(e,r)=>{const n=e.x-Math.max(r.x,Math.min(e.x,r.x+r.width)),i=e.y-Math.max(r.y,Math.min(e.y,r.y+r.height));return n*n+i*i<e.radius*e.radius},Rs=(e,r)=>Dl(e,r).length===2,Pi=Math.PI*2,at=e=>e.x!==void 0&&e.y!==void 0,ui=e=>e.radius!==void 0,ia=e=>ui(e)&&at(e),yl=(e,r,n)=>(n===void 0&&(at(e)?n=e:n={x:0,y:0}),{x:Math.cos(-r)*e.radius+n.x,y:Math.sin(-r)*e.radius+n.y}),aa=(e,r="circle")=>{if(at(e)&&pe(e,"circle"),Number.isNaN(e.radius))throw new Error(`${r}.radius is NaN`);if(e.radius<=0)throw new Error(`${r}.radius must be greater than zero`)},gu=(e,r="circle")=>{if(!at(e))throw new Error("Expected a positioned circle with x,y");return aa(e,r)},zm=e=>at(e)?Object.freeze({x:e.x,y:e.y}):Object.freeze({x:e.radius,y:e.radius}),ml=(e,r)=>yl(e,r*Pi),gl=e=>pl(e),pl=e=>(aa(e),Pi*e.radius),Wm=e=>(aa(e),Math.PI*e.radius*e.radius),wl=e=>at(e)?me.fromCenter(e,e.radius*2,e.radius*2):{width:e.radius*2,height:e.radius*2},El=(e,r,n)=>{const i=vo(e,r);if(ui(r))return i<Math.abs(e.radius-r.radius);if(O.isPoint(r))return n!==void 0?i<Math.abs(e.radius-n):i<=e.radius;throw new Error("b parameter is expected to be CirclePositioned or Point")},km=e=>!!(Number.isNaN(e.radius)||at(e)&&(Number.isNaN(e.x)||Number.isNaN(e.y))),bl=(e,r,n)=>O.isEqual(e,r)||El(e,r,n)?!0:ui(r)?Rs(e,r):me.isRectPositioned(r)?vl(e,r):O.isPoint(r)&&n!==void 0?Rs(e,{...r,radius:n}):!1,Dl=(e,r)=>{const n=O.subtract(r,e),i=Math.sqrt(n.y*n.y+n.x*n.x);if(i>e.radius+r.radius)return[];if(i<Math.abs(e.radius-r.radius))return[];if(Al(e,r))return[];const a=(e.radius*e.radius-r.radius*r.radius+i*i)/(2*i),u={x:e.x+n.x*a/i,y:e.y+n.y*a/i},o=Math.sqrt(e.radius*e.radius-a*a),s={x:-n.y*(o/i),y:n.x*(o/i)};return[O.sum(u,s),O.subtract(u,s)]},Al=(e,r)=>e.radius!==r.radius?!1:at(e)&&at(r)?!(e.x!==r.x||e.y!==r.y||e.z!==r.z):(!at(e)&&!at(r),!1),Tm=(e,r={})=>{const n=at(e)?e:{x:0,y:0},i=r.strategy??"uniform",a=r.randomSource??Xe;switch(i){case"naive":return O.sum(n,Ge.toCartesian(a()*e.radius,a()*Pi));case"uniform":return O.sum(n,Ge.toCartesian(Math.sqrt(a())*e.radius,a()*Pi));default:throw new Error(`Unknown strategy ${i}`)}};function Om(e,r){if(at(e)){const n=O.multiplyScalar(e,r);return Object.freeze({...e,...n,radius:e.radius*r})}else return Object.freeze({...e,radius:e.radius*r})}var vo=(e,r)=>(gu(e,"a"),ia(r)&&gu(r,"b"),O.distance(e,r)),$m=(e,r)=>{if(gu(e,"a"),ia(r))return Math.max(0,vo(e,r)-e.radius-r.radius);if(O.isPoint(r)){const n=O.distance(e,r);return n<e.radius?0:n}else throw new Error("Second parameter invalid type")},Cl=(e,r,n)=>{if(ui(e)){if(n!==void 0)return Ja(e.radius,n,r);if(at(e))return Ja(e.radius,e,r);throw new Error("origin parameter needed for non-positioned circle")}else{if(n!==void 0)return Ja(e,n,r);throw new Error("origin parameter needed")}},Ja=(e,r,n)=>{const{x:i,y:a}=r,u=n?"1":"0";return`
    M ${i}, ${a}
    m -${e}, 0
    a ${e},${e} 0 1,${u} ${e*2},0
    a ${e},${e} 0 1,${u} -${e*2},0
  `.split(`
`)},Fl=(e,r)=>{const n=i=>{const a=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),u=i.x+i.radius*((r.x-i.x)/a),o=i.y+i.radius*((r.y-i.y)/a);return{x:u,y:o}};if(Array.isArray(e)){const i=e.map(u=>n(u)),a=i.map(u=>O.distance(u,r));return Object.freeze(i[Ht.minIndex(...a)])}else return Object.freeze(n(e))},yo=(e,r,n)=>{if(at(e))return e;const i=O.getPointParam(r,n);return Object.freeze({...e,...i})},Lm=e=>(aa(e),Object.freeze({...e,nearest:r=>Fl(e,r),interpolate:r=>ml(e,r),bbox:()=>wl(e),length:()=>gl(e),toSvgString:(r=!0)=>Cl(e,r),kind:"circular"})),jm=(e,r)=>{const n={x:r.b.x-r.a.x,y:r.b.y-r.a.y},i={x:r.a.x-e.x,y:r.a.y-e.y},a=(n.x*i.x+n.y*i.y)*-2,u=2*(n.x*n.x+n.y*n.y),o=Math.sqrt(a*a-2*u*(i.x*i.x+i.y*i.y-e.radius*e.radius));if(Number.isNaN(o))return[];const s=(a-o)/u,c=(a+o)/u,l=[];return s<=1&&s>=0&&l.push({x:r.a.x+n.x*s,y:r.a.y+n.y*s}),c<=1&&c>=0&&l.push({x:r.a.x+n.x*c,y:r.a.y+n.y*c}),l},qm=Object.freeze({width:0,height:0}),Sl=Object.freeze({x:0,y:0,width:0,height:0}),mo=Object.freeze({width:Number.NaN,height:Number.NaN}),pu=Object.freeze({x:Number.NaN,y:Number.NaN,width:Number.NaN,height:Number.NaN}),Um=e=>e.width===0&&e.height===0,xn=e=>Number.isNaN(e.width)&&Number.isNaN(e.height),wt=e=>e.x!==void 0&&e.y!==void 0,Sr=e=>!(e===void 0||e.width===void 0||e.height===void 0),Ri=e=>Sr(e)&&wt(e),xm=e=>({width:e.clientWidth,height:e.clientHeight}),Vm=(e,r)=>{if(e===void 0)throw new Error("a undefined");if(r===void 0)throw new Error("b undefined");return e.width===r.width&&e.height===r.height};function Hm(e,r,n,i){if(n===void 0||i===void 0){if(typeof e!="number")throw new Error("width is not an number");if(typeof r!="number")throw new Error("height is not an number");return Object.freeze({width:e,height:r})}if(typeof e!="number")throw new Error("x is not an number");if(typeof r!="number")throw new Error("y is not an number");if(typeof n!="number")throw new Error("width is not an number");if(typeof i!="number")throw new Error("height is not an number");return Object.freeze({x:e,y:r,width:n,height:i})}function Gm(e){if(wt(e))return[e.x,e.y,e.width,e.height];if(Sr(e))return[e.width,e.height];throw new Error(`rect param is not a rectangle. Got: ${JSON.stringify(e)}`)}var Ml=(e,r)=>wt(e)&&wt(r)?O.isEqual(e,r)?e.width===r.width&&e.height===r.height:!1:!wt(e)&&!wt(r)?e.width===r.width&&e.height===r.height:!1;function Km(e,r,n){if(e===void 0)throw new Error("First parameter undefined");if(typeof r=="number"){const i=n===void 0?0:n;return Object.freeze({...e,width:e.width-r,height:e.height-i})}else return Object.freeze({...e,width:e.width-r.width,height:e.height-r.height})}function Jm(e,r,n){if(e===void 0)throw new Error("First parameter undefined");if(typeof r=="number"){const i=n===void 0?0:n;return Object.freeze({...e,width:e.width+r,height:e.height+i})}else return Object.freeze({...e,width:e.width+r.width,height:e.height+r.height})}function Vn(e,r,n){ir(e,"rect");let i=0,a=0;if(typeof r=="number"){if(n===void 0)throw new Error("x and y coordinate needed");i=r,a=n}else i=r.x,a=r.y;if(wt(e)){if(i-e.x>e.width||i<e.x||a-e.y>e.height||a<e.y)return!1}else if(i>e.width||i<0||a>e.height||a<0)return!1;return!0}var Ym=(e,r,n)=>{O.guard(e,"origin"),mn(r,"width"),mn(n,"height");const i=r/2,a=n/2;return{x:e.x-i,y:e.y-a,width:r,height:n}},Zm=(e,r)=>{if(Il(e,"rect"),O.guard(r,"pt"),Vn(e,r))return 0;const n=Math.max(e.x-r.x,0,r.x-e.x+e.width),i=Math.max(e.y-r.y,0,r.y-e.y+e.height);return Math.sqrt(n*n+i*i)},Xm=(e,r)=>O.distance(_l(e),r),Qm=(e,r,n,i)=>{if(e.y>n.y)throw new Error("topLeft.y greater than bottomRight.y");if(e.y>i.y)throw new Error("topLeft.y greater than bottomLeft.y");const a=r.x-e.x,u=n.x-i.x,o=Math.abs(i.y-e.y),s=Math.abs(n.y-r.y);return{x:Math.min(e.x,i.x),y:Math.min(r.y,e.y),width:Math.max(a,u),height:Math.max(o,s)}},mn=(e,r="Dimension")=>{if(e===void 0)throw Error(`${r} is undefined`);if(isNaN(e))throw Error(`${r} is NaN`);if(e<0)throw Error(`${r} cannot be negative`)},ir=(e,r="rect")=>{if(e===void 0)throw Error("{$name} undefined");wt(e)&&O.guard(e,r),mn(e.width,r+".width"),mn(e.height,r+".height")},Il=(e,r="rect")=>{if(!wt(e))throw new Error(`Expected ${r} to have x,y`);ir(e,r)},eg=(e,r,n)=>(mn(r,"width"),mn(n,"height"),O.guard(e,"origin"),{x:e.x,y:e.y,width:r,height:n}),go=(e,r)=>{if(ir(e),r===void 0&&O.isPoint(e))r=e;else if(r===void 0)throw new Error("Unpositioned rect needs origin param");return[{x:r.x,y:r.y},{x:r.x+e.width,y:r.y},{x:r.x+e.width,y:r.y+e.height},{x:r.x,y:r.y+e.height}]},Bi=(e,r)=>{const{x:n,y:i,width:a,height:u}=e;switch(r){case"nw":return Object.freeze({x:n,y:i});case"n":return Object.freeze({x:n+a/2,y:i});case"ne":return Object.freeze({x:n+a,y:i});case"sw":return Object.freeze({x:n,y:i+u});case"s":return Object.freeze({x:n+a/2,y:i+u});case"se":return Object.freeze({x:n+a,y:i+u});case"w":return Object.freeze({x:n,y:i+u/2});case"e":return Object.freeze({x:n+a,y:i+u/2});case"center":return Object.freeze({x:n+a/2,y:i+u/2});default:throw new Error(`Unknown direction: ${r}`)}},wu=(e,r)=>{switch(ir(e),r){case"top":return O.isPoint(e)?e.x:0;case"bottom":return O.isPoint(e)?e.x:0;case"left":return O.isPoint(e)?e.y:0;case"right":return O.isPoint(e)?e.x+e.width:e.width}},Eu=(e,r)=>{switch(ir(e),r){case"top":return O.isPoint(e)?e.y:0;case"bottom":return O.isPoint(e)?e.y+e.height:e.height;case"left":return O.isPoint(e)?e.y:0;case"right":return O.isPoint(e)?e.y:0}},tg=(e,r,n)=>{let i;if(n===void 0)if(Sr(r))n=r.height,i=r.width;else throw new Error("Expects rectangle or width and height parameters for normaliseBy");else if(typeof r=="number")i=r;else throw new Error("Expects rectangle or width and height parameters for normaliseBy");return wt(e)?Object.freeze({x:e.x/i,y:e.y/n,width:e.width/i,height:e.height/n}):Object.freeze({width:e.width/i,height:e.height/n})};function rg(e,r,n){if(ir(e,"a"),Sr(r))return Ri(e)?Object.freeze({...e,x:e.x*r.width,y:e.y*r.height,width:e.width*r.width,height:e.height*r.height}):Object.freeze({...e,width:e.width*r.width,height:e.height*r.height});if(typeof r!="number")throw new Error(`Expected second parameter of type Rect or number. Got ${JSON.stringify(r)}`);return n===void 0&&(n=r),Ri(e)?Object.freeze({...e,x:e.x*r,y:e.y*n,width:e.width*r,height:e.height*n}):Object.freeze({...e,width:e.width*r,height:e.height*n})}function ng(e,r){return wt(e)?Object.freeze({...e,x:e.x*r,y:e.y*r,width:e.width*r,height:e.height*r}):Object.freeze({...e,width:e.width*r,height:e.height*r})}var _l=(e,r)=>(ir(e),r===void 0&&O.isPoint(e)?r=e:r===void 0&&(r={x:0,y:0}),Object.freeze({x:r.x+e.width/2,y:r.y+e.height/2})),ig=e=>(Il(e,"rect"),Pl(e).map(r=>Je.length(r))),Pl=(e,r)=>{const n=go(e,r);return Je.joinPointsToLines(...n,n[0])},ag=e=>(ir(e),e.height+e.height+e.width+e.width),ug=e=>(ir(e),e.height*e.width),og=(e,r)=>{if(!Ri(e))throw new Error("a parameter should be RectPositioned");if(ia(r))return vl(r,e);if(O.isPoint(r))return Vn(e,r);throw new Error(`Unknown shape for b: ${JSON.stringify(r)}`)},sg=e=>(e===void 0&&(e=Xe),Object.freeze({x:e(),y:e(),width:e(),height:e()})),cg=(e,r={})=>{const n=r.randomSource??Xe,i=r.margin??{x:0,y:0},a=n()*(e.width-i.x-i.x),u=n()*(e.height-i.y-i.y),o={x:a+i.x,y:u+i.y};return wt(e)?O.sum(o,e):Object.freeze(o)},lg=(e,r="t")=>{if(e===void 0)throw new Error(`Parameter ${r} is undefined. Expected ForceAffected`);if(e===null)throw new Error(`Parameter ${r} is null. Expected ForceAffected`);if(typeof e!="object")throw new Error(`Parameter ${r} is type ${typeof e}. Expected object of shape ForceAffected`)},fg=(e={width:1,height:1},r=1)=>{const n=wu(e,"left"),i=wu(e,"right"),a=Eu(e,"top"),u=Eu(e,"bottom");return o=>{const s=wo(o.position??O.Empty,o.velocity??O.Empty);let c=o.velocity??O.Empty,{x:l,y:f}=s;return l>i?(l=i,c=O.invert(O.multiply(c,r),"x")):l<n&&(l=n,c=O.invert(O.multiply(c,r),"x")),f>u?(f=u,c=O.multiply(O.invert(c,"y"),r)):s.y<a&&(f=a,c=O.invert(O.multiply(c,r),"y")),Object.freeze({...o,position:{x:l,y:f},velocity:c})}},hg=(e,r,n={})=>i=>{let a=i.acceleration??O.Empty;return e.forEach(u=>{if(u===i)return;const o=Rl(u,i,r,n);a=O.sum(a,o)}),{...i,acceleration:a}},Rl=(e,r,n,i={})=>{if(e.position===void 0)throw new Error("attractor.position not set");if(r.position===void 0)throw new Error("attractee.position not set");const a=i.min??.01,u=i.max??.7,o=O.normalise(O.subtract(e.position,r.position)),s=zt(O.distance(o),a,u);return O.multiply(o,n*(e.mass??1)*(r.mass??1)/(s*s))},dg=(e,r={})=>i=>{const a=Wl(e,i.position??{x:.5,y:.5},r);return{...i,acceleration:O.sum(i.acceleration??O.Empty,a)}},vg=(e,...r)=>{if(e===void 0)throw new Error("t parameter is undefined");r.forEach(u=>{u!=null&&(typeof u=="function"?e=u(e):e={...e,acceleration:O.sum(e.acceleration??O.Empty,u)})});const n=po(e.acceleration??O.Empty,e.velocity??O.Empty),i=wo(e.position??O.Empty,n);return{...e,position:i,velocity:n,acceleration:O.Empty}},yg=(e,r="ignored")=>n=>Object.freeze({...n,acceleration:ua(e,n,r)}),ua=(e,r,n="ignored")=>{let i;if(n==="dampen")i=a=>O.divide(e,a,a);else if(n==="multiply")i=a=>O.multiply(e,a,a);else if(n==="ignored")i=a=>e;else throw new Error(`Unknown 'mass' parameter '${n}. Expected 'dampen', 'multiply' or 'ignored'`);return O.sum(r.acceleration??O.Empty,i(r.mass??1))},mg=(e,r="ignored")=>n=>{if(n.velocity===void 0)return n;const i=O.distance(O.normalise(n.velocity)),a=e*i*i,u=O.multiply(O.invert(n.velocity),a);return Object.freeze({...n,acceleration:ua(u,n,r)})},gg=e=>e,pg=(e,r)=>{const n=O.pipeline(O.invert,i=>O.multiply(i,e));return i=>{if(i.velocity===void 0)return i;const a=n(i.velocity);return Object.freeze({...i,acceleration:ua(a,i,r)})}},Bl=()=>e=>{const r=e.angularAcceleration??0,n=e.angularVelocity??0,i=e.angle??0,a=n+r,u=i+a;return Object.freeze({...e,angle:u,angularVelocity:a,angularAcceleration:0})},Nl=(e=20)=>r=>{const n=r.acceleration??O.Empty;return Object.freeze({...r,angularAcceleration:n.x*e})},zl=(e=1)=>r=>{const n=O.angle(r.velocity??O.Empty);return Object.freeze({...r,angle:e<1?dd(e,r.angle??0,n):n})},wg=(e,r=.5,n=2e-4,i=.999)=>a=>{const u=O.subtract(a.position??O.Empty,e),o=O.distance(u),s=Math.abs(r-o),c=O.pipelineApply(u,O.normalise,v=>O.multiply(v,-n*s)),l=ua(c,a,"dampen"),f=po(l??O.Empty,a.velocity??O.Empty),h=O.multiply(f,i,i);return{...a,velocity:h,acceleration:O.Empty}},Eg=(e={x:.5,y:0},r={})=>n=>{const i=r.length??O.distance(e,n.position??O.Empty),a=r.speed??.001,u=r.damping??.995;let o=n.angle;o===void 0&&(n.position?o=O.angle(e,n.position)-Math.PI/2:o=0);const s=-1*a/i*Math.sin(o),c=(n.angularVelocity??0)+s;return o+=c,Object.freeze({angularVelocity:c*u,angle:o,position:kl(i,o+Math.PI/2,e)})},po=(e,r,n)=>{const i=O.sum(r,e);return n!==void 0?O.clampMagnitude(i,n):i},Wl=(e,r,n={})=>{const i=n.diminishBy??.001,a=O.subtract(e,r);return n.range&&O.compare(O.abs(a),n.range)===-2?O.Empty:O.multiply(a,i)},wo=(e,r)=>O.sum(e,r),kl=(e,r,n)=>Ge.toCartesian(e,r,n),bg=Bl(),Dg=Nl(),Ag=(e=.5)=>{const r=zl(e);return n=>(n=bg(n),n=Dg(n),n=r(n),n)},Eo={};Z(Eo,{saw:()=>_g,sine:()=>Sg,sineBipolar:()=>Mg,spring:()=>Fg,square:()=>Pg,triangle:()=>Ig});var Tl=Math.PI*2,Cg=(e={},r=0,n=1)=>{const i=e.mass??1,a=e.stiffness??100,u=e.soft??!1,o=e.damping??10,s=e.velocity??.1,c=n-r;if(u===!0||1<=o/(2*Math.sqrt(a*i))){const l=-Math.sqrt(a/i),f=-l*c-s;return h=>n-(c+h*f)*Math.E**(h*l)}else{const l=Math.sqrt(4*i*a-o**2),f=(o*c-2*i*s)/l,h=.5*l/i,v=-(.5*o)/i;return E=>n-(Math.cos(E*h)*c+Math.sin(E*h)*f)*Math.E**(E*v)}};function*Fg(e={},r){r===void 0?r=nr():typeof r=="number"&&(r=Er(r));const n=Cg(e,0,1);let i=e.countdown??10;for(;i>0;){const a=n(r.elapsed/1e3);yield a,a===1?i--:i=100}}function*Sg(e){for(typeof e=="number"&&(e=Er(e));;)yield(Math.sin(e.elapsed*Tl)+1)/2}function*Mg(e){for(typeof e=="number"&&(e=Er(e));;)yield Math.sin(e.elapsed*Tl)}function*Ig(e){for(typeof e=="number"&&(e=Er(e));;){let r=e.elapsed;r<.5?r*=2:r=2-r*2,yield r}}function*_g(e){for(typeof e=="number"&&(e=Er(e));;)yield e.elapsed}function*Pg(e){for(typeof e=="number"&&(e=Er(e));;)yield e.elapsed<.5?0:1}var Ol=(e={})=>{const r=e.clamped??!0;let n=a=>0;if(typeof e.absolute<"u"){ee(e.absolute,r?"percentage":"bipolar","opts.absolute");const a=Ss({min:-e.absolute,max:e.absolute,source:e.source});n=u=>u+a()}else if(typeof e.relative<"u")ee(e.relative,r?"percentage":"bipolar","opts.relative"),n=a=>a+iv({min:-e.relative*a,max:e.relative*a,source:e.source});else throw new Error("Either absolute or relative jitter amount is required.");return a=>{ee(a,r?"percentage":"bipolar","value");let u=n(a);return r&&(u=zt(u)),u}},Rg=e=>{const r=e/1e3;let n=performance.now();return()=>{const i=performance.now()-n;return n=performance.now(),r*i}},$l=function(e=.1,r,n,i,a){return r===void 0&&(r=0),n===void 0&&(n=1),i===void 0&&(i=r),ee(e,"bipolar","interval"),ee(n,"bipolar","end"),ee(i,"bipolar","offset"),ee(r,"bipolar","start"),bo(e,r,n,i,a)},bo=function*(e,r,n,i,a){if(r===void 0)throw new Error("Parameter 'lower' is undefined");if(e===void 0)throw new Error("Parameter 'interval' is undefined");if(n===void 0)throw new Error("Parameter 'upper' is undefined");if(a===void 0&&e<=1&&e>=0?a=10/e:a===void 0&&(a=1234),Number.isNaN(e))throw new Error("interval parameter is NaN");if(Number.isNaN(r))throw new Error("lower parameter is NaN");if(Number.isNaN(n))throw new Error("upper parameter is NaN");if(Number.isNaN(i))throw new Error("upper parameter is NaN");if(r>=n)throw new Error("lower must be less than upper");if(e===0)throw new Error("Interval cannot be zero");const u=n-r;if(Math.abs(e)>=u)throw new Error(`Interval should be between -${u} and ${u}`);let o=e>0;if(n=Math.floor(n*a),r=Math.floor(r*a),e=Math.floor(Math.abs(e*a)),e===0)throw new Error(`Interval is zero (rounding: ${a})`);if(i===void 0?i=r:i=Math.floor(i*a),i>n||i<r)throw new Error(`Start (${i/a}) must be within lower (${r/a}) and upper (${n/a})`);let s=i;yield s/a;let c=!0;for(;;)s=s+(o?e:-e),o&&s>=n?(o=!1,s=n,s===n&&c&&(s=r,o=!0)):!o&&s<=r&&(o=!0,s=r,s===r&&c&&(s=n,o=!1)),yield s/a,c=!1};try{typeof window<"u"&&(window.ixfx={...window.ixfx,Modulation:{Forces:ho,jitter:Ol,Envelopes:co,Oscillators:Eo,Easings:Ku}})}catch{}var Bg=(...e)=>us(e),Ng=(e,...r)=>as(r,e),zg=(e,r)=>{const n={...e};for(const[i,a]of Object.entries(e))typeof a=="number"?n[i]=r(a):n[i]=a;return n},Wg=(...e)=>pd(e),kg=(...e)=>Ed(e),Tg=(...e)=>bd(e),Ll=e=>!(typeof e!="number"||Number.isNaN(e)),Og=e=>$n(e);function*$g(e){for(const r of e)Ll(r)&&(yield r)}var bu=(e,r,n=!0)=>{be(Ce(e,"","v")),be(_r(r,"","every"));let i=e/r;const a=i%1;return i=Math.floor(i),(a===.5&&n||a>.5)&&i++,r*i};function*jl(e,r,n,i){be(Ce(e,"","start")),be(Ce(r,"","end")),be(Ce(n,"","steps"));const a=i?Do(i):o=>o,u=(r-e)/(n-1);if(be(Ce(u,"","step")),!Number.isFinite(u))throw new TypeError("Calculated step value is infinite");for(let o=0;o<n;o++){const s=e+u*o;yield a(s)}}function Do(e,r){be(_r(e,"positive","decimalPlaces"));let n;if(e===0)n=Math.round;else{const i=Math.pow(10,e);n=a=>Math.floor(a*i)/i}return r===void 0?n:n(r)}function Lg(e,r,n){be(Ce(r,"percentage","rangePercent")),be(Ce(e,"","baseValue"));const i=e*r,a=u=>{try{be(Ce(u,"","v"));let o=Math.abs(u-e);return Math.abs(e)<=2&&(o=Do(5,o)),o<=i}catch{return!1}};return n===void 0?a:a(n)}var jg={};Z(jg,{AudioAnalysers:()=>xl,AudioVisualisers:()=>Vl,Bluetooth:()=>ql,Camera:()=>Xl,Codec:()=>Ao,Espruino:()=>Gl,FrameProcessor:()=>rp,Serial:()=>Kl,StringReceiveBuffer:()=>Co,StringWriteBuffer:()=>Fo,VideoFile:()=>ef,genericStateTransitionsInstance:()=>_o});var ql={};Z(ql,{NordicBleDevice:()=>Ul,defaultOpts:()=>oa});var Ao=class{enc=new TextEncoder;dec=new TextDecoder("utf-8");toBuffer(e){return this.enc.encode(e)}fromBuffer(e){return this.dec.decode(e)}},Co=class{constructor(e,r=`
`){this.onData=e,this.separator=r}buffer="";stream;async close(){const e=this.stream;!e||(await e.abort(),await e.close())}clear(){this.buffer=""}writable(){return this.stream===void 0&&(this.stream=this.createWritable()),this.stream}createWritable(){const e=this;return new WritableStream({write(r){e.add(r)},close(){e.clear()}})}addImpl(e){const r=e.indexOf(this.separator);if(r<0)return this.buffer+=e,"";const n=e.substring(0,r);try{this.onData(this.buffer+n),e=e.substring(n.length+this.separator.length)}catch(i){console.warn(i)}return this.buffer="",e}add(e){for(;e.length>0;)e=this.addImpl(e)}},Fo=class{constructor(e,r={}){this.dataHandler=e,this.chunkSize=r.chunkSize??-1,this.writer=ro(this.onWrite,r.interval??10)}paused=!1;queue=new Ir;writer;stream;closed=!1;chunkSize;async close(){if(this.closed)return;const e=this.stream?.getWriter();e?.releaseLock(),await e?.close(),this.closed=!0}clear(){if(this.closed)throw new Error("Buffer closed");this.queue=new Ir}writable(){if(this.closed)throw new Error("Buffer closed");return this.stream===void 0&&(this.stream=this.createWritable()),this.stream}createWritable(){const e=this;return new WritableStream({write(r){e.add(r)},close(){e.clear()}})}async onWrite(){if(this.queue.isEmpty)return!1;if(this.paused)return console.warn("WriteBuffer.onWrite: paused..."),!0;const e=this.queue.dequeue();return e===void 0?!1:(await this.dataHandler(e),!0)}get isClosed(){return this.closed}add(e){if(this.closed)throw new Error("Buffer closed");this.chunkSize>0?this.queue.enqueue(...cv(e,this.chunkSize)):this.queue.enqueue(e),this.writer.start()}},qg=class extends rr{constructor(e,r){super();this.device=e,this.config=r,this.verboseLogging=r.debug,this.txBuffer=new Fo(async n=>{await this.writeInternal(n)},r),this.rxBuffer=new Co(n=>{this.fireEvent("data",{data:n})}),this.codec=new Ao,this.states=new Qi(_o,{initial:"ready"}),this.states.addEventListener("change",n=>{this.fireEvent("change",n),this.verbose(`${n.priorState} -> ${n.newState}`),n.priorState==="connected"&&(this.rxBuffer.clear(),this.txBuffer.clear())}),e.addEventListener("gattserverdisconnected",()=>{this.isClosed||(this.verbose("GATT server disconnected"),this.states.state="closed")}),this.verbose(`ctor ${e.name} ${e.id}`)}states;codec;rx;tx;gatt;verboseLogging=!1;rxBuffer;txBuffer;get isConnected(){return this.states.state==="connected"}get isClosed(){return this.states.state==="closed"}write(e){if(this.states.state!=="connected")throw new Error(`Cannot write while state is ${this.states.state}`);this.txBuffer.add(e)}async writeInternal(e){this.verbose(`writeInternal ${e}`);const r=this.tx;if(r===void 0)throw new Error("Unexpectedly without tx characteristic");try{await r.writeValue(this.codec.toBuffer(e))}catch(n){this.warn(n)}}disconnect(){this.states.state==="connected"&&this.gatt?.disconnect()}async connect(){const e=this.config.connectAttempts??3;this.states.state="connecting",this.verbose("connect");const r=this.device.gatt;if(r===void 0)throw new Error("Gatt not available on device");await ao(async()=>{const n=await r.connect();this.verbose("Getting primary service");const i=await n.getPrimaryService(this.config.service);this.verbose("Getting characteristics");const a=await i.getCharacteristic(this.config.rxGattCharacteristic),u=await i.getCharacteristic(this.config.txGattCharacteristic);return a.addEventListener("characteristicvaluechanged",o=>this.onRx(o)),this.rx=a,this.tx=u,this.gatt=r,this.states.state="connected",await a.startNotifications(),!0},{count:e,startMs:200})}onRx(e){if(this.rx===void 0)return;const n=e.target.value;if(n===void 0)return;let i=this.codec.fromBuffer(n.buffer);const a=Xn(i,19),u=Xn(i,17);u&&a<u&&(this.verbose("Tx plz start"),i=Qn(i,u,1),this.txBuffer.paused=!1),a&&a>u&&(this.verbose("Tx plz stop"),i=Qn(i,a,1),this.txBuffer.paused=!0),this.rxBuffer.add(i)}verbose(e){this.verboseLogging&&console.info(`${this.config.name} `,e)}log(e){console.log(`${this.config.name} `,e)}warn(e){console.warn(`${this.config.name} `,e)}},oa={chunkSize:20,service:"6e400001-b5a3-f393-e0a9-e50e24dcca9e",txGattCharacteristic:"6e400002-b5a3-f393-e0a9-e50e24dcca9e",rxGattCharacteristic:"6e400003-b5a3-f393-e0a9-e50e24dcca9e",name:"NordicDevice",connectAttempts:5,debug:!1},Ul=class extends qg{constructor(e,r={}){super(e,{...oa,...r})}},xl={};Z(xl,{AudioAnalyser:()=>sa,basic:()=>Ug,freq:()=>xg,peakLevel:()=>Vg});var Vl={};Z(Vl,{default:()=>Hl});var Hl=class{freqMaxRange=200;audio;parent;lastPointer={x:0,y:0};pointerDown=!1;pointerClicking=!1;pointerClickDelayMs=100;pointerDelaying=!1;waveTracker;freqTracker;el;constructor(e,r){this.audio=r,this.parent=e,this.waveTracker=$n(),this.freqTracker=$n(),e.innerHTML=`
    <section>
      <button id="rendererComponentToggle">\u{1F53C}</button>
      <div>
        <h1>Visualiser</h1>
        <div style="display:flex; flex-wrap: wrap">
          <div class="visPanel">
            <h2>Frequency distribution</h2>
            <br />
            <canvas id="rendererComponentFreqData" height="200" width="400"></canvas>
          </div>
          <div class="visPanel">
            <h2>Waveform</h2>
            <button id="rendererComponentWaveReset">Reset</button>
            <div>
              Press and hold on wave to measure
            </div>
            <br />
            <canvas id="rendererComponentWaveData" height="200" width="400"></canvas>
          </div>
        </div>
      </div>
    </section>
    `,this.el=e.children[0],document.getElementById("rendererComponentToggle")?.addEventListener("click",()=>{this.setExpanded(!this.isExpanded())}),this.el.addEventListener("pointermove",n=>this.onPointer(n)),this.el.addEventListener("pointerup",()=>{this.pointerDelaying=!1,this.pointerDown=!1}),this.el.addEventListener("pointerdown",()=>{this.pointerDelaying=!0,setTimeout(()=>{this.pointerDelaying&&(this.pointerDelaying=!1,this.pointerDown=!0)},this.pointerClickDelayMs)}),this.el.addEventListener("pointerleave",()=>{this.pointerDelaying=!1,this.pointerDown=!1}),document.getElementById("rendererComponentWaveReset")?.addEventListener("click",()=>{this.clear()})}renderFreq(e){if(!this.isExpanded()||!e)return;const r=document.getElementById("rendererComponentFreqData");if(r===null)throw new Error("Cannot find canvas element");const n=r.getContext("2d");if(n===null)throw new Error("Cannot create drawing context");const i=e.length,a=r.clientWidth,u=r.clientHeight;n.clearRect(0,0,a,u);const o=this.getPointerRelativeTo(r),s=a/i,c=Ht.minMaxAvg(e);for(let l=0;l<i;l++){if(!Number.isFinite(e[l]))continue;const h=(e[l]-c.min)/this.freqMaxRange,v=Math.abs(u*h),E=u-v,R=l/i*360,L=l*s;if(n.fillStyle="hsl("+R+", 100%, 50%)",o.y>0&&o.y<=u&&o.x>=L&&o.x<=L+s){this.freqTracker.id!==l.toString()&&(this.freqTracker=$n({id:l.toString()})),this.freqTracker.seen(e[l]);const N=this.freqTracker.getMinMaxAvg();n.fillStyle="black",this.audio&&n.fillText(`Frequency (${l}) at pointer: ${this.audio.getFrequencyAtIndex(l).toLocaleString("en")} - ${this.audio.getFrequencyAtIndex(l+1).toLocaleString("en")}`,2,10),n.fillText(`Raw value: ${e[l].toFixed(2)}`,2,20),n.fillText(`Min: ${N.min.toFixed(2)}`,2,40),n.fillText(`Max: ${N.max.toFixed(2)}`,60,40),n.fillText(`Avg: ${N.avg.toFixed(2)}`,120,40)}n.fillRect(L,E,s,v)}}isExpanded(){const e=this.el.querySelector("div");if(e===null)throw new Error("contents div not found");return e.style.display===""}setExpanded(e){const r=this.el.querySelector("div"),n=this.el.querySelector("button");if(n===null)throw new Error("Button element not found");if(r===null)throw new Error("Contents element not found");e?(r.style.display="",n.innerText="\u{1F53C}"):(r.style.display="none",n.innerText="\u{1F53D}")}clear(){this.clearCanvas(document.getElementById("rendererComponentFreqData")),this.clearCanvas(document.getElementById("rendererComponentWaveData"))}clearCanvas(e){if(e===null)throw new Error("Canvas is null");const r=e.getContext("2d");if(r===null)throw new Error("Cannot create drawing context");r.fillStyle="white",r.fillRect(0,0,e.clientWidth,e.clientHeight)}renderWave(e,r=!0){if(!this.isExpanded()||!e)return;const n=document.getElementById("rendererComponentWaveData");if(n===null)throw new Error("Cannot find wave canvas");const i=n.getContext("2d");if(i===null)throw new Error("Cannot create drawing context for wave");const a=n.clientWidth,u=n.clientHeight,o=this.getPointerRelativeTo(n),s=20,c=60,l=e.length;i.fillStyle="white",i.fillRect(0,0,c,s);const f=a/l;i.fillStyle="rgba(255, 255, 255, 0.03)",i.fillRect(0,20,a,u),i.fillStyle="red",r?i.fillRect(0,u/2,a,1):i.fillRect(0,u-1,a,1),i.lineWidth=1,i.strokeStyle="black",i.beginPath();let h=0;for(let v=0;v<l;v++){const E=e[v]*u,R=r?u/2-E:u-E;v===0?i.moveTo(h,R):i.lineTo(h,R),h+=f,this.pointerDown&&this.waveTracker.seen(e[v])}if(i.lineTo(a,r?u/2:u),i.stroke(),this.pointerDown){const v=this.waveTracker.getMinMaxAvg();i.fillStyle="rgba(255,255,0,1)",i.fillRect(c,0,150,20),i.fillStyle="black",i.fillText("Min: "+v.min.toFixed(2),60,10),i.fillText("Max: "+v.max.toFixed(2),110,10),i.fillText("Avg: "+v.avg.toFixed(2),160,10)}else this.waveTracker.reset();o.y>0&&o.y<=u&&o.x>=0&&o.x<=a&&(i.fillStyle="black",i.fillText("Level: "+(1-o.y/u).toFixed(2),2,10))}getPointerRelativeTo(e){const r=e.getBoundingClientRect();return{x:this.lastPointer.x-r.left-window.scrollX,y:this.lastPointer.y-r.top-window.scrollY}}onPointer(e){this.lastPointer={x:e.pageX,y:e.pageY},e.preventDefault()}},Ug=(e,r={})=>new sa((n,i)=>{const a=new Float32Array(n.frequencyBinCount),u=new Float32Array(n.fftSize);n.getFloatFrequencyData(a),n.getFloatTimeDomainData(u),e(a,u,i)},r),xg=(e,r={})=>new sa((n,i)=>{const a=new Float32Array(n.frequencyBinCount);n.getFloatFrequencyData(a),e(a,i)},r),Vg=(e,r={})=>new sa((n,i)=>{const a=new Float32Array(n.fftSize);n.getFloatTimeDomainData(a),e(Ht.maxFast(a),i)},r),sa=class{showVis;fftSize;smoothingTimeConstant;#e=!1;debug;#t=!1;visualiser;audioCtx;analyserNode;analyse;constructor(e,r={}){if(this.showVis=r.showVis??!1,this.fftSize=r.fftSize??1024,this.debug=r.debug??!1,this.smoothingTimeConstant=r.smoothingTimeConstant??.8,Le(this.fftSize,"positive","opts.fftSize"),ee(this.smoothingTimeConstant,"percentage","opts.smoothingTimeConstant"),!U0(this.fftSize))throw new Error(`fftSize must be a power of two from 32 to 32768 (${this.fftSize})`);if(this.fftSize<32)throw new Error("fftSize must be at least 32");if(this.fftSize>32768)throw new Error("fftSize must be no greater than 32768");this.analyse=e,this.paused=!1,this.init();const n=document.getElementById("audio-visualiser");if(n){const i=new Hl(n,this);i.setExpanded(this.showVis),this.visualiser=i}}init(){if(this.#t){this.debug&&console.debug("Init already in progress");return}this.#t=!0,navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{this.onMicSuccess(e)}).catch(e=>{this.#t=!1,console.error(e)})}get paused(){return this.#e}set paused(e){e!==this.#e&&(this.#e=e,e?this.debug&&console.log("Paused"):(this.debug&&console.log("Unpaused"),window.requestAnimationFrame(this.analyseLoop.bind(this))))}setup(e,r){const n=e.createAnalyser();return n.fftSize=this.fftSize,n.smoothingTimeConstant=this.smoothingTimeConstant,e.createMediaStreamSource(r).connect(n),n}onMicSuccess(e){try{const r=new AudioContext;r.addEventListener("statechange",()=>{this.debug&&console.log(`Audio context state: ${r.state}`)}),this.audioCtx=r,this.analyserNode=this.setup(r,e),window.requestAnimationFrame(this.analyseLoop.bind(this))}catch(r){this.#t=!1,console.error(r)}}analyseLoop(){if(this.paused){this.debug&&console.log("Paused");return}const e=this.analyserNode;if(e===void 0){console.warn("Analyser undefined");return}try{this.analyse(e,this)}catch(r){console.error(r)}window.requestAnimationFrame(this.analyseLoop.bind(this))}getFrequencyRangeMax(e,r,n){const i=this.sliceByFrequency(e,r,n);return Ht.max(i)}sliceByFrequency(e,r,n){const i=this.getIndexForFrequency(e),a=this.getIndexForFrequency(r);return n.slice(i,a)}getFrequencyAtIndex(e){const r=this.analyserNode,n=this.audioCtx;if(r===void 0)throw new Error("Analyser not available");if(n===void 0)throw new Error("Audio context not available");if(Le(e,"positive","index"),e>r.frequencyBinCount)throw new Error(`Index ${e} exceeds frequency bin count ${r.frequencyBinCount}`);return e*n.sampleRate/(r.frequencyBinCount*2)}getIndexForFrequency(e){const r=this.analyserNode;if(r===void 0)throw new Error("Analyser not available");const n=r.context.sampleRate/2,i=Math.round(e/n*r.frequencyBinCount);return i<0?0:i>=r.frequencyBinCount?r.frequencyBinCount-1:i}},Gl={};Z(Gl,{EspruinoBleDevice:()=>So,EspruinoSerialDevice:()=>Yl,connectBle:()=>Jg,deviceEval:()=>Mo,puck:()=>Gg,serial:()=>Kg});var So=class extends Ul{evalTimeoutMs;evalReplyBluetooth=!0;constructor(e,r={}){super(e,r);this.evalTimeoutMs=r.evalTimeoutMs??5*1e3}async writeScript(e){this.write(`reset();
`),this.write(`${e}
`)}async eval(e,r={},n){const i=r.debug??!1;return Mo(e,r,this,"Bluetooth.println",i,n??(u=>this.warn(u)))}},Kl={};Z(Kl,{Device:()=>Jl});var Hg=class extends rr{states;codec;verboseLogging=!1;name;connectAttempts;chunkSize;rxBuffer;txBuffer;constructor(e={}){super();this.verboseLogging=e.debug??!1,this.chunkSize=e.chunkSize??1024,this.connectAttempts=e.connectAttempts??3,this.name=e.name??"JsonDevice",this.txBuffer=new Fo(async r=>{await this.writeInternal(r)},e),this.rxBuffer=new Co(r=>{this.fireEvent("data",{data:r})}),this.codec=new Ao,this.states=new Qi(_o,{initial:"ready"}),this.states.addEventListener("change",r=>{this.fireEvent("change",r),this.verbose(`${r.priorState} -> ${r.newState}`),r.priorState==="connected"&&(this.rxBuffer.clear(),this.txBuffer.clear())})}get isConnected(){return this.states.state==="connected"}get isClosed(){return this.states.state==="closed"}write(e){if(this.states.state!=="connected")throw new Error(`Cannot write while state is ${this.states.state}`);this.txBuffer.add(e)}async close(){this.states.state==="connected"&&this.onClosed()}async connect(){const e=this.connectAttempts;this.states.state="connecting",await this.onPreConnect(),await ao(async()=>(await this.onConnectAttempt(),this.states.state="connected",!0),{count:e,startMs:200})}onRx(e){const r=e.target.value;if(r===void 0)return;let n=this.codec.fromBuffer(r.buffer);const i=Xn(n,19),a=Xn(n,17);a&&i<a&&(this.verbose("Tx plz start"),n=Qn(n,a,1),this.txBuffer.paused=!1),i&&i>a&&(this.verbose("Tx plz stop"),n=Qn(n,i,1),this.txBuffer.paused=!0),this.rxBuffer.add(n)}verbose(e){this.verboseLogging&&console.info(`${this.name} `,e)}log(e){console.log(`${this.name} `,e)}warn(e){console.warn(`${this.name} `,e)}},Jl=class extends Hg{constructor(e={}){super(e);this.config=e,this.abort=new AbortController;const r=e.eol??`\r
`;this.baudRate=e.baudRate??9600,e.name===void 0&&(super.name="Serial.Device"),this.rxBuffer.separator=r}port;tx;abort;baudRate;async writeInternal(e){if(this.tx===void 0)throw new Error("tx not ready");try{this.tx.write(e)}catch(r){this.warn(r)}}onClosed(){this.tx?.releaseLock(),this.abort.abort("closing port"),this.states.state="closed"}onPreConnect(){return Promise.resolve()}async onConnectAttempt(){let e={};const r={baudRate:this.baudRate};this.config.filters&&(e={filters:[...this.config.filters]}),this.port=await navigator.serial.requestPort(e),this.port.addEventListener("disconnect",o=>{this.close()}),await this.port.open(r);const n=this.port.writable,i=new TextEncoderStream;n!==null&&(i.readable.pipeTo(n,{signal:this.abort.signal}).catch(o=>{console.log("Serial.onConnectAttempt txText pipe:"),console.log(o)}),this.tx=i.writable.getWriter());const a=this.port.readable,u=new TextDecoderStream;a!==null&&(a.pipeTo(u.writable,{signal:this.abort.signal}).catch(o=>{console.log("Serial.onConnectAttempt rxR pipe:"),console.log(o)}),u.readable.pipeTo(this.rxBuffer.writable(),{signal:this.abort.signal}).catch(o=>{console.log("Serial.onConnectAttempt rxText pipe:"),console.log(o);try{this.port?.close()}catch(s){console.log(s)}}))}},Yl=class extends Jl{evalTimeoutMs;evalReplyBluetooth=!1;constructor(e){super(e);e===void 0&&(e={}),this.evalTimeoutMs=e.evalTimeoutMs??5*1e3}async disconnect(){return super.close()}async writeScript(e){this.write(`reset();
`),this.write(`${e}
`)}async eval(e,r={},n){const i=r.debug??!1;return Mo(e,r,this,"USB.println",i,n??(u=>this.warn(u)))}},Gg=async(e={})=>{const r=e.name??"Puck",n=e.debug??!1,i=await navigator.bluetooth.requestDevice({filters:Zl(e),optionalServices:[oa.service]});console.log(i.name);const a=new So(i,{name:r,debug:n});return await a.connect(),a},Kg=async(e={})=>{const r=new Yl(e);return await r.connect(),r},Zl=e=>{const r=[];return e.filters?r.push(...e.filters):e.name?(r.push({name:e.name}),console.info(`Filtering Bluetooth devices by name '${e.name}'`)):r.push({namePrefix:"Puck.js"}),r},Jg=async(e={})=>{const r=await navigator.bluetooth.requestDevice({filters:Zl(e),optionalServices:[oa.service]}),n=new So(r,{name:"Espruino"});return await n.connect(),n},Mo=async(e,r={},n,i,a,u)=>{const o=r.timeoutMs??n.evalTimeoutMs,s=r.assumeExclusive??!0;if(typeof e!="string")throw new Error("code parameter should be a string");return new Promise((c,l)=>{const f=Ms(5),h=L=>{try{let N=L.data;N.startsWith(">{")&&N.endsWith("}")&&(N=N.substring(1));const F=JSON.parse(N);"reply"in F?F.reply===f?(E(),"result"in F&&c(F.result)):u(`Expected reply ${f}, got ${F.reply}`):u(`Expected packet, missing 'reply' field. Got: ${L.data}`)}catch(N){s?E(L.data):u(N)}},v=L=>{L.newState!=="connected"&&E(`State changed to '${L.newState}', aborting`)};n.addEventListener("data",h),n.addEventListener("change",v);const E=no(o,L=>{l(L)},()=>{n.removeEventListener("data",h),n.removeEventListener("change",v)}),R=`${i}(JSON.stringify({reply:"${f}", result:JSON.stringify(${e})}))
`;a&&u(R),n.write(R)})},Xl={};Z(Xl,{dumpDevices:()=>Zg,start:()=>Ql});var Yg=1e4,Zg=async(e="videoinput")=>{(await navigator.mediaDevices.enumerateDevices()).forEach(n=>{n.kind===e&&(console.log(n.label),console.log(` Kind: ${n.kind}`),console.log(` Device id: ${n.deviceId}`))})},Ql=async(e={})=>{const r=document.createElement("VIDEO");r.style.display="none",r.playsInline=!0,r.muted=!0,r.classList.add("ixfx-camera"),document.body.appendChild(r);let n=()=>{};const i=()=>{try{n()}catch{}r.remove()};try{return n=(await Xg(r,e)).dispose,{videoEl:r,dispose:i}}catch(a){throw console.error(a),i(),a}},Xg=async(e,r={})=>{if(e===void 0)throw new Error("videoEl undefined");if(e===null)throw new Error("videoEl null");const n=r.max,i=r.min,a=r.ideal,u={audio:!1,video:{width:{},height:{}}};r.facingMode==="front"&&(r={...r,facingMode:"user"}),r.facingMode==="back"&&(r={...r,facingMode:"environment"}),r.facingMode&&(u.video.facingMode=r.facingMode),r.deviceId&&(u.video.deviceId=r.deviceId),a&&(u.video.width={...u.video.width,ideal:a.width},u.video.height={...u.video.height,ideal:a.height}),n&&(u.video.width={...u.video.width,max:n.width},u.video.height={...u.video.height,max:n.height}),i&&(u.video.width={...u.video.width,min:i.width},u.video.height={...u.video.height,min:i.height});const o=no(r.startTimeoutMs??Yg,s=>{throw new Error(`Camera getUserMedia failed: ${s}`)});try{const s=await navigator.mediaDevices.getUserMedia(u),c=()=>{e.pause(),s.getTracks().forEach(v=>v.stop())};e.srcObject=s,o();const l={videoEl:e,dispose:c};return new Promise((h,v)=>{e.addEventListener("loadedmetadata",()=>{e.play().then(()=>{h(l)}).catch(E=>{v(E)})})})}catch(s){throw o(s.toString()),s}},ef={};Z(ef,{start:()=>tf});var tf=async e=>{const r=document.createElement("VIDEO");r.style.display="none",r.playsInline=!0,r.muted=!0,r.classList.add("ixfx-video"),document.body.appendChild(r);let n=()=>{};const i=()=>{try{n()}catch{}r.remove()};try{return n=(await Qg(r,e)).dispose,{videoEl:r,dispose:i}}catch(a){throw console.error(a),i(),a}},Qg=async(e,r)=>{if(e===void 0)throw new Error("videoEl undefined");if(e===null)throw new Error("videoEl null");const n=URL.createObjectURL(r);e.src=n,e.loop=!0;const a={videoEl:e,dispose:()=>{e.pause()}};return new Promise((o,s)=>{e.addEventListener("loadedmetadata",()=>{e.play().then(()=>{o(a)}).catch(c=>{s(c)})})})},Io={};Z(Io,{capture:()=>tp,frames:()=>ep,manualCapture:()=>rf});async function*ep(e,r={}){const n=r.maxIntervalMs??0,i=r.showCanvas??!1;let a=r.canvasEl,u,o;u=o=0,a===void 0&&(a=document.createElement("CANVAS"),a.classList.add("ixfx-frames"),i||(a.style.display="none"),document.body.appendChild(a));const s=()=>{a!==void 0&&(u=e.videoWidth,o=e.videoHeight,a.width=u,a.height=o)};let c=null;const l=io(n);for await(const f of l){if((u===0||o===0)&&s(),u===0||o===0)continue;if(c===null&&(c=a.getContext("2d")),c===null)return;c.drawImage(e,0,0,u,o),yield c.getImageData(0,0,u,o)}}var tp=(e,r={})=>{const n=r.maxIntervalMs??0,i=r.showCanvas??!1,a=r.onFrame,u=e.videoWidth,o=e.videoHeight,s=document.createElement("CANVAS");s.classList.add("ixfx-capture"),i||(s.style.display="none"),s.width=u,s.height=o;let c=null,l;r.workerScript&&(l=new Worker(r.workerScript));const f=l||a;!f&&!i&&console.warn("Video will be captured to hidden element without any processing. Is this what you want?");const h=ro(()=>{if(c===null&&(c=s.getContext("2d")),c===null)return;c.drawImage(e,0,0,u,o);let v;if(f&&(v=c.getImageData(0,0,u,o)),l&&l.postMessage({pixels:v.data.buffer,width:u,height:o,channels:4},[v.data.buffer]),a)try{a(v)}catch(E){console.error(E)}},n);return{start:()=>h.start(),cancel:()=>h.cancel(),canvasEl:s}},rf=(e,r={})=>{const n=r.showCanvas??!1,i=e.videoWidth,a=e.videoHeight,u=r.canvasEl!==void 0;let o=r.canvasEl;return o||(o=document.createElement("CANVAS"),o.classList.add("ixfx-capture"),document.body.append(o),n||(o.style.display="none")),o.width=i,o.height=a,{canvasEl:o,capture:()=>{let f;if(f||(f=o?.getContext("2d",{willReadFrequently:!0})),!f)throw new Error("Could not create graphics context");f.drawImage(e,0,0,i,a);const h=f.getImageData(0,0,i,a);return h.currentTime=e.currentTime,r.postCaptureDraw&&r.postCaptureDraw(f,i,a),h},dispose:()=>{if(!u)try{o?.remove()}catch{}}}},rp=class{_source;_state;_teardownNeeded=!1;_cameraConstraints;_cameraStartResult;_videoSourceCapture;_videoFile;_videoStartResult;_showCanvas;_showPreview;_postCaptureDraw;_timer;_captureCanvasEl;constructor(e={}){this._state="ready",this._source="",this._timer=performance.now(),this._showCanvas=e.showCanvas??!1,this._showPreview=e.showPreview??!1,this._cameraConstraints=e.cameraConstraints??void 0,this._captureCanvasEl=e.captureCanvasEl??void 0,this._postCaptureDraw=e.postCaptureDraw}showPreview(e){if(this._state==="disposed")throw new Error("Disposed");let r;switch(this._source){case"camera":r=this._cameraStartResult?.videoEl,r!==void 0&&(r.style.display=e?"block":"none");break}this._showPreview=e}showCanvas(e){if(this._state==="disposed")throw new Error("Disposed");let r;if(this._source==="camera"||this._source==="video")r=this._videoSourceCapture?.canvasEl,r!==void 0&&(r.style.display=e?"block":"none");else throw new Error(`Source not implemented: ${this._source}`);this._showCanvas=e}getCapturer(){if(this._state==="disposed")throw new Error("Disposed");if(this._source==="camera"||this._source==="video")return this._videoSourceCapture;throw new Error(`Source kind not supported ${this._source}`)}async useCamera(e){if(this._state==="disposed")throw new Error("Disposed");this._source="camera",this._teardownNeeded&&this.teardown(),e&&this._cameraConstraints,await this.init()}async useVideo(e){if(this._state==="disposed")throw new Error("Disposed");this._source="video",this._teardownNeeded&&this.teardown(),this._videoFile=e,await this.init()}async initCamera(){const e=await Ql(this._cameraConstraints);if(e===void 0)throw new Error("Could not start camera");this._cameraStartResult=e,this.postInit(e)}async initVideo(){if(!this._videoFile)throw new Error("Video file not defined");const e=await tf(this._videoFile);this._videoStartResult=e,this.postInit(e)}async postInit(e){this._showPreview&&(e.videoEl.style.display="block"),this._videoSourceCapture=rf(e.videoEl,{postCaptureDraw:this._postCaptureDraw,showCanvas:this._showCanvas,canvasEl:this._captureCanvasEl}),this._teardownNeeded=!0,this._cameraStartResult=e}dispose(){this._state!=="disposed"&&(this.teardown(),this._state="disposed")}async init(){switch(this._timer=performance.now(),this._source){case"camera":await this.initCamera();break;case"video":await this.initVideo();break}this._state="initialised"}teardown(){if(!!this._teardownNeeded){switch((this._source==="camera"||this._source==="video")&&this._videoSourceCapture?.dispose(),this._source){case"camera":this._cameraStartResult?.dispose();break;case"video":this._videoStartResult?.dispose();break}this._teardownNeeded=!1}}getFrame(){if(this._state==="disposed")throw new Error("Disposed");switch(this._source){case"camera":return this.getFrameCamera();case"video":return this.getFrameCamera();default:throw new Error(`source type unhandled ${this._source}`)}}getTimestamp(){return performance.now()-this._timer}getFrameCamera(){return this._videoSourceCapture?.capture()}},_o=Object.freeze({ready:"connecting",connecting:["connected","closed"],connected:["closed"],closed:"connecting"}),np={};Z(np,{Async:()=>xu,Sync:()=>nf,count:()=>Sp,delayLoop:()=>io,interval:()=>Xu,numericPercent:()=>Mp,numericRange:()=>sf,numericRangeRaw:()=>Fp,pingPong:()=>bo,pingPongPercent:()=>$l,randomUniqueInteger:()=>ov});var nf={};Z(nf,{chunks:()=>op,chunksOverlapping:()=>up,concat:()=>sp,dropWhile:()=>cp,equals:()=>lp,every:()=>fp,fill:()=>hp,filter:()=>vp,find:()=>yp,first:()=>ap,flatten:()=>mp,forEach:()=>dp,last:()=>af,map:()=>gp,max:()=>pp,min:()=>wp,range:()=>uf,reduce:()=>Ep,slice:()=>of,some:()=>bp,takeWhile:()=>Dp,unique:()=>Ap,yieldNumber:()=>ip,zip:()=>Cp});function ip(e,r){return()=>{const n=e.next().value;return n===void 0?r:n}}function ap(e){for(const r of e)return r}function af(e){let r;for(const n of e)r=n;return r}function*up(e,r){if(r<=1)throw new Error("Size should be at least 2");let n=[];for(const i of e)n.push(i),n.length===r&&(yield n,n=[n.at(-1)]);n.length<=1||n.length>0&&(yield n)}function*op(e,r){let n=[];for(const i of e)n.push(i),n.length===r&&(yield n,n=[]);n.length>0&&(yield n)}function*sp(...e){for(const r of e)yield*r}function*cp(e,r){for(const n of e)if(!r(n)){yield n;break}yield*e}function lp(e,r,n){for(;;){const i=e.next(),a=r.next();if(n!==void 0){if(!n(i.value,a.value))return!1}else if(i.value!==a.value)return!1;if(i.done??a.done)return i.done&&a.done}}function fp(e,r){let n=!0;for(const i of e)n=n&&r(i);return n}function*hp(e,r){for(const n of e)yield r}function dp(e,r){for(const n of e)r(n)}function*vp(e,r){for(const n of e)!r(n)||(yield n)}function yp(e,r){for(const n of e)if(r(n))return n}function*mp(e){for(const r of e)Symbol.iterator in r?yield*r:yield r}function*gp(e,r){for(const n of e)yield r(n)}function pp(e,r=(n,i)=>n>i){let n;for(const i of e){if(!n){n=i;continue}n=r(n,i)?n:i}return n}function wp(e,r=(n,i)=>n>i){let n;for(const i of e){if(!n){n=i;continue}n=r(n,i)?i:n}return n}function*uf(e,r){for(let n=0;n<r;n++)yield e++}function Ep(e,r,n){for(const i of e)n=r(n,i);return n}function*of(e,r=0,n=Number.POSITIVE_INFINITY){const i=e[Symbol.iterator]();for(;r>0;r--,n--)i.next();for(const a of e)if(n-- >0)yield a;else break}function bp(e,r){for(const n of e)if(r(n))return!0;return!1}function*Dp(e,r){for(const n of e){if(!r(n))return;yield n}}function*Ap(e,r=wr){const n=[];let i=[];i=Array.isArray(e)?e:[e];for(const a of i)for(const u of a){const o=r(u);n.includes(o)||(n.push(o),yield u)}}function*Cp(...e){const r=e.map(n=>n[Symbol.iterator]());for(;;){const n=r.map(i=>i.next());if(n.some(i=>i.done))return;yield n.map(i=>i.value)}}var Fp=function*(e,r=0,n,i=!1){if(e<=0)throw new Error("Interval is expected to be above zero");n===void 0&&(n=Number.MAX_SAFE_INTEGER);let a=r;do for(;a<n;)yield a,a+=e;while(i)},sf=function*(e,r=0,n,i=!1,a){ee(e,"nonZero");const u=e<0;if(n!==void 0){if(u&&r<n)throw new Error(`Interval of ${e} will never go from ${r} to ${n}`);if(!u&&r>n)throw new Error(`Interval of ${e} will never go from ${r} to ${n}`)}a=a??1e3,n===void 0?n=Number.MAX_SAFE_INTEGER:n*=a,e=e*a;do{let o=r*a;for(;!u&&o<=n||u&&o>=n;)yield o/a,o+=e}while(i)},Sp=function*(e,r=0){if(Le(e,"","amount"),Le(r,"","offset"),e===0)return;let n=0;do yield e<0?-n+r:n+r;while(n++<Math.abs(e)-1)},Mp=function(e=.01,r=!1,n=0,i=1){return ee(e,"percentage","interval"),ee(n,"percentage","start"),ee(i,"percentage","end"),sf(e,n,i,r)},Ip={};Z(Ip,{BipolarView:()=>Gh,Colour:()=>ci,Drawing:()=>oi,ImageDataGrid:()=>ts,Palette:()=>es,Plot:()=>Yo,Plot2:()=>Xo,SceneGraph:()=>Qo,Svg:()=>Go,Video:()=>Io});var oi={};Z(oi,{arc:()=>nh,bezier:()=>uh,circle:()=>ih,connectedPoints:()=>wa,copyToImg:()=>BE,dot:()=>xt,drawingStack:()=>un,ellipse:()=>PE,getCtx:()=>rh,line:()=>Ho,lineThroughPoints:()=>_E,makeHelper:()=>SE,paths:()=>ah,pointLabels:()=>Ea,rect:()=>sh,textBlock:()=>ch,textBlockAligned:()=>WE,textWidth:()=>on,translatePoint:()=>RE,triangle:()=>zE});var Hr={};Z(Hr,{Empty:()=>cw,Equilateral:()=>cf,Isosceles:()=>ff,Placeholder:()=>lw,Right:()=>lf,angles:()=>si,anglesDegrees:()=>mw,apply:()=>dw,area:()=>mf,barycentricCoord:()=>pf,barycentricToCartestian:()=>_w,bbox:()=>gf,centroid:()=>da,corners:()=>Du,edges:()=>ha,equilateralFromVertex:()=>Sw,fromFlatArray:()=>Iw,fromPoints:()=>Ro,fromRadius:()=>Cw,guard:()=>Tt,innerCircle:()=>Dw,intersectsPoint:()=>Pw,isAcute:()=>Ew,isEmpty:()=>fw,isEqual:()=>yw,isEquilateral:()=>gw,isIsosceles:()=>pw,isOblique:()=>ww,isObtuse:()=>bw,isPlaceholder:()=>hw,isRightAngle:()=>vf,isTriangle:()=>vw,lengths:()=>Po,outerCircle:()=>Aw,perimeter:()=>yf,rotate:()=>Rw,rotateByVertex:()=>Fw,toFlatArray:()=>Mw});var cf={};Z(cf,{area:()=>Wp,centerFromA:()=>Pp,centerFromB:()=>Rp,centerFromC:()=>Bp,circumcircle:()=>kp,fromCenter:()=>_p,height:()=>Np,incircle:()=>ca,perimeter:()=>zp});var Bs=Math.PI*4/3,Ns=Math.PI*2/3,Nr=e=>typeof e=="number"?e:e.length,_p=(e,r={x:0,y:0},n)=>{const i=Nr(e)/Math.sqrt(3),a=n??Math.PI*1.5,u={x:i*Math.cos(a)+r.x,y:i*Math.sin(a)+r.y},o={x:i*Math.cos(a+Bs)+r.x,y:i*Math.sin(a+Bs)+r.y},s={x:i*Math.cos(a+Ns)+r.x,y:i*Math.sin(a+Ns)+r.y};return Object.freeze({a:o,b:u,c:s})},Pp=(e,r={x:0,y:0})=>{const n=Nr(e),{radius:i}=ca(e);return{x:r.x+n/2,y:r.y-i}},Rp=(e,r={x:0,y:0})=>{const{radius:n}=ca(e);return{x:r.x,y:r.y+n*2}},Bp=(e,r={x:0,y:0})=>{const n=Nr(e),{radius:i}=ca(e);return{x:r.x-n/2,y:r.y-i}},Np=e=>Math.sqrt(3)/2*Nr(e),zp=e=>Nr(e)*3,Wp=e=>Math.pow(Nr(e),2)*Math.sqrt(3)/4,kp=e=>({radius:Math.sqrt(3)/3*Nr(e)}),ca=e=>({radius:Math.sqrt(3)/6*Nr(e)}),lf={};Z(lf,{adjacentFromHypotenuse:()=>Jp,adjacentFromOpposite:()=>Yp,angleAtPointA:()=>qp,angleAtPointB:()=>Up,area:()=>jp,circumcircle:()=>Vp,fromA:()=>Tp,fromB:()=>Op,fromC:()=>$p,height:()=>la,hypotenuseFromAdjacent:()=>Xp,hypotenuseFromOpposite:()=>Zp,hypotenuseSegments:()=>fa,incircle:()=>Hp,medians:()=>xp,oppositeFromAdjacent:()=>Gp,oppositeFromHypotenuse:()=>Kp,perimeter:()=>Lp,resolveLengths:()=>kt});var Tp=(e,r={x:0,y:0})=>{const n=kt(e),i=fa(e),a=la(e),u={x:r.x,y:r.y},o={x:r.x+n.hypotenuse,y:r.y},s={x:r.x+i[1],y:r.y-a};return{a:u,b:o,c:s}},Op=(e,r={x:0,y:0})=>{const n=kt(e),i=fa(e),a=la(e),u={x:r.x,y:r.y},o={x:r.x-n.hypotenuse,y:r.y},s={x:r.x-i[0],y:r.y-a};return{a:o,b:u,c:s}},$p=(e,r={x:0,y:0})=>{const n=fa(e),i=la(e),a={x:r.x,y:r.y},u={x:r.x-n[1],y:r.y+i},o={x:r.x+n[0],y:r.y+i};return{a:u,b:o,c:a}},kt=e=>{const r=e.adjacent,n=e.opposite,i=e.hypotenuse;if(r!==void 0&&n!==void 0)return{...e,adjacent:r,opposite:n,hypotenuse:Math.sqrt(r*r+n*n)};if(r&&i)return{...e,adjacent:r,hypotenuse:i,opposite:i*i-r*r};if(n&&i)return{...e,hypotenuse:i,opposite:n,adjacent:i*i-n*n};if(e.opposite&&e.hypotenuse&&e.adjacent)return e;throw new Error("Missing at least two edges")},la=e=>{const r=kt(e),n=r.opposite*r.opposite/r.hypotenuse,i=r.adjacent*r.adjacent/r.hypotenuse;return Math.sqrt(n*i)},fa=e=>{const r=kt(e),n=r.opposite*r.opposite/r.hypotenuse,i=r.adjacent*r.adjacent/r.hypotenuse;return[n,i]},Lp=e=>{const r=kt(e);return r.adjacent+r.hypotenuse+r.opposite},jp=e=>{const r=kt(e);return r.opposite*r.adjacent/2},qp=e=>{const r=kt(e);return Math.acos((r.adjacent*r.adjacent+r.hypotenuse*r.hypotenuse-r.opposite*r.opposite)/(2*r.adjacent*r.hypotenuse))},Up=e=>{const r=kt(e);return Math.acos((r.opposite*r.opposite+r.hypotenuse*r.hypotenuse-r.adjacent*r.adjacent)/(2*r.opposite*r.hypotenuse))},xp=e=>{const r=kt(e),n=r.adjacent*r.adjacent,i=r.hypotenuse*r.hypotenuse,a=r.opposite*r.opposite;return[Math.sqrt(2*(n+i)-a)/2,Math.sqrt(2*(i+a)-n)/2,Math.sqrt(2*(a+n)-i)/2]},Vp=e=>({radius:kt(e).hypotenuse/2}),Hp=e=>{const r=kt(e);return{radius:(r.adjacent+r.opposite-r.hypotenuse)/2}},Gp=(e,r)=>Math.tan(e)*r,Kp=(e,r)=>Math.sin(e)*r,Jp=(e,r)=>Math.cos(e)*r,Yp=(e,r)=>r/Math.tan(e),Zp=(e,r)=>r/Math.sin(e),Xp=(e,r)=>r/Math.cos(e),ff={};Z(ff,{apexAngle:()=>Qp,area:()=>rw,baseAngle:()=>hf,circumcircle:()=>nw,fromA:()=>uw,fromB:()=>ow,fromC:()=>sw,fromCenter:()=>aw,height:()=>zr,incircle:()=>df,legHeights:()=>ew,medians:()=>iw,perimeter:()=>tw});var hf=e=>Math.acos(e.base/(2*e.legs)),Qp=e=>{const r=e.legs*e.legs,n=e.base*e.base;return Math.acos((2*r-n)/(2*r))},zr=e=>{const r=e.legs*e.legs,n=e.base*e.base;return Math.sqrt((4*r-n)/4)},ew=e=>{const r=hf(e);return e.base*Math.sin(r)},tw=e=>2*e.legs+e.base,rw=e=>zr(e)*e.base/2,nw=e=>{const r=zr(e),n=r*r,i=e.base*e.base;return{radius:(4*n+i)/(8*r)}},df=e=>{const r=zr(e);return{radius:e.base*r/(2*e.legs+e.base)}},iw=e=>{const r=e.legs*e.legs,n=e.base*e.base,i=Math.sqrt(r+2*n)/2,a=Math.sqrt(4*r-n)/2;return[i,i,a]},aw=(e,r={x:0,y:0})=>{const n=zr(e),i=df(e).radius,a=n-i,u={x:r.x-e.base/2,y:r.y+i},o={x:r.x+e.base/2,y:r.y+i},s={x:r.x,y:r.y-a};return{a:u,b:o,c:s}},uw=(e,r={x:0,y:0})=>{const n=zr(e),i={x:r.x,y:r.y},a={x:r.x+e.base,y:r.y},u={x:r.x+e.base/2,y:r.y-n};return{a:i,b:a,c:u}},ow=(e,r={x:0,y:0})=>{const n=zr(e),i={x:r.x,y:r.y},a={x:r.x-e.base,y:r.y},u={x:r.x-e.base/2,y:r.y-n};return{a,b:i,c:u}},sw=(e,r={x:0,y:0})=>{const n=zr(e),i={x:r.x,y:r.y},a={x:r.x-e.base/2,y:r.y+n},u={x:r.x+e.base/2,y:r.y+n};return{a,b:u,c:i}},zs=Math.PI*2,cw=Object.freeze({a:{x:0,y:0},b:{x:0,y:0},c:{x:0,y:0}}),lw=Object.freeze({a:{x:NaN,y:NaN},b:{x:NaN,y:NaN},c:{x:NaN,y:NaN}}),fw=e=>Fi(e.a)&&Fi(e.b)&&Fi(e.c),hw=e=>Si(e.a)&&Si(e.b)&&Si(e.c),dw=(e,r)=>Object.freeze({...e,a:r(e.a,"a"),b:r(e.b,"b"),c:r(e.c,"c")}),Tt=(e,r="t")=>{if(e===void 0)throw Error("{$name} undefined");pe(e.a,r+".a"),pe(e.b,r+".b"),pe(e.c,r+".c")},vw=e=>{if(e===void 0)return!1;const r=e;return!(!Se(r.a)||!Se(r.b)||!Se(r.c))},yw=(e,r)=>Ln(e.a,r.a)&&Ln(e.b,r.b)&&Ln(e.c,r.c),Du=e=>(Tt(e),[e.a,e.b,e.c]),ha=e=>(Tt(e),Je.joinPointsToLines(e.a,e.b,e.c,e.a)),Po=e=>(Tt(e),[Wt(e.a,e.b),Wt(e.b,e.c),Wt(e.c,e.a)]),si=e=>(Tt(e),[vn(e.a,e.b),vn(e.b,e.c),vn(e.c,e.a)]),mw=e=>(Tt(e),Na(si(e))),gw=e=>{Tt(e);const[r,n,i]=Po(e);return r===n&&n===i},pw=e=>{const[r,n,i]=Po(e);return r===n||n===i||i===r},vf=e=>si(e).some(r=>r===Math.PI/2),ww=e=>!vf(e),Ew=e=>!si(e).some(r=>r>=Math.PI/2),bw=e=>si(e).some(r=>r>Math.PI/2),da=e=>{Tt(e);const r=Zd([e.a,e.b,e.c],(i,a)=>({x:i.x+a.x,y:i.y+a.y}));return{x:r.x/3,y:r.y/3}},yf=e=>(Tt(e),ha(e).reduce((r,n)=>r+Je.length(n),0)),mf=e=>{Tt(e,"t");const r=ha(e).map(i=>Je.length(i)),n=(r[0]+r[1]+r[2])/2;return Math.sqrt(n*(n-r[0])*(n-r[1])*(n-r[2]))},Dw=e=>{const r=da(e),n=yf(e)/2;return{radius:mf(e)/n,...r}},Aw=e=>{const[r,n,i]=ha(e).map(o=>Je.length(o)),a=da(e);return{radius:r*n*i/Math.sqrt((r+n+i)*(-r+n+i)*(r-n+i)*(r+n-i)),...a}},Cw=(e,r,n={})=>{ee(r,"positive","radius"),pe(e,"origin");const i=n.initialAngleRadian??0,u=[i,i+zs*1/3,i+zs*2/3].map(o=>Ge.toCartesian(r,o,e));return Ro(u)},Fw=(e,r,n="b")=>{const i=n==="a"?e.a:n==="b"?e.b:e.c;return Object.freeze({a:Zr(e.a,r,i),b:Zr(e.b,r,i),c:Zr(e.c,r,i)})},Sw=(e={x:0,y:0},r=10,n=Math.PI/2)=>{const i=Tu(e,r,Math.PI- -n/2),a=Tu(e,r,Math.PI-n/2);return{a:i,b:e,c:a}},Mw=e=>(Tt(e),[e.a.x,e.a.y,e.b.x,e.b.y,e.c.x,e.c.y]),Iw=e=>{if(!Array.isArray(e))throw new Error("coords expected as array");if(e.length!==6)throw new Error(`coords array expected with 6 elements. Got ${e.length}`);return Ro(Jd(...e))},Ro=e=>{if(!Array.isArray(e))throw new Error("points expected as array");if(e.length!==3)throw new Error(`points array expected with 3 elements. Got ${e.length}`);return{a:e[0],b:e[1],c:e[2]}},gf=(e,r=0)=>{const{a:n,b:i,c:a}=e,u=Math.min(n.x,i.x,a.x)-r,o=Math.max(n.x,i.x,a.x)+r,s=Math.min(n.y,i.y,a.y)-r,c=Math.max(n.y,i.y,a.y)+r;return{x:u,y:s,width:o-u,height:c-s}},pf=(e,r,n)=>{const i=st(r,n),a=(c,l,f,h)=>(f.y-h.y)*c+(h.x-f.x)*l+f.x*h.y-h.x*f.y,u=a(i.x,i.y,e.b,e.c)/a(e.a.x,e.a.y,e.b,e.c),o=a(i.x,i.y,e.c,e.a)/a(e.b.x,e.b.y,e.c,e.a),s=a(i.x,i.y,e.a,e.b)/a(e.c.x,e.c.y,e.a,e.b);return{a:u,b:o,c:s}},_w=(e,r)=>{Tt(e);const{a:n,b:i,c:a}=e,u=n.x*r.a+i.x*r.b+a.x*r.c,o=n.y*r.a+i.y*r.b+a.y*r.c;if(n.z&&i.z&&a.z){const s=n.z*r.a+i.z*r.b+a.z*r.c;return Object.freeze({x:u,y:o,z:s})}else return Object.freeze({x:u,y:o})},Pw=(e,r,n)=>{const i=gf(e),a=st(r,n);if(!me.intersectsPoint(i,a))return!1;const u=pf(e,a);return 0<=u.a&&u.a<=1&&0<=u.b&&u.b<=1&&0<=u.c&&u.c<=1},Rw=(e,r,n)=>r===void 0||r===0?e:(n===void 0&&(n=da(e)),Object.freeze({...e,a:Zr(e.a,r,n),b:Zr(e.b,r,n),c:Zr(e.c,r,n)})),Bo={};Z(Bo,{fromDegrees:()=>Bw});var Bw=(e,r,n=0,i=0,a=360)=>({radiusX:e,radiusY:r,rotation:Mr(n),startAngle:Mr(i),endAngle:Mr(a)}),ci={};Z(ci,{getCssVariable:()=>Wf,goldenAngleColour:()=>zf,interpolate:()=>d1,opacity:()=>Jn,randomHue:()=>Oo,scale:()=>v1,toHex:()=>h1,toHsl:()=>l1,toRgb:()=>f1});function An(e,r,n){e.prototype=r.prototype=n,n.constructor=e}function li(e,r){var n=Object.create(e.prototype);for(var i in r)n[i]=r[i];return n}function Wr(){}var Xr=.7,gn=1/Xr,ln="\\s*([+-]?\\d+)\\s*",Hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Nw=/^#([0-9a-f]{3,8})$/,zw=new RegExp(`^rgb\\(${ln},${ln},${ln}\\)$`),Ww=new RegExp(`^rgb\\(${Xt},${Xt},${Xt}\\)$`),kw=new RegExp(`^rgba\\(${ln},${ln},${ln},${Hn}\\)$`),Tw=new RegExp(`^rgba\\(${Xt},${Xt},${Xt},${Hn}\\)$`),Ow=new RegExp(`^hsl\\(${Hn},${Xt},${Xt}\\)$`),$w=new RegExp(`^hsla\\(${Hn},${Xt},${Xt},${Hn}\\)$`),Ws={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};An(Wr,pn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ks,formatHex:ks,formatHex8:Lw,formatHsl:jw,formatRgb:Ts,toString:Ts});function ks(){return this.rgb().formatHex()}function Lw(){return this.rgb().formatHex8()}function jw(){return wf(this).formatHsl()}function Ts(){return this.rgb().formatRgb()}function pn(e){var r,n;return e=(e+"").trim().toLowerCase(),(r=Nw.exec(e))?(n=r[1].length,r=parseInt(r[1],16),n===6?Os(r):n===3?new Ye(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?gi(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?gi(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=zw.exec(e))?new Ye(r[1],r[2],r[3],1):(r=Ww.exec(e))?new Ye(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=kw.exec(e))?gi(r[1],r[2],r[3],r[4]):(r=Tw.exec(e))?gi(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Ow.exec(e))?js(r[1],r[2]/100,r[3]/100,1):(r=$w.exec(e))?js(r[1],r[2]/100,r[3]/100,r[4]):Ws.hasOwnProperty(e)?Os(Ws[e]):e==="transparent"?new Ye(NaN,NaN,NaN,0):null}function Os(e){return new Ye(e>>16&255,e>>8&255,e&255,1)}function gi(e,r,n,i){return i<=0&&(e=r=n=NaN),new Ye(e,r,n,i)}function No(e){return e instanceof Wr||(e=pn(e)),e?(e=e.rgb(),new Ye(e.r,e.g,e.b,e.opacity)):new Ye}function Ni(e,r,n,i){return arguments.length===1?No(e):new Ye(e,r,n,i??1)}function Ye(e,r,n,i){this.r=+e,this.g=+r,this.b=+n,this.opacity=+i}An(Ye,Ni,li(Wr,{brighter(e){return e=e==null?gn:Math.pow(gn,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xr:Math.pow(Xr,e),new Ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ye(Gr(this.r),Gr(this.g),Gr(this.b),zi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$s,formatHex:$s,formatHex8:qw,formatRgb:Ls,toString:Ls}));function $s(){return`#${xr(this.r)}${xr(this.g)}${xr(this.b)}`}function qw(){return`#${xr(this.r)}${xr(this.g)}${xr(this.b)}${xr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ls(){const e=zi(this.opacity);return`${e===1?"rgb(":"rgba("}${Gr(this.r)}, ${Gr(this.g)}, ${Gr(this.b)}${e===1?")":`, ${e})`}`}function zi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xr(e){return e=Gr(e),(e<16?"0":"")+e.toString(16)}function js(e,r,n,i){return i<=0?e=r=n=NaN:n<=0||n>=1?e=r=NaN:r<=0&&(e=NaN),new Ut(e,r,n,i)}function wf(e){if(e instanceof Ut)return new Ut(e.h,e.s,e.l,e.opacity);if(e instanceof Wr||(e=pn(e)),!e)return new Ut;if(e instanceof Ut)return e;e=e.rgb();var r=e.r/255,n=e.g/255,i=e.b/255,a=Math.min(r,n,i),u=Math.max(r,n,i),o=NaN,s=u-a,c=(u+a)/2;return s?(r===u?o=(n-i)/s+(n<i)*6:n===u?o=(i-r)/s+2:o=(r-n)/s+4,s/=c<.5?u+a:2-u-a,o*=60):s=c>0&&c<1?0:o,new Ut(o,s,c,e.opacity)}function Gn(e,r,n,i){return arguments.length===1?wf(e):new Ut(e,r,n,i??1)}function Ut(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}An(Ut,Gn,li(Wr,{brighter(e){return e=e==null?gn:Math.pow(gn,e),new Ut(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xr:Math.pow(Xr,e),new Ut(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,r=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*r,a=2*n-i;return new Ye(Ya(e>=240?e-240:e+120,a,i),Ya(e,a,i),Ya(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new Ut(qs(this.h),pi(this.s),pi(this.l),zi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zi(this.opacity);return`${e===1?"hsl(":"hsla("}${qs(this.h)}, ${pi(this.s)*100}%, ${pi(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qs(e){return e=(e||0)%360,e<0?e+360:e}function pi(e){return Math.max(0,Math.min(1,e||0))}function Ya(e,r,n){return(e<60?r+(n-r)*e/60:e<180?n:e<240?r+(n-r)*(240-e)/60:r)*255}var Ef=Math.PI/180,bf=180/Math.PI,Wi=18,Df=.96422,Af=1,Cf=.82521,Ff=4/29,fn=6/29,Sf=3*fn*fn,Uw=fn*fn*fn;function Mf(e){if(e instanceof Qt)return new Qt(e.l,e.a,e.b,e.opacity);if(e instanceof vr)return If(e);e instanceof Ye||(e=No(e));var r=eu(e.r),n=eu(e.g),i=eu(e.b),a=Za((.2225045*r+.7168786*n+.0606169*i)/Af),u,o;return r===n&&n===i?u=o=a:(u=Za((.4360747*r+.3850649*n+.1430804*i)/Df),o=Za((.0139322*r+.0971045*n+.7141733*i)/Cf)),new Qt(116*a-16,500*(u-a),200*(a-o),e.opacity)}function Au(e,r,n,i){return arguments.length===1?Mf(e):new Qt(e,r,n,i??1)}function Qt(e,r,n,i){this.l=+e,this.a=+r,this.b=+n,this.opacity=+i}An(Qt,Au,li(Wr,{brighter(e){return new Qt(this.l+Wi*(e??1),this.a,this.b,this.opacity)},darker(e){return new Qt(this.l-Wi*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,r=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return r=Df*Xa(r),e=Af*Xa(e),n=Cf*Xa(n),new Ye(Qa(3.1338561*r-1.6168667*e-.4906146*n),Qa(-.9787684*r+1.9161415*e+.033454*n),Qa(.0719453*r-.2289914*e+1.4052427*n),this.opacity)}}));function Za(e){return e>Uw?Math.pow(e,1/3):e/Sf+Ff}function Xa(e){return e>fn?e*e*e:Sf*(e-Ff)}function Qa(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function eu(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function xw(e){if(e instanceof vr)return new vr(e.h,e.c,e.l,e.opacity);if(e instanceof Qt||(e=Mf(e)),e.a===0&&e.b===0)return new vr(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var r=Math.atan2(e.b,e.a)*bf;return new vr(r<0?r+360:r,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Cu(e,r,n,i){return arguments.length===1?xw(e):new vr(e,r,n,i??1)}function vr(e,r,n,i){this.h=+e,this.c=+r,this.l=+n,this.opacity=+i}function If(e){if(isNaN(e.h))return new Qt(e.l,0,0,e.opacity);var r=e.h*Ef;return new Qt(e.l,Math.cos(r)*e.c,Math.sin(r)*e.c,e.opacity)}An(vr,Cu,li(Wr,{brighter(e){return new vr(this.h,this.c,this.l+Wi*(e??1),this.opacity)},darker(e){return new vr(this.h,this.c,this.l-Wi*(e??1),this.opacity)},rgb(){return If(this).rgb()}}));var _f=-.14861,zo=1.78277,Wo=-.29227,va=-.90649,Kn=1.97294,Us=Kn*va,xs=Kn*zo,Vs=zo*Wo-va*_f;function Vw(e){if(e instanceof Kr)return new Kr(e.h,e.s,e.l,e.opacity);e instanceof Ye||(e=No(e));var r=e.r/255,n=e.g/255,i=e.b/255,a=(Vs*i+Us*r-xs*n)/(Vs+Us-xs),u=i-a,o=(Kn*(n-a)-Wo*u)/va,s=Math.sqrt(o*o+u*u)/(Kn*a*(1-a)),c=s?Math.atan2(o,u)*bf-120:NaN;return new Kr(c<0?c+360:c,s,a,e.opacity)}function Fu(e,r,n,i){return arguments.length===1?Vw(e):new Kr(e,r,n,i??1)}function Kr(e,r,n,i){this.h=+e,this.s=+r,this.l=+n,this.opacity=+i}An(Kr,Fu,li(Wr,{brighter(e){return e=e==null?gn:Math.pow(gn,e),new Kr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xr:Math.pow(Xr,e),new Kr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Ef,r=+this.l,n=isNaN(this.s)?0:this.s*r*(1-r),i=Math.cos(e),a=Math.sin(e);return new Ye(255*(r+n*(_f*i+zo*a)),255*(r+n*(Wo*i+va*a)),255*(r+n*(Kn*i)),this.opacity)}}));var ya=e=>()=>e;function Pf(e,r){return function(n){return e+n*r}}function Hw(e,r,n){return e=Math.pow(e,n),r=Math.pow(r,n)-e,n=1/n,function(i){return Math.pow(e+i*r,n)}}function ko(e,r){var n=r-e;return n?Pf(e,n>180||n<-180?n-360*Math.round(n/360):n):ya(isNaN(e)?r:e)}function Gw(e){return(e=+e)==1?Ze:function(r,n){return n-r?Hw(r,n,e):ya(isNaN(r)?n:r)}}function Ze(e,r){var n=r-e;return n?Pf(e,n):ya(isNaN(e)?r:e)}var ki=function e(r){var n=Gw(r);function i(a,u){var o=n((a=Ni(a)).r,(u=Ni(u)).r),s=n(a.g,u.g),c=n(a.b,u.b),l=Ze(a.opacity,u.opacity);return function(f){return a.r=o(f),a.g=s(f),a.b=c(f),a.opacity=l(f),a+""}}return i.gamma=e,i}(1);function Kw(e,r){r||(r=[]);var n=e?Math.min(r.length,e.length):0,i=r.slice(),a;return function(u){for(a=0;a<n;++a)i[a]=e[a]*(1-u)+r[a]*u;return i}}function Jw(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Yw(e,r){var n=r?r.length:0,i=e?Math.min(n,e.length):0,a=new Array(i),u=new Array(n),o;for(o=0;o<i;++o)a[o]=To(e[o],r[o]);for(;o<n;++o)u[o]=r[o];return function(s){for(o=0;o<i;++o)u[o]=a[o](s);return u}}function Zw(e,r){var n=new Date;return e=+e,r=+r,function(i){return n.setTime(e*(1-i)+r*i),n}}function Su(e,r){return e=+e,r=+r,function(n){return e*(1-n)+r*n}}function Xw(e,r){var n={},i={},a;(e===null||typeof e!="object")&&(e={}),(r===null||typeof r!="object")&&(r={});for(a in r)a in e?n[a]=To(e[a],r[a]):i[a]=r[a];return function(u){for(a in n)i[a]=n[a](u);return i}}var Mu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tu=new RegExp(Mu.source,"g");function Qw(e){return function(){return e}}function e1(e){return function(r){return e(r)+""}}function t1(e,r){var n=Mu.lastIndex=tu.lastIndex=0,i,a,u,o=-1,s=[],c=[];for(e=e+"",r=r+"";(i=Mu.exec(e))&&(a=tu.exec(r));)(u=a.index)>n&&(u=r.slice(n,u),s[o]?s[o]+=u:s[++o]=u),(i=i[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,c.push({i:o,x:Su(i,a)})),n=tu.lastIndex;return n<r.length&&(u=r.slice(n),s[o]?s[o]+=u:s[++o]=u),s.length<2?c[0]?e1(c[0].x):Qw(r):(r=c.length,function(l){for(var f=0,h;f<r;++f)s[(h=c[f]).i]=h.x(l);return s.join("")})}function To(e,r){var n=typeof r,i;return r==null||n==="boolean"?ya(r):(n==="number"?Su:n==="string"?(i=pn(r))?(r=i,ki):t1:r instanceof pn?ki:r instanceof Date?Zw:Jw(r)?Kw:Array.isArray(r)?Yw:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?Xw:Su)(e,r)}function Rf(e){return function(r,n){var i=e((r=Gn(r)).h,(n=Gn(n)).h),a=Ze(r.s,n.s),u=Ze(r.l,n.l),o=Ze(r.opacity,n.opacity);return function(s){return r.h=i(s),r.s=a(s),r.l=u(s),r.opacity=o(s),r+""}}}var r1=Rf(ko),n1=Rf(Ze);function i1(e,r){var n=Ze((e=Au(e)).l,(r=Au(r)).l),i=Ze(e.a,r.a),a=Ze(e.b,r.b),u=Ze(e.opacity,r.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=a(o),e.opacity=u(o),e+""}}function Bf(e){return function(r,n){var i=e((r=Cu(r)).h,(n=Cu(n)).h),a=Ze(r.c,n.c),u=Ze(r.l,n.l),o=Ze(r.opacity,n.opacity);return function(s){return r.h=i(s),r.c=a(s),r.l=u(s),r.opacity=o(s),r+""}}}var a1=Bf(ko),u1=Bf(Ze);function Nf(e){return function r(n){n=+n;function i(a,u){var o=e((a=Fu(a)).h,(u=Fu(u)).h),s=Ze(a.s,u.s),c=Ze(a.l,u.l),l=Ze(a.opacity,u.opacity);return function(f){return a.h=o(f),a.s=s(f),a.l=c(Math.pow(f,n)),a.opacity=l(f),a+""}}return i.gamma=r,i}(1)}var o1=Nf(ko),s1=Nf(Ze);function c1(e,r){r===void 0&&(r=e,e=To);for(var n=0,i=r.length-1,a=r[0],u=new Array(i<0?0:i);n<i;)u[n]=e(a,a=r[++n]);return function(o){var s=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return u[s](o-s)}}var l1=e=>{const r=ma(e);if(r===null)throw new Error(`Could not resolve colour ${e}`);if(Tf(r))return r;if(Of(r)){const n=Gn(r);return r.opacity?{...n,opacity:r.opacity}:n}throw new Error(`Could not resolve colour ${e}`)},zf=(e,r=.5,n=.75,i=1)=>{ee(e,"positive","index"),ee(r,"percentage","saturation"),ee(n,"percentage","lightness"),ee(i,"percentage","alpha");const a=e*137.508;return i===1?`hsl(${a},${r*100}%,${n*100}%)`:`hsl(${a},${r*100}%,${n*100}%,${i*100}%)`},Oo=(e=Xe)=>e()*360,f1=e=>{const r=ma(e),n=r.rgb();return r.opacity<1?{r:n.r,g:n.g,b:n.b,opacity:r.opacity}:{r:n.r,g:n.g,b:n.b}},ma=e=>{if(typeof e=="string"){const r=pn(e);if(r!==null)return r;throw e.startsWith("hsl")&&e.indexOf("%")<=0?new Error(`Could not resolve CSS colour ${e}. HSL values should be in the form: hsl(0, 50%, 50%)`):new Error(`Could not resolve CSS colour ${e}`)}else{if(Tf(e))return Gn(e.h,e.s,e.l);if(Of(e))return Ni(e.r,e.g,e.b)}throw new Error(`Could not resolve colour ${JSON.stringify(e)}`)},h1=e=>ma(e).formatHex(),Jn=(e,r)=>{const n=ma(e);return n.opacity*=r,n.toString()},Wf=(e,r="black",n)=>{n===void 0&&(n=document.body);const i=getComputedStyle(n).getPropertyValue(`--${e}`).trim();return i===void 0||i.length===0?r:i},d1=(e,r,n,i)=>{if(ee(e,"percentage","amount"),typeof r!="string")throw new Error("Expected string for 'from' param");if(typeof n!="string")throw new Error("Expected string for 'to' param");let a;typeof i>"u"?a={}:typeof i=="string"?a={space:i}:a=i;const u=kf(a,[r,n]);if(u===void 0)throw new Error("Could not handle colour/space");return u(e)},kf=(e,r)=>{if(!Array.isArray(r))throw new Error("Expected one or more colours as parameters");let n;if(typeof e>"u"?n={}:typeof e=="string"?n={space:e}:n=e,!Array.isArray(r))throw new Error("Expected array for colours parameter");if(r.length<2)throw new Error("Interpolation expects at least two colours");const{space:i="rgb",long:a=!1}=n;let u;switch(i){case"lab":u=i1;break;case"hsl":u=a?n1:r1;break;case"hcl":u=a?u1:a1;break;case"cubehelix":u=a?s1:o1;break;case"rgb":u=ki;default:u=ki}return n.gamma&&(i==="rgb"||i==="cubehelix")&&(u=u.gamma(n.gamma)),r.length>2?c1(u,r):u(r[0],r[1])},v1=(e,r,...n)=>{if(ee(e,"aboveZero","steps"),!Array.isArray(n))throw new Error("Expected one or more colours as parameters");const i=kf(r,n);if(i===void 0)throw new Error("Could not handle colour/space");const a=1/(e-1),u=[];let o=0;for(let s=0;s<e;s++)u.push(i(o)),o+=a,o>1&&(o=1);return u},Tf=e=>!(e.h===void 0||e.s===void 0||e.l===void 0),Of=e=>!(e.r===void 0||e.g===void 0||e.b===void 0),Iu=function(e,r){return Iu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},Iu(e,r)};function Cn(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Iu(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}function y1(e,r,n,i){function a(u){return u instanceof n?u:new n(function(o){o(u)})}return new(n||(n=Promise))(function(u,o){function s(f){try{l(i.next(f))}catch(h){o(h)}}function c(f){try{l(i.throw(f))}catch(h){o(h)}}function l(f){f.done?u(f.value):a(f.value).then(s,c)}l((i=i.apply(e,r||[])).next())})}function $f(e,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(f){return c([l,f])}}function c(l){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,a&&(u=l[0]&2?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[l[0]&2,u.value]),l[0]){case 0:case 1:u=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,a=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!u||l[1]>u[0]&&l[1]<u[3])){n.label=l[1];break}if(l[0]===6&&n.label<u[1]){n.label=u[1],u=l;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(l);break}u[2]&&n.ops.pop(),n.trys.pop();continue}l=r.call(e,n)}catch(f){l=[6,f],a=0}finally{i=u=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Yn(e){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&e[r],i=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function wn(e,r){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var i=n.call(e),a,u=[],o;try{for(;(r===void 0||r-- >0)&&!(a=i.next()).done;)u.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u}function Zn(e,r,n){if(n||arguments.length===2)for(var i=0,a=r.length,u;i<a;i++)(u||!(i in r))&&(u||(u=Array.prototype.slice.call(r,0,i)),u[i]=r[i]);return e.concat(u||Array.prototype.slice.call(r))}function hn(e){return this instanceof hn?(this.v=e,this):new hn(e)}function m1(e,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,r||[]),a,u=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(v){i[v]&&(a[v]=function(E){return new Promise(function(R,L){u.push([v,E,R,L])>1||s(v,E)})})}function s(v,E){try{c(i[v](E))}catch(R){h(u[0][3],R)}}function c(v){v.value instanceof hn?Promise.resolve(v.value.v).then(l,f):h(u[0][2],v)}function l(v){s("next",v)}function f(v){s("throw",v)}function h(v,E){v(E),u.shift(),u.length&&s(u[0][0],u[0][1])}}function g1(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],n;return r?r.call(e):(e=typeof Yn=="function"?Yn(e):e[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(u){n[u]=e[u]&&function(o){return new Promise(function(s,c){o=e[u](o),a(s,c,o.done,o.value)})}}function a(u,o,s,c){Promise.resolve(c).then(function(l){u({value:l,done:s})},o)}}function _e(e){return typeof e=="function"}function p1(e){var r=function(i){Error.call(i),i.stack=new Error().stack},n=e(r);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ru=p1(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(i,a){return a+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function _u(e,r){if(e){var n=e.indexOf(r);0<=n&&e.splice(n,1)}}var ga=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,n,i,a,u;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=Yn(o),c=s.next();!c.done;c=s.next()){var l=c.value;l.remove(this)}}catch(L){r={error:L}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}else o.remove(this);var f=this.initialTeardown;if(_e(f))try{f()}catch(L){u=L instanceof ru?L.errors:[L]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var v=Yn(h),E=v.next();!E.done;E=v.next()){var R=E.value;try{Hs(R)}catch(L){u=u??[],L instanceof ru?u=Zn(Zn([],wn(u)),wn(L.errors)):u.push(L)}}}catch(L){i={error:L}}finally{try{E&&!E.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}}if(u)throw new ru(u)}},e.prototype.add=function(r){var n;if(r&&r!==this)if(this.closed)Hs(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(r)}},e.prototype._hasParent=function(r){var n=this._parentage;return n===r||Array.isArray(n)&&n.includes(r)},e.prototype._addParent=function(r){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(r),n):n?[n,r]:r},e.prototype._removeParent=function(r){var n=this._parentage;n===r?this._parentage=null:Array.isArray(n)&&_u(n,r)},e.prototype.remove=function(r){var n=this._finalizers;n&&_u(n,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();ga.EMPTY;function Lf(e){return e instanceof ga||e&&"closed"in e&&_e(e.remove)&&_e(e.add)&&_e(e.unsubscribe)}function Hs(e){_e(e)?e():e.unsubscribe()}var jf={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},w1={setTimeout:function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,Zn([e,r],wn(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function qf(e){w1.setTimeout(function(){throw e})}function Gs(){}function E1(e){e()}var $o=function(e){Cn(r,e);function r(n){var i=e.call(this)||this;return i.isStopped=!1,n?(i.destination=n,Lf(n)&&n.add(i)):i.destination=C1,i}return r.create=function(n,i,a){return new Pu(n,i,a)},r.prototype.next=function(n){this.isStopped||this._next(n)},r.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(n){this.destination.next(n)},r.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(ga),b1=Function.prototype.bind;function nu(e,r){return b1.call(e,r)}var D1=function(){function e(r){this.partialObserver=r}return e.prototype.next=function(r){var n=this.partialObserver;if(n.next)try{n.next(r)}catch(i){wi(i)}},e.prototype.error=function(r){var n=this.partialObserver;if(n.error)try{n.error(r)}catch(i){wi(i)}else wi(r)},e.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(n){wi(n)}},e}(),Pu=function(e){Cn(r,e);function r(n,i,a){var u=e.call(this)||this,o;if(_e(n)||!n)o={next:n??void 0,error:i??void 0,complete:a??void 0};else{var s;u&&jf.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=function(){return u.unsubscribe()},o={next:n.next&&nu(n.next,s),error:n.error&&nu(n.error,s),complete:n.complete&&nu(n.complete,s)}):o=n}return u.destination=new D1(o),u}return r}($o);function wi(e){qf(e)}function A1(e){throw e}var C1={closed:!0,next:Gs,error:A1,complete:Gs},Lo=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function F1(e){return e}function S1(e){return e.length===0?F1:e.length===1?e[0]:function(n){return e.reduce(function(i,a){return a(i)},n)}}var br=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var n=new e;return n.source=this,n.operator=r,n},e.prototype.subscribe=function(r,n,i){var a=this,u=I1(r)?r:new Pu(r,n,i);return E1(function(){var o=a,s=o.operator,c=o.source;u.add(s?s.call(u,c):c?a._subscribe(u):a._trySubscribe(u))}),u},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(n){r.error(n)}},e.prototype.forEach=function(r,n){var i=this;return n=Ks(n),new n(function(a,u){var o=new Pu({next:function(s){try{r(s)}catch(c){u(c),o.unsubscribe()}},error:u,complete:a});i.subscribe(o)})},e.prototype._subscribe=function(r){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(r)},e.prototype[Lo]=function(){return this},e.prototype.pipe=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return S1(r)(this)},e.prototype.toPromise=function(r){var n=this;return r=Ks(r),new r(function(i,a){var u;n.subscribe(function(o){return u=o},function(o){return a(o)},function(){return i(u)})})},e.create=function(r){return new e(r)},e}();function Ks(e){var r;return(r=e??jf.Promise)!==null&&r!==void 0?r:Promise}function M1(e){return e&&_e(e.next)&&_e(e.error)&&_e(e.complete)}function I1(e){return e&&e instanceof $o||M1(e)&&Lf(e)}function _1(e){return _e(e?.lift)}function jo(e){return function(r){if(_1(r))return r.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ti(e,r,n,i,a){return new P1(e,r,n,i,a)}var P1=function(e){Cn(r,e);function r(n,i,a,u,o,s){var c=e.call(this,n)||this;return c.onFinalize=o,c.shouldUnsubscribe=s,c._next=i?function(l){try{i(l)}catch(f){n.error(f)}}:e.prototype._next,c._error=u?function(l){try{u(l)}catch(f){n.error(f)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=a?function(){try{a()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,c}return r.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},r}($o),R1={now:function(){return Date.now()},delegate:void 0},B1=function(e){Cn(r,e);function r(n,i){return e.call(this)||this}return r.prototype.schedule=function(n,i){return this},r}(ga),Js={setInterval:function(e,r){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,Zn([e,r],wn(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},N1=function(e){Cn(r,e);function r(n,i){var a=e.call(this,n,i)||this;return a.scheduler=n,a.work=i,a.pending=!1,a}return r.prototype.schedule=function(n,i){var a;if(i===void 0&&(i=0),this.closed)return this;this.state=n;var u=this.id,o=this.scheduler;return u!=null&&(this.id=this.recycleAsyncId(o,u,i)),this.pending=!0,this.delay=i,this.id=(a=this.id)!==null&&a!==void 0?a:this.requestAsyncId(o,this.id,i),this},r.prototype.requestAsyncId=function(n,i,a){return a===void 0&&(a=0),Js.setInterval(n.flush.bind(n,this),a)},r.prototype.recycleAsyncId=function(n,i,a){if(a===void 0&&(a=0),a!=null&&this.delay===a&&this.pending===!1)return i;i!=null&&Js.clearInterval(i)},r.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var a=this._execute(n,i);if(a)return a;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},r.prototype._execute=function(n,i){var a=!1,u;try{this.work(n)}catch(o){a=!0,u=o||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),u},r.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,a=n.scheduler,u=a.actions;this.work=this.state=this.scheduler=null,this.pending=!1,_u(u,this),i!=null&&(this.id=this.recycleAsyncId(a,i,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},r}(B1),Ys=function(){function e(r,n){n===void 0&&(n=e.now),this.schedulerActionCtor=r,this.now=n}return e.prototype.schedule=function(r,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,r).schedule(i,n)},e.now=R1.now,e}(),z1=function(e){Cn(r,e);function r(n,i){i===void 0&&(i=Ys.now);var a=e.call(this,n,i)||this;return a.actions=[],a._active=!1,a}return r.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var a;this._active=!0;do if(a=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,a){for(;n=i.shift();)n.unsubscribe();throw a}},r}(Ys),W1=new z1(N1),Uf=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function k1(e){return _e(e?.then)}function T1(e){return _e(e[Lo])}function O1(e){return Symbol.asyncIterator&&_e(e?.[Symbol.asyncIterator])}function $1(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function L1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var j1=L1();function q1(e){return _e(e?.[j1])}function U1(e){return m1(this,arguments,function(){var n,i,a,u;return $f(this,function(o){switch(o.label){case 0:n=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,hn(n.read())];case 3:return i=o.sent(),a=i.value,u=i.done,u?[4,hn(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,hn(a)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function x1(e){return _e(e?.getReader)}function qo(e){if(e instanceof br)return e;if(e!=null){if(T1(e))return V1(e);if(Uf(e))return H1(e);if(k1(e))return G1(e);if(O1(e))return xf(e);if(q1(e))return K1(e);if(x1(e))return J1(e)}throw $1(e)}function V1(e){return new br(function(r){var n=e[Lo]();if(_e(n.subscribe))return n.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function H1(e){return new br(function(r){for(var n=0;n<e.length&&!r.closed;n++)r.next(e[n]);r.complete()})}function G1(e){return new br(function(r){e.then(function(n){r.closed||(r.next(n),r.complete())},function(n){return r.error(n)}).then(null,qf)})}function K1(e){return new br(function(r){var n,i;try{for(var a=Yn(e),u=a.next();!u.done;u=a.next()){var o=u.value;if(r.next(o),r.closed)return}}catch(s){n={error:s}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}r.complete()})}function xf(e){return new br(function(r){Y1(e,r).catch(function(n){return r.error(n)})})}function J1(e){return xf(U1(e))}function Y1(e,r){var n,i,a,u;return y1(this,void 0,void 0,function(){var o,s;return $f(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=g1(e),c.label=1;case 1:return[4,n.next()];case 2:if(i=c.sent(),!!i.done)return[3,4];if(o=i.value,r.next(o),r.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=c.sent(),a={error:s},[3,11];case 6:return c.trys.push([6,,9,10]),i&&!i.done&&(u=n.return)?[4,u.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(a)throw a.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}function Z1(e,r,n,i,a){i===void 0&&(i=0),a===void 0&&(a=!1);var u=r.schedule(function(){n(),a?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(u),!a)return u}function Oi(e,r){return jo(function(n,i){var a=0;n.subscribe(Ti(i,function(u){i.next(e.call(r,u,a++))}))})}var X1=Array.isArray;function Q1(e,r){return X1(r)?e.apply(void 0,Zn([],wn(r))):e(r)}function eE(e){return Oi(function(r){return Q1(e,r)})}function tE(e,r,n,i,a,u,o,s){var c=[],l=0,f=0,h=!1,v=function(){h&&!c.length&&!l&&r.complete()},E=function(L){return l<i?R(L):c.push(L)},R=function(L){u&&r.next(L),l++;var N=!1;qo(n(L,f++)).subscribe(Ti(r,function(F){a?.(F),u?E(F):r.next(F)},function(){N=!0},void 0,function(){if(N)try{l--;for(var F=function(){var C=c.shift();o?Z1(r,o,function(){return R(C)}):R(C)};c.length&&l<i;)F();v()}catch(C){r.error(C)}}))};return e.subscribe(Ti(r,E,function(){h=!0,v()})),function(){s?.()}}function Vf(e,r,n){return n===void 0&&(n=1/0),_e(r)?Vf(function(i,a){return Oi(function(u,o){return r(i,u,a,o)})(qo(e(i,a)))},n):(typeof r=="number"&&(n=r),jo(function(i,a){return tE(i,a,e,n)}))}var rE=["addListener","removeListener"],nE=["addEventListener","removeEventListener"],iE=["on","off"];function $i(e,r,n,i){if(_e(n)&&(i=n,n=void 0),i)return $i(e,r,n).pipe(eE(i));var a=wn(oE(e)?nE.map(function(s){return function(c){return e[s](r,c,n)}}):aE(e)?rE.map(Zs(e,r)):uE(e)?iE.map(Zs(e,r)):[],2),u=a[0],o=a[1];if(!u&&Uf(e))return Vf(function(s){return $i(s,r,n)})(qo(e));if(!u)throw new TypeError("Invalid event target");return new br(function(s){var c=function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];return s.next(1<l.length?l:l[0])};return u(c),function(){return o(c)}})}function Zs(e,r){return function(n){return function(i){return e[n](r,i)}}}function aE(e){return _e(e.addListener)&&_e(e.removeListener)}function uE(e){return _e(e.on)&&_e(e.off)}function oE(e){return _e(e.addEventListener)&&_e(e.removeEventListener)}function Hf(e,r){return r===void 0&&(r=W1),jo(function(n,i){var a=null,u=null,o=null,s=function(){if(a){a.unsubscribe(),a=null;var l=u;u=null,i.next(l)}};function c(){var l=o+e,f=r.now();if(f<l){a=this.schedule(void 0,l-f),i.add(a);return}s()}n.subscribe(Ti(i,function(l){u=l,o=r.now(),a||(a=r.schedule(c,e),i.add(a))},function(){s(),i.complete()},void 0,function(){u=a=null}))})}var sE=en(wc(),1),Gf=(e="viewport")=>{if(e==="viewport")return(r,n)=>{const i=st(r,n);return Object.freeze({x:i.x/window.innerWidth,y:i.y/window.innerHeight})};if(e==="screen")return(r,n)=>{const i=st(r,n);return Object.freeze({x:i.x/screen.width,y:i.y/screen.height})};if(e==="document")return(r,n)=>{const i=st(r,n);return Object.freeze({x:i.x/document.body.scrollWidth,y:i.y/document.body.scrollHeight})};throw new Error(`Unknown 'reference' parameter: ${JSON.stringify(e)}`)},Kf=(e,r={})=>{const n=r.target??"viewport",i=r.relative??!1,a=r.anchor??"nw",u=je(e),o=Jf(n);if(i){const s=Gf(n);return()=>s(o(Bi(u.getBoundingClientRect(),a)))}else return()=>o(Bi(u.getBoundingClientRect(),a))},cE=(e,r="nw")=>{const n=je(e);return Bi(n.getBoundingClientRect(),r)},lE=(e,r="viewport")=>Kf(e,{relative:!0,target:r})(),Jf=(e="viewport")=>{switch(e){case"screen":return(r,n)=>{const i=st(r,n);return Object.freeze({x:i.x+window.screenX,y:i.y+window.screenY})};case"document":return(r,n)=>{const i=st(r,n);return Object.freeze({x:i.x+window.scrollX,y:i.y+window.scrollY})};case"viewport":return(r,n)=>{const i=st(r,n);return Object.freeze({x:i.x,y:i.y})};default:throw new Error(`Unexpected target coordinate space: ${e}. Expected: viewport, document or screen`)}},fE=(e,r,n="window")=>{if(!e)throw new Error("domQueryOrEl is null or undefined");const i=je(e),a=Ra(r,window.innerWidth,window.innerHeight),u=i.getBoundingClientRect(),o=Or(a,u.width/2,u.height/2);i.style.transform=`translate(${o.x}px, ${o.y}px)`},Yf=(e,r)=>{const n=je(e),i=pa(),a=()=>{const u=window.innerWidth,o=window.innerHeight;if(n.setAttribute("width",u.toString()),n.setAttribute("height",o.toString()),r!==void 0){const s={min:Math.min(u,o),max:Math.max(u,o),width:u,height:o,center:{x:u/2,y:o/2}};r({el:n,bounds:s})}};return i.subscribe(a),a(),i},hE=(e,r)=>{if(!e)throw new Error("domQueryOrEl is null or undefined");const n=je(e);if(n.nodeName!=="CANVAS")throw new Error(`Expected CANVAS HTML element. Got: ${n.nodeName}`);const i=r.fullSize??!0,a=Math.round(window.devicePixelRatio)||1,u=r.scaleBy??"both";let o=Ki.scaler("both");const s=f=>{o=Ki.scaler(u,f);const h=me.multiply(f,a,a);n.width=h.width,n.height=h.height,n.style.width=f.width+"px",n.style.height=f.height+"px"},c=()=>{const f={width:window.innerWidth,height:window.innerHeight};s(f)},l=()=>{const f=n.getContext("2d");if(f===null)throw new Error("Could not create drawing context");f.scale(a,a)};return i&&pa().subscribe(c),{abs:o.abs,rel:o.rel,getContext:l}},dE=(e,r,n=!1)=>{if(e==null)throw new Error("domQueryOrEl is null or undefined");const i=je(e);if(i.nodeName!=="CANVAS")throw new Error(`Expected HTML element with node name CANVAS, not ${i.nodeName}`);const a=i.getContext("2d");if(a===null)throw new Error("Could not create drawing context");const u=()=>{const s=window.innerWidth,c=window.innerHeight;if(i.width=s,i.height=c,r!==void 0){const l={min:Math.min(s,c),max:Math.max(s,c),width:s,height:c,center:{x:s/2,y:c/2}};r({ctx:a,el:i,bounds:l})}};n||(i.style.top="0",i.style.left="0",i.style.zIndex="-100",i.style.position="fixed");const o=pa();return o.subscribe(u),u(),o},vE=(e,r)=>{if(!(e===null||!e)){if(!Array.isArray(r))throw new Error("List should be an array of strings");for(let n=0;n<r.length;n++)if(e.classList.contains(r[n])){e.classList.remove(r[n]),n+1<r.length?e.classList.add(r[n+1]):e.classList.add(r[0]);return}e.classList.add(r[0])}},yE=(e,r,n=100)=>{const i=je(e),a=i.parentElement;if(a===null)throw new Error("Element has no parent");return xo(a,n).subscribe(o=>{const s=o.find(f=>f.target===a);if(s===void 0)return;const c=s.contentRect.width,l=s.contentRect.height;if(i.setAttribute("width",c+"px"),i.setAttribute("height",l+"px"),r!==void 0){const f={min:Math.min(c,l),max:Math.max(c,l),width:c,height:l,center:{x:c/2,y:l/2}};r({el:i,bounds:f})}})},mE=e=>{const r=je(e),i=window.getComputedStyle(r).transform;if(i==="none"||typeof i>"u")return{x:0,y:0,z:0};const a=i.includes("3d")?"3d":"2d",u=i.match(/matrix.*\((.+)\)/)[1].split(", ");return a==="2d"?{x:parseFloat(u[4]),y:parseFloat(u[5]),z:0}:a==="3d"?{x:parseFloat(u[12]),y:parseFloat(u[13]),z:parseFloat(u[14])}:{x:0,y:0,z:0}},Uo=(e,r,n=100)=>{const i=je(e);if(i.nodeName!=="CANVAS")throw new Error(`Expected HTML element with node name CANVAS, not ${i.nodeName}`);const a=i.parentElement;if(a===null)throw new Error("Element has no parent");const u=i.getContext("2d");if(u===null)throw new Error("Could not create drawing context");return i.style.width="100%",i.style.height="100%",xo(a,n).subscribe(s=>{const c=s.find(h=>h.target===a);if(c===void 0)return;const l=c.contentRect.width,f=c.contentRect.height;if(i.setAttribute("width",i.offsetWidth+"px"),i.setAttribute("height",i.offsetHeight+"px"),r!==void 0){const h={min:Math.min(l,f),max:Math.max(l,f),width:l,height:f,center:{x:l/2,y:f/2}};r({ctx:u,el:i,bounds:h})}})},pa=(e=100)=>$i(window,"resize").pipe(Hf(e)),je=e=>{if(typeof e=="string"){const n=document.querySelector(e);if(n===null)throw e.startsWith("#")?new Error(`Query '${e}' did not match anything. Try '#id', 'div', or '.class'`):new Error(`Query '${e}' did not match anything. Did you mean '#${e}?`);e=n}else{if(e===null)throw new Error(`domQueryOrEl ${e} is null`);if(e===void 0)throw new Error(`domQueryOrEl ${e} is undefined`)}return e},gE=(e,r)=>{const n=document.createElement(r);return e.parentElement?.insertBefore(n,e.nextSibling),n},pE=(e,r)=>{const n=document.createElement(r);return e.appendChild(n),n},wE=e=>{let r=e.lastElementChild;for(;r;)e.removeChild(r),r=e.lastElementChild},EE=()=>new br(r=>{const n=new MutationObserver(a=>{r.next(a)}),i={attributeFilter:["class"],attributes:!0};return n.observe(document.documentElement,i),function(){n.disconnect()}}),xo=(e,r=1e3)=>{if(e===null)throw new Error("elem parameter is null. Expected element to observe");if(e===void 0)throw new Error("elem parameter is undefined. Expected element to observe");return new br(i=>{const a=new ResizeObserver(u=>{i.next(u)});return a.observe(e),function(){a.unobserve(e)}}).pipe(Hf(r))},bE=e=>new Promise((n,i)=>{const a=sE.default.stringify(e);navigator.clipboard.writeText(JSON.stringify(a)).then(()=>{n(!0)},u=>{console.warn("Could not copy to clipboard"),console.log(a),i(u)})}),DE=(e,r,n)=>{if(e===null)throw new Error("parentEl is null");if(e===void 0)throw new Error("parentEl is undefined");const i=new Set;for(const[u,o]of r){const s=`c-${u}`,c=e.querySelector(`#${s}`),l=n(o,c);c!==l&&(l.id=s,e.append(l)),i.add(s)}const a=[];for(let u=0;u<e.children.length;u++){const o=e.children[u];i.has(o.id)||a.push(o)}a.forEach(u=>u.remove())},Zf=(e,r,n)=>{const i=Array.from(document.querySelectorAll(e));if(!!i)for(const a of i)r?a.classList.add(n):a.classList.remove(n)},Xf=(e,r)=>{const n=Array.from(document.querySelectorAll(e));if(!!n)for(const i of n)i.style.display=r},AE=e=>document.getElementById(e),Qf=(e,r)=>{const n=Array.from(document.querySelectorAll(e));if(!!n){typeof r=="number"&&(r=r.toString());for(const i of n)i.innerHTML=r}},eh=(e,r)=>{const n=Array.from(document.querySelectorAll(e));if(!!n){typeof r=="number"&&(r=r.toString());for(const i of n)i.textContent=r}},CE=e=>({text:r=>eh(e,r),html:r=>Qf(e,r),cssDisplay:r=>Xf(e,r),cssClass:(r,n)=>Zf(e,r,n)}),Li=class Ru{opts;data;constructor(r={},n=[]){this.opts=r,this.data=n}push(...r){return new Ru(this.opts,kc(this.opts,this.data,...r))}pop(){return new Ru(this.opts,Tc(this.opts,this.data))}forEach(r){this.data.forEach(r)}forEachFromTop(r){[...this.data].reverse().forEach(r)}get isEmpty(){return Oc(this.opts,this.data)}get isFull(){return $c(this.opts,this.data)}get peek(){return lu(this.opts,this.data)}get length(){return this.data.length}},FE=(e={},...r)=>new Li({...e},[...r]),th=Math.PI*2,rh=e=>{if(e===null)throw Error("canvasElCtxOrQuery null. Must be a 2d drawing context or Canvas element");if(e===void 0)throw Error("canvasElCtxOrQuery undefined. Must be a 2d drawing context or Canvas element");const r=e instanceof CanvasRenderingContext2D?e:e instanceof HTMLCanvasElement?e.getContext("2d"):typeof e=="string"?je(e).getContext("2d"):e;if(r===null)throw new Error("Could not create 2d context for canvas");return r},SE=(e,r)=>{const n=rh(e);return{paths(i,a){ah(n,i,a)},line(i,a){Ho(n,i,a)},rect(i,a){sh(n,i,a)},bezier(i,a){uh(n,i,a)},connectedPoints(i,a){wa(n,i,a)},pointLabels(i,a){Ea(n,i,a)},dot(i,a){xt(n,i,a)},circle(i,a){ih(n,i,a)},arc(i,a){nh(n,i,a)},textBlock(i,a){a.bounds===void 0&&r!==void 0&&(a={...a,bounds:{...r,x:0,y:0}}),ch(n,i,a)}}},Vo=e=>ME(e.strokeStyle,e.fillStyle),ct=(e,r={},...n)=>{if(e===void 0)throw Error("ctx undefined");const i=un(e).push(Vo(r),...n);return i.apply(),i},nh=(e,r,n={})=>{ct(e,n);const i=a=>{e.beginPath(),e.arc(a.x,a.y,a.radius,a.startRadian,a.endRadian),e.stroke()};Array.isArray(r)?r.forEach(i):i(r)},ME=(e,r)=>i=>{r&&(i.fillStyle=r),e&&(i.strokeStyle=e)},IE=(e,r,n)=>a=>{e&&(a.lineWidth=e),r&&(a.lineJoin=r),n&&(a.lineCap=n)},un=(e,r)=>(r===void 0&&(r=new Li),{push:(...u)=>{r===void 0&&(r=new Li);const o=r.push(...u);return u.forEach(s=>s(e)),un(e,o)},pop:()=>{const u=r?.pop();return un(e,u)},apply:()=>r===void 0?un(e):(r.forEach(u=>u(e)),un(e,r))}),_E=(e,r,n)=>{ct(e,n),e.moveTo(r[0].x,r[0].y),r.forEach((i,a)=>{if(a+2>=r.length)return;const u=r[a+1],o={x:(i.x+u.x)/2,y:(i.y+u.y)/2},s=(o.x+i.x)/2,c=(o.x+u.x)/2;e.quadraticCurveTo(s,u.y,o.x,o.y),e.quadraticCurveTo(c,u.y,u.x,u.y)})},ih=(e,r,n={})=>{ct(e,n);const i=a=>{e.beginPath(),e.arc(a.x,a.y,a.radius,0,th),n.strokeStyle&&e.stroke(),n.fillStyle&&e.fill()};Array.isArray(r)?r.forEach(i):i(r)},PE=(e,r,n={})=>{ct(e,n);const i=a=>{e.beginPath();const u=a.rotation??0,o=a.startAngle??0,s=a.endAngle??th;e.ellipse(a.x,a.y,a.radiusX,a.radiusY,u,o,s),n.strokeStyle&&e.stroke(),n.fillStyle&&e.fill()};Array.isArray(r)?r.forEach(i):i(r)},ah=(e,r,n={})=>{ct(e,n);const i=a=>{if(na(a))oh(e,a,n);else if(Tr(a))Ho(e,a,n);else throw new Error(`Unknown path type ${JSON.stringify(a)}`)};Array.isArray(r)?r.forEach(i):i(r)},wa=(e,r,n={})=>{const i=n.loop??!1;Kv(r),r.length!==0&&(r.forEach((a,u)=>pe(a,`Index ${u}`)),ct(e,n),e.beginPath(),e.moveTo(r[0].x,r[0].y),r.forEach(a=>e.lineTo(a.x,a.y)),i&&e.lineTo(r[0].x,r[0].y),(n.strokeStyle||n.strokeStyle===void 0&&n.fillStyle===void 0)&&e.stroke(),n.fillStyle&&e.fill())},Ea=(e,r,n={},i)=>{r.length!==0&&(r.forEach((a,u)=>pe(a,`Index ${u}`)),ct(e,n),r.forEach((a,u)=>{const o=i!==void 0&&u<i.length?i[u]:u.toString();e.fillText(o.toString(),a.x,a.y)}))},RE=(e,r)=>{const n=e.getTransform();return{x:r.x*n.a+r.y*n.c+n.e,y:r.x*n.b+r.y*n.d+n.f}},BE=e=>{const r=document.createElement("img");return r.src=e.toDataURL("image/jpeg"),r},xt=(e,r,n)=>{n===void 0&&(n={});const i=n.radius??10;if(ct(e,n),e.beginPath(),Array.isArray(r))r.forEach(a=>{e.arc(a.x,a.y,i,0,2*Math.PI)});else{const a=r;e.arc(a.x,a.y,i,0,2*Math.PI)}(n.filled||!n.outlined)&&e.fill(),n.outlined&&e.stroke()},uh=(e,r,n)=>{na(r)?oh(e,r,n):lo(r)&&NE(e,r,n)},NE=(e,r,n={})=>{let i=ct(e,n);const{a,b:u,cubic1:o,cubic2:s}=r,c=n.debug??!1;e.beginPath(),e.moveTo(a.x,a.y),e.bezierCurveTo(o.x,o.y,s.x,s.y,u.x,u.y),e.stroke(),c&&(i=i.push(Vo({...n,strokeStyle:Jn(n.strokeStyle??"silver",.6),fillStyle:Jn(n.fillStyle??"yellow",.4)})),i.apply(),e.moveTo(a.x,a.y),e.lineTo(o.x,o.y),e.stroke(),e.moveTo(u.x,u.y),e.lineTo(s.x,s.y),e.stroke(),e.fillText("a",a.x+5,a.y),e.fillText("b",u.x+5,u.y),e.fillText("c1",o.x+5,o.y),e.fillText("c2",s.x+5,s.y),xt(e,o,{radius:3}),xt(e,s,{radius:3}),xt(e,a,{radius:3}),xt(e,u,{radius:3}),i=i.pop(),i.apply())},oh=(e,r,n={})=>{const{a:i,b:a,quadratic:u}=r,o=n.debug??!1;let s=ct(e,n);e.beginPath(),e.moveTo(i.x,i.y),e.quadraticCurveTo(u.x,u.y,a.x,a.y),e.stroke(),o&&(s=s.push(Vo({...n,strokeStyle:Jn(n.strokeStyle??"silver",.6),fillStyle:Jn(n.fillStyle??"yellow",.4)})),wa(e,[i,u,a]),e.fillText("a",i.x+5,i.y),e.fillText("b",a.x+5,a.y),e.fillText("h",u.x+5,u.y),xt(e,u,{radius:3}),xt(e,i,{radius:3}),xt(e,a,{radius:3}),s=s.pop(),s.apply())},Ho=(e,r,n={})=>{const i=n.debug??!1,a=IE(n.lineWidth,n.lineJoin,n.lineCap);ct(e,n,a);const u=o=>{const{a:s,b:c}=o;e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(c.x,c.y),i&&(e.fillText("a",s.x,s.y),e.fillText("b",c.x,c.y),xt(e,s,{radius:5,strokeStyle:"black"}),xt(e,c,{radius:5,strokeStyle:"black"})),e.stroke()};Array.isArray(r)?r.forEach(u):u(r)},zE=(e,r,n={})=>{ct(e,n);const i=a=>{wa(e,Du(a),{...n,loop:!0}),n.debug&&Ea(e,Du(a),void 0,["a","b","c"])};Array.isArray(r)?r.forEach(i):i(r)},sh=(e,r,n={})=>{ct(e,n);const i=a=>{n.filled&&e.fillRect(a.x,a.y,a.width,a.height),(n.stroked??!0)&&e.strokeRect(a.x,a.y,a.width,a.height),n.debug&&Ea(e,go(a),void 0,["NW","NE","SE","SW"])};Array.isArray(r)?r.forEach(i):i(r)},on=(e,r,n=0,i)=>{if(r==null||r.length===0)return 0;const a=e.measureText(r);return i?V0(a.width,i)+n:a.width+n},ch=(e,r,n)=>{ct(e,n);const i=n.anchorPadding??0,a=n.anchor,u=n.bounds??{x:0,y:0,width:1e6,height:1e6},o=r.map(E=>e.measureText(E)),s=o.map(E=>E.width),c=o.map(E=>E.actualBoundingBoxAscent+E.actualBoundingBoxDescent),l=Math.max(...s),f=c.reduce((E,R)=>E+R,0);let{x:h,y:v}=a;a.x+l>u.width?h=u.width-(l+i):h-=i,h<u.x&&(h=u.x+i),a.y+f>u.height?v=u.height-(f+i):v-=i,v<u.y&&(v=u.y+i),r.forEach((E,R)=>{e.fillText(E,h,v),v+=c[R]})},WE=(e,r,n)=>{const{bounds:i}=n,{horiz:a="left",vert:u="top"}=n;let o;typeof r=="string"?o=[r]:o=r,ct(e,n),e.save(),e.translate(i.x,i.y),e.textAlign="left",e.textBaseline="top";const s=i.width/2,c=i.height/2,l=o.map(E=>e.measureText(E)),f=l.map(E=>E.actualBoundingBoxAscent+E.actualBoundingBoxDescent),h=f.reduce((E,R)=>E+R,0);let v=0;u==="center"?v=c-h/2:u==="bottom"&&(v=i.height-h),o.forEach((E,R)=>{let L=0;a==="center"?L=s-l[R].width/2:a==="right"&&(L=i.width-l[R].width),e.fillText(o[R],L,v),v+=f[R]}),e.restore()},Go={};Z(Go,{Elements:()=>ji,applyOpts:()=>Dr,applyPathOpts:()=>Jo,applyStrokeOpts:()=>kr,clear:()=>OE,createEl:()=>ba,createOrResolve:()=>gr,getBounds:()=>$E,makeHelper:()=>jE,remove:()=>Eh,setBounds:()=>LE});var kE=(e,r,n)=>{const i=ba("marker",e);if(r.markerWidth&&i.setAttribute("markerWidth",r.markerWidth?.toString()),r.markerHeight&&i.setAttribute("markerHeight",r.markerHeight?.toString()),r.orient?i.setAttribute("orient",r.orient.toString()):i.setAttribute("orient","auto-start-reverse"),r.viewBox&&i.setAttribute("viewBox",r.viewBox.toString()),r.refX&&i.setAttribute("refX",r.refX.toString()),r.refY&&i.setAttribute("refY",r.refY.toString()),n){const a=n();i.appendChild(a)}return i},iu=(e,r,n)=>{if(e===null)return"(elem null)";const i=e.ownerSVGElement;if(i===null)throw new Error("parent for elem is null");const a=gr(i,"defs","defs");let u=a.querySelector(`#${r.id}`);if(u!==null)return`url(#${r.id})`;if(r.id==="triangle")r={...r,strokeStyle:"transparent"},r.markerHeight||(r={...r,markerHeight:6}),r.markerWidth||(r={...r,markerWidth:6}),r.refX||(r={...r,refX:r.markerWidth}),r.refY||(r={...r,refY:r.markerHeight}),(!r.fillStyle||r.fillStyle==="none")&&(r={...r,fillStyle:"black"}),r.viewBox||(r={...r,viewBox:"0 0 10 10"}),u=kE(r.id,r,()=>{const o=ba("path");return o.setAttribute("d","M 0 0 L 10 5 L 0 10 z"),r&&Dr(o,r),o});else throw new Error(`Do not know how to make ${r.id}`);return u.id=r.id,a.appendChild(u),`url(#${r.id})`},ji={};Z(ji,{circle:()=>dh,circleUpdate:()=>hh,grid:()=>wh,group:()=>TE,groupUpdate:()=>vh,line:()=>qi,lineUpdate:()=>yh,path:()=>lh,pathUpdate:()=>fh,text:()=>ph,textPath:()=>gh,textPathUpdate:()=>mh,textUpdate:()=>Ko});var Xs=e=>e>=0&&e<=1?e*100+"%":e.toString(),lh=(e,r,n,i)=>{const a=gr(r,"path",i),u=typeof e=="string"?e:e.join(`
`);return a.setAttributeNS(null,"d",u),r.appendChild(a),fh(a,n)},fh=(e,r)=>(r&&Dr(e,r),r&&kr(e,r),e),hh=(e,r,n)=>(e.setAttributeNS(null,"cx",r.x.toString()),e.setAttributeNS(null,"cy",r.y.toString()),e.setAttributeNS(null,"r",r.radius.toString()),n&&Dr(e,n),n&&kr(e,n),e),dh=(e,r,n,i)=>{const a=gr(r,"circle",i);return hh(a,e,n)},TE=(e,r,n)=>{const i=gr(r,"g",n);return vh(i,e)},vh=(e,r)=>{for(const n of r)n.parentNode!==e&&e.appendChild(n);return e},qi=(e,r,n,i)=>{const a=gr(r,"line",i);return yh(a,e,n)},yh=(e,r,n)=>(e.setAttributeNS(null,"x1",r.a.x.toString()),e.setAttributeNS(null,"y1",r.a.y.toString()),e.setAttributeNS(null,"x2",r.b.x.toString()),e.setAttributeNS(null,"y2",r.b.y.toString()),n&&Dr(e,n),n&&Jo(e,n),n&&kr(e,n),e),mh=(e,r,n)=>(n?.method&&e.setAttributeNS(null,"method",n.method),n?.side&&e.setAttributeNS(null,"side",n.side),n?.spacing&&e.setAttributeNS(null,"spacing",n.spacing),n?.startOffset&&e.setAttributeNS(null,"startOffset",Xs(n.startOffset)),n?.textLength&&e.setAttributeNS(null,"textLength",Xs(n.textLength)),r&&(e.textContent=r),n&&Dr(e,n),n&&kr(e,n),e),gh=(e,r,n,i,a)=>{const u=gr(n,"text",a+"-text");Ko(u,void 0,void 0,i);const o=gr(u,"textPath",a);return o.setAttributeNS(null,"href",e),mh(o,r,i)},Ko=(e,r,n,i)=>(r&&(e.setAttributeNS(null,"x",r.x.toString()),e.setAttributeNS(null,"y",r.y.toString())),n&&(e.textContent=n),i&&(Dr(e,i),i&&kr(e,i),i.anchor&&e.setAttributeNS(null,"text-anchor",i.anchor),i.align&&e.setAttributeNS(null,"alignment-baseline",i.align),(i.userSelect??!0)||(e.style.userSelect="none",e.style.webkitUserSelect="none")),e),ph=(e,r,n,i,a)=>{const u=gr(r,"text",a);return Ko(u,n,e,i)},wh=(e,r,n,i,a,u={})=>{u.strokeStyle||(u={...u,strokeStyle:Wf("bg-dim","silver")}),u.strokeWidth||(u={...u,strokeWidth:1});const o=ba("g");Dr(o,u),Jo(o,u),kr(o,u);let s=0;for(;s<a;){const l=xi(0,s,i,s);qi(l,o),s+=n}let c=0;for(;c<i;){const l=xi(c,0,c,a);qi(l,o),c+=n}return e.appendChild(o),o},gr=(e,r,n)=>{let i=null;if(n!==void 0&&(typeof n=="string"?i=e.querySelector(n):i=n),i===null){const a=document.createElementNS("http://www.w3.org/2000/svg",r);return e.appendChild(a),n&&typeof n=="string"&&n.startsWith("#")&&(a.id=n.substring(1)),a}return i},Eh=(e,r)=>{if(typeof r=="string"){const n=e.querySelector(r);if(n===null)return;n.remove()}else r.remove()},OE=e=>{let r=e.lastElementChild;for(;r;)e.removeChild(r),r=e.lastElementChild},ba=(e,r)=>{const n=document.createElementNS("http://www.w3.org/2000/svg",e);return r&&(n.id=r),n},Jo=(e,r)=>{r.markerEnd&&e.setAttribute("marker-end",iu(e,r.markerEnd)),r.markerStart&&e.setAttribute("marker-start",iu(e,r.markerStart)),r.markerMid&&e.setAttribute("marker-mid",iu(e,r.markerMid))},Dr=(e,r)=>{r.fillStyle&&e.setAttributeNS(null,"fill",r.fillStyle),r.opacity&&e.setAttributeNS(null,"opacity",r.opacity.toString())},kr=(e,r)=>{r.strokeStyle&&e.setAttributeNS(null,"stroke",r.strokeStyle),r.strokeWidth&&e.setAttributeNS(null,"stroke-width",r.strokeWidth.toString()),r.strokeDash&&e.setAttribute("stroke-dasharray",r.strokeDash),r.strokeLineCap&&e.setAttribute("stroke-linecap",r.strokeLineCap)},$E=e=>{const r=e.getAttributeNS(null,"width"),n=r===null?0:parseFloat(r),i=e.getAttributeNS(null,"height"),a=i===null?0:parseFloat(i);return{width:n,height:a}},LE=(e,r)=>{e.setAttributeNS(null,"width",r.width.toString()),e.setAttributeNS(null,"height",r.height.toString())},jE=(e,r)=>(r&&(Dr(e,r),kr(e,r)),{remove:i=>Eh(e,i),text:(i,a,u,o)=>ph(i,e,a,u,o),textPath:(i,a,u,o)=>gh(i,a,e,u,o),line:(i,a,u)=>qi(i,e,a,u),circle:(i,a,u)=>dh(i,e,a,u),path:(i,a,u)=>lh(i,e,a,u),grid:(i,a,u,o,s)=>wh(e,i,a,u,o,s),query:i=>e.querySelector(i),get width(){const i=e.getAttributeNS(null,"width");return i===null?0:parseFloat(i)},set width(i){e.setAttributeNS(null,"width",i.toString())},get parent(){return e},get height(){const i=e.getAttributeNS(null,"height");return i===null?0:parseFloat(i)},set height(i){e.setAttributeNS(null,"height",i.toString())},clear:()=>{for(;e.firstChild;)e.removeChild(e.lastChild)}}),Yo={};Z(Yo,{add:()=>bh,calcScale:()=>Zo,defaultAxis:()=>Bu,draw:()=>dn,drawValue:()=>Dh,plot:()=>YE});var qE=Math.PI*2,Bu=e=>({endWith:"none",lineWidth:1,namePosition:"none",name:e,showLabels:e==="y",showLine:!0,textSize:e==="y"?20:10}),Zo=(e,r,n)=>{const i=[];for(const a of e.keys()){const u=[...e.get(a)];if(u.length===0)break;let{min:o,max:s}=Ma(u),c=s-o,l;n!==void 0&&(l=n[a]),l==null&&(r.defaultSeriesVariable?l=ci.getCssVariable("accent",r.defaultSeriesColour):l=r.defaultSeriesColour),c===0&&(c=o,o=o-c/2,s=s+c/2),i.push({min:o,max:s,range:c,name:a,colour:l})}return i},bh=(e,r,n="")=>{e.addKeyedValues(n,r)},Dh=(e,r,n)=>{const i={...n,translucentPlot:!0,leadingEdgeDot:!1};dn(r,i),n={...n,highlightIndex:e,leadingEdgeDot:!0,translucentPlot:!1,style:"none",clearCanvas:!1},dn(r,n)},UE=(e,r,n)=>Zo(e,n,n.seriesColours).map(i=>({...i,range:r[1]-r[0],min:r[0],max:r[1]})),dn=(e,r)=>{const{x:n,y:i,ctx:a,canvasSize:u}=r,o=r.margin,s=r.y.scaleRange?UE(e,r.y.scaleRange,r):Zo(e,r,r.seriesColours);r.clearCanvas&&a.clearRect(0,0,u.width,u.height),r.debug&&(a.strokeStyle="orange",a.strokeRect(0,0,u.width,u.height)),a.translate(o,o);const c=r.plotSize??Ch(u,r),l={height:c.height+o+o,width:c.width};if((i.showLabels||i.showLine)&&(s.forEach(h=>{i.allowedSeries!==void 0&&!i.allowedSeries.includes(h.name)||xE(h,l,r)}),s.length>0&&i.showLine&&VE(l,s[0],r)),(n.showLabels||n.showLine)&&s.length>0){const h=i.labelRange?i.labelRange[0]:s[0].min;GE(c.width,Jr(h,s[0],c.height)+o+n.lineWidth,r)}const f={...r,plotSize:c};oi.translatePoint(a,r.pointer),s.forEach(h=>{const v=e.getSource(h.name);if(v===void 0)return;let E=e.typeName==="circular"?v.pointer-1:v.length-1;r.highlightIndex!==void 0&&(E=r.highlightIndex),a.save(),a.translate(0,o+o),KE(h,v,c,f,E),a.restore()}),r.showLegend&&(a.save(),a.translate(0,c.height+o+o+o),c.width,r.x.textSize+o+o,HE(s,r),a.restore()),a.resetTransform()},xE=(e,r,n)=>{const{ctx:i,y:a,digitsPrecision:u,margin:o}=n,{height:s}=r;n.debug&&(i.strokeStyle="purple",i.strokeRect(0,0,a.textSize,s+o)),i.fillStyle=e.colour.length>0?e.colour:"white",a.colour&&(i.fillStyle=a.colour);const c=a.labelRange?a.labelRange[0]:e.min,l=a.labelRange?a.labelRange[1]:e.max,f=a.labelRange?l-c:e.range,h=c+f/2,v=n.textHeight/2;i.textBaseline="top",i.fillText(c.toFixed(u),0,Jr(c,e,s)-v),i.fillText(h.toFixed(u),0,Jr(h,e,s)-v),i.fillText(l.toFixed(u),0,Jr(l,e,s)-o),i.translate(a.textSize+o,0)},VE=(e,r,n)=>{if(r===void 0)throw new Error("series undefined");const{ctx:i,y:a}=n,{height:u}=e,o=a.labelRange?a.labelRange[0]:r.min,s=a.labelRange?a.labelRange[1]:r.max,c=Jr(o,r,u),l=Jr(s,r,u);i.translate(a.lineWidth,0),i.lineWidth=a.lineWidth,i.beginPath(),i.moveTo(0,c),i.lineTo(0,l),i.strokeStyle=r.colour,a.colour&&(i.strokeStyle=a.colour),i.stroke(),i.translate(a.lineWidth,0)},HE=(e,r,n)=>{const{ctx:i}=r,a=10;let u=0;const o=r.margin*3,s=r.margin;i.lineWidth=r.lineWidth,e.forEach(c=>{i.moveTo(u,o),i.strokeStyle=c.colour,i.lineTo(u+a,o),i.stroke(),u+=a+r.margin;let l=c.name;c.lastValue&&(l+=" "+c.lastValue.toFixed(r.digitsPrecision));const f=i.measureText(l);i.fillStyle=c.colour,i.fillText(l,u,s),u+=f.width})},GE=(e,r,n)=>{const{ctx:i,x:a,y:u}=n;!a.showLine||(a.colour&&(i.strokeStyle=a.colour),i.lineWidth=a.lineWidth,i.beginPath(),i.moveTo(0,r),i.lineTo(e,r),i.stroke())},KE=(e,r,n,i,a)=>{const{ctx:u,lineWidth:o,translucentPlot:s=!1,margin:c,x:l}=i,f=i.style??"connected",h=n.height-c;let v=1;if(l.scaleRange){const F=l.scaleRange[1]-l.scaleRange[0];v=n.width/F}else i.capacity===0?v=n.width/r.length:v=n.width/i.capacity;const E=i.coalesce&&v<0?Math.floor(1/v):1;let R=0,L;i.debug&&(u.strokeStyle="green",u.strokeRect(0,0,n.width,n.height));const N=F=>s?ci.opacity(F,.2):F;f==="dots"?u.fillStyle=N(e.colour):f==="none"||(u.beginPath(),u.lineWidth=o,u.strokeStyle=N(e.colour));for(let F=0;F<r.length;F+=E){let C=Jr(r[F],e,h)-1;f==="dots"?(u.beginPath(),u.arc(R,C,o,0,qE),u.fill()):f==="none"||(F==0&&u.moveTo(R,C),u.lineTo(R,C)),F===a&&(L={x:R,y:C},e.lastValue=r[F]),R+=v}f==="connected"&&u.stroke(),L!==void 0&&i.leadingEdgeDot&&(u.beginPath(),u.fillStyle=N(e.colour),u.arc(L.x,L.y,3,0,2*Math.PI),u.fill())},Jr=(e,r,n)=>(1-(e-r.min)/r.range)*n,Ah=(e,r,n,i)=>{let a=e;n.showLabels&&(a+=n.textSize),n.showLine&&(a+=n.lineWidth),(n.showLabels||n.showLine)&&(a+=e+e);let u=e,o=e+e,s=e+e;return r.showLabels?s+=r.textSize:s+=e,r.showLine&&(s+=r.lineWidth),(r.showLabels||r.showLine)&&(s+=e),i&&(s+=r.textSize),{left:a,right:u,top:o,bottom:s}},Ch=(e,r)=>{const{width:n,height:i}=e,a=Ah(r.margin,r.x,r.y,r.showLegend);return{width:n-a.left-a.right,height:i-a.top-a.bottom}},JE=(e,r)=>{const{width:n,height:i}=e,a=Ah(r.margin,r.x,r.y,r.showLegend);return{width:n+a.left+a.right,height:i+a.top+a.bottom}},YE=(e,r)=>{if(e===null)throw new Error("parentElOrQuery is null. Expected string or element");const n=je(e);let i,a=!0,u=r.plotSize,o;n.nodeName==="CANVAS"?(i=n,a=!1,o={width:i.width,height:i.height}):(i=document.createElement("CANVAS"),n.append(i),u=r.plotSize,o={width:i.width,height:i.height});const s={x:0,y:0},c=F=>{s.x=F.offsetX,s.y=F.offsetY};i.addEventListener("pointermove",c);const l=i.getContext("2d"),f=r.capacity??10,h=f>0?$0({capacity:f}):L0(),v=l.measureText("Xy"),E=r.coalesce??!0;if(l===null)throw new Error("Drawing context not available");let R=Bu("x");r.x&&(R={...R,...r.x});let L=Bu("y");r.y&&(L={...L,...r.y});let N={...r,y:L,x:R,pointer:s,capacity:f,coalesce:E,plotSize:u,canvasSize:o,ctx:l,textHeight:r.textHeight??v.actualBoundingBoxAscent+v.actualBoundingBoxDescent,style:r.style??"connected",defaultSeriesColour:r.defaultSeriesColour??"yellow",margin:3,clearCanvas:!0,leadingEdgeDot:!0,debug:r.debug??!1,digitsPrecision:r.digitsPrecision??2,lineWidth:r.lineWidth??2,showLegend:r.showLegend??!1};if(u){const F=JE(u,N);i.width=F.width,i.height=F.height,N.canvasSize=F}return r.autoSizeCanvas&&Uo(i,F=>{const C=F.bounds;N={...N,plotSize:Ch(C,N),canvasSize:C},dn(h,N)}),{drawValue:F=>{Dh(F,h,N)},dispose:()=>{i.removeEventListener("pointermove",c),a&&i.remove()},add:(F,C="",B=!1)=>{bh(h,F,C),!B&&dn(h,N)},draw:()=>{dn(h,N)},clear:()=>{h.clear()}}},Xo={};Z(Xo,{AxisX:()=>Bh,AxisY:()=>zh,Legend:()=>Rh,Plot:()=>eb,PlotArea:()=>Ph,Series:()=>_h});var Qo={};Z(Qo,{Box:()=>Sh,CanvasBox:()=>Fn,CanvasMeasureState:()=>Mh,MeasureState:()=>Fh});var Ei=(e,r)=>e.type==="px"&&r.type==="px"?e.value===r.value:!1,ZE=(e,r)=>e===void 0&&r===void 0?!0:!(e===void 0||r===void 0||e.x&&r.x&&!Ei(e.x,r.x)||e.y&&r.y&&!Ei(e.y,r.y)||e.width&&r.width&&!Ei(e.width,r.width)||e.height&&r.height&&!Ei(e.height,r.height)),Fh=class{bounds;pass;measurements;constructor(e){this.bounds=e,this.pass=0,this.measurements=new Map}getSize(e){const r=this.measurements.get(e);if(r!==void 0&&!xn(r.size))return r.size}resolveToPx(e,r){if(e===void 0)return r;if(e.type==="px")return e.value;throw new Error(`Unknown unit type ${e.type}`)}},Sh=class{visual=pu;_desiredSize;_lastMeasure;children=[];_parent;_idMap=new Map;debugLayout=!1;_visible=!0;_ready=!0;takesSpaceWhenInvisible=!1;needsDrawing=!0;_needsLayout=!0;debugHue=Oo();id;constructor(e,r){this.id=r,this._parent=e,e?.onChildAdded(this)}hasChild(e){const r=this.children.find(i=>i===e),n=this.children.find(i=>i.id===e.id);return r!==void 0||n!==void 0}notify(e,r){this.onNotify(e,r),this.children.forEach(n=>n.notify(e,r))}onNotify(e,r){}onChildAdded(e){if(e.hasChild(this))throw new Error("Recursive");if(e===this)throw new Error("Cannot add self as child");if(this.hasChild(e))throw new Error("Child already present");this.children.push(e),this._idMap.set(e.id,e)}setReady(e,r=!1){this._ready=e,r&&this.children.forEach(n=>n.setReady(e,r))}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.onLayoutNeeded())}get desiredSize(){return this._desiredSize}set desiredSize(e){ZE(e,this._desiredSize)||(this._desiredSize=e,this.onLayoutNeeded())}onLayoutNeeded(){this.notifyChildLayoutNeeded()}notifyChildLayoutNeeded(){this._needsLayout=!0,this.needsDrawing=!0,this._parent!==void 0?this._parent.notifyChildLayoutNeeded():this.update()}get root(){return this._parent===void 0?this:this._parent.root}measurePreflight(){}measureApply(e,r){let n=!0;return this._needsLayout=!1,Ml(e.size,this.visual)&&(n=!1),wt(e.size)?this.visual=e.size:this.visual={x:0,y:0,width:e.size.width,height:e.size.height},e.children.forEach(i=>{i!==void 0&&i.ref.measureApply(i,r)}),(n||r)&&(this.needsDrawing=!0,this.root.notify("measureApplied",this)),n}debugLog(e){console.log(this.id,e)}measureStart(e,r,n){this.measurePreflight();let i={ref:this,size:mo,children:[]};if(e.measurements.set(this.id,i),!this._visible&&!this.takesSpaceWhenInvisible)i.size=Sl;else{let a=this._lastMeasure;if((this._needsLayout||this._lastMeasure===void 0)&&(a=this.measureSelf(e,n),this.root.notify("measured",this)),a===void 0)return;i.size=a,this._lastMeasure=a}if(i.children=this.children.map(a=>a.measureStart(e,r,i)),!(Ht.without(i.children,void 0).length<this.children.length))return i}measureSelf(e,r){let n=pu;if(r?r.size&&(n={x:0,y:0,width:r.size.width,height:r.size.height}):n={x:0,y:0,width:e.bounds.width,height:e.bounds.height},!xn(n))return n}updateDone(e,r){this.onUpdateDone(e,r),this.children.forEach(n=>n.updateDone(e,r))}update(e=!1){const r=this.updateBegin(e);let n=5,i=!1;for(;n--;){const a=this.measureStart(r,e);if(a!==void 0){if(this.measureApply(a,e),!this._ready)return;i=!0}}this.updateDone(r,e),i||console.warn("Ran out of measurement attempts")}},Mh=class extends Fh{ctx;constructor(e,r){super(e);this.ctx=r}},Fn=class extends Sh{canvasEl;constructor(e,r,n){super(e,n);if(r===void 0)throw new Error("canvasEl undefined");if(r===null)throw new Error("canvasEl null");this.canvasEl=r,e===void 0&&this.designateRoot()}designateRoot(){this.canvasEl.addEventListener("pointermove",e=>{const r={x:e.offsetX,y:e.offsetY};this.notifyPointerMove(r)}),this.canvasEl.addEventListener("pointerleave",e=>{this.notifyPointerLeave()}),this.canvasEl.addEventListener("click",e=>{const r={x:e.offsetX,y:e.offsetY};this.notifyClick(r)})}onClick(e){}notifyClick(e){if(!xn(this.visual)&&Vn(this.visual,e)){const r=O.subtract(e,this.visual.x,this.visual.y);this.onClick(r),this.children.forEach(n=>n.notifyClick(r))}}notifyPointerLeave(){this.onPointerLeave(),this.children.forEach(e=>e.notifyPointerLeave())}notifyPointerMove(e){if(!xn(this.visual)&&Vn(this.visual,e)){const r=O.subtract(e,this.visual.x,this.visual.y);this.onPointerMove(r),this.children.forEach(n=>n.notifyPointerMove(r))}}onPointerLeave(){}onPointerMove(e){}updateBegin(){const e=this.canvasEl.getContext("2d");if(e===null)throw new Error("Context unavailable");const r=this.canvasEl.getBoundingClientRect();return new Mh({width:r.width,height:r.height},e)}onUpdateDone(e,r){if(!this.needsDrawing&&!r)return;const n=this.canvasEl.getContext("2d");if(n===null)throw new Error("Context unavailable");n.save(),n.translate(this.visual.x,this.visual.y);const i=this.visual;this.debugLayout&&(n.lineWidth=1,n.strokeStyle=`hsl(${this.debugHue}, 100%, 50%)`,n.strokeRect(0,0,i.width,i.height),n.fillStyle=n.strokeStyle,n.fillText(this.id,10,10,i.width),n.beginPath(),n.moveTo(0,0),n.lineTo(i.width,i.height),n.stroke()),this.drawSelf(n),this.needsDrawing=!1,n.restore()}drawSelf(e){}},Ih=class{data;series;dirty=!1;type="array";_range;constructor(e){this.series=e,this.data=[],this.dirty=!0}clear(){this.set([]),this._range=void 0}set(e){this.data=e,this.dirty=!0}get length(){return this.data.length}get range(){return!this.dirty&&this._range!==void 0?this._range:(this.dirty=!1,this._range=Ht.minMaxAvg(this.data),{...this._range,changed:!0})}add(e){this.data=[...this.data,e],this.dirty=!0}},XE=class extends Ih{desiredDataPointMinWidth=5;constructor(e){super(e)}add(e){const r=this.series.lastPxPerPt;if(r>-1&&r<this.desiredDataPointMinWidth){const n=Math.floor(this.desiredDataPointMinWidth/r),i=[...this.data.slice(n),e];super.set(i)}else super.add(e)}},_h=class{constructor(e,r,n,i){if(this.plot=n,this.name=e,this.drawingStyle=i.drawingStyle??"line",this.colour=i.colour,this.width=i.width??3,this.axisRange=i.axisRange??{min:Number.NaN,max:Number.NaN},this._visualRange={...this.axisRange},this._visualRangeStretch=i.visualRangeStretch??!0,r==="array")this.source=new Ih(this);else if(r==="stream")this.source=new XE(this);else throw new Error("Unknown sourceType. Expected array|stream")}name;colour;source;drawingStyle;width=3;dataHitPoint;tooltip;precision=2;axisRange;lastPxPerPt=-1;_visualRange;_visualRangeStretch;formatValue(e){return e.toFixed(this.precision)}get visualRange(){let e=this._visualRange;const r=this.source.range;let n=!1;if(r.changed)if(this._visualRangeStretch){const i=Math.min(Lu(e.min,r.min),r.min),a=Math.max(Lu(e.max,r.max),r.max);(i!==e.min||a!==e.max)&&(e={min:i,max:a},n=!0)}else Nh(r,e)||(e=r,n=!0);return this._visualRange=e,{...e,changed:n}}scaleValue(e){if(this.source===void 0)return e;const r=this.visualRange;return r.min==r.max?.5:er(e,r.min,r.max)}add(e){ee(e,"","value"),this.source.add(e),this.plot.plotArea.needsDrawing=!0}clear(){this.source.clear(),this._visualRange={...this.axisRange},this.plot.plotArea.needsDrawing=!0}},Ph=class extends Fn{constructor(e){super(e,e.canvasEl,"PlotArea");this.plot=e}paddingPx=3;piPi=Math.PI*2;pointerDistanceThreshold=20;lastRangeChange=0;pointer;clear(){this.lastRangeChange=0,this.pointer=void 0}measureSelf(e,r){const n=e.getSize("AxisY");if(n===void 0)return;const i=e.getSize("Legend");if(i===void 0)return;const a=e.getSize("AxisX");if(a!==void 0)return{x:n.width,y:0,width:e.bounds.width-n.width,height:e.bounds.height-i.height-a.height}}onNotify(e,r){e==="measureApplied"&&r===this.plot.axisY&&(this._needsLayout=!0),e==="measureApplied"&&r===this.plot.legend&&(this._needsLayout=!0)}onPointerLeave(){[...this.plot.series.values()].forEach(r=>{r.tooltip=void 0}),this.pointer=void 0,this.plot.legend.onLayoutNeeded()}onPointerMove(e){this.pointer=e,this.plot.legend.onLayoutNeeded()}measurePreflight(){this.updateTooltip()}updateTooltip(){const e=this.pointer;if(e===void 0)return;[...this.plot.series.values()].forEach(n=>{if(e===void 0){n.tooltip=void 0;return}if(n.dataHitPoint===void 0)return;const i=n.dataHitPoint(e);i[0]!==void 0&&(i[1]>this.pointerDistanceThreshold||(n.tooltip=n.formatValue(i[0].value)))}),this.plot.legend.needsDrawing=!0}drawSelf(e){if(this.plot.frozen)return;const r=this.plot.seriesArray();e.clearRect(0,0,this.visual.width,this.visual.height),r.forEach(n=>{if(n.source.type==="array"||n.source.type==="stream"){const i=n.source;if(i.data===void 0)return;const a=[...i.data];this.drawDataSet(n,a,e)}else console.warn(`Unknown data source type ${n.source.type}`)})}computeY(e,r){const n=e.scaleValue(r);return Ci(n)*this.visual.height+this.paddingPx}drawDataSet(e,r,n){const i=this.paddingPx+e.width,a=me.subtract(this.visual,i*2,i*3.5),u=a.width/r.length;e.lastPxPerPt=u;let o=i;n.strokeStyle=e.colour,n.lineWidth=e.width;const s=[];if(e.dataHitPoint=c=>{const l=s.map(v=>O.distanceToExterior(c,v)),f=wd(...l);return[s[f],l[f]]},e.drawingStyle==="line"){let c=0;n.beginPath();for(let l=0;l<r.length;l++){const f=zt(e.scaleValue(r[l]));c=i+this.paddingPx+a.height*Ci(f),s.push({x:o,y:c,index:l,value:r[l]}),l==0?n.moveTo(o+u/2,c):n.lineTo(o+u/2,c),c>this.visual.height&&console.warn(c+" h: "+this.visual.height),o+=u}n.strokeStyle=e.colour,n.stroke()}else if(e.drawingStyle==="dotted"){let c=0;n.fillStyle=e.colour;for(let l=0;l<r.length;l++){const f=e.scaleValue(r[l]);c=i+a.height*Ci(f),n.beginPath(),n.arc(o+u/2,c,e.width,0,this.piPi),n.fill(),s.push({radius:e.width,x:o,y:c,index:l,value:r[l]}),o+=u}}else if(e.drawingStyle==="bar"){n.fillStyle=e.colour;const c=Math.ceil(u*.1);for(let l=0;l<r.length;l++){const f=e.scaleValue(r[l]),h=a.height*f,v={x:o+c,y:a.height-h+i,width:u-c,height:h,index:l,value:r[l]};n.fillRect(v.x,v.y,v.width,v.height),s.push(v),o+=u}}}},Rh=class extends Fn{constructor(e){super(e,e.canvasEl,"Legend");this.plot=e}sampleSize={width:10,height:10};padding=3;widthSnapping=20;clear(){}measureSelf(e,r){const n=e.measurements.get("AxisY"),i=this.sampleSize,a=this.widthSnapping,u=this.padding,o=e.ctx;if(n===void 0)return;const s=e.bounds.width-n.size.width,c=this.plot.seriesArray();let l=u;for(let v=0;v<c.length;v++)l+=i.width+u,l+=on(o,c[v].name,u,a),l+=on(o,c[v].tooltip,u,a);const h=Math.max(1,Math.ceil(l/s))*(this.sampleSize.height+this.padding+this.padding);return{x:n.size.width,y:e.bounds.height-h,width:s,height:h}}drawSelf(e){const r=this.plot.seriesArray(),n=this.sampleSize,i=this.padding,a=this.widthSnapping;let u=i,o=i;e.clearRect(0,0,this.visual.width,this.visual.height);for(let s=0;s<r.length;s++){const c=r[s];e.fillStyle=c.colour,e.fillRect(u,o,n.width,n.height),u+=n.width+i,e.textBaseline="middle",e.fillText(c.name,u,o+n.height/2),u+=on(e,c.name,i,a),c.tooltip&&(e.fillStyle=this.plot.axisColour,e.fillText(c.tooltip,u,o+n.height/2),u+=on(e,c.tooltip,i,a)),u+=i,u>this.visual.width-100&&(u=i,o+=n.height+i+i)}}onNotify(e,r){e==="measureApplied"&&r===this._parent.axisY&&(this._needsLayout=!0)}},Bh=class extends Fn{constructor(e){super(e,e.canvasEl,"AxisX");this.plot=e}paddingPx=2;colour;clear(){}onNotify(e,r){e==="measureApplied"&&r===this.plot.axisY&&(this._needsLayout=!0),e==="measureApplied"&&r===this.plot.legend&&this.onLayoutNeeded()}drawSelf(e){const r=this.plot,n=this.visual,i=r.axisWidth,a=this.colour??r.axisColour;e.strokeStyle=a,e.clearRect(0,0,n.width,n.height),e.beginPath(),e.lineWidth=i,e.moveTo(0,i/2),e.lineTo(n.width,i/2),e.stroke()}measureSelf(e,r){const n=this.plot,i=e.measurements.get("AxisY");if(i===void 0)return;const a=e.measurements.get("Legend");if(a===void 0)return;const u=n.axisWidth+this.paddingPx;return{x:i.size.width,y:e.bounds.height-u-a.size.height,width:e.bounds.width-i.size.width,height:u}}},Nh=(e,r)=>e.max===r.max&&e.min===r.min,QE=e=>e.max===e.min,zh=class extends Fn{constructor(e){super(e,e.canvasEl,"AxisY");this.plot=e,this.lastRange={min:0,max:0}}_maxDigits=1;seriesToShow;paddingPx=2;colour;lastRange;lastPlotAreaHeight=0;clear(){this.lastRange={min:0,max:0},this.lastPlotAreaHeight=0}measurePreflight(){const e=this.getSeries();e!==void 0&&!Nh(e.visualRange,this.lastRange)&&(this._needsLayout=!0,this.needsDrawing=!0)}onNotify(e,r){const n=this.plot.plotArea;e==="measureApplied"&&r===n&&n.visual.height!==this.lastPlotAreaHeight&&(this.lastPlotAreaHeight=n.visual.height,this.needsDrawing=!0)}measureSelf(e){const r=e,n=this.paddingPx;let i=this.plot.axisWidth+n;const a=this.getSeries();if(a!==void 0){const o=a.visualRange;this._maxDigits=Math.ceil(o.max).toString().length+a.precision+1;const s="9".repeat(this._maxDigits);i+=on(r.ctx,s,n*2)}const u=e.resolveToPx(this.desiredSize?.width,i);return{x:0,y:0,width:u,height:e.bounds.height}}drawSelf(e){const r=this.getSeries();if(r!==void 0)this.seriesAxis(r,e);else{if(this.seriesToShow===void 0)return;console.warn(`Plot AxisY series '${this.seriesToShow}' is missing.`)}}getSeries(){return this.seriesToShow===void 0?this.plot.seriesArray()[0]:this.plot.series.get(this.seriesToShow)}seriesAxis(e,r){const n=this.plot,i=n.plotArea,a=this.visual,u=this.paddingPx,o=e.visualRange,s=n.axisWidth,c=this.colour??n.axisColour;if(r.strokeStyle=c,r.fillStyle=c,Number.isNaN(o.min)&&Number.isNaN(o.max))return;this.lastRange=o,r.clearRect(0,0,a.width,a.height),r.beginPath(),r.lineWidth=s;const l=a.width-s/2;r.moveTo(l,i.paddingPx+s),r.lineTo(l,i.visual.height+s),r.stroke(),r.textBaseline="top";const f=a.width-u*4;QE(o)?au(r,e.formatValue(o.max),h=>[f-h.width,i.computeY(e,o.max)-u*4]):(au(r,e.formatValue(o.max),h=>[f-h.width,i.computeY(e,o.max)+s/2]),au(r,e.formatValue(o.min),h=>[f-h.width,i.computeY(e,o.min)-5]))}},au=(e,r,n)=>{const i=e.measureText(r),a=n(i);e.fillText(r,a[0],a[1])},eb=class extends Fn{plotArea;legend;axisX;axisY;axisColour;axisWidth;series;_frozen=!1;defaultSeriesOpts;constructor(e,r={}){if(e===void 0)throw new Error("canvasEl undefined");super(void 0,e,"Plot");r.autoSize&&Uo(e,n=>{this.update(!0)}),this.axisColour=r.axisColour??"black",this.axisWidth=r.axisWidth??3,this.series=new Map,this.plotArea=new Ph(this),this.legend=new Rh(this),this.axisX=new Bh(this),this.axisY=new zh(this)}clearSeries(){for(const e of this.series.values())e.clear()}clear(){this.series=new Map,this.plotArea.clear(),this.legend.clear(),this.axisX.clear(),this.axisY.clear(),this.update(!0)}get frozen(){return this._frozen}set frozen(e){this._frozen=e,e?(this.canvasEl.classList.add("frozen"),this.canvasEl.title="Plot frozen. Tap to unfreeze"):(this.canvasEl.title="",this.canvasEl.classList.remove("frozen"))}seriesArray(){return[...this.series.values()]}get seriesLength(){return this.series.size}plot(e){x0(e).forEach(n=>{let i=this.series.get(n);i===void 0&&(i=this.createSeries(n,"stream"),i.drawingStyle="line"),i.add(bs(e,n))})}createSeriesFromObject(e,r=""){const n=Object.keys(e),i=a=>{const u=e[a];return typeof u=="object"?this.createSeriesFromObject(u,r+a+"."):typeof u=="number"?[this.createSeries(a,"stream")]:[]};return n.flatMap(i)}createSeries(e,r="array",n){const i=this.seriesLength;if(e===void 0&&(e=`series-${i}`),this.series.has(e))throw new Error(`Series name '${e}' already in use`);let a={colour:`hsl(${i*25%360}, 70%,50%)`,...n};this.defaultSeriesOpts&&(a={...this.defaultSeriesOpts,...a});const u=new _h(e,r,this,a);return this.series.set(e,u),this.setReady(!0,!0),this.plotArea.needsDrawing=!0,u}},es={};Z(es,{create:()=>tb});var tb=e=>new rb(e),rb=class{#e=new Map;#t=new Map;fallbacks;#r=0;#n;constructor(e){e!==void 0?this.fallbacks=e:this.fallbacks=["red","blue","green","orange"],this.#n=document.body}setElementBase(e){this.#n=e}add(e,r){this.#e.set(e,r)}alias(e,r){this.#t.set(e,r)}get(e,r){const n=this.#t.get(e);n!==void 0&&(e=n);const i=this.#e.get(e);if(i!==void 0)return i;const a="--"+e;let u=getComputedStyle(this.#n).getPropertyValue(a).trim();if(u===void 0||u.length===0){if(r!==void 0)return r;u=this.fallbacks[this.#r],this.#r++,this.#r===this.fallbacks.length&&(this.#r=0)}return u}getOrAdd(e,r){if(this.has(e))return this.get(e);const n=this.get(e,r);return this.add(e,n),n}has(e){return this.#e.has(e)}},ts={};Z(ts,{accessor:()=>Mb});var rs={};Z(rs,{access1dArray:()=>Ab,allDirections:()=>Da,array2dUpdater:()=>Cb,asRectangles:()=>ob,cellAtPoint:()=>Uh,cellEquals:()=>Lh,cellFromIndex:()=>Sb,cellKeyString:()=>$h,cellMiddle:()=>lb,cells:()=>Mn,crossDirections:()=>xh,getLine:()=>fb,getVectorFromCardinal:()=>Aa,guardCell:()=>tr,indexFromCell:()=>Ca,inside:()=>jh,isEqual:()=>ub,neighbours:()=>Vh,offset:()=>Sn,offsetCardinals:()=>hb,rectangleForCell:()=>qh,rows:()=>Db,simpleLine:()=>db,toArray:()=>sb,visitArray:()=>Fb,visitFor:()=>Eb,visitNeigbours:()=>cb,visitor:()=>tn,visitorBreadth:()=>mb,visitorColumn:()=>bb,visitorDepth:()=>yb,visitorRandom:()=>pb,visitorRandomContiguous:()=>gb,visitorRow:()=>wb});var Wh={};Z(Wh,{immutable:()=>nb,mutable:()=>kh});var kh=e=>new Th(e),Th=class extends rr{store=new Map;keyString;constructor(e){super();this.keyString=e??yi}get size(){return this.store.size}add(...e){let r=!1;for(const n of e){const i=this.has(n);this.store.set(this.keyString(n),n),super.fireEvent("add",{value:n,updated:i}),i||(r=!0)}return r}values(){return this.store.values()}clear(){this.store.clear(),super.fireEvent("clear",!0)}delete(e){const r=this.store.delete(this.keyString(e));return r&&super.fireEvent("delete",e),r}has(e){return this.store.has(this.keyString(e))}toArray(){return Array.from(this.store.values())}},Oh=class Nu{store;keyString;constructor(r,n){this.store=n??new Map,this.keyString=r??yi}get size(){return this.store.size}add(...r){const n=new Map(this.store);for(const i of r){const a=this.keyString(i);n.set(a,i)}return new Nu(this.keyString,n)}delete(r){const n=new Map(this.store),i=this.keyString(r);return n.delete(i)?new Nu(this.keyString,n):this}has(r){const n=this.keyString(r);return this.store.has(n)}toArray(){return[...this.store.values()]}*values(){yield*this.store.values()}},nb=(e=wr)=>new Oh(e),ib=e=>e===void 0?!1:"x"in e&&"y"in e,ab=e=>!(e===void 0||e[1]===void 0),ub=(e,r)=>{if(r===void 0||e===void 0)return!1;if("rows"in e&&"cols"in e)if("rows"in r&&"cols"in r){if(e.rows!==r.rows||e.cols!==r.cols)return!1}else return!1;if("size"in e)if("size"in r){if(e.size!==r.size)return!1}else return!1;return!0},$h=e=>`Cell{${e.x},${e.y}}`,Lh=(e,r)=>r===void 0||e===void 0?!1:e.x===r.x&&e.y===r.y,tr=(e,r="Param",n)=>{if(e===void 0)throw new Error(r+" is undefined. Expecting {x,y}");if(e.x===void 0)throw new Error(r+".x is undefined");if(e.y===void 0)throw new Error(r+".y is undefined");if(Number.isNaN(e.x))throw new Error(r+".x is NaN");if(Number.isNaN(e.y))throw new Error(r+".y is NaN");if(!Number.isInteger(e.x))throw new TypeError(r+".x is non-integer");if(!Number.isInteger(e.y))throw new TypeError(r+".y is non-integer");if(n!==void 0&&!jh(n,e))throw new Error(`${r} is outside of grid. Cell: ${e.x},${e.y} Grid: ${n.cols}, ${n.rows}`)},fi=(e,r="Param")=>{if(e===void 0)throw new Error(`${r} is undefined. Expecting grid.`);if(!("rows"in e))throw new Error(`${r}.rows is undefined`);if(!("cols"in e))throw new Error(`${r}.cols is undefined`);if(!Number.isInteger(e.rows))throw new TypeError(`${r}.rows is not an integer`);if(!Number.isInteger(e.cols))throw new TypeError(`${r}.cols is not an integer`)},jh=(e,r)=>!(r.x<0||r.y<0||r.x>=e.cols||r.y>=e.rows),qh=(e,r)=>{tr(r);const n=e.size,i=r.x*n,a=r.y*n;return me.fromTopLeft({x:i,y:a},n,n)};function*ob(e){for(const r of Mn(e))yield qh(e,r)}var sb=(e,r)=>{const n=[];for(let i=0;i<e.rows;i++)if(n[i]=new Array(e.cols),r)for(let a=0;a<e.cols;a++)n[i][a]=r;return n},Uh=(e,r)=>{const n=e.size;if(ee(n,"positive","grid.size"),r.x<0||r.y<0)return;const i=Math.floor(r.x/n),a=Math.floor(r.y/n);if(!(i>=e.cols)&&!(a>=e.rows))return{x:i,y:a}},Da=Object.freeze(["n","ne","nw","e","s","se","sw","w"]),xh=Object.freeze(["n","e","s","w"]),Vh=(e,r,n="undefined",i)=>{const a=i??Da,u=a.map(o=>Sn(e,r,Aa(o),n));return Vu(a,u)};function*cb(e,r,n="undefined",i){const u=(i??Da).map(o=>Sn(e,r,Aa(o),n));for(const o of u)o!==void 0&&(yield o)}var lb=(e,r)=>{tr(r);const n=e.size,i=r.x*n,a=r.y*n;return Object.freeze({x:i+n/2,y:a+n/2})},fb=(e,r)=>{tr(e),tr(r);let n=e.x,i=e.y;const a=Math.abs(r.x-n),u=Math.abs(r.y-i),o=n<r.x?1:-1,s=i<r.y?1:-1;let c=a-u;const l=[];for(;l.push(Object.freeze({x:n,y:i})),!(n===r.x&&i===r.y);){const f=2*c;f>-u&&(c-=u,n+=o),f<a&&(c+=a,i+=s)}return l},hb=(e,r,n,i="stop")=>{fi(e,"grid"),tr(r,"start"),Le(n,"aboveZero","steps");const a=Da,u=a.map(s=>Aa(s,n)),o=a.map((s,c)=>Sn(e,r,u[c],i));return Vu(a,o)},Aa=(e,r=1)=>{let n;switch(e){case"n":{n={x:0,y:-1*r};break}case"ne":{n={x:1*r,y:-1*r};break}case"e":{n={x:1*r,y:0};break}case"se":{n={x:1*r,y:1*r};break}case"s":{n={x:0,y:1*r};break}case"sw":{n={x:-1*r,y:1*r};break}case"w":{n={x:-1*r,y:0};break}case"nw":{n={x:-1*r,y:-1*r};break}default:n={x:0,y:0}}return Object.freeze(n)},db=function(e,r,n=!1){const i=[];if(e.x===r.x){const a=n?r.y+1:r.y;for(let u=e.y;u<a;u++)i.push({x:e.x,y:u})}else if(e.y===r.y){const a=n?r.x+1:r.x;for(let u=e.x;u<a;u++)i.push({x:u,y:e.y})}else throw new Error(`Only does vertical and horizontal: ${e.x},${e.y} - ${r.x},${r.y}`);return i},Sn=function(e,r,n,i="undefined"){tr(r,"start",e),tr(n),fi(e,"grid");let a=r.x,u=r.y;switch(i){case"wrap":{a+=n.x%e.cols,u+=n.y%e.rows,a<0?a=e.cols+a:a>=e.cols&&(a-=e.cols),u<0?u=e.rows+u:u>=e.rows&&(u-=e.rows);break}case"stop":{a+=n.x,u+=n.y,a=fu(a,e.cols),u=fu(u,e.rows);break}case"undefined":{if(a+=n.x,u+=n.y,a<0||u<0||a>=e.cols||u>=e.rows)return;break}case"unbounded":{a+=n.x,u+=n.y;break}default:throw new Error(`Unknown BoundsLogic case ${i}`)}return Object.freeze({x:a,y:u})},vb=(e,r,n,i)=>{const a=Vh(e,r,i,n);return Object.entries(a).filter(ab)},tn=function*(e,r,n,i={}){fi(r,"grid"),tr(n,"start",r);const a=i.visited??kh($h),u=e.options?e.options:(l,f)=>vb(l,f,xh,"undefined");if(!ib(n))throw new Error("'start' parameter is undefined or not a cell");let o=[n],s=[],c=null;for(;o.length>0;){if(c===null){const l=o.pop();if(l===void 0)break;c=l}if(!a.has(c)){a.add(c),yield c;const l=u(r,c).filter(f=>!a.has(f[1]));l.length===0?c!==null&&(o=o.filter(f=>Lh(f,c))):s.push(...l)}if(s=s.filter(l=>!a.has(l[1])),s.length===0)c=null;else{const l=e.select(s);l!==void 0&&(o.push(l[1]),c=l[1])}}},yb=(e,r,n={})=>tn({select:i=>i[i.length-1]},e,r,n),mb=(e,r,n={})=>tn({select:i=>i[0]},e,r,n),Hh=e=>Ta(e),gb=(e,r,n={})=>tn({select:Hh},e,r,n),pb=(e,r,n={})=>tn({options:(i,a)=>{const u=[];for(const o of Mn(i,a))u.push(["n",o]);return u},select:Hh},e,r,n),wb=(e,r={x:0,y:0},n={})=>{const{reversed:i=!1}=n;return tn({select:s=>s.find(c=>c[0]===(i?"w":"e")),options:(s,c)=>(i?c.x>0?c={x:c.x-1,y:c.y}:c.y>0?c={x:s.cols-1,y:c.y-1}:c={x:s.cols-1,y:s.rows-1}:c.x<s.rows-1?c={x:c.x+1,y:c.y}:c.y<s.rows-1?c={x:0,y:c.y+1}:c={x:0,y:0},[[i?"w":"e",c]])},e,r,n)},Eb=(e,r,n,i)=>{Le(n,"","steps");const a={reversed:n<0};n=Math.abs(n);let u=r,o=i(e,r,a);o.next();let s=0;for(;s<n;){s++;const{value:c}=o.next();if(c)u=c,a.debug&&console.log(`stepsMade: ${s} cell: ${u.x}, ${u.y} reverse: ${a.reversed}`);else if(n>=e.cols*e.rows)n-=e.cols*e.rows,s=0,o=i(e,r,a),o.next(),u=r,a.debug&&console.log(`resetting visitor to ${n}`);else throw new Error("Value not received by visitor")}return u},bb=(e,r,n={})=>{const{reversed:i=!1}=n;return tn({select:u=>u.find(o=>o[0]===(i?"n":"s")),options:(u,o)=>(i?o.y>0?o={x:o.x,y:o.y-1}:o.x===0?o={x:u.cols-1,y:u.rows-1}:o={x:o.x-1,y:u.rows-1}:o.y<u.rows-1?o={x:o.x,y:o.y+1}:o.x<u.cols-1?o={x:o.x+1,y:0}:o={x:0,y:0},[[i?"n":"s",o]])},e,r,n)},Db=function*(e,r={x:0,y:0}){let n=r.y,i=[];for(const a of Mn(e,r))a.y!==n?(yield i,i=[a],n=a.y):i.push(a);i.length>0&&(yield i)},Mn=function*(e,r={x:0,y:0}){fi(e,"grid"),tr(r,"start",e);let{x:n,y:i}=r,a=!0;do yield{x:n,y:i},n++,n===e.cols&&(i++,n=0),i===e.rows&&(i=0,n=0),n===r.x&&i===r.y&&(a=!1);while(a)},Ab=(e,r)=>{const n={cols:r,rows:Math.ceil(e.length/r)};return(a,u)=>{const o=Ca(n,a,u);if(o!==void 0)return e[o]}},Cb=(e,r)=>(i,a)=>{const u=Uh(e,a);if(u===void 0)throw new Error(`Position does not exist. Pos: ${JSON.stringify(a)} Grid: ${JSON.stringify(e)}`);r[u.y][u.x]=i};function*Fb(e,r,n,i){if(typeof e>"u")throw Error("First parameter is undefined, expected an array");if(e===null)throw Error("First parameter is null, expected an array");if(!Array.isArray(e))throw Error("First parameter should be an array");if(Le(r,"aboveZero","cols"),e.length===0)return;const a=i?.boundsWrap??"stop",u=Math.ceil(e.length/r),o={cols:r,rows:u};n===void 0&&(n=Mn);const s=n(o,{x:0,y:0},i);for(const c of s){const l=Ca(o,c,a);if(l===void 0)return;yield[e[l],l]}}var Ca=(e,r,n)=>{if(fi(e,"grid"),r.x<0)switch(n){case"stop":{r={...r,x:0};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r=Sn(e,{x:0,y:r.y},{x:r.x,y:0},"wrap");break}}if(r.y<0)switch(n){case"stop":{r={...r,y:0};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r={...r,y:e.rows+r.y};break}}if(r.x>=e.cols)switch(n){case"stop":{r={...r,x:e.cols-1};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r={...r,x:r.x%e.cols};break}}if(r.y>=e.rows)switch(n){case"stop":{r={...r,y:e.rows-1};break}case"unbounded":throw new Error("unbounded not supported");case"undefined":return;case"wrap":{r={...r,y:r.y%e.rows};break}}return r.y*e.cols+r.x},Sb=(e,r)=>{let n=0;return typeof e=="number"?n=e:n=e.cols,Le(n,"aboveZero","colsOrGrid"),{x:r%n,y:Math.floor(r/n)}},Mb=e=>{const r={rows:e.width,cols:e.height},n=e.data;return(a,u)=>{const o=Ca(r,a,u);if(o===void 0)return;const s=o*4;return{r:n[s],g:n[s+1],b:n[s+2],opacity:n[s+3]}}},Gh={};Z(Gh,{init:()=>Pb});var Kh={};Z(Kh,{clamp:()=>Yr,fromScalar:()=>Ib,immutable:()=>nn,scale:()=>_b,toScalar:()=>Jh,towardZero:()=>Yh});var nn=(e=0)=>{const r=typeof e=="number"?e:e.value;if(r>1)throw new Error("Cannot be larger than 1");if(r<-1)throw new Error("Cannot be smaller than -1");if(Number.isNaN(r))throw new Error("startingValue is NaN");const n=r;return{[Symbol.toPrimitive](i){return i==="number"?n:i==="string"?n.toString():!0},value:n,towardZero:i=>nn(Yh(n,i)),add:i=>nn(Yr(n+i)),multiply:i=>nn(Yr(n*i)),inverse:()=>nn(-n),interpolate:(i,a)=>nn(Yr(Fa(i,n,a))),asScalar:()=>Jh(n)}},Jh=e=>{if(typeof e!="number")throw new Error(`Expected v to be a number. Got: ${typeof e}`);if(Number.isNaN(e))throw new Error("Parameter is NaN");return(e+1)/2},Ib=e=>(ee(e,"percentage","v"),e*2-1),_b=(e,r,n)=>Yr(Ju(r,n,-1,1)(e)),Yr=e=>{if(typeof e!="number")throw new Error(`Parameter must be a number. Got: ${typeof e}`);if(Number.isNaN(e))throw new Error("v parameter is NaN");return e>1?1:e<-1?-1:e},Yh=(e,r)=>{if(typeof e!="number")throw new Error(`Parameter 'v' must be a number. Got: ${typeof e}`);if(typeof r!="number")throw new Error(`Parameter 'amt' must be a number. Got: ${typeof r}`);if(r<0)throw new Error("Parameter 'amt' must be positive");return e<0?(e+=r,e>0&&(e=0)):e>0&&(e-=r,e<0&&(e=0)),e};function Qs(e,r,n){const i=e.getAttribute(r);return i===null?n:Number.parseInt(i)}var Pb=(e,r={})=>{const n=document.querySelector(e);if(!n)throw new Error(`Element query could not be found (${e})`);const i=r.labels??["x","y"],a=r.labelPrecision??2,u=r.asPercentages??!1,o=r.showWhiskers??!0,s=r.showDot??!0,c=r.showLabels??!0,l=r.axisColour??"silver",f=r.bgColour??"white",h=r.whiskerColour??"black",v=r.dotColour??h,E=r.labelColour??l,R=r.axisWidth??1*window.devicePixelRatio,L=r.dotRadius??5*window.devicePixelRatio,N=r.padding??10*window.devicePixelRatio,F=r.whiskerSize??5*window.devicePixelRatio,C=r.width??Qs(n,"width",200)*window.devicePixelRatio,B=r.height??Qs(n,"height",200)*window.devicePixelRatio;n.width=C,n.height=B,n.style.width=C/window.devicePixelRatio+"px",n.style.height=B/window.devicePixelRatio+"px";const U=B/2,W=C/2,_=n.getContext("2d");if(!_)throw new Error("Could not create drawing context");window.devicePixelRatio>=2&&(_.font="20px sans-serif");const V=u?Y=>Math.round(Y*100)+"%":Y=>Y.toFixed(a);c?(i[0]=i[0]+":",i[1]=i[1]+":"):(i[0]="",i[1]="");const q=r.renderBackground??((Y,ne,ye)=>{Y.fillStyle=f,Y.fillRect(0,0,ne,ye)});return(Y,ne)=>{Y=Yr(Y),ne=Yr(ne),q(_,C,B),_.fillStyle=E,_.textBaseline="top",_.save(),_.translate(W,U),_.rotate(-Math.PI/2),_.fillText((i[1]+" "+V(ne)).trim(),-W+N,1),_.restore(),_.fillText((i[0]+" "+V(Y)).trim(),N,W+2),_.strokeStyle=l,_.lineWidth=R,_.beginPath(),_.moveTo(N,U),_.lineTo(C-N,U),_.moveTo(W,N),_.lineTo(W,B-N),_.stroke(),_.closePath();const ye=(B-N-N)/2*-ne,he=(C-N-N)/2*Y;_.save(),_.translate(W,U),s&&oi.circle(_,{radius:L,x:he,y:ye},{fillStyle:v}),o&&(_.strokeStyle=h,_.beginPath(),_.moveTo(0,ye-F),_.lineTo(0,ye+F),_.moveTo(he-F,0),_.lineTo(he+F,0),_.stroke(),_.closePath()),_.restore()}};try{typeof window<"u"&&(window.ixfx={...window.ixfx,Visuals:{SceneGraph:Qo,Plot2:Xo,Drawing:oi,Svg:Go,Plot:Yo,Palette:es,Colour:ci,Video:Io}})}catch{}var Rb={};Z(Rb,{DataTable:()=>Xh,DragDrop:()=>rd,Forms:()=>Qh,byId:()=>AE,canvasHelper:()=>hE,cardinalPosition:()=>cE,clear:()=>wE,copyToClipboard:()=>bE,createAfter:()=>gE,createIn:()=>pE,cycleCssClass:()=>vE,defaultErrorHandler:()=>Vb,el:()=>CE,fullSizeCanvas:()=>dE,fullSizeElement:()=>Yf,getTranslation:()=>mE,inlineConsole:()=>Gb,log:()=>Zh,parentSize:()=>yE,parentSizeCanvas:()=>Uo,pointScaler:()=>Gf,pointerVisualise:()=>xb,positionFn:()=>Kf,positionFromMiddle:()=>fE,positionRelative:()=>lE,reconcileChildren:()=>DE,resizeObservable:()=>xo,resolveEl:()=>je,rx:()=>Nb,setCssClass:()=>Zf,setCssDisplay:()=>Xf,setHtml:()=>Qf,setText:()=>eh,themeChangeObservable:()=>EE,viewportToSpace:()=>Jf,windowResize:()=>pa});var Bb=(e,r)=>{const n=document.createElement("style");n.textContent=r;let i;return e.shadowRoot?(i=e.shadowRoot,i.innerHTML=""):i=e.attachShadow({mode:"open"}),i.appendChild(n),i},Zh=(e,r={})=>{const{capacity:n=0,monospaced:i=!0,timestamp:a=!1,collapseDuplicates:u=!0,css:o=""}=r;let s=0,c,l=0;const f=je(e),v=Bb(f,`
  .log {
    font-family: ${i?'Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", Monaco, "Courier New", Courier, monospace':"normal"};
    background-color: var(--code-background-color);
    padding: var(--padding1, 0.2em);
    overflow-y: auto;
    height:100%;
  }
  .timestamp {
    margin-right: 0.5em;
    opacity: 0.5;
    font-size: 70%;
    align-self: center;
  }
  .line {
    display: flex;
    padding-bottom: 0.1em;
    padding-top: 0.1em;
  }
  .line:hover {
  
  }
  .error {
    color: red;
  }
  .badge {
    border: 1px solid currentColor;
    align-self: center;
    font-size: 70%;
    padding-left: 0.2em;
    padding-right: 0.2em;
    border-radius: 1em;
    margin-left: 0.5em;
    margin-right: 0.5em;
  }
  .msg {
    flex: 1;
    word-break: break-word;
  }
  ${o}
  `),E=document.createElement("div");E.className="log",v.append(E);const R=W=>{const _=document.createElement("div");if(typeof W=="string")_.innerHTML=W;else if(W instanceof Error){const b=W.stack;_.innerHTML=b===void 0?W.toString():b.toString()}else _.innerHTML=W;_.classList.add("error"),C(_),c=void 0,l=0};let L=0;const N=(W="")=>{const _=F(W);return _&&(_.classList.add("warning"),_)},F=(W="")=>{let _;const b=window.performance.now()-L;if(!(r.minIntervalMs&&b<r.minIntervalMs))if(L=window.performance.now(),typeof W=="object"?_=JSON.stringify(W):W===void 0?_="(undefined)":W===null?_="(null)":typeof W=="number"?(Number.isNaN(_)&&(_="(NaN)"),_=W.toString()):_=W,_.length===0){const I=document.createElement("hr");c=void 0,C(I)}else if(_===c&&u){const I=E.firstElementChild;let V=I.querySelector(".badge");return V===null&&(V=document.createElement("div"),V.className="badge",I.insertAdjacentElement("beforeend",V)),I!==null&&(V.textContent=(++l).toString()),I}else{const I=document.createElement("div");return I.textContent=_,C(I),c=_,I}},C=W=>{if(a){const _=document.createElement("div"),b=document.createElement("div");b.className="timestamp",b.textContent=new Date().toLocaleTimeString(),_.append(b,W),W.classList.add("msg"),_.classList.add("line"),W=_}else W.classList.add("line","msg");if(r.reverse?E.append(W):E.insertBefore(W,E.firstChild),n>0&&++s>n*2)for(;s>n;)E.lastChild?.remove(),s--;r.reverse&&(E.scrollTop=E.scrollHeight),l=0};return{error:R,log:F,warn:N,append:C,clear:()=>{E.innerHTML="",c=void 0,l=0,s=0},dispose:()=>{E.remove()},get isEmpty(){return s===0}}},Nb=(e,r,n)=>{const i=je(e),a=$i(i,r),u={},o=()=>{Object.keys(u).forEach(l=>{delete u[l]})},s=c=>(c.subscribe({next:l=>{Object.assign(u,l)}}),{value:u,clear:o});return n===void 0?s(a):n.pluck?s(a.pipe(Oi(c=>c[n.pluck]))):n.transform?s(a.pipe(Oi(c=>n.transform(c)))):s(a)},Xh={};Z(Xh,{fromList:()=>Wb,fromObject:()=>kb});var zb=en(wc(),1),Wb=(e,r)=>{const n=je(e);let i=document.createElement("DIV");n.append(i);const a=()=>i?(i.remove(),i=void 0,!0):!1,u=o=>{const s=new Set;for(const[l,f]of o){const h=`table-${l}`;s.add(h);let v=n.querySelector(`#${h}`);v===null&&(v=document.createElement("table"),v.id=h,n.append(v)),zu(v,f)}Array.from(n.querySelectorAll("table")).forEach(l=>{s.has(l.id)||l.remove()})};return r&&u(r),{update:u,remove:a}},zu=(e,r,n={})=>{const i=n.precision??2;if(r===void 0){e.innerHTML="";return}const a=new Set;for(const[o,s]of Object.entries(r)){const c=`row-${o}`;a.add(c);let l=e.querySelector(`tr[data-key='${c}']`);if(l===null){l=document.createElement("tr"),e.append(l),l.setAttribute("data-key",c);const v=document.createElement("td");v.innerText=o,l.append(v)}let f=l.querySelector(`td[data-key='${c}-val']`);f===null&&(f=document.createElement("td"),f.setAttribute("data-key",`${c}-val`),l.append(f));let h;n.formatter&&(h=n.formatter(s,o)),h===void 0&&(typeof s=="object"?h=zb.default.stringify(s):typeof s=="number"?n.roundNumbers?h=Math.round(s).toString():h=s.toFixed(i):h=s.toString()),f.innerHTML=h}Array.from(e.querySelectorAll("tr")).forEach(o=>{const s=o.getAttribute("data-key");a.has(s)||o.remove()})},kb=(e,r,n)=>{const i=je(e);let a=document.createElement("table");i.append(a);const u=()=>a?(a.remove(),a=void 0,!0):!1;return r&&zu(a,r,n),{remove:u,update:s=>{if(!a)throw new Error("Table disposed");zu(a,s,n)}}},Qh={};Z(Qh,{button:()=>Lb,checkbox:()=>Ob,numeric:()=>$b,select:()=>jb,textAreaKeyboard:()=>Tb});var Tb=e=>{e.addEventListener("keydown",r=>{const n=e.value,i=e.selectionStart,a=e.selectionEnd;if(r.key==="Tab"&&r.shiftKey)return e.value.substring(i-2,i)==="  "&&(e.value=n.substring(0,i-2)+n.substring(a)),e.selectionStart=e.selectionEnd=i-2,r.preventDefault(),!1;if(r.key==="Tab")return e.value=n.substring(0,i)+"  "+n.substring(a),e.selectionStart=e.selectionEnd=i+2,r.preventDefault(),!1})},Ob=(e,r)=>{const n=je(e);return r&&n.addEventListener("change",()=>{r(n.checked)}),{get checked(){return n.checked},set checked(i){n.checked=i}}},$b=(e,r,n)=>{const i=je(e),a=n?"change":"input";return r&&i.addEventListener(a,()=>{r(parseInt(i.value))}),{get value(){return parseInt(i.value)},set value(u){i.value=u.toString()}}},Lb=(e,r)=>{const n=je(e);return r&&n.addEventListener("click",i=>{r()}),{click(){r&&r()},set disabled(i){n.disabled=i}}},jb=(e,r,n={})=>{const i=je(e),{placeholderOpt:a,shouldAddChoosePlaceholder:u=!1,autoSelectAfterChoice:o=-1}=n,s=()=>{r!==void 0&&r(i.value),o>=0&&(i.selectedIndex=o)};return r&&i.addEventListener("change",c=>{s()}),{set disabled(c){i.disabled=c},get value(){return i.value},get index(){return i.selectedIndex},get isSelectedPlaceholder(){return(u||n.placeholderOpt!==void 0)&&i.selectedIndex===0},setOpts(c,l){i.options.length=0,u?c=["-- Choose --",...c]:a!==void 0&&(c=[a,...c]);let f=0;c.forEach((h,v)=>{const E=document.createElement("option");E.value=h,E.innerHTML=h,l!==void 0&&h===l&&(f=v),i.options.add(E)}),i.selectedIndex=f},select(c=0,l=!1){i.selectedIndex=c,l&&r&&s()}}},qb=class extends oo{values;constructor(e={}){super(e);this.values=[]}onTrimmed(){}trimStore(e){return e>=this.values.length?this.values.length:(this.values=this.values.slice(-e),this.values.length)}onReset(){this.values=[]}seenImpl(e){const r=e.map(i=>"at"in i?i:{...i,at:Date.now()}),n=r.at(-1);return this.storeIntermediate?this.values.push(...r):this.values.length===0?this.values.push(n):this.values.length===2?this.values[1]=n:this.values.length===1&&this.values.push(n),r}get last(){return this.values.length===1?this.values[0]:this.values.at(-1)}get initial(){return this.values.at(0)}get size(){return this.values.length}get elapsed(){return Date.now()-this.values[0].at}},ns=class extends qb{initialRelation;lastResult;constructor(e={}){super(e)}onTrimmed(){this.initialRelation=void 0}get x(){return this.last.x}get y(){return this.last.y}onReset(){super.onReset(),this.lastResult=void 0,this.initialRelation=void 0}seen(...e){const r=this.last;super.seen(...e);const n=this.last;if(this.initialRelation===void 0&&this.initial)this.initialRelation=Ou(this.initial);else if(this.initialRelation===void 0)throw new Error("Bug: No initialRelation, and this.inital is undefined?");const i=Ou(r),a={...this.initialRelation(n)},u={...i(n),speed:this.values.length<2?0:Je.length(r,n)/(n.at-r.at)},o={fromInitial:a,fromLast:u,values:[...this.values]};return this.lastResult=o,o}get line(){return this.values.length===1?[]:Je.joinPointsToLines(...this.values)}get vectorPolar(){return Hi.fromLinePolar(this.lineStartEnd)}get vectorCartesian(){return Hi.fromLineCartesian(this.lineStartEnd)}get lineStartEnd(){const e=this.initial;return this.values.length<2||!e?Je.Empty:{a:e,b:this.last}}distanceFromStart(){const e=this.initial;return this.values.length>=2&&e!==void 0?Wt(e,this.last):0}difference(){const e=this.initial;return this.values.length>=2&&e!==void 0?Or(this.last,e):Vd}angleFromStart(){const e=this.initial;if(e!==void 0&&this.values.length>2)return vn(e,this.last)}get length(){if(this.values.length===1)return 0;const e=this.line;return Je.length(e)}},ed=class extends ol{constructor(e={}){super((r,n)=>{if(n===void 0)throw new Error("Requires start point");const i=new ns({...e,id:r});return i.seen(n),i})}},td=(e={})=>new ed(e),Ub=(e={})=>new ns(e),xb=(e,r={})=>{const n=r.touchRadius??45,i=r.touchRadius??20,a=r.trace??!1,u=r.hue??100,o=`hsla(${u}, 100%, 10%, 10%)`;let s=u;const c=je(e),l=td({storeIntermediate:a}),f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.id="pointerVis",f.style.zIndex="-1000",f.style.position="fixed",f.style.top="0",f.style.left="0",f.style.width="100%",f.style.height="100%",f.style.boxSizing="border-box",f.style.border="3px solid red",f.style.pointerEvents="none",f.style.touchAction="none",Yf(f);let h=0;const v=async R=>{const L=R.pointerId.toString();l.delete(L),s=u,f.querySelector(`#pv-start-${L}`)?.remove();for(let N=0;N<h+10;N++)f.querySelector(`#pv-progress-${L}-${N}`)?.remove();h=0},E=async R=>{const L=R.pointerId.toString(),N={x:R.x,y:R.y},F=R.pointerType;if(R.type==="pointermove"&&!l.has(L))return;const C=await l.seen(L,N);if(C.values.length===1){const W=ji.circle({...C.values[0],radius:F==="touch"?n:i},f,{fillStyle:o},`#pv-start-${L}`);W.style.pointerEvents="none",W.style.touchAction="none"}const B=`hsla(${s}, 100%, 50%, 50%)`,U=ji.circle({...N,radius:F==="touch"?n:i},f,{fillStyle:B},`#pv-progress-${L}-${C.values.length}`);return U.style.pointerEvents="none",U.style.touchAction="none",s+=1,h=C.values.length,!0};document.body.appendChild(f),c.addEventListener("pointerdown",E),c.addEventListener("pointermove",E),c.addEventListener("pointerup",v),c.addEventListener("pointerleave",v),c.addEventListener("contextmenu",R=>{R.preventDefault()})},Vb=()=>{let e=!0;const r=document.createElement("div");r.style.color="black",r.style.border="2px solid red",r.style.backgroundColor="hsl(0, 80%, 90%)",r.style.padding="1em",r.style.display="none",r.style.top="1em",r.style.left="1em",r.style.position="absolute",r.style.fontFamily="monospace";const n=document.createElement("div");n.style.maxWidth="50vw",n.style.maxHeight="50vh",n.style.overflowY="scroll",r.innerHTML="<h1>Error</h1>",r.append(n);const i=c=>{c.style.padding="0.3em",c.style.marginTop="1em"},a=document.createElement("button");a.textContent="Close",a.addEventListener("click",()=>{s()});const u=document.createElement("button");u.textContent="Stop displaying errors",u.addEventListener("click",()=>{e=!1,s()}),i(a),i(u),r.append(a),r.append(u),document.body.append(r);const o=c=>{r.style.display="inline",n.innerHTML+=c.stack?`<pre>${c.stack}</pre>`:`<p>${c.toString()}</p>`},s=()=>{r.style.display="none"};return window.onerror=(c,l,f,h,v)=>{e&&(v?(console.log(v),o(v)):(console.log(c),o(c)))},window.addEventListener("unhandledrejection",c=>{console.log(c.reason),e&&o(c.reason)}),{show:o,hide:s}},rd={};Z(rd,{draggable:()=>Hb});var Hb=(e,r)=>{let n=O.Placeholder,i;const a=()=>{e.classList.contains("drag-sel")&&e.classList.remove("drag-sel")},u=h=>{e.classList.contains("drag-sel")?e.classList.remove("drag-sel"):e.classList.add("drag-sel"),h.stopPropagation()};e.ownerDocument.addEventListener("click",a),e.addEventListener("click",u);const o=()=>{e.classList.remove("drag-progress"),e.ownerDocument.removeEventListener("pointermove",c),e.ownerDocument.removeEventListener("pointerup",l),e.ownerDocument.removeEventListener("pointercancel",f)},s=()=>{console.log("drag dispose"),e.classList.contains("drag-progress")?f(null,"dispose"):o(),e.ownerDocument.removeEventListener("click",a),e.removeEventListener("click",u)},c=h=>{h.preventDefault(),h.stopPropagation();const E={delta:O.isPlaceholder(n)?{x:h.offsetX,y:h.offsetY}:{x:h.x-n.x,y:h.y-n.y},initial:n,token:i};typeof r.progress<"u"&&!r.progress(E)&&f(null,"discontinued")},l=h=>{o();const v={x:h.x-n.x,y:h.y-n.y},E={initial:n,token:i,delta:v};typeof r.success<"u"&&r.success(E)},f=(h,v="pointercancel")=>{o();const E={token:i,initial:n,delta:{x:-1,y:-1}};typeof r.abort<"u"&&r.abort(v,E)};return e.addEventListener("pointerdown",h=>{if(!e.classList.contains("drag-sel"))return;n={x:h.x,y:h.y};const E=typeof r.start<"u"?r.start():{allow:!0,token:i};!E.allow||(i=E.token,e.classList.add("drag-progress"),e.ownerDocument.addEventListener("pointermove",c),e.ownerDocument.addEventListener("pointerup",l),e.ownerDocument.addEventListener("pointercancel",f))}),s},Gb=(e={})=>{const r={log:console.log,error:console.error,warn:console.warn},n=document.createElement("DIV");n.id="ixfx-log",n.style.position="fixed",n.style.left="0px",n.style.top="0px",n.style.pointerEvents="none",n.style.display="none",document.body.prepend(n);const i=Zh(n,e),a=u=>{n.style.display=u?"block":"none"};console.error=(u,...o)=>{i.error(u),o.length>0&&i.error(o),r.error(u,...o),a(!0)},console.warn=(u,...o)=>{i.warn(u),o.length>0&&i.warn(o),a(!0)},console.log=(u,...o)=>{i.log(u),o.length>0&&i.log(o),r.log(u,...o),a(!0)},window.onerror=(u,o,s,c,l)=>{const f=o===void 0?"":fv(o,"/",{fromEnd:!0}),h=typeof u=="string"?u:u.toString();i.error(h+` (${f}:${s})`),a(!0)}},nd=class extends rr{#e;#t;constructor(e=void 0){super();this.#e=new Map,e===void 0&&(e=r=>{if(r===void 0)throw new Error("Cannot create key for undefined");return typeof r=="string"?r:JSON.stringify(r)}),this.#t=e}clear(){this.#e.clear(),this.fireEvent("change",void 0)}keys(){return this.#e.keys()}values(){return this.#e.values()}toArray(){return Array.from(this.#e.entries())}debugString(){let e="";for(const[r,n]of this.#e.entries())e+=`${r}: ${n}, `;return e.endsWith(", ")?e.substring(0,e.length-2):e}frequencyOf(e){if(typeof e=="string")return this.#e.get(e);const r=this.#t(e);return this.#e.get(r)}relativeFrequencyOf(e){let r;if(typeof e=="string")r=this.#e.get(e);else{const i=this.#t(e);r=this.#e.get(i)}if(r===void 0)return;const n=this.minMaxAvg();return r/n.total}entries(){return Array.from(this.#e.entries())}minMaxAvg(){return Uc.minMaxAvg(this.entries())}entriesSorted(e="value"){return Vc(e)(this.entries())}add(...e){if(e===void 0)throw new Error("value parameter is undefined");e.map(this.#t).forEach(n=>{const i=this.#e.get(n)??0;this.#e.set(n,i+1)}),this.fireEvent("change",void 0)}},Kb=e=>new nd(e),id=(e=3)=>{ee(e,"aboveZero","scaling");let r=0,n=0,i=!1;return{dispose(){i=!0},get isDisposed(){return i},add(u){if(i)throw new Error("MovingAverage disposed, cannot add");return n++,r=r+(u-r)/Math.min(n,e),r},clear(){if(i)throw new Error("MovingAverage disposed, cannot clear");r=0,n=0},compute(){return r}}},Jb=(e=200,r=0,n=3)=>{ee(n,"aboveZero","scaling"),ee(e,"aboveZero","decayRateMs");const i=id(n);let a=0;const u=()=>{a!==0&&clearTimeout(a),a=setTimeout(o,e)},o=()=>{i.add(r),i.isDisposed||setTimeout(o,e)};return{add(c){return u(),i.add(c)},dispose(){i.dispose()},clear:function(){i.clear()},compute:function(){return i.compute()},isDisposed:!1}},Yb=(e=100,r)=>{let n=!1,i=new Ir({capacity:e,discardPolicy:"older"});const a=()=>{i=new Ir({capacity:e,discardPolicy:"older"})},u=()=>r===void 0?us(i.data):as(i.data,r);return{add:c=>(i.enqueue(c),u()),compute:u,clear:a,dispose:()=>{n=!0},isDisposed:n}},ad=class extends so{lastMark=0;mark(){this.lastMark>0&&this.seen(window.performance.now()-this.lastMark),this.lastMark=window.performance.now()}},Zb=e=>new ad(e),Ci=e=>(typeof e=="function"&&(e=e()),ee(e,"percentage","v"),1-e),ud=(e,r=0,n=360)=>(Le(e,void 0,"v"),Le(r,void 0,"min"),Le(n,void 0,"max"),e===r||e===n?r:(e>0&&e<r&&(e+=r),e-=r,n-=r,e=e%n,e<0&&(e=n-Math.abs(e)+r),e+r)),Ui=(e,r=0,n=1)=>{if(ee(e,"","min"),ee(r,"","min"),ee(n,"","max"),e===r||e===n)return r;for(;(e<=r||e>=n)&&!(e===n||e===r);)e>n?e=r+(e-n):e<r&&(e=n-(r-e));return e},Xb=(e,r,n,i,a)=>{let u=0;const o=Math.abs(a-i),s=Math.abs(r-i+a),c=Math.abs(i+(360-a)),l=Math.min(o,s,c);return l===c?u=i-n(l):l===s?u=i+n(l):i>a?u=i-n(l):u=i+n(l),ud(u,e,r)},od={};Z(od,{align:()=>sd,alignById:()=>eD});var Qb=(e,r)=>e.score>r.score?-1:e.score<r.score?1:0,sd=(e,r,n,i={})=>{const a=i.matchThreshold??0,u=i.debug??!1,o=new Map,s=[],c=new Map;r?.forEach((l,f)=>{if(l===void 0)throw new Error(`'lastData' contains undefined (index: ${f})`);c.set(l.id,l)});for(let l=0;l<n.length;l++){const f=n[l];if(!r||r.length===0){u&&console.debug(`Correlate.align() new id: ${f.id}`),s.push(f);continue}const h=Array.from(c.values()).map(E=>({id:E.id,score:E===null?-1:e(E,f),last:E}));if(h.length===0){u&&console.debug(`Correlate.align() no valid last values id: ${f.id}`),s.push(f);continue}h.sort(Qb);const v=h[0];if(v.score<a){u&&console.debug(`Correlate.align() new item does not reach threshold. Top score: ${v.score} id: ${f.id}`),s.push(f);continue}u&&v.id!==f.id&&console.log(`Correlate.align() Remapped ${f.id} -> ${v.id} (score: ${v.score})`),o.set(v.id,{...f,id:v.id}),c.delete(v.id)}return s.forEach(l=>o.set(l.id,l)),Array.from(o.values())},eD=(e,r={})=>{let n=[];return a=>(n=sd(e,n,a,r),[...n])},cd={};Z(cd,{Pool:()=>hd,PoolUser:()=>ld,Resource:()=>fd,create:()=>tD});var ld=class extends rr{constructor(e,r){super();this.key=e,this.resource=r,this._lastUpdate=performance.now(),this._pool=r.pool,this._userExpireAfterMs=this._pool.userExpireAfterMs,this._state="idle",this._pool.log.log(`PoolUser ctor key: ${this.key}`)}_lastUpdate;_pool;_state;_userExpireAfterMs;toString(){return this.isDisposed?"PoolUser. State: disposed":`PoolUser. State: ${this._state} Elapsed: ${performance.now()-this._lastUpdate} Data: ${JSON.stringify(this.resource.data)}`}keepAlive(){if(this._state==="disposed")throw new Error("PoolItem disposed");this._lastUpdate=performance.now()}_dispose(e){if(this._state==="disposed")return;const r=this.resource,n=r.data;this._state="disposed",r._release(this),this._pool.log.log(`PoolUser dispose key: ${this.key} reason: ${e}`),this.fireEvent("disposed",{data:n,reason:e}),super.clearEventListeners()}release(e){if(this.isDisposed)throw new Error("User disposed");const n=this.resource.data;this._pool.log.log(`PoolUser release key: ${this.key} reason: ${e}`),this.fireEvent("released",{data:n,reason:e}),this._dispose(`release-${e}`)}get data(){if(this.isDisposed)throw new Error("User disposed");return this.resource.data}get isExpired(){return this._userExpireAfterMs>0?performance.now()>this._lastUpdate+this._userExpireAfterMs:!1}get elapsed(){return performance.now()-this._lastUpdate}get isDisposed(){return this._state==="disposed"}get isValid(){return!(this.isDisposed||this.isExpired||this.resource.isDisposed)}},fd=class{constructor(e,r){this.pool=e,this._data=r,this.lastUsersChange=0,this.resourcesWithoutUserExpireAfterMs=e.resourcesWithoutUserExpireAfterMs,this.capacityPerResource=e.capacityPerResource,this.users=[],this.state="idle"}state;_data;users;capacityPerResource;resourcesWithoutUserExpireAfterMs;lastUsersChange;get data(){if(this.state==="disposed")throw new Error("Resource disposed");return this._data}toString(){return`Resource (expired: ${this.isExpiredFromUsers} users: ${this.users.length}, state: ${this.state}) data: ${JSON.stringify(this.data)}`}_assign(e){if(this.users.find(n=>n===e||n.key===e.key))throw new Error("User instance already assigned to resource");this.users.push(e),this.lastUsersChange=performance.now()}_release(e){this.users=this.users.filter(r=>r!==e),this.pool._release(e),this.lastUsersChange=performance.now()}get hasUserCapacity(){return this.usersCount<this.capacityPerResource}get usersCount(){return this.users.length}get isExpiredFromUsers(){return this.resourcesWithoutUserExpireAfterMs<=0||this.users.length>0?!1:performance.now()>this.resourcesWithoutUserExpireAfterMs+this.lastUsersChange}get isDisposed(){return this.state==="disposed"}dispose(e){if(this.state==="disposed")return;const r=this._data;this.state="disposed",this.pool.log.log(`Resource disposed (${e})`);for(const n of this.users)n._dispose(`resource-${e}`);this.users=[],this.lastUsersChange=performance.now(),this.pool._releaseResource(this,e),this.pool.freeResource&&this.pool.freeResource(r)}},hd=class{_resources;_users;capacity;userExpireAfterMs;resourcesWithoutUserExpireAfterMs;capacityPerResource;fullPolicy;generateResource;freeResource;log;constructor(e={}){this.capacity=e.capacity??-1,this.fullPolicy=e.fullPolicy??"error",this.capacityPerResource=e.capacityPerResource??1,this.userExpireAfterMs=e.userExpireAfterMs??-1,this.resourcesWithoutUserExpireAfterMs=e.resourcesWithoutUserExpireAfterMs??-1,this.generateResource=e.generate,this.freeResource=e.free,this._users=new Map,this._resources=[],this.log=j0("Pool",e.debug??!1);const r=Math.max(this.userExpireAfterMs,this.resourcesWithoutUserExpireAfterMs);r>0&&setInterval(()=>{this.maintain()},r*1.1)}dumpToString(){let e=`Pool
    capacity: ${this.capacity} userExpireAfterMs: ${this.userExpireAfterMs} capacityPerResource: ${this.capacityPerResource}
    resources count: ${this._resources.length}`;const r=this._resources.map(n=>n.toString()).join(`\r
	`);e+=`\r
Resources:\r
	`+r,e+=`\r
Users: \r
`;for(const[n,i]of this._users.entries())e+=`	k: ${n} v: ${i.toString()}\r
`;return e}getUsersByLongestElapsed(){return[...this._users.values()].sort((e,r)=>{const n=e.elapsed,i=r.elapsed;return n===i?0:n<i?1:-1})}getResourcesSortedByUse(){return[...this._resources].sort((e,r)=>e.usersCount===r.usersCount?0:e.usersCount<r.usersCount?-1:1)}addResource(e){if(e===void 0)throw new Error("Cannot add undefined resource");if(e===null)throw new Error("Cannot add null resource");if(this.capacity>0&&this._resources.length===this.capacity)throw new Error(`Capacity limit (${this.capacity}) reached. Cannot add more.`);this.log.log(`Adding resource: ${JSON.stringify(e)}`);const r=new fd(this,e);return this._resources.push(r),r}maintain(){let e=!1;const r=[];for(const i of this._resources)i.isDisposed?(this.log.log(`Maintain, disposed resource: ${JSON.stringify(i.data)}`),r.push(i)):i.isExpiredFromUsers&&(this.log.log(`Maintain, expired resource: ${JSON.stringify(i.data)}`),r.push(i));if(r.length>0){for(const i of r)i.dispose("diposed/expired");e=!0}const n=[];for(const[i,a]of this._users.entries())a.isValid||(this.log.log(`Maintain. Invalid user: ${a.key} (Disposed: ${a.isDisposed} Expired: ${a.isExpired} Resource disposed: ${a.resource.isDisposed})`),n.push(i),a._dispose("invalid"));for(const i of n)this._users.delete(i),e=!0;e&&this.log.log(`End: resource len: ${this._resources.length} users: ${this.usersLength}`)}*resources(){const e=[...this._resources];for(const r of e)yield r}*values(){const e=[...this._resources];for(const r of e)yield r.data}release(e,r){const n=this._users.get(e);!n||n.release(r??"Pool.release")}_release(e){this._users.delete(e.key)}_releaseResource(e,r){this._resources=this._resources.filter(n=>n!==e)}hasResource(e){return this._resources.find(n=>n.data===e)!==void 0}hasUser(e){return this._users.has(e)}_assign(e,r){const n=new ld(e,r);return this._users.set(e,n),r._assign(n),n}_findUser(e){const r=this.getResourcesSortedByUse();if(r.length>0&&r[0].hasUserCapacity)return this.log.log(`resource has capacity: ${r[0].data}`),this._assign(e,r[0]);if(this.generateResource&&(this.capacity<0||this._resources.length<this.capacity)){this.log.log(`capacity: ${this.capacity} resources: ${this._resources.length}`);const n=this.addResource(this.generateResource());return this._assign(e,n)}}get usersLength(){return[...this._users.values()].length}useValue(e){return this.use(e).resource.data}use(e){const r=this._users.get(e);if(r)return r.keepAlive(),r;this.maintain();const n=this._findUser(e);if(n)return n;if(this.fullPolicy==="error")throw console.log(this.dumpToString()),new Error(`Pool is fully used (fullPolicy: ${this.fullPolicy}, capacity: ${this.capacity})`);if(this.fullPolicy==="evictOldestUser"){const i=this.getUsersByLongestElapsed();if(i.length>0){this.release(i[0].key,"evictedOldestUser");const a=this._findUser(e);if(a)return a}}throw new Error(`Pool is fully used (${this.fullPolicy})`)}},tD=(e={})=>new hd(e),Wu=Math.PI*2,Fa=(e,r,n)=>(1-e)*r+e*n,dd=(e,r,n)=>{const i=Ui(n-r,0,Wu);return Fa(e,r,r+(i>Math.PI?i-Wu:i))},Tn=Math.sqrt,ze=Math.pow,ec=Math.cos,qr=Math.PI,kn=Math.sin,rD=function(e,r){return vd(e,r,nr)},nD=function(e,r){return vd(e,r,Qu)},vd=function(e,r,n){const i=typeof e=="function"?e:Sa(e);if(i===void 0)throw typeof e=="string"?new Error(`Easing function not found: ${e}`):new Error("Easing function not found");const a=ii(r,{timer:n(),clampValue:!0});return{get isDone(){return a.isDone},compute:()=>{const u=a.elapsed;return i(u)},reset:()=>{a.reset()}}},iD=(e,r)=>n=>{const i=1-n,a=i*i,u=n*n,o=u*n;return 3*e*a*n+3*r*i*u+o},yd=(e,r,n,i)=>Fa(r,n(e),i(e)),aD=(e,r,n)=>yd(e,e,r,n),Sa=function(e){if(e===null)throw new Error("easingName is null");if(e===void 0)throw new Error("easingName is undefined");const r=e.toLocaleLowerCase(),n=Object.entries(is).find(([i,a])=>i.toLocaleLowerCase()===r);return n===void 0?n:n[1]};function*uD(){yield*Object.keys(is)}var md=(e=.4)=>{const r=1/Tn(2*qr),n=.5;return i=>{const a=r/e;let u=-2.5,o=(i-n)/e;o*=o,u*=o;const s=a*ze(Math.E,u);return s>1?1:s<0?0:s}},bi=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},oD=e=>e*e*e*e*e,sD=e=>1-ze(1-e,5),cD=e=>e*(1-e)*4,lD=(e,r,n)=>(e*(n-1)+r)/n,is={smoothstep:e=>e*e*(3-2*e),smootherstep:e=>(e*(e*6-15)+10)*e*e*e,arch:cD,bell:md(),sineIn:e=>1-ec(e*qr/2),sineOut:e=>kn(e*qr/2),quadIn:e=>e*e,quadOut:e=>1-(1-e)*(1-e),sineInOut:e=>-(ec(qr*e)-1)/2,quadInOut:e=>e<.5?2*e*e:1-ze(-2*e+2,2)/2,cubicIn:e=>e*e*e,cubicOut:e=>1-ze(1-e,3),quartIn:e=>e*e*e*e,quartOut:e=>1-ze(1-e,4),quintIn:oD,quintOut:sD,expoIn:e=>e===0?0:ze(2,10*e-10),expoOut:e=>e===1?1:1-ze(2,-10*e),quintInOut:e=>e<.5?16*e*e*e*e*e:1-ze(-2*e+2,5)/2,expoInOut:e=>e===0?0:e===1?1:e<.5?ze(2,20*e-10)/2:(2-ze(2,-20*e+10))/2,circIn:e=>1-Tn(1-ze(e,2)),circOut:e=>Tn(1-ze(e-1,2)),backIn:e=>2.70158*e*e*e-1.70158*e*e,backOut:e=>1+2.70158*ze(e-1,3)+1.70158*ze(e-1,2),circInOut:e=>e<.5?(1-Tn(1-ze(2*e,2)))/2:(Tn(1-ze(-2*e+2,2))+1)/2,backInOut:e=>{const n=2.5949095;return e<.5?ze(2*e,2)*((n+1)*2*e-n)/2:(ze(2*e-2,2)*((n+1)*(e*2-2)+n)+2)/2},elasticIn:e=>{const r=2*qr/3;return e===0?0:e===1?1:-ze(2,10*e-10)*kn((e*10-10.75)*r)},elasticOut:e=>{const r=2*qr/3;return e===0?0:e===1?1:ze(2,-10*e)*kn((e*10-.75)*r)+1},bounceIn:e=>1-bi(1-e),bounceOut:bi,elasticInOut:e=>{const r=2*qr/4.5;return e===0?0:e===1?1:e<.5?-(ze(2,20*e-10)*kn((20*e-11.125)*r))/2:ze(2,-20*e+10)*kn((20*e-11.125)*r)/2+1},bounceInOut:e=>e<.5?(1-bi(1-2*e))/2:(1+bi(2*e-1))/2},Ma=(e,r={})=>{if(e===void 0)throw new Error("'data' is undefined");if(!Array.isArray(e))if("next"in e){(r.startIndex||r.endIndex)&&(e=of(e,r.startIndex,r.endIndex));let o=0,s=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,l=0;for(const f of e){if(typeof f!="number")throw new Error(`Generator should yield numbers. Got: ${typeof f}`);o+=f,l++,s=Math.min(s,f),c=Math.max(c,f)}return{avg:o/l,total:o,max:c,min:s}}else throw new Error("'data' parameter is neither array or iterable");if(e.length===0)return{total:0,min:0,max:0,avg:0};const n=r.startIndex??0,i=r.endIndex??e.length,a=Y0(e,o=>typeof o=="number"&&!Number.isNaN(o),n,i),u=a.reduce((o,s)=>o+s,0);return{total:u,max:Math.max(...a),min:Math.min(...a),avg:u/a.length}},as=(e,r)=>{typeof r=="function"&&(r=gd(e,r));const n=J0(e,r),[i,a]=n.reduce((u,o)=>[u[0]+o[0]*o[1],u[1]+o[1]],[0,0]);return i/a},gd=(e,r)=>{const n=r===void 0?i=>i:r;return En(e).map((i,a)=>i*n(a/(En.length-1)))},En=e=>e.filter(r=>typeof r=="number"&&!Number.isNaN(r)),fD=e=>{let r=0;const n=e[0].length;for(let i=0;i<n;i++){let a=0;for(let u=0;u<e.length;u++)u===0?a=e[u][i]:a*=e[u][i];r+=a}return r},us=e=>{if(e===void 0)throw new Error("data parameter is undefined");const r=En(e);return r.reduce((i,a)=>i+a,0)/r.length},pd=e=>Math.min(...En(e)),hD=e=>e.reduce((r,n,i,a)=>n>a[r]?i:r,0),wd=(...e)=>e.reduce((r,n,i,a)=>n<a[r]?i:r,0),Ed=e=>Math.max(...En(e)),bd=e=>e.reduce((r,n)=>typeof n!="number"||Number.isNaN(n)||Number.isFinite(n)?r:r+n,0),Dd=e=>{let r=Number.MIN_SAFE_INTEGER;for(let n=0;n<e.length;n++)r=Math.max(r,e[n]);return r},Ad=e=>{let r=0;for(let n=0;n<e.length;n++)r+=e[n];return r},os=e=>{let r=Number.MIN_SAFE_INTEGER;for(let n=0;n<e.length;n++)r=Math.min(r,e[n]);return r},dD=Object.freeze({a:Object.freeze({x:0,y:0}),b:Object.freeze({x:0,y:0})}),vD=Object.freeze({a:Object.freeze({x:NaN,y:NaN}),b:Object.freeze({x:NaN,y:NaN})}),yD=e=>O.isEmpty(e.a)&&O.isEmpty(e.b),mD=e=>O.isPlaceholder(e.a)&&O.isPlaceholder(e.b),Tr=e=>!(e===void 0||e.a===void 0||e.b===void 0||!O.isPoint(e.a)||!O.isPoint(e.b)),Cd=e=>Array.isArray(e)?!e.some(n=>!Tr(n)):!1,Fd=(e,r)=>O.isEqual(e.a,r.a)&&O.isEqual(e.b,r.b),Sd=(e,r)=>Object.freeze({...e,a:r(e.a),b:r(e.b)}),Ia=(e,r="line")=>{if(e===void 0)throw new Error(`${r} undefined`);if(e.a===void 0)throw new Error(`${r}.a undefined. Expected {a:Point, b:Point}. Got: ${JSON.stringify(e)}`);if(e.b===void 0)throw new Error(`${r}.b undefined. Expected {a:Point, b:Point} Got: ${JSON.stringify(e)}`)},gD=(e,r)=>{let n;if(Tr(e))n=e.a,r=e.b;else if(n=e,r===void 0)throw new Error("b point must be provided");return Math.atan2(r.y-n.y,r.x-n.x)},Md=(e,r)=>Object.freeze({...e,a:O.multiply(e.a,r),b:O.multiply(e.b,r)}),Id=(e,r)=>Object.freeze({...e,a:O.divide(e.a,r),b:O.divide(e.b,r)}),_d=(e,r)=>Object.freeze({...e,a:O.sum(e.a,r),b:O.sum(e.b,r)}),Pd=(e,r)=>Object.freeze({...e,a:O.subtract(e.a,r),b:O.subtract(e.b,r)}),pD=(e,r,n)=>Object.freeze({...e,a:O.normaliseByRect(e.a,r,n),b:O.normaliseByRect(e.b,r,n)}),Rd=(e,r,n)=>Td(e,r)<=n;function mr(e,r){if(Cd(e))return e.reduce((s,c)=>mr(c)+s,0);const[n,i]=_a(e,r),a=i.x-n.x,u=i.y-n.y;if(n.z!==void 0&&i.z!==void 0){const o=i.z-n.z;return Math.hypot(a,u,o)}else return Math.hypot(a,u)}var Bd=(e,r)=>{const[n,i]=_a(e,r);return Rr(.5,n,i)},_a=(e,r)=>{let n;if(Tr(e))r=e.b,n=e.a;else if(n=e,r===void 0)throw new Error(`Since first parameter is not a line, two points are expected. Got a: ${JSON.stringify(n)} b: ${JSON.stringify(r)}`);return pe(n,"a"),pe(n,"b"),[n,r]},ss=(e,r)=>{const n=i=>{const{a,b:u}=i,o={x:u.x-a.x,y:u.y-a.y},s={x:r.x-a.x,y:r.y-a.y},c=o.x*o.x+o.y*o.y;let l=s.x*o.x+s.y*o.y;const f=Math.min(1,Math.max(0,l/c));return l=(u.x-a.x)*(r.y-a.y)-(u.y-a.y)*(r.x-a.x),{x:a.x+o.x*f,y:a.y+o.y*f}};if(Array.isArray(e)){const i=e.map(u=>n(u)),a=i.map(u=>O.distance(u,r));return Object.freeze(i[Ht.minIndex(...a)])}else return Object.freeze(n(e))},cs=(e,r)=>{let n;if(Tr(e))n=e.a,r=e.b;else if(n=e,r===void 0)throw new Error("b parameter required");if(r!==void 0)return(r.y-n.y)/(r.x-n.x);throw Error("Second point missing")},Nd=e=>({x:e.b.x-e.a.x,y:e.b.y-e.a.y}),zd=e=>{const r=mr(e),n=Nd(e);return{x:n.x/r,y:n.y/r}},Wd=(e,r,n=0)=>{const i=Rr(n,e),a=zd(e);return{x:i.x-a.y*r,y:i.y+a.x*r}},kd=(e,r)=>{const n=Nd(e),i=zd(e),a={x:e.a.x-i.y*r,y:e.a.y+i.x*r};return{a,b:{x:a.x+n.x,y:a.y+n.y}}},wD=(e,r)=>{const n=Rr(r/2,e),i=Rr(.5+r/2,e);return{a:n,b:i}},ED=(e,r)=>{const n=e.a.y+(r-e.a.x)*cs(e);return Object.freeze({x:r,y:n})},bD=(e,r)=>{const n=mr(e);return Object.freeze({...e,a:e.a,b:Object.freeze({x:e.b.x+(e.b.x-e.a.x)/n*r,y:e.b.y+(e.b.y-e.a.y)/n*r})})};function*DD(e){const{a:r,b:n}=e;let i=Math.floor(r.x),a=Math.floor(r.y);const u=Math.floor(n.x),o=Math.floor(n.y),s=Math.abs(u-i),c=-Math.abs(o-a),l=i<u?1:-1,f=a<o?1:-1;let h=s+c;for(;yield{x:i,y:a},!(i===u&&a===o);){const v=2*h;v>=c&&(h+=c,i+=l),v<=s&&(h+=s,a+=f)}}var Td=(e,r)=>{if(Array.isArray(e)){const n=e.map(i=>ku(i,r));return os(n)}else return ku(e,r)},ku=(e,r)=>{if(Ia(e,"line"),pe(r,"point"),mr(e)===0)return mr(e.a,r);const n=ss(e,r);return mr(n,r)};function Rr(e,r,n,i){typeof n=="boolean"&&(i=n,n=void 0),i?ee(e,"","amount"):Vv(e,"amount");const[a,u]=_a(r,n),o=mr(a,u),s=o*(1-e);if(o===0&&s===0)return Object.freeze({...u});const c=u.x-s*(u.x-a.x)/o,l=u.y-s*(u.y-a.y)/o;return Object.freeze({...u,x:c,y:l})}function Od(e,r){if(Tr(e))Ia(e,"a"),r=e.b,e=e.a;else if(r===void 0)throw new Error("Expect second point if first is a point");return O.toString(e)+"-"+O.toString(r)}var xi=(e,r,n,i)=>{if(Number.isNaN(e))throw new Error("x1 is NaN");if(Number.isNaN(n))throw new Error("x2 is NaN");if(Number.isNaN(r))throw new Error("y1 is NaN");if(Number.isNaN(i))throw new Error("y2 is NaN");return Pa({x:e,y:r},{x:n,y:i})},$d=(e,r)=>{if(Tr(e))return[e.a.x,e.a.y,e.b.x,e.b.y];if(O.isPoint(e)&&O.isPoint(r))return[e.x,e.y,r.x,r.y];throw new Error("Expected single line parameter, or a and b points")};function*AD(e){for(const r of e)yield r.a,yield r.b}var Ld=(e,r)=>[`M${e.x} ${e.y} L ${r.x} ${r.y}`],CD=e=>{if(!Array.isArray(e))throw new Error("arr parameter is not an array");if(e.length!==4)throw new Error("array is expected to have length four");return xi(e[0],e[1],e[2],e[3])},Pa=(e,r)=>(pe(e,"a"),pe(r,"b"),e=Object.freeze({...e}),r=Object.freeze({...r}),Object.freeze({a:e,b:r})),jd=(...e)=>{const r=[];let n=e[0];for(let i=1;i<e.length;i++)r.push(Pa(n,e[i])),n=e[i];return r},FD=(e,r)=>dr(Pa(e,r)),qd=e=>O.bbox(e.a,e.b),dr=e=>{const{a:r,b:n}=e;return Object.freeze({...e,length:()=>mr(r,n),interpolate:i=>Rr(i,r,n),bbox:()=>qd(e),toString:()=>Od(r,n),toFlatArray:()=>$d(r,n),toSvgString:()=>Ld(r,n),toPoints:()=>[r,n],rotate:(i,a)=>dr(Ud(e,i,a)),nearest:i=>ss(e,i),sum:i=>dr(_d(e,i)),divide:i=>dr(Id(e,i)),multiply:i=>dr(Md(e,i)),subtract:i=>dr(Pd(e,i)),midpoint:()=>Bd(r,n),distance:i=>ku(e,i),parallel:i=>kd(e,i),perpendicularPoint:(i,a)=>Wd(e,i,a),slope:()=>cs(e),withinRange:(i,a)=>Rd(e,i,a),isEqual:i=>Fd(e,i),apply:i=>dr(Sd(e,i)),kind:"line"})},Ud=(e,r,n)=>r===void 0||r===0?e:(n===void 0&&(n=.5),typeof n=="number"&&(n=Rr(n,e.a,e.b)),Object.freeze({...e,a:O.rotate(e.a,r,n),b:O.rotate(e.b,r,n)}));function st(e,r,n){if(e===void 0)return{x:0,y:0};if(Array.isArray(e)){if(e.length===0)return Object.freeze({x:0,y:0});if(e.length===1)return Object.freeze({x:e[0],y:0});if(e.length===2)return Object.freeze({x:e[0],y:e[1]});if(e.length===3)return Object.freeze({x:e[0],y:e[1],z:e[2]});throw new Error(`Expected array to be 1-3 elements in length. Got ${e.length}.`)}if(O.isPoint(e))return e;if(typeof e!="number"||typeof r!="number")throw new Error(`Expected point or x,y as parameters. Got: a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`);return Object.freeze(typeof n=="number"?{x:e,y:r,z:n}:{x:e,y:r})}var xd=(...e)=>{const r=e.map(O.toArray);return Ht.dotProduct(r)},bn=Object.freeze({x:0,y:0}),Vd=Object.freeze({x:NaN,y:NaN}),Fi=e=>e.x===0&&e.y===0,Si=e=>Number.isNaN(e.x)&&Number.isNaN(e.y),SD=e=>e.x===null&&e.y===null,MD=e=>Number.isNaN(e.x)||Number.isNaN(e.y),Vr=(e,...r)=>{if(r.length===0)throw new Error("No points provided");let n=r[0];return r.forEach(i=>{n=e(n,i)}),n},ID=(...e)=>Vr((r,n)=>r.x<=n.x?r:n,...e),_D=(...e)=>Vr((r,n)=>r.x>=n.x?r:n,...e);function Wt(e,r,n,i){const a=st(r,n,i);return pe(a),Dn(a)&&Dn(e)?Math.hypot(a.x-e.x,a.y-e.y,a.z-e.z):Math.hypot(a.x-e.x,a.y-e.y)}var PD=(e,r)=>{if(me.isRectPositioned(r))return me.distanceFromExterior(r,e);if(St.isCirclePositioned(r))return St.distanceFromExterior(r,e);if(Se(r))return Wt(e,r);throw new Error("Unknown shape")},RD=(e,r)=>{if(me.isRectPositioned(r))return me.distanceFromExterior(r,e);if(St.isCirclePositioned(r))return St.distanceFromExterior(r,e);if(Se(r))return Wt(e,r);throw new Error("Unknown shape")};function pe(e,r="Point"){if(e===void 0)throw new Error(`'${r}' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(e===null)throw new Error(`'${r}' is null. Expected {x,y} got ${JSON.stringify(e)}`);if(e.x===void 0)throw new Error(`'${r}.x' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(e.y===void 0)throw new Error(`'${r}.y' is undefined. Expected {x,y} got ${JSON.stringify(e)}`);if(typeof e.x!="number")throw new Error(`'${r}.x' must be a number. Got ${e.x}`);if(typeof e.y!="number")throw new Error(`'${r}.y' must be a number. Got ${e.y}`);if(e.x===null)throw new Error(`'${r}.x' is null`);if(e.y===null)throw new Error(`'${r}.y' is null`);if(Number.isNaN(e.x))throw new Error(`'${r}.x' is NaN`);if(Number.isNaN(e.y))throw new Error(`'${r}.y' is NaN`)}var Hd=(e,r="pt")=>(pe(e,r),ee(e.x,"nonZero",`${r}.x`),ee(e.y,"nonZero",`${r}.y`),typeof e.z<"u"&&ee(e.z,"nonZero",`${r}.z`),!0),BD=e=>({...e,x:Math.abs(e.x),y:Math.abs(e.y)}),vn=(e,r,n)=>r===void 0?Math.atan2(e.y,e.x):n!==void 0?Math.atan2(r.y-e.y,r.x-e.x)-Math.atan2(n.y-e.y,n.x-e.x):Math.atan2(r.y-e.y,r.x-e.x),Gd=(...e)=>{if(!Array.isArray(e))throw new Error("Expected list of points");const r=e.reduce((n,i)=>{if(i===void 0)return n;if(Array.isArray(i))throw new Error("'points' list contains an array. Did you mean: centroid(...myPoints)?");if(!Se(i))throw new Error(`'points' contains something which is not a point: ${JSON.stringify(i)}`);return{x:n.x+i.x,y:n.y+i.y}},{x:0,y:0});return Object.freeze({x:r.x/e.length,y:r.y/e.length})},ND=(...e)=>{const r=Vr((l,f)=>l.x<f.x?l:f,...e),n=Vr((l,f)=>l.x>f.x?l:f,...e),i=Vr((l,f)=>l.y<f.y?l:f,...e),a=Vr((l,f)=>l.y>f.y?l:f,...e),u={x:r.x,y:i.y},o={x:n.x,y:i.y},s={x:n.x,y:a.y},c={x:r.x,y:a.y};return me.maxFromCorners(u,o,s,c)};function Se(e){return!(e===void 0||e===null||e.x===void 0||e.y===void 0)}var Dn=e=>!(e===void 0||e===null||e.x===void 0||e.y===void 0||e.z===void 0),zD=e=>[e.x,e.y];function Kd(e,r){if(e===void 0)return"(undefined)";if(e===null)return"(null)";const n=r?e.x.toFixed(r):e.x,i=r?e.y.toFixed(r):e.y;if(e.z!==void 0){const a=r?e.z.toFixed(r):e.z;return`(${n},${i},${a})`}else return`(${n},${i})`}var Ln=(...e)=>{if(e===void 0)throw new Error("parameter 'p' is undefined");if(e.length<2)return!0;for(let r=1;r<e.length;r++)if(e[r].x!==e[0].x||e[r].y!==e[0].y)return!1;return!0},WD=(e,r,n)=>{pe(e,"a"),pe(r,"b"),typeof n=="number"?(ee(n,"positive","maxRange"),n={x:n,y:n}):pe(n,"maxRange");const i=Math.abs(r.x-e.x),a=Math.abs(r.y-e.y);return i<=n.x&&a<=n.y},kD=(e,r,n,i=!1)=>Rr(e,r,n,i),TD=(e,r)=>{if(Array.isArray(e)){if(e.length!==2)throw new Error("Expected array of length two, got "+e.length);return Object.freeze({x:e[0],y:e[1]})}else{if(e===void 0)e=0;else if(Number.isNaN(e))throw new Error("x is NaN");if(r===void 0)r=0;else if(Number.isNaN(r))throw new Error("y is NaN");return Object.freeze({x:e,y:r})}},Jd=(...e)=>{const r=[];if(Array.isArray(e[0]))e.forEach(n=>{if(n.length%2!==0)throw new Error("coords array should be even-numbered");r.push(Object.freeze({x:n[0],y:n[1]}))});else{if(e.length%2!==0)throw new Error("Expected even number of elements: [x,y,x,y...]");for(let n=0;n<e.length;n+=2)r.push(Object.freeze({x:e[n],y:e[n+1]}))}return r};function Or(e,r,n,i){if(Se(e))return pe(e,"a"),Se(r)?(pe(r,"b"),Object.freeze({...e,x:e.x-r.x,y:e.y-r.y})):(n===void 0&&(n=r),Object.freeze({...e,x:e.x-r,y:e.y-n}));if(ee(e,"","a"),typeof r!="number")throw new Error("Second parameter is expected to by y value");if(ee(r,"","b"),Number.isNaN(n))throw new Error("Third parameter is NaN");if(Number.isNaN(i))throw new Error("Fourth parameter is NaN");return n===void 0&&(n=0),i===void 0&&(i=0),Object.freeze({x:e-n,y:r-i})}var OD=(e,r)=>Object.freeze({...e,x:r(e.x,"x"),y:r(e.y,"y")}),$D=(e,...r)=>Yd(...r)(e),Yd=(...e)=>r=>e.reduce((n,i)=>i(n),r),Zd=(e,r,n={x:0,y:0})=>{let i=n;return e.forEach(a=>{i=r(a,i)}),i},Xd=function(e,r,n,i){if(e===void 0)throw new Error(`a missing. a: ${e}`);let a,u;if(Se(e))if(a=e,r===void 0&&(r=bn),Se(r))u=r;else{if(r===void 0)throw new Error("Expects x coordinate");u={x:r,y:n===void 0?r:n}}else if(!Se(r)){if(r===void 0)throw new Error("Expected number as second param");if(a={x:e,y:r},n===void 0)throw new Error("Expects x coordiante");u={x:n,y:i===void 0?0:i}}if(a===void 0)throw new Error(`ptA missing. a: ${e}`);if(u===void 0)throw new Error(`ptB missing. b: ${r}`);return pe(a,"a"),pe(u,"b"),Object.freeze({x:a.x+u.x,y:a.y+u.y})};function Ra(e,r,n){if(pe(e,"a"),typeof r=="number")return typeof n>"u"&&(n=r),ee(n,"","y"),ee(r,"","x"),Object.freeze({x:e.x*r,y:e.y*n});if(Se(r))return pe(r,"b"),Object.freeze({x:e.x*r.x,y:e.y*r.y});if(me.isRect(r))return me.guard(r,"rect"),Object.freeze({x:e.x*r.width,y:e.y*r.height});throw new Error(`Invalid arguments. a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`)}var LD=(e,r)=>Dn(e)?Object.freeze({...e,x:e.x*r,y:e.y*r,z:e.z*r}):Object.freeze({...e,x:e.x*r,y:e.y*r});function Qd(e,r,n,i){if(Se(e))return pe(e,"a"),Se(r)?Object.freeze({x:e.x/r.x,y:e.y/r.y}):me.isRect(r)?(me.guard(r,"rect"),Object.freeze({x:e.x/r.width,y:e.y/r.height})):(n===void 0&&(n=r),pe(e),ee(r,"nonZero","x"),ee(n,"nonZero","y"),Object.freeze({x:e.x/r,y:e.y/n}));if(typeof r!="number")throw new Error("expected second parameter to be y1 coord");return ee(e,"positive","x1"),ee(r,"positive","y1"),n===void 0&&(n=1),i===void 0&&(i=n),ee(n,"nonZero","x2"),ee(i,"nonZero","y2"),Object.freeze({x:e/n,y:r/i})}function jD(e,r,n){const i=st(e,r,n);return Hd(i,"divisor"),(a,u,o)=>{const s=st(a,u,o);return typeof s.z<"u"?Object.freeze({x:s.x/i.x,y:s.y/i.y,z:s.z/(i.z??1)}):Object.freeze({x:s.x/i.x,y:s.y/i.y})}}var qD=(e,r,n=!0)=>Object.freeze({x:bu(e.x,r.x,n),y:bu(e.y,r.y,n)}),UD=(...e)=>{const r=[...e].sort(e0);if(r.length===1)return r;const n=u=>{const o=[];return u.forEach(s=>{for(;o.length>=2;){const c=o[o.length-1],l=o[o.length-2];if((c.x-l.x)*(s.y-l.y)>=(c.y-l.y)*(s.x-l.x))o.pop();else break}o.push(s)}),o.pop(),o},i=n(r),a=n(r.reverse());return i.length===1&&a.length===1&&Ln(a[0],i[0])?i:i.concat(a)},xD=(e,r)=>e.x<r.x&&e.y<r.y?-2:e.x>r.x&&e.y>r.y?2:e.x<r.x||e.y<r.y?-1:e.x>r.x||e.y>r.y?1:e.x===r.x&&e.x===r.y?0:NaN,e0=(e,r)=>e.x-r.x||e.y-r.y,Tu=(e,r,n)=>{const i=Math.cos(n)*r+e.x,a=Math.sin(n)*r+e.y;return{x:i,y:a}};function Zr(e,r,n){n===void 0&&(n={x:0,y:0}),pe(n,"origin"),ee(r,"","amountRadian");const i=Array.isArray(e);if(r===0)return e;i||(e=[e]);const a=e;a.forEach((c,l)=>pe(c,`pt[${l}]`));const s=a.map(c=>Ge.fromCartesian(c,n)).map(c=>Ge.rotate(c,r)).map(c=>Ge.toCartesian(c,n));return i?s:s[0]}var VD=(e,r)=>{const n=[[Math.cos(r),-Math.sin(r)],[Math.sin(r),Math.cos(r)]],i=[];for(let a=0;a<e.length;++a)i[a]=[n[0][0]*e[a][0]+n[0][1]*e[a][1],n[1][0]*e[a][0]+n[1][1]*e[a][1]];return i},HD=(e,r)=>{if(Se(e)&&(r=e.y,e=e.x),r===void 0)throw new Error("Expected y");return Math.sqrt(e*e+r*r)},t0=(e,r)=>{const n=st(e,r),i=HD(n);return i===0?O.Empty:Object.freeze({x:n.x/i,y:n.y/i})};function GD(e,r,n,i){if(Se(e)){if(typeof r=="number"&&n!==void 0)ee(r,"positive","width"),ee(n,"positive","height");else{if(!me.isRect(r))throw new Error("Expected second parameter to be a rect");n=r.height,r=r.width}return Object.freeze({x:e.x/r,y:e.y/n})}else{if(ee(e,"positive","x"),typeof r!="number")throw new Error("Expecting second parameter to be a number (width)");if(typeof n!="number")throw new Error("Expecting third parameter to be a number (height)");if(ee(r,"positive","y"),ee(n,"positive","width"),i===void 0)throw new Error("Expected height parameter");return ee(i,"positive","height"),Object.freeze({x:e/n,y:r/i})}}var KD=e=>(e===void 0&&(e=Xe),Object.freeze({x:e(),y:e()})),JD=(e,r={x:1,y:1},n={x:0,y:0})=>(pe(e,"pt"),pe(r,"ptMax"),pe(n,"ptMin"),Object.freeze({x:Ui(e.x,n.x,r.x),y:Ui(e.y,n.y,r.y)})),YD=(e,r="both")=>{switch(r){case"both":return Dn(e)?Object.freeze({...e,x:e.x*-1,y:e.y*-1,z:e.z*-1}):Object.freeze({...e,x:e.x*-1,y:e.y*-1});case"x":return Object.freeze({...e,x:e.x*-1});case"y":return Object.freeze({...e,y:e.y*-1});case"z":if(Dn(e))return Object.freeze({...e,z:e.z*-1});throw new Error("pt parameter is missing z");default:throw new Error("Unknown what parameter. Expecting 'both', 'x' or 'y'")}},ZD=(e,r=Math.round)=>(pe(e,"pt"),Object.freeze({x:r(e.x),y:r(e.y)})),r0=(e,r=1,n=0)=>{const i=Wt(e);let a=1;return i>r?a=r/i:i<n&&(a=n/i),a===1?e:Ra(e,a,a)};function XD(e,r,n,i){if(Se(e))return r===void 0&&(r=0),n===void 0&&(n=1),ee(r,"","min"),ee(n,"","max"),Object.freeze({x:zt(e.x,r,n),y:zt(e.y,r,n)});if(r===void 0)throw new Error("Expected y coordinate");return n===void 0&&(n=0),i===void 0&&(i=1),ee(e,"","x"),ee(r,"","y"),ee(n,"","min"),ee(i,"","max"),Object.freeze({x:zt(e,n,i),y:zt(r,n,i)})}var Ou=(e,r)=>{const n=st(e,r);let i=0,a=0,u=0,o=performance.now(),s=n;return(l,f)=>{const h=st(l,f);i+=h.x,a+=h.y,u++;const v=Wt(h,n),E=Wt(h,s),R=performance.now(),L=E/(R-o);return o=R,s=h,Object.freeze({angle:vn(h,n),distanceFromStart:v,distanceFromLast:E,speed:L,centroid:Gd(h,n),average:{x:i/u,y:a/u}})}},QD=(e,r,n)=>{const i=O.subtract(e,r),a=O.subtract(n,r);return O.isPoint3d(i)&&O.isPoint3d(a)?(i.x*a.x+i.y*a.y+i.z*a.z)/(a.x*a.x+a.y*a.y+a.z*a.z):(i.x*a.x+i.y*a.y)/(a.x*a.x+a.y*a.y)},n0=e=>e.startRadian!==void 0&&e.endRadian!==void 0,yr=e=>e.x!==void 0&&e.y!==void 0,tc=Math.PI*2;function eA(e,r,n,i){const a={radius:e,startRadian:Mr(r),endRadian:Mr(n)};if(Se(i)){pe(i);const u={...a,x:i.x,y:i.y};return Object.freeze(u)}else return Object.freeze(a)}var i0=e=>Je.fromPoints(Vi(e,e.startRadian),Vi(e,e.endRadian)),Vi=(e,r,n)=>{if(r>e.endRadian)throw new Error("angleRadian beyond end angle of arc");if(r<e.startRadian)throw new Error("angleRadian beyond start angle of arc");return n===void 0&&(yr(e)?n=e:n={x:0,y:0}),{x:Math.cos(r)*e.radius+n.x,y:Math.sin(r)*e.radius+n.y}},ls=e=>{if(e===void 0)throw new Error("Arc is undefined");if(yr(e)&&pe(e,"arc"),e.radius===void 0)throw new Error(`Arc radius is undefined (${JSON.stringify(e)})`);if(typeof e.radius!="number")throw new Error("Radius must be a number");if(Number.isNaN(e.radius))throw new Error("Radius is NaN");if(e.radius<=0)throw new Error("Radius must be greater than zero");if(e.startRadian===void 0)throw new Error("Arc is missing 'startRadian' field");if(e.endRadian===void 0)throw new Error("Arc is missing 'startRadian' field");if(Number.isNaN(e.endRadian))throw new Error("Arc endRadian is NaN");if(Number.isNaN(e.startRadian))throw new Error("Arc endRadian is NaN");if(e.startRadian>=e.endRadian)throw new Error("startRadian is expected to be les than endRadian")},fs=(e,r,n)=>(ls(r),Vi(r,r.startRadian+(r.endRadian-r.startRadian)*e,n)),tA=e=>(ls(e),Object.freeze({...e,nearest:r=>{throw new Error("not implemented")},interpolate:r=>fs(r,e),bbox:()=>u0(e),length:()=>a0(e),toSvgString:()=>o0(e),kind:"arc"})),a0=e=>tc*e.radius*((e.startRadian-e.endRadian)/tc),u0=e=>{if(yr(e)){const r=fs(.5,e),n=i0(e);return O.bbox(r,n.a,n.b)}else return{width:e.radius*2,height:e.radius*2}},o0=(e,r,n,i,a)=>{if(n0(e))return yr(e)?Di(e,e.radius,e.startRadian,e.endRadian,r):Se(r)?Di(r,e.radius,e.startRadian,e.endRadian,n):Di({x:0,y:0},e.radius,e.startRadian,e.endRadian);if(n===void 0)throw new Error("startAngle undefined");if(i===void 0)throw new Error("endAngle undefined");if(Se(e)){if(typeof r=="number"&&typeof n=="number"&&typeof i=="number")return Di(e,r,n,i,a);throw new Error("Expected (point, number, number, number). Missing a number param.")}else throw new Error("Expected (point, number, number, number). Missing first point.")},Di=(e,r,n,i,a)=>{(a===void 0||typeof a!="object")&&(a={});const u=i-n===360,o=Ge.toCartesian(r,i-.01,e),s=Ge.toCartesian(r,n,e),{largeArc:c=!1,sweep:l=!1}=a,f=[`
    M ${o.x} ${o.y}
    A ${r} ${r} 0 ${c?"1":"0"} ${l?"1":"0"} ${s.x} ${s.y},
  `];return u&&f.push("z"),f},rA=(e,r)=>O.distance(e,r),nA=(e,r)=>e.radius!==r.radius?!1:yr(e)&&yr(r)?!(e.x!==r.x||e.y!==r.y||e.z!==r.z):!(!(!yr(e)&&!yr(r))||e.endRadian!==r.endRadian||e.startRadian!==r.startRadian),hs={};Z(hs,{bbox:()=>c0,computeDimensions:()=>ds,fromPaths:()=>d0,guardContinuous:()=>f0,interpolate:()=>s0,setSegment:()=>iA,toString:()=>l0,toSvgString:()=>h0});var iA=(e,r,n)=>{const i=[...e.segments];return i[r]=n,d0(...i)},s0=(e,r,n,i)=>{i===void 0&&(i=ds(e));const a=r*(n?i.totalWidth:i.totalLength);let u=0;const o=n?i.widths:i.lengths;for(let s=0;s<o.length;s++)if(u+o[s]>=a){let l=(a-u)/o[s];return l>1&&(l=1),e[s].interpolate(l)}else u+=o[s];return{x:0,y:0}},ds=e=>{const r=e.map(u=>u.bbox().width),n=e.map(u=>u.length());let i=0,a=0;for(let u=0;u<n.length;u++)i+=n[u];for(let u=0;u<r.length;u++)a+=r[u];return{totalLength:i,totalWidth:a,widths:r,lengths:n}},c0=e=>{const n=e.map(i=>i.bbox()).map(i=>me.corners(i)).flat();return O.bbox(...n)},l0=e=>e.map(r=>r.toString()).join(", "),f0=e=>{let r=sn.getEnd(e[0]);for(let n=1;n<e.length;n++){const i=sn.getStart(e[n]);if(!O.isEqual(i,r))throw new Error("Path index "+n+" does not start at prior path end. Start: "+i.x+","+i.y+" expected: "+r.x+","+r.y);r=sn.getEnd(e[n])}},h0=e=>e.flatMap(r=>r.toSvgString()),d0=(...e)=>{f0(e);const r=ds(e);return Object.freeze({segments:e,length:()=>r.totalLength,nearest:n=>{throw new Error("not implemented")},interpolate:(n,i=!1)=>s0(e,n,i,r),bbox:()=>c0(e),toString:()=>l0(e),toSvgString:()=>h0(e),kind:"compound"})},Ba={};Z(Ba,{arrow:()=>FA,center:()=>AA,isIntersecting:()=>DA,randomPoint:()=>y0,starburst:()=>CA});var Ge={};Z(Ge,{clampMagnitude:()=>wA,divide:()=>pA,dotProduct:()=>lA,fromCartesian:()=>uA,guard:()=>Mt,invert:()=>fA,isAntiParallel:()=>vA,isCoord:()=>v0,isOpposite:()=>hA,isParallel:()=>dA,multiply:()=>gA,normalise:()=>cA,rotate:()=>sA,rotateDegrees:()=>yA,spiral:()=>oA,spiralRaw:()=>mA,toCartesian:()=>Mi,toPoint:()=>bA,toString:()=>EA});var aA=Object.freeze({x:0,y:0}),v0=e=>!(e.distance===void 0||e.angleRadian===void 0),uA=(e,r)=>{e=Or(e,r);const n=Math.atan2(e.y,e.x);return Object.freeze({...e,angleRadian:n,distance:Math.sqrt(e.x*e.x+e.y*e.y)})},Mi=(e,r,n)=>{if(v0(e)){if(r===void 0&&(r=bn),Se(r))return rc(e.distance,e.angleRadian,r);throw new Error("Expecting (Coord, Point). Second parameter is not a point")}else{if(typeof e=="object")throw new Error(`First param is an object, but not a Coord: ${JSON.stringify(e)}`);if(typeof e=="number"&&typeof r=="number"){if(n===void 0&&(n=bn),!Se(n))throw new Error("Expecting (number, number, Point). Point param wrong type");return rc(e,r,n)}else throw new Error(`Expecting parameters of (number, number). Got: (${typeof e}, ${typeof r}, ${typeof n}). a: ${JSON.stringify(e)}`)}};function*oA(e,r){let n=0;for(;;){const i=e*n++;yield{distance:r*i,angleRadian:i,step:n}}}var sA=(e,r)=>Object.freeze({...e,angleRadian:e.angleRadian+r}),cA=e=>{if(e.distance===0)throw new Error("Cannot normalise vector of length 0");return Object.freeze({...e,distance:1})},Mt=(e,r="Point")=>{if(e===void 0)throw new Error(`'${r}' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e===null)throw new Error(`'${r}' is null. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e.angleRadian===void 0)throw new Error(`'${r}.angleRadian' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(e.distance===void 0)throw new Error(`'${r}.distance' is undefined. Expected {distance, angleRadian} got ${JSON.stringify(e)}`);if(typeof e.angleRadian!="number")throw new Error(`'${r}.angleRadian' must be a number. Got ${e.angleRadian}`);if(typeof e.distance!="number")throw new Error(`'${r}.distance' must be a number. Got ${e.distance}`);if(e.angleRadian===null)throw new Error(`'${r}.angleRadian' is null`);if(e.distance===null)throw new Error(`'${r}.distance' is null`);if(Number.isNaN(e.angleRadian))throw new Error(`'${r}.angleRadian' is NaN`);if(Number.isNaN(e.distance))throw new Error(`'${r}.distance' is NaN`)},lA=(e,r)=>(Mt(e,"a"),Mt(r,"b"),e.distance*r.distance*Math.cos(r.angleRadian-e.angleRadian)),fA=e=>(Mt(e,"c"),Object.freeze({...e,angleRadian:e.angleRadian-Math.PI})),hA=(e,r)=>(Mt(e,"a"),Mt(r,"b"),e.distance!==r.distance?!1:e.angleRadian===-r.angleRadian),dA=(e,r)=>(Mt(e,"a"),Mt(r,"b"),e.angleRadian===r.angleRadian),vA=(e,r)=>(Mt(e,"a"),Mt(r,"b"),e.angleRadian===-r.angleRadian),yA=(e,r)=>Object.freeze({...e,angleRadian:e.angleRadian+Mr(r)}),mA=(e,r,n)=>{const i=r*e;return Object.freeze({distance:n*i,angleRadian:i})},gA=(e,r)=>(Mt(e),ee(r,"","amt"),Object.freeze({...e,distance:e.distance*r})),pA=(e,r)=>(Mt(e),ee(r,"","amt"),Object.freeze({...e,distance:e.distance/r})),wA=(e,r=1,n=0)=>{let i=e.distance;return i>r&&(i=r),i<n&&(i=n),Object.freeze({...e,distance:i})},rc=(e,r,n=bn)=>(pe(n),Object.freeze({x:n.x+e*Math.cos(r),y:n.y+e*Math.sin(r)})),EA=(e,r)=>{if(e===void 0)return"(undefined)";if(e===null)return"(null)";const n=Na(e.angleRadian),i=r?e.distance.toFixed(r):e.distance,a=r?n.toFixed(r):n;return`(${i},${a})`},bA=(e,r=aA)=>(Mt(e,"v"),Object.freeze({x:r.x+e.distance*Math.cos(e.angleRadian),y:r.y+e.distance*Math.sin(e.angleRadian)})),DA=(e,r)=>{if(St.isCirclePositioned(e))return St.isIntersecting(e,r);if(me.isRectPositioned(e))return me.isIntersecting(e,r);throw new Error(`a or b are unknown shapes. a: ${JSON.stringify(e)} b: ${JSON.stringify(r)}`)},y0=(e,r={})=>{if(St.isCirclePositioned(e))return St.randomPoint(e,r);if(me.isRectPositioned(e))return me.randomPoint(e,r);throw new Error("Cannot create random point for unknown shape")},AA=e=>{if(e===void 0)return Object.freeze({x:.5,y:.5});if(me.isRect(e))return me.center(e);if(Hr.isTriangle(e))return Hr.centroid(e);if(St.isCircle(e))return St.center(e);throw new Error(`Unknown shape: ${JSON.stringify(e)}`)},CA=(e,r=5,n,i={x:0,y:0},a)=>{Le(r,"positive","points");const u=Math.PI*2/r,o=u/2,s=a?.initialAngleRadian??-Math.PI/2;n===void 0&&(n=e/2);let c=s;const l=[];for(let f=0;f<r;f++){const h=Mi(e,c,i),v=Mi(n,c-o,i),E=Mi(n,c+o,i);l.push(v,h),f+1<r&&l.push(E),c+=u}return l},FA=(e,r,n={})=>{const i=n.tailLength??10,a=n.tailThickness??Math.max(i/5,5),u=n.angleRadian??0,o=n.arrowSize??Math.max(i/5,15),s=Math.PI/2;let c,l;if(r==="tip")c=Hr.equilateralFromVertex(e,o,s),l=me.corners(me.fromTopLeft({x:c.a.x-i,y:e.y-a/2},i,a));else if(r==="middle"){const h=i+o/2,v=a/2;c=Hr.equilateralFromVertex({x:e.x+o*1.2,y:e.y},o,s),l=me.corners(me.fromTopLeft({x:e.x-h,y:e.y-v},i+o,a))}else l=me.corners(me.fromTopLeft({x:e.x,y:e.y-a/2},i,a)),c=Hr.equilateralFromVertex({x:e.x+i+o*.7,y:e.y},o,s);return O.rotate([l[0],l[1],c.a,c.b,c.c,l[2],l[3]],u,e)},Hi={};Z(Hi,{clampMagnitude:()=>NA,divide:()=>TA,dotProduct:()=>BA,fromLineCartesian:()=>MA,fromLinePolar:()=>IA,fromPointPolar:()=>m0,multiply:()=>kA,normalise:()=>_A,quadrantOffsetAngle:()=>PA,subtract:()=>WA,sum:()=>zA,toCartesian:()=>pr,toPolar:()=>hi,toString:()=>RA});var SA=Object.freeze({x:0,y:0}),Ii=Math.PI*2,Gi=Math.PI,m0=(e,r="",n=SA)=>{e=Or(e,n);let i=Math.atan2(e.y,e.x);return r==="unipolar"&&i<0?i+=Ii:r==="bipolar"&&(i>Gi?i-=Ii:i<=-Gi&&(i+=Ii)),Object.freeze({distance:Wt(e),angleRadian:i})},MA=e=>Or(e.b,e.a),IA=e=>{Ia(e,"line");const r=Or(e.b,e.a);return m0(r)},Vt=e=>!!Ge.isCoord(e),Qr=e=>!!Se(e),_A=e=>{if(Vt(e))return Ge.normalise(e);if(Qr(e))return t0(e);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},PA=e=>e.x>=0&&e.y>=0?0:e.x<0&&e.y>=0||e.x<0&&e.y<0?Gi:Ii,hi=(e,r=bn)=>{if(Vt(e))return e;if(Qr(e))return Ge.fromCartesian(e,r);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},pr=e=>{if(Vt(e))return Ge.toPoint(e);if(Qr(e))return e;throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},RA=(e,r)=>{if(Vt(e))return Ge.toString(e,r);if(Qr(e))return Kd(e,r);throw new Error(`Expected polar/cartesian vector. Got: ${e}`)},BA=(e,r)=>{if(Vt(e)&&Vt(r))return Ge.dotProduct(e,r);if(Qr(e)&&Qr(r))return xd(e,r);throw new Error("Expected two polar/Cartesian vectors.")},NA=(e,r=1,n=0)=>{if(Vt(e))return Ge.clampMagnitude(e,r,n);if(Qr(e))return r0(e,r,n);throw new Error("Expected either polar or Cartesian vector")},zA=(e,r)=>{const n=Vt(e);e=pr(e),r=pr(r);const i=Xd(e,r);return n?hi(i):i},WA=(e,r)=>{const n=Vt(e);e=pr(e),r=pr(r);const i=Or(e,r);return n?hi(i):i},kA=(e,r)=>{const n=Vt(e);e=pr(e),r=pr(r);const i=Ra(e,r);return n?hi(i):i},TA=(e,r)=>{const n=Vt(e);e=pr(e),r=pr(r);const i=Qd(e,r);return n?hi(i):i},g0={};Z(g0,{fromPoints:()=>OA,init:()=>p0});var OA=(e,r={})=>{const n=jd(...e);return p0(n.map(i=>dr(i)),r)},p0=(e,r={})=>{const n=r.maxDistanceFromLine??.1;return a=>{const o=e.map((c,l)=>{const f=c.nearest(a),h=Wt(a,f);return{path:c,index:l,nearest:f,distance:h}}).filter(c=>c.distance<=n);return Ht.sortByNumericProperty(o,"distance")}},$A={},w0={};Z(w0,{CirclePacking:()=>E0});var E0={};Z(E0,{random:()=>LA});var LA=(e,r,n={})=>{const i=n.attempts??2e3,a=Z0(e,"radius"),u=[],o=(s,c)=>u.some(l=>bl(l,s,c));for(;a.length;){const s=a.pop();if(!s)break;const c={...n,margin:{x:s.radius,y:s.radius}};for(let l=0;l<i;l++){const f=y0(r,c);if(!o(f,s.radius)){u.push(Object.freeze({...s,...f}));break}}}return u},Ki={};Z(Ki,{scaler:()=>jA});var jA=(e="both",r)=>{const n=r??mo;let i=1,a=1,u={x:1,y:1};const o=()=>{switch(e){case"height":return{x:a,y:a};case"width":return{x:i,y:i};case"min":return{x:Math.min(i,a),y:Math.min(i,a)};case"max":return{x:Math.max(i,a),y:Math.max(i,a)};default:return{x:i,y:a}}},s=(h,v,E,R)=>{let L=Number.NaN,N=Number.NaN,F=n.width,C=n.height;if(typeof h=="number")if(L=h,typeof v=="number"){if(N=v,E===void 0)return[L,N,F,C];if(Sr(E))F=E.width,C=E.height;else if(typeof E=="number")if(F=E,typeof R=="number")C=R;else throw new Error("Missing final height value");else throw new Error("Missing valid output range")}else if(Sr(v))F=v.width,C=v.height;else throw new Error("Expected input y or output Rect to follow first number parameter");else if(Se(h)){if(L=h.x,N=h.y,v===void 0)return[L,N,F,C];if(Sr(v))F=v.width,C=v.height;else if(typeof v=="number")if(F=v,typeof E=="number")C=E;else throw new Error("Expected height as third parameter after Point and output width");else throw new Error("Expected Rect or width as second parameter when first parameter is a Point")}else throw new Error("Expected input Point or x value as first parameter");return[L,N,F,C]},c=(h,v,E,R)=>{const L=s(h,v,E,R);return f(!0,...L)},l=(h,v,E,R)=>{const L=s(h,v,E,R);return f(!1,...L)},f=(h,v,E,R,L)=>{if(Number.isNaN(R))throw new Error("Output width range missing");if(Number.isNaN(L))throw new Error("Output height range missing");return(R!==i||L!==a)&&(i=R,a=L,u=o()),h?{x:v*u.x,y:E*u.y}:{x:v/u.x,y:E/u.y}};return{rel:l,abs:c}},b0={};Z(b0,{boxBlurKernel:()=>HA,convolve:()=>A0,convolveCell:()=>D0,convolveImage:()=>qA,edgeDetectionKernel:()=>xA,gaussianBlur3Kernel:()=>GA,gaussianBlur5Kernel:()=>KA,identityKernel:()=>UA,kernel2dToArray:()=>C0,multiply:()=>di,rgbReducer:()=>F0,sharpenKernel:()=>VA,unsharpMasking5Kernel:()=>JA});var di=(e,r)=>{const n=e.length,i=e[0].length,a=[];for(let u=0;u<n;u++){a[u]=[];for(let o=0;o<i;o++)a[u][o]=e[u][o]*r}return a};function D0(e,r,n,i,a){const u=r.map(o=>{const s=Sn(n,e,o[0],"stop");return s?[o[1],i(s,"undefined")]:[o[1],void 0]});return a(u)}function*qA(e,r){const n={rows:r.width,cols:r.height},i=ts.accessor(r);yield*A0(e,n,i,Mn(n),F0)}function*A0(e,r,n,i,a,u){if(!u){const s=e.length,c=e[0].length;u={x:Math.floor(s/2),y:Math.floor(c/2)}}const o=C0(e,u);for(const s of i){const c=D0(s,o,r,n,a);yield[s,c]}}var C0=(e,r)=>{const n=[],i=e.length,a=e[0].length;r||(r={x:Math.floor(i/2),y:Math.floor(a/2)});for(let u=0;u<i;u++)for(let o=0;o<a;o++)n.push([{x:u-r.x,y:o-r.y},e[u][o]]);return n},F0=e=>{let r=0,n=0,i=0;for(let u=0;u<e.length;u++){const o=e[u][1],s=e[u][0];o!==void 0&&o.opacity!==0&&s!==0&&(r+=o.r*s,n+=o.g*s,i+=o.b*s)}return{r,g:n,b:i,opacity:255}},UA=[[0,0,0],[0,1,0],[0,0,0]],xA=[[0,-1,0],[-1,4,-1],[0,-1,0]],VA=[[0,-1,0],[-1,5,-1],[0,-1,0]],HA=di([[1,1,1],[1,1,1],[1,1,1]],1/9),GA=di([[1,2,1],[2,4,2],[1,2,1]],1/16),KA=di([[1,4,6,4,1],[4,16,24,16,4],[6,24,36,24,6],[4,16,24,16,4],[1,4,6,4,1]],1/256),JA=di([[1,4,6,4,1],[4,16,24,16,4],[6,24,-476,24,6],[4,16,24,16,4],[1,4,6,4,1]],-1/256),S0={};Z(S0,{circleRings:()=>rC,circleVogelSpiral:()=>tC,sphereFibonacci:()=>nC});var vs=Math.cos,ys=Math.sin,YA=Math.asin,ms=Math.sqrt,ZA=Math.pow,gs=Math.PI,XA=Math.PI*2,QA=gs*(3-ms(5)),eC=(1+ms(5))/2;function*tC(e,r={}){const n=r.maxPoints??5e3,i=r.density??.95,a=r.rotation??0,u=yo(e??{radius:1,x:0,y:0}),o=u.radius;let s=u.radius*er(i,0,1,.3,.01);r.spacing&&(s=r.spacing);let c=0,l=0,f=0;for(;l<n&&c<o;)c=s*l**.5,f=a+l*2*gs/eC,yield Object.freeze({x:u.x+c*vs(f),y:u.y+c*ys(f)}),l++}function*rC(e,r={}){const n=r.rings??5,i=yo(e??{radius:1,x:0,y:0}),a=1/n,u=r.rotation??0;let o=1;yield Object.freeze({x:i.x,y:i.y});for(let s=a;s<=1;s+=a){const c=Math.round(gs/YA(1/(2*o)));for(const l of jl(0,XA,c+1))yield Object.freeze({x:i.x+s*vs(l+u)*i.radius,y:i.y+s*ys(l+u)*i.radius});o++}}function*nC(e=100,r=0,n){const i=2/e,a=n??{x:0,y:0,z:0,radius:1};for(let u=0;u<e;u++){const o=u*i-1+i/2,s=ms(1-ZA(o,2)),c=(u+1)%e*QA+r,l=vs(c)*s,f=ys(c)*s;yield Object.freeze({x:a.x+l*a.radius,y:a.y+o*a.radius,z:a.z+f*a.radius})}}function Mr(e){return Array.isArray(e)?e.map(r=>r*(Math.PI/180)):e*(Math.PI/180)}function Na(e){return Array.isArray(e)?e.map(r=>r*180/Math.PI):e*180/Math.PI}var M0=e=>Math.atan2(e.x,e.y);try{typeof window<"u"&&(window.ixfx={...window.ixfx,Geometry:{Circles:St,Arcs:Gu,Lines:Je,Rects:me,Points:O,Paths:sn,Grids:rs,Beziers:ai,Compound:hs,Ellipses:Bo,Polar:Ge,Shapes:Ba,radiansFromAxisX:M0,radianToDegree:Na,degreeToRadian:Mr}})}catch{}var I0=(e=>(e[e.Nw=0]="Nw",e[e.Ne=1]="Ne",e[e.Sw=2]="Sw",e[e.Se=3]="Se",e))(I0||{}),iC=class _0{constructor(r,n,i,a){this.boundary=n,this.level=i,this.opts=a,this.#r=r}#e=[];#t=[];#r;getLengthChildren(){return this.#t.length}*parents(){let r=this;for(;r.#r!==void 0;)yield r.#r,r=r.#r}*children(){for(const r of this.#t)yield r}direction(r){return this.#t[r]}add(r){return Ba.isIntersecting(this.boundary,r)?this.#t.length?(this.#t.forEach(n=>n.add(r)),!0):(this.#e.push(r),this.#e.length>this.opts.maxItems&&this.level<this.opts.maxLevels&&(this.#t.length||this.#n(),this.#e.forEach(n=>{this.#t.forEach(i=>i.add(n))}),this.#e=[]),!0):!1}couldHold(r){return me.intersectsPoint(this.boundary,r)}#n(){const r=this.boundary.width/2,n=this.boundary.height/2,i=this.boundary.x,a=this.boundary.y,o=O.fromNumbers(i+r,a,i,a,i,a+n,i+r,a+n).map(s=>me.fromTopLeft(s,r,n));this.#t=o.map(s=>new _0(this,s,this.level+1,this.opts))}},P0=class R0{value;label;#e;#t;constructor(r,n){this.value=r,this.label=n,this.#e=[]}getLengthChildren(){return this.#e.length}hasChild=r=>Wa(this,r);hasAnyChild=r=>Ji(this,r);hasParent=r=>ws(this,r);hasAnyParent=r=>W0(this,r);getByPath=(r,n={})=>{const i=N0(r,this,n);if(!!i[1])return i[1]};addValueByPath(r,n,i={}){const a=i.separator??".",u=n.split(a);u.at(-1);let o=this;for(const s of u){const c=o?.findChild(s);if(!c&&o){const l=new R0(void 0,s);o.add(l),o=l}else c&&(o=c)}o&&(o.value=r)}add(r){$u(this,r),this.#e=[...this.#e,r],r.#t&&r.#t.remove(r),r.#t=this}remove(r){if(r.#t!==this)throw new Error("child.parent doesn't match");const n=Cs(this.#e,r);if(n.length===this.#e.length)throw new Error("child not found in descendants");this.#e=n}setDescendants(r){for(const n of this.#e)n.#t=void 0;for(const n of r)$u(this,n),n.#t=this;this.#e=r}prettyPrint(r=0){const n=`${"  ".repeat(r)} + label: ${this.label} value: ${this.value?JSON.stringify(this.value):"-"}`;return this.#e.length?n+`
`+this.#e.map(i=>i.prettyPrint(r+1)).join(`
`):n}*parents(){let r=this;for(;r.#t!==void 0;)yield r.#t,r=r.#t}*children(){for(const r of this.#e)yield r}findChild(r){if(r===void 0)throw new Error("label param cannot be undefined");for(const n of this.#e)if(n.label===r)return n}get isRoot(){return this.#t===void 0}get isEmpty(){return this.#e.length===0}},aC=(e,r)=>new P0(e,r);function ps(e){return!(typeof e.children>"u"||typeof e.parents>"u")}var uC=e=>ps(e)&&typeof e.getLengthChildren<"u"?e.getLengthChildren():[...In(e)].length,B0=(e,r=0,n="root")=>{const i=za(e,n),a=`${"  ".repeat(r)} + label: ${i[0]} value: ${JSON.stringify(i[1])}`,u=[...In(e,n)];return u.length?a+`
`+u.map(o=>B0(o[1],r+1,o[0])).join(`
`):a};function*In(e,r){if(Array.isArray(e)){r||(r="array");for(let n=0;n<e.length;n++)yield[r+"["+n.toString()+"]",e[n]]}else if(ps(e))for(const n of e.children())yield za(n);else typeof e=="object"&&("entries"in e&&(yield*e.entries()),yield*Object.entries(e))}function nc(e,r){for(const n of In(r))if(n[0]===e)return n}function N0(e,r,n={}){const i=af(z0(e,r,n));if(!i)throw new Error(`Could not trace path: ${e}`);return i}function*z0(e,r,n={}){const i=n.separator??".",a=n.allowArrayIndexes??!0,u=e.split(i);for(const o of u){let s=nc(o,r);if(a){const[c,l]=sv(o,"[","]"),f=Hv(l,"positive",-1);f>=0&&(s=nc(c,r),s&&Array.isArray(s[1])&&(s=[o,s[1][f]]))}if(!s){yield[o,void 0];return}r=s[1],yield s}}function za(e,r=""){return"label"in e?[e.label,e]:[r,e]}function*oC(e){if(!e)return;const r=new Hu;r.push(za(e,"root"));let n=r.pop();for(;n&&(yield n,n&&r.push(...In(n[1],n[0])),!r.isEmpty);)n=r.pop()}function*sC(e){if(!e)return;const r=new Ir;r.enqueue(za(e,"root"));let n=r.dequeue();for(;n&&(yield n,n&&r.enqueue(...In(n[1],n[0])),!r.isEmpty);)n=r.dequeue()}var Ji=(e,r,n=We)=>Wa(e,r,Number.MAX_SAFE_INTEGER,n),Wa=(e,r,n=0,i=We)=>{if(n<0)return!1;for(const a of e.children())if(i(a,r)||Wa(a,r,n-1))return!0;return!1},ws=(e,r,n=0,i=We)=>{for(const a of e.parents()){if(i(a,r))return!0;if(n--,n<0)break}return!1},W0=(e,r,n=We)=>ws(e,r,Number.MAX_SAFE_INTEGER,n),$u=(e,r,n=We)=>{if(n(e,r))throw new Error("Child equals parent");if(Ji(e,r,n))throw new Error("Circular. Parent already has child");if(Ji(r,e,n))throw new Error("Prospective child has parent as child relation")},k0={};Z(k0,{immutable:()=>FE,mutable:()=>Ty});var cC=(e,r)=>{const n=new Map(e.entries());return r.forEach(i=>{if(i[0]===void 0)throw new Error("key cannot be undefined");if(i[1]===void 0)throw new Error("value cannot be undefined");n.set(i[0],i[1])}),n},lC=(e,r)=>{const n=new Map(e.entries());return r.forEach(i=>{if(i.key===void 0)throw new Error("key cannot be undefined");if(i.value===void 0)throw new Error("value cannot be undefined");n.set(i.key,i.value)}),n},fC=(e,r)=>e.has(r),jn=(e,...r)=>{if(e===void 0)throw new Error("map parameter is undefined");if(r===void 0)throw new Error("data parameter i.s undefined");if(r.length===0)return e;const n=r[0];return typeof n.key<"u"&&typeof n.value<"u"?lC(e,r):cC(e,r)},T0=(e,r,n)=>{const i=new Map(e.entries());return i.set(r,n),i},O0=(e,r)=>{const n=new Map(e.entries());return n.delete(r),n},Ur=e=>{if(e===void 0)return Ur([]);if(Array.isArray(e))return Ur(jn(new Map,...e));const r=e;return{add:(...n)=>{const i=jn(r,...n);return Ur(i)},set:(n,i)=>{const a=T0(r,n,i);return Ur(a)},get:n=>r.get(n),delete:n=>Ur(O0(r,n)),clear:()=>Ur(),has:n=>r.has(n),entries:()=>r.entries(),isEmpty:()=>r.size===0}},hC=(...e)=>{let r=jn(new Map,...e);return{add:(...n)=>{r=jn(r,...n)},delete:n=>{r=O0(r,n)},clear:()=>{r=jn(new Map)},set:(n,i)=>{r=T0(r,n,i)},get:n=>r.get(n),entries:()=>r.entries(),isEmpty:()=>r.size===0,has:n=>fC(r,n)}},ka=class extends rr{#e=new Map;groupBy;type;constructor(e,r={}){super();this.type=e,this.groupBy=r.groupBy??wr}get typeName(){return this.type.name}get lengthMax(){let e=0;for(const r of this.#e.values())e=Math.max(e,this.type.count(r));return e}debugString(){const e=Array.from(this.#e.keys());let r=`Keys: ${e.join(", ")}\r
`;return e.forEach(n=>{const i=this.#e.get(n);if(i!==void 0){const a=this.type.toArray(i);a!==void 0&&(r+=` - ${n} (${this.type.count(i)}) = ${JSON.stringify(a)}\r
`)}else r+=` - ${n} (undefined)\r
`}),r}get isEmpty(){return this.#e.size===0}clear(){this.#e.clear(),super.fireEvent("clear",!0)}addKeyedValues(e,...r){const n=this.#e.get(e);n===void 0?(this.#e.set(e,this.type.add(void 0,r)),super.fireEvent("addedKey",{key:e}),super.fireEvent("addedValues",{values:r})):(this.#e.set(e,this.type.add(n,r)),super.fireEvent("addedValues",{values:r}))}set(e,r){return this.addKeyedValues(e,...r),this}addValue(...e){e.forEach(r=>this.addKeyedValues(this.groupBy(r),r))}hasKeyValue(e,r,n){const i=this.#e.get(e);return i===void 0?!1:this.type.has(i,r,n)}has(e){return this.#e.has(e)}deleteKeyValue(e,r){const n=this.#e.get(e);return n===void 0?!1:this.deleteKeyValueFromMap(n,e,r)}deleteKeyValueFromMap(e,r,n){const i=this.type.count(e),a=this.type.without(e,n),u=a.length;return this.#e.set(r,this.type.add(void 0,a)),i>u}deleteByValue(e){let r=!1;return Array.from(this.#e.keys()).filter(n=>{const i=this.#e.get(n);if(!i)throw Error("Bug: map could not be accessed");this.deleteKeyValueFromMap(i,n,e)&&(r=!0,this.count(n)===0&&this.delete(n))}),r}delete(e){return this.#e.get(e)===void 0?!1:(this.#e.delete(e),this.fireEvent("deleteKey",{key:e}),!0)}firstKeyByValue(e,r=We){return Array.from(this.#e.keys()).find(a=>{const u=this.#e.get(a);if(u===void 0)throw Error("Bug: map could not be accessed");return this.type.has(u,e,r)})}count(e){const r=this.#e.get(e);return r===void 0?0:this.type.count(r)}*get(e){const r=this.#e.get(e);r!==void 0&&(yield*this.type.iterable(r))}*valuesFor(e){const r=this.#e.get(e);r!==void 0&&(yield*this.type.iterable(r))}getSource(e){return this.#e.get(e)}*keys(){yield*this.#e.keys()}*entriesFlat(){for(const e of this.#e.entries())for(const r of this.type.iterable(e[1]))yield[e[0],r]}*valuesFlat(){for(const e of this.#e.entries())yield*this.type.iterable(e[1])}*entries(){for(const[e,r]of this.#e.entries()){const n=[...this.type.iterable(r)];yield[e,n]}}*keysAndCounts(){for(const e of this.keys())yield[e,this.count(e)]}merge(e){for(const r of e.keys()){const n=e.get(r);this.addKeyedValues(r,...n)}}get size(){return this.#e.size}forEach(e,r){this.#e.forEach(e)}get[Symbol.toStringTag](){return this.#e[Symbol.toStringTag]}},dC=e=>{const r=e?.hash??wr,n=(u,o)=>r(u)===r(o),i={get name(){return"set"},iterable:u=>u.values(),add:(u,o)=>Sc(u,r,...o),count:u=>u.size,find:(u,o)=>Rc(u,o),filter:(u,o)=>_c(u,o),toArray:u=>su(u),has:(u,o)=>Ic(u,o,n),without:(u,o)=>Cs(su(u),o,n)};return new ka(i,e)},$0=e=>{const r=We,n={get name(){return"circular"},add:(i,a)=>{i===void 0&&(i=zc(e.capacity));for(const u of a)i=i.add(u);return i},count:i=>i.length,find:(i,a)=>i.find(a),filter:(i,a)=>i.filter(a),toArray:i=>i,iterable:i=>i.values(),has:(i,a)=>i.find(u=>r(u,a))!==void 0,without:(i,a)=>i.filter(u=>!r(u,a))};return new ka(n,e)},L0=(e={})=>{const r=e.comparer===void 0?e.toString===void 0?(a,u)=>e.toString(a)===e.toString(u):We:e.comparer,n={get name(){return"array"},add:(a,u)=>a===void 0?[...u]:[...a,...u],iterable:a=>a.values(),count:a=>a.length,find:(a,u)=>a.find(u),filter:(a,u)=>a.filter(u),toArray:a=>a,has:(a,u)=>a.find(o=>r(o,u))!==void 0,without:(a,u)=>a.filter(o=>!r(o,u))};return new ka(n,e)},Es=(e,r={})=>{if(e===void 0||typeof e=="boolean"&&!e)return a=>{};const n=r.category??"",i=r.kind??void 0;return typeof e=="boolean"?a=>{const u=typeof a=="string"?{msg:a}:a,o=u.kind??i,s=u.category??n;let c=u.msg;switch(s&&(c=`[${s}] ${c}`),o){case"error":{console.error(c);break}case"warn":{console.warn(c);break}case"info":{console.info(c);break}default:console.log(c)}}:e},vC=0,yC=Fc(new Map,()=>zf(++vC)),j0=(e,r=!0,n)=>r?{log:an(e,"log",n),warn:an(e,"warn",n),error:an(e,"error",n)}:{log:i=>{},warn:an(e,"warn",n),error:an(e,"error",n)},an=(e,r="log",n)=>i=>{i===void 0?i="(undefined)":typeof i=="object"&&(i=JSON.stringify(i));const a=n??e;switch(r){case"log":{console.log(`%c${e} ${i}`,`color: ${yC(a)}`);break}case"warn":{console.warn(e,i);break}case"error":{console.error(e,i);break}}},q0=e=>typeof e=="string"?e:e instanceof Error?e.message:e,Lu=(e,r)=>{if(Number.isNaN(e))return r;if(typeof e!="number")throw new TypeError(`v is not a number. Got: ${typeof e}`);return e},mC=(e,r)=>{const i=Object.entries(e).map(([a,u],o)=>[a,r(u,a,o)]);return Object.fromEntries(i)},U0=e=>Math.log2(e)%1===0,gC=e=>r=>r/e,bs=(e,r="")=>{if(e===null)throw new Error("Parameter 'o' is null");if(typeof e!="object")throw new TypeError(`Parameter 'o' is not an object. Got: ${typeof e}`);if(r.length===0)return e;if(r in e)return e[r];{const n=lv(r,".");return n in e?bs(e[n],r.slice(Math.max(0,n.length+1))):void 0}},x0=e=>{if(e===null)return[];if(typeof e!="object")throw new TypeError(`Parameter 'o' should be an object. Got: ${typeof e}`);const r=(n,i,a)=>{if(typeof n!="object")return[...i,a];const u=a.length>0?a+".":a;return[...Object.keys(n).map(s=>r(n[s],[],u+s)),i].flat()};return r(e,[],"")},V0=(e,r)=>(be(Ce(e,"nonZero","v")),be(Ce(r,"nonZero","multiple")),Math.ceil(e/r)*r),We=(e,r)=>e===r,H0=(e,r)=>e===r?!0:wr(e)===wr(r),wr=e=>typeof e=="string"?e:JSON.stringify(e),pC=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,G0=(e,r)=>e===r?0:e>r?1:-1,K0=(e,r)=>{if(e===void 0&&r===void 0)return 0;if(e===void 0)return 1;if(r===void 0)return-1;const n=ic(e),i=ic(r);return n<i?-1:n>i?1:0},vi=(e,r)=>typeof e=="number"&&typeof r=="number"?G0(e,r):K0(e,r),wC=e=>(r,n)=>e(r,n)*-1,yi=e=>typeof e=="string"?e:JSON.stringify(e),ic=e=>{if(e===null)return"null";if(typeof e=="boolean"||typeof e=="number")return e.toString();if(typeof e=="string")return e;if(typeof e=="symbol")throw new TypeError("Symbol cannot be converted to string");return JSON.stringify(e)},_n=(e,r="?")=>{if(e===void 0)throw new Error(`Param '${r}' is undefined. Expected array.`);if(e===null)throw new Error(`Param '${r}' is null. Expected array.`);if(!Array.isArray(e))throw new Error(`Param '${r}' not an array as expected`)},Yi=(e,r,n="index")=>{if(_n(e),Le(r,"positive",n),r>e.length-1)throw new Error(`'${n}' ${r} beyond array max of ${e.length-1}`)},Ds=(e,r)=>{if(!Array.isArray(e))throw new Error("Param 'array' is not an array.");if(e.length===0)return!0;const n=r===void 0?H0:r,i=e[0];return!e.some(u=>!n(i,u))},EC=(e,r,n=We)=>e.filter(i=>r.some(a=>n(i,a))),bC=e=>Array.prototype.concat.apply([],[...e]),J0=(...e)=>{if(e.some(a=>!Array.isArray(a)))throw new Error("All parameters must be an array");const r=e.map(a=>a.length);if(!Ds(r))throw new Error("Arrays must be of same length");const n=[],i=r[0];for(let a=0;a<i;a++)n.push(e.map(u=>u[a]));return n},DC=(...e)=>{if(e.some(a=>!Array.isArray(a)))throw new Error("All parameters must be an array");const r=e.map(a=>a.length);if(!Ds(r))throw new Error("Arrays must be of same length");const n=[],i=r[0];for(let a=0;a<i;a++)for(let u=0;u<e.length;u++)n.push(e[u][a]);return n},AC=(e,r,n="undefined")=>{if(e===void 0)throw new Error("Data undefined");if(!Array.isArray(e))throw new Error("data is not an array");if(e.length===r)return[...e];if(e.length>r)return e.slice(0,r);const i=[...e],a=r-i.length;for(let u=0;u<a;u++)n==="undefined"?i.push(void 0):n==="repeat"?i.push(e[u%e.length]):n==="first"?i.push(e[0]):n==="last"&&i.push(e[e.length-1]);return i},Y0=(e,r,n,i)=>{_n(e),typeof n>"u"&&(n=0),typeof i>"u"&&(i=e.length),Yi(e,n,"startIndex"),Yi(e,i-1,"endIndex");const a=[];for(let u=n;u<i;u++)r(e[u],u,e)&&a.push(e[u]);return a},As=(e,r=Xe)=>Math.floor(r()*e.length),Ta=(e,r=Xe)=>(_n(e,"array"),e[Math.floor(r()*e.length)]),CC=(e,r=!1,n=Xe)=>{if(e===void 0)throw new Error("array is undefined");if(!Array.isArray(e))throw new Error("'array' param is not an array");if(e.length===0)return{value:void 0,array:[]};const i=As(e,n);if(r)return{value:e[i],array:e.splice(i,1)};{const a=[...e];return a.splice(i,1),{value:e[i],array:a}}},Zi=(e,r=Xe)=>{const n=[...e];for(let i=n.length-1;i>0;i--){const a=Math.floor(r()*(i+1));[n[i],n[a]]=[n[a],n[i]]}return n},Z0=(e,r)=>[...e].sort((n,i)=>{_n(e,"data");const a=n[r],u=i[r];return a<u?-1:a>u?1:0}),Cs=(e,r,n=We)=>e.filter(i=>!n(i,r)),FC=(e,r,n)=>{const i=[];let a=n;for(let u=0;u<e.length;u++){const[o,s]=r(e[u],a);if(o)break;a=s,i.push(e[u])}return i},SC=(e,r)=>{if(!Array.isArray(e))throw new Error("'data' parameter should be an array");return Yi(e,r,"index"),[...e.slice(0,r),...e.slice(r+1)]},MC=(e,r)=>{const n=new Map;for(const i of e){const a=r(i);let u=n.get(a);u||(u=[],n.set(a,u)),u.push(i)}return n},IC=(e,r)=>{let n=1;if(r<=1){const a=e.length*r;n=Math.round(e.length/a)}else n=r;if(Le(n,"positive","amount"),n>e.length-1)throw new Error("Subsample steps exceeds array length");const i=[];for(let a=n-1;a<e.length;a+=n)i.push(e[a]);return i};function _C(e,r){const n=[];for(let i=0;i<e.length;i+=r)n.push(e.slice(i,i+r));return n}var PC=(e,r,...n)=>{const i=new Map;for(const a of n)for(const u of a){if(u===void 0)continue;const o=e(u);let s=i.get(o);s?s=r(s,u):s=u,i.set(o,s)}return[...i.values()]},RC=(e,r,n)=>{if(_n(e,"arr"),e.length<2)return n;for(let i=0;i<e.length-1;i++)n=r(n,e[i],e[i+1]);return n},BC=(e,r)=>{const n=[],i=[];for(let a=0;a<e.length;a++)r(e[a])?n.push(e[a]):i.push(e[a]);return[n,i]},X0=(e,r=We)=>{const n=[];for(let i=0;i<e.length;i++){const a=e[i];if(Array.isArray(a))for(const u of ju(n,a,r))n.push(u);else return[...ju([],e,r)]}return n},NC=(e,r=wr)=>{if(!Array.isArray(e))throw new Error("Parameter needs to be an array");try{const n=Pc(e,r)}catch{return!0}return!1},Q0=(e,r,n=We)=>{const i=[],a=[],u=[];for(let o=0;o<e.length;o++){let s=!1;for(let c=0;c<r.length;c++)if(n(e[o],r[c])){s=!0;break}s?i.push(e[o]):a.push(e[o])}for(let o=0;o<r.length;o++){let s=!1;for(let c=0;c<e.length;c++)n(r[o],e[c])&&(s=!0);s||u.push(r[o])}return{shared:i,a,b:u}},zC=(e,r,n=We)=>{const i=Q0(e,r,n);return i.a.length===0&&i.b.length===0},WC=(e,r,n=We)=>{if(!Array.isArray(e))throw new Error("Expects haystack parameter to be an array");if(!Array.isArray(r))throw new Error("Expects needles parameter to be an array");for(let i=0;i<r.length;i++){let a=!1;for(let u=0;u<e.length;u++)if(n(r[i],e[u])){a=!0;break}if(!a)return!1}return!0};function*ju(e,r,n=We){const i=[];for(const a of r)e.find(o=>n(o,a))||i.find(s=>n(s,a))||(i.push(a),yield a)}var Xe=Math.random,ev=(e="quadIn")=>{const r=typeof e=="string"?{easing:e}:e,n=r.source??Xe,i=r.easing??"quadIn",a=Sa(i);if(a===void 0)throw new Error(`Easing function '${i}' not found.`);return()=>{const o=n();return a(o)}},kC=(e="quadIn")=>ev(e)(),tv=e=>{const r=typeof e=="number"?{max:e}:e,n=r.source??Xe,i=r.max,a=r.min??0,u=r.easing??"quadIn";if(typeof i>"u")throw new Error("max field is undefined");if(typeof u!="string")throw new TypeError("easing field expected to be string");be(Ce(i));const o=Sa(u);if(o===void 0)throw new Error(`Easing '${u}' not found`);if(be(Ce(a)),i<=a)throw new Error("Max should be greater than min");return()=>{const c=zt(o(n()));return Math.floor(c*(i-a))+a}},TC=e=>tv(e)(),OC=(e=1)=>rv(e)(),rv=(e=1)=>{const i=()=>{const a=ac(),u=ac();let o=Math.sqrt(-2*Math.log(a))*Math.cos(2*Math.PI*u);return o=o/10+.5,o>1||o<0?o=i():(o=Math.pow(o,e),o*=1,o+=0),o};return i},ac=(e=Xe)=>{let r=0;for(;r===0;)r=e();return r},Fs=e=>{if(typeof e>"u")throw new TypeError("maxOrOpts is undefined");const r=typeof e=="number"?{max:e}:e;let n=Math.floor(r.max),i=Math.floor(r.min??0);!r.min&&n<0&&(n=1,i=r.max);const a=r.source??Xe;if(i>n)throw new Error(`Min value is greater than max (min: ${i} max: ${n})`);if(be(Ce(i,"","min")),be(Ce(n,"","max")),n===i)throw new Error(`Max and min values cannot be the same (${n})`);const u=Math.abs(n-i);return()=>Math.floor(a()*u)+i},nv=e=>Fs(e)(),Ss=(e=1)=>{const r=typeof e=="number"?{max:e}:e;let n=r.max,i=r.min??0;const a=r.source??Xe;if(be(Ce(i,"","min")),be(Ce(n,"","max")),!r.min&&n<0&&(i=n,n=0),i>n)throw new Error(`Min is greater than max. Min: ${i} max: ${n}`);return()=>a()*(n-i)+i},iv=(e=1)=>Ss(e)(),Ms=(e=5)=>((typeof e=="number"?{length:e}:e).source??Xe)().toString(36).slice(2,length+2),$C=(e={})=>{const r=e.source??Xe,n=Math.trunc(r()*46656),i=Math.trunc(r()*46656),a=`000${n.toString(36)}`.slice(-3),u=`000${i.toString(36)}`.slice(-3);return a+u},av=e=>{const r=typeof e=="number"?{max:e}:e,n=(r.min??0)*60*1e3,i=r.max*60*1e3;return Fs({...r,max:i,min:n})},LC=e=>av(e)(),uv=e=>{const r=typeof e=="number"?{max:e}:e,n=(r.min??0)*1e3,i=r.max*1e3;return()=>nv({...r,max:i,min:n})},jC=e=>uv(e)();function*ov(e){const r=typeof e=="number"?{max:e}:e,n=r.min??0,i=r.max,a=r.source??Xe,u=r.loop??!1;if(be(_r(n,"","min")),be(_r(i,"","max")),n>i)throw new Error(`Min value is greater than max. Min: ${n} Max: ${i}`);const o=[...uf(n,i-n)];let s=Zi(o),c=0;for(;;){if(c===s.length)if(u)s=Zi(o,a);else return;yield s[c++]}}var qC=(e,r,n,i=!0)=>{const a=e.indexOf(r);if(a<0)return;n===void 0&&(n=r);const u=i?e.lastIndexOf(n):e.indexOf(n,a+1);if(!(u<0))return e.slice(a+1,u)},sv=(e,r,n,i=!0)=>{const a=e.indexOf(r);if(a<0)return[e,void 0];n===void 0&&(n=r);const u=i?e.lastIndexOf(n):e.indexOf(n,a+1);if(u<0)return[e,void 0];const o=e.slice(a+1,u);return[e.slice(0,a)+e.slice(u+1),o]},Xn=(e,r,n=0,i=e.length-1)=>{for(let a=n;a<=i;a++)if(e.codePointAt(a)===r)return a;return-1},Qn=(e,r,n)=>e.slice(0,r)+e.slice(r+n),cv=(e,r)=>{if(be(_r(r,"aboveZero","length")),e===null)throw new Error("source parameter null");if(typeof e!="string")throw new TypeError("source parameter not a string");const n=Math.ceil(e.length/r),i=[];let a=0;for(let u=0;u<n;u++)i.push(e.slice(a,a+r)),a+=r;return i},lv=(e,r,n={})=>{const i=n.startPos??void 0,u=n.fromEnd??!1?e.lastIndexOf(r,i):e.indexOf(r,i);return u<0?e:e.slice(i??0,u)},fv=(e,r,n={})=>{if(e===void 0)throw new Error("source is undefined");const i=n.startPos??void 0,u=n.fromEnd??!1?e.lastIndexOf(r,i):e.indexOf(r,i);return u<0?e:e.slice(Math.max(0,u+r.length))},UC=(e,...r)=>{let n=!1;do{n=!1;for(const i of r)e.startsWith(i)&&e.endsWith(i)&&(e=e.slice(i.length,e.length-i.length*2+1),n=!0)}while(n);return e},xC=(e,r,n)=>{let i=-1,a=-1;for(const[u,o]of e.entries())if(i=u,o.text.length!==0&&r<o.end)break;for(let u=i;u<e.length;u++){const o=e[u];if(a=u,n===o.end){a=u+1;break}if(n<o.end)break}return{length:a-i,start:i,end:a}},VC=(e,r)=>{let n=0,i="";const a=[];let u=0;for(let o=0;o<e.length;o++)if(e.indexOf(r,o)===o){const s=o;a.push({text:i,start:n,end:s,index:u}),n=s+1,i="",u++}else i+=e.charAt(o);return n<e.length&&a.push({text:i,start:n,index:u,end:e.length}),a},HC=(e,...r)=>{let n=0;for(let i=0;i<e.length&&r.includes(e.charAt(i));i++)n++;return n},GC=(e,r,n=r)=>e.startsWith(r)&&e.endsWith(n),KC=e=>e.replaceAll(/[&<>\u00A0-\u9999]/g,r=>`&#${r.codePointAt(0)};`);/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/export{Qi as $,Ht as A,ai as B,ci as C,oi as D,Ku as E,Qh as F,np as G,St as H,Wh as I,Mr as J,gE as K,Je as L,pE as M,jc as N,Eo as O,Yo as P,sc as Q,k0 as R,ji as S,JC as T,Vc as U,Hi as V,Kb as W,Jv as X,jb as Y,Lb as Z,YC as _,fo as a,es as b,bE as c,hl as d,om as e,Er as f,ro as g,Yy as h,kC as i,Ol as j,OC as k,Zh as l,uo as m,Bo as n,rs as o,jE as p,O as q,je as r,Na as s,EE as t,lv as u,rd as v,TC as w,Ge as x,Gu as y,Go as z};
