import{h as b,j as p}from"./chunk-5WNVOIIJ.b9e34901.js";import"./chunk-YFNN25WV.1363eb0c.js";import"./chunk-UWLZSNHO.00e5f090.js";import"./chunk-6JTGCZJL.784fcc38.js";import{F as a}from"./chunk-MBZ4GFG7.8e6d603a.js";import{r as h}from"./chunk-V6WGO73W.4b0edf4f.js";import{P as v,C as w,a as k}from"./chunk-3SMTKDXD.7befeba5.js";import"./chunk-FRVUOYS5.3d3ad9f9.js";import{h as j,m as D,i as F}from"./vendor.1de7a7ed.js";const o=document.getElementById("envDataLog"),g=v.create();g.add("series-",w.getCssVariable("accent-bold","yellow"));const n=k.plot("#envData",{capacity:300,showYAxis:!0,palette:g,lineWidth:3,autoSizeCanvas:!0});let l=!1,c={...b(),attackBend:1,decayBend:-1,releaseBend:1},t=p({...c,shouldLoop:l});t.addEventListener("change",e=>{a.button("#btnRelease").disabled=e.newState!=="sustain"});a.button("#btnTriggerHold",()=>{o.clear(),t.trigger(!0),s()});a.button("#btnRelease",()=>{t.release()});a.button("#btnTrigger",()=>{o.clear(),t.trigger(),s()});const x=a.select("#selectShow",e=>{n.clear(),o.log(""),s()});j(h("#envEditor"),"change").pipe(D(e=>e.detail),F(1e3)).subscribe(e=>{c=e,i()});const i=()=>{try{t=p({...c,shouldLoop:l}),t.trigger(),o.clear(),n.clear(),s()}catch(e){o.error(e)}};a.checkbox("#chkLooping",e=>{l=e,i()});let r=!1;const s=()=>{if(r)return;const e=function(){let[d,f,u]=t.compute();if(u<0)debugger;if(d===void 0){r=!1;return}const m=x.value==="raw"?u:f;n.add(m),o.log(`${d} ${m.toFixed(3)}`),t.isDone?(console.log("Envelope done"),r=!1):(r=!0,window.requestAnimationFrame(e))};window.requestAnimationFrame(e)};i();
