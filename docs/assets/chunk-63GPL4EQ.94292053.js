import{_ as E,i as w,d as i,S as C,c as p,e as l,f as r}from"./chunk-4WJCK6OW.dc07580d.js";import{S as M}from"./chunk-KYWIDCWW.7a3a5fae.js";import{l as O,q as g,n as B}from"./chunk-RGWQELNS.82f84363.js";var Q={};E(Q,{continuously:()=>A,delay:()=>j,msRelativeTimer:()=>T,resettableTimeout:()=>R,sleep:()=>_,tickRelativeTimer:()=>q});var R=(e,t)=>{if(e===void 0)throw new Error("callback parameter is undefined");w(t,"aboveZero","timeoutMs");let a=0;return{start:(d=t)=>{w(d,"aboveZero","altTimeoutMs"),a!==0&&stop(),a=window.setTimeout(()=>{e(),a=0},d)},cancel:()=>{a!==0&&window.clearTimeout(a)},get isDone(){return a!==0}}},A=(e,t,a)=>{t!==void 0&&w(t,"aboveZero","intervalMs");let o=!1,c=0;const d=t===void 0?u=>window.requestAnimationFrame(u):u=>window.setTimeout(u,t),b=()=>{!o||(o=!1,c=0)},I=()=>{if(!o)return;const u=e(c++);if(u!==void 0&&!u){b();return}d(I)};return{start:()=>{if(o&&a!==void 0){const u=a(c);if(u!==void 0&&!u){b();return}}else if(o)return;o=!0,d(I)},get isDone(){return o},get ticks(){return c},cancel:b}},_=e=>new Promise(t=>setTimeout(t,e)),j=async(e,t)=>(w(t,"aboveZero","timeoutMs"),await _(t),Promise.resolve(await e())),T=()=>{let e=window.performance.now();return{reset:()=>{e=window.performance.now()},elapsed:()=>window.performance.now()-e}},q=()=>{let e=0;return{reset:()=>{e=0},elapsed:()=>e++}},N={};E(N,{adsr:()=>H,defaultAdsrOpts:()=>U,getEasings:()=>J,tick:()=>G,timer:()=>F});var y=Math.sqrt,s=Math.pow,S=Math.cos,v=Math.PI,k=Math.sin,Z=function(e){let t=performance.now();return{reset:()=>{t=performance.now()},elapsed:()=>B((performance.now()-t)/e),isDone:()=>performance.now()-t>=e}},$=function(e){let t=0;return{reset:()=>{t=0},elapsed:()=>B(t++/e),isDone:()=>t>=e}},F=function(e,t){return P(e,t,Z)},G=function(e,t){return P(e,t,$)},P=function(e,t,a){const o=K(e),c=a(t);return{isDone:()=>c.isDone(),compute:()=>{const d=c.elapsed();return o(d)},reset:()=>{c.reset()}}},K=function(e){const t=e.toLowerCase();for(const[a,o]of Object.entries(W))if(a.toLowerCase()===t)return o;throw Error(`Easing '${e}' not found.`)},J=function(){return Array.from(Object.keys(W))},L=function(e){const t=7.5625,a=2.75;return e<1/a?t*e*e:e<2/a?t*(e-=1.5/a)*e+.75:e<2.5/a?t*(e-=2.25/a)*e+.9375:t*(e-=2.625/a)*e+.984375},W={easeInSine:e=>1-S(e*v/2),easeOutSine:e=>k(e*v/2),easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutSine:e=>-(S(v*e)-1)/2,easeInOutQuad:e=>e<.5?2*e*e:1-s(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-s(1-e,3),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-s(1-e,4),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-s(1-e,5),easeInExpo:e=>e===0?0:s(2,10*e-10),easeOutExpo:e=>e===1?1:1-s(2,-10*e),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-s(-2*e+2,5)/2,easeInOutExpo:e=>e===0?0:e===1?1:e<.5?s(2,20*e-10)/2:(2-s(2,-20*e+10))/2,easeInCirc:e=>1-y(1-s(e,2)),easeOutCirc:e=>y(1-s(e-1,2)),easeInBack:e=>{const t=1.70158;return(t+1)*e*e*e-t*e*e},easeOutBack:e=>{const t=1.70158,a=t+1;return 1+a*s(e-1,3)+t*s(e-1,2)},easeInOutCirc:e=>e<.5?(1-y(1-s(2*e,2)))/2:(y(1-s(-2*e+2,2))+1)/2,easeInOutBack:e=>{const a=1.70158*1.525;return e<.5?s(2*e,2)*((a+1)*2*e-a)/2:(s(2*e-2,2)*((a+1)*(e*2-2)+a)+2)/2},easeInElastic:e=>{const t=2*v/3;return e===0?0:e===1?1:-s(2,10*e-10)*k((e*10-10.75)*t)},easeOutElastic:e=>{const t=2*v/3;return e===0?0:e===1?1:s(2,-10*e)*k((e*10-.75)*t)+1},easeInBounce:e=>1-L(1-e),easeOutBounce:L,easeInOutElastic:e=>{const t=2*v/4.5;return e===0?0:e===1?1:e<.5?-(s(2,20*e-10)*k((20*e-11.125)*t))/2:s(2,-20*e+10)*k((20*e-11.125)*t)/2+1},easeInOutBounce:e=>e<.5?(1-L(1-2*e))/2:(1+L(2*e-1))/2},U=()=>({attackBend:-1,decayBend:-.3,releaseBend:-.3,peakLevel:1,initialLevel:0,sustainLevel:.6,releaseLevel:0,attackDuration:600,decayDuration:200,releaseDuration:800,shouldLoop:!1}),n,D,h,f,m,Y=class extends C{constructor(e){super();p(this,n,void 0),p(this,D,void 0),p(this,h,void 0),p(this,f,void 0),p(this,m,void 0),i(this,"attackDuration"),i(this,"decayDuration"),i(this,"releaseDuration"),i(this,"decayDurationTotal"),i(this,"shouldLoop"),this.attackDuration=e.attackDuration??300,this.decayDuration=e.decayDuration??500,this.releaseDuration=e.releaseDuration??1e3,this.shouldLoop=e.shouldLoop??!1;const t={attack:["decay","release"],decay:["sustain","release"],sustain:["release"],release:["complete"],complete:null};l(this,n,new M("attack",t)),r(this,n).addEventListener("change",a=>{a.newState==="release"&&r(this,h)?.reset(),super.fireEvent("change",a)}),r(this,n).addEventListener("stop",a=>{super.fireEvent("complete",a)}),l(this,D,T),l(this,f,l(this,m,!1)),this.decayDurationTotal=this.attackDuration+this.decayDuration}switchState(){if(r(this,h)===void 0)return;let e=r(this,h).elapsed(),t=!1;do switch(t=!1,r(this,n).state){case"attack":e>this.attackDuration&&(r(this,n).next(),t=!0);break;case"decay":e>this.decayDurationTotal&&(r(this,n).next(),t=!0);break;case"sustain":r(this,f)||(e=0,r(this,n).next(),t=!0);break;case"release":e>this.releaseDuration&&(r(this,n).next(),t=!0);break;case"complete":this.shouldLoop&&this.trigger(r(this,m))}while(t)}computeRaw(){if(r(this,h)===void 0)return[void 0,0];this.switchState();const e=r(this,h).elapsed();let t=0;const a=r(this,n).state;switch(a){case"attack":t=e/this.attackDuration;break;case"decay":t=(e-this.attackDuration)/this.decayDuration;break;case"sustain":t=1;break;case"release":t=e/this.releaseDuration;break;case"complete":return[void 0,0];default:throw new Error(`State machine in unknown state: ${a}`)}return[a,t]}get isDone(){return r(this,n).isDone}trigger(e=!1){r(this,n).reset(),l(this,h,r(this,D).call(this)),l(this,f,e),l(this,m,e)}release(){l(this,f,!1),r(this,m)&&(r(this,n).state="release")}};n=new WeakMap;D=new WeakMap;h=new WeakMap;f=new WeakMap;m=new WeakMap;var z=class extends Y{constructor(e){super(e);i(this,"attackPath"),i(this,"decayPath"),i(this,"releasePath"),i(this,"initialLevel"),i(this,"peakLevel"),i(this,"releaseLevel"),i(this,"sustainLevel"),i(this,"attackBend"),i(this,"decayBend"),i(this,"releaseBend"),this.initialLevel=e.initialLevel??0,this.peakLevel=e.peakLevel??1,this.releaseLevel=e.releaseLevel??0,this.sustainLevel=e.sustainLevel??.75,this.attackBend=e.attackBend??0,this.releaseBend=e.releaseBend??0,this.decayBend=e.decayBend??0;const t=1;this.attackPath=O(g({x:0,y:this.initialLevel},{x:t,y:this.peakLevel},-this.attackBend)),this.decayPath=O(g({x:0,y:this.peakLevel},{x:t,y:this.sustainLevel},-this.decayBend)),this.releasePath=O(g({x:0,y:this.sustainLevel},{x:t,y:this.releaseLevel},-this.releaseBend))}compute(){const[e,t]=super.computeRaw();if(e===void 0)return[void 0,NaN,NaN];let a;switch(e){case"attack":a=this.attackPath.compute(t);break;case"decay":a=this.decayPath.compute(t);break;case"sustain":a={x:1,y:this.sustainLevel};break;case"release":a=this.releasePath.compute(t);break;case"complete":a={x:1,y:this.releaseLevel};break;default:throw new Error(`Unknown state: ${e}`)}return[e,a.y,t]}},H=e=>new z(e);export{H as a,U as d,_ as s};
