var h=Object.defineProperty;var m=(t,i,n)=>i in t?h(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n;var d=(t,i,n)=>(m(t,typeof i!="symbol"?i+"":i,n),n);import"./ReplPad.72cc829a.js";import"./loader.039e8a90.js";import{a as s,r,$,g as o,b as e,o as onIdle,c as onMedia,f as onVisible}from"./vendor.d6870787.js";import{C as Colour_exports,D as Drawing_exports}from"./chunk-LZ7XWTRR.a62618b8.js";import{D as debounce,b as continuously,Y as Ellipse_exports,Z as weightedInteger,_ as weighted,E as Easing_exports,$ as gaussian2}from"./chunk-ODBLOXCD.602f7099.js";import"./chunk-3CYWIYMP.09a63feb.js";import"./chunk-4DU25RMK.d28002ea.js";import"./chunk-AWXCQ245.1dcbd11a.js";import{r as repeat}from"./chunk-XYAFQIIV.7cd12906.js";import"./chunk-I3R3AECV.3528ce89.js";import{e as elStyles}from"./styles.8e3dc5e5.js";import{N as Normalise_exports}from"./chunk-PUGMC3D4.b587e8b3.js";import{j as jitter}from"./chunk-AW5RWBWK.f5ac0da0.js";import"./chunk-7TKMEWX5.f8def376.js";import"./chunk-VFK4G76S.4e6d0279.js";import{_ as __vitePreload}from"./preload-helper.8b4a5925.js";import"./chunk-FQLUQVDZ.7e80d7b0.js";var __defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__decorateClass=(t,i,n,a)=>{for(var l=a>1?void 0:a?__getOwnPropDesc(i,n):i,u=t.length-1,p;u>=0;u--)(p=t[u])&&(l=(a?p(i,n,l):p(l))||l);return a&&l&&__defProp(i,n,l),l};const tagName="density-plot-element";class DensityPlotElement extends s{constructor(){super();d(this,"func");d(this,"looper");d(this,"circleFillStyle");d(this,"values");d(this,"paintSpeedMs",20);d(this,"debounceFn",debounce((t,...i)=>{const n=this.shadowRoot.getElementById("txtFn");this.setFunctionByString(n.value),this.reset()},1e3));this.editable=!1,this.valuesToSample=1e3,this.classes={withBottom:!0},this.fn===void 0&&(this.fn="Math.random()"),this.looper=continuously((t,i)=>{if(this.draw(),this.values.length===0)return!1},this.paintSpeedMs,(t,i)=>{this.values=this.computeValues(this.valuesToSample)})}showWarning(t){if(t.length>0&&console.warn(t),this.shadowRoot===void 0||this.shadowRoot===null)return;const i=this.shadowRoot.getElementById("parseMsg");i!==null&&(i.innerText=t,t.length===0?i.style.display="none":i.style.display="block")}setFunctionByString(text){try{this.func={text,fn:()=>eval(text)},this.showWarning(""),this.values=this.computeValues(this.valuesToSample),this.fn=text}catch(t){this.showWarning(t.message),console.warn(t)}}setFunction(t,i){this.func={text:t,fn:i}}computeValues(t){const i=repeat(t,()=>{try{const n=this.func.fn();return this.showWarning(""),n}catch(n){return this.showWarning(n),0}});return this.scaleMax===void 0||this.scaleMin===void 0?Normalise_exports.array(i):i}updated(t){super.updated(t),this.setFunctionByString(this.fn),this.looper.start()}firstUpdated(t){super.firstUpdated(t)}draw(){if(this.shadowRoot===void 0)return;this.circleFillStyle===void 0&&(this.circleFillStyle=Colour_exports.opacity(Colour_exports.getCssVariable("yellow","yellow"),.05));const t=this.shadowRoot.querySelector("#plot");if(t===null){console.error("#plot not found :("),this.looper.cancel();return}const i=t.parentElement,n=i.getBoundingClientRect(),a=10,l={width:n.width-a-a,height:n.height-a-a};t.height!==i.clientHeight&&(t.height=i.clientHeight),t.width!==i.clientWidth&&(t.width=i.clientWidth);const u=t.getContext("2d"),c={x:this.values.pop()*l.width+a,y:l.height/2,...Ellipse_exports.fromDegrees(2,10,90)};Drawing_exports.ellipse(u,c,{fillStyle:this.circleFillStyle})}connectedCallback(){super.connectedCallback(),document.addEventListener("visibilitychange",t=>{document.visibilityState==="visible"?this.reset():document.visibilityState==="hidden"&&this.looper.cancel()})}clear(){const t=this.shadowRoot.querySelector("#plot");if(t===null)return;const i=t.getContext("2d"),a=t.parentElement.getBoundingClientRect();i.clearRect(0,0,a.width,a.height)}reset(){this.clear(),this.values=this.computeValues(this.valuesToSample),this.looper.start()}stop(){this.looper.cancel()}render(){return $`
    <div id="container" class=${o(this.classes)}>
    ${this.editable?$`
      <div class="toolbar">
        <input @input=${this.debounceFn} id="txtFn" type="text" value=${this.fn}>
      </div>`:""}
      <div id="parseMsg"></div>
      <div class="plotContainer">
        <canvas @click="${this.reset}" id="plot"></canvas>
      </div>
     
    </div> 
    `}}d(DensityPlotElement,"styles",[elStyles,r`
      #container {
        display: flex;
        flex-direction:column;
      }
      .plotContainer {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .controls {
        flex-direction: column;
        margin-bottom: 0.5em;
      }
      .controls input {
        font-family: var(--font-mono);
      }
      #parseMsg {
        position: absolute;
        border-radius: 0.2em;
        margin-top: 3em;
        background: var(--bg-mono);
        padding: 0.3em;  
      }
  `]);__decorateClass([e()],DensityPlotElement.prototype,"classes",2);__decorateClass([e({attribute:!0,type:String})],DensityPlotElement.prototype,"view",2);__decorateClass([e({type:String})],DensityPlotElement.prototype,"fn",2);__decorateClass([e({attribute:!0,type:Boolean})],DensityPlotElement.prototype,"editable",2);__decorateClass([e({attribute:!0,type:Number})],DensityPlotElement.prototype,"scaleMin",2);__decorateClass([e({attribute:!0,type:Number})],DensityPlotElement.prototype,"scaleMax",2);__decorateClass([e({attribute:!0,type:Number})],DensityPlotElement.prototype,"valuesToSample",2);customElements.get(tagName)||customElements.define(tagName,DensityPlotElement);window.weightedInteger=weightedInteger;window.weighted=weighted;window.jitter=jitter;window.Easings=Easing_exports;window.gaussian=gaussian2;importEl("plot1","density-plot-element",{fn:"Math.random()"});importEl("plot2","density-plot-element",{fn:"weighted('quadIn')",editable:!0});importEl("plot3","density-plot-element",{fn:"jitter(0.5, 0.2)",scaleMin:0,scaleMax:1,editable:!0});importEl("plot4","density-plot-element",{fn:"jitter(0.5, 0.2, {}, gaussian)",scaleMin:0,scaleMax:1,editable:!0});importEl("plot-gaussian","density-plot-element",{fn:"gaussian()",scaleMin:0,scaleMax:1,editable:!0});onIdle("Z12Vj7s",{name:"SidebarToggle",value:!0},async()=>{const[{default:t},{default:i}]=await Promise.all([__vitePreload(()=>import("./SidebarToggle.3829f389.js"),["assets/SidebarToggle.3829f389.js","assets/vendor.d6870787.js"]),__vitePreload(()=>import("./client.81b7a97f.js"),["assets/client.81b7a97f.js","assets/vendor.d6870787.js"])]);return(n,a)=>i(n)(t,{class:"astro-LPHCP5C4"},a)});onMedia("1SG1ld",{name:"TableOfContents",value:"(min-width: 50em)"},async()=>{const[{default:t},{default:i}]=await Promise.all([__vitePreload(()=>import("./TableOfContents.a11bce0e.js"),["assets/TableOfContents.a11bce0e.js","assets/vendor.d6870787.js"]),__vitePreload(()=>import("./client.81b7a97f.js"),["assets/client.81b7a97f.js","assets/vendor.d6870787.js"])]);return(n,a)=>i(n)(t,{headers:[{depth:2,slug:"random-number-generation",text:"Random number generation"},{depth:3,slug:"weighted-distribution",text:"Weighted distribution"},{depth:3,slug:"gaussian-distribution",text:"Gaussian distribution"},{depth:2,slug:"jitter",text:"Jitter"},{depth:2,slug:"with-arrays",text:"With arrays"}],class:"astro-LR56V2JR"},a)});onVisible("1Gmxo9",{name:"ThemeToggleButton",value:!0},async()=>{const[{default:t},{default:i}]=await Promise.all([__vitePreload(()=>import("./ThemeToggleButton.2eaeae2d.js"),["assets/ThemeToggleButton.2eaeae2d.js","assets/vendor.d6870787.js"]),__vitePreload(()=>import("./client.81b7a97f.js"),["assets/client.81b7a97f.js","assets/vendor.d6870787.js"])]);return(n,a)=>i(n)(t,{class:"astro-64IQMT5R"},a)});onMedia("1SG1ld",{name:"TableOfContents",value:"(max-width: 50em)"},async()=>{const[{default:t},{default:i}]=await Promise.all([__vitePreload(()=>import("./TableOfContents.a11bce0e.js"),["assets/TableOfContents.a11bce0e.js","assets/vendor.d6870787.js"]),__vitePreload(()=>import("./client.81b7a97f.js"),["assets/client.81b7a97f.js","assets/vendor.d6870787.js"])]);return(n,a)=>i(n)(t,{headers:[{depth:2,slug:"random-number-generation",text:"Random number generation"},{depth:3,slug:"weighted-distribution",text:"Weighted distribution"},{depth:3,slug:"gaussian-distribution",text:"Gaussian distribution"},{depth:2,slug:"jitter",text:"Jitter"},{depth:2,slug:"with-arrays",text:"With arrays"}],class:"astro-EDKM2WF4"},a)});
