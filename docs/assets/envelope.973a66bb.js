import{j as h,k as p}from"./chunk-HEUMPV43.90b57ae6.js";import"./chunk-MLAH6NN5.d44956e5.js";import"./chunk-GLOC4ABQ.54c1521f.js";import"./chunk-57USKCMY.339b34ad.js";import"./chunk-E6FEPMVF.c62dcddf.js";import{F as a}from"./chunk-C2GSEUUB.5e1d8426.js";import{r as b}from"./chunk-6RSYJ7PX.b9b486b6.js";import{a as n,C as v}from"./chunk-JV2C55HY.cd1c20e3.js";import"./chunk-VAHXRYL4.a924033a.js";import{h as k,m as w,i as j}from"./vendor.a59a155e.js";import"./chunk-YDTVC7MM.cb3895f8.js";const o=document.getElementById("envDataLog"),i=n.plot("#envData",{capacity:300,x:{...n.defaultAxis("x"),showLine:!1},y:{...n.defaultAxis("y"),showLine:!1,colour:v.getCssVariable("fg","grey")},lineWidth:3,autoSizeCanvas:!0,debug:!1});let c=!1,l={...h(),attackBend:1,decayBend:-1,releaseBend:1},t=p({...l,shouldLoop:c});t.addEventListener("change",e=>{a.button("#btnRelease").disabled=e.newState!=="sustain"});a.button("#btnTriggerHold",()=>{o.clear(),t.trigger(!0),s()});a.button("#btnRelease",()=>{t.release()});a.button("#btnTrigger",()=>{o.clear(),t.trigger(),s()});const E=a.select("#selectShow",e=>{i.clear(),o.log(""),s()});k(b("#envEditor"),"change").pipe(w(e=>e.detail),j(1e3)).subscribe(e=>{l=e,d()});const d=()=>{try{t=p({...l,shouldLoop:c}),t.trigger(),o.clear(),i.clear(),s()}catch(e){o.error(e)}};a.checkbox("#chkLooping",e=>{c=e,d()});let r=!1;const s=()=>{if(r)return;const e=function(){let[u,f,m]=t.compute();if(m<0)debugger;if(u===void 0){r=!1;return}const g=E.value==="raw"?m:f;i.add(g),o.log(`${u} ${g.toFixed(3)}`),t.isDone?(console.log("Envelope done"),r=!1):(r=!0,window.requestAnimationFrame(e))};window.requestAnimationFrame(e)};d();
