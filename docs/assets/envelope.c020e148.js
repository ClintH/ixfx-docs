import{d as h,a as m}from"./chunk-EZEZXIPN.e33bee28.js";import"./chunk-6TOA6ITG.8d1de678.js";import"./chunk-OW53XONI.6c7bafde.js";import"./chunk-HCHJFXUB.99dbbc1f.js";import{F as a,a as v}from"./chunk-X3ZGK7G7.0ec20d2d.js";import{P as p,a as w}from"./chunk-FM2K2PHF.079c4314.js";import"./chunk-776RPVJQ.ce76deb3.js";import{f as k,m as E,d as j}from"./vendor.a3225d27.js";const o=document.getElementById("envDataLog"),b=p.create();b.add("series-",p.getCssVariable("accent-bold","yellow"));const n=w.plot2("#envData",{capacity:300,showYAxis:!0,palette:b,lineWidth:3});let c=!1,l={...h(),attackBend:1,decayBend:-1,releaseBend:1},t=m({...l,shouldLoop:c});t.addEventListener("change",e=>{a.button("#btnRelease").disabled=e.newState!=="sustain"});a.button("#btnTriggerHold",()=>{o.clear(),t.trigger(!0),s()});a.button("#btnRelease",()=>{t.release()});a.button("#btnTrigger",()=>{o.clear(),t.trigger(),s()});const F=a.select("#selectShow",e=>{n.clear(),o.log(""),s()});k(v("#envEditor"),"change").pipe(E(e=>e.detail),j(1e3)).subscribe(e=>{l=e,i()});const i=()=>{try{t=m({...l,shouldLoop:c}),t.trigger(),o.clear(),n.clear(),s()}catch(e){o.error(e)}};a.checkbox("#chkLooping",e=>{c=e,i()});let r=!1;const s=()=>{if(r)return;const e=function(){let[d,f,u]=t.compute();if(u<0)debugger;if(d===void 0){r=!1;return}const g=F.value==="raw"?u:f;n.add(g),o.log(`${d} ${g.toFixed(3)}`),t.isDone?(console.log("Envelope done"),r=!1):(r=!0,window.requestAnimationFrame(e))};window.requestAnimationFrame(e)};i();
