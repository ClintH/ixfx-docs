import{j as h,k as p}from"./chunk-HEUMPV43.b1865ec8.js";import"./chunk-MLAH6NN5.257adfe4.js";import"./chunk-GLOC4ABQ.1540f006.js";import"./chunk-57USKCMY.8e2e6641.js";import"./chunk-E6FEPMVF.c62dcddf.js";import{F as a}from"./chunk-C2GSEUUB.5e1d8426.js";import{r as f}from"./chunk-6RSYJ7PX.b9b486b6.js";import{P as v,C as k,a as w}from"./chunk-4QHRIV2D.fbda9e8a.js";import"./chunk-VAHXRYL4.7bd99bcd.js";import{h as j,m as E,i as D}from"./vendor.62e1b176.js";import"./chunk-YDTVC7MM.cb3895f8.js";const o=document.getElementById("envDataLog"),b=v.create();b.add("series",k.getCssVariable("accent-bold","yellow"));const n=w.plot("#envData",{capacity:300,showYAxis:!0,palette:b,lineWidth:3,autoSizeCanvas:!0});let c=!1,i={...h(),attackBend:1,decayBend:-1,releaseBend:1},t=p({...i,shouldLoop:c});t.addEventListener("change",e=>{a.button("#btnRelease").disabled=e.newState!=="sustain"});a.button("#btnTriggerHold",()=>{o.clear(),t.trigger(!0),s()});a.button("#btnRelease",()=>{t.release()});a.button("#btnTrigger",()=>{o.clear(),t.trigger(),s()});const C=a.select("#selectShow",e=>{n.clear(),o.log(""),s()});j(f("#envEditor"),"change").pipe(E(e=>e.detail),D(1e3)).subscribe(e=>{i=e,l()});const l=()=>{try{t=p({...i,shouldLoop:c}),t.trigger(),o.clear(),n.clear(),s()}catch(e){o.error(e)}};a.checkbox("#chkLooping",e=>{c=e,l()});let r=!1;const s=()=>{if(r)return;const e=function(){let[d,g,u]=t.compute();if(u<0)debugger;if(d===void 0){r=!1;return}const m=C.value==="raw"?u:g;n.add(m),o.log(`${d} ${m.toFixed(3)}`),t.isDone?(console.log("Envelope done"),r=!1):(r=!0,window.requestAnimationFrame(e))};window.requestAnimationFrame(e)};l();
