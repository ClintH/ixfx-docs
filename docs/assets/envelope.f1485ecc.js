import{d as f,a as p}from"./chunk-ZKEVKSIO.c58141c6.js";import"./chunk-2THIUUNP.1ea09146.js";import"./chunk-HKPWQDQW.6ecee2ff.js";import{l as v,F as a,a as w}from"./chunk-L7NPGFXB.2df40d37.js";import{P as b,a as k}from"./chunk-EJYCGNKW.43480ee8.js";import"./chunk-RRAKEYPR.51ea3209.js";import{h as E,m as D,i as j}from"./vendor.ae2f83e2.js";const o=v("#envDataStream",{minIntervalMs:20,capacity:150}),n=b.create();n.add("scaled","yellow");n.add("scaled-axis","whitesmoke");const l=k.plot2("#envData",{capacity:300,showYAxis:!0,palette:n,lineWidth:3});let c={...f(),attackBend:1,decayBend:-1,releaseBend:1},i=!1,t=p({...c,shouldLoop:i});t.addEventListener("change",e=>{a.button("#btnRelease").disabled=e.newState!=="sustain"});a.button("#btnTriggerHold",()=>{o.clear(),t.trigger(!0),r()});a.button("#btnRelease",()=>{t.release()});a.button("#btnTrigger",()=>{o.clear(),t.trigger(),r()});const x=a.select("#selectShow",e=>{l.clear(),o.log(),r()});E(w("#envEditor"),"change").pipe(D(e=>e.detail),j(1e3)).subscribe(e=>{c=e,console.log("hello"),d()});const d=()=>{try{t=p({...c,shouldLoop:i}),t.trigger(),o.clear(),l.clear(),r()}catch(e){o.error(e)}};a.checkbox("#chkLooping",e=>{i=e,d()});let s=!1;const r=()=>{if(s)return;const e=function(){let[u,g,h]=t.compute();if(u===void 0){s=!1;return}const m=x.value==="raw"?h:g;l.add(m),o.log(`${u} ${m.toFixed(3)}`),t.isDone?(console.log("Envelope done"),s=!1):(s=!0,window.requestAnimationFrame(e))};window.requestAnimationFrame(e)};d();
